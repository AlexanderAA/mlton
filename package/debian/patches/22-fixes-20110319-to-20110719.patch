Index: regression/weird-word1.sml
===================================================================
--- regression/weird-word1.sml	(revision 0)
+++ regression/weird-word1.sml	(revision 7552)
@@ -0,0 +1,26 @@
+fun fib (w: Word5.word) : Word5.word =
+   if w <= 0wx1
+      then 0wx1
+   else fib (w - 0wx1) + fib (w - 0wx2)
+
+val s =
+   case (fib 0wx5) of
+      0wx0 => "0wx0"
+    | 0wx1 => "0wx1"
+    | 0wx2 => "0wx2"
+    | 0wx3 => "0wx3"
+    | 0wx4 => "0wx4"
+    | 0wx5 => "0wx5"
+    | 0wx6 => "0wx6"
+    | 0wx7 => "0wx7"
+    | 0wx8 => "0wx8"
+    | 0wx9 => "0wx9"
+    | 0wxA => "0wxA"
+    | 0wxB => "0wxB"
+    | 0wxC => "0wxC"
+    | 0wxD => "0wxD"
+    | 0wxE => "0wxE"
+    | 0wxF => "0wxF"
+    | _ => "zzz"
+
+val _ = print (concat [s, "\n"])
Index: regression/weird-word2.sml
===================================================================
--- regression/weird-word2.sml	(revision 0)
+++ regression/weird-word2.sml	(revision 7552)
@@ -0,0 +1,41 @@
+fun fib (w: Word5.word) : Word5.word =
+   if w <= 0wx1
+      then 0wx1
+   else fib (w - 0wx1) + fib (w - 0wx2)
+
+val s =
+   case (fib 0wx5) of
+      0wx0 => "0wx0"
+    | 0wx1 => "0wx1"
+    | 0wx2 => "0wx2"
+    | 0wx3 => "0wx3"
+    | 0wx4 => "0wx4"
+    | 0wx5 => "0wx5"
+    | 0wx6 => "0wx6"
+    | 0wx7 => "0wx7"
+    | 0wx8 => "0wx8"
+    | 0wx9 => "0wx9"
+    | 0wxA => "0wxA"
+    | 0wxB => "0wxB"
+    | 0wxC => "0wxC"
+    | 0wxD => "0wxD"
+    | 0wxE => "0wxE"
+    | 0wxF => "0wxF"
+    | 0wx10 => "0wx10"
+    | 0wx11 => "0wx11"
+    | 0wx12 => "0wx12"
+    | 0wx13 => "0wx13"
+    | 0wx14 => "0wx14"
+    | 0wx15 => "0wx15"
+    | 0wx16 => "0wx16"
+    | 0wx17 => "0wx17"
+    | 0wx18 => "0wx18"
+    | 0wx19 => "0wx19"
+    | 0wx1A => "0wx1A"
+    | 0wx1B => "0wx1B"
+    | 0wx1C => "0wx1C"
+    | 0wx1D => "0wx1D"
+    | 0wx1E => "0wx1E"
+    | 0wx1F => "0wx1F"
+
+val _ = print (concat [s, "\n"])
Index: regression/weird-word1.ok
===================================================================
--- regression/weird-word1.ok	(revision 0)
+++ regression/weird-word1.ok	(revision 7552)
@@ -0,0 +1 @@
+0wx8
Index: regression/weird-word2.ok
===================================================================
--- regression/weird-word2.ok	(revision 0)
+++ regression/weird-word2.ok	(revision 7552)
@@ -0,0 +1 @@
+0wx8
Index: mllex/lexgen.sml
===================================================================
--- mllex/lexgen.sml	(revision 7524)
+++ mllex/lexgen.sml	(revision 7552)
@@ -1,3 +1,6 @@
+(* Modified by Matthew Fluet on 2011-06-17.
+ * Use simple file name (rather than absolute paths) in line directives in output.
+ *)
 (* Modified by Vesa Karvonen on 2007-12-19.
  * Create line directives in output.
  *)
@@ -295,7 +298,7 @@
    val OutFile = ref ""
    fun fmtLineDir {line, col} file =
        String.concat ["(*#line ", Int.toString line, ".", Int.toString (col+1),
-                      " \"", OS.FileSys.fullPath file, "\"*)"]
+                      " \"", file, "\"*)"]
    val sayPos =
     fn SOME pos => say (fmtLineDir pos (!InFile))
      | NONE => (say (fmtLineDir {line = !LexOutLine, col = 0} (!OutFile));
@@ -1284,7 +1287,7 @@
 
 fun lexGen(infile) =
     let val outfile = infile ^ ".sml"
-        val () = (InFile := infile; OutFile := outfile)
+        val () = (InFile := OS.Path.file infile; OutFile := OS.Path.file outfile)
       fun PrintLexer (ends) =
     let val sayln = fn x => (say x; say "\n")
      in case !ArgCode
Index: include/bytecode.h
===================================================================
--- include/bytecode.h	(revision 7524)
+++ include/bytecode.h	(revision 7552)
@@ -1,12 +0,0 @@
-/* Copyright (C) 2004-2007 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#include <stdint.h>
-#include "ml-types.h"
-#include "c-types.h"
-#include "export.h"
-#include "interpret.h"
Index: include/bytecode-main.h
===================================================================
--- include/bytecode-main.h	(revision 7524)
+++ include/bytecode-main.h	(revision 7552)
@@ -1,87 +0,0 @@
-/* Copyright (C) 2004-2007 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#ifndef _BYTECODE_MAIN_H_
-#define _BYTECODE_MAIN_H_
-
-#include "common-main.h"
-#include "interpret.h"
-
-#ifndef DEBUG_CODEGEN
-#define DEBUG_CODEGEN FALSE
-#endif
-
-PRIVATE extern struct Bytecode MLton_bytecode;
-
-static GC_frameIndex returnAddressToFrameIndex (GC_returnAddress ra) {
-        return *((GC_frameIndex*)(MLton_bytecode.code + ra - sizeof(GC_frameIndex)));
-}
-
-#define MLtonCallFromC                                                  \
-static void MLton_callFromC () {                                        \
-        uintptr_t nextFun;                                              \
-        GC_state s;                                                     \
-                                                                        \
-        if (DEBUG_CODEGEN)                                              \
-                fprintf (stderr, "MLton_callFromC() starting\n");       \
-        s = &gcState;                                                   \
-        GC_setSavedThread (s, GC_getCurrentThread (s));                 \
-        s->atomicState += 3;                                            \
-        if (s->signalsInfo.signalIsPending)                             \
-                s->limit = s->limitPlusSlop - GC_HEAP_LIMIT_SLOP;       \
-        /* Switch to the C Handler thread. */                           \
-        GC_switchToThread (s, GC_getCallFromCHandlerThread (s), 0);     \
-        nextFun = *(uintptr_t*)(s->stackTop - GC_RETURNADDRESS_SIZE);   \
-        MLton_Bytecode_interpret (&MLton_bytecode, nextFun);            \
-        s->atomicState += 1;                                            \
-        GC_switchToThread (s, GC_getSavedThread (s), 0);                \
-        s->atomicState -= 1;                                            \
-        if (0 == s->atomicState                                         \
-            && s->signalsInfo.signalIsPending)                          \
-                s->limit = 0;                                           \
-        if (DEBUG_CODEGEN)                                              \
-                fprintf (stderr, "MLton_callFromC done\n");             \
-}                                                                       \
-
-#define MLtonMain(al, mg, mfs, mmc, pk, ps, ml)                         \
-MLtonCallFromC                                                          \
-PUBLIC int MLton_main (int argc, char* argv[]) {                        \
-        uintptr_t nextFun;                                              \
-        Initialize (al, mg, mfs, mmc, pk, ps);                          \
-        if (gcState.amOriginal) {                                       \
-                real_Init();                                            \
-                nextFun = ml;                                           \
-        } else {                                                        \
-                /* Return to the saved world */                         \
-                nextFun = *(uintptr_t*)(gcState.stackTop - GC_RETURNADDRESS_SIZE); \
-        }                                                               \
-        MLton_Bytecode_interpret (&MLton_bytecode, nextFun);            \
-        return 1;                                                       \
-}
-
-#define MLtonLibrary(al, mg, mfs, mmc, pk, ps, ml)                      \
-MLtonCallFromC                                                          \
-PUBLIC void LIB_OPEN(LIBNAME) (int argc, char* argv[]) {                \
-        uintptr_t nextFun;                                              \
-        Initialize (al, mg, mfs, mmc, pk, ps);                          \
-        if (gcState.amOriginal) {                                       \
-                real_Init();                                            \
-                nextFun = ml;                                           \
-        } else {                                                        \
-                /* Return to the saved world */                         \
-                nextFun = *(uintptr_t*)(gcState.stackTop - GC_RETURNADDRESS_SIZE); \
-        }                                                               \
-        MLton_Bytecode_interpret (&MLton_bytecode, nextFun);            \
-}                                                                       \
-PUBLIC void LIB_CLOSE(LIBNAME) () {                                     \
-        uintptr_t nextFun;                                              \
-        nextFun = *(uintptr_t*)(gcState.stackTop - GC_RETURNADDRESS_SIZE); \
-        MLton_Bytecode_interpret (&MLton_bytecode, nextFun);            \
-        GC_done(&gcState);                                              \
-}
-
-#endif /* #ifndef _BYTECODE_MAIN_H */
Index: runtime/gdtoa-patch.mlton
===================================================================
--- runtime/gdtoa-patch.mlton	(revision 7524)
+++ runtime/gdtoa-patch.mlton	(revision 7552)
@@ -1,98 +1,103 @@
---- gdtoa/gdtoa.h.orig	2008-07-31 18:07:23.128804424 +0200
-+++ gdtoa/gdtoa.h	2008-07-31 18:09:01.333773640 +0200
-@@ -39,6 +39,7 @@
- #define GDTOA_H_INCLUDED
- 
- #include "arith.h"
-+#include "../export.h"
- 
- #ifndef Long
- #define Long long
-@@ -108,42 +109,42 @@
- extern "C" {
- #endif
- 
--extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
-+PRIVATE extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
- 			int *sign, char **rve));
--extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
-+PRIVATE extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
- 			int mode, int ndigits, int *decpt, char **rve));
--extern void gdtoa__freedtoa ANSI((char*));
--extern float  gdtoa__strtof ANSI((CONST char *, char **));
--extern double gdtoa__strtod ANSI((CONST char *, char **));
--extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
--
--extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, unsigned));
--extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, unsigned));
--extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, unsigned));
--extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, unsigned));
--extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, unsigned));
--extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, unsigned));
--
--extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
--extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
--extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
--extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
--extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
--extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
--extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
--extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
--extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
--extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
--extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
--extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
-+PRIVATE extern void gdtoa__freedtoa ANSI((char*));
-+PRIVATE extern float  gdtoa__strtof ANSI((CONST char *, char **));
-+PRIVATE extern double gdtoa__strtod ANSI((CONST char *, char **));
-+PRIVATE extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
-+
-+PRIVATE extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, unsigned));
-+PRIVATE extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, unsigned));
-+PRIVATE extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, unsigned));
-+PRIVATE extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, unsigned));
-+PRIVATE extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, unsigned));
-+PRIVATE extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, unsigned));
-+
-+PRIVATE extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
-+PRIVATE extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
-+PRIVATE extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
-+PRIVATE extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
-+PRIVATE extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
-+PRIVATE extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
-+PRIVATE extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
-+PRIVATE extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
-+PRIVATE extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
-+PRIVATE extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
-+PRIVATE extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
-+PRIVATE extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
- #if 1
--extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
--extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
--extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
--extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
--extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
--extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
--extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
-+PRIVATE extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
-+PRIVATE extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
-+PRIVATE extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
-+PRIVATE extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
-+PRIVATE extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
-+PRIVATE extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
-+PRIVATE extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
- #else
- #define gdtoa__strtopd(s,se,x) gdtoa__strtord(s,se,1,x)
- #define gdtoa__strtopdd(s,se,x) gdtoa__strtordd(s,se,1,x)
---- gdtoa/gdtoaimp.h.orig	2008-10-04 02:33:51 +0000
-+++ gdtoa/gdtoaimp.h	2008-10-04 02:34:41 +0000
-@@ -503,7 +503,8 @@
- #define g__fmt g__fmt_D2A
- #define gethex gethex_D2A
- #define hexdig hexdig_D2A
--#define hexdig_init hexdig_init_D2A
-+/* work around MinGW bug */
-+#define hexdig_init hexdig_init_D3A
- #define hexnan hexnan_D2A
- #define hi0bits hi0bits_D2A
- #define i2b i2b_D2A
+diff -P -C 2 -r gdtoa/gdtoa.h gdtoa-new/gdtoa.h
+*** gdtoa/gdtoa.h	2011-05-27 17:20:57.492026828 -0400
+--- gdtoa-new/gdtoa.h	2011-05-27 17:21:21.004032383 -0400
+***************
+*** 105,144 ****
+  #endif
+  
+! extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
+  			int *sign, char **rve));
+! extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
+  			int mode, int ndigits, int *decpt, char **rve));
+! extern void gdtoa__freedtoa ANSI((char*));
+! extern float  gdtoa__strtof ANSI((CONST char *, char **));
+! extern double gdtoa__strtod ANSI((CONST char *, char **));
+! extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
+  
+! extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, size_t));
+! extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, size_t));
+! extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, size_t));
+! extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, size_t));
+  
+! extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
+! extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
+! extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
+! extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
+! extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
+! extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
+! extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
+! extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
+! extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
+  #if 1
+! extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
+! extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
+! extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
+! extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
+  #else
+  #define gdtoa__strtopd(s,se,x) gdtoa__strtord(s,se,1,x)
+--- 105,144 ----
+  #endif
+  
+! PRIVATE extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
+  			int *sign, char **rve));
+! PRIVATE extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
+  			int mode, int ndigits, int *decpt, char **rve));
+! PRIVATE extern void gdtoa__freedtoa ANSI((char*));
+! PRIVATE extern float  gdtoa__strtof ANSI((CONST char *, char **));
+! PRIVATE extern double gdtoa__strtod ANSI((CONST char *, char **));
+! PRIVATE extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
+  
+! PRIVATE extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, size_t));
+! PRIVATE extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, size_t));
+! PRIVATE extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, size_t));
+! PRIVATE extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, size_t));
+! PRIVATE extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, size_t));
+! PRIVATE extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, size_t));
+  
+! PRIVATE extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
+! PRIVATE extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
+! PRIVATE extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
+! PRIVATE extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
+! PRIVATE extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
+! PRIVATE extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
+! PRIVATE extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
+! PRIVATE extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
+! PRIVATE extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
+! PRIVATE extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
+! PRIVATE extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
+! PRIVATE extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
+  #if 1
+! PRIVATE extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
+! PRIVATE extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
+! PRIVATE extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
+! PRIVATE extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
+! PRIVATE extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
+! PRIVATE extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
+! PRIVATE extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
+  #else
+  #define gdtoa__strtopd(s,se,x) gdtoa__strtord(s,se,1,x)
+diff -P -C 2 -r gdtoa/gdtoaimp.h gdtoa-new/gdtoaimp.h
+*** gdtoa/gdtoaimp.h	2011-05-27 17:20:57.493026911 -0400
+--- gdtoa-new/gdtoaimp.h	2011-05-27 17:21:21.004032383 -0400
+***************
+*** 504,508 ****
+  #define gethex gethex_D2A
+  #define hexdig hexdig_D2A
+! #define hexdig_init hexdig_init_D2A
+  #define hexnan hexnan_D2A
+  #define hi0bits(x) hi0bits_D2A((ULong)(x))
+--- 504,509 ----
+  #define gethex gethex_D2A
+  #define hexdig hexdig_D2A
+! /* work around MinGW bug */
+! #define hexdig_init hexdig_init_D3A
+  #define hexnan hexnan_D2A
+  #define hi0bits(x) hi0bits_D2A((ULong)(x))
Index: runtime/gc/copy-thread.c
===================================================================
--- runtime/gc/copy-thread.c	(revision 7524)
+++ runtime/gc/copy-thread.c	(revision 7552)
@@ -1,4 +1,5 @@
-/* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+/* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -35,7 +36,7 @@
   GC_thread fromThread;
   GC_stack fromStack;
   GC_thread toThread;
-  GC_stack toStack;
+  GC_stack __attribute__ ((unused)) toStack;
 
   if (DEBUG_THREADS)
     fprintf (stderr, "GC_copyCurrentThread\n");
@@ -57,7 +58,7 @@
   GC_thread fromThread;
   GC_stack fromStack;
   GC_thread toThread;
-  GC_stack toStack;
+  GC_stack __attribute__ ((unused)) toStack;
 
   if (DEBUG_THREADS)
     fprintf (stderr, "GC_copyThread ("FMTPTR")\n", (uintptr_t)p);
Index: runtime/gc/heap.c
===================================================================
--- runtime/gc/heap.c	(revision 7524)
+++ runtime/gc/heap.c	(revision 7552)
@@ -1,4 +1,4 @@
-/* Copyright (C) 2009-2010 Matthew Fluet.
+/* Copyright (C) 2009-2011 Matthew Fluet.
  * Copyright (C) 2005-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  *
@@ -41,7 +41,7 @@
   size_t liveMapsSize, liveWithMapsSize;
   size_t currentMapsSize, currentWithMapsSize;
   size_t resSize, resWithMapsSize;
-  size_t syslimSize, syslimMapsSize, syslimWithMapsSize;
+  size_t syslimSize, __attribute__ ((unused)) syslimMapsSize, syslimWithMapsSize;
   double ratio;
 
   syslimWithMapsSize = alignDown (SIZE_MAX, s->sysvals.pageSize);
@@ -553,12 +553,11 @@
  */
 void resizeHeapSecondary (GC_state s) {
   size_t primarySize, primaryWithMapsSize;
-  size_t secondarySize, secondaryWithMapsSize;
+  size_t secondarySize;
 
   primarySize = s->heap.size;
   primaryWithMapsSize = s->heap.withMapsSize;
   secondarySize = s->secondaryHeap.size;
-  secondaryWithMapsSize = s->secondaryHeap.withMapsSize;
   if (DEBUG_RESIZING)
     fprintf (stderr, "secondaryHeapResize\n");
   if (0 == secondarySize)
Index: runtime/gc/init-world.c
===================================================================
--- runtime/gc/init-world.c	(revision 7524)
+++ runtime/gc/init-world.c	(revision 7552)
@@ -1,4 +1,5 @@
-/* Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
+/* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -51,7 +52,7 @@
   size_t bytes;
   bool neg;
   __mpz_struct resmpz;
-  int ans;
+  __attribute__ ((unused)) int ans;
 
   assert (isFrontierAligned (s, s->frontier));
   for (i = 0; i < s->intInfInitsLength; i++) {
Index: runtime/gc/profiling.c
===================================================================
--- runtime/gc/profiling.c	(revision 7524)
+++ runtime/gc/profiling.c	(revision 7552)
@@ -1,4 +1,5 @@
-/* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+/* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -76,7 +77,6 @@
 
 void enterForProfiling (GC_state s, GC_sourceSeqIndex sourceSeqIndex) {
   uint32_t i;
-  GC_profileData p;
   GC_sourceIndex sourceIndex;
   uint32_t *sourceSeq;
 
@@ -84,7 +84,6 @@
     fprintf (stderr, "enterForProfiling ("FMTSSI")\n", sourceSeqIndex);
   assert (s->profiling.stack);
   assert (sourceSeqIndex < s->sourceMaps.sourceSeqsLength);
-  p = s->profiling.data;
   sourceSeq = s->sourceMaps.sourceSeqs[sourceSeqIndex];
   for (i = 1; i <= sourceSeq[0]; i++) {
     sourceIndex = sourceSeq[i];
@@ -123,10 +122,8 @@
 }
 
 void leaveSourceForProfiling (GC_state s, GC_profileMasterIndex i) {
-  GC_profileData p;
   GC_profileStack ps;
 
-  p = s->profiling.data;
   ps = getProfileStackInfo (s, i);
   assert (ps->numOccurrences > 0);
   ps->numOccurrences--;
@@ -136,7 +133,6 @@
 
 void leaveForProfiling (GC_state s, GC_sourceSeqIndex sourceSeqIndex) {
   int32_t i;
-  GC_profileData p;
   GC_sourceIndex sourceIndex;
   uint32_t *sourceSeq;
 
@@ -144,7 +140,6 @@
     fprintf (stderr, "leaveForProfiling ("FMTSSI")\n", sourceSeqIndex);
   assert (s->profiling.stack);
   assert (sourceSeqIndex < s->sourceMaps.sourceSeqsLength);
-  p = s->profiling.data;
   sourceSeq = s->sourceMaps.sourceSeqs[sourceSeqIndex];
   for (i = sourceSeq[0]; i > 0; i--) {
     sourceIndex = sourceSeq[i];
Index: runtime/gc/invariant.c
===================================================================
--- runtime/gc/invariant.c	(revision 7524)
+++ runtime/gc/invariant.c	(revision 7552)
@@ -1,4 +1,5 @@
-/* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+/* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -42,6 +43,8 @@
 
       assert (layout->size <= s->maxFrameSize);
       offsets = layout->offsets;
+      for (unsigned int j = 0; j < offsets[0]; ++j)
+        assert (offsets[j + 1] < layout->size);
     }
   }
   /* Generational */
Index: runtime/gdtoa-patch
===================================================================
--- runtime/gdtoa-patch	(revision 7524)
+++ runtime/gdtoa-patch	(revision 7552)
@@ -1,918 +1,1119 @@
-diff -u gdtoa.orig/arithchk.c gdtoa/arithchk.c
---- gdtoa.orig/arithchk.c	1998-06-19 20:46:11 +0000
-+++ gdtoa/arithchk.c	2008-10-04 02:01:43 +0000
-@@ -136,7 +136,7 @@
- 	return b == 0.;
- 	}
- 
--main()
-+int main()
- {
- 	Akind *a = 0;
- 	int Ldef = 0;
-diff -u gdtoa.orig/dmisc.c gdtoa/dmisc.c
---- gdtoa.orig/dmisc.c	1998-11-02 19:34:31 +0000
-+++ gdtoa/dmisc.c	2008-10-04 02:01:43 +0000
-@@ -89,9 +89,9 @@
- 
-  void
- #ifdef KR_headers
--freedtoa(s) char *s;
-+gdtoa__freedtoa(s) char *s;
- #else
--freedtoa(char *s)
-+gdtoa__freedtoa(char *s)
- #endif
- {
- 	Bigint *b = (Bigint *)((int *)s - 1);
-diff -u gdtoa.orig/dtoa.c gdtoa/dtoa.c
---- gdtoa.orig/dtoa.c	2000-11-02 15:09:01 +0000
-+++ gdtoa/dtoa.c	2008-10-04 02:01:43 +0000
-@@ -80,7 +80,7 @@
- #endif
- 
-  char *
--dtoa
-+gdtoa__dtoa
- #ifdef KR_headers
- 	(d, mode, ndigits, decpt, sign, rve)
- 	double d; int mode, ndigits, *decpt, *sign; char **rve;
-@@ -142,7 +142,7 @@
- 
- #ifndef MULTIPLE_THREADS
- 	if (dtoa_result) {
--		freedtoa(dtoa_result);
-+		gdtoa__freedtoa(dtoa_result);
- 		dtoa_result = 0;
- 		}
- #endif
-diff -u gdtoa.orig/g_Qfmt.c gdtoa/g_Qfmt.c
---- gdtoa.orig/g_Qfmt.c	2000-11-01 15:21:10 +0000
-+++ gdtoa/g_Qfmt.c	2008-10-04 02:01:43 +0000
-@@ -57,9 +57,9 @@
- 
-  char*
- #ifdef KR_headers
--g_Qfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
-+gdtoa__g_Qfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
- #else
--g_Qfmt(char *buf, void *V, int ndig, unsigned bufsize)
-+gdtoa__g_Qfmt(char *buf, void *V, int ndig, unsigned bufsize)
- #endif
- {
- 	static FPI fpi = { 113, 1-16383-113+1, 32766 - 16383 - 113 + 1, 1, 0 };
-@@ -115,6 +115,6 @@
- 			return 0;
- 		mode = 0;
- 		}
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	return g__fmt(buf, s, se, decpt, sign);
- 	}
-diff -u gdtoa.orig/g__fmt.c gdtoa/g__fmt.c
---- gdtoa.orig/g__fmt.c	2003-03-21 20:59:43 +0000
-+++ gdtoa/g__fmt.c	2008-10-04 02:01:43 +0000
-@@ -96,6 +96,6 @@
- 			*b++ = '0';
- 		*b = 0;
- 		}
--	freedtoa(s0);
-+	gdtoa__freedtoa(s0);
- 	return b;
+diff -P -C 2 -r gdtoa/dmisc.c gdtoa-new/dmisc.c
+*** gdtoa/dmisc.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/dmisc.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 84,90 ****
+   void
+  #ifdef KR_headers
+! freedtoa(s) char *s;
+  #else
+! freedtoa(char *s)
+  #endif
+  {
+--- 84,90 ----
+   void
+  #ifdef KR_headers
+! gdtoa__freedtoa(s) char *s;
+  #else
+! gdtoa__freedtoa(char *s)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/dtoa.c gdtoa-new/dtoa.c
+*** gdtoa/dtoa.c	2010-09-15 10:59:11.000000000 -0400
+--- gdtoa-new/dtoa.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 74,78 ****
+  
+   char *
+! dtoa
+  #ifdef KR_headers
+  	(d0, mode, ndigits, decpt, sign, rve)
+--- 74,78 ----
+  
+   char *
+! gdtoa__dtoa
+  #ifdef KR_headers
+  	(d0, mode, ndigits, decpt, sign, rve)
+***************
+*** 147,151 ****
+  #ifndef MULTIPLE_THREADS
+  	if (dtoa_result) {
+! 		freedtoa(dtoa_result);
+  		dtoa_result = 0;
+  		}
+--- 147,151 ----
+  #ifndef MULTIPLE_THREADS
+  	if (dtoa_result) {
+! 		gdtoa__freedtoa(dtoa_result);
+  		dtoa_result = 0;
+  		}
+diff -P -C 2 -r gdtoa/g_ddfmt.c gdtoa-new/g_ddfmt.c
+*** gdtoa/g_ddfmt.c	2009-04-11 23:11:05.000000000 -0400
+--- gdtoa-new/g_ddfmt.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 34,40 ****
+   char *
+  #ifdef KR_headers
+! g_ddfmt(buf, dd0, ndig, bufsize) char *buf; double *dd0; int ndig; size_t bufsize;
+  #else
+! g_ddfmt(char *buf, double *dd0, int ndig, size_t bufsize)
+  #endif
+  {
+--- 34,40 ----
+   char *
+  #ifdef KR_headers
+! gdtoa__g_ddfmt(buf, dd0, ndig, bufsize) char *buf; double *dd0; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_ddfmt(char *buf, double *dd0, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 164,168 ****
+  	fpi.sudden_underflow = 0;
+  	i = STRTOG_Normal;
+! 	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	b = g__fmt(buf, s, se, decpt, z->sign, bufsize);
+  	Bfree(z);
+--- 164,168 ----
+  	fpi.sudden_underflow = 0;
+  	i = STRTOG_Normal;
+! 	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	b = g__fmt(buf, s, se, decpt, z->sign, bufsize);
+  	Bfree(z);
+diff -P -C 2 -r gdtoa/g_dfmt.c gdtoa-new/g_dfmt.c
+*** gdtoa/g_dfmt.c	2010-07-08 23:38:41.000000000 -0400
+--- gdtoa-new/g_dfmt.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 34,40 ****
+   char*
+  #ifdef KR_headers
+! g_dfmt(buf, d, ndig, bufsize) char *buf; double *d; int ndig; size_t bufsize;
+  #else
+! g_dfmt(char *buf, double *d, int ndig, size_t bufsize)
+  #endif
+  {
+--- 34,40 ----
+   char*
+  #ifdef KR_headers
+! gdtoa__g_dfmt(buf, d, ndig, bufsize) char *buf; double *d; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_dfmt(char *buf, double *d, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 91,95 ****
+  	if (sign)
+  		i = STRTOG_Normal | STRTOG_Neg;
+! 	s = gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
   	}
-diff -u gdtoa.orig/g_ddfmt.c gdtoa/g_ddfmt.c
---- gdtoa.orig/g_ddfmt.c	1998-09-09 12:09:31 +0000
-+++ gdtoa/g_ddfmt.c	2008-10-04 02:01:43 +0000
-@@ -40,9 +40,9 @@
- 
-  char *
- #ifdef KR_headers
--g_ddfmt(buf, dd, ndig, bufsize) char *buf; double *dd; int ndig; unsigned bufsize;
-+gdtoa__g_ddfmt(buf, dd, ndig, bufsize) char *buf; double *dd; int ndig; unsigned bufsize;
- #else
--g_ddfmt(char *buf, double *dd, int ndig, unsigned bufsize)
-+gdtoa__g_ddfmt(char *buf, double *dd, int ndig, unsigned bufsize)
- #endif
- {
- 	FPI fpi;
-@@ -154,7 +154,7 @@
- 	fpi.rounding = FPI_Round_near;
- 	fpi.sudden_underflow = 0;
- 	i = STRTOG_Normal;
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	b = g__fmt(buf, s, se, decpt, z->sign);
- 	Bfree(z);
- 	return b;
-diff -u gdtoa.orig/g_dfmt.c gdtoa/g_dfmt.c
---- gdtoa.orig/g_dfmt.c	1998-09-09 14:18:15 +0000
-+++ gdtoa/g_dfmt.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  char*
- #ifdef KR_headers
--g_dfmt(buf, d, ndig, bufsize) char *buf; double *d; int ndig; unsigned bufsize;
-+gdtoa__g_dfmt(buf, d, ndig, bufsize) char *buf; double *d; int ndig; unsigned bufsize;
- #else
--g_dfmt(char *buf, double *d, int ndig, unsigned bufsize)
-+gdtoa__g_dfmt(char *buf, double *d, int ndig, unsigned bufsize)
- #endif
- {
- 	static FPI fpi = { 53, 1-1023-53+1, 2046-1023-53+1, 1, 0 };
-@@ -90,6 +90,6 @@
- 		mode = 0;
- 		}
- 	i = STRTOG_Normal;
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	return g__fmt(buf, s, se, decpt, sign);
- 	}
-diff -u gdtoa.orig/g_ffmt.c gdtoa/g_ffmt.c
---- gdtoa.orig/g_ffmt.c	1998-09-12 20:39:39 +0000
-+++ gdtoa/g_ffmt.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  char*
- #ifdef KR_headers
--g_ffmt(buf, f, ndig, bufsize) char *buf; float *f; int ndig; unsigned bufsize;
-+gdtoa__g_ffmt(buf, f, ndig, bufsize) char *buf; float *f; int ndig; unsigned bufsize;
- #else
--g_ffmt(char *buf, float *f, int ndig, unsigned bufsize)
-+gdtoa__g_ffmt(char *buf, float *f, int ndig, unsigned bufsize)
- #endif
- {
- 	static FPI fpi = { 24, 1-127-24+1,  254-127-24+1, 1, 0 };
-@@ -89,6 +89,6 @@
- 		mode = 0;
- 		}
- 	i = STRTOG_Normal;
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	return g__fmt(buf, s, se, decpt, sign);
- 	}
-diff -u gdtoa.orig/g_xLfmt.c gdtoa/g_xLfmt.c
---- gdtoa.orig/g_xLfmt.c	1998-09-09 16:35:43 +0000
-+++ gdtoa/g_xLfmt.c	2008-10-04 02:01:43 +0000
-@@ -55,9 +55,9 @@
- 
-  char*
- #ifdef KR_headers
--g_xLfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
-+gdtoa__g_xLfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
- #else
--g_xLfmt(char *buf, void *V, int ndig, unsigned bufsize)
-+gdtoa__g_xLfmt(char *buf, void *V, int ndig, unsigned bufsize)
- #endif
- {
- 	static FPI fpi = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, 0 };
-@@ -109,6 +109,6 @@
- 			return 0;
- 		mode = 0;
- 		}
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	return g__fmt(buf, s, se, decpt, sign);
- 	}
-diff -u gdtoa.orig/g_xfmt.c gdtoa/g_xfmt.c
---- gdtoa.orig/g_xfmt.c	1998-09-09 13:59:17 +0000
-+++ gdtoa/g_xfmt.c	2008-10-04 02:01:43 +0000
-@@ -59,9 +59,9 @@
- 
-  char*
- #ifdef KR_headers
--g_xfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
-+gdtoa__g_xfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; unsigned bufsize;
- #else
--g_xfmt(char *buf, void *V, int ndig, unsigned bufsize)
-+gdtoa__g_xfmt(char *buf, void *V, int ndig, unsigned bufsize)
- #endif
- {
- 	static FPI fpi = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, 0 };
-@@ -114,6 +114,6 @@
- 			return 0;
- 		mode = 0;
- 		}
--	s = gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
-+	s = gdtoa__gdtoa(&fpi, ex, bits, &i, mode, ndig, &decpt, &se);
- 	return g__fmt(buf, s, se, decpt, sign);
- 	}
-Only in gdtoa: gdtoa
-diff -u gdtoa.orig/gdtoa.c gdtoa/gdtoa.c
---- gdtoa.orig/gdtoa.c	1999-09-21 04:22:19 +0000
-+++ gdtoa/gdtoa.c	2008-10-04 02:01:43 +0000
-@@ -115,7 +115,7 @@
-  */
- 
-  char *
--gdtoa
-+gdtoa__gdtoa
- #ifdef KR_headers
- 	(fpi, be, bits, kindp, mode, ndigits, decpt, rve)
- 	FPI *fpi; int be; ULong *bits;
-@@ -168,7 +168,7 @@
- 
- #ifndef MULTIPLE_THREADS
- 	if (dtoa_result) {
--		freedtoa(dtoa_result);
-+		gdtoa__freedtoa(dtoa_result);
- 		dtoa_result = 0;
- 		}
- #endif
-diff -u gdtoa.orig/gdtoa.h gdtoa/gdtoa.h
---- gdtoa.orig/gdtoa.h	2000-11-01 15:01:39 +0000
-+++ gdtoa/gdtoa.h	2008-10-04 02:01:43 +0000
-@@ -108,49 +108,49 @@
- extern "C" {
- #endif
- 
--extern char* dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
-+extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
- 			int *sign, char **rve));
--extern char* gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
-+extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
- 			int mode, int ndigits, int *decpt, char **rve));
--extern void freedtoa ANSI((char*));
--extern float  strtof ANSI((CONST char *, char **));
--extern double strtod ANSI((CONST char *, char **));
--extern int strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
-+extern void gdtoa__freedtoa ANSI((char*));
-+extern float  gdtoa__strtof ANSI((CONST char *, char **));
-+extern double gdtoa__strtod ANSI((CONST char *, char **));
-+extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
- 
--extern char*	g_ddfmt  ANSI((char*, double*, int, unsigned));
--extern char*	g_dfmt   ANSI((char*, double*, int, unsigned));
--extern char*	g_ffmt   ANSI((char*, float*,  int, unsigned));
--extern char*	g_Qfmt   ANSI((char*, void*,   int, unsigned));
--extern char*	g_xfmt   ANSI((char*, void*,   int, unsigned));
--extern char*	g_xLfmt  ANSI((char*, void*,   int, unsigned));
-+extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, unsigned));
-+extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, unsigned));
-+extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, unsigned));
-+extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, unsigned));
-+extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, unsigned));
-+extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, unsigned));
- 
--extern int	strtoId  ANSI((CONST char*, char**, double*, double*));
--extern int	strtoIdd ANSI((CONST char*, char**, double*, double*));
--extern int	strtoIf  ANSI((CONST char*, char**, float*, float*));
--extern int	strtoIQ  ANSI((CONST char*, char**, void*, void*));
--extern int	strtoIx  ANSI((CONST char*, char**, void*, void*));
--extern int	strtoIxL ANSI((CONST char*, char**, void*, void*));
--extern int	strtord  ANSI((CONST char*, char**, int, double*));
--extern int	strtordd ANSI((CONST char*, char**, int, double*));
--extern int	strtorf  ANSI((CONST char*, char**, int, float*));
--extern int	strtorQ  ANSI((CONST char*, char**, int, void*));
--extern int	strtorx  ANSI((CONST char*, char**, int, void*));
--extern int	strtorxL ANSI((CONST char*, char**, int, void*));
-+extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
-+extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
-+extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
-+extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
-+extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
-+extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
-+extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
-+extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
-+extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
-+extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
-+extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
-+extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
- #if 1
--extern int	strtodI  ANSI((CONST char*, char**, double*));
--extern int	strtopd  ANSI((CONST char*, char**, double*));
--extern int	strtopdd ANSI((CONST char*, char**, double*));
--extern int	strtopf  ANSI((CONST char*, char**, float*));
--extern int	strtopQ  ANSI((CONST char*, char**, void*));
--extern int	strtopx  ANSI((CONST char*, char**, void*));
--extern int	strtopxL ANSI((CONST char*, char**, void*));
-+extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
-+extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
-+extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
-+extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
-+extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
-+extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
-+extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
- #else
--#define strtopd(s,se,x) strtord(s,se,1,x)
--#define strtopdd(s,se,x) strtordd(s,se,1,x)
--#define strtopf(s,se,x) strtorf(s,se,1,x)
--#define strtopQ(s,se,x) strtorQ(s,se,1,x)
--#define strtopx(s,se,x) strtorx(s,se,1,x)
--#define strtopxL(s,se,x) strtorxL(s,se,1,x)
-+#define gdtoa__strtopd(s,se,x) gdtoa__strtord(s,se,1,x)
-+#define gdtoa__strtopdd(s,se,x) gdtoa__strtordd(s,se,1,x)
-+#define gdtoa__strtopf(s,se,x) gdtoa__strtorf(s,se,1,x)
-+#define gdtoa__strtopQ(s,se,x) gdtoa__strtorQ(s,se,1,x)
-+#define gdtoa__strtopx(s,se,x) gdtoa__strtorx(s,se,1,x)
-+#define gdtoa__strtopxL(s,se,x) gdtoa__strtorxL(s,se,1,x)
- #endif
- 
- #ifdef __cplusplus
-diff -u gdtoa.orig/gdtoaimp.h gdtoa/gdtoaimp.h
---- gdtoa.orig/gdtoaimp.h	2000-11-02 15:09:01 +0000
-+++ gdtoa/gdtoaimp.h	2008-10-04 02:24:16 +0000
-@@ -267,7 +267,7 @@
- Exactly one of IEEE_8087, IEEE_MC68k, VAX, or IBM should be defined.
- #endif
- 
--typedef union { double d; ULong L[2]; } U;
-+typedef union { double d; ULong L[2]; } __attribute__((__may_alias__)) U;
- 
- #ifdef YES_ALIAS
- #define dval(x) x
-@@ -502,6 +502,7 @@
- #define g__fmt g__fmt_D2A
- #define gethex gethex_D2A
- #define hexdig hexdig_D2A
-+#define hexdig_init hexdig_init_D2A
- #define hexnan hexnan_D2A
- #define hi0bits hi0bits_D2A
- #define i2b i2b_D2A
-@@ -551,7 +552,7 @@
- 			int *decpt, int *sign, char **rve));
-  extern char *g__fmt ANSI((char*, char*, char*, int, ULong));
-  extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
-- extern void hexdig_init_D2A(Void);
-+ extern void hexdig_init ANSI((Void));
-  extern int hexnan ANSI((CONST char**, FPI*, ULong*));
-  extern int hi0bits ANSI((ULong));
-  extern Bigint *i2b ANSI((int));
-@@ -570,8 +571,8 @@
-  extern Bigint *s2b ANSI((CONST char*, int, int, ULong));
-  extern Bigint *set_ones ANSI((Bigint*, int));
-  extern char *strcp ANSI((char*, const char*));
-- extern int strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
-- extern double strtod ANSI((const char *s00, char **se));
-+ extern int gdtoa__strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
-+ extern double gdtoa__strtod ANSI((const char *s00, char **se));
-  extern Bigint *sum ANSI((Bigint*, Bigint*));
-  extern int trailz ANSI((Bigint*));
-  extern double ulp ANSI((double));
-diff -u gdtoa.orig/gethex.c gdtoa/gethex.c
---- gdtoa.orig/gethex.c	2003-03-26 20:33:08 +0000
-+++ gdtoa/gethex.c	2008-10-04 02:24:16 +0000
-@@ -57,7 +57,7 @@
- #endif
- 
- 	if (!hexdig['0'])
--		hexdig_init_D2A();
-+		hexdig_init();
- 	havedig = 0;
- 	s0 = *(CONST unsigned char **)sp + 2;
- 	while(s0[havedig] == '0')
-diff -u gdtoa.orig/hd_init.c gdtoa/hd_init.c
---- gdtoa.orig/hd_init.c	2000-11-03 01:45:35 +0000
-+++ gdtoa/hd_init.c	2008-10-04 02:24:16 +0000
-@@ -52,7 +52,7 @@
- 	}
- 
-  void
--hexdig_init_D2A(Void)
-+hexdig_init(Void)
- {
- #define USC (unsigned char *)
- 	htinit(hexdig, USC "0123456789", 0x10);
-diff -u gdtoa.orig/hexnan.c gdtoa/hexnan.c
---- gdtoa.orig/hexnan.c	2000-11-03 01:44:38 +0000
-+++ gdtoa/hexnan.c	2008-10-04 02:24:16 +0000
-@@ -68,7 +68,7 @@
- 	int havedig, hd0, i, nbits;
- 
- 	if (!hexdig['0'])
--		hexdig_init_D2A();
-+		hexdig_init();
- 	nbits = fpi->nbits;
- 	x = x0 + (nbits >> kshift);
- 	if (nbits & kmask)
-diff -u gdtoa.orig/strtoIQ.c gdtoa/strtoIQ.c
---- gdtoa.orig/strtoIQ.c	1998-06-22 18:49:25 +0000
-+++ gdtoa/strtoIQ.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIQ(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
-+gdtoa__strtoIQ(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
- #else
--strtoIQ(CONST char *s, char **sp, void *a, void *b)
-+gdtoa__strtoIQ(CONST char *s, char **sp, void *a, void *b)
- #endif
- {
- 	static FPI fpi = { 113, 1-16383-113+1, 32766-16383-113+1, 1, SI };
-@@ -52,7 +52,7 @@
- 
- 	B[0] = Balloc(2);
- 	B[0]->wds = 4;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtoQ(L, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtoId.c gdtoa/strtoId.c
---- gdtoa.orig/strtoId.c	1998-09-09 13:59:17 +0000
-+++ gdtoa/strtoId.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoId(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
-+gdtoa__strtoId(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
- #else
--strtoId(CONST char *s, char **sp, double *f0, double *f1)
-+gdtoa__strtoId(CONST char *s, char **sp, double *f0, double *f1)
- #endif
- {
- 	static FPI fpi = { 53, 1-1023-53+1, 2046-1023-53+1, 1, SI };
-@@ -51,7 +51,7 @@
- 
- 	B[0] = Balloc(1);
- 	B[0]->wds = 2;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtod((ULong*)f0, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtoIdd.c gdtoa/strtoIdd.c
---- gdtoa.orig/strtoIdd.c	1998-09-09 13:59:17 +0000
-+++ gdtoa/strtoIdd.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIdd(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
-+gdtoa__strtoIdd(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
- #else
--strtoIdd(CONST char *s, char **sp, double *f0, double *f1)
-+gdtoa__strtoIdd(CONST char *s, char **sp, double *f0, double *f1)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -55,7 +55,7 @@
- 
- 	B[0] = Balloc(2);
- 	B[0]->wds = 4;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtodd((ULong*)f0, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtoIf.c gdtoa/strtoIf.c
---- gdtoa.orig/strtoIf.c	1998-09-09 13:59:17 +0000
-+++ gdtoa/strtoIf.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIf(s, sp, f0, f1) CONST char *s; char **sp; float *f0, *f1;
-+gdtoa__strtoIf(s, sp, f0, f1) CONST char *s; char **sp; float *f0, *f1;
- #else
--strtoIf(CONST char *s, char **sp, float *f0, float *f1)
-+gdtoa__strtoIf(CONST char *s, char **sp, float *f0, float *f1)
- #endif
- {
- 	static FPI fpi = { 24, 1-127-24+1,  254-127-24+1, 1, SI };
-@@ -51,7 +51,7 @@
- 
- 	B[0] = Balloc(0);
- 	B[0]->wds = 1;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtof((ULong*)f0, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtoIg.c gdtoa/strtoIg.c
---- gdtoa.orig/strtoIg.c	1998-06-26 14:04:19 +0000
-+++ gdtoa/strtoIg.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIg(s00, se, fpi, exp, B, rvp) CONST char *s00; char **se; FPI *fpi; Long *exp; Bigint **B; int *rvp;
-+gdtoa__strtoIg(s00, se, fpi, exp, B, rvp) CONST char *s00; char **se; FPI *fpi; Long *exp; Bigint **B; int *rvp;
- #else
--strtoIg(CONST char *s00, char **se, FPI *fpi, Long *exp, Bigint **B, int *rvp)
-+gdtoa__strtoIg(CONST char *s00, char **se, FPI *fpi, Long *exp, Bigint **B, int *rvp)
- #endif
- {
- 	Bigint *b, *b1;
-@@ -50,7 +50,7 @@
- 	Long e1;
- 
- 	b = *B;
--	rv = strtodg(s00, se, fpi, exp, b->x);
-+	rv = gdtoa__strtodg(s00, se, fpi, exp, b->x);
- 	if (!(rv & STRTOG_Inexact)) {
- 		B[1] = 0;
- 		return *rvp = rv;
-diff -u gdtoa.orig/strtoIx.c gdtoa/strtoIx.c
---- gdtoa.orig/strtoIx.c	1998-09-09 13:13:22 +0000
-+++ gdtoa/strtoIx.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIx(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
-+gdtoa__strtoIx(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
- #else
--strtoIx(CONST char *s, char **sp, void *a, void *b)
-+gdtoa__strtoIx(CONST char *s, char **sp, void *a, void *b)
- #endif
- {
- 	static FPI fpi = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, SI };
-@@ -52,7 +52,7 @@
- 
- 	B[0] = Balloc(1);
- 	B[0]->wds = 2;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtox(L, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtoIxL.c gdtoa/strtoIxL.c
---- gdtoa.orig/strtoIxL.c	1998-09-09 13:13:22 +0000
-+++ gdtoa/strtoIxL.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtoIxL(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
-+gdtoa__strtoIxL(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
- #else
--strtoIxL(CONST char *s, char **sp, void *a, void *b)
-+gdtoa__strtoIxL(CONST char *s, char **sp, void *a, void *b)
- #endif
- {
- 	static FPI fpi = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, SI };
-@@ -52,7 +52,7 @@
- 
- 	B[0] = Balloc(1);
- 	B[0]->wds = 2;
--	k = strtoIg(s, sp, &fpi, exp, B, rv);
-+	k = gdtoa__strtoIg(s, sp, &fpi, exp, B, rv);
- 	ULtoxL(L, B[0]->x, exp[0], rv[0]);
- 	Bfree(B[0]);
- 	if (B[1]) {
-diff -u gdtoa.orig/strtod.c gdtoa/strtod.c
---- gdtoa.orig/strtod.c	2003-03-21 21:24:01 +0000
-+++ gdtoa/strtod.c	2008-10-04 02:01:43 +0000
-@@ -58,7 +58,7 @@
- #endif
- 
-  double
--strtod
-+gdtoa__strtod
- #ifdef KR_headers
- 	(s00, se) CONST char *s00; char **se;
- #else
-diff -u gdtoa.orig/strtodI.c gdtoa/strtodI.c
---- gdtoa.orig/strtodI.c	2000-11-02 04:33:13 +0000
-+++ gdtoa/strtodI.c	2008-10-04 02:01:43 +0000
-@@ -56,9 +56,9 @@
- 
-  int
- #ifdef KR_headers
--strtodI(s, sp, dd) CONST char *s; char **sp; double *dd;
-+gdtoa__strtodI(s, sp, dd) CONST char *s; char **sp; double *dd;
- #else
--strtodI(CONST char *s, char **sp, double *dd)
-+gdtoa__strtodI(CONST char *s, char **sp, double *dd)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -75,7 +75,7 @@
- 		} U;
- 	U *u;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	u = (U*)dd;
- 	sign = k & STRTOG_Neg ? 0x80000000L : 0;
- 	switch(k & STRTOG_Retmask) {
-diff -u gdtoa.orig/strtodg.c gdtoa/strtodg.c
---- gdtoa.orig/strtodg.c	2003-03-21 20:59:43 +0000
-+++ gdtoa/strtodg.c	2008-10-04 02:01:43 +0000
-@@ -316,7 +316,7 @@
- 	}
- 
-  int
--strtodg
-+gdtoa__strtodg
- #ifdef KR_headers
- 	(s00, se, fpi, exp, bits)
- 	CONST char *s00; char **se; FPI *fpi; Long *exp; ULong *bits;
-diff -u gdtoa.orig/strtof.c gdtoa/strtof.c
---- gdtoa.orig/strtof.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtof.c	2008-10-04 02:01:43 +0000
-@@ -37,11 +37,11 @@
- 
- #include "gdtoaimp.h"
- 
-- float
-+ float gdtoa__strtof
- #ifdef KR_headers
--strtof(s, sp) CONST char *s; char **sp;
-+	(s, sp) CONST char *s; char **sp;
- #else
--strtof(CONST char *s, char **sp)
-+	(CONST char *s, char **sp)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -54,7 +54,7 @@
- 	int k;
- 	union { ULong L[1]; float f; } u;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	switch(k & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
- 	  case STRTOG_Zero:
-diff -u gdtoa.orig/strtopQ.c gdtoa/strtopQ.c
---- gdtoa.orig/strtopQ.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtopQ.c	2008-10-04 02:01:43 +0000
-@@ -57,9 +57,9 @@
- 
-  int
- #ifdef KR_headers
--strtopQ(s, sp, V) CONST char *s; char **sp; void *V;
-+gdtoa__strtopQ(s, sp, V) CONST char *s; char **sp; void *V;
- #else
--strtopQ(CONST char *s, char **sp, void *V)
-+gdtoa__strtopQ(CONST char *s, char **sp, void *V)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -72,7 +72,7 @@
- 	int k;
- 	ULong *L = (ULong*)V;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	switch(k & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
- 	  case STRTOG_Zero:
-diff -u gdtoa.orig/strtopd.c gdtoa/strtopd.c
---- gdtoa.orig/strtopd.c	1998-09-12 15:30:06 +0000
-+++ gdtoa/strtopd.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtopd(s, sp, d) char *s; char **sp; double *d;
-+gdtoa__strtopd(s, sp, d) char *s; char **sp; double *d;
- #else
--strtopd(CONST char *s, char **sp, double *d)
-+gdtoa__strtopd(CONST char *s, char **sp, double *d)
- #endif
- {
- 	static FPI fpi0 = { 53, 1-1023-53+1, 2046-1023-53+1, 1, SI };
-@@ -49,7 +49,7 @@
- 	Long exp;
- 	int k;
- 
--	k = strtodg(s, sp, &fpi0, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi0, &exp, bits);
- 	ULtod((ULong*)d, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtopdd.c gdtoa/strtopdd.c
---- gdtoa.orig/strtopdd.c	2000-11-02 04:33:46 +0000
-+++ gdtoa/strtopdd.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtopdd(s, sp, dd) CONST char *s; char **sp; double *dd;
-+gdtoa__strtopdd(s, sp, dd) CONST char *s; char **sp; double *dd;
- #else
--strtopdd(CONST char *s, char **sp, double *dd)
-+gdtoa__strtopdd(CONST char *s, char **sp, double *dd)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -58,7 +58,7 @@
- 		} U;
- 	U *u;
- 
--	rv = strtodg(s, sp, &fpi, &exp, bits);
-+	rv = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	u = (U*)dd;
- 	switch(rv & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
-diff -u gdtoa.orig/strtopf.c gdtoa/strtopf.c
---- gdtoa.orig/strtopf.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtopf.c	2008-10-04 02:01:43 +0000
-@@ -39,9 +39,9 @@
- 
-  int
- #ifdef KR_headers
--strtopf(s, sp, f) CONST char *s; char **sp; float *f;
-+gdtoa__strtopf(s, sp, f) CONST char *s; char **sp; float *f;
- #else
--strtopf(CONST char *s, char **sp, float *f)
-+gdtoa__strtopf(CONST char *s, char **sp, float *f)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -53,7 +53,7 @@
- 	Long exp;
- 	int k;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	L = (ULong*)f;
- 	switch(k & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
-diff -u gdtoa.orig/strtopx.c gdtoa/strtopx.c
---- gdtoa.orig/strtopx.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtopx.c	2008-10-04 02:01:43 +0000
-@@ -59,9 +59,9 @@
- 
-  int
- #ifdef KR_headers
--strtopx(s, sp, V) CONST char *s; char **sp; void *V;
-+gdtoa__strtopx(s, sp, V) CONST char *s; char **sp; void *V;
- #else
--strtopx(CONST char *s, char **sp, void *V)
-+gdtoa__strtopx(CONST char *s, char **sp, void *V)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -74,7 +74,7 @@
- 	int k;
- 	UShort *L = (UShort*)V;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	switch(k & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
- 	  case STRTOG_Zero:
-diff -u gdtoa.orig/strtopxL.c gdtoa/strtopxL.c
---- gdtoa.orig/strtopxL.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtopxL.c	2008-10-04 02:01:43 +0000
-@@ -55,9 +55,9 @@
- 
-  int
- #ifdef KR_headers
--strtopxL(s, sp, V) CONST char *s; char **sp; void *V;
-+gdtoa__strtopxL(s, sp, V) CONST char *s; char **sp; void *V;
- #else
--strtopxL(CONST char *s, char **sp, void *V)
-+gdtoa__strtopxL(CONST char *s, char **sp, void *V)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -70,7 +70,7 @@
- 	int k;
- 	ULong *L = (ULong*)V;
- 
--	k = strtodg(s, sp, &fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
- 	switch(k & STRTOG_Retmask) {
- 	  case STRTOG_NoNumber:
- 	  case STRTOG_Zero:
-diff -u gdtoa.orig/strtorQ.c gdtoa/strtorQ.c
---- gdtoa.orig/strtorQ.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtorQ.c	2008-10-04 02:01:43 +0000
-@@ -98,9 +98,9 @@
- 
-  int
- #ifdef KR_headers
--strtorQ(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
-+gdtoa__strtorQ(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
- #else
--strtorQ(CONST char *s, char **sp, int rounding, void *L)
-+gdtoa__strtorQ(CONST char *s, char **sp, int rounding, void *L)
- #endif
- {
- 	static FPI fpi0 = { 113, 1-16383-113+1, 32766-16383-113+1, 1, SI };
-@@ -115,7 +115,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtoQ((ULong*)L, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtord.c gdtoa/strtord.c
---- gdtoa.orig/strtord.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtord.c	2008-10-04 02:01:43 +0000
-@@ -76,9 +76,9 @@
- 
-  int
- #ifdef KR_headers
--strtord(s, sp, rounding, d) CONST char *s; char **sp; int rounding; double *d;
-+gdtoa__strtord(s, sp, rounding, d) CONST char *s; char **sp; int rounding; double *d;
- #else
--strtord(CONST char *s, char **sp, int rounding, double *d)
-+gdtoa__strtord(CONST char *s, char **sp, int rounding, double *d)
- #endif
- {
- 	static FPI fpi0 = { 53, 1-1023-53+1, 2046-1023-53+1, 1, SI };
-@@ -93,7 +93,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtod((ULong*)d, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtordd.c gdtoa/strtordd.c
---- gdtoa.orig/strtordd.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtordd.c	2008-10-04 02:01:43 +0000
-@@ -178,9 +178,9 @@
- 
-  int
- #ifdef KR_headers
--strtordd(s, sp, rounding, dd) CONST char *s; char **sp; int rounding; double *dd;
-+gdtoa__strtordd(s, sp, rounding, dd) CONST char *s; char **sp; int rounding; double *dd;
- #else
--strtordd(CONST char *s, char **sp, int rounding, double *dd)
-+gdtoa__strtordd(CONST char *s, char **sp, int rounding, double *dd)
- #endif
- {
- #ifdef Sudden_Underflow
-@@ -199,7 +199,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtodd((ULong*)dd, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtorf.c gdtoa/strtorf.c
---- gdtoa.orig/strtorf.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtorf.c	2008-10-04 02:01:43 +0000
-@@ -72,9 +72,9 @@
- 
-  int
- #ifdef KR_headers
--strtorf(s, sp, rounding, f) CONST char *s; char **sp; int rounding; float *f;
-+gdtoa__strtorf(s, sp, rounding, f) CONST char *s; char **sp; int rounding; float *f;
- #else
--strtorf(CONST char *s, char **sp, int rounding, float *f)
-+gdtoa__strtorf(CONST char *s, char **sp, int rounding, float *f)
- #endif
- {
- 	static FPI fpi0 = { 24, 1-127-24+1,  254-127-24+1, 1, SI };
-@@ -89,7 +89,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtof((ULong*)f, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtorx.c gdtoa/strtorx.c
---- gdtoa.orig/strtorx.c	2000-11-02 04:34:18 +0000
-+++ gdtoa/strtorx.c	2008-10-04 02:01:43 +0000
-@@ -95,9 +95,9 @@
- 
-  int
- #ifdef KR_headers
--strtorx(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
-+gdtoa__strtorx(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
- #else
--strtorx(CONST char *s, char **sp, int rounding, void *L)
-+gdtoa__strtorx(CONST char *s, char **sp, int rounding, void *L)
- #endif
- {
- 	static FPI fpi0 = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, SI };
-@@ -112,7 +112,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtox((UShort*)L, bits, exp, k);
- 	return k;
- 	}
-diff -u gdtoa.orig/strtorxL.c gdtoa/strtorxL.c
---- gdtoa.orig/strtorxL.c	2000-11-02 04:31:40 +0000
-+++ gdtoa/strtorxL.c	2008-10-04 02:01:43 +0000
-@@ -89,9 +89,9 @@
- 
-  int
- #ifdef KR_headers
--strtorxL(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
-+gdtoa__strtorxL(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
- #else
--strtorxL(CONST char *s, char **sp, int rounding, void *L)
-+gdtoa__strtorxL(CONST char *s, char **sp, int rounding, void *L)
- #endif
- {
- 	static FPI fpi0 = { 64, 1-16383-64+1, 32766 - 16383 - 64 + 1, 1, SI };
-@@ -106,7 +106,7 @@
- 		fpi1.rounding = rounding;
- 		fpi = &fpi1;
- 		}
--	k = strtodg(s, sp, fpi, &exp, bits);
-+	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
- 	ULtoxL((ULong*)L, bits, exp, k);
- 	return k;
- 	}
-Common subdirectories: gdtoa.orig/test and gdtoa/test
+--- 91,95 ----
+  	if (sign)
+  		i = STRTOG_Normal | STRTOG_Neg;
+! 	s = gdtoa__gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+diff -P -C 2 -r gdtoa/gdtoa.c gdtoa-new/gdtoa.c
+*** gdtoa/gdtoa.c	2011-03-04 23:26:27.000000000 -0500
+--- gdtoa-new/gdtoa.c	2011-05-27 17:09:13.941030075 -0400
+***************
+*** 110,114 ****
+  
+   char *
+! gdtoa
+  #ifdef KR_headers
+  	(fpi, be, bits, kindp, mode, ndigits, decpt, rve)
+--- 110,114 ----
+  
+   char *
+! gdtoa__gdtoa
+  #ifdef KR_headers
+  	(fpi, be, bits, kindp, mode, ndigits, decpt, rve)
+***************
+*** 165,169 ****
+  #ifndef MULTIPLE_THREADS
+  	if (dtoa_result) {
+! 		freedtoa(dtoa_result);
+  		dtoa_result = 0;
+  		}
+--- 165,169 ----
+  #ifndef MULTIPLE_THREADS
+  	if (dtoa_result) {
+! 		gdtoa__freedtoa(dtoa_result);
+  		dtoa_result = 0;
+  		}
+diff -P -C 2 -r gdtoa/gdtoa.h gdtoa-new/gdtoa.h
+*** gdtoa/gdtoa.h	2011-03-04 13:54:26.000000000 -0500
+--- gdtoa-new/gdtoa.h	2011-05-27 17:18:00.996031868 -0400
+***************
+*** 104,150 ****
+  #endif
+  
+! extern char* dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
+  			int *sign, char **rve));
+! extern char* gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
+  			int mode, int ndigits, int *decpt, char **rve));
+! extern void freedtoa ANSI((char*));
+! extern float  strtof ANSI((CONST char *, char **));
+! extern double strtod ANSI((CONST char *, char **));
+! extern int strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
+  
+! extern char*	g_ddfmt  ANSI((char*, double*, int, size_t));
+! extern char*	g_dfmt   ANSI((char*, double*, int, size_t));
+! extern char*	g_ffmt   ANSI((char*, float*,  int, size_t));
+! extern char*	g_Qfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	g_xfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	g_xLfmt  ANSI((char*, void*,   int, size_t));
+  
+! extern int	strtoId  ANSI((CONST char*, char**, double*, double*));
+! extern int	strtoIdd ANSI((CONST char*, char**, double*, double*));
+! extern int	strtoIf  ANSI((CONST char*, char**, float*, float*));
+! extern int	strtoIQ  ANSI((CONST char*, char**, void*, void*));
+! extern int	strtoIx  ANSI((CONST char*, char**, void*, void*));
+! extern int	strtoIxL ANSI((CONST char*, char**, void*, void*));
+! extern int	strtord  ANSI((CONST char*, char**, int, double*));
+! extern int	strtordd ANSI((CONST char*, char**, int, double*));
+! extern int	strtorf  ANSI((CONST char*, char**, int, float*));
+! extern int	strtorQ  ANSI((CONST char*, char**, int, void*));
+! extern int	strtorx  ANSI((CONST char*, char**, int, void*));
+! extern int	strtorxL ANSI((CONST char*, char**, int, void*));
+  #if 1
+! extern int	strtodI  ANSI((CONST char*, char**, double*));
+! extern int	strtopd  ANSI((CONST char*, char**, double*));
+! extern int	strtopdd ANSI((CONST char*, char**, double*));
+! extern int	strtopf  ANSI((CONST char*, char**, float*));
+! extern int	strtopQ  ANSI((CONST char*, char**, void*));
+! extern int	strtopx  ANSI((CONST char*, char**, void*));
+! extern int	strtopxL ANSI((CONST char*, char**, void*));
+  #else
+! #define strtopd(s,se,x) strtord(s,se,1,x)
+! #define strtopdd(s,se,x) strtordd(s,se,1,x)
+! #define strtopf(s,se,x) strtorf(s,se,1,x)
+! #define strtopQ(s,se,x) strtorQ(s,se,1,x)
+! #define strtopx(s,se,x) strtorx(s,se,1,x)
+! #define strtopxL(s,se,x) strtorxL(s,se,1,x)
+  #endif
+  
+--- 104,150 ----
+  #endif
+  
+! extern char* gdtoa__dtoa  ANSI((double d, int mode, int ndigits, int *decpt,
+  			int *sign, char **rve));
+! extern char* gdtoa__gdtoa ANSI((FPI *fpi, int be, ULong *bits, int *kindp,
+  			int mode, int ndigits, int *decpt, char **rve));
+! extern void gdtoa__freedtoa ANSI((char*));
+! extern float  gdtoa__strtof ANSI((CONST char *, char **));
+! extern double gdtoa__strtod ANSI((CONST char *, char **));
+! extern int gdtoa__strtodg ANSI((CONST char*, char**, FPI*, Long*, ULong*));
+  
+! extern char*	gdtoa__g_ddfmt  ANSI((char*, double*, int, size_t));
+! extern char*	gdtoa__g_dfmt   ANSI((char*, double*, int, size_t));
+! extern char*	gdtoa__g_ffmt   ANSI((char*, float*,  int, size_t));
+! extern char*	gdtoa__g_Qfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	gdtoa__g_xfmt   ANSI((char*, void*,   int, size_t));
+! extern char*	gdtoa__g_xLfmt  ANSI((char*, void*,   int, size_t));
+  
+! extern int	gdtoa__strtoId  ANSI((CONST char*, char**, double*, double*));
+! extern int	gdtoa__strtoIdd ANSI((CONST char*, char**, double*, double*));
+! extern int	gdtoa__strtoIf  ANSI((CONST char*, char**, float*, float*));
+! extern int	gdtoa__strtoIQ  ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtoIx  ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtoIxL ANSI((CONST char*, char**, void*, void*));
+! extern int	gdtoa__strtord  ANSI((CONST char*, char**, int, double*));
+! extern int	gdtoa__strtordd ANSI((CONST char*, char**, int, double*));
+! extern int	gdtoa__strtorf  ANSI((CONST char*, char**, int, float*));
+! extern int	gdtoa__strtorQ  ANSI((CONST char*, char**, int, void*));
+! extern int	gdtoa__strtorx  ANSI((CONST char*, char**, int, void*));
+! extern int	gdtoa__strtorxL ANSI((CONST char*, char**, int, void*));
+  #if 1
+! extern int	gdtoa__strtodI  ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopd  ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopdd ANSI((CONST char*, char**, double*));
+! extern int	gdtoa__strtopf  ANSI((CONST char*, char**, float*));
+! extern int	gdtoa__strtopQ  ANSI((CONST char*, char**, void*));
+! extern int	gdtoa__strtopx  ANSI((CONST char*, char**, void*));
+! extern int	gdtoa__strtopxL ANSI((CONST char*, char**, void*));
+  #else
+! #define gdtoa__strtopd(s,se,x) gdtoa__strtord(s,se,1,x)
+! #define gdtoa__strtopdd(s,se,x) gdtoa__strtordd(s,se,1,x)
+! #define gdtoa__strtopf(s,se,x) gdtoa__strtorf(s,se,1,x)
+! #define gdtoa__strtopQ(s,se,x) gdtoa__strtorQ(s,se,1,x)
+! #define gdtoa__strtopx(s,se,x) gdtoa__strtorx(s,se,1,x)
+! #define gdtoa__strtopxL(s,se,x) gdtoa__strtorxL(s,se,1,x)
+  #endif
+  
+diff -P -C 2 -r gdtoa/gdtoaimp.h gdtoa-new/gdtoaimp.h
+*** gdtoa/gdtoaimp.h	2011-03-21 17:02:29.000000000 -0400
+--- gdtoa-new/gdtoaimp.h	2011-05-27 17:18:00.996031868 -0400
+***************
+*** 275,279 ****
+  #endif
+  
+! typedef union { double d; ULong L[2]; } U;
+  
+  #ifdef IEEE_8087
+--- 275,279 ----
+  #endif
+  
+! typedef union { double d; ULong L[2]; } __attribute__((__may_alias__)) U;
+  
+  #ifdef IEEE_8087
+***************
+*** 504,507 ****
+--- 504,508 ----
+  #define gethex gethex_D2A
+  #define hexdig hexdig_D2A
++ #define hexdig_init hexdig_init_D2A
+  #define hexnan hexnan_D2A
+  #define hi0bits(x) hi0bits_D2A((ULong)(x))
+***************
+*** 523,526 ****
+--- 524,528 ----
+  #define strcp strcp_D2A
+  #define strtoIg strtoIg_D2A
++ #define strtod strtod_D2A
+  #define sum sum_D2A
+  #define tens tens_D2A
+***************
+*** 553,557 ****
+   extern char *g__fmt ANSI((char*, char*, char*, int, ULong, size_t));
+   extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
+!  extern void hexdig_init_D2A(Void);
+   extern int hexnan ANSI((CONST char**, FPI*, ULong*));
+   extern int hi0bits_D2A ANSI((ULong));
+--- 555,559 ----
+   extern char *g__fmt ANSI((char*, char*, char*, int, ULong, size_t));
+   extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
+!  extern void hexdig_init ANSI((Void));
+   extern int hexnan ANSI((CONST char**, FPI*, ULong*));
+   extern int hi0bits_D2A ANSI((ULong));
+diff -P -C 2 -r gdtoa/gethex.c gdtoa-new/gethex.c
+*** gdtoa/gethex.c	2009-03-16 00:37:50.000000000 -0400
+--- gdtoa-new/gethex.c	2011-05-27 17:09:13.941030075 -0400
+***************
+*** 68,72 ****
+  
+  	if (!hexdig['0'])
+! 		hexdig_init_D2A();
+  	*bp = 0;
+  	havedig = 0;
+--- 68,72 ----
+  
+  	if (!hexdig['0'])
+! 		hexdig_init();
+  	*bp = 0;
+  	havedig = 0;
+diff -P -C 2 -r gdtoa/g_ffmt.c gdtoa-new/g_ffmt.c
+*** gdtoa/g_ffmt.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/g_ffmt.c	2011-05-27 17:09:13.941030074 -0400
+***************
+*** 34,40 ****
+   char*
+  #ifdef KR_headers
+! g_ffmt(buf, f, ndig, bufsize) char *buf; float *f; int ndig; size_t bufsize;
+  #else
+! g_ffmt(char *buf, float *f, int ndig, size_t bufsize)
+  #endif
+  {
+--- 34,40 ----
+   char*
+  #ifdef KR_headers
+! gdtoa__g_ffmt(buf, f, ndig, bufsize) char *buf; float *f; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_ffmt(char *buf, float *f, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 89,93 ****
+  		}
+  	i = STRTOG_Normal;
+! 	s = gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+--- 89,93 ----
+  		}
+  	i = STRTOG_Normal;
+! 	s = gdtoa__gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+diff -P -C 2 -r gdtoa/g__fmt.c gdtoa-new/g__fmt.c
+*** gdtoa/g__fmt.c	2009-02-21 11:53:53.000000000 -0500
+--- gdtoa-new/g__fmt.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 143,147 ****
+  		}
+   ret:
+! 	freedtoa(s0);
+  	return b;
+   	}
+--- 143,147 ----
+  		}
+   ret:
+! 	gdtoa__freedtoa(s0);
+  	return b;
+   	}
+diff -P -C 2 -r gdtoa/g_Qfmt.c gdtoa-new/g_Qfmt.c
+*** gdtoa/g_Qfmt.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/g_Qfmt.c	2011-05-27 17:09:13.940030010 -0400
+***************
+*** 52,58 ****
+   char*
+  #ifdef KR_headers
+! g_Qfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! g_Qfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+--- 52,58 ----
+   char*
+  #ifdef KR_headers
+! gdtoa__g_Qfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_Qfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 115,119 ****
+  		mode = 0;
+  		}
+! 	s = gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+--- 115,119 ----
+  		mode = 0;
+  		}
+! 	s = gdtoa__gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+diff -P -C 2 -r gdtoa/g_xfmt.c gdtoa-new/g_xfmt.c
+*** gdtoa/g_xfmt.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/g_xfmt.c	2011-05-27 17:09:13.941030075 -0400
+***************
+*** 54,60 ****
+   char*
+  #ifdef KR_headers
+! g_xfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! g_xfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+--- 54,60 ----
+   char*
+  #ifdef KR_headers
+! gdtoa__g_xfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_xfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 115,119 ****
+  		mode = 0;
+  		}
+! 	s = gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+--- 115,119 ----
+  		mode = 0;
+  		}
+! 	s = gdtoa__gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+diff -P -C 2 -r gdtoa/g_xLfmt.c gdtoa-new/g_xLfmt.c
+*** gdtoa/g_xLfmt.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/g_xLfmt.c	2011-05-27 17:09:13.941030074 -0400
+***************
+*** 50,56 ****
+   char*
+  #ifdef KR_headers
+! g_xLfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! g_xLfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+--- 50,56 ----
+   char*
+  #ifdef KR_headers
+! gdtoa__g_xLfmt(buf, V, ndig, bufsize) char *buf; char *V; int ndig; size_t bufsize;
+  #else
+! gdtoa__g_xLfmt(char *buf, void *V, int ndig, size_t bufsize)
+  #endif
+  {
+***************
+*** 109,113 ****
+  		mode = 0;
+  		}
+! 	s = gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+--- 109,113 ----
+  		mode = 0;
+  		}
+! 	s = gdtoa__gdtoa(fpi, ex, bits, &i, mode, ndig, &decpt, &se);
+  	return g__fmt(buf, s, se, decpt, sign, bufsize);
+  	}
+diff -P -C 2 -r gdtoa/hd_init.c gdtoa-new/hd_init.c
+*** gdtoa/hd_init.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/hd_init.c	2011-05-27 17:09:13.941030075 -0400
+***************
+*** 47,51 ****
+  
+   void
+! hexdig_init_D2A(Void)
+  {
+  #define USC (unsigned char *)
+--- 47,51 ----
+  
+   void
+! hexdig_init(Void)
+  {
+  #define USC (unsigned char *)
+diff -P -C 2 -r gdtoa/hexnan.c gdtoa-new/hexnan.c
+*** gdtoa/hexnan.c	2009-03-16 00:39:17.000000000 -0400
+--- gdtoa-new/hexnan.c	2011-05-27 17:09:13.942030138 -0400
+***************
+*** 63,67 ****
+  
+  	if (!hexdig['0'])
+! 		hexdig_init_D2A();
+  	nbits = fpi->nbits;
+  	x = x0 + (nbits >> kshift);
+--- 63,67 ----
+  
+  	if (!hexdig['0'])
+! 		hexdig_init();
+  	nbits = fpi->nbits;
+  	x = x0 + (nbits >> kshift);
+diff -P -C 2 -r gdtoa/strtod.c gdtoa-new/strtod.c
+*** gdtoa/strtod.c	2011-03-04 13:15:00.000000000 -0500
+--- gdtoa-new/strtod.c	2011-05-27 17:09:13.944030259 -0400
+***************
+*** 81,85 ****
+  
+   double
+! strtod
+  #ifdef KR_headers
+  	(s00, se) CONST char *s00; char **se;
+--- 81,85 ----
+  
+   double
+! gdtoa__strtod
+  #ifdef KR_headers
+  	(s00, se) CONST char *s00; char **se;
+diff -P -C 2 -r gdtoa/strtodg.c gdtoa-new/strtodg.c
+*** gdtoa/strtodg.c	2009-04-11 23:11:05.000000000 -0400
+--- gdtoa-new/strtodg.c	2011-05-27 17:09:13.944030259 -0400
+***************
+*** 314,318 ****
+  
+   int
+! strtodg
+  #ifdef KR_headers
+  	(s00, se, fpi, exp, bits)
+--- 314,318 ----
+  
+   int
+! gdtoa__strtodg
+  #ifdef KR_headers
+  	(s00, se, fpi, exp, bits)
+diff -P -C 2 -r gdtoa/strtodI.c gdtoa-new/strtodI.c
+*** gdtoa/strtodI.c	2009-10-21 19:49:32.000000000 -0400
+--- gdtoa-new/strtodI.c	2011-05-27 17:09:13.944030259 -0400
+***************
+*** 51,57 ****
+   int
+  #ifdef KR_headers
+! strtodI(s, sp, dd) CONST char *s; char **sp; double *dd;
+  #else
+! strtodI(CONST char *s, char **sp, double *dd)
+  #endif
+  {
+--- 51,57 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtodI(s, sp, dd) CONST char *s; char **sp; double *dd;
+  #else
+! gdtoa__strtodI(CONST char *s, char **sp, double *dd)
+  #endif
+  {
+***************
+*** 62,66 ****
+  	U *u;
+  
+! 	k = strtodg(s, sp, &fpi, &exp, bits);
+  	u = (U*)dd;
+  	sign = k & STRTOG_Neg ? 0x80000000L : 0;
+--- 62,66 ----
+  	U *u;
+  
+! 	k = gdtoa__strtodg(s, sp, &fpi, &exp, bits);
+  	u = (U*)dd;
+  	sign = k & STRTOG_Neg ? 0x80000000L : 0;
+diff -P -C 2 -r gdtoa/strtof.c gdtoa-new/strtof.c
+*** gdtoa/strtof.c	2009-03-16 00:57:44.000000000 -0400
+--- gdtoa-new/strtof.c	2011-05-27 17:09:13.944030259 -0400
+***************
+*** 32,40 ****
+  #include "gdtoaimp.h"
+  
+!  float
+  #ifdef KR_headers
+! strtof(s, sp) CONST char *s; char **sp;
+  #else
+! strtof(CONST char *s, char **sp)
+  #endif
+  {
+--- 32,40 ----
+  #include "gdtoaimp.h"
+  
+!  float gdtoa__strtof
+  #ifdef KR_headers
+! 	(s, sp) CONST char *s; char **sp;
+  #else
+! 	(CONST char *s, char **sp)
+  #endif
+  {
+***************
+*** 50,54 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+--- 50,54 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+diff -P -C 2 -r gdtoa/strtoId.c gdtoa-new/strtoId.c
+*** gdtoa/strtoId.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoId.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoId(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
+  #else
+! strtoId(CONST char *s, char **sp, double *f0, double *f1)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoId(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
+  #else
+! gdtoa__strtoId(CONST char *s, char **sp, double *f0, double *f1)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtoIdd.c gdtoa-new/strtoIdd.c
+*** gdtoa/strtoIdd.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoIdd.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoIdd(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
+  #else
+! strtoIdd(CONST char *s, char **sp, double *f0, double *f1)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoIdd(s, sp, f0, f1) CONST char *s; char **sp; double *f0, *f1;
+  #else
+! gdtoa__strtoIdd(CONST char *s, char **sp, double *f0, double *f1)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtoIf.c gdtoa-new/strtoIf.c
+*** gdtoa/strtoIf.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoIf.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoIf(s, sp, f0, f1) CONST char *s; char **sp; float *f0, *f1;
+  #else
+! strtoIf(CONST char *s, char **sp, float *f0, float *f1)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoIf(s, sp, f0, f1) CONST char *s; char **sp; float *f0, *f1;
+  #else
+! gdtoa__strtoIf(CONST char *s, char **sp, float *f0, float *f1)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtoIg.c gdtoa-new/strtoIg.c
+*** gdtoa/strtoIg.c	2009-03-16 00:55:05.000000000 -0400
+--- gdtoa-new/strtoIg.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 45,49 ****
+  
+  	b = *B;
+! 	rv = strtodg(s00, se, fpi, exp, b->x);
+  	if (!(rv & STRTOG_Inexact)) {
+  		B[1] = 0;
+--- 45,49 ----
+  
+  	b = *B;
+! 	rv = gdtoa__strtodg(s00, se, fpi, exp, b->x);
+  	if (!(rv & STRTOG_Inexact)) {
+  		B[1] = 0;
+diff -P -C 2 -r gdtoa/strtoIQ.c gdtoa-new/strtoIQ.c
+*** gdtoa/strtoIQ.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoIQ.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoIQ(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! strtoIQ(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoIQ(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! gdtoa__strtoIQ(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtoIx.c gdtoa-new/strtoIx.c
+*** gdtoa/strtoIx.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoIx.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoIx(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! strtoIx(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoIx(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! gdtoa__strtoIx(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtoIxL.c gdtoa-new/strtoIxL.c
+*** gdtoa/strtoIxL.c	2004-04-11 23:39:50.000000000 -0400
+--- gdtoa-new/strtoIxL.c	2011-05-27 17:09:13.943030200 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtoIxL(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! strtoIxL(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtoIxL(s, sp, a, b) CONST char *s; char **sp; void *a; void *b;
+  #else
+! gdtoa__strtoIxL(CONST char *s, char **sp, void *a, void *b)
+  #endif
+  {
+diff -P -C 2 -r gdtoa/strtopd.c gdtoa-new/strtopd.c
+*** gdtoa/strtopd.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/strtopd.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtopd(s, sp, d) char *s; char **sp; double *d;
+  #else
+! strtopd(CONST char *s, char **sp, double *d)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopd(s, sp, d) char *s; char **sp; double *d;
+  #else
+! gdtoa__strtopd(CONST char *s, char **sp, double *d)
+  #endif
+  {
+***************
+*** 49,53 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtod((ULong*)d, bits, exp, k);
+  	return k;
+--- 49,53 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtod((ULong*)d, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtopdd.c gdtoa-new/strtopdd.c
+*** gdtoa/strtopdd.c	2009-03-16 01:32:44.000000000 -0400
+--- gdtoa-new/strtopdd.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtopdd(s, sp, dd) CONST char *s; char **sp; double *dd;
+  #else
+! strtopdd(CONST char *s, char **sp, double *dd)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopdd(s, sp, dd) CONST char *s; char **sp; double *dd;
+  #else
+! gdtoa__strtopdd(CONST char *s, char **sp, double *dd)
+  #endif
+  {
+***************
+*** 58,62 ****
+  #endif
+  
+! 	rv = strtodg(s, sp, fpi, &exp, bits);
+  	u = (U*)dd;
+  	switch(rv & STRTOG_Retmask) {
+--- 58,62 ----
+  #endif
+  
+! 	rv = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	u = (U*)dd;
+  	switch(rv & STRTOG_Retmask) {
+diff -P -C 2 -r gdtoa/strtopf.c gdtoa-new/strtopf.c
+*** gdtoa/strtopf.c	2009-03-16 01:30:33.000000000 -0400
+--- gdtoa-new/strtopf.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 34,40 ****
+   int
+  #ifdef KR_headers
+! strtopf(s, sp, f) CONST char *s; char **sp; float *f;
+  #else
+! strtopf(CONST char *s, char **sp, float *f)
+  #endif
+  {
+--- 34,40 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopf(s, sp, f) CONST char *s; char **sp; float *f;
+  #else
+! gdtoa__strtopf(CONST char *s, char **sp, float *f)
+  #endif
+  {
+***************
+*** 49,53 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	L = (ULong*)f;
+  	switch(k & STRTOG_Retmask) {
+--- 49,53 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	L = (ULong*)f;
+  	switch(k & STRTOG_Retmask) {
+diff -P -C 2 -r gdtoa/strtopQ.c gdtoa-new/strtopQ.c
+*** gdtoa/strtopQ.c	2008-09-09 00:44:56.000000000 -0400
+--- gdtoa-new/strtopQ.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 52,58 ****
+   int
+  #ifdef KR_headers
+! strtopQ(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! strtopQ(CONST char *s, char **sp, void *V)
+  #endif
+  {
+--- 52,58 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopQ(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! gdtoa__strtopQ(CONST char *s, char **sp, void *V)
+  #endif
+  {
+***************
+*** 68,72 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+--- 68,72 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+diff -P -C 2 -r gdtoa/strtopx.c gdtoa-new/strtopx.c
+*** gdtoa/strtopx.c	2009-04-20 01:38:02.000000000 -0400
+--- gdtoa-new/strtopx.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 54,60 ****
+   int
+  #ifdef KR_headers
+! strtopx(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! strtopx(CONST char *s, char **sp, void *V)
+  #endif
+  {
+--- 54,60 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopx(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! gdtoa__strtopx(CONST char *s, char **sp, void *V)
+  #endif
+  {
+***************
+*** 70,74 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+--- 70,74 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+diff -P -C 2 -r gdtoa/strtopxL.c gdtoa-new/strtopxL.c
+*** gdtoa/strtopxL.c	2009-04-20 01:38:02.000000000 -0400
+--- gdtoa-new/strtopxL.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 50,56 ****
+   int
+  #ifdef KR_headers
+! strtopxL(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! strtopxL(CONST char *s, char **sp, void *V)
+  #endif
+  {
+--- 50,56 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtopxL(s, sp, V) CONST char *s; char **sp; void *V;
+  #else
+! gdtoa__strtopxL(CONST char *s, char **sp, void *V)
+  #endif
+  {
+***************
+*** 66,70 ****
+  #endif
+  
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+--- 66,70 ----
+  #endif
+  
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	switch(k & STRTOG_Retmask) {
+  	  case STRTOG_NoNumber:
+diff -P -C 2 -r gdtoa/strtord.c gdtoa-new/strtord.c
+*** gdtoa/strtord.c	2005-01-12 01:47:38.000000000 -0500
+--- gdtoa-new/strtord.c	2011-05-27 17:09:13.946030372 -0400
+***************
+*** 71,77 ****
+   int
+  #ifdef KR_headers
+! strtord(s, sp, rounding, d) CONST char *s; char **sp; int rounding; double *d;
+  #else
+! strtord(CONST char *s, char **sp, int rounding, double *d)
+  #endif
+  {
+--- 71,77 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtord(s, sp, rounding, d) CONST char *s; char **sp; int rounding; double *d;
+  #else
+! gdtoa__strtord(CONST char *s, char **sp, int rounding, double *d)
+  #endif
+  {
+***************
+*** 88,92 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtod((ULong*)d, bits, exp, k);
+  	return k;
+--- 88,92 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtod((ULong*)d, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtordd.c gdtoa-new/strtordd.c
+*** gdtoa/strtordd.c	2009-03-16 01:27:35.000000000 -0400
+--- gdtoa-new/strtordd.c	2011-05-27 17:09:13.946030372 -0400
+***************
+*** 173,179 ****
+   int
+  #ifdef KR_headers
+! strtordd(s, sp, rounding, dd) CONST char *s; char **sp; int rounding; double *dd;
+  #else
+! strtordd(CONST char *s, char **sp, int rounding, double *dd)
+  #endif
+  {
+--- 173,179 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtordd(s, sp, rounding, dd) CONST char *s; char **sp; int rounding; double *dd;
+  #else
+! gdtoa__strtordd(CONST char *s, char **sp, int rounding, double *dd)
+  #endif
+  {
+***************
+*** 194,198 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtodd((ULong*)dd, bits, exp, k);
+  	return k;
+--- 194,198 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtodd((ULong*)dd, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtorf.c gdtoa-new/strtorf.c
+*** gdtoa/strtorf.c	2009-03-16 01:29:14.000000000 -0400
+--- gdtoa-new/strtorf.c	2011-05-27 17:09:13.946030372 -0400
+***************
+*** 67,73 ****
+   int
+  #ifdef KR_headers
+! strtorf(s, sp, rounding, f) CONST char *s; char **sp; int rounding; float *f;
+  #else
+! strtorf(CONST char *s, char **sp, int rounding, float *f)
+  #endif
+  {
+--- 67,73 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtorf(s, sp, rounding, f) CONST char *s; char **sp; int rounding; float *f;
+  #else
+! gdtoa__strtorf(CONST char *s, char **sp, int rounding, float *f)
+  #endif
+  {
+***************
+*** 84,88 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtof((ULong*)f, bits, exp, k);
+  	return k;
+--- 84,88 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtof((ULong*)f, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtorQ.c gdtoa-new/strtorQ.c
+*** gdtoa/strtorQ.c	2005-01-12 01:47:38.000000000 -0500
+--- gdtoa-new/strtorQ.c	2011-05-27 17:09:13.945030317 -0400
+***************
+*** 95,101 ****
+   int
+  #ifdef KR_headers
+! strtorQ(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! strtorQ(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+--- 95,101 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtorQ(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! gdtoa__strtorQ(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+***************
+*** 112,116 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtoQ((ULong*)L, bits, exp, k);
+  	return k;
+--- 112,116 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtoQ((ULong*)L, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtorx.c gdtoa-new/strtorx.c
+*** gdtoa/strtorx.c	2009-04-20 01:38:02.000000000 -0400
+--- gdtoa-new/strtorx.c	2011-05-27 17:09:13.946030372 -0400
+***************
+*** 98,104 ****
+   int
+  #ifdef KR_headers
+! strtorx(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! strtorx(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+--- 98,104 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtorx(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! gdtoa__strtorx(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+***************
+*** 115,119 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtox((UShort*)L, bits, exp, k);
+  	return k;
+--- 115,119 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtox((UShort*)L, bits, exp, k);
+  	return k;
+diff -P -C 2 -r gdtoa/strtorxL.c gdtoa-new/strtorxL.c
+*** gdtoa/strtorxL.c	2009-04-20 01:38:02.000000000 -0400
+--- gdtoa-new/strtorxL.c	2011-05-27 17:09:13.946030372 -0400
+***************
+*** 86,92 ****
+   int
+  #ifdef KR_headers
+! strtorxL(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! strtorxL(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+--- 86,92 ----
+   int
+  #ifdef KR_headers
+! gdtoa__strtorxL(s, sp, rounding, L) CONST char *s; char **sp; int rounding; void *L;
+  #else
+! gdtoa__strtorxL(CONST char *s, char **sp, int rounding, void *L)
+  #endif
+  {
+***************
+*** 103,107 ****
+  		fpi = &fpi1;
+  		}
+! 	k = strtodg(s, sp, fpi, &exp, bits);
+  	ULtoxL((ULong*)L, bits, exp, k);
+  	return k;
+--- 103,107 ----
+  		fpi = &fpi1;
+  		}
+! 	k = gdtoa__strtodg(s, sp, fpi, &exp, bits);
+  	ULtoxL((ULong*)L, bits, exp, k);
+  	return k;
Index: runtime/bytecode/opcode.h
===================================================================
--- runtime/bytecode/opcode.h	(revision 7524)
+++ runtime/bytecode/opcode.h	(revision 7552)
@@ -1,241 +0,0 @@
-/* Copyright (C) 2004-2007 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#ifndef _OPCODE_H_
-#define _OPCODE_H_
-
-#define coercePrims()                           \
-        allWordCoercePrims(8)                   \
-        allWordCoercePrims(16)                  \
-        allWordCoercePrims(32)                  \
-        allWordCoercePrims(64)                  \
-        coerce(rnd, Real32, Real32, Real32, Real32)     \
-        coerce(rnd, Real32, Real64, Real32, Real64)     \
-        coerce(rnd, Real64, Real32, Real64, Real32)     \
-        coerce(rnd, Real64, Real64, Real64, Real64)     \
-        coerce(cast, Real32, Word32, Real32, Word32)    \
-        coerce(cast, Word32, Real32, Word32, Real32)    \
-        coerce(cast, Real64, Word64, Real64, Word64)    \
-        coerce(cast, Word64, Real64, Word64, Real64)
-
-#define allWordCoercePrims(size)                        \
-        bothFromWordCoercePrims(rnd, size, Real32)      \
-        bothFromWordCoercePrims(rnd, size, Real64)      \
-        bothToWordCoercePrims(rnd, Real32, size)        \
-        bothToWordCoercePrims(rnd, Real64, size)        \
-        bothFromWordCoercePrims(extd, size, Word8)      \
-        bothFromWordCoercePrims(extd, size, Word16)     \
-        bothFromWordCoercePrims(extd, size, Word32)     \
-        bothFromWordCoercePrims(extd, size, Word64)
-
-#define bothFromWordCoercePrims(name, from, to)                 \
-        coerce (name, Word##from, to, Word##S##from, to)        \
-        coerce (name, Word##from, to, Word##U##from, to)
-#define bothToWordCoercePrims(name, from, to)                   \
-        coerce (name, from, Word##to, from, Word##S##to)        \
-        coerce (name, from, Word##to, from, Word##U##to)
-
-#define loadStorePrimsOfTy(mode, ty)            \
-        loadStoreArrayOffset (mode, ty)         \
-        loadStoreContents (mode, ty)            \
-        loadStoreGlobal (mode, ty)              \
-        loadStoreOffset (mode, ty)              \
-        loadStoreRegister (mode, ty)            \
-        loadStoreStackOffset (mode, ty)
-
-#define loadStorePrims(mode)                            \
-        loadStorePrimsOfTy (mode, Real32)               \
-        loadStorePrimsOfTy (mode, Real64)               \
-        loadStorePrimsOfTy (mode, Word8)                \
-        loadStorePrimsOfTy (mode, Word16)               \
-        loadStorePrimsOfTy (mode, Word32)               \
-        loadStorePrimsOfTy (mode, Word64)               \
-        loadStoreGlobalPointer (mode, CPointer)         \
-        loadStoreGlobalPointer (mode, Objptr)           \
-        loadStoreRegisterPointer (mode, CPointer)       \
-        loadStoreRegisterPointer (mode, Objptr)         \
-        loadStoreFrontier (mode)                        \
-        loadStoreStackTop (mode)
-
-#define realPrimsOfSize(size)                           \
-        binary (Real##size, Real##size##_add)           \
-        binary (Real##size, Real##size##_div)           \
-        compare (Real##size, Real##size##_equal)        \
-        compare (Real##size, Real##size##_le)           \
-        compare (Real##size, Real##size##_lt)           \
-        binary (Real##size, Real##size##_mul)           \
-        unary (Real##size, Real##size##_neg)            \
-        unary (Real##size, Real##size##_round)          \
-        binary (Real##size, Real##size##_sub)           \
-        unary (Real##size, Real##size##_Math_acos)      \
-        unary (Real##size, Real##size##_Math_asin)      \
-        unary (Real##size, Real##size##_Math_atan)      \
-        binary (Real##size, Real##size##_Math_atan2)    \
-        unary (Real##size, Real##size##_Math_cos)       \
-        unary (Real##size, Real##size##_Math_exp)       \
-        unary (Real##size, Real##size##_Math_ln)        \
-        unary (Real##size, Real##size##_Math_log10)     \
-        unary (Real##size, Real##size##_Math_sin)       \
-        unary (Real##size, Real##size##_Math_sqrt)      \
-        unary (Real##size, Real##size##_Math_tan)
-
-#define wordPrimsOfSize(size)                           \
-        binary (Word##size, Word##size##_add)           \
-        binary (Word##size, Word##size##_andb)          \
-        compare (Word##size, Word##size##_equal)        \
-        compare (Word##size, WordS##size##_lt)          \
-        compare (Word##size, WordU##size##_lt)          \
-        shift (Word##size, Word##size##_lshift)         \
-        binary (Word##size, WordS##size##_mul)          \
-        binary (Word##size, WordU##size##_mul)          \
-        unary (Word##size, Word##size##_neg)            \
-        unary (Word##size, Word##size##_notb)           \
-        binary (Word##size, Word##size##_orb)           \
-        binary (Word##size, WordS##size##_quot)         \
-        binary (Word##size, WordU##size##_quot)         \
-        binary (Word##size, WordS##size##_rem)          \
-        binary (Word##size, WordU##size##_rem)          \
-        shift (Word##size, Word##size##_rol)            \
-        shift (Word##size, Word##size##_ror)            \
-        shift (Word##size, WordS##size##_rshift)        \
-        shift (Word##size, WordU##size##_rshift)        \
-        binary (Word##size, Word##size##_sub)           \
-        binary (Word##size, Word##size##_xorb)          \
-        binaryCheck (Word##size, WordS##size##_addCheck)        \
-        binaryCheck (Word##size, WordU##size##_addCheck)        \
-        binaryCheck (Word##size, WordS##size##_mulCheck)        \
-        binaryCheck (Word##size, WordU##size##_mulCheck)        \
-        unaryCheck (Word##size, Word##size##_negCheck)          \
-        binaryCheck (Word##size, WordS##size##_subCheck)        \
-        loadWord (size)
-
-#define cpointerPrims()                                 \
-        cpointerBinary (CPointer_add)                   \
-        cpointerBinary (CPointer_sub)                   \
-        cpointerCompare(CPointer_equal)                 \
-        cpointerCompare(CPointer_lt)                    \
-        cpointerCoerceFrom (CPointer_fromWord)          \
-        cpointerCoerceTo (CPointer_toWord)              \
-        cpointerDiff (CPointer_diff)                    \
-        cpointerLoadWord (CPointer_loadWord)
-
-#define prims()                                         \
-        coercePrims ()                                  \
-        cpointerPrims ()                                \
-        loadGCState ()                                  \
-        loadStorePrims (load)                           \
-        loadStorePrims (store)                          \
-        realPrimsOfSize (32)                            \
-        realPrimsOfSize (64)                            \
-        wordPrimsOfSize (8)                             \
-        wordPrimsOfSize (16)                            \
-        wordPrimsOfSize (32)                            \
-        wordPrimsOfSize (64)
-
-#define opcodes()                               \
-        prims()                                 \
-        opcodeGen (CacheFrontier)               \
-        opcodeGen (FlushFrontier)               \
-        opcodeGen (CacheStackTop)               \
-        opcodeGen (FlushStackTop)               \
-        opcodeGen (BranchIfZero)                \
-        opcodeGen (CallC)                       \
-        opcodeGen (Goto)                        \
-        opcodeGen (loadGPNR)                    \
-        opcodeGen (storeGPNR)                   \
-        opcodeGen (JumpOnOverflow)              \
-        opcodeGen (Raise)                       \
-        opcodeGen (Return)                      \
-        opcodeGen (Switch8)                     \
-        opcodeGen (Switch16)                    \
-        opcodeGen (Switch32)                    \
-        opcodeGen (Switch64)                    \
-        opcodeGen (Thread_returnToC)
-
-#define opcodeSym(z)  OPCODE_##z
-#define opcodeSymOfTy(ty, size, name)  opcodeSym (ty##size##_##name)
-#define opcodeSymOfTy2(ty, name)  opcodeSym (ty##_##name)
-#define opcodeName(ty, size, name) opcodeGen (ty##size##_##name)
-#define opcodeName2(ty, name) opcodeGen (ty##_##name)
-
-#define binary(ty, f)  opcodeGen (f)
-#define binaryCheck(ty, f)  opcodeGen (f)
-#define coerceOp(n, f, t)  opcodeGen (f##_##n##To##t)
-#define coerce(n, f1, t1, f2, t2)  coerceOp (n, f2, t2)
-#define compare(ty, f)  opcodeGen (f)
-#define cpointerBinary(f)  opcodeGen (f)
-#define cpointerCompare(f)  opcodeGen (f)
-#define cpointerCoerceFrom(f)  opcodeGen (f)
-#define cpointerCoerceTo(f)  opcodeGen (f)
-#define cpointerDiff(f)  opcodeGen (f)
-#define cpointerLoadWord(f)  opcodeGen (f)
-#define loadStoreArrayOffset(mode, ty)  opcodeName2 (ty, mode##ArrayOffset)
-#define loadStoreContents(mode, ty)  opcodeName2 (ty, mode##Contents)
-#define loadStoreFrontier(mode) opcodeGen (mode##Frontier)
-#define loadGCState() opcodeGen (loadGCState)
-#define loadStoreGlobal(mode, ty)  opcodeName2 (ty, mode##Global)
-#define loadStoreGlobalPointer(mode, ty)  opcodeName2 (ty, mode##Global)
-#define loadStoreOffset(mode, ty)  opcodeName2 (ty, mode##Offset)
-#define loadStoreRegister(mode, ty)  opcodeName2 (ty, mode##Register)
-#define loadStoreRegisterPointer(mode, ty)  opcodeName2 (ty, mode##Register)
-#define loadStoreStackOffset(mode, ty)  opcodeName2 (ty, mode##StackOffset)
-#define loadStoreStackTop(mode)  opcodeGen (mode##StackTop)
-#define loadWord(size)  opcodeName (Word, size, loadWord)
-#define shift(ty, f)  opcodeGen (f)
-#define unary(ty, f)  opcodeGen (f)
-#define unaryCheck(ty, f)  opcodeGen (f)
-
-// Define the opcode strings.
-
-#define opcodeGen(z)  #z,
-
-PRIVATE const char *opcodeStrings [] = {
-        opcodes ()
-};
-
-#undef opcodeGen
-
-// Define the Opcode enum.
-
-#define opcodeGen(z) opcodeSym (z),
-
-enum OpcodeEnum {
-        opcodes ()
-};
-
-typedef Word16 Opcode;
-
-#undef binary
-#undef binaryCheck
-#undef coerce
-#undef coerceOp
-#undef compare
-#undef cpointerBinary
-#undef cpointerCompare
-#undef cpointerCoerceFrom
-#undef cpointerCoerceTo
-#undef cpointerDiff
-#undef cpointerLoadWord
-#undef loadGCState
-#undef loadStoreArrayOffset
-#undef loadStoreContents
-#undef loadStoreFrontier
-#undef loadStoreGlobal
-#undef loadStoreGlobalPointer
-#undef loadStoreOffset
-#undef loadStoreRegister
-#undef loadStoreRegisterPointer
-#undef loadStoreStackOffset
-#undef loadStoreStackTop
-#undef loadWord
-#undef shift
-#undef unary
-#undef unaryCheck
-
-// At this point the opcodes() macro is still defined.
-
-#endif
Index: runtime/bytecode/.ignore
===================================================================
--- runtime/bytecode/.ignore	(revision 7524)
+++ runtime/bytecode/.ignore	(revision 7552)
@@ -1,3 +0,0 @@
-print-opcodes
-print-opcodes.exe
-opcodes
Index: runtime/bytecode/interpret.h
===================================================================
--- runtime/bytecode/interpret.h	(revision 7524)
+++ runtime/bytecode/interpret.h	(revision 7552)
@@ -1,65 +0,0 @@
-/* Copyright (C) 2004-2007 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#ifndef _INTERPRET_H_
-#define _INTERPRET_H_
-
-#include <stdio.h>
-#include "assert.h"
-
-#define regs(ty)                                \
-        PRIVATE extern int ty##RegI;            \
-        PRIVATE extern ty ty##Reg[]
-
-regs(CPointer);
-regs(Objptr);
-regs(Real32);
-regs(Real64);
-regs(Word8);
-regs(Word16);
-regs(Word32);
-regs(Word64);
-
-#undef regs
-
-#define assertRegsEmpty()                       \
-        do {                                    \
-                assert (0 == CPointerRegI);     \
-                assert (0 == ObjptrRegI);       \
-                assert (0 == Real32RegI);       \
-                assert (0 == Real64RegI);       \
-                assert (0 == Word8RegI);        \
-                assert (0 == Word16RegI);       \
-                assert (0 == Word32RegI);       \
-                assert (0 == Word64RegI);       \
-        } while (0)
-
-typedef uintptr_t CodeOffset;
-
-struct NameOffsets {
-        CodeOffset codeOffset;  // An offset into code.
-        Word32 nameOffset;  // An offset into addressNames.
-};
-
-typedef struct Bytecode {
-        char *addressNames;
-        Pointer code;
-        CodeOffset codeSize;
-        struct NameOffsets *nameOffsets;
-        Word32 nameOffsetsSize;
-} *Bytecode;
-
-
-#define PopReg(ty) (assert (ty##RegI > 0), ty##Reg [--ty##RegI])
-#define PopRegX(ty) PopReg(ty)
-#define PushReg(ty) ty##Reg [ty##RegI++]
-#define PushRegX(ty) PushReg(ty)
-
-PRIVATE void MLton_callC (int i);  // provided by client
-PRIVATE void MLton_Bytecode_interpret (Bytecode b, CodeOffset codeOffset);
-
-#endif
Index: runtime/bytecode/print-opcodes.c
===================================================================
--- runtime/bytecode/print-opcodes.c	(revision 7524)
+++ runtime/bytecode/print-opcodes.c	(revision 7552)
@@ -1,22 +0,0 @@
-/* Copyright (C) 2004-2006 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#include "platform.h"
-#include <stdio.h>
-#include "opcode.h"
-
-int main (__attribute__((unused)) int argc, 
-          __attribute__((unused)) char* argv[]) {
-        Opcode opc;
-        unsigned int i;
-
-        unless (cardof (opcodeStrings) < (1 << (8 * sizeof (opc))))
-                die ("too many opcodes\n");
-        for (i = 0; i < cardof (opcodeStrings); ++i)
-                fprintf (stdout, "%s\n", opcodeStrings[i]);
-        return 0;
-}
Index: runtime/bytecode/Makefile
===================================================================
--- runtime/bytecode/Makefile	(revision 7524)
+++ runtime/bytecode/Makefile	(revision 7552)
@@ -1,12 +0,0 @@
-## Copyright (C) 2004-2006 Henry Cejtin, Matthew Fluet, Suresh
- #    Jagannathan, and Stephen Weeks.
- #
- # MLton is released under a BSD-style license.
- # See the file MLton-LICENSE for details.
- ##
-
-all:
-
-.PHONY:
-clean:
-	../../bin/clean
Index: runtime/bytecode/interpret.c
===================================================================
--- runtime/bytecode/interpret.c	(revision 7524)
+++ runtime/bytecode/interpret.c	(revision 7552)
@@ -1,632 +0,0 @@
-/* Copyright (C) 2009 Matthew Fluet.
- * Copyright (C) 2004-2008 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- */
-
-#define MLTON_GC_INTERNAL_TYPES
-#ifndef MLTON_CODEGEN_STATIC_INLINE
-#define MLTON_CODEGEN_STATIC_INLINE static inline
-#endif
-
-/* No need to declare inlined math functions, since <math.h> comes
- * with "platform.h".
- */
-#ifndef MLTON_CODEGEN_MATHFN
-#define MLTON_CODEGEN_MATHFN(decl)
-#endif
-/* WordS<N>_quot and WordS<N>_rem can be inlined with the
- * bytecode-codegen, since they will be used in a context where the
- * arguments are variables.
- */
-#ifndef MLTON_CODEGEN_WORDSQUOTREM
-#define MLTON_CODEGEN_WORDSQUOTREM(func) func
-#endif
-#ifndef MLTON_CODEGEN_WORDSQUOTREM_IMPL
-#define MLTON_CODEGEN_WORDSQUOTREM_IMPL(func) func
-#endif
-/* No need to declare memcpy, since <string.h> comes with platform.h.
- */
-#ifndef MLTON_CODEGEN_MEMCPY
-#define MLTON_CODEGEN_MEMCPY(decl)
-#endif
-#include "platform.h"
-#include "c-chunk.h"    // c-chunk.h must come before opcode.h because it
-                        // redefines some opcode symbols
-
-#include "interpret.h"
-#include "opcode.h"
-
-enum {
-  DEBUG_BYTECODE = FALSE,
-};
-
-#if defined (GC_MODEL_NATIVE32)
-#define WordPointer Word32
-#define WordArrayIndex Word32
-#elif defined (GC_MODEL_NATIVE64)
-#define WordPointer Word64
-#define WordArrayIndex Word64
-#else
-#error GC_MODEL_* undefined
-#endif
-
-typedef WordArrayIndex ArrayIndex;
-typedef Word16 ArrayOffset;
-typedef Word16 CallCIndex;
-typedef Word16 GlobalIndex;
-typedef uintptr_t Label;
-typedef Int16 Offset;  // Offset must be signed.
-typedef Pointer ProgramCounter;
-typedef Word16 RegIndex;
-typedef Word8 Scale;
-typedef Int16 StackOffset;  // StackOffset must be signed.
-
-PRIVATE extern struct GC_state gcState;
-
-//----------------------------------------------------------------------
-// Imports
-//----------------------------------------------------------------------
-
-#define regs(ty)                                \
-        int ty##RegI = 0;                       \
-        PRIVATE extern ty global##ty[];         \
-        static ty ty##VReg[1000];               \
-        ty ty##Reg[1000] = { 0 }
-
-regs(CPointer);
-regs(Objptr);
-regs(Real32);
-regs(Real64);
-regs(Word8);
-regs(Word16);
-regs(Word32);
-regs(Word64);
-
-PRIVATE extern Objptr globalObjptrNonRoot[];
-
-#undef regs
-
-//
-// Virtual Registers.  Explicitly referenced by the Machine IL.
-//
-
-#define R(ty, i) (ty##VReg [i])
-
-//----------------------------------------------------------------------
-
-#define Fetch(t, z)                                                             \
-        do {                                                                    \
-                z = *(t*)pc;                                                    \
-                if (DEBUG or DEBUG_BYTECODE or disassemble) {                   \
-                        if (! strcmp(#z,"label"))                               \
-                                fprintf (stderr, " %s", offsetToLabel[z]);      \
-                        else if (! strcmp(#z, "opc"))                           \
-                                fprintf (stderr, " %d", (int)z);                \
-                }                                                               \
-                pc += sizeof (t);                                       \
-        } while (0)
-
-enum {
-        MODE_load,
-        MODE_store,
-};
-
-#define maybe unless (disassemble)
-
-#define StoreReg(t, z) maybe PushReg(t) = z
-
-#define loadStoreGen(mode, t, t2, z)            \
-        switch (MODE_##mode) {                  \
-        case MODE_load:                         \
-                StoreReg (t2, (t2)z);           \
-                break;                          \
-        case MODE_store:                        \
-                maybe z = (t) (PopReg (t2));    \
-                break;                          \
-        default:                                \
-                assert (FALSE);                 \
-        }
-
-#define loadStore(mode, t, z)  loadStoreGen(mode, t, t, z)
-
-#define loadStoreArrayOffset(mode, ty)                                          \
-        case opcodeSymOfTy2 (ty, mode##ArrayOffset):                            \
-        {                                                                       \
-                ArrayOffset arrayOffset;                                        \
-                Pointer arrayBase;                                              \
-                ArrayIndex arrayIndex;                                          \
-                Scale arrayScale;                                               \
-                Fetch (ArrayOffset, arrayOffset);                               \
-                Fetch (Scale, arrayScale);                                      \
-                if (disassemble) goto mainLoop;                                 \
-                arrayIndex = PopRegX (WordArrayIndex);                          \
-                arrayBase = (Pointer) (PopRegX (WordPointer));                  \
-                loadStore (mode, ty,                                            \
-                                *(ty*)(arrayBase + (arrayIndex * arrayScale) + arrayOffset)); \
-                goto mainLoop;                                                  \
-        }
-
-#define loadStoreContents(mode, ty)                             \
-        case opcodeSymOfTy2 (ty, mode##Contents):               \
-                if (disassemble) goto mainLoop;                 \
-        {                                                       \
-                Pointer base;                                   \
-                base = (Pointer) (PopRegX (WordPointer));       \
-                loadStore (mode, ty, C (ty, base));             \
-                goto mainLoop;                                  \
-        }
-
-#define loadStoreFrontier(mode)                                 \
-        case opcodeSym (mode##Frontier):                        \
-                if (disassemble) goto mainLoop;                 \
-                loadStoreGen (mode, Pointer, WordPointer, Frontier); \
-                goto mainLoop;
-
-#define loadGCState()                                   \
-        case opcodeSym (loadGCState):                   \
-                if (disassemble) goto mainLoop;         \
-                StoreReg (WordPointer, (WordPointer)&gcState); \
-                goto mainLoop;
-
-#define loadStoreGlobal(mode, ty)                                       \
-        case opcodeSymOfTy2 (ty, mode##Global):                         \
-        {                                                               \
-                GlobalIndex globalIndex;                                \
-                Fetch (GlobalIndex, globalIndex);                       \
-                if (disassemble) goto mainLoop;                         \
-                loadStoreGen (mode, ty, ty, G (ty, globalIndex));       \
-                goto mainLoop;                                          \
-        }
-
-#define loadStoreGlobalPointer(mode, ty)                                        \
-        case opcodeSymOfTy2 (ty, mode##Global):                                 \
-        {                                                                       \
-                GlobalIndex globalIndex;                                        \
-                Fetch (GlobalIndex, globalIndex);                               \
-                if (disassemble) goto mainLoop;                                 \
-                loadStoreGen (mode, ty, WordPointer, G (ty, globalIndex));      \
-                goto mainLoop;                                                  \
-        }
-
-#define loadStoreGPNR(mode)                                                     \
-        case opcodeSym (mode##GPNR):                                            \
-        {                                                                       \
-                GlobalIndex globalIndex;                                        \
-                Fetch (GlobalIndex, globalIndex);                               \
-                if (disassemble) goto mainLoop;                                 \
-                loadStoreGen (mode, Objptr, WordPointer, GPNR (globalIndex));   \
-                goto mainLoop;                                                  \
-        }
-
-#define loadStoreOffset(mode, ty)                                       \
-        case opcodeSymOfTy2 (ty, mode##Offset):                         \
-        {                                                               \
-                Pointer base;                                           \
-                Offset offset;                                          \
-                Fetch (Offset, offset);                                 \
-                if (disassemble) goto mainLoop;                         \
-                base = (Pointer) (PopRegX (WordPointer));               \
-                maybe loadStore (mode, ty, O (ty, base, offset));       \
-                goto mainLoop;                                          \
-        }
-
-#define loadStoreRegister(mode, ty)                             \
-        case opcodeSymOfTy2 (ty, mode##Register):               \
-        {                                                       \
-                RegIndex regIndex;                              \
-                Fetch (RegIndex, regIndex);                     \
-                if (disassemble) goto mainLoop;                 \
-                loadStoreGen (mode, ty, ty, R (ty, regIndex));  \
-                goto mainLoop;                                  \
-        }
-
-#define loadStoreRegisterPointer(mode, ty)                                      \
-        case opcodeSymOfTy2 (ty, mode##Register):                               \
-        {                                                                       \
-                RegIndex regIndex;                                              \
-                Fetch (RegIndex, regIndex);                                     \
-                if (disassemble) goto mainLoop;                                 \
-                loadStoreGen (mode, ty, WordPointer, R (ty, regIndex));         \
-                goto mainLoop;                                                  \
-        }
-
-#define loadStoreStackOffset(mode, ty)                          \
-        case opcodeSymOfTy2 (ty, mode##StackOffset):            \
-        {                                                       \
-                StackOffset stackOffset;                        \
-                Fetch (StackOffset, stackOffset);               \
-                if (disassemble) goto mainLoop;                 \
-                loadStore (mode, ty, S (ty, stackOffset));      \
-                goto mainLoop;                                  \
-        }
-
-#define loadStoreStackTop(mode)                                 \
-        case opcodeSym (mode##StackTop):                        \
-                if (disassemble) goto mainLoop;                 \
-                loadStoreGen (mode, Pointer, WordPointer, StackTop); \
-                goto mainLoop;
-
-#define loadWord(size)                                  \
-        case opcodeSymOfTy (Word, size, loadWord):      \
-        {                                               \
-                Word##size t0;                          \
-                Fetch (Word##size, t0);                 \
-                if (disassemble) goto mainLoop;         \
-                loadStore (load, Word##size, t0);       \
-                goto mainLoop;                          \
-        }
-
-#define binary(ty, f)                           \
-        case opcodeSym (f):                     \
-                if (disassemble) goto mainLoop; \
-        {                                       \
-                ty t0 = PopReg (ty);            \
-                ty t1 = PopReg (ty);            \
-                PushReg (ty) = f (t0, t1);      \
-                goto mainLoop;                  \
-        }
-
-/* The bytecode interpreter relies on the fact that the overflow checking
- * primitives implemented in c-chunk.h only set the result if the operation does
- * not overflow.  When the result overflow, the interpreter pushes a zero on
- * the stack for the result.
- */
-#define binaryCheck(ty, f)                                      \
-        case opcodeSym (f):                                     \
-                if (disassemble) goto mainLoop;                 \
-        {                                                       \
-                ty t0 = PopReg (ty);                            \
-                ty t1 = PopReg (ty);                            \
-                f (PushReg (ty), t0, t1, f##Overflow);          \
-                overflow = FALSE;                               \
-                goto mainLoop;                                  \
-        f##Overflow:                                            \
-                PushReg (ty) = 0; /* overflow, push 0 */        \
-                overflow = TRUE;                                \
-                goto mainLoop;                                  \
-        }
-
-#define coerceOp(n, f, t)  opcodeSym (f##_##n##To##t)
-#define coerce(n, f1, t1, f2, t2)                       \
-        case coerceOp (n, f2, t2):                      \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                f1 t0 = PopReg (f1);                    \
-                PushReg (t1) = f2##_##n##To##t2 (t0);   \
-                goto mainLoop;                          \
-        }
-
-#define compare(ty, f)                          \
-        case opcodeSym (f):                     \
-                if (disassemble) goto mainLoop; \
-        {                                       \
-                ty t0 = PopReg (ty);            \
-                ty t1 = PopReg (ty);            \
-                PushReg (Word32) = f (t0, t1);  \
-                goto mainLoop;                  \
-        }
-
-#define cpointerBinary(f)                               \
-        case opcodeSym (f):                             \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                Pointer t0;                             \
-                t0 = (Pointer) (PopRegX (WordPointer)); \
-                WordPointer t1 = PopRegX (WordPointer); \
-                Pointer t2 = f (t0, t1);                \
-                PushRegX (WordPointer) = (WordPointer) t2; \
-                goto mainLoop;                          \
-        }
-#define cpointerCompare(f)                              \
-        case opcodeSym (f):                             \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                Pointer t0, t1;                         \
-                t0 = (Pointer) (PopRegX (WordPointer)); \
-                t1 = (Pointer) (PopRegX (WordPointer)); \
-                PushReg (Word32) = f (t0, t1);          \
-                goto mainLoop;                          \
-        }
-#define cpointerCoerceFrom(f)                           \
-        case opcodeSym (f):                             \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                WordPointer t0 = PopRegX (WordPointer); \
-                Pointer t1 = f (t0);                    \
-                PushRegX (WordPointer) = (WordPointer) t1; \
-                goto mainLoop;                          \
-        }
-#define cpointerCoerceTo(f)                             \
-        case opcodeSym (f):                             \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                Pointer t0;                             \
-                t0 = (Pointer) (PopRegX (WordPointer)); \
-                PushRegX (WordPointer) = f (t0);        \
-                goto mainLoop;                          \
-        }
-#define cpointerDiff(f)                                 \
-        case opcodeSym (f):                             \
-                if (disassemble) goto mainLoop;         \
-        {                                               \
-                Pointer t0, t1;                         \
-                t0 = (Pointer) (PopRegX (WordPointer)); \
-                t1 = (Pointer) (PopRegX (WordPointer)); \
-                PushRegX (WordPointer) = f (t0, t1);    \
-                goto mainLoop;                          \
-        }
-#define cpointerLoadWord(f)                             \
-        case opcodeSym (f):                             \
-        {                                               \
-                size_t t0;                              \
-                Fetch (WordPointer, t0);                \
-                if (disassemble) goto mainLoop;         \
-                StoreReg (CPointer, (CPointer)t0);      \
-                goto mainLoop;                          \
-        }
-
-#define shift(ty, f)                            \
-        case opcodeSym (f):                     \
-                if (disassemble) goto mainLoop; \
-        {                                       \
-                ty w = PopReg (ty);             \
-                Word32 s = PopReg (Word32);     \
-                ty w2 = f (w, s);               \
-                PushReg (ty) = w2;              \
-                goto mainLoop;                  \
-        }
-
-#define unary(ty, f)                            \
-        case opcodeSym (f):                     \
-                if (disassemble) goto mainLoop; \
-        {                                       \
-                ty t0 = PopReg (ty);            \
-                PushReg (ty) = f (t0);          \
-                goto mainLoop;                  \
-        }
-
-/* The bytecode interpreter relies on the fact that the overflow checking
- * primitives implemented in c-chunk.h only set the result if the operation does
- * not overflow.  When the result overflow, the interpreter pushes a zero on
- * the stack for the result.
- */
-#define unaryCheck(ty, f)                                       \
-        case opcodeSym (f):                                     \
-                if (disassemble) goto mainLoop;                 \
-        {                                                       \
-                ty t0 = PopReg (ty);                            \
-                f (PushReg (ty), t0, f##Overflow);              \
-                overflow = FALSE;                               \
-                goto mainLoop;                                  \
-        f##Overflow:                                            \
-                PushReg (ty) = 0; /* overflow, push 0 */        \
-                overflow = TRUE;                                \
-                goto mainLoop;                                  \
-        }
-
-#define Goto(l)                                 \
-        do {                                    \
-                maybe pc = code + l;            \
-                goto mainLoop;                  \
-        } while (0)
-
-#define Switch(size)                                                    \
-        case OPCODE_Switch##size:                                       \
-        {                                                               \
-                Label label;                                            \
-                ProgramCounter lastCase;                                \
-                Word##size test = 0;                                    \
-                Word16 numCases;                                        \
-                                                                        \
-                Fetch (Word16, numCases);                               \
-                if (sizeof(Label) == 4) {                               \
-                        lastCase = pc + (4 + size/8) * numCases;        \
-                } else if (sizeof(Label) == 8) {                        \
-                        lastCase = pc + (8 + size/8) * numCases;        \
-                } else { assert (FALSE); }                              \
-                maybe test = PopReg (Word##size);                       \
-                assertRegsEmpty ();                                     \
-                while (pc < lastCase) {                                 \
-                        Word##size caseWord;                            \
-                        if (DEBUG or DEBUG_BYTECODE or disassemble)     \
-                                fprintf (stderr, "\n\t  ");             \
-                        Fetch (Word##size, caseWord);                   \
-                        if (DEBUG or DEBUG_BYTECODE or disassemble)     \
-                                fprintf (stderr, " =>");                \
-                        Fetch (Label, label);                           \
-                        if (not disassemble and test == caseWord)       \
-                                Goto (label);                           \
-                }                                                       \
-                goto mainLoop;                                          \
-        }
-
-typedef char *String;
-
-#undef CacheFrontier
-#undef CacheStackTop
-#undef FlushFrontier
-#undef FlushStackTop
-#define CacheFrontier()                         \
-        do {                                    \
-                frontier = (Pointer)(gcState.frontier); \
-        } while (0)
-#define CacheStackTop()                         \
-        do {                                    \
-                stackTop = (Pointer)(gcState.stackTop); \
-        } while (0)
-#define FlushFrontier()                         \
-        do {                                    \
-                gcState.frontier = (pointer)frontier; \
-        } while (0)
-#define FlushStackTop()                         \
-        do {                                    \
-                gcState.stackTop = (pointer)stackTop; \
-        } while (0)
-
-#define disp(ty,ty2,fmt)                                        \
-        for (i = 0; i < ty##RegI; ++i)                          \
-                fprintf (stderr, "\n" #ty "Reg[%d] = "fmt,      \
-                                i, (ty2)(ty##Reg[i]))
-
-static inline void displayRegs (void) {
-        int i;
-
-        disp (CPointer,uintptr_t,FMTPTR);
-        disp (Objptr,uintptr_t,FMTPTR);
-        disp (Word8,Word8,"0x%02"PRIx8);
-        disp (Word16,Word16,"0x%04"PRIx16);
-        disp (Word32,Word32,"0x%08"PRIx32);
-        disp (Word64,Word64,"0x%016"PRIx64);
-        disp (Real32,Real32,"%f");
-        disp (Real64,Real64,"%f");
-}
-
-static void interpret (Bytecode b, CodeOffset codeOffset, Bool disassemble) {
-        CallCIndex callCIndex;
-        Pointer code;
-        Pointer frontier;
-        unsigned int i;
-        String name;
-        String *offsetToLabel = NULL;
-        Opcode opc;
-        Bool overflow = FALSE;
-        ProgramCounter pc;
-        ProgramCounter pcMax;
-        Pointer stackTop;
-
-        code = b->code;
-        pcMax = b->code + b->codeSize;
-        if (DEBUG or DEBUG_BYTECODE or disassemble) {
-                offsetToLabel =
-                  (String*)(calloc_safe (b->codeSize, sizeof(*offsetToLabel)));
-                for (i = 0; i < b->nameOffsetsSize; ++i)
-                        offsetToLabel [b->nameOffsets[i].codeOffset] =
-                                b->addressNames + b->nameOffsets[i].nameOffset;
-        }
-        if (disassemble)
-                pc = code;
-        else {
-                pc = code + codeOffset;
-        }
-        CacheFrontier ();
-        CacheStackTop ();
-mainLoop:
-        if (DEBUG_BYTECODE)
-                displayRegs ();
-        if (DEBUG or DEBUG_BYTECODE or disassemble) {
-                if (pc == pcMax)
-                        goto done;
-                name = offsetToLabel [pc - b->code];
-                unless (NULL == name)
-                        fprintf (stderr, "\n%s:", name);
-                fprintf (stderr, "\n\t");
-        }
-        assert (code <= pc and pc < pcMax);
-        Fetch (Opcode, opc);
-        assert (opc < (cardof (opcodeStrings)));
-        if (DEBUG or DEBUG_BYTECODE or disassemble)
-                fprintf (stderr, "%s", opcodeStrings[opc]);
-        switch ((enum OpcodeEnum)opc) {
-        prims ();
-        case opcodeSym (CacheFrontier):
-        {
-                if (disassemble) goto mainLoop;
-                CacheFrontier ();
-                goto mainLoop;
-        }
-        case opcodeSym (FlushFrontier):
-        {
-                if (disassemble) goto mainLoop;
-                FlushFrontier ();
-                goto mainLoop;
-        }
-        case opcodeSym (CacheStackTop):
-        {
-                if (disassemble) goto mainLoop;
-                CacheStackTop ();
-                goto mainLoop;
-        }
-        case opcodeSym (FlushStackTop):
-        {
-                if (disassemble) goto mainLoop;
-                FlushStackTop ();
-                goto mainLoop;
-        }
-        case opcodeSym (BranchIfZero):
-        {
-                Label label;
-
-                Fetch (Label, label);
-                if (disassemble) goto mainLoop;
-                if (0 == PopReg (Word32))
-                        Goto (label);
-                goto mainLoop;
-        }
-        case opcodeSym (CallC):
-                Fetch (CallCIndex, callCIndex);
-                unless (disassemble) {
-                        FlushFrontier ();
-                        FlushStackTop ();
-                        MLton_callC (callCIndex);
-                        CacheFrontier ();
-                        CacheStackTop ();
-                }
-                goto mainLoop;
-        case opcodeSym (Goto):
-        {
-                Label label;
-                Fetch (Label, label);
-                Goto (label);
-        }
-        loadStoreGPNR(load);
-        loadStoreGPNR(store);
-        case opcodeSym (JumpOnOverflow):
-        {
-                Label label;
-                Fetch (Label, label);
-                if (overflow)
-                        Goto (label);
-                goto mainLoop;
-        }
-        case opcodeSym (Raise):
-                maybe StackTop = (Pointer)(gcState.stackBottom + gcState.exnStack);
-                // fall through to Return.
-        case opcodeSym (Return):
-                Goto (*(Label*)(StackTop - sizeof (Label)));
-        Switch(8);
-        Switch(16);
-        Switch(32);
-        Switch(64);
-        case opcodeSym (Thread_returnToC):
-                if (disassemble) goto mainLoop;
-                FlushFrontier ();
-                FlushStackTop ();
-                goto done;
-        default:
-                assert (FALSE);
-        }
-        assert (FALSE);
-done:
-        if (DEBUG or DEBUG_BYTECODE or disassemble)
-                free (offsetToLabel);
-        return;
-}
-
-static void disassemble (Bytecode b, CodeOffset codeOffset) {
-        interpret (b, codeOffset, TRUE);
-        fprintf (stderr, "\n");
-}
-
-void MLton_Bytecode_interpret (Bytecode b, CodeOffset codeOffset) {
-        if (DEBUG or DEBUG_BYTECODE) {
-                fprintf (stderr, "MLton_Bytecode_interpret ("FMTPTR", %"PRIxPTR")\n",
-                                (uintptr_t)b,
-                                codeOffset);
-                disassemble (b, codeOffset);
-                fprintf (stderr, "interpret starting\n");
-        }
-        interpret (b, codeOffset, FALSE);
-}
Index: runtime/gdtoa.tgz
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream
Index: runtime/basis/Posix/Signal.c
===================================================================
--- runtime/basis/Posix/Signal.c	(revision 7524)
+++ runtime/basis/Posix/Signal.c	(revision 7552)
@@ -104,7 +104,7 @@
 }
 
 void Posix_Signal_sigsuspend (void) {
-  int res;
+  int __attribute__ ((unused)) res;
 
   res = sigsuspend (&Posix_Signal_sigset);
   assert (-1 == res);
Index: runtime/basis/Real/gdtoa.c
===================================================================
--- runtime/basis/Real/gdtoa.c	(revision 7524)
+++ runtime/basis/Real/gdtoa.c	(revision 7552)
@@ -14,10 +14,8 @@
   int i;
   ULong L[1];
   char *result;
-  ULong sign;
 
   memcpy(L, &f, sizeof(Real32_t));
-  sign = L[0] & 0x80000000L;
   bits[0] = L[0] & 0x7fffff;
   if (0 != (ex = (L[0] >> 23) & 0xff))
     bits[0] |= 0x800000;
@@ -40,7 +38,6 @@
   int i;
   ULong L[2];
   char *result;
-  ULong sign;
   int x0, x1;
 
   if (isBigEndian()) {
@@ -51,7 +48,6 @@
     x1 = 0;
   }
   memcpy(L, &d, sizeof(Real64_t));
-  sign = L[x0] & 0x80000000L;
   bits[0] = L[x1];
   bits[1] = L[x0] & 0xfffff;
   if (0 != (ex = (L[x0] >> 20) & 0x7ff))
Index: runtime/basis/Real/strto.c
===================================================================
--- runtime/basis/Real/strto.c	(revision 7524)
+++ runtime/basis/Real/strto.c	(revision 7552)
@@ -4,9 +4,8 @@
 Real32_t Real32_strto (NullString8_t s, C_Int_t rounding) {
   char *endptr;
   Real32_t res;
-  int ret;
 
-  ret = gdtoa__strtorf ((const char*)s, &endptr, (int)rounding, &res);
+  gdtoa__strtorf ((const char*)s, &endptr, (int)rounding, &res);
   assert (NULL != endptr);
   return res;
 }
@@ -14,9 +13,8 @@
 Real64_t Real64_strto (NullString8_t s, C_Int_t rounding) {
   char *endptr;
   Real64_t res;
-  int ret;
 
-  ret = gdtoa__strtord ((const char*)s, &endptr, (int)rounding, &res);
+  gdtoa__strtord ((const char*)s, &endptr, (int)rounding, &res);
   assert (NULL != endptr);
   return res;
 }
Index: runtime/basis/Stdio.c
===================================================================
--- runtime/basis/Stdio.c	(revision 7524)
+++ runtime/basis/Stdio.c	(revision 7552)
@@ -2,18 +2,12 @@
 
 void Stdio_printStderr (String8_t s) {
   uintmax_t size = GC_getArrayLength ((pointer)s);
-  if (0 == size)
-    return;
-  while (1 != fwrite ((const void*)s, (size_t)size, 1, stderr))
-    /* nothing */;
+  fwrite ((const void*)s, (size_t)size, 1, stderr);
 }
 
 void Stdio_printStdout (String8_t s) {
   uintmax_t size = GC_getArrayLength ((pointer)s);
-  if (0 == size)
-    return;
-  while (1 != fwrite ((const void*)s, (size_t)size, 1, stdout))
-    /* nothing */;
+  fwrite ((const void*)s, (size_t)size, 1, stdout);
 }
 
 void Stdio_print (String8_t s) {
Index: runtime/basis/MLton/bug.c
===================================================================
--- runtime/basis/MLton/bug.c	(revision 7524)
+++ runtime/basis/MLton/bug.c	(revision 7552)
@@ -4,9 +4,7 @@
 void MLton_bug (String8_t msg) {
   uintmax_t size = GC_getArrayLength ((pointer)msg);
   fprintf (stderr, "MLton bug: ");
-  unless (0 == size)
-    while (1 != fwrite ((const void*)msg, (size_t)size, 1, stderr))
-      /* nothing */;
+  fwrite ((const void*)msg, (size_t)size, 1, stderr);
   fprintf (stderr, "\nPlease send a bug report to MLton@mlton.org.\n");
   exit (2);
 }
Index: runtime/gdtoa-patch.internal
===================================================================
--- runtime/gdtoa-patch.internal	(revision 7524)
+++ runtime/gdtoa-patch.internal	(revision 7552)
@@ -1,102 +1,119 @@
---- gdtoa/gdtoaimp.h.orig	2008-10-04 02:27:47 +0000
-+++ gdtoa/gdtoaimp.h	2008-10-04 02:32:34 +0000
-@@ -529,53 +530,53 @@
- #define trailz trailz_D2A
- #define ulp ulp_D2A
-
-- extern char *dtoa_result;
-- extern CONST double bigtens[], tens[], tinytens[];
-- extern unsigned char hexdig[];
--
-- extern Bigint *Balloc ANSI((int));
-- extern void Bfree ANSI((Bigint*));
-- extern void ULtof ANSI((ULong*, ULong*, Long, int));
-- extern void ULtod ANSI((ULong*, ULong*, Long, int));
-- extern void ULtodd ANSI((ULong*, ULong*, Long, int));
-- extern void ULtoQ ANSI((ULong*, ULong*, Long, int));
-- extern void ULtox ANSI((UShort*, ULong*, Long, int));
-- extern void ULtoxL ANSI((ULong*, ULong*, Long, int));
-- extern ULong any_on ANSI((Bigint*, int));
-- extern double b2d ANSI((Bigint*, int*));
-- extern int cmp ANSI((Bigint*, Bigint*));
-- extern void copybits ANSI((ULong*, int, Bigint*));
-- extern Bigint *d2b ANSI((double, int*, int*));
-- extern int decrement ANSI((Bigint*));
-- extern Bigint *diff ANSI((Bigint*, Bigint*));
-- extern char *dtoa ANSI((double d, int mode, int ndigits,
-+PRIVATE extern char *dtoa_result;
-+PRIVATE extern CONST double bigtens[], tens[], tinytens[];
-+PRIVATE extern unsigned char hexdig[];
-+
-+PRIVATE extern Bigint *Balloc ANSI((int));
-+PRIVATE extern void Bfree ANSI((Bigint*));
-+PRIVATE extern void ULtof ANSI((ULong*, ULong*, Long, int));
-+PRIVATE extern void ULtod ANSI((ULong*, ULong*, Long, int));
-+PRIVATE extern void ULtodd ANSI((ULong*, ULong*, Long, int));
-+PRIVATE extern void ULtoQ ANSI((ULong*, ULong*, Long, int));
-+PRIVATE extern void ULtox ANSI((UShort*, ULong*, Long, int));
-+PRIVATE extern void ULtoxL ANSI((ULong*, ULong*, Long, int));
-+PRIVATE extern ULong any_on ANSI((Bigint*, int));
-+PRIVATE extern double b2d ANSI((Bigint*, int*));
-+PRIVATE extern int cmp ANSI((Bigint*, Bigint*));
-+PRIVATE extern void copybits ANSI((ULong*, int, Bigint*));
-+PRIVATE extern Bigint *d2b ANSI((double, int*, int*));
-+PRIVATE extern int decrement ANSI((Bigint*));
-+PRIVATE extern Bigint *diff ANSI((Bigint*, Bigint*));
-+PRIVATE extern char *dtoa ANSI((double d, int mode, int ndigits,
- 			int *decpt, int *sign, char **rve));
-- extern char *g__fmt ANSI((char*, char*, char*, int, ULong));
-- extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
-- extern void hexdig_init ANSI((Void));
-- extern int hexnan ANSI((CONST char**, FPI*, ULong*));
-- extern int hi0bits ANSI((ULong));
-- extern Bigint *i2b ANSI((int));
-- extern Bigint *increment ANSI((Bigint*));
-- extern int lo0bits ANSI((ULong*));
-- extern Bigint *lshift ANSI((Bigint*, int));
-- extern int match ANSI((CONST char**, char*));
-- extern Bigint *mult ANSI((Bigint*, Bigint*));
-- extern Bigint *multadd ANSI((Bigint*, int, int));
-- extern char *nrv_alloc ANSI((char*, char **, int));
-- extern Bigint *pow5mult ANSI((Bigint*, int));
-- extern int quorem ANSI((Bigint*, Bigint*));
-- extern double ratio ANSI((Bigint*, Bigint*));
-- extern void rshift ANSI((Bigint*, int));
-- extern char *rv_alloc ANSI((int));
-- extern Bigint *s2b ANSI((CONST char*, int, int, ULong));
-- extern Bigint *set_ones ANSI((Bigint*, int));
-- extern char *strcp ANSI((char*, const char*));
-- extern int gdtoa__strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
-- extern double gdtoa__strtod ANSI((const char *s00, char **se));
-- extern Bigint *sum ANSI((Bigint*, Bigint*));
-- extern int trailz ANSI((Bigint*));
-- extern double ulp ANSI((double));
-+PRIVATE extern char *g__fmt ANSI((char*, char*, char*, int, ULong));
-+PRIVATE extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
-+PRIVATE extern void hexdig_init ANSI((Void));
-+PRIVATE extern int hexnan ANSI((CONST char**, FPI*, ULong*));
-+PRIVATE extern int hi0bits ANSI((ULong));
-+PRIVATE extern Bigint *i2b ANSI((int));
-+PRIVATE extern Bigint *increment ANSI((Bigint*));
-+PRIVATE extern int lo0bits ANSI((ULong*));
-+PRIVATE extern Bigint *lshift ANSI((Bigint*, int));
-+PRIVATE extern int match ANSI((CONST char**, char*));
-+PRIVATE extern Bigint *mult ANSI((Bigint*, Bigint*));
-+PRIVATE extern Bigint *multadd ANSI((Bigint*, int, int));
-+PRIVATE extern char *nrv_alloc ANSI((char*, char **, int));
-+PRIVATE extern Bigint *pow5mult ANSI((Bigint*, int));
-+PRIVATE extern int quorem ANSI((Bigint*, Bigint*));
-+PRIVATE extern double ratio ANSI((Bigint*, Bigint*));
-+PRIVATE extern void rshift ANSI((Bigint*, int));
-+PRIVATE extern char *rv_alloc ANSI((int));
-+PRIVATE extern Bigint *s2b ANSI((CONST char*, int, int, ULong));
-+PRIVATE extern Bigint *set_ones ANSI((Bigint*, int));
-+PRIVATE extern char *strcp ANSI((char*, const char*));
-+PRIVATE extern int gdtoa__strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
-+PRIVATE extern double gdtoa__strtod ANSI((const char *s00, char **se));
-+PRIVATE extern Bigint *sum ANSI((Bigint*, Bigint*));
-+PRIVATE extern int trailz ANSI((Bigint*));
-+PRIVATE extern double ulp ANSI((double));
-
- #ifdef __cplusplus
- }
+diff -P -C 2 -r gdtoa/gdtoa.h gdtoa-new/gdtoa.h
+*** gdtoa/gdtoa.h	2011-05-27 17:20:33.181030724 -0400
+--- gdtoa-new/gdtoa.h	2011-05-27 17:20:45.540038121 -0400
+***************
+*** 35,38 ****
+--- 35,39 ----
+  #include "arith.h"
+  #include <stddef.h> /* for size_t */
++ #include "../export.h"
+  
+  #ifndef Long
+diff -P -C 2 -r gdtoa/gdtoaimp.h gdtoa-new/gdtoaimp.h
+*** gdtoa/gdtoaimp.h	2011-05-27 17:20:33.182030765 -0400
+--- gdtoa-new/gdtoaimp.h	2011-05-27 17:20:45.540038121 -0400
+***************
+*** 532,582 ****
+  #define ulp ulp_D2A
+  
+!  extern char *dtoa_result;
+!  extern CONST double bigtens[], tens[], tinytens[];
+!  extern unsigned char hexdig[];
+  
+!  extern Bigint *Balloc ANSI((int));
+!  extern void Bfree ANSI((Bigint*));
+!  extern void ULtof ANSI((ULong*, ULong*, Long, int));
+!  extern void ULtod ANSI((ULong*, ULong*, Long, int));
+!  extern void ULtodd ANSI((ULong*, ULong*, Long, int));
+!  extern void ULtoQ ANSI((ULong*, ULong*, Long, int));
+!  extern void ULtox ANSI((UShort*, ULong*, Long, int));
+!  extern void ULtoxL ANSI((ULong*, ULong*, Long, int));
+!  extern ULong any_on ANSI((Bigint*, int));
+!  extern double b2d ANSI((Bigint*, int*));
+!  extern int cmp ANSI((Bigint*, Bigint*));
+!  extern void copybits ANSI((ULong*, int, Bigint*));
+!  extern Bigint *d2b ANSI((double, int*, int*));
+!  extern void decrement ANSI((Bigint*));
+!  extern Bigint *diff ANSI((Bigint*, Bigint*));
+!  extern char *dtoa ANSI((double d, int mode, int ndigits,
+  			int *decpt, int *sign, char **rve));
+!  extern char *g__fmt ANSI((char*, char*, char*, int, ULong, size_t));
+!  extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
+!  extern void hexdig_init ANSI((Void));
+!  extern int hexnan ANSI((CONST char**, FPI*, ULong*));
+!  extern int hi0bits_D2A ANSI((ULong));
+!  extern Bigint *i2b ANSI((int));
+!  extern Bigint *increment ANSI((Bigint*));
+!  extern int lo0bits ANSI((ULong*));
+!  extern Bigint *lshift ANSI((Bigint*, int));
+!  extern int match ANSI((CONST char**, char*));
+!  extern Bigint *mult ANSI((Bigint*, Bigint*));
+!  extern Bigint *multadd ANSI((Bigint*, int, int));
+!  extern char *nrv_alloc ANSI((char*, char **, int));
+!  extern Bigint *pow5mult ANSI((Bigint*, int));
+!  extern int quorem ANSI((Bigint*, Bigint*));
+!  extern double ratio ANSI((Bigint*, Bigint*));
+!  extern void rshift ANSI((Bigint*, int));
+!  extern char *rv_alloc ANSI((int));
+!  extern Bigint *s2b ANSI((CONST char*, int, int, ULong, int));
+!  extern Bigint *set_ones ANSI((Bigint*, int));
+!  extern char *strcp ANSI((char*, const char*));
+!  extern int strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
+!  extern double strtod ANSI((const char *s00, char **se));
+!  extern Bigint *sum ANSI((Bigint*, Bigint*));
+!  extern int trailz ANSI((Bigint*));
+!  extern double ulp ANSI((U*));
+  
+  #ifdef __cplusplus
+--- 532,582 ----
+  #define ulp ulp_D2A
+  
+!  PRIVATE extern char *dtoa_result;
+!  PRIVATE extern CONST double bigtens[], tens[], tinytens[];
+!  PRIVATE extern unsigned char hexdig[];
+  
+!  PRIVATE extern Bigint *Balloc ANSI((int));
+!  PRIVATE extern void Bfree ANSI((Bigint*));
+!  PRIVATE extern void ULtof ANSI((ULong*, ULong*, Long, int));
+!  PRIVATE extern void ULtod ANSI((ULong*, ULong*, Long, int));
+!  PRIVATE extern void ULtodd ANSI((ULong*, ULong*, Long, int));
+!  PRIVATE extern void ULtoQ ANSI((ULong*, ULong*, Long, int));
+!  PRIVATE extern void ULtox ANSI((UShort*, ULong*, Long, int));
+!  PRIVATE extern void ULtoxL ANSI((ULong*, ULong*, Long, int));
+!  PRIVATE extern ULong any_on ANSI((Bigint*, int));
+!  PRIVATE extern double b2d ANSI((Bigint*, int*));
+!  PRIVATE extern int cmp ANSI((Bigint*, Bigint*));
+!  PRIVATE extern void copybits ANSI((ULong*, int, Bigint*));
+!  PRIVATE extern Bigint *d2b ANSI((double, int*, int*));
+!  PRIVATE extern void decrement ANSI((Bigint*));
+!  PRIVATE extern Bigint *diff ANSI((Bigint*, Bigint*));
+!  PRIVATE extern char *dtoa ANSI((double d, int mode, int ndigits,
+  			int *decpt, int *sign, char **rve));
+!  PRIVATE extern char *g__fmt ANSI((char*, char*, char*, int, ULong, size_t));
+!  PRIVATE extern int gethex ANSI((CONST char**, FPI*, Long*, Bigint**, int));
+!  PRIVATE extern void hexdig_init ANSI((Void));
+!  PRIVATE extern int hexnan ANSI((CONST char**, FPI*, ULong*));
+!  PRIVATE extern int hi0bits_D2A ANSI((ULong));
+!  PRIVATE extern Bigint *i2b ANSI((int));
+!  PRIVATE extern Bigint *increment ANSI((Bigint*));
+!  PRIVATE extern int lo0bits ANSI((ULong*));
+!  PRIVATE extern Bigint *lshift ANSI((Bigint*, int));
+!  PRIVATE extern int match ANSI((CONST char**, char*));
+!  PRIVATE extern Bigint *mult ANSI((Bigint*, Bigint*));
+!  PRIVATE extern Bigint *multadd ANSI((Bigint*, int, int));
+!  PRIVATE extern char *nrv_alloc ANSI((char*, char **, int));
+!  PRIVATE extern Bigint *pow5mult ANSI((Bigint*, int));
+!  PRIVATE extern int quorem ANSI((Bigint*, Bigint*));
+!  PRIVATE extern double ratio ANSI((Bigint*, Bigint*));
+!  PRIVATE extern void rshift ANSI((Bigint*, int));
+!  PRIVATE extern char *rv_alloc ANSI((int));
+!  PRIVATE extern Bigint *s2b ANSI((CONST char*, int, int, ULong, int));
+!  PRIVATE extern Bigint *set_ones ANSI((Bigint*, int));
+!  PRIVATE extern char *strcp ANSI((char*, const char*));
+!  PRIVATE extern int strtoIg ANSI((CONST char*, char**, FPI*, Long*, Bigint**, int*));
+!  PRIVATE extern double strtod ANSI((const char *s00, char **se));
+!  PRIVATE extern Bigint *sum ANSI((Bigint*, Bigint*));
+!  PRIVATE extern int trailz ANSI((Bigint*));
+!  PRIVATE extern double ulp ANSI((U*));
+  
+  #ifdef __cplusplus
Index: runtime/Makefile
===================================================================
--- runtime/Makefile	(revision 7524)
+++ runtime/Makefile	(revision 7552)
@@ -1,4 +1,4 @@
-## Copyright (C) 2010 Matthew Fluet.
+## Copyright (C) 2010-2011 Matthew Fluet.
  # Copyright (C) 1999-2009 Henry Cejtin, Matthew Fluet, Suresh
  #    Jagannathan, and Stephen Weeks.
  # Copyright (C) 1997-2000 NEC Research Institute.
@@ -220,9 +220,6 @@
 GCCFILES :=							\
 	$(shell find gc -type f | grep '\.c$$')
 
-BYTECODEHFILES :=						\
-	$(shell find bytecode -type f | grep '\.h$$')
-
 BASISHFILES :=							\
 	ml-types.h						\
 	c-types.h						\
@@ -250,12 +247,6 @@
 	platform/$(TARGET_OS).o					\
 	gc.o
 
-OMIT_BYTECODE := no
-ifeq ($(OMIT_BYTECODE), yes)
-else
-  OBJS += bytecode/interpret.o
-endif
-
 ifeq ($(COMPILE_FAST), yes)
   OBJS += basis.o
 else
@@ -270,34 +261,43 @@
 ALL := libgdtoa.a libgdtoa-gdb.a libgdtoa-pic.a \
        libmlton.a libmlton-gdb.a libmlton-pic.a
 ALL += gen/c-types.sml gen/basis-ffi.sml gen/sizes
-ifeq ($(OMIT_BYTECODE), yes)
-else
-  ALL += bytecode/opcodes
-endif
 
 all: $(ALL)
 
 
-gdtoa/arithchk.c: gdtoa.tgz gdtoa-patch gdtoa-patch.internal gdtoa-patch.mlton
+gdtoa/README: gdtoa.tgz gdtoa-patch gdtoa-patch.internal gdtoa-patch.mlton
 	gzip -dc gdtoa.tgz | tar xf -
 	patch -s -p0 <gdtoa-patch
 	patch -s -p0 <gdtoa-patch.internal
 	patch -s -p0 <gdtoa-patch.mlton
+	@touch $@
 
-$(GDTOACFILES): gdtoa/arithchk.c
+$(GDTOACFILES): gdtoa/README
 	@touch $@
 
+gdtoa/arithchk.c: gdtoa/README
+	@touch $@
+
 gdtoa/arithchk.out: gdtoa/arithchk.c
 	cd gdtoa && $(CC) $(OPTCFLAGS) $(OPTWARNCFLAGS) -w -O1 -o arithchk.out arithchk.c
 
 gdtoa/arith.h: gdtoa/arithchk.out
 	cd gdtoa && ./arithchk.out >arith.h
 
-gdtoa/%-pic.o: gdtoa/%.c gdtoa/arith.h
+gdtoa/qnan.c: gdtoa/README
+	@touch $@
+
+gdtoa/qnan.out: gdtoa/arith.h gdtoa/qnan.c
+	cd gdtoa && $(CC) $(OPTCFLAGS) $(OPTWARNCFLAGS) -w -O1 -o qnan.out qnan.c
+
+gdtoa/gd_qnan.h: gdtoa/qnan.out
+	cd gdtoa && ./qnan.out >gd_qnan.h
+
+gdtoa/%-pic.o: gdtoa/%.c gdtoa/arith.h gdtoa/gd_qnan.h
 	$(CC) $(PICCFLAGS) $(PICWARNCFLAGS) -w -DINFNAN_CHECK -c -o $@ $<
-gdtoa/%-gdb.o: gdtoa/%.c gdtoa/arith.h
+gdtoa/%-gdb.o: gdtoa/%.c gdtoa/arith.h gdtoa/gd_qnan.h
 	$(CC) $(DEBUGCFLAGS) $(DEBUGWARNCFLAGS) -w -DINFNAN_CHECK -c -o $@ $<
-gdtoa/%.o:     gdtoa/%.c gdtoa/arith.h
+gdtoa/%.o:     gdtoa/%.c gdtoa/arith.h gdtoa/gd_qnan.h
 	$(CC) $(OPTCFLAGS) $(OPTWARNCFLAGS) -w -DINFNAN_CHECK -c -o $@ $<
 
 libgdtoa.a:     $(GDTOA_OBJS)
@@ -356,21 +356,6 @@
 gc.o: gc.c $(GCCFILES) $(HFILES)
 	$(CC) $(OPTCFLAGS) $(GCOPTCFLAGS) $(OPTWARNCFLAGS) -c -o $@ $<
 
-## Needs -Wno-float-equal for Real<N>_equal, included via "c-chunk.h".
-bytecode/interpret-pic.o: bytecode/interpret.c $(HFILES) $(BYTECODEHFILES)
-	$(CC) -I../include $(PICCFLAGS) $(GCPICCFLAGS) $(PICWARNCFLAGS) -Wno-float-equal -c -o $@ $<
-bytecode/interpret-gdb.o: bytecode/interpret.c $(HFILES) $(BYTECODEHFILES)
-	$(CC) -I../include $(DEBUGCFLAGS) $(GCDEBUGCFLAGS) $(DEBUGWARNCFLAGS) -Wno-float-equal -c -o $@ $<
-bytecode/interpret.o: bytecode/interpret.c $(HFILES) $(BYTECODEHFILES)
-	$(CC) -I../include $(OPTCFLAGS) $(GCOPTCFLAGS) $(OPTWARNCFLAGS) -Wno-float-equal -c -o $@ $<
-
-bytecode/opcodes: bytecode/print-opcodes
-	@touch $@
-bytecode/print-opcodes: bytecode/print-opcodes.c bytecode/opcode.h $(HFILES)
-	$(CC) $(OPTCFLAGS) $(WARNCFLAGS) -o bytecode/print-opcodes bytecode/print-opcodes.c
-	rm -f bytecode/opcodes
-	cd bytecode && ./print-opcodes > opcodes
-
 basis.c: $(BASISCFILES)
 	rm -f basis.c
 	cat $(BASISCFILES) >> basis.c
Index: mlton/control/source.sml
===================================================================
--- mlton/control/source.sml	(revision 7524)
+++ mlton/control/source.sml	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2006, 2008 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2006, 2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -11,7 +12,8 @@
 
 datatype t = T of {file: File.t ref,
                    lineNum: int ref,
-                   lineStart: int ref}
+                   lineStart: int ref,
+                   origDir: Dir.t}
 
 fun getPos (T {file, lineNum, lineStart, ...}, n) =
    SourcePos.make {column = n - !lineStart,
@@ -20,10 +22,18 @@
 
 fun lineStart (s as T {lineStart, ...}) = getPos (s, !lineStart)
 
-fun lineDirective (T {file, lineNum, lineStart},
+fun lineDirective (T {file, lineNum, lineStart, origDir},
                    f,
                    {lineNum = n, lineStart = s}) =
-   (Option.app (f, fn f => file := f)
+   (Option.app (f, fn f =>
+                let
+                   val f =
+                      if OS.Path.isAbsolute f
+                         then f
+                      else OS.Path.mkCanonical (OS.Path.concat (origDir, f))
+                in
+                   file := f
+                end)
     ; lineNum := n
     ; lineStart := s)
 
@@ -34,7 +44,8 @@
                    * starts at position ~1, which will translate position 0 to
                    * column 1.
                    *)
-                  lineStart = ref ~1}
+                  lineStart = ref ~1,
+                  origDir = File.dirOf file}
 
 fun newline (T {lineStart, lineNum, ...}, n) =
    (Int.inc lineNum
Index: mlton/control/control-flags.sig
===================================================================
--- mlton/control/control-flags.sig	(revision 7524)
+++ mlton/control/control-flags.sig	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009-2010 Matthew Fluet.
+(* Copyright (C) 2009-2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -37,8 +37,7 @@
       structure Codegen:
          sig
             datatype t =
-               Bytecode
-             | CCodegen
+               CCodegen
              | x86Codegen
              | amd64Codegen
             val all: t list
Index: mlton/control/control-flags.sml
===================================================================
--- mlton/control/control-flags.sml	(revision 7524)
+++ mlton/control/control-flags.sml	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009-2010 Matthew Fluet.
+(* Copyright (C) 2009-2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -63,18 +63,16 @@
 structure Codegen =
    struct
       datatype t =
-         amd64Codegen
-       | Bytecode
-       | CCodegen
+         CCodegen
        | x86Codegen
+       | amd64Codegen
 
-      val all = [x86Codegen,amd64Codegen,CCodegen,Bytecode]
+      val all = [x86Codegen,amd64Codegen,CCodegen]
 
       val toString: t -> string =
-         fn amd64Codegen => "amd64"
-          | Bytecode => "bytecode"
-          | CCodegen => "c"
+         fn CCodegen => "c"
           | x86Codegen => "x86"
+          | amd64Codegen => "amd64"
    end
 
 datatype codegen = datatype Codegen.t
Index: mlton/main/compile.fun
===================================================================
--- mlton/main/compile.fun	(revision 7524)
+++ mlton/main/compile.fun	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -111,8 +112,6 @@
                              fun funcToLabel f = f)
 structure CCodegen = CCodegen (structure Ffi = Ffi
                                structure Machine = Machine)
-structure Bytecode = Bytecode (structure CCodegen = CCodegen
-                               structure Machine = Machine)
 structure x86Codegen = x86Codegen (structure CCodegen = CCodegen
                                    structure Machine = Machine)
 structure amd64Codegen = amd64Codegen (structure CCodegen = CCodegen
@@ -682,8 +681,7 @@
          end
       val codegenImplementsPrim =
          case !Control.codegen of
-            Control.Bytecode => Bytecode.implementsPrim
-          | Control.CCodegen => CCodegen.implementsPrim
+            Control.CCodegen => CCodegen.implementsPrim
           | Control.x86Codegen => x86Codegen.implementsPrim
           | Control.amd64Codegen => amd64Codegen.implementsPrim
       val machine =
@@ -725,11 +723,7 @@
           ; Machine.Label.printNameAlphaNumeric := true)
       val () =
          case !Control.codegen of
-            Control.Bytecode =>
-               Control.trace (Control.Top, "bytecode gen")
-               Bytecode.output {program = machine,
-                                outputC = outputC}
-          | Control.CCodegen =>
+            Control.CCodegen =>
                (clearNames ()
                 ; (Control.trace (Control.Top, "C code gen")
                    CCodegen.output {program = machine,
Index: mlton/main/sources.cm
===================================================================
--- mlton/main/sources.cm	(revision 7524)
+++ mlton/main/sources.cm	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -18,7 +18,6 @@
 ../atoms/sources.cm
 ../backend/sources.cm
 ../closure-convert/sources.cm
-../cm/sources.cm
 ../codegen/sources.cm
 ../control/sources.cm
 ../core-ml/sources.cm
Index: mlton/main/lookup-constant.fun
===================================================================
--- mlton/main/lookup-constant.fun	(revision 7524)
+++ mlton/main/lookup-constant.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2010 Matthew Fluet.
+(* Copyright (C) 2010-2011 Matthew Fluet.
  * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -29,10 +29,9 @@
                                               Align4 => 4
                                             | Align8 => 8)),
        ("MLton_Codegen_codegen", fn () => int (case !codegen of
-                                                  Bytecode => 0
-                                                | CCodegen => 1
-                                                | x86Codegen => 2
-                                                | amd64Codegen => 3)),
+                                                  CCodegen => 0
+                                                | x86Codegen => 1
+                                                | amd64Codegen => 2)),
        ("MLton_FFI_numExports", fn () => int (Ffi.numExports ())),
        ("MLton_Platform_Format", fn () => case !format of
                                              Archive => "archive"
Index: mlton/main/main.fun
===================================================================
--- mlton/main/main.fun	(revision 7524)
+++ mlton/main/main.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2010 Matthew Fluet.
+(* Copyright (C) 2010-2011 Matthew Fluet.
  * Copyright (C) 1999-2009 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -16,11 +16,10 @@
 
 structure Place =
    struct
-      datatype t = CM | Files | Generated | MLB | O | OUT | SML | TypeCheck
+      datatype t = Files | Generated | MLB | O | OUT | SML | TypeCheck
 
       val toInt: t -> int =
-         fn CM => 1
-          | MLB => 1
+         fn MLB => 1
           | SML => 1
           | Files => 2
           | TypeCheck => 4
@@ -29,8 +28,7 @@
           | OUT => 7
 
       val toString =
-         fn CM => "cm"
-          | Files => "files"
+         fn Files => "files"
           | SML => "sml"
           | MLB => "mlb"
           | Generated => "g"
@@ -190,6 +188,7 @@
        | AMD64 => true
        | HPPA => true
        | IA64 => true
+       | MIPS => true
        | Sparc => true
        | S390 => true
        | _ => false
@@ -292,7 +291,6 @@
                   case cg of
                      Native => if hasNativeCodegen () then SOME "native" else NONE
                    | Explicit cg => if hasCodegen cg
-                                       andalso cg <> Bytecode
                                        then SOME (Control.Codegen.toString cg)
                                     else NONE),
                  "|"),
@@ -828,7 +826,7 @@
    end
 
 val mainUsage =
-   "mlton [option ...] file.{c|cm|mlb|o|sml} [file.{c|o|s|S} ...]"
+   "mlton [option ...] file.{c|mlb|o|sml} [file.{c|o|s|S} ...]"
 
 val {parse, usage} =
    Popt.makeUsage {mainUsage = mainUsage,
@@ -1030,14 +1028,6 @@
                                 MLton.Platform.Arch.toString targetArch,
                                 " target"])
          else ()
-      val _ =
-         if !codegen = Bytecode
-            andalso !Control.warnDeprecated
-            then
-               Out.output
-               (Out.error,
-                "Warning: bytecode codegen is deprecated.  Use native or C codegen.\n")
-         else ()
       val () =
          Control.labelsHaveExtra_ := (case targetOS of
                                          Cygwin => true
@@ -1049,7 +1039,6 @@
          (case !explicitChunk of
              NONE => (case !codegen of
                          amd64Codegen => ChunkPerFunc
-                       | Bytecode => OneChunk
                        | CCodegen => Coalesce {limit = 4096}
                        | x86Codegen => ChunkPerFunc
                        )
@@ -1077,10 +1066,6 @@
                                 andalso not (warnMatch)
                                 andalso not (!keepDefUse))
       val _ =
-         if !codegen = Bytecode andalso !profile = ProfileTimeLabel
-            then usage (concat ["bytecode codegen doesn't support -profile time-label\n"])
-         else ()
-      val _ =
          case targetOS of
             Darwin => ()
           | FreeBSD => ()
@@ -1151,7 +1136,6 @@
                   datatype z = datatype Place.t
                in
                   loop [(".mlb", MLB, false),
-                        (".cm", CM, false),
                         (".sml", SML, false),
                         (".c", Generated, true),
                         (".o", O, true)]
@@ -1455,23 +1439,9 @@
                      mkCompileSrc {listFiles = Compile.sourceFilesMLB,
                                    elaborate = Compile.elaborateMLB,
                                    compile = Compile.compileMLB}
-                  fun compileCM (file: File.t) =
-                     let
-                        val _ =
-                           if !Control.warnDeprecated
-                              then
-                                 Out.output
-                                 (Out.error,
-                                  "Warning: .cm input files are deprecated.  Use .mlb input files.\n")
-                           else ()
-                        val files = CM.cm {cmfile = file}
-                     in
-                        compileSML files
-                     end
                   fun compile () =
                      case start of
-                        Place.CM => compileCM input
-                      | Place.SML => compileSML [input]
+                        Place.SML => compileSML [input]
                       | Place.MLB => compileMLB input
                       | Place.Generated => compileCSO (input :: csoFiles)
                       | Place.O => compileCSO (input :: csoFiles)
Index: mlton/main/sources.mlb
===================================================================
--- mlton/main/sources.mlb	(revision 7524)
+++ mlton/main/sources.mlb	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -13,7 +13,6 @@
    ../atoms/sources.mlb
    ../backend/sources.mlb
    ../closure-convert/sources.mlb
-   ../cm/sources.mlb
    ../codegen/sources.mlb
    ../control/sources.mlb
    ../core-ml/sources.mlb
Index: mlton/ssa/shrink.fun
===================================================================
--- mlton/ssa/shrink.fun	(revision 7524)
+++ mlton/ssa/shrink.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -460,7 +460,17 @@
                                              Goto {canMove = canMove',
                                                    dst = m,
                                                    args = ps}
-                                        | Bug => Bug
+                                        | Bug =>
+                                             if (case returns of
+                                                    NONE => true
+                                                  | SOME ts =>
+                                                       Vector.equals
+                                                       (ts, args, fn (t, (_, t')) =>
+                                                        Type.equals (t, t')))
+                                                then Bug
+                                             else Goto {canMove = canMove',
+                                                        dst = m,
+                                                        args = ps}
                                         | Case _ => 
                                              Goto {canMove = canMove',
                                                    dst = m,
@@ -707,7 +717,7 @@
                                         Transfer.layout))
          val traceSimplifyCase =
             Trace.trace
-            ("Ssa2.Shrink2.simplifyCase",
+            ("Ssa.Shrink2.simplifyCase",
              fn {canMove, cases, default, test, ...} =>
              Layout.record [("canMove", List.layout Statement.layout canMove),
                             ("cantSimplify", Layout.str "fn () => ..."),
Index: mlton/ssa/type-check2.fun
===================================================================
--- mlton/ssa/type-check2.fun	(revision 7524)
+++ mlton/ssa/type-check2.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -49,7 +49,7 @@
          end
 
       val (bindTycon, getTycon, getTycon', _) = make' (Tycon.layout, Tycon.plist)
-      val (bindCon, getCon, getCon', _) = make' (Con.layout, Con.plist)
+      val (bindCon, getCon, _) = make (Con.layout, Con.plist)
       val (bindVar, getVar, getVar', unbindVar) = make' (Var.layout, Var.plist)
       fun getVars xs = Vector.foreach (xs, getVar)
       val (bindFunc, getFunc, _) = make (Func.layout, Func.plist)
@@ -134,60 +134,47 @@
                let
                   fun doit (cases: ('a * 'b) vector,
                             equals: 'a * 'a -> bool,
-                            toWord: 'a -> word): unit =
+                            hash: 'a -> word,
+                            numExhaustiveCases: IntInf.t) =
                      let
-                        val table = HashSet.new {hash = toWord}
+                        val table = HashSet.new {hash = hash}
                         val _ =
                            Vector.foreach
                            (cases, fn (x, _) =>
                             let
-                               val _ = 
+                               val _ =
                                   HashSet.insertIfNew
-                                  (table, toWord x, fn y => equals (x, y),
-                                   fn () => x, 
-                                   fn _ => Error.bug "Ssa2.TypeCheck2.loopTransfer: redundant branch in case")
+                                  (table, hash x, fn y => equals (x, y),
+                                   fn () => x,
+                                   fn _ => Error.bug "Ssa.TypeCheck.loopTransfer: redundant branch in case")
                             in
                                ()
                             end)
+                        val numCases = Int.toIntInf (Vector.length cases)
                      in
-                        if isSome default
-                           then ()
-                        else Error.bug "Ssa2.TypeCheck2.loopTransfer: case has no default"
+                        case (IntInf.equals (numCases, numExhaustiveCases), isSome default) of
+                           (true, true) =>
+                              Error.bug "Ssa.TypeCheck.loopTransfer: exhaustive case has default"
+                         | (false, false) =>
+                              Error.bug "Ssa.TypeCheck.loopTransfer: non-exhaustive case has no default"
+                         | _ => ()
                      end
+                  fun doitWord (ws, cases) =
+                     doit (cases, WordX.equals, WordX.hash, WordSize.cardinality ws)
                   fun doitCon cases =
                      let
-                        val numCons = 
+                        val numExhaustiveCases =
                            case Type.dest (getVar' test) of
-                              Type.Datatype t => getTycon' t
-                            | _ => Error.bug (concat
-                                              ["Ssa2.TypeCheck2.loopTransfer: case test ",
-                                               Var.toString test,
-                                               " is not a datatype"])
-                        val cons = Array.array (numCons, false)
-                        val _ =
-                           Vector.foreach
-                           (cases, fn (con, _) =>
-                            let
-                               val i = getCon' con
-                            in
-                               if Array.sub (cons, i)
-                                  then Error.bug "Ssa2.TypeCheck2.loopTransfer: redundant branch in case"
-                               else Array.update (cons, i, true)
-                            end)
+                              Type.Datatype t => Int.toIntInf (getTycon' t)
+                            | _ => Error.bug "Ssa.TypeCheck.loopTransfer: case test is not a datatype"
                      in
-                        case (Array.forall (cons, fn b => b), isSome default) of
-                           (true, true) =>
-                              Error.bug "Ssa2.TypeCheck2.loopTransfer: exhaustive case has default"
-                         | (false, false) =>
-                              Error.bug "Ssa2.TypeCheck2.loopTransfer: non-exhaustive case has no default"
-                         | _ => ()
+                        doit (cases, Con.equals, Con.hash, numExhaustiveCases)
                      end
                   val _ = getVar test
                   val _ =
                      case cases of
                         Cases.Con cs => doitCon cs 
-                      | Cases.Word (_, cs) =>
-                           doit (cs, WordX.equals, Word.fromIntInf o WordX.toIntInf)
+                      | Cases.Word (ws, cs) => doitWord (ws, cs)
                in
                   ()
                end
@@ -238,11 +225,11 @@
       val _ = Vector.foreach
               (datatypes, fn Datatype.T {tycon, cons} =>
                (bindTycon (tycon, Vector.length cons)
-                ; Vector.foreachi (cons, fn (i, {con, ...}) => 
-                                   bindCon (con, i))))
+                ; Vector.foreach (cons, fn {con, ...} =>
+                                  bindCon con)))
       val _ = Vector.foreach
               (datatypes, fn Datatype.T {cons, ...} =>
-               Vector.foreach (cons, fn {args, ...} => 
+               Vector.foreach (cons, fn {args, ...} =>
                                Prod.foreach (args, loopType)))
       val _ = Vector.foreach (globals, loopStatement)
       val _ = List.foreach (functions, bindFunc o Function.name)
Index: mlton/ssa/shrink2.fun
===================================================================
--- mlton/ssa/shrink2.fun	(revision 7524)
+++ mlton/ssa/shrink2.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -465,8 +465,18 @@
                                              Goto {canMove = canMove',
                                                    dst = m,
                                                    args = ps}
-                                        | Bug => Bug
-                                        | Case _ =>
+                                        | Bug =>
+                                             if (case returns of
+                                                    NONE => true
+                                                  | SOME ts =>
+                                                       Vector.equals
+                                                       (ts, args, fn (t, (_, t')) =>
+                                                        Type.equals (t, t')))
+                                                then Bug
+                                             else Goto {canMove = canMove',
+                                                        dst = m,
+                                                        args = ps}
+                                       | Case _ =>
                                              Goto {canMove = canMove',
                                                    dst = m,
                                                    args = ps}
Index: mlton/ssa/type-check.fun
===================================================================
--- mlton/ssa/type-check.fun	(revision 7524)
+++ mlton/ssa/type-check.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009 Matthew Fluet.
+(* Copyright (C) 2009,2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -48,7 +48,7 @@
          end
 
       val (bindTycon, getTycon, getTycon', _) = make' (Tycon.layout, Tycon.plist)
-      val (bindCon, getCon, getCon', _) = make' (Con.layout, Con.plist)
+      val (bindCon, getCon, _) = make (Con.layout, Con.plist)
       val (bindVar, getVar, getVar', unbindVar) = make' (Var.layout, Var.plist)
       fun getVars xs = Vector.foreach (xs, getVar)
       val (bindLabel, getLabel, unbindLabel) = make (Label.layout, Label.plist)
@@ -110,57 +110,47 @@
                let
                   fun doit (cases: ('a * 'b) vector,
                             equals: 'a * 'a -> bool,
-                            toWord: 'a -> word): unit =
+                            hash: 'a -> word,
+                            numExhaustiveCases: IntInf.t) =
                      let
-                        val table = HashSet.new {hash = toWord}
+                        val table = HashSet.new {hash = hash}
                         val _ =
                            Vector.foreach
                            (cases, fn (x, _) =>
                             let
-                               val _ = 
+                               val _ =
                                   HashSet.insertIfNew
-                                  (table, toWord x, fn y => equals (x, y),
-                                   fn () => x, 
+                                  (table, hash x, fn y => equals (x, y),
+                                   fn () => x,
                                    fn _ => Error.bug "Ssa.TypeCheck.loopTransfer: redundant branch in case")
                             in
                                ()
                             end)
+                        val numCases = Int.toIntInf (Vector.length cases)
                      in
-                        if isSome default
-                           then ()
-                        else Error.bug "Ssa.TypeCheck.loopTransfer: case has no default"
+                        case (IntInf.equals (numCases, numExhaustiveCases), isSome default) of
+                           (true, true) =>
+                              Error.bug "Ssa.TypeCheck.loopTransfer: exhaustive case has default"
+                         | (false, false) =>
+                              Error.bug "Ssa.TypeCheck.loopTransfer: non-exhaustive case has no default"
+                         | _ => ()
                      end
+                  fun doitWord (ws, cases) =
+                     doit (cases, WordX.equals, WordX.hash, WordSize.cardinality ws)
                   fun doitCon cases =
                      let
-                        val numCons = 
+                        val numExhaustiveCases =
                            case Type.dest (getVar' test) of
-                              Type.Datatype t => getTycon' t
+                              Type.Datatype t => Int.toIntInf (getTycon' t)
                             | _ => Error.bug "Ssa.TypeCheck.loopTransfer: case test is not a datatype"
-                        val cons = Array.array (numCons, false)
-                        val _ =
-                           Vector.foreach
-                           (cases, fn (con, _) =>
-                            let
-                               val i = getCon' con
-                            in
-                               if Array.sub (cons, i)
-                                  then Error.bug "Ssa.TypeCheck.loopTransfer: redundant branch in case"
-                               else Array.update (cons, i, true)
-                            end)
                      in
-                        case (Array.forall (cons, fn b => b), isSome default) of
-                           (true, true) =>
-                              Error.bug "Ssa.TypeCheck.loopTransfer: exhaustive case has default"
-                         | (false, false) =>
-                              Error.bug "Ssa.TypeCheck.loopTransfer: non-exhaustive case has no default"
-                         | _ => ()
+                        doit (cases, Con.equals, Con.hash, numExhaustiveCases)
                      end
                   val _ = getVar test
                   val _ =
                      case cases of
                         Cases.Con cs => doitCon cs 
-                      | Cases.Word (_, cs) =>
-                           doit (cs, WordX.equals, Word.fromIntInf o WordX.toIntInf)
+                      | Cases.Word (ws, cs) => doitWord (ws, cs)
                in
                   ()
                end
@@ -211,11 +201,11 @@
       val _ = Vector.foreach
               (datatypes, fn Datatype.T {tycon, cons} =>
                (bindTycon (tycon, Vector.length cons)
-                ; Vector.foreachi (cons, fn (i, {con, ...}) => 
-                                   bindCon (con, i))))
+                ; Vector.foreach (cons, fn {con, ...} =>
+                                  bindCon con)))
       val _ = Vector.foreach
               (datatypes, fn Datatype.T {cons, ...} =>
-               Vector.foreach (cons, fn {args, ...} => 
+               Vector.foreach (cons, fn {args, ...} =>
                                Vector.foreach (args, loopType)))
       val _ = Vector.foreach (globals, loopStatement)
       val _ = List.foreach (functions, bindFunc o Function.name)
Index: mlton/ssa/analyze.fun
===================================================================
--- mlton/ssa/analyze.fun	(revision 7524)
+++ mlton/ssa/analyze.fun	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2006 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2006 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -126,23 +127,34 @@
 
                end
           | Case {test, cases, default, ...} =>
-               let val test = value test
+               let
+                  val test = value test
                   fun ensureNullary j =
                      if 0 = Vector.length (labelValues j)
                         then ()
                      else Error.bug (concat ["Analyze.loopTransfer: Case:",
                                              Label.toString j,
                                              " must be nullary"])
-                  fun doit (s, cs, filter: 'a * 'b -> unit) =
-                     (filter (test, s)
-                      ; Vector.foreach (cs, fn (_, j) => ensureNullary j))
+                  fun ensureSize (w, s) =
+                     if WordSize.equals (s, WordX.size w)
+                        then ()
+                     else Error.bug (concat ["Analyze.loopTransfer: Case:",
+                                             WordX.toString w,
+                                             " must be size ",
+                                             WordSize.toString s])
+                  fun doitWord (s, cs) =
+                     (ignore (filterWord (test, s))
+                      ; Vector.foreach (cs, fn (w, j) =>
+                                        (ensureSize (w, s)
+                                         ; ensureNullary j)))
+                  fun doitCon cs =
+                     Vector.foreach (cs, fn (c, j) =>
+                                     filter (test, c, labelValues j))
                   datatype z = datatype Cases.t
                   val _ =
                      case cases of
-                        Con cases =>
-                           Vector.foreach (cases, fn (c, j) =>
-                                           filter (test, c, labelValues j))
-                      | Word (s, cs) => doit (s, cs, filterWord)
+                        Con cs => doitCon cs
+                      | Word (s, cs) => doitWord (s, cs)
                   val _ = Option.app (default, ensureNullary)
                in ()
                end
Index: mlton/ssa/analyze2.fun
===================================================================
--- mlton/ssa/analyze2.fun	(revision 7524)
+++ mlton/ssa/analyze2.fun	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -123,35 +124,46 @@
 
                end
           | Case {test, cases, default, ...} =>
-               let val test = value test
+               let
+                  val test = value test
+                  fun ensureSize (w, s) =
+                     if WordSize.equals (s, WordX.size w)
+                        then ()
+                     else Error.bug (concat ["Analyze.loopTransfer: Case:",
+                                             WordX.toString w,
+                                             " must be size ",
+                                             WordSize.toString s])
                   fun ensureNullary j =
                      if 0 = Vector.length (labelValues j)
                         then ()
                      else Error.bug (concat ["Analyze2.loopTransfer: Case:",
                                              Label.toString j,
                                              " must be nullary"])
-                  fun doit (s, cs, filter: 'a * 'b -> unit) =
-                     (filter (test, s)
-                      ; Vector.foreach (cs, fn (_, j) => ensureNullary j))
+                  fun doitWord (s, cs) =
+                     (ignore (filterWord (test, s))
+                      ; Vector.foreach (cs, fn (w, j) =>
+                                        (ensureSize (w, s)
+                                         ; ensureNullary j)))
+                  fun doitCon cs =
+                     Vector.foreach
+                     (cs, fn (c, j) =>
+                      let
+                         val v = labelValues j
+                         val variant =
+                            case Vector.length v of
+                               0 => NONE
+                             | 1 => SOME (Vector.sub (v, 0))
+                             | _ => Error.bug "Analyze2.loopTransfer: Case:conApp with >1 arg"
+                      in
+                         filter {con = c,
+                                 test = test,
+                                 variant = variant}
+                      end)
                   datatype z = datatype Cases.t
                   val _ =
                      case cases of
-                        Con cases =>
-                           Vector.foreach
-                           (cases, fn (c, j) =>
-                            let
-                               val v = labelValues j
-                               val variant =
-                                  case Vector.length v of
-                                     0 => NONE
-                                   | 1 => SOME (Vector.sub (v, 0))
-                                   | _ => Error.bug "Analyze2.loopTransfer: Case:conApp with >1 arg"
-                            in
-                               filter {con = c,
-                                       test = test,
-                                       variant = variant}
-                            end)
-                      | Word (s, cs) => doit (s, cs, filterWord)
+                        Con cs => doitCon cs
+                      | Word (s, cs) => doitWord (s, cs)
                   val _ = Option.app (default, ensureNullary)
                in ()
                end
Index: mlton/backend/ssa-to-rssa.fun
===================================================================
--- mlton/backend/ssa-to-rssa.fun	(revision 7524)
+++ mlton/backend/ssa-to-rssa.fun	(revision 7552)
@@ -599,12 +599,18 @@
              src = Operand.word (WordX.one cardElemSize)}]
    end
 
+fun convertWordSize (ws: WordSize.t): WordSize.t =
+   WordSize.roundUpToPrim ws
+
+fun convertWordX (w: WordX.t): WordX.t =
+   WordX.resize (w, convertWordSize (WordX.size w))
+
 fun convertConst (c: Const.t): Const.t =
    let
       datatype z = datatype Const.t
    in
       case c of
-         Word w => Word (WordX.resize (w, WordSize.roundUpToPrim (WordX.size w)))
+         Word w => Word (convertWordX w)
        | _ => c
    end
 
@@ -688,16 +694,21 @@
                                 (ss, t)
                              end
                         | _ => Error.bug "SsaToRssa.translateCase: strange type"))
-          | S.Cases.Word (s, cs) =>
-               ([],
-                Switch
-                (Switch.T
-                 {cases = (QuickSort.sortVector
-                           (cs, fn ((w, _), (w', _)) =>
-                            WordX.le (w, w', {signed = false}))),
-                  default = default,
-                  size = s,
-                  test = varOp test}))
+          | S.Cases.Word (s, cases) =>
+               let
+                  val cases =
+                     QuickSort.sortVector
+                     (Vector.map (cases, fn (w, l) => (convertWordX w, l)),
+                      fn ((w, _), (w', _)) => WordX.le (w, w', {signed = false}))
+               in
+                  ([],
+                   Switch
+                   (Switch.T
+                    {cases = cases,
+                     default = default,
+                     size = convertWordSize s,
+                     test = varOp test}))
+               end
       fun eta (l: Label.t, kind: Kind.t): Label.t =
          let
             val {args, ...} = labelInfo l
Index: mlton/elaborate/elaborate-core.fun
===================================================================
--- mlton/elaborate/elaborate-core.fun	(revision 7524)
+++ mlton/elaborate/elaborate-core.fun	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2009-2010 Matthew Fluet.
+(* Copyright (C) 2009-2011 Matthew Fluet.
  * Copyright (C) 1999-2008 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -556,7 +556,21 @@
                             case constraint of
                                NONE => Type.new ()
                              | SOME t => elaborateType (t, Lookup.fromEnv E)
-                         val x = bindToType (x, t)
+                         val xc = Avid.toCon (Avid.fromVar x)
+                         val x =
+                            case Env.peekLongcon (E, Ast.Longcon.short xc) of
+                               NONE => bindToType (x, t)
+                             | SOME _ =>
+                                  let
+                                     val _ =
+                                        Control.error
+                                        (region,
+                                         seq [str "constructor can not be redefined by as: ",
+                                              Avar.layout x],
+                                         seq [str "in: ", lay ()])
+                                  in
+                                     Var.fromAst x
+                                  end
                          val pat' = loop pat
                          val _ =
                             unifyPatternConstraint (Cpat.ty pat',
Index: mlton/core-ml/dead-code.fun
===================================================================
--- mlton/core-ml/dead-code.fun	(revision 7524)
+++ mlton/core-ml/dead-code.fun	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -24,7 +25,7 @@
                                          then escape true
                                       else ())
            ; false))
-      fun decIsWild (d: Dec.t): bool =
+      fun decIsWildOrUnit (d: Dec.t): bool =
          case d of
             Val {rvbs, vbs, ...} =>
                0 = Vector.length rvbs
@@ -43,7 +44,6 @@
           | Val {rvbs, vbs, ...} =>
                Vector.exists (rvbs, varIsUsed o #var)
                orelse Vector.exists (vbs, patVarIsUsed o #pat)
-               orelse decIsWild d
       fun useVar x = setVarIsUsed (x, true)
       fun useExp (e: Exp.t): unit = Exp.foreachVar (e, useVar)
       fun useLambda (l: Lambda.t): unit =
@@ -66,7 +66,7 @@
           in
              if deadCode
                 then List.fold (rev decs, [], fn (dec, decs) =>
-                                if decIsWild dec orelse decIsNeeded dec
+                                if decIsWildOrUnit dec orelse decIsNeeded dec
                                    then (useDec dec; dec :: decs)
                                    else decs)
                 else (List.foreach (decs, useDec)
Index: mlton/cm/cm.sig
===================================================================
--- mlton/cm/cm.sig	(revision 7524)
+++ mlton/cm/cm.sig	(revision 7552)
@@ -1,15 +0,0 @@
-(* Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- * Copyright (C) 1997-2000 NEC Research Institute.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-signature CM =
-   sig
-      (* cmfile can be relative or absolute.
-       * The resulting list of files will have the same path as cmfile.
-       *)
-      val cm: {cmfile: File.t} -> File.t list
-   end
Index: mlton/cm/lexer.sig
===================================================================
--- mlton/cm/lexer.sig	(revision 7524)
+++ mlton/cm/lexer.sig	(revision 7552)
@@ -1,57 +0,0 @@
-(* Based on the file entity/lexer.sig in the SML/NJ CM sources. *)
-
-(*
- * entity/lexer.sig: lexical analysis of description files
- *
- *   Copyright (c) 1995 by AT&T Bell Laboratories
- *
- * author: Matthias Blume (blume@cs.princeton.edu)
- *)
-signature CM_LEXER = sig
-
-    exception LexicalError of string * string
-    exception SyntaxError of string * string
-    exception UserError of string * string
-
-    datatype keyword =
-        K_GROUP | K_LIBRARY | K_ALIAS | K_IS
-      | K_SIGNATURE | K_STRUCTURE | K_FUNSIG | K_FUNCTOR
-      | K_IF | K_ELIF | K_ELSE | K_ENDIF | K_DEFINED
-      | K_ERROR
-
-    datatype lconn = L_AND | L_OR | L_NOT
-
-    datatype arith = A_PLUS | A_MINUS | A_TIMES | A_DIV | A_MOD
-
-    datatype compare = C_LT | C_LE | C_GT | C_GE | C_EQ | C_NE
-
-    datatype token =
-        T_COLON
-      | T_HASH
-      | T_KEYWORD of keyword
-      | T_SYMBOL of string
-      | T_STRING of string
-      | T_NUMBER of int
-      | T_LPAREN
-      | T_RPAREN
-      | T_ARITH of arith
-      | T_LCONN of lconn
-      | T_COMPARE of compare
-      | T_NL
-      | T_EOF
-
-    type mode
-
-    val NORMAL: mode
-    val MEMBERS: mode
-
-    val lexer: {
-                strdef: string -> bool,
-                sigdef: string -> bool,
-                fctdef: string -> bool,
-                fsigdef: string -> bool,
-                symval: string -> int option
-               } ->
-        string * In.t -> mode -> token
-
-end
Index: mlton/cm/sources.cm
===================================================================
--- mlton/cm/sources.cm	(revision 7524)
+++ mlton/cm/sources.cm	(revision 7552)
@@ -1,22 +0,0 @@
-(* Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- * Copyright (C) 1997-2000 NEC Research Institute.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-Group
-
-structure CM
-
-is
-
-../../lib/mlton/sources.cm
-../control/sources.cm
-lexer.sig
-lexer.sml
-parse.sig
-parse.sml
-cm.sig
-cm.sml
Index: mlton/cm/parse.sml
===================================================================
--- mlton/cm/parse.sml	(revision 7524)
+++ mlton/cm/parse.sml	(revision 7552)
@@ -1,130 +0,0 @@
-(* Copyright (C) 2004-2006 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-(* Based on the file entity/description.sml in the SML/NJ CM sources. *)
-
-(*
- * entity/description.sml: Entity description file parser.
- *
- *   Copyright (c) 1995 by AT&T Bell Laboratories
- *
- * author: Matthias Blume (blume@cs.princeton.edu)
- *)
-structure Parse: PARSE =
-struct
-
-val fail = Process.fail
-
-structure Lexer = CMLexer
-
-datatype result =
-   Alias of File.t
- | Bad of string
- | Members of File.t list
-
-(* The main read function for CM entities. *)
-fun parse {cmfile: string} =
-   Exn.withEscape
-   (fn escape =>
-    let
-       fun bad m = (ignore (escape (Bad m)); raise Fail "impossible")
-    in
-       File.withIn
-       (cmfile, fn ins =>
-        let
-           fun no _ = false
-           val lex =
-              Lexer.lexer {strdef = no,
-                           sigdef = no,
-                           fctdef = no,
-                           fsigdef = no,
-                           symval = fn _ => NONE}
-              (cmfile, ins)
-           val lex =
-              fn m =>
-              lex m
-              handle Lexer.LexicalError (_, s) => bad s
-                   | Lexer.SyntaxError (_, s) => bad s
-                   | Lexer.UserError (_, s) => bad s
-           val lookahead: Lexer.token list ref = ref []
-           fun normal () =
-              case !lookahead of
-                 [] => lex Lexer.NORMAL
-               | h :: t => (lookahead := t; h)
-           fun member () =
-              case !lookahead of
-                 [] => lex Lexer.MEMBERS
-               | h :: t => (lookahead := t; h)
-           fun unget t = lookahead := (t :: (!lookahead))
-           fun readExport () =
-              let
-                 fun name () =
-                    (case normal () of
-                        Lexer.T_SYMBOL _ => ()
-                      | Lexer.T_STRING _ => ()
-                      | _ => bad "missing exported name"
-                           ; SOME ())
-              in case normal () of
-                 Lexer.T_KEYWORD Lexer.K_SIGNATURE => name ()
-               | Lexer.T_KEYWORD Lexer.K_STRUCTURE => name ()
-               | Lexer.T_KEYWORD Lexer.K_FUNCTOR => name ()
-               | Lexer.T_KEYWORD Lexer.K_FUNSIG => name ()
-               | x => (unget x; NONE)
-              end
-           fun readList readItem =
-              let
-                 fun loop ac =
-                    case readItem () of
-                       NONE => rev ac
-                     | SOME i => loop (i :: ac)
-              in loop []
-              end
-           fun getFileName () =
-              case member () of
-                 Lexer.T_SYMBOL name => SOME name
-               | Lexer.T_STRING name => SOME name
-               | t => (unget t; NONE)
-           fun readMember () =
-              case getFileName () of
-                 NONE => NONE
-               | SOME f =>
-                    (case member () of
-                        Lexer.T_COLON =>
-                           (case member () of
-                               Lexer.T_SYMBOL _ => ()
-                             | Lexer.T_STRING _ => ()
-                             | _ => bad "missing class name")
-                      | t => unget t
-                           ; SOME f)
-           fun readMembers () =
-              case normal () of
-                 Lexer.T_KEYWORD Lexer.K_IS =>
-                    (if !lookahead <> [] then fail "Bug in parser" else ()
-                     ; readList readMember)
-               | _ => bad "missing keyword 'is'"
-           fun parseAlias () =
-              case getFileName () of
-                 NONE => bad "alias name missing"
-               | SOME f => let val _ = In.close ins
-                           in Alias f
-                           end
-           fun parseGroup () =
-              let
-                 val _ = readList readExport
-                 val members = readMembers ()
-                 val _ = In.close ins
-              in Members members
-              end
-        in case normal () of
-           Lexer.T_KEYWORD Lexer.K_GROUP => parseGroup ()
-         | Lexer.T_KEYWORD Lexer.K_LIBRARY => parseGroup ()
-         | Lexer.T_KEYWORD Lexer.K_ALIAS => parseAlias ()
-         | _ => bad "expected 'group' or 'library'"
-        end)
-    end)
-
-end
Index: mlton/cm/cm.sml
===================================================================
--- mlton/cm/cm.sml	(revision 7524)
+++ mlton/cm/cm.sml	(revision 7552)
@@ -1,101 +0,0 @@
-(* Copyright (C) 1999-2006 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- * Copyright (C) 1997-2000 NEC Research Institute.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-structure CM: CM =
-struct
-
-val maxAliasNesting: int = 32
-
-fun cm {cmfile: File.t} =
-   let
-      val files = ref []
-      (* The files in seen are absolute. *)
-      val seen = String.memoize (fn _ => ref false)
-      fun loop (cmfile: File.t,
-                nesting: int,
-                relativize: Dir.t option): unit =
-         let
-            val relativize =
-               case relativize of
-                  NONE => NONE
-                | _ => if OS.Path.isAbsolute cmfile
-                          then NONE
-                       else relativize
-            val {dir, file} = OS.Path.splitDirFile cmfile
-         in
-            Dir.inDir
-            (if dir = "" then "." else dir, fn () =>
-                let
-                   val cwd = Dir.current ()
-                   fun abs f = OS.Path.mkAbsolute {path = f, relativeTo = cwd}
-                   fun finalize f =
-                      case relativize of
-                         NONE => abs f
-                       | SOME d =>
-                            OS.Path.mkRelative {path = f,
-                                                relativeTo = d}
-                   fun region () =
-                      let
-                         val sourcePos =
-                            SourcePos.make {column = 0,
-                                            file = finalize cmfile,
-                                            line = 0}
-                      in
-                         Region.make {left = sourcePos, right = sourcePos}
-                      end
-                   fun fail msg =
-                      Control.error (region (), Layout.str msg, Layout.empty)
-                   datatype z = datatype Parse.result
-                in
-                   case Parse.parse {cmfile = file} of
-                      Alias f =>
-                         if nesting > maxAliasNesting
-                            then fail "alias nesting too deep."
-                         else loop (f, nesting + 1, relativize)
-                    | Bad s => fail (concat ["bad CM file: ", s])
-                    | Members members =>
-                         List.foreach
-                         (members, fn m =>
-                          let
-                             val m' = abs m
-                             val seen = seen m'
-                          in
-                             if !seen
-                                then ()
-                             else let
-                                     val _ = seen := true
-                                     fun sml () =
-                                        List.push (files, finalize m')
-                                  in
-                                     Control.checkFile
-                                     (m,
-                                      {fail = fail,
-                                       name = m,
-                                       ok = fn () =>
-                                       case File.suffix m of
-                                          SOME "cm" =>
-                                             loop (m, 0, relativize)
-                                        | SOME "sml" => sml ()
-                                        | SOME "sig" => sml ()
-                                        | SOME "fun" => sml ()
-                                        | SOME "ML" => sml ()
-                                        | _ =>
-                                             fail (concat ["MLton can't process ",
-                                                           m])})
-                                  end
-                          end)
-                end)
-         end 
-      val d = Dir.current ()
-      val _ = loop (cmfile, 0, SOME d)
-      val files = rev (!files)
-   in
-      files
-   end
-
-end
Index: mlton/cm/lexer.sml
===================================================================
--- mlton/cm/lexer.sml	(revision 7524)
+++ mlton/cm/lexer.sml	(revision 7552)
@@ -1,539 +0,0 @@
-(* Based on the file entity/lexer.sml in the SML/NJ CM sources. *)
-
-(*
- * entity/lexer.sml: lexical analysis of description files
- *
- *   Copyright (c) 1995 by AT&T Bell Laboratories
- *
- * author: Matthias Blume (blume@cs.princeton.edu)
- *)
-structure CMLexer: CM_LEXER = struct
-
-    exception LexicalError of string * string
-    exception UserError of string * string
-    exception SyntaxError of string * string
-    exception LexerBug
-
-    datatype keyword =
-        K_GROUP | K_LIBRARY | K_ALIAS | K_IS
-      | K_SIGNATURE | K_STRUCTURE | K_FUNSIG | K_FUNCTOR
-      | K_IF | K_ELIF | K_ELSE | K_ENDIF | K_DEFINED
-      | K_ERROR
-
-    datatype lconn = L_AND | L_OR | L_NOT
-
-    datatype arith = A_PLUS | A_MINUS | A_TIMES | A_DIV | A_MOD
-
-    datatype compare = C_LT | C_LE | C_GT | C_GE | C_EQ | C_NE
-
-    datatype token =
-        T_COLON
-      | T_HASH
-      | T_KEYWORD of keyword
-      | T_SYMBOL of string
-      | T_STRING of string
-      | T_NUMBER of int
-      | T_LPAREN
-      | T_RPAREN
-      | T_ARITH of arith
-      | T_LCONN of lconn
-      | T_COMPARE of compare
-      | T_NL
-      | T_EOF
-
-    datatype mode = NORMAL | PREPROC | MEMBERS | ERRORMSG
-
-    fun lexer { strdef, sigdef, fctdef, fsigdef, symval } (fname, stream) = let
-
-        fun lexerr s = raise LexicalError (fname, s)
-        fun synerr s = raise SyntaxError (fname, s)
-        fun usererr s = raise UserError (fname, s)
-
-        val lookahead: char list ref = ref []
-
-        fun getc () =
-            case !lookahead of
-                [] => let
-                    val new = String.explode (In.input stream)
-                in
-                    case new of
-                        [] => NONE
-                      | h :: t => (lookahead := t; SOME h)
-                end
-              | h :: t => (lookahead := t; SOME h)
-
-        fun ungetc c = (lookahead := (c :: (!lookahead)))
-
-        fun skip_white mode = let
-
-            fun skip_scheme_comment () =
-                case getc () of
-                    NONE => ()
-                  | SOME #"\n" => (ungetc #"\n")
-                  | _ => skip_scheme_comment ()
-
-            fun skip_ml_comment () = let
-                fun incomplete () = lexerr "incomplete ML-style comment"
-            in
-                case getc () of
-                    SOME #"*" =>
-                        (case getc () of
-                             SOME #")" => ()
-                           | NONE => incomplete ()
-                           | SOME c => (ungetc c; skip_ml_comment ()))
-                  | SOME #"(" => 
-                        (case getc () of
-                             SOME #"*" =>
-                                 (skip_ml_comment (); skip_ml_comment ())
-                           | NONE => incomplete ()
-                           | SOME c => (ungetc c; skip_ml_comment ()))
-                (*| SOME #";" => (skip_scheme_comment (); skip_ml_comment ())*)
-                  | NONE => incomplete ()
-                  | SOME _ => skip_ml_comment ()
-            end
-
-            fun skip () = let
-                fun done () = ()
-                fun preproc_nl thunk =
-                    (if mode = PREPROC orelse mode = ERRORMSG then
-                         ungetc #"\n"
-                     else thunk ())
-            in
-                case getc () of
-                    NONE => ()
-                  | SOME #";" => (skip_scheme_comment (); skip ())
-                  | SOME #"\n" =>
-                        (case getc () of
-                             NONE => preproc_nl done
-                           | SOME #"#" => (ungetc #"#"; preproc_nl done)
-                           | SOME c => (ungetc c; preproc_nl skip))
-                  | SOME #"(" =>
-                        (case getc () of
-                             NONE => ungetc #"("
-                           | SOME #"*" => (skip_ml_comment (); skip ())
-                           | SOME c => (ungetc c; ungetc #"("))
-                  | SOME c =>
-                        if Char.isSpace c then skip () else ungetc c
-            end
-        in
-            skip
-        end
-
-        fun rawlex mode = let
-
-            val skip = skip_white mode
-
-            fun getc_nonwhite () = (skip (); getc ())
-
-            fun getnum c = let
-                fun loop (n, c) = let
-                    val n = 10 * n + Char.ord c - Char.ord #"0"
-                in
-                    case getc () of
-                        NONE => n
-                      | SOME c => if Char.isDigit c then loop (n, c)
-                                  else (ungetc c; n)
-                end
-            in
-                loop (0, c) handle Overflow => lexerr "arithmetic overflow"
-            end
-
-            fun expect (c, t) =
-                if getc () = SOME c then t
-                else lexerr (concat ["expecting ", String.implode [c]])
-
-            fun ifnext (c, ty, tn) =
-                case getc () of
-                    NONE => tn
-                  | SOME c1 =>
-                        if c = c1 then ty else (ungetc c1; tn)
-
-            fun getsym (c, delim) = let
-                fun loop (accu, c) = let
-                    val accu = c :: accu
-                in
-                    case getc () of
-                        NONE => String.implode (rev accu)
-                      | SOME c =>
-                            if Char.isSpace c orelse String.contains(delim, c)
-                               then (ungetc c; String.implode (rev accu))
-                            else loop (accu, c)
-                end
-            in
-                loop ([], c)
-            end
-
-            fun getline c = let
-                fun loop accu =
-                    case getc () of
-                        NONE => String.implode (rev accu)
-                      | SOME #"\n" => String.implode (rev accu)
-                      | SOME c => loop (c :: accu)
-            in
-                loop [c]
-            end
-
-            val preproc_delim = "():;#+-*/%&!|><="
-            val non_preproc_delim = "():;#"
-
-            fun preproc_sym "if" = T_KEYWORD K_IF
-              | preproc_sym "elif" = T_KEYWORD K_ELIF
-              | preproc_sym "else" = T_KEYWORD K_ELSE
-              | preproc_sym "endif" = T_KEYWORD K_ENDIF
-              | preproc_sym "defined" = T_KEYWORD K_DEFINED
-              | preproc_sym "structure" = T_KEYWORD K_STRUCTURE
-              | preproc_sym "signature" = T_KEYWORD K_SIGNATURE
-              | preproc_sym "functor" = T_KEYWORD K_FUNCTOR
-              | preproc_sym "funsig" = T_KEYWORD K_FUNSIG
-              | preproc_sym "error" = T_KEYWORD K_ERROR
-              | preproc_sym s = T_SYMBOL s
-
-            fun normal_sym "group" = T_KEYWORD K_GROUP
-              | normal_sym "Group" = T_KEYWORD K_GROUP
-              | normal_sym "GROUP" = T_KEYWORD K_GROUP
-              | normal_sym "library" = T_KEYWORD K_LIBRARY
-              | normal_sym "Library" = T_KEYWORD K_LIBRARY
-              | normal_sym "LIBRARY" = T_KEYWORD K_LIBRARY
-              | normal_sym "alias" = T_KEYWORD K_ALIAS
-              | normal_sym "Alias" = T_KEYWORD K_ALIAS
-              | normal_sym "ALIAS" = T_KEYWORD K_ALIAS
-              | normal_sym "is" = T_KEYWORD K_IS
-              | normal_sym "IS" = T_KEYWORD K_IS
-              | normal_sym "structure" = T_KEYWORD K_STRUCTURE
-              | normal_sym "signature" = T_KEYWORD K_SIGNATURE
-              | normal_sym "functor" = T_KEYWORD K_FUNCTOR
-              | normal_sym "funsig" = T_KEYWORD K_FUNSIG
-              | normal_sym s = T_SYMBOL s
-
-            fun string () = let
-                fun collect l =
-                    case getc () of
-                        NONE => lexerr "missing string delimiter"
-                      | SOME #"\"" =>
-                            (case getc () of
-                                 SOME #"\"" => collect (#"\"" :: l)
-                               | SOME c => (ungetc c; String.implode (rev l))
-                               | NONE => String.implode (rev l))
-                      | SOME c => collect (c :: l)
-            in
-                collect []
-            end
-
-        in
-          if mode = ERRORMSG then
-              T_SYMBOL (case getc_nonwhite () of
-                            NONE => "error"
-                          | SOME #"\n" => "error"
-                          | SOME c => getline c)
-          else
-            case getc_nonwhite () of
-                NONE => T_EOF
-              | SOME #":" => T_COLON
-              | SOME #"\n" => T_NL
-              | SOME #"#" => T_HASH
-              | SOME #"\"" =>
-                    (case mode of
-                         NORMAL => T_STRING (string ())
-                       | MEMBERS => T_STRING (string ())
-                       | _ => 
-                             synerr "quoted string in wrong context")
-              | SOME c =>
-                    if mode = PREPROC then
-                        case c of
-                            #"(" => T_LPAREN
-                          | #")" => T_RPAREN
-                          | #"+" => T_ARITH A_PLUS
-                          | #"-" => T_ARITH A_MINUS
-                          | #"*" => T_ARITH A_TIMES
-                          | #"/" => T_ARITH A_DIV
-                          | #"%" => T_ARITH A_MOD
-                          | #"&" => expect (#"&", T_LCONN L_AND)
-                          | #"|" => expect (#"|", T_LCONN L_OR)
-                          | #"!" =>
-                                ifnext (#"=", T_COMPARE C_NE, T_LCONN L_NOT)
-                          | #">" =>
-                                ifnext (#"=", T_COMPARE C_GE, T_COMPARE C_GT)
-                          | #"<" =>
-                                ifnext (#"=", T_COMPARE C_LE, T_COMPARE C_LT)
-                          | #"=" => expect (#"=", T_COMPARE C_EQ)
-                          | _ =>
-                                if Char.isDigit c then
-                                    T_NUMBER (getnum c)
-                                else if Char.isAlpha c then
-                                    preproc_sym (getsym (c, preproc_delim))
-                                else
-                                    synerr "illegal preprocessor line"
-                    else let
-                        val s = getsym (c, non_preproc_delim)
-                    in
-                        if mode = NORMAL then
-                            normal_sym s
-                        else
-                            T_SYMBOL s
-                    end
-        end
-
-        val lex = let
-
-            val lookahead: token list ref = ref []
-
-            fun gett () =
-                case !lookahead of
-                    [] => rawlex PREPROC
-                  | (h :: t) => (lookahead := t; h)
-
-            fun ungett t = lookahead := (t :: (!lookahead))
-
-            fun leftrec (f, tokf) = let
-                fun loop accu = let
-                    val nt = gett ()
-                in
-                    case tokf nt of
-                        NONE => (ungett nt; accu)
-                      | SOME c => loop (c (accu, f ()))
-                end
-            in
-                loop (f ())
-            end
-
-            fun nonassoc (f, tokf) = let
-                val lhs = f ()
-                val nt = gett ()
-            in
-                case tokf nt of
-                    NONE => (ungett nt; lhs)
-                  | SOME c => c (lhs, f ())
-            end
-
-            fun expect (t, m) =
-                if gett () = t then () else synerr (concat ["missing ", m])
-
-            fun intbool f (x: unit -> int, y: unit -> int) =
-                fn () => if f (x (), y ()) then 1 else 0
-
-            fun orf (x, y) =
-                fn () => if (x () <> 0) orelse (y () <> 0) then 1 else 0
-            fun andf (x, y) =
-                fn () => if (x () <> 0) andalso (y () <> 0) then 1 else 0
-            fun notf x = fn () => if x () <> 0 then 0 else 1
-            val eqf = intbool (op =)
-            val nef = intbool (op <>)
-            val gtf = intbool (op >)
-            val gef = intbool (op >=)
-            val ltf = intbool (op <)
-            val lef = intbool (op <=)
-
-            fun binaryf binop (x: unit -> int, y: unit -> int) =
-                fn () => (binop (x (), y ()))
-            fun unaryf uop (x: unit -> int) =
-                fn () => uop (x ())
-
-            val plusf = binaryf (op +)
-            val minusf = binaryf (op -)
-            val timesf = binaryf (op * )
-            val divf = binaryf (op div)
-            val modf = binaryf (op mod)
-            val negatef = unaryf ~
-
-            fun expression () = disjunction ()
-
-            and disjunction () = let
-                fun tokf (T_LCONN L_OR) = SOME orf
-                  | tokf _ = NONE
-            in
-                leftrec (conjunction, tokf)
-            end
-
-            and conjunction () = let
-                fun tokf (T_LCONN L_AND) = SOME andf
-                  | tokf _ = NONE
-            in
-                leftrec (equivalence, tokf)
-            end
-
-            and equivalence () = let
-                fun tokf (T_COMPARE C_EQ) = SOME eqf
-                  | tokf (T_COMPARE C_NE) = SOME nef
-                  | tokf _ = NONE
-            in
-                nonassoc (comparison, tokf)
-            end
-
-            and comparison () = let
-                fun tokf (T_COMPARE C_GT) = SOME gtf
-                  | tokf (T_COMPARE C_GE) = SOME gef
-                  | tokf (T_COMPARE C_LT) = SOME ltf
-                  | tokf (T_COMPARE C_LE) = SOME lef
-                  | tokf _ = NONE
-            in
-                nonassoc (sum, tokf)
-            end
-
-            and sum () = let
-                fun tokf (T_ARITH A_PLUS) = SOME plusf
-                  | tokf (T_ARITH A_MINUS) = SOME minusf
-                  | tokf _ = NONE
-            in
-                leftrec (product, tokf)
-            end
-
-            and product () = let
-                fun tokf (T_ARITH A_TIMES) = SOME timesf
-                  | tokf (T_ARITH A_DIV) = SOME divf
-                  | tokf (T_ARITH A_MOD) = SOME modf
-                  | tokf _ = NONE
-            in
-                leftrec (unary, tokf)
-            end
-
-            and unary () =
-                case gett () of
-                    T_LCONN L_NOT => notf (unary ())
-                  | T_ARITH A_MINUS => negatef (unary ())
-                  | nt => (ungett nt; primary ())
-
-            and primary () =
-                case gett () of
-                    T_LPAREN =>
-                        expression ()
-                        before expect (T_RPAREN, "right parenthesis")
-                  | T_NUMBER n => (fn () => n)
-                  | T_SYMBOL s =>
-                        (fn () =>
-                         (case symval s of
-                              NONE => synerr (concat ["undefined symbol: ", s])
-                            | SOME v => v))
-                  | T_KEYWORD K_DEFINED => let
-                        val _ = expect (T_LPAREN, "left parenthesis")
-                    in
-                        case gett () of
-                            T_KEYWORD k => let
-                                val look =
-                                    case k of
-                                        K_STRUCTURE => strdef
-                                      | K_SIGNATURE => sigdef
-                                      | K_FUNCTOR => fctdef
-                                      | K_FUNSIG => fsigdef
-                                      | _ => synerr "unexpected keyword"
-                            in
-                                case gett () of
-                                    T_SYMBOL s =>
-                                        (expect (T_RPAREN,
-                                                 "right parenthesis");
-                                         fn () => if look s then 1 else 0)
-                                  | _ => synerr "missing symbol"
-                            end
-                          | T_SYMBOL s =>
-                                (expect (T_RPAREN, "right parenthesis");
-                                 fn () => (case symval s of
-                                               NONE => 0
-                                             | SOME _ => 1))
-                          | _ => synerr "illegal `defined' construct"
-                    end
-                  | _ => synerr "unexpected token"
-
-            datatype localstate =
-                T_C | T | E_C | E
-
-            datatype cmd =
-                IF of unit -> int
-              | ELIF of unit -> int
-              | ELSE
-              | ENDIF
-
-            type state = localstate * bool
-
-            fun iscopying s =
-                case s of
-                    [] => true
-                  | (_, copying) :: _ => copying
-
-            fun transform (IF c, s) =
-                if iscopying s andalso c () <> 0 then
-                    (T_C, true) :: s
-                else
-                    (T, false) :: s
-              | transform (ELIF _, (T_C, _) :: s) = (T_C, false) :: s
-              | transform (ELIF c, (T, _) :: s) =
-                if iscopying s andalso c () <> 0 then
-                    (T_C, true) :: s
-                else
-                    (T, false) :: s
-              | transform (ELIF _, _) = synerr "unexpected #elif"
-              | transform (ELSE, (T_C, _) :: s) = (E, false) :: s
-              | transform (ELSE, (T, _) :: s) = (E_C, iscopying s) :: s
-              | transform (ELSE, _) = synerr "unexpected #else"
-              | transform (ENDIF, []) = synerr "unexpected #endif"
-              | transform (ENDIF, _ :: s) = s
-
-            val state: state list ref = ref []
-
-            fun checklook () =
-                case !lookahead of
-                    [] => ()
-                  | _ => raise LexerBug
-
-            fun condition () = let
-                val e = expression ()
-            in
-                fn () =>
-                (e ()
-                 handle Overflow => synerr "arithmetic overflow in condition"
-                      | Div => synerr "divide by zero in condition")
-            end
-
-            fun nexttoken mode =
-                case rawlex mode of
-                    T_HASH =>
-                        (case rawlex PREPROC of
-                             T_KEYWORD K_IF => let
-                                 val c = condition ()
-                                 val _ = expect (T_NL, "line break (#if)")
-                                 val _ = checklook ()
-                             in
-                                 state := transform (IF c, !state);
-                                 nexttoken mode
-                             end
-                           | T_KEYWORD K_ELSE =>
-                                 (expect (T_NL, "line break (#else)");
-                                  checklook ();
-                                  state := transform (ELSE, !state);
-                                  nexttoken mode)
-                           | T_KEYWORD K_ELIF => let
-                                 val c = condition ()
-                                 val _ = expect (T_NL, "line break (#elif)")
-                                 val _ = checklook ()
-                             in
-                                 state := transform (ELIF c, !state);
-                                 nexttoken mode
-                             end
-                           | T_KEYWORD K_ENDIF =>
-                                 (expect (T_NL, "line break (#endif)");
-                                  checklook ();
-                                  state := transform (ENDIF, !state);
-                                  nexttoken mode)
-                           | T_KEYWORD K_ERROR => let
-                                 val msg =
-                                     case rawlex ERRORMSG of
-                                         T_SYMBOL msg => msg
-                                       | _ => raise LexerBug
-                             in
-                                 if iscopying (!state) then
-                                     usererr msg
-                                 else
-                                     (checklook (); nexttoken mode)
-                             end
-                           | _ => synerr "illegal preprocessor line")
-                  | T_EOF =>
-                        if (!state) = [] then T_EOF
-                        else synerr "missing #endif"
-                  | t => if iscopying (!state) then t else nexttoken mode
-
-        in
-            nexttoken
-        end
-
-    in
-        lex
-    end
-end
Index: mlton/cm/parse.sig
===================================================================
--- mlton/cm/parse.sig	(revision 7524)
+++ mlton/cm/parse.sig	(revision 7552)
@@ -1,22 +0,0 @@
-(* Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- * Copyright (C) 1997-2000 NEC Research Institute.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-signature PARSE =
-   sig
-      datatype result =
-         Alias of File.t
-       | Bad of string (* error message *)
-       | Members of File.t list
-
-      (* Pre: cmfile must not contain any path, i.e. it must be in the
-       *      current directory.
-       * The resulting members are either absolute or relative to the current
-       * directory.
-       *)
-      val parse: {cmfile: string} -> result
-   end
Index: mlton/cm/sources.mlb
===================================================================
--- mlton/cm/sources.mlb	(revision 7524)
+++ mlton/cm/sources.mlb	(revision 7552)
@@ -1,21 +0,0 @@
-(* Copyright (C) 1999-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- * Copyright (C) 1997-2000 NEC Research Institute.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-local
-   ../../lib/mlton/sources.mlb
-   ../control/sources.mlb
-
-   lexer.sig
-   lexer.sml
-   parse.sig
-   parse.sml
-   cm.sig
-   cm.sml
-in
-   structure CM
-end
Index: mlton/codegen/sources.cm
===================================================================
--- mlton/codegen/sources.cm	(revision 7524)
+++ mlton/codegen/sources.cm	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -9,13 +10,11 @@
 Group
 
 functor amd64Codegen
-functor Bytecode
 functor CCodegen
 functor x86Codegen
 
 is
 
 amd64-codegen/sources.cm
-bytecode/sources.cm
 c-codegen/sources.cm
 x86-codegen/sources.cm
Index: mlton/codegen/sources.mlb
===================================================================
--- mlton/codegen/sources.mlb	(revision 7524)
+++ mlton/codegen/sources.mlb	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
  *
@@ -9,11 +10,9 @@
 local
    amd64-codegen/sources.mlb
    c-codegen/sources.mlb
-   bytecode/sources.mlb
    x86-codegen/sources.mlb
 in
    functor amd64Codegen
-   functor Bytecode
    functor CCodegen
    functor x86Codegen
 end
Index: mlton/codegen/bytecode/bytecode.sig
===================================================================
--- mlton/codegen/bytecode/bytecode.sig	(revision 7524)
+++ mlton/codegen/bytecode/bytecode.sig	(revision 7552)
@@ -1,24 +0,0 @@
-(* Copyright (C) 2004-2006 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-signature BYTECODE_STRUCTS = 
-   sig
-      structure CCodegen: C_CODEGEN
-      structure Machine: MACHINE
-      sharing Machine = CCodegen.Machine
-   end
-
-signature BYTECODE = 
-   sig
-      include BYTECODE_STRUCTS
-
-      val implementsPrim: 'a Machine.Prim.t -> bool
-      val output: {program: Machine.Program.t,
-                   outputC: unit -> {file: File.t,
-                                     print: string -> unit,
-                                     done: unit -> unit}} -> unit
-   end
Index: mlton/codegen/bytecode/sources.cm
===================================================================
--- mlton/codegen/bytecode/sources.cm	(revision 7524)
+++ mlton/codegen/bytecode/sources.cm	(revision 7552)
@@ -1,15 +0,0 @@
-(* Copyright (C) 2004-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-Group is
-
-../../../lib/mlton/sources.cm
-../../backend/sources.cm
-../../control/sources.cm
-../c-codegen/sources.cm
-bytecode.sig
-bytecode.fun
Index: mlton/codegen/bytecode/bytecode.fun
===================================================================
--- mlton/codegen/bytecode/bytecode.fun	(revision 7524)
+++ mlton/codegen/bytecode/bytecode.fun	(revision 7552)
@@ -1,893 +0,0 @@
-(* Copyright (C) 2009 Matthew Fluet.
- * Copyright (C) 2004-2007 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-functor Bytecode (S: BYTECODE_STRUCTS): BYTECODE = 
-struct
-
-open S
-
-local
-   open Machine
-in
-   structure Block = Block
-   structure CFunction = CFunction
-   structure Chunk = Chunk
-   structure CType = CType
-   structure FrameInfo = FrameInfo
-   structure Global = Global
-   structure Kind = Kind
-   structure Label = Label
-   structure Live = Live
-   structure Operand = Operand
-   structure Prim = Prim
-   structure Program = Program
-   structure Register = Register
-   structure Runtime = Runtime
-   structure Scale = Scale
-   structure StackOffset = StackOffset
-   structure Statement = Statement
-   structure Switch = Switch
-   structure Transfer = Transfer
-   structure Type = Type
-   structure WordSize = WordSize
-   structure WordX = WordX
-end
-
-structure Target = CFunction.Target
-
-fun implementsPrim p =
-   let
-      datatype z = datatype Prim.Name.t
-   in
-      case Prim.name p of
-         CPointer_add => true
-       | CPointer_diff => true
-       | CPointer_equal => true
-       | CPointer_fromWord => true
-       | CPointer_lt => true
-       | CPointer_sub => true
-       | CPointer_toWord => true
-       | FFI_Symbol _ => true
-       | Real_Math_acos _ => true
-       | Real_Math_asin _ => true
-       | Real_Math_atan _ => true
-       | Real_Math_atan2 _ => true
-       | Real_Math_cos _ => true
-       | Real_Math_exp _ => true
-       | Real_Math_ln _ => true
-       | Real_Math_log10 _ => true
-       | Real_Math_sin _ => true
-       | Real_Math_sqrt _ => true
-       | Real_Math_tan _ => true
-       | Real_abs _ => true
-       | Real_add _ => true
-       | Real_castToWord _ => true
-       | Real_div _ => true
-       | Real_equal _ => true
-       | Real_ldexp _ => false
-       | Real_le _ => true
-       | Real_lt _ => true
-       | Real_mul _ => true
-       | Real_muladd _ => false
-       | Real_mulsub _ => false
-       | Real_neg _ => true
-       | Real_qequal _ => false
-       | Real_rndToReal _ => true
-       | Real_rndToWord _ => true
-       | Real_round _ => true
-       | Real_sub _ => true
-       | Word_add _ => true
-       | Word_addCheck _ => true
-       | Word_andb _ => true
-       | Word_castToReal _ => true
-       | Word_equal _ => true
-       | Word_extdToWord _ => true
-       | Word_lshift _ => true
-       | Word_lt _ => true
-       | Word_mul _ => true
-       | Word_mulCheck _ => true
-       | Word_neg _ => true
-       | Word_negCheck _ => true
-       | Word_notb _ => true
-       | Word_orb _ => true
-       | Word_quot _ => true
-       | Word_rem _ => true
-       | Word_rndToReal _ => true
-       | Word_rol _ => true
-       | Word_ror _ => true
-       | Word_rshift _ => true
-       | Word_sub _ => true
-       | Word_subCheck _ => true
-       | Word_xorb _ => true
-       | _ => false
-   end
-
-structure Opcode = IntInf
-
-structure CType =
-   struct
-      open CType
-
-      val memo: (t -> 'a) -> t -> 'a =
-         fn f =>
-         let
-            val m =
-               CType.memo (fn t =>
-                           case t of
-                              CType.CPointer => NONE
-                            | CType.Objptr => NONE 
-                            | _ => SOME (f t))
-         in
-            fn t =>
-            valOf (case t of
-                      CType.CPointer => m (CType.csize ())
-                    | CType.Objptr => m (CType.csize ())
-                    | _ => m t)
-         end
-
-      val noSigned =
-         memo (fn t =>
-               case t of
-                  Int8 => Word8
-                | Int16 => Word16
-                | Int32 => Word32
-                | Int64 =>  Word64
-                | _ => t)
-
-      val toStringOrig = toString
-      val toString = memo toString
-   end
-
-structure LoadStore =
-   struct
-      datatype t = Load | Store
-
-      val toString =
-         fn Load => "load"
-          | Store => "store"
-
-      val layout = Layout.str o toString
-   end
-
-fun output {program as Program.T {chunks, main, ...}, outputC} =
-   let
-      datatype z = datatype LoadStore.t
-      datatype z = datatype Statement.t
-      datatype z = datatype Transfer.t
-      (* Build a table of the opcodes. *)
-      val table = HashSet.new {hash = #hash}
-      val _ =
-         File.withIn
-         (concat [!Control.libDir, "/opcodes"], fn ins =>
-          In.foldLines
-          (ins, 0, fn (l, i) =>
-           case String.tokens (l, Char.isSpace) of
-             [name] =>
-                let
-                   val hash = String.hash name
-                   val _ =
-                      HashSet.insertIfNew
-                      (table, hash,
-                       fn {name = name', ...} => name = name',
-                       fn () => {hash = hash,
-                                 opcode = Int.toIntInf i,
-                                 name = name},
-                       fn _ => Error.bug 
-                               (concat ["Bytecode.output: duplicate opcode: ", 
-                                        name]))
-                in
-                   i + 1
-                end
-           | _ => Error.bug "Bytecode.output: strange opcode file"))
-      val opcode: string -> Opcode.t =
-         fn name =>
-         #opcode (HashSet.lookupOrInsert
-                  (table, String.hash name,
-                   fn {name = name', ...} => name = name',
-                   fn () => Error.bug 
-                            (concat ["Bytecode.output: missing opcode: ", 
-                                     name])))
-      val callCounter = Counter.new 0
-      val callCs = ref []
-      fun callC {function: string,
-                 prototype}: string =
-         let
-            val (args, result) = prototype
-            val c = Counter.new 0
-            fun temp () = concat ["t", Int.toString (Counter.next c)]
-            fun cast (cty, src) =
-               concat ["(", cty, ")(", src, ")"]
-            val args =
-               Vector.map
-               (args, fn cty =>
-                let
-                   val mty = CType.noSigned cty
-                   val (declarePop,mtemp) =
-                      let
-                         val mty = CType.toString mty
-                         val mtemp = temp ()
-                      in
-                         (concat ["\t", mty, " ", mtemp, 
-                                  " = PopReg (", mty, ");\n"],
-                          mtemp)
-                      end
-                   val (declareCast, ctemp) =
-                      if mty = cty
-                         then ("", mtemp)
-                         else let
-                                 val cty = CType.toString cty
-                                 val ctemp = temp ()
-                              in
-                                 (concat ["\t", cty, " ", ctemp, " = ",
-                                          cast (cty, mtemp), ";\n"],
-                                  ctemp)
-                              end
-                in
-                   {declare = concat [declarePop, declareCast],
-                    temp = ctemp}
-                end)
-            val call =
-               concat [function,
-                       " (",
-                       (concat o List.separate) 
-                       (Vector.toListMap (args, #temp), ", "),
-                       ");\n"]
-            val result =
-               case result of
-                  NONE => concat ["\t", call]
-                | SOME cty =>
-                     let
-                        val mty = CType.noSigned cty
-                     in
-                        if mty = cty
-                           then concat 
-                                ["\tPushReg (", CType.toString cty, ") = ", 
-                                 call]
-                           else let
-                                   val cty = CType.toString cty
-                                   val ctemp = temp ()
-                                   val mty = CType.toString mty
-                                in
-                                   concat 
-                                   ["\t", cty, " ", ctemp, " = ", call,
-                                    "\tPushReg (", mty, ") = ", 
-                                    cast (mty, ctemp), ";\n"]
-                                end
-                     end
-         in
-            concat
-            ["{\n",
-             concat (Vector.toListMap (args, #declare)),
-             "\tassertRegsEmpty ();\n",
-             result,
-             "\t}\n"]
-         end
-      local
-         val calls = HashSet.new {hash = #hash}
-      in
-         val () =
-            (* Visit each direct C Call in the program. *)
-            List.foreach
-            (chunks, fn Chunk.T {blocks, ...} =>
-             Vector.foreach
-             (blocks, fn Block.T {statements, transfer, ...} =>
-              (Vector.foreach
-               (statements, fn s =>
-                case s of
-                   PrimApp {dst, prim, ...} =>
-                      (case Prim.name prim of
-                          Prim.Name.FFI_Symbol {name, ...} =>
-                             Option.app
-                             (dst, fn _ =>
-                              let
-                                 val hash = String.hash name
-                              in
-                                 ignore
-                                 (HashSet.lookupOrInsert
-                                  (calls, hash,
-                                   fn {name = n, symbol, ...} => 
-                                   n = name andalso symbol,
-                                   fn () =>
-                                   let
-                                      val index = Counter.next callCounter
-                                      val display =
-                                         let
-                                            val ptr = 
-                                               CType.toString CType.CPointer
-                                         in
-                                            concat
-                                            ["PushReg (",ptr,") = ",
-                                             "((",ptr,")(&",name,"));\n"]
-                                         end
-                                      val () =
-                                         List.push
-                                         (callCs, {display = display,
-                                                   index = index})
-                                   in
-                                      {hash = hash,
-                                       index = index,
-                                       name = name,
-                                       symbol = true}
-                                   end))
-                              end)
-                        | _ => ())
-                 | _ => ())
-               ; (case transfer of
-                     CCall {func, ...} =>
-                        let
-                           val CFunction.T {prototype, target, ...} = func
-                           datatype z = datatype Target.t
-                        in
-                           case target of
-                              Direct "Thread_returnToC" => ()
-                            | Direct name =>
-                                 let
-                                    val hash = String.hash name
-                                 in
-                                    ignore
-                                    (HashSet.lookupOrInsert
-                                     (calls, hash,
-                                      fn {name = n, symbol, ...} => 
-                                      n = name andalso (not symbol),
-                                      fn () =>
-                                      let
-                                         val index = Counter.next callCounter
-                                         val display =
-                                            callC {function = name,
-                                                   prototype = prototype}
-                                         val () =
-                                            List.push
-                                            (callCs, {display = display,
-                                                      index = index})
-                                      in
-                                         {hash = hash,
-                                          index = index,
-                                          name = name,
-                                          symbol = false}
-                                      end))
-                                 end
-                            | Indirect => ()
-                        end
-                   | _ => ()))))
-         fun directIndex (name: string) =
-            #index (HashSet.lookupOrInsert
-                    (calls, String.hash name,
-                     fn {name = n, symbol, ...} => 
-                     n = name andalso (not symbol),
-                     fn () => Error.bug "Bytecode.output.directIndex"))
-         fun ffiSymbolIndex (name: string) = 
-            #index (HashSet.lookupOrInsert
-                    (calls, String.hash name,
-                     fn {name = n, symbol, ...} => 
-                     n = name andalso symbol,
-                     fn () => Error.bug "Bytecode.output.ffiSymbolIndex"))
-      end
-      fun indirectIndex (f: 'a CFunction.t): int =
-         let
-            val index = Counter.next callCounter
-            val function =
-               concat ["(", "*(", CFunction.cPointerType f, " fptr)) "]
-            val display =
-               concat ["{\n\t", CType.toStringOrig (CType.csize ()), 
-                       " fptr = PopReg (", CType.toStringOrig (CType.csize ()), 
-                       ");\n\t",
-                       callC {function = function,
-                              prototype = CFunction.prototype f},
-                       "\t}\n"]
-            val () =
-               List.push (callCs, {display = display,
-                                   index = index})
-         in
-            index
-         end
-      val callC = opcode "CallC"
-      val jumpOnOverflow = opcode "JumpOnOverflow"
-      val raisee = opcode "Raise"
-      val returnOp = opcode "Return"
-      val returnToC = opcode "Thread_returnToC"
-      datatype z = datatype WordSize.prim
-      val switch: WordSize.t -> Opcode.t =
-         let
-            val s8 = opcode "Switch8"
-            val s16 = opcode "Switch16"
-            val s32 = opcode "Switch32"
-            val s64 = opcode "Switch64"
-         in
-            fn w =>
-            case WordSize.prim w of
-               W8 => s8
-             | W16 => s16
-             | W32 => s32
-             | W64 => s64
-         end
-      local
-         fun make (name, distinguishPointers: bool)
-            (ls: LoadStore.t, cty: CType.t): Opcode.t =
-            opcode
-            (concat [if distinguishPointers
-                        then CType.toStringOrig cty
-                     else CType.toString cty,
-                     "_", LoadStore.toString ls, name])
-      in
-         val arrayOffset = make ("ArrayOffset", false)
-         val contents = make ("Contents", false)
-         val global = make ("Global", true)
-         val offsetOp = make ("Offset", false)
-         val register = make ("Register", true)
-         val stackOffset = make ("StackOffset", false)
-         val wordOpcode = make ("Word", false)
-      end
-      val branchIfZero = opcode "BranchIfZero"
-      fun gpnr ls = opcode (concat [LoadStore.toString ls, "GPNR"])
-      local
-         fun make name (ls: LoadStore.t): Opcode.t =
-            opcode (concat [LoadStore.toString ls, name])
-      in
-         val frontier = make "Frontier"
-         val gcState = make "GCState"
-         val stackTop = make "StackTop"
-      end
-      val code: Word8.t list ref = ref []
-      val offset = ref 0
-      val emitByte: Word8.t -> unit =
-         fn w =>
-         (List.push (code, w)
-          ; Int.inc offset)
-      local
-         fun make (bits: int, {signed}): IntInf.t -> unit =
-            let
-               val bits = Bits.fromInt bits
-            in
-               fn i =>
-               if not (WordSize.isInRange (WordSize.fromBits bits, i,
-                                           {signed = signed}))
-                  then Error.bug (concat ["Bytecode.output: emitWord", 
-                                          Bits.toString bits,
-                                          " failed on ", 
-                                          IntInf.toString i])
-               else
-                  let
-                     fun loop (j, i) =
-                        if 0 = j
-                           then ()
-                        else
-                           let
-                              val (q, r) = IntInf.quotRem (i, 0x100)
-                              val () = emitByte (Word8.fromIntInf r)
-                           in
-                              loop (j - 1, q)
-                           end
-                  in
-                     loop (Bytes.toInt (Bits.toBytes bits),
-                           IntInf.mod (i, IntInf.<< (1, Bits.toWord bits)))
-                  end
-            end
-      in
-         val emitWord8 = make (8, {signed = false})
-         val emitWord16 = make (16, {signed = false})
-         val emitWordS16 = make (16, {signed = true})
-         val emitWord32 = make (32, {signed = false})
-         val emitWord64 = make (64, {signed = false})
-      end
-      val emitWordX: WordX.t -> unit =
-         fn w =>
-         (case WordSize.prim (WordX.size w) of
-             W8 => emitWord8
-           | W16 => emitWord16
-           | W32 => emitWord32
-           | W64 => emitWord64) (WordX.toIntInf w)
-      val emitOpcode = emitWord16
-      val emitPrim: 'a Prim.t -> unit =
-         fn p => emitOpcode (opcode (Prim.toString p))
-      fun emitCallC (index: int): unit =
-         (emitOpcode callC
-          ; emitWord16 (Int.toIntInf index))
-      val {get = labelInfo: Label.t -> {block: Block.t,
-                                        emitted: bool ref,
-                                        occurrenceOffsets: int list ref,
-                                        offset: int option ref},
-           set = setLabelInfo, ...} =
-         Property.getSetOnce (Label.plist,
-                              Property.initRaise ("info", Label.layout))
-      val needToEmit: Label.t list ref = ref []
-      val emitLabel: Label.t -> unit =
-         fn l =>
-         let
-            val {emitted, occurrenceOffsets, ...} = labelInfo l
-            val () = List.push (occurrenceOffsets, !offset)
-            val () = if !emitted then () else List.push (needToEmit, l)
-         in
-            emitWordX (WordX.zero (WordSize.cpointer ()))
-         end
-      val emitLabel =
-         Trace.trace ("Bytecode.emitLabel", Label.layout, Unit.layout) emitLabel
-      fun loadStoreStackOffset (offset, cty, ls) =
-         (emitOpcode (stackOffset (ls, cty))
-          ; emitWord16 (Bytes.toIntInf offset))
-      val rec emitLoadOperand = fn z => emitOperand (z, Load)
-      and emitOperand: Operand.t * LoadStore.t -> unit =
-         fn (z, ls) =>
-         let
-            val cty = Type.toCType (Operand.ty z)
-            datatype z = datatype Operand.t
-         in
-            case z of
-               ArrayOffset {base, index, offset, scale, ...} =>
-                  (emitLoadOperand base
-                   ; emitLoadOperand index
-                   ; emitOpcode (arrayOffset (ls, cty))
-                   ; emitWord16 (Bytes.toIntInf offset)
-                   ; emitWord8 (Int.toIntInf (Scale.toInt scale)))
-             | Cast (z, _) => emitOperand (z, ls)
-             | Contents {oper, ...} =>
-                   (emitLoadOperand oper
-                    ; emitOpcode (contents (ls, cty)))
-             | Frontier => emitOpcode (frontier ls)
-             | GCState => emitOpcode (gcState ls)
-             | Global g =>
-                  (if Global.isRoot g
-                      then emitOpcode (global (ls, cty))
-                   else emitOpcode (gpnr ls)
-                   ; emitWord16 (Int.toIntInf (Global.index g)))
-             | Label l =>
-                  (emitOpcode (wordOpcode (ls, cty))
-                   ; emitLabel l)
-             | Null => (emitOpcode (wordOpcode (ls, cty))
-                        ; emitWordX (WordX.zero (WordSize.cpointer ())))
-             | Offset {base, offset = off, ...} =>
-                  (emitLoadOperand base
-                   ; emitOpcode (offsetOp (ls, cty))
-                   ; emitWordS16 (Bytes.toIntInf off))
-             | Real _ => Error.bug "Bytecode.emitOperand: Real"
-             | Register r =>
-                  (emitOpcode (register (ls, cty))
-                   ; emitWord16 (Int.toIntInf (Register.index r)))
-             | StackOffset (StackOffset.T {offset, ...}) =>
-                  loadStoreStackOffset (offset, cty, ls)
-             | StackTop => emitOpcode (stackTop ls)
-             | Word w =>
-                  case ls of
-                     Load => (emitOpcode (wordOpcode (ls, cty)); emitWordX w)
-                   | Store => Error.bug "Bytecode.emitOperand: Word, Store"
-         end
-      val emitLoadOperand =
-         Trace.trace
-         ("Bytecode.emitLoadOperand", Operand.layout, Unit.layout)
-         emitLoadOperand
-      val emitOperand =
-         Trace.trace2
-         ("Bytecode.emitOperand", Operand.layout, LoadStore.layout, Unit.layout)
-         emitOperand
-      fun emitStoreOperand z = emitOperand (z, Store)
-      fun move {dst, src} =
-         (emitLoadOperand src
-          ; emitStoreOperand dst)
-      fun emitArgs args = Vector.foreach (Vector.rev args, emitLoadOperand)
-      fun primApp {args, dst, prim} =
-         case Prim.name prim of
-            Prim.Name.FFI_Symbol {name, ...} =>
-               Option.app
-               (dst, fn dst =>
-                (emitCallC (ffiSymbolIndex name)
-                 ; emitStoreOperand dst))
-          | _ => 
-               (emitArgs args
-                ; emitPrim prim
-                ; Option.app (dst, emitStoreOperand))
-      val emitStatement: Statement.t -> unit =
-         fn s =>
-         case s of
-            Move z => move z
-          | Noop => ()
-          | PrimApp z => primApp z
-          | ProfileLabel _ => Error.bug "Bytecode.output.emitStatement: profileLabel"
-      val emitStatement =
-         Trace.trace ("Bytecode.emitStatement", Statement.layout, Unit.layout)
-         emitStatement
-      val gotoOp = opcode "Goto"
-      val pointerSize = WordSize.cpointer ()
-      val flushStackTopOp = opcode "FlushStackTop"
-      val amTimeProfiling = 
-         !Control.profile = Control.ProfileTimeField
-         orelse !Control.profile = Control.ProfileTimeLabel
-      fun shiftStackTop (size: Bytes.t) =
-         (primApp {args = (Vector.new2
-                           (Operand.StackTop,
-                            Operand.Word (WordX.fromIntInf
-                                          (Bytes.toIntInf size,
-                                           pointerSize)))),
-                   dst = SOME Operand.StackTop,
-                   prim = Prim.wordAdd pointerSize}
-          ; if amTimeProfiling
-               then emitOpcode flushStackTopOp
-            else ())
-      fun push (label: Label.t, size: Bytes.t): unit =
-         (move {dst = (Operand.StackOffset
-                       (StackOffset.T
-                        {offset = Bytes.- (size, Runtime.labelSize ()),
-                         ty = Type.label label})),
-                src = Operand.Label label}
-          ; shiftStackTop size)
-      fun pop (size: Bytes.t) = shiftStackTop (Bytes.~ size)
-      val () =
-         List.foreach
-         (chunks, fn Chunk.T {blocks, ...} =>
-          Vector.foreach
-          (blocks, fn block =>
-           setLabelInfo (Block.label block,
-                         {block = block,
-                          emitted = ref false,
-                          occurrenceOffsets = ref [],
-                          offset = ref NONE})))
-      val traceEmitTransfer =
-         Trace.trace ("Bytecode.emitTransfer", Transfer.layout, Unit.layout)
-      fun emitBlock (Block.T {kind, label, statements, transfer, ...}): unit =
-         let
-            val () =
-               Option.app
-               (Kind.frameInfoOpt kind,
-                fn FrameInfo.T {frameLayoutsIndex} =>
-                ((* This load will never be used.  We just have it there
-                  * so the disassembler doesn't get confused when it
-                  * sees the frameLayoutsIndex.
-                  *)
-                 emitOpcode (wordOpcode (Load, CType.Word32))
-                 ; emitWord32 (Int.toIntInf frameLayoutsIndex)))
-            val () = #offset (labelInfo label) := SOME (!offset)
-            fun popFrame () =
-               Option.app (Kind.frameInfoOpt kind, fn fi =>
-                           pop (Program.frameSize (program, fi)))
-            val () =
-               case kind of
-                  Kind.CReturn {dst, func, ...} =>
-                     (case #2 (CFunction.prototype func) of
-                         NONE => popFrame ()
-                       | SOME cty => 
-                            case dst of
-                               NONE =>
-                                  (* Even if there is no dst, we still need to
-                                   * pop the value returned by the C function.
-                                   * We write it to a bogus location in the
-                                   * callee's frame before popping back to the
-                                   * caller.
-                                   * We mediated between the signed/unsigned treatment
-                                   * in the stub.
-                                   *)
-                                  (loadStoreStackOffset 
-                                   (Bytes.zero, CType.noSigned cty, Store)
-                                   ; popFrame ())
-                             | SOME z =>
-                                  (popFrame ()
-                                   ; emitStoreOperand (Live.toOperand z)))
-                | _ => popFrame ()
-            val () =
-               (Vector.foreach (statements, emitStatement)
-                ; emitTransfer transfer)
-         in
-            ()
-         end
-      and goto (l: Label.t): unit =
-         let
-            val {block as Block.T {kind, ...}, emitted, ...} = labelInfo l
-         in
-            if !emitted orelse isSome (Kind.frameInfoOpt kind)
-               then (emitOpcode gotoOp; emitLabel l)
-            else (emitted := true; emitBlock block)
-         end
-      and emitTransfer arg: unit =
-         traceEmitTransfer
-         (fn (t: Transfer.t) => 
-          let
-             datatype z = datatype Transfer.t
-          in
-             case t of
-                Arith {args, dst, overflow, prim, success} =>
-                   (emitArgs args
-                    ; emitPrim prim
-                    ; emitStoreOperand dst
-                    ; emitOpcode jumpOnOverflow
-                    ; emitLabel overflow
-                    ; goto success)
-              | CCall {args, frameInfo, func, return} =>
-                   let
-                      val () = emitArgs args
-                      val CFunction.T {maySwitchThreads, target, ...} =
-                         func
-                      val () =
-                         Option.app
-                         (frameInfo, fn frameInfo =>
-                          push (valOf return,
-                                Program.frameSize (program, frameInfo)))
-                      datatype z = datatype Target.t
-                      val () =
-                         case target of
-                            Direct "Thread_returnToC" => emitOpcode returnToC
-                          | Direct name => emitCallC (directIndex name)
-                          | Indirect => emitCallC (indirectIndex func)
-                      val () =
-                         if maySwitchThreads
-                            then emitOpcode returnOp
-                            else Option.app (return, goto)
-                   in
-                      ()
-                   end
-              | Call {label, return, ...} =>
-                   (Option.app (return, fn {return, size, ...} =>
-                                push (return, size))
-                    ; goto label)
-              | Goto l => goto l
-              | Raise => emitOpcode raisee
-              | Return => emitOpcode returnOp
-              | Switch (Switch.T {cases, default, size, test}) =>
-                   let
-                      val () = emitLoadOperand test
-                      fun bool (a: Label.t, b: Label.t) =
-                         (emitOpcode branchIfZero
-                          ; emitLabel b
-                          ; goto a)
-                      fun normal () =
-                         let
-                            val numCases =
-                               Vector.length cases
-                               + (if isSome default then 1 else 0)
-                               - 1
-                            val () =
-                               (emitOpcode (switch size)
-                                ; emitWord16 (Int.toIntInf numCases))
-                            fun emitCases cases =
-                               Vector.foreach (cases, fn (w, l) =>
-                                               (emitWordX w; emitLabel l))
-                         in
-                            case default of
-                               NONE =>
-                                  (emitCases (Vector.dropSuffix (cases, 1))
-                                   ; goto (#2 (Vector.last cases)))
-                             | SOME l =>
-                                  (emitCases cases; goto l)
-                         end
-                   in
-                      if 2 = Vector.length cases
-                         andalso Option.isNone default
-                         andalso WordSize.equals (size, WordSize.bool)
-                         then
-                            let
-                               val (c0, l0) = Vector.sub (cases, 0)
-                               val (c1, l1) = Vector.sub (cases, 1)
-                               val i0 = WordX.toIntInf c0
-                               val i1 = WordX.toIntInf c1
-                            in
-                               if i0 = 0 andalso i1 = 1
-                                  then bool (l1, l0)
-                                  else if i0 = 1 andalso i1 = 0
-                                          then bool (l0, l1)
-                                          else normal ()
-                            end
-                         else normal ()
-                   end
-          end) arg
-      fun loop () =
-         case !needToEmit of
-            [] => ()
-          | l :: ls =>
-               let
-                  val () = needToEmit := ls
-                  val {block, emitted, ...} = labelInfo l
-                  val () =
-                     if !emitted
-                        then ()
-                     else (emitted := true; emitBlock block)
-               in
-                  loop ()
-               end
-      val () = List.push (needToEmit, #label main)
-      val () = loop ()
-      (* Discard unreachable blocks *)
-      val chunks =
-         List.map
-         (chunks, fn Chunk.T {blocks, chunkLabel, regMax} =>
-          let
-             val blocks =
-                Vector.keepAll
-                (blocks, fn Block.T {label, ...} =>
-                 ! (#emitted (labelInfo label)))
-          in
-             Chunk.T {blocks = blocks,
-                      chunkLabel = chunkLabel,
-                      regMax = regMax}
-          end)
-      fun labelOffset l = valOf (! (#offset (labelInfo l)))
-      val code = Array.fromListRev (!code)
-      (* Backpatch all label references. *)
-      val () =
-         List.foreach
-         (chunks, fn Chunk.T {blocks, ...} =>
-          Vector.foreach
-          (blocks, fn Block.T {label, ...} =>
-           let
-              val {occurrenceOffsets = r, offset, ...} = labelInfo label
-              val offset = valOf (!offset)
-              fun loop (i, address) =
-                 if 0 = address
-                    then ()
-                 else (Array.update (code, i,
-                                     Word8.fromInt (Int.rem (address, 0x100)))
-                       ; loop (i + 1, Int.quot (address, 0x100)))
-           in
-              List.foreach (!r, fn occ => loop (occ, offset))
-          end))
-      val {done, file = _, print} = outputC ()
-      val print =
-         Trace.trace ("Bytecode.print", String.layout, Unit.layout) print
-      val () =
-         CCodegen.outputDeclarations
-         {additionalMainArgs = [Int.toString (labelOffset (#label main))],
-          includes = ["bytecode-main.h"],
-          print = print,
-          program = program,
-          rest = fn () => ()}
-      val () = done ()
-      val {done, print, ...} = outputC ()
-      fun declareCallC () =
-          (print "PRIVATE void MLton_callC (int i) {\n"
-           ; print "switch (i) {\n"
-           ; List.foreach (!callCs, fn {display, index} =>
-                           (print (concat ["case ", Int.toString index, ":\n\t"])
-                            ; print display
-                            ; print "break;\n"))
-           ; print "}}\n")
-      val () =
-          (print "#include \"bytecode.h\"\n\n"
-           ; List.foreach (chunks, fn c =>
-                           CCodegen.declareFFI (c, {print = print}))
-           ; print "\n"
-           ; declareCallC ()
-           ; print "\n")
-      val word8ArrayToString: Word8.t array -> string =
-         fn a => String.tabulate (Array.length a, fn i =>
-                                  Char.fromWord8 (Array.sub (a, i)))
-      val {labels, offsets, ...} =
-         List.fold
-         (chunks, {labels = [], offset = 0, offsets = []},
-          fn (Chunk.T {blocks, ...}, ac) =>
-          Vector.fold
-          (blocks, ac, fn (Block.T {label, ...}, {labels, offset, offsets}) =>
-           let
-              val offsets = {code = labelOffset label, name = offset} :: offsets
-              val label = Label.toString label
-           in
-              {labels = label :: labels,
-               offset = offset + String.size label + 1,
-               offsets = offsets}
-           end))
-      val labels =
-         concat (List.fold (labels, [], fn (l, ac) => l :: "\000" :: ac))
-      val offsets = rev offsets
-      fun printString s =
-         (print "\t\""; print (String.escapeC s); print "\",\n")
-      fun printInt i = print (concat ["\t", Int.toString i, ",\n"])
-      val () =
-         (print "static struct NameOffsets nameOffsets [] = {\n"
-          ; List.foreach (offsets, fn {code, name} =>
-                          print (concat ["\t{ ",
-                                         Int.toString code, ", ",
-                                         Int.toString name,
-                                         " },\n"]))
-          ; print "};\n"
-          ; print "PRIVATE struct Bytecode MLton_bytecode = {\n"
-          ; printString labels
-          ; printString (word8ArrayToString code)
-          ; printInt (Array.length code)
-          ; print "\tnameOffsets,\n"
-          ; printInt (List.length offsets)
-          ; print "};\n")
-      val () = done ()
-   in
-      ()
-   end
-
-end
Index: mlton/codegen/bytecode/sources.mlb
===================================================================
--- mlton/codegen/bytecode/sources.mlb	(revision 7524)
+++ mlton/codegen/bytecode/sources.mlb	(revision 7552)
@@ -1,18 +0,0 @@
-(* Copyright (C) 2004-2005 Henry Cejtin, Matthew Fluet, Suresh
- *    Jagannathan, and Stephen Weeks.
- *
- * MLton is released under a BSD-style license.
- * See the file MLton-LICENSE for details.
- *)
-
-local
-   ../../../lib/mlton/sources.mlb
-   ../../backend/sources.mlb
-   ../../control/sources.mlb
-   ../c-codegen/sources.mlb
-
-   bytecode.sig
-   bytecode.fun
-in
-   functor Bytecode
-   end
Index: ide/pygments/.ignore
===================================================================
--- ide/pygments/.ignore	(revision 0)
+++ ide/pygments/.ignore	(revision 7552)
@@ -0,0 +1,3 @@
+build
+dist
+sml_lexer.egg-info
Index: ide/pygments/setup.py
===================================================================
--- ide/pygments/setup.py	(revision 0)
+++ ide/pygments/setup.py	(revision 7552)
@@ -0,0 +1,19 @@
+# -*- coding: utf-8 -*-
+"""
+Standard ML Lexer for Pygments
+"""
+from setuptools import setup
+
+setup(
+    name='sml_lexer',
+    version='1.0',
+    author='Matthew Fluet',
+    author_email='Matthew.Fluet@gmail.com',
+    url='http://www.mlton.org/Pygments',
+    description=__doc__,
+    packages=['sml_lexer'],
+    entry_points='''
+    [pygments.lexers]
+    StandardMLLexer = sml_lexer:StandardMLLexer
+    '''
+)
Index: ide/pygments/sml_lexer/.ignore
===================================================================
--- ide/pygments/sml_lexer/.ignore	(revision 0)
+++ ide/pygments/sml_lexer/.ignore	(revision 7552)
@@ -0,0 +1 @@
+__init__.pyc
Index: ide/pygments/sml_lexer/__init__.py
===================================================================
--- ide/pygments/sml_lexer/__init__.py	(revision 0)
+++ ide/pygments/sml_lexer/__init__.py	(revision 7552)
@@ -0,0 +1,129 @@
+# -*- coding: utf-8 -*-
+"""
+Standard ML Lexer for Pygments.
+"""
+
+import re
+
+from pygments.lexer import RegexLexer, bygroups
+from pygments.token import *
+
+
+__all__ = ['StandardMLLexer']
+
+
+class StandardMLLexer(RegexLexer):
+    """
+    A Standard ML lexer.
+    """
+    name = 'Standard ML'
+    aliases = ['sml']
+    filenames = ['*.sml','*.sig','*.fun','*.ML']
+    mimetypes = ['text/x-standardml', 'application/x-standardml']
+
+    flags = re.DOTALL | re.MULTILINE
+
+    alphanumid_reserved = [
+        ## Core
+        'abstype', 'and', 'andalso', 'as', 'case', 'do', 'datatype', 'else',
+        'end', 'exception', 'fn', 'fun', 'handle', 'if', 'in', 'infix',
+        'infixr', 'let', 'local', 'nonfix', 'of', 'op', 'open', 'orelse',
+        'raise', 'rec', 'then', 'type', 'val', 'with', 'withtype', 'while',
+        ## Modules
+        'eqtype', 'functor', 'include', 'sharing', 'sig',
+        'signature', 'struct', 'structure', 'where'
+    ]
+    symbolicid_reserved = [
+        ## Core
+        ':', '|', '=', '=>', '->', '#',
+        ## Modules
+        ':>'
+    ]
+    nonid_reserved = [
+        ## Core
+        '(', ')', '[', ']', '{', '}', ',', ';', '...', '_'
+        ## Modules
+    ]
+
+    alphanumid_re = r"[a-zA-Z][a-zA-Z0-9_']*"
+    symbolicid_re = r"[!%&$#+\-/:<=>?@\\~`^|*]+"
+    long_id_re = r"((%s\.)*)((%s)|(%s))" % (alphanumid_re, alphanumid_re, symbolicid_re)
+    primed_alphanumid_re = r"'[a-zA-Z0-9_']*"
+
+    def long_id_callback(self, match):
+        strids = match.group(1)
+        pos = 0
+        for m in re.finditer(r'(%s)(\.)' % self.alphanumid_re, strids) :
+            strid = m.group(1)
+            if strid in self.alphanumid_reserved :
+                token = Error
+            else :
+                token = Name
+            yield pos, token, strid
+            pos += len(strid)
+            dot = m.group(2)
+            yield pos, Punctuation, dot
+            pos += len(dot)
+        nqid = match.group(3)
+        if strids == "" :
+            if nqid in self.alphanumid_reserved :
+                token = Keyword
+            elif nqid in self.symbolicid_reserved :
+                token = Punctuation
+            else :
+                token = Name
+        else :
+            if nqid in self.alphanumid_reserved :
+                token = Error
+            elif nqid in self.symbolicid_reserved :
+                token = Error
+            else :
+                token = Name
+        yield pos, token, nqid
+        pos += len(nqid)
+
+    printable_re = r'[^\x00-\x1F"\\\x7F]'
+    escape_re = r'\\("|\\|a|b|t|n|v|f|r|^[@-_]|[0-9]{3}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'
+
+    tokens = {
+        'root': [
+            (r'\s+', Whitespace),
+            (r'\(\*', Comment.Multiline, 'comment'),
+
+            (r'~?[0-9]+\.[0-9]+((e|E)~?[0-9]+)?', Number.Float),
+            (r'~?[0-9]+(e|E)~?[0-9]+', Number.Float),
+            (r'0wx[0-9a-fA-F]+', Number.Hex),
+            (r'~?0x[0-9a-fA-F]+', Number.Hex),
+            (r'0w[0-9]+', Number.Integer),
+            (r'~?[0-9]+', Number.Integer),
+
+            (r'"', String, 'string'),
+            (r'(#)(")', bygroups(Punctuation, String), 'string'),
+
+            (long_id_re, long_id_callback),
+            (r'(%s)' % '|'.join([re.escape(z) for z in nonid_reserved]), Punctuation),
+            (primed_alphanumid_re, Name),
+
+            (r'.', Error, 'error')
+        ],
+        'error': [
+            (r'.', Error)
+        ],
+        'comment': [
+            (r'\(\*', Comment.Multiline, '#push'),
+            (r'\*\)', Comment.Multiline, '#pop'),
+            (r'.', Comment.Multiline),
+        ],
+        'string': [
+            (printable_re, String),
+            (escape_re, String.Escape),
+            (r'\\\s', String, 'gap'),
+            (r'"', String, '#pop'),
+            (r'.', Error),
+        ],
+        'gap': [
+            (r'\s+', String),
+            (r'\\', String, '#pop'),
+            (r'.', Error),
+        ],
+    }

Property changes on: ide/pygments/sml_lexer
___________________________________________________________________
Added: svn:ignore
   + __init__.pyc



Property changes on: ide/pygments
___________________________________________________________________
Added: svn:ignore
   + build
dist
sml_lexer.egg-info


Index: ide/enscript/sml_all.st
===================================================================
--- ide/enscript/sml_all.st	(revision 7524)
+++ ide/enscript/sml_all.st	(revision 7552)
@@ -88,6 +88,11 @@
  */
 state sml_string
 {
+  /\\\\(\s|\n)/ {
+    language_print ($0);
+    call (sml_string_gap);
+  }
+
   /\\\\./ {
     language_print ($0);
   }
@@ -102,6 +107,22 @@
   }
 }
 
+state sml_string_gap
+{
+  /(\s|\n)/ {
+    language_print ($0);
+  }
+
+  /\\\\/ {
+    language_print ($0);
+    return;
+  }
+
+  LANGUAGE_SPECIALS {
+    language_print ($0);
+  }
+}
+
 /*
  * Nested comments
  */
Index: ide/enscript/sml_simple.st
===================================================================
--- ide/enscript/sml_simple.st	(revision 7524)
+++ ide/enscript/sml_simple.st	(revision 7552)
@@ -77,6 +77,11 @@
  */
 state sml_string extends Highlight
 {
+  /\\\\(\s|\n)/ {
+    language_print ($0);
+    call (sml_string_gap);
+  }
+
   /\\\\./ {
     language_print ($0);
   }
@@ -87,6 +92,18 @@
   }
 }
 
+state sml_string_gap extends Highlight
+{
+  /(\s|\n)/ {
+    language_print ($0);
+  }
+
+  /\\\\/ {
+    language_print ($0);
+    return;
+  }
+}
+
 /*
  * Nested comments
  */
Index: basis-library/real/real.sml
===================================================================
--- basis-library/real/real.sml	(revision 7524)
+++ basis-library/real/real.sml	(revision 7552)
@@ -1,4 +1,5 @@
-(* Copyright (C) 2003-2007 Henry Cejtin, Matthew Fluet, Suresh
+(* Copyright (C) 2011 Matthew Fluet.
+ * Copyright (C) 2003-2007 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  *
  * MLton is released under a BSD-style license.
@@ -20,16 +21,9 @@
 
       local
          open Prim
-         val isBytecode = MLton.Codegen.isBytecode
       in
-         val *+ =
-            if isBytecode
-               then fn (r1, r2, r3) => r1 * r2 + r3
-            else *+
-         val *- =
-            if isBytecode
-               then fn (r1, r2, r3) => r1 * r2 - r3
-            else *-
+         val op *+ = op *+
+         val op *- = op *-
          val op * = op *
          val op + = op +
          val op - = op -
Index: basis-library/primitive/prim-mlton.sml
===================================================================
--- basis-library/primitive/prim-mlton.sml	(revision 7524)
+++ basis-library/primitive/prim-mlton.sml	(revision 7552)
@@ -1,4 +1,4 @@
-(* Copyright (C) 2010 Matthew Fluet.
+(* Copyright (C) 2010-2011 Matthew Fluet.
  * Copyright (C) 1999-2009 Henry Cejtin, Matthew Fluet, Suresh
  *    Jagannathan, and Stephen Weeks.
  * Copyright (C) 1997-2000 NEC Research Institute.
@@ -62,17 +62,15 @@
 
 structure Codegen =
    struct
-      datatype t = Bytecode | C | x86 | amd64
+      datatype t = amd64 | C | x86
 
       val codegen =
          case _build_const "MLton_Codegen_codegen": Int32.int; of
-            0 => Bytecode
-          | 1 => C
-          | 2 => x86
-          | 3 => amd64
+            0 => C
+          | 1 => x86
+          | 2 => amd64
           | _ => raise Primitive.Exn.Fail8 "MLton_Codegen_codegen"
 
-      val isBytecode = codegen = Bytecode
       val isC = codegen = C
       val isX86 = codegen = x86
       val isAmd64 = codegen = amd64
Index: doc/changelog
===================================================================
--- doc/changelog	(revision 7524)
+++ doc/changelog	(revision 7552)
@@ -1,5 +1,24 @@
 Here are the changes from version 2010608 to version YYYYMMDD.
 
+* 2011-06-14
+   - Fixed bug in SSA/SSA2 shrinker that could erroneously turn a
+     non-tail function call with a Bug transfer as its continuation
+     into a tail function call.
+
+* 2011-06-10
+   - Fixed bug in translation from SSA2 to RSSA with case expressions
+     over non-primitive-sized words.
+   - Fixed bug in SSA/SSA2 type checking of case expressions over
+     words.
+
+* 2011-06-04
+   - Remove bytecode codegen.
+   - Remove support for .cm files as input.
+
+* 2011-05-03
+   - Fixed a bug with the treatment of as-patterns, which should not
+     allow the redefinition of constructor status.
+
 * 2011-02-18
    - Fixed bug with treatment of nan in common subexpression
      elimination SSA optimization.
Index: doc/examples/finalizable/finalizable.sml
===================================================================
--- doc/examples/finalizable/finalizable.sml	(revision 7524)
+++ doc/examples/finalizable/finalizable.sml	(revision 7552)
@@ -8,15 +8,16 @@
    end
 
 functor CList (structure F: MLTON_FINALIZABLE
+               structure P: MLTON_POINTER
                structure Prim:
                   sig
-                     val cons: int * Word32.word -> Word32.word
-                     val free: Word32.word -> unit
-                     val sing: int -> Word32.word
-                     val sum: Word32.word -> int
+                     val cons: int * P.t -> P.t
+                     val free: P.t -> unit
+                     val sing: int -> P.t
+                     val sum: P.t -> int
                   end): CLIST =
    struct
-      type t = Word32.word F.t
+      type t = P.t F.t
 
       fun cons (n: int, l: t) =
          F.withValue
@@ -77,12 +78,13 @@
 
 structure CList =
    CList (structure F = MLton.Finalizable
+          structure P = MLton.Pointer
           structure Prim =
              struct
-                val cons = _import "listCons": int * Word32.word -> Word32.word;
-                val free = _import "listFree": Word32.word -> unit;
-                val sing = _import "listSing": int -> Word32.word;
-                val sum = _import "listSum": Word32.word -> int;
+                val cons = _import "listCons": int * P.t -> P.t;
+                val free = _import "listFree": P.t -> unit;
+                val sing = _import "listSing": int -> P.t;
+                val sum = _import "listSum": P.t -> int;
              end)
 
 structure S = Test (structure CList = CList
Index: lib/smlnj-lib/smlnj-lib.patch
===================================================================
--- lib/smlnj-lib/smlnj-lib.patch	(revision 7524)
+++ lib/smlnj-lib/smlnj-lib.patch	(revision 7552)
@@ -1,12554 +1,12869 @@
-diff -N -C 2 -r smlnj-lib/Controls/controls-lib.mlb smlnj-lib-mlton/Controls/controls-lib.mlb
-*** smlnj-lib/Controls/controls-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Controls/controls-lib.mlb	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,170 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l11 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = Option
+diff --git a/Controls/controls-lib.mlb b/Controls/controls-lib.mlb
+new file mode 100644
+index 0000000..90f2fa7
+--- /dev/null
++++ b/Controls/controls-lib.mlb
+@@ -0,0 +1,170 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = List
++  basis l11 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l11
-+    in
-+       structure gs_2 = Atom
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = Int
-+    end
-+    local
-+       controls-sig.sml
-+    in
-+       signature gs_4 = CONTROLS
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_5 = AtomTable
-+    end
-+    local
-+       structure Atom = gs_2
-+       structure AtomTable = gs_5
-+       structure Int = gs_3
-+       structure List = gs_1
-+       control-reps.sml
-+    in
-+       structure gs_6 = ControlReps
-+    end
-+    local
-+       structure Atom = gs_2
-+       signature CONTROLS = gs_4
-+       structure ControlReps = gs_6
-+       structure Int = gs_3
-+       structure List = gs_1
-+       structure Option = gs_0
-+       controls.sml
-+    in
-+       structure gs_7 = Controls
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_8 = ListMergeSort
-+    end
-+    local
-+       structure Atom = gs_2
-+       structure Controls = gs_7
-+       control-set-sig.sml
-+    in
-+       signature gs_9 = CONTROL_SET
-+    end
-+    local
-+       structure AtomTable = gs_5
-+       signature CONTROL_SET = gs_9
-+       structure ControlReps = gs_6
-+       structure Controls = gs_7
-+       structure ListMergeSort = gs_8
-+       structure Option = gs_0
-+       control-set.sml
-+    in
-+       structure gs_10 = ControlSet
-+    end
-+    local
-+       structure ControlSet = gs_10
-+       structure Controls = gs_7
-+       registry-sig.sml
-+    in
-+       signature gs_11 = CONTROL_REGISTRY
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_13 = Real
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_14 = Char
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_15 = Bool
-+    end
-+    local
-+       structure Controls = gs_7
-+       control-util-sig.sml
-+    in
-+       signature gs_16 = CONTROL_UTIL
-+    end
-+    local
-+       structure Bool = gs_15
-+       signature CONTROL_UTIL = gs_16
-+       structure Char = gs_14
-+       structure Controls = gs_7
-+       structure Int = gs_3
-+       structure List = gs_1
-+       structure Real = gs_13
-+       structure String = gs_12
-+       control-util.sml
-+    in
-+       structure gs_17 = ControlUtil
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_18 = OS
-+    end
-+    local
-+       structure Atom = gs_2
-+       structure AtomTable = gs_5
-+       signature CONTROL_REGISTRY = gs_11
-+       structure ControlReps = gs_6
-+       structure ControlSet = gs_10
-+       structure Controls = gs_7
-+       structure List = gs_1
-+       structure ListMergeSort = gs_8
-+       structure OS = gs_18
-+       registry.sml
-+    in
-+       structure gs_19 = ControlRegistry
-+    end
-+ in
-+    signature CONTROLS = gs_4
-+    signature CONTROL_REGISTRY = gs_11
-+    signature CONTROL_SET = gs_9
-+    signature CONTROL_UTIL = gs_16
-+    structure ControlRegistry = gs_19
-+    structure ControlSet = gs_10
-+    structure ControlUtil = gs_17
-+    structure Controls = gs_7
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/HTML/html-attrs-fn.sml smlnj-lib-mlton/HTML/html-attrs-fn.sml
-*** smlnj-lib/HTML/html-attrs-fn.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/HTML/html-attrs-fn.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 90,106 ****
-  		      Err.badAttrVal ctx (attrName, attrValToString attrVal);
-  		      NONE)
-! 		fun cvt (AT_IMPLICIT, IMPLICIT) = SOME IMPLICIT
-! 		  | cvt (AT_INSTANCE, IMPLICIT) = SOME(NAME attrName)
-! 		  | cvt (AT_TEXT, v) = SOME v
-! 		  | cvt (AT_NUMBER, v) = SOME v
-! 		  | cvt (AT_NAMES names, (NAME s | STRING s)) = (
-  		      case (List.find (eqName s) names)
-  		       of NONE => error()
-  			| (SOME name) => SOME(NAME name)
-  		      (* end case *))
-! 		  | cvt (AT_IMPLICIT, (NAME s | STRING s)) =
-  		      if (s = attrName)
-  			then SOME IMPLICIT
-  			else error()
-  		  | cvt _ = error()
-  		in
---- 90,111 ----
-  		      Err.badAttrVal ctx (attrName, attrValToString attrVal);
-  		      NONE)
-! 		fun atNames (names, s) = (
-  		      case (List.find (eqName s) names)
-  		       of NONE => error()
-  			| (SOME name) => SOME(NAME name)
-  		      (* end case *))
-! 		fun atImplicit (s) = 
-  		      if (s = attrName)
-  			then SOME IMPLICIT
-  			else error()
-+ 
-+ 		fun cvt (AT_IMPLICIT, IMPLICIT) = SOME IMPLICIT
-+ 		  | cvt (AT_INSTANCE, IMPLICIT) = SOME(NAME attrName)
-+ 		  | cvt (AT_TEXT, v) = SOME v
-+ 		  | cvt (AT_NUMBER, v) = SOME v
-+ 		  | cvt (AT_NAMES names, NAME s) = atNames (names, s)
-+ 		  | cvt (AT_NAMES names, STRING s) = atNames (names, s)
-+ 		  | cvt (AT_IMPLICIT, NAME s) = atImplicit (s)
-+ 		  | cvt (AT_IMPLICIT, STRING s) = atImplicit (s)
-  		  | cvt _ = error()
-  		in
-***************
-*** 139,143 ****
-  	  fun get attrVec = (case (getFn attrVec)
-  		 of NONE => NONE
-! 		  | (SOME((STRING s) | (NAME s))) => SOME s
-  		  | _ => (
-  		      Err.missingAttrVal (getContext attrVec) attr;
---- 144,149 ----
-  	  fun get attrVec = (case (getFn attrVec)
-  		 of NONE => NONE
-! 		  | SOME (STRING s) => SOME s
-! 		  | SOME (NAME s) => SOME s
-  		  | _ => (
-  		      Err.missingAttrVal (getContext attrVec) attr;
-***************
-*** 163,176 ****
-      fun getNUMBER (attrMap, attr) = let
-  	  val getFn = bindFindAttr (attrMap, attr)
-! 	  fun get attrVec = (case (getFn attrVec)
-  		 of NONE => NONE
-! 		  | (SOME((STRING s) | (NAME s))) => (case (Int.fromString s)
-! 		       of NONE =>  (
-! 			    Err.badAttrVal (getContext attrVec) (attr, s);
-! 			    NONE)
-! 			| someN => someN
-! 		      (* end case *))
-  		  | SOME IMPLICIT => raise Fail "getNUMBER: IMPLICIT unexpected"
-  		(* end case *))
-  	  in
-  	    get
---- 169,187 ----
-      fun getNUMBER (attrMap, attr) = let
-  	  val getFn = bindFindAttr (attrMap, attr)
-! 	  fun get attrVec = let
-! 	  fun doitStringName s = (case (Int.fromString s)
-! 		 of NONE =>  (
-! 		      Err.badAttrVal (getContext attrVec) (attr, s);
-! 		      NONE)
-! 		  | someN => someN
-! 		(* end case *))
-!           in 
-!              (case (getFn attrVec)
-  		 of NONE => NONE
-! 		  | SOME (STRING s) => doitStringName s
-! 		  | SOME (NAME s) => doitStringName s
-  		  | SOME IMPLICIT => raise Fail "getNUMBER: IMPLICIT unexpected"
-  		(* end case *))
-+           end
-  	  in
-  	    get
-***************
-*** 178,191 ****
-      fun getChar (attrMap, attr) = let
-  	  val getFn = bindFindAttr (attrMap, attr)
-! 	  fun get attrVec = (case (getFn attrVec)
-! 		 of NONE => NONE
-! 		  | (SOME((STRING s) | (NAME s))) =>
-! 		      if (size s = 1) then SOME(String.sub(s, 0))
-  (** NOTE: we should probably accept &#xx; as a character value **)
-! 			else  (
-! 			Err.badAttrVal (getContext attrVec) (attr, s);
-! 			NONE)
-  		  | SOME IMPLICIT => raise Fail "getChar: IMPLICIT unexpected"
-  		(* end case *))
-  	  in
-  	    get
---- 189,207 ----
-      fun getChar (attrMap, attr) = let
-  	  val getFn = bindFindAttr (attrMap, attr)
-! 	  fun get attrVec = let 
-! 	  fun doitStringName s =
-! 		if (size s = 1) then SOME(String.sub(s, 0))
-  (** NOTE: we should probably accept &#xx; as a character value **)
-! 		  else  (
-! 		  Err.badAttrVal (getContext attrVec) (attr, s);
-! 		  NONE)
-!           in 
-!              (case (getFn attrVec)
-! 		 of NONE => NONE
-! 		  | SOME (STRING s) => doitStringName s
-! 		  | SOME (NAME s) => doitStringName s
-  		  | SOME IMPLICIT => raise Fail "getChar: IMPLICIT unexpected"
-  		(* end case *))
-+ 	  end
-  	  in
-  	    get
-diff -N -C 2 -r smlnj-lib/HTML/html-elements-fn.sml smlnj-lib-mlton/HTML/html-elements-fn.sml
-*** smlnj-lib/HTML/html-elements-fn.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/HTML/html-elements-fn.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 145,149 ****
-     *)
-      fun scanAttrVal (ctx, attrName, ss) = let
-! 	  fun isNameChar (#"." | #"-") = true
-  	    | isNameChar c = (Char.isAlphaNum c)
-  	  in
---- 145,150 ----
-     *)
-      fun scanAttrVal (ctx, attrName, ss) = let
-! 	  fun isNameChar #"." = true
-! 	    | isNameChar #"-" = true
-  	    | isNameChar c = (Char.isAlphaNum c)
-  	  in
-diff -N -C 2 -r smlnj-lib/HTML/html-gram.desc smlnj-lib-mlton/HTML/html-gram.desc
-*** smlnj-lib/HTML/html-gram.desc	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HTML/html-gram.desc	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,6055 ----
-+ 
-+ state 0:
-+ 
-+ 	Document : . StartHTML Head Body EndHTML 
-+ 
-+ 	START_HTML	shift 2
-+ 
-+ 	Document	goto 282
-+ 	StartHTML	goto 1
-+ 
-+ 	.	reduce by rule 1
-+ 
-+ 
-+ state 1:
-+ 
-+ 	Document : StartHTML . Head Body EndHTML 
-+ 
-+ 	START_HEAD	shift 5
-+ 
-+ 	Head	goto 4
-+ 	StartHEAD	goto 3
-+ 
-+ 	.	reduce by rule 6
-+ 
-+ 
-+ state 2:
-+ 
-+ 	StartHTML : START_HTML .  (reduce by rule 2)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 2
-+ 
-+ 
-+ state 3:
-+ 
-+ 	Head : StartHEAD . HeadContents EndHEAD 
-+ 
-+ 	TAG_BASE	shift 14
-+ 	TAG_ISINDEX	shift 13
-+ 	TAG_LINK	shift 12
-+ 	TAG_META	shift 11
-+ 	START_SCRIPT	shift 10
-+ 	START_STYLE	shift 9
-+ 
-+ 	HeadContents	goto 8
-+ 	HeadElements	goto 7
-+ 	HeadElement	goto 6
-+ 
-+ 	.	reduce by rule 11
-+ 
-+ 
-+ state 4:
-+ 
-+ 	Document : StartHTML Head . Body EndHTML 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_BODY	shift 73
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	Body	goto 27
-+ 	BodyContent0	goto 26
-+ 	BodyElement	goto 25
-+ 	BlockWOIndex	goto 24
-+ 	Paragraph	goto 23
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 20
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 5:
-+ 
-+ 	StartHEAD : START_HEAD .  (reduce by rule 7)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 7
-+ 
-+ 
-+ state 6:
-+ 
-+ 	HeadElements : HeadElement . HeadElements 
-+ 
-+ 	TAG_BASE	shift 14
-+ 	TAG_ISINDEX	shift 13
-+ 	TAG_LINK	shift 12
-+ 	TAG_META	shift 11
-+ 	START_SCRIPT	shift 10
-+ 	START_STYLE	shift 9
-+ 
-+ 	HeadElements	goto 80
-+ 	HeadElement	goto 6
-+ 
-+ 	.	reduce by rule 11
-+ 
-+ 
-+ state 7:
-+ 
-+ 	HeadContents : HeadElements . START_TITLE PCData END_TITLE HeadElements 
-+ 
-+ 	START_TITLE	shift 81
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 8:
-+ 
-+ 	Head : StartHEAD HeadContents . EndHEAD 
-+ 
-+ 	END_HEAD	shift 83
-+ 
-+ 	EndHEAD	goto 82
-+ 
-+ 	.	reduce by rule 8
-+ 
-+ 
-+ state 9:
-+ 
-+ 	HeadElement : START_STYLE . PCData END_STYLE 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 86
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 10:
-+ 
-+ 	HeadElement : START_SCRIPT . PCData END_SCRIPT 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 87
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 11:
-+ 
-+ 	HeadElement : TAG_META .  (reduce by rule 13)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 13
-+ 
-+ 
-+ state 12:
-+ 
-+ 	HeadElement : TAG_LINK .  (reduce by rule 14)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 14
-+ 
-+ 
-+ state 13:
-+ 
-+ 	HeadElement : TAG_ISINDEX .  (reduce by rule 15)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 15
-+ 
-+ 
-+ state 14:
-+ 
-+ 	HeadElement : TAG_BASE .  (reduce by rule 16)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 16
-+ 
-+ 
-+ state 15:
-+ 
-+ 	TextWOScript : PCDataElem .  (reduce by rule 108)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 108
-+ 
-+ 
-+ state 16:
-+ 
-+ 	TextWOScript : Form .  (reduce by rule 112)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 112
-+ 
-+ 
-+ state 17:
-+ 
-+ 	TextWOScript : Special .  (reduce by rule 111)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 111
-+ 
-+ 
-+ state 18:
-+ 
-+ 	TextWOScript : Phrase .  (reduce by rule 110)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 110
-+ 
-+ 
-+ state 19:
-+ 
-+ 	TextWOScript : Font .  (reduce by rule 109)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 109
-+ 
-+ 
-+ state 20:
-+ 
-+ 	BodyContent0 : TextWOScript . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 94
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 21:
-+ 
-+ 	BlockWOIndex : Preformatted .  (reduce by rule 55)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 55
-+ 
-+ 
-+ state 22:
-+ 
-+ 	BlockWOIndex : List .  (reduce by rule 54)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 54
-+ 
-+ 
-+ state 23:
-+ 
-+ 	BodyContent0 : Paragraph . END_P BodyContent1 
-+ 	BodyContent0 : Paragraph . BodyContent2 
-+ 
-+ 	START_ADDRESS	shift 78
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_CENTER	shift 71
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	TAG_ISINDEX	shift 96
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	END_P	shift 101
-+ 	START_PRE	shift 44
-+ 	START_TABLE	shift 36
-+ 	START_UL	shift 32
-+ 
-+ 	BodyContent2	goto 100
-+ 	BodyElement	goto 99
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 98
-+ 	Paragraph	goto 97
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 
-+ 	.	reduce by rule 35
-+ 
-+ 
-+ state 24:
-+ 
-+ 	BodyContent0 : BlockWOIndex . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 102
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 25:
-+ 
-+ 	BodyContent0 : BodyElement . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 103
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 26:
-+ 
-+ 	Body : BodyContent0 . EndBODY 
-+ 
-+ 	END_BODY	shift 105
-+ 
-+ 	EndBODY	goto 104
-+ 
-+ 	.	reduce by rule 20
-+ 
-+ 
-+ state 27:
-+ 
-+ 	Document : StartHTML Head Body . EndHTML 
-+ 
-+ 	END_HTML	shift 107
-+ 
-+ 	EndHTML	goto 106
-+ 
-+ 	.	reduce by rule 3
-+ 
-+ 
-+ state 28:
-+ 
-+ 	PCDataElem : ENTITY_REF .  (reduce by rule 154)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 154
-+ 
-+ 
-+ state 29:
-+ 
-+ 	PCDataElem : CHAR_REF .  (reduce by rule 153)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 153
-+ 
-+ 
-+ state 30:
-+ 
-+ 	PCDataElem : PCDATA .  (reduce by rule 152)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 152
-+ 
-+ 
-+ state 31:
-+ 
-+ 	Phrase : START_VAR . TextList END_VAR 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 110
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 32:
-+ 
-+ 	List : START_UL . ListItemList END_UL 
-+ 
-+ 	START_LI	shift 113
-+ 
-+ 	ListItemList	goto 112
-+ 	ListItem	goto 111
-+ 
-+ 	.	reduce by rule 70
-+ 
-+ 
-+ state 33:
-+ 
-+ 	Font : START_U . TextList END_U 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 114
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 34:
-+ 
-+ 	Font : START_TT . TextList END_TT 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 115
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 35:
-+ 
-+ 	Form : START_TEXTAREA . PCData END_TEXTAREA 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 116
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 36:
-+ 
-+ 	BlockWOIndex : START_TABLE . optCaption TableRowList END_TABLE 
-+ 
-+ 	START_CAPTION	shift 118
-+ 
-+ 	optCaption	goto 117
-+ 
-+ 	.	reduce by rule 93
-+ 
-+ 
-+ state 37:
-+ 
-+ 	Font : START_SUP . TextList END_SUP 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 119
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 38:
-+ 
-+ 	Font : START_SUB . TextList END_SUB 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 120
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 39:
-+ 
-+ 	Phrase : START_STRONG . TextList END_STRONG 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 121
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 40:
-+ 
-+ 	Font : START_STRIKE . TextList END_STRIKE 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 122
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 41:
-+ 
-+ 	Font : START_SMALL . TextList END_SMALL 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 123
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 42:
-+ 
-+ 	Form : START_SELECT . OptionList END_SELECT 
-+ 
-+ 	START_OPTION	shift 125
-+ 
-+ 	OptionList	goto 124
-+ 
-+ 	.	reduce by rule 145
-+ 
-+ 
-+ state 43:
-+ 
-+ 	Phrase : START_SAMP . TextList END_SAMP 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 126
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 44:
-+ 
-+ 	Preformatted : START_PRE . TextList END_PRE 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 127
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 45:
-+ 
-+ 	Special : TAG_PARAM .  (reduce by rule 139)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 139
-+ 
-+ 
-+ state 46:
-+ 
-+ 	Paragraph : START_P . TextList 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 128
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 47:
-+ 
-+ 	List : START_OL . ListItemList END_OL 
-+ 
-+ 	START_LI	shift 113
-+ 
-+ 	ListItemList	goto 129
-+ 	ListItem	goto 111
-+ 
-+ 	.	reduce by rule 70
-+ 
-+ 
-+ state 48:
-+ 
-+ 	List : START_MENU . ListItemList END_MENU 
-+ 
-+ 	START_LI	shift 113
-+ 
-+ 	ListItemList	goto 130
-+ 	ListItem	goto 111
-+ 
-+ 	.	reduce by rule 70
-+ 
-+ 
-+ state 49:
-+ 
-+ 	Special : START_MAP . AreaList END_MAP 
-+ 
-+ 	TAG_AREA	shift 132
-+ 
-+ 	AreaList	goto 131
-+ 
-+ 	.	reduce by rule 140
-+ 
-+ 
-+ state 50:
-+ 
-+ 	Phrase : START_KBD . TextList END_KBD 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 133
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 51:
-+ 
-+ 	Form : TAG_INPUT .  (reduce by rule 142)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 142
-+ 
-+ 
-+ state 52:
-+ 
-+ 	Special : TAG_IMG .  (reduce by rule 133)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 133
-+ 
-+ 
-+ state 53:
-+ 
-+ 	Font : START_I . TextList END_I 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 134
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 54:
-+ 
-+ 	BlockWOIndex : TAG_HR .  (reduce by rule 60)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 60
-+ 
-+ 
-+ state 55:
-+ 
-+ 	BodyElement : START_H6 . TextList END_H6 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 135
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 56:
-+ 
-+ 	BodyElement : START_H5 . TextList END_H5 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 136
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 57:
-+ 
-+ 	BodyElement : START_H4 . TextList END_H4 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 137
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 58:
-+ 
-+ 	BodyElement : START_H3 . TextList END_H3 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 138
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 59:
-+ 
-+ 	BodyElement : START_H2 . TextList END_H2 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 139
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 60:
-+ 
-+ 	BodyElement : START_H1 . TextList END_H1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 140
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 61:
-+ 
-+ 	BlockWOIndex : START_FORM . BodyContent END_FORM 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 142
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 62:
-+ 
-+ 	Special : START_BASEFONT . TextList END_BASEFONT 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 143
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 63:
-+ 
-+ 	Special : START_FONT . TextList END_FONT 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 144
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 64:
-+ 
-+ 	Phrase : START_EM . TextList END_EM 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 145
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 65:
-+ 
-+ 	List : START_DL . DLItemList END_DL 
-+ 
-+ 	START_DD	shift 149
-+ 	START_DT	shift 148
-+ 
-+ 	DLItemList	goto 147
-+ 	DLItem	goto 146
-+ 
-+ 	.	reduce by rule 73
-+ 
-+ 
-+ state 66:
-+ 
-+ 	BlockWOIndex : START_DIV . BodyContent END_DIV 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 150
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 67:
-+ 
-+ 	List : START_DIR . ListItemList END_DIR 
-+ 
-+ 	START_LI	shift 113
-+ 
-+ 	ListItemList	goto 151
-+ 	ListItem	goto 111
-+ 
-+ 	.	reduce by rule 70
-+ 
-+ 
-+ state 68:
-+ 
-+ 	Phrase : START_DFN . TextList END_DFN 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 152
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 69:
-+ 
-+ 	Phrase : START_CODE . TextList END_CODE 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 153
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 70:
-+ 
-+ 	Phrase : START_CITE . TextList END_CITE 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 154
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 71:
-+ 
-+ 	BlockWOIndex : START_CENTER . BodyContent END_CENTER 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 155
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 72:
-+ 
-+ 	Special : TAG_BR .  (reduce by rule 137)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 137
-+ 
-+ 
-+ state 73:
-+ 
-+ 	BodyContent0 : START_BODY . BodyContent 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 156
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 74:
-+ 
-+ 	BlockWOIndex : START_BLOCKQUOTE . BodyContent END_BLOCKQUOTE 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 157
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 75:
-+ 
-+ 	Font : START_BIG . TextList END_BIG 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 158
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 76:
-+ 
-+ 	Font : START_B . TextList END_B 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 159
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 77:
-+ 
-+ 	Special : START_APPLET . TextList END_APPLET 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 160
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 78:
-+ 
-+ 	BodyElement : START_ADDRESS . AddressContent1 END_ADDRESS 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	AddressContent1	goto 163
-+ 	Paragraph	goto 162
-+ 	TextWOScript	goto 89
-+ 	Text	goto 161
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 47
-+ 
-+ 
-+ state 79:
-+ 
-+ 	Special : START_A . TextList END_A 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 164
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 80:
-+ 
-+ 	HeadElements : HeadElement HeadElements .  (reduce by rule 12)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 12
-+ 
-+ 
-+ state 81:
-+ 
-+ 	HeadContents : HeadElements START_TITLE . PCData END_TITLE HeadElements 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 165
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 82:
-+ 
-+ 	Head : StartHEAD HeadContents EndHEAD .  (reduce by rule 5)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 5
-+ 
-+ 
-+ state 83:
-+ 
-+ 	EndHEAD : END_HEAD .  (reduce by rule 9)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 9
-+ 
-+ 
-+ state 84:
-+ 
-+ 	PCDataList : PCDataElem . PCDataList 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCDataList	goto 166
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 85:
-+ 
-+ 	PCData : PCDataList .  (reduce by rule 149)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 149
-+ 
-+ 
-+ state 86:
-+ 
-+ 	HeadElement : START_STYLE PCData . END_STYLE 
-+ 
-+ 	END_STYLE	shift 167
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 87:
-+ 
-+ 	HeadElement : START_SCRIPT PCData . END_SCRIPT 
-+ 
-+ 	END_SCRIPT	shift 168
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 88:
-+ 
-+ 	BodyContent1 : Text . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 169
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 89:
-+ 
-+ 	Text : TextWOScript .  (reduce by rule 113)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 113
-+ 
-+ 
-+ state 90:
-+ 
-+ 	BodyContent1 : Paragraph . END_P BodyContent1 
-+ 	BodyContent1 : Paragraph . BodyContent2 
-+ 
-+ 	START_ADDRESS	shift 78
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_CENTER	shift 71
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	TAG_ISINDEX	shift 96
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	END_P	shift 171
-+ 	START_PRE	shift 44
-+ 	START_TABLE	shift 36
-+ 	START_UL	shift 32
-+ 
-+ 	BodyContent2	goto 170
-+ 	BodyElement	goto 99
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 98
-+ 	Paragraph	goto 97
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 
-+ 	.	reduce by rule 35
-+ 
-+ 
-+ state 91:
-+ 
-+ 	BodyContent1 : Block . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 172
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 92:
-+ 
-+ 	Block : BlockWOIndex .  (reduce by rule 62)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 62
-+ 
-+ 
-+ state 93:
-+ 
-+ 	BodyContent1 : BodyElement . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 173
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 94:
-+ 
-+ 	BodyContent0 : TextWOScript BodyContent1 .  (reduce by rule 24)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 24
-+ 
-+ 
-+ state 95:
-+ 
-+ 	Text : START_SCRIPT . PCData END_SCRIPT 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 174
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 96:
-+ 
-+ 	Block : TAG_ISINDEX .  (reduce by rule 63)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 63
-+ 
-+ 
-+ state 97:
-+ 
-+ 	BodyContent2 : Paragraph . END_P BodyContent1 
-+ 	BodyContent2 : Paragraph . BodyContent2 
-+ 
-+ 	START_ADDRESS	shift 78
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_CENTER	shift 71
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	TAG_ISINDEX	shift 96
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	END_P	shift 176
-+ 	START_PRE	shift 44
-+ 	START_TABLE	shift 36
-+ 	START_UL	shift 32
-+ 
-+ 	BodyContent2	goto 175
-+ 	BodyElement	goto 99
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 98
-+ 	Paragraph	goto 97
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 
-+ 	.	reduce by rule 35
-+ 
-+ 
-+ state 98:
-+ 
-+ 	BodyContent2 : Block . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 177
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 99:
-+ 
-+ 	BodyContent2 : BodyElement . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 178
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 100:
-+ 
-+ 	BodyContent0 : Paragraph BodyContent2 .  (reduce by rule 28)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 28
-+ 
-+ 
-+ state 101:
-+ 
-+ 	BodyContent0 : Paragraph END_P . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 179
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 102:
-+ 
-+ 	BodyContent0 : BlockWOIndex BodyContent1 .  (reduce by rule 26)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 26
-+ 
-+ 
-+ state 103:
-+ 
-+ 	BodyContent0 : BodyElement BodyContent1 .  (reduce by rule 25)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 25
-+ 
-+ 
-+ state 104:
-+ 
-+ 	Body : BodyContent0 EndBODY .  (reduce by rule 19)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 19
-+ 
-+ 
-+ state 105:
-+ 
-+ 	EndBODY : END_BODY .  (reduce by rule 21)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 21
-+ 
-+ 
-+ state 106:
-+ 
-+ 	Document : StartHTML Head Body EndHTML .  (reduce by rule 0)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 0
-+ 
-+ 
-+ state 107:
-+ 
-+ 	EndHTML : END_HTML .  (reduce by rule 4)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 4
-+ 
-+ 
-+ state 108:
-+ 
-+ 	TextList' : Text . TextList' 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList'	goto 180
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 109:
-+ 
-+ 	TextList : TextList' .  (reduce by rule 105)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 105
-+ 
-+ 
-+ state 110:
-+ 
-+ 	Phrase : START_VAR TextList . END_VAR 
-+ 
-+ 	END_VAR	shift 181
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 111:
-+ 
-+ 	ListItemList : ListItem . ListItemList 
-+ 
-+ 	START_LI	shift 113
-+ 
-+ 	ListItemList	goto 182
-+ 	ListItem	goto 111
-+ 
-+ 	.	reduce by rule 70
-+ 
-+ 
-+ state 112:
-+ 
-+ 	List : START_UL ListItemList . END_UL 
-+ 
-+ 	END_UL	shift 183
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 113:
-+ 
-+ 	ListItem : START_LI . Flow1 EndLI 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 185
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 114:
-+ 
-+ 	Font : START_U TextList . END_U 
-+ 
-+ 	END_U	shift 188
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 115:
-+ 
-+ 	Font : START_TT TextList . END_TT 
-+ 
-+ 	END_TT	shift 189
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 116:
-+ 
-+ 	Form : START_TEXTAREA PCData . END_TEXTAREA 
-+ 
-+ 	END_TEXTAREA	shift 190
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 117:
-+ 
-+ 	BlockWOIndex : START_TABLE optCaption . TableRowList END_TABLE 
-+ 
-+ 	START_TR	shift 193
-+ 
-+ 	TableRowList	goto 192
-+ 	TableRow	goto 191
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 118:
-+ 
-+ 	optCaption : START_CAPTION . TextList END_CAPTION 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 194
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 119:
-+ 
-+ 	Font : START_SUP TextList . END_SUP 
-+ 
-+ 	END_SUP	shift 195
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 120:
-+ 
-+ 	Font : START_SUB TextList . END_SUB 
-+ 
-+ 	END_SUB	shift 196
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 121:
-+ 
-+ 	Phrase : START_STRONG TextList . END_STRONG 
-+ 
-+ 	END_STRONG	shift 197
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 122:
-+ 
-+ 	Font : START_STRIKE TextList . END_STRIKE 
-+ 
-+ 	END_STRIKE	shift 198
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 123:
-+ 
-+ 	Font : START_SMALL TextList . END_SMALL 
-+ 
-+ 	END_SMALL	shift 199
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 124:
-+ 
-+ 	Form : START_SELECT OptionList . END_SELECT 
-+ 
-+ 	END_SELECT	shift 200
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 125:
-+ 
-+ 	OptionList : START_OPTION . PCData EndOPTION OptionList 
-+ 
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	PCData	goto 201
-+ 	PCDataList	goto 85
-+ 	PCDataElem	goto 84
-+ 
-+ 	.	reduce by rule 150
-+ 
-+ 
-+ state 126:
-+ 
-+ 	Phrase : START_SAMP TextList . END_SAMP 
-+ 
-+ 	END_SAMP	shift 202
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 127:
-+ 
-+ 	Preformatted : START_PRE TextList . END_PRE 
-+ 
-+ 	END_PRE	shift 203
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 128:
-+ 
-+ 	Paragraph : START_P TextList .  (reduce by rule 64)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 64
-+ 
-+ 
-+ state 129:
-+ 
-+ 	List : START_OL ListItemList . END_OL 
-+ 
-+ 	END_OL	shift 204
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 130:
-+ 
-+ 	List : START_MENU ListItemList . END_MENU 
-+ 
-+ 	END_MENU	shift 205
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 131:
-+ 
-+ 	Special : START_MAP AreaList . END_MAP 
-+ 
-+ 	END_MAP	shift 206
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 132:
-+ 
-+ 	AreaList : TAG_AREA . AreaList 
-+ 
-+ 	TAG_AREA	shift 132
-+ 
-+ 	AreaList	goto 207
-+ 
-+ 	.	reduce by rule 140
-+ 
-+ 
-+ state 133:
-+ 
-+ 	Phrase : START_KBD TextList . END_KBD 
-+ 
-+ 	END_KBD	shift 208
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 134:
-+ 
-+ 	Font : START_I TextList . END_I 
-+ 
-+ 	END_I	shift 209
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 135:
-+ 
-+ 	BodyElement : START_H6 TextList . END_H6 
-+ 
-+ 	END_H6	shift 210
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 136:
-+ 
-+ 	BodyElement : START_H5 TextList . END_H5 
-+ 
-+ 	END_H5	shift 211
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 137:
-+ 
-+ 	BodyElement : START_H4 TextList . END_H4 
-+ 
-+ 	END_H4	shift 212
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 138:
-+ 
-+ 	BodyElement : START_H3 TextList . END_H3 
-+ 
-+ 	END_H3	shift 213
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 139:
-+ 
-+ 	BodyElement : START_H2 TextList . END_H2 
-+ 
-+ 	END_H2	shift 214
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 140:
-+ 
-+ 	BodyElement : START_H1 TextList . END_H1 
-+ 
-+ 	END_H1	shift 215
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 141:
-+ 
-+ 	BodyContent : BodyContent1 .  (reduce by rule 22)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 22
-+ 
-+ 
-+ state 142:
-+ 
-+ 	BlockWOIndex : START_FORM BodyContent . END_FORM 
-+ 
-+ 	END_FORM	shift 216
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 143:
-+ 
-+ 	Special : START_BASEFONT TextList . END_BASEFONT 
-+ 
-+ 	END_BASEFONT	shift 217
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 144:
-+ 
-+ 	Special : START_FONT TextList . END_FONT 
-+ 
-+ 	END_FONT	shift 218
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 145:
-+ 
-+ 	Phrase : START_EM TextList . END_EM 
-+ 
-+ 	END_EM	shift 219
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 146:
-+ 
-+ 	DLItemList : DLItem . DLItemList 
-+ 
-+ 	START_DD	shift 149
-+ 	START_DT	shift 148
-+ 
-+ 	DLItemList	goto 220
-+ 	DLItem	goto 146
-+ 
-+ 	.	reduce by rule 73
-+ 
-+ 
-+ state 147:
-+ 
-+ 	List : START_DL DLItemList . END_DL 
-+ 
-+ 	END_DL	shift 221
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 148:
-+ 
-+ 	DLItem : START_DT . TextList EndDT 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	TextList	goto 222
-+ 	TextList'	goto 109
-+ 	TextWOScript	goto 89
-+ 	Text	goto 108
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 106
-+ 
-+ 
-+ state 149:
-+ 
-+ 	DLItem : START_DD . Flow1 EndDD 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 223
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 150:
-+ 
-+ 	BlockWOIndex : START_DIV BodyContent . END_DIV 
-+ 
-+ 	END_DIV	shift 224
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 151:
-+ 
-+ 	List : START_DIR ListItemList . END_DIR 
-+ 
-+ 	END_DIR	shift 225
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 152:
-+ 
-+ 	Phrase : START_DFN TextList . END_DFN 
-+ 
-+ 	END_DFN	shift 226
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 153:
-+ 
-+ 	Phrase : START_CODE TextList . END_CODE 
-+ 
-+ 	END_CODE	shift 227
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 154:
-+ 
-+ 	Phrase : START_CITE TextList . END_CITE 
-+ 
-+ 	END_CITE	shift 228
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 155:
-+ 
-+ 	BlockWOIndex : START_CENTER BodyContent . END_CENTER 
-+ 
-+ 	END_CENTER	shift 229
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 156:
-+ 
-+ 	BodyContent0 : START_BODY BodyContent .  (reduce by rule 23)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 23
-+ 
-+ 
-+ state 157:
-+ 
-+ 	BlockWOIndex : START_BLOCKQUOTE BodyContent . END_BLOCKQUOTE 
-+ 
-+ 	END_BLOCKQUOTE	shift 230
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 158:
-+ 
-+ 	Font : START_BIG TextList . END_BIG 
-+ 
-+ 	END_BIG	shift 231
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 159:
-+ 
-+ 	Font : START_B TextList . END_B 
-+ 
-+ 	END_B	shift 232
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 160:
-+ 
-+ 	Special : START_APPLET TextList . END_APPLET 
-+ 
-+ 	END_APPLET	shift 233
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 161:
-+ 
-+ 	AddressContent1 : Text . AddressContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	AddressContent1	goto 234
-+ 	Paragraph	goto 162
-+ 	TextWOScript	goto 89
-+ 	Text	goto 161
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 47
-+ 
-+ 
-+ state 162:
-+ 
-+ 	AddressContent1 : Paragraph . END_P AddressContent1 
-+ 	AddressContent1 : Paragraph . AddressContent2 
-+ 
-+ 	START_P	shift 46
-+ 	END_P	shift 237
-+ 
-+ 	AddressContent2	goto 236
-+ 	Paragraph	goto 235
-+ 
-+ 	.	reduce by rule 51
-+ 
-+ 
-+ state 163:
-+ 
-+ 	BodyElement : START_ADDRESS AddressContent1 . END_ADDRESS 
-+ 
-+ 	END_ADDRESS	shift 238
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 164:
-+ 
-+ 	Special : START_A TextList . END_A 
-+ 
-+ 	END_A	shift 239
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 165:
-+ 
-+ 	HeadContents : HeadElements START_TITLE PCData . END_TITLE HeadElements 
-+ 
-+ 	END_TITLE	shift 240
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 166:
-+ 
-+ 	PCDataList : PCDataElem PCDataList .  (reduce by rule 151)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 151
-+ 
-+ 
-+ state 167:
-+ 
-+ 	HeadElement : START_STYLE PCData END_STYLE .  (reduce by rule 17)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 17
-+ 
-+ 
-+ state 168:
-+ 
-+ 	HeadElement : START_SCRIPT PCData END_SCRIPT .  (reduce by rule 18)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 18
-+ 
-+ 
-+ state 169:
-+ 
-+ 	BodyContent1 : Text BodyContent1 .  (reduce by rule 30)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 30
-+ 
-+ 
-+ state 170:
-+ 
-+ 	BodyContent1 : Paragraph BodyContent2 .  (reduce by rule 34)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 34
-+ 
-+ 
-+ state 171:
-+ 
-+ 	BodyContent1 : Paragraph END_P . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 241
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 172:
-+ 
-+ 	BodyContent1 : Block BodyContent1 .  (reduce by rule 32)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 32
-+ 
-+ 
-+ state 173:
-+ 
-+ 	BodyContent1 : BodyElement BodyContent1 .  (reduce by rule 31)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 31
-+ 
-+ 
-+ state 174:
-+ 
-+ 	Text : START_SCRIPT PCData . END_SCRIPT 
-+ 
-+ 	END_SCRIPT	shift 242
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 175:
-+ 
-+ 	BodyContent2 : Paragraph BodyContent2 .  (reduce by rule 39)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 39
-+ 
-+ 
-+ state 176:
-+ 
-+ 	BodyContent2 : Paragraph END_P . BodyContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent1	goto 243
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 177:
-+ 
-+ 	BodyContent2 : Block BodyContent1 .  (reduce by rule 37)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 37
-+ 
-+ 
-+ state 178:
-+ 
-+ 	BodyContent2 : BodyElement BodyContent1 .  (reduce by rule 36)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 36
-+ 
-+ 
-+ state 179:
-+ 
-+ 	BodyContent0 : Paragraph END_P BodyContent1 .  (reduce by rule 27)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 27
-+ 
-+ 
-+ state 180:
-+ 
-+ 	TextList' : Text TextList' .  (reduce by rule 107)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 107
-+ 
-+ 
-+ state 181:
-+ 
-+ 	Phrase : START_VAR TextList END_VAR .  (reduce by rule 130)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 130
-+ 
-+ 
-+ state 182:
-+ 
-+ 	ListItemList : ListItem ListItemList .  (reduce by rule 71)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 71
-+ 
-+ 
-+ state 183:
-+ 
-+ 	List : START_UL ListItemList END_UL .  (reduce by rule 65)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 65
-+ 
-+ 
-+ state 184:
-+ 
-+ 	Flow1 : Text . Flow1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 244
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 185:
-+ 
-+ 	ListItem : START_LI Flow1 . EndLI 
-+ 
-+ 	END_LI	shift 246
-+ 
-+ 	EndLI	goto 245
-+ 
-+ 	.	reduce by rule 86
-+ 
-+ 
-+ state 186:
-+ 
-+ 	Flow1 : Paragraph . END_P Flow1 
-+ 	Flow1 : Paragraph . Flow2 
-+ 
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_CENTER	shift 71
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	TAG_ISINDEX	shift 96
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	END_P	shift 250
-+ 	START_PRE	shift 44
-+ 	START_TABLE	shift 36
-+ 	START_UL	shift 32
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 249
-+ 	Paragraph	goto 248
-+ 	List	goto 22
-+ 	Flow2	goto 247
-+ 	Preformatted	goto 21
-+ 
-+ 	.	reduce by rule 82
-+ 
-+ 
-+ state 187:
-+ 
-+ 	Flow1 : Block . Flow1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 251
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 188:
-+ 
-+ 	Font : START_U TextList END_U .  (reduce by rule 118)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 118
-+ 
-+ 
-+ state 189:
-+ 
-+ 	Font : START_TT TextList END_TT .  (reduce by rule 115)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 115
-+ 
-+ 
-+ state 190:
-+ 
-+ 	Form : START_TEXTAREA PCData END_TEXTAREA .  (reduce by rule 144)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 144
-+ 
-+ 
-+ state 191:
-+ 
-+ 	TableRowList : TableRow .  (reduce by rule 95)
-+ 	TableRowList : TableRow . TableRowList 
-+ 
-+ 	START_TR	shift 193
-+ 
-+ 	TableRowList	goto 252
-+ 	TableRow	goto 191
-+ 
-+ 	.	reduce by rule 95
-+ 
-+ 
-+ state 192:
-+ 
-+ 	BlockWOIndex : START_TABLE optCaption TableRowList . END_TABLE 
-+ 
-+ 	END_TABLE	shift 253
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 193:
-+ 
-+ 	TableRow : START_TR . TableCellList 
-+ 	TableRow : START_TR . TableCellList END_TR 
-+ 
-+ 	START_TD	shift 257
-+ 	START_TH	shift 256
-+ 
-+ 	TableCellList	goto 255
-+ 	TableCell	goto 254
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 194:
-+ 
-+ 	optCaption : START_CAPTION TextList . END_CAPTION 
-+ 
-+ 	END_CAPTION	shift 258
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 195:
-+ 
-+ 	Font : START_SUP TextList END_SUP .  (reduce by rule 123)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 123
-+ 
-+ 
-+ state 196:
-+ 
-+ 	Font : START_SUB TextList END_SUB .  (reduce by rule 122)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 122
-+ 
-+ 
-+ state 197:
-+ 
-+ 	Phrase : START_STRONG TextList END_STRONG .  (reduce by rule 125)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 125
-+ 
-+ 
-+ state 198:
-+ 
-+ 	Font : START_STRIKE TextList END_STRIKE .  (reduce by rule 119)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 119
-+ 
-+ 
-+ state 199:
-+ 
-+ 	Font : START_SMALL TextList END_SMALL .  (reduce by rule 121)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 121
-+ 
-+ 
-+ state 200:
-+ 
-+ 	Form : START_SELECT OptionList END_SELECT .  (reduce by rule 143)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 143
-+ 
-+ 
-+ state 201:
-+ 
-+ 	OptionList : START_OPTION PCData . EndOPTION OptionList 
-+ 
-+ 	END_OPTION	shift 260
-+ 
-+ 	EndOPTION	goto 259
-+ 
-+ 	.	reduce by rule 147
-+ 
-+ 
-+ state 202:
-+ 
-+ 	Phrase : START_SAMP TextList END_SAMP .  (reduce by rule 128)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 128
-+ 
-+ 
-+ state 203:
-+ 
-+ 	Preformatted : START_PRE TextList END_PRE .  (reduce by rule 92)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 92
-+ 
-+ 
-+ state 204:
-+ 
-+ 	List : START_OL ListItemList END_OL .  (reduce by rule 66)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 66
-+ 
-+ 
-+ state 205:
-+ 
-+ 	List : START_MENU ListItemList END_MENU .  (reduce by rule 68)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 68
-+ 
-+ 
-+ state 206:
-+ 
-+ 	Special : START_MAP AreaList END_MAP .  (reduce by rule 138)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 138
-+ 
-+ 
-+ state 207:
-+ 
-+ 	AreaList : TAG_AREA AreaList .  (reduce by rule 141)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 141
-+ 
-+ 
-+ state 208:
-+ 
-+ 	Phrase : START_KBD TextList END_KBD .  (reduce by rule 129)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 129
-+ 
-+ 
-+ state 209:
-+ 
-+ 	Font : START_I TextList END_I .  (reduce by rule 116)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 116
-+ 
-+ 
-+ state 210:
-+ 
-+ 	BodyElement : START_H6 TextList END_H6 .  (reduce by rule 45)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 45
-+ 
-+ 
-+ state 211:
-+ 
-+ 	BodyElement : START_H5 TextList END_H5 .  (reduce by rule 44)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 44
-+ 
-+ 
-+ state 212:
-+ 
-+ 	BodyElement : START_H4 TextList END_H4 .  (reduce by rule 43)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 43
-+ 
-+ 
-+ state 213:
-+ 
-+ 	BodyElement : START_H3 TextList END_H3 .  (reduce by rule 42)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 42
-+ 
-+ 
-+ state 214:
-+ 
-+ 	BodyElement : START_H2 TextList END_H2 .  (reduce by rule 41)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 41
-+ 
-+ 
-+ state 215:
-+ 
-+ 	BodyElement : START_H1 TextList END_H1 .  (reduce by rule 40)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 40
-+ 
-+ 
-+ state 216:
-+ 
-+ 	BlockWOIndex : START_FORM BodyContent END_FORM .  (reduce by rule 59)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 59
-+ 
-+ 
-+ state 217:
-+ 
-+ 	Special : START_BASEFONT TextList END_BASEFONT .  (reduce by rule 136)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 136
-+ 
-+ 
-+ state 218:
-+ 
-+ 	Special : START_FONT TextList END_FONT .  (reduce by rule 135)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 135
-+ 
-+ 
-+ state 219:
-+ 
-+ 	Phrase : START_EM TextList END_EM .  (reduce by rule 124)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 124
-+ 
-+ 
-+ state 220:
-+ 
-+ 	DLItemList : DLItem DLItemList .  (reduce by rule 74)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 74
-+ 
-+ 
-+ state 221:
-+ 
-+ 	List : START_DL DLItemList END_DL .  (reduce by rule 69)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 69
-+ 
-+ 
-+ state 222:
-+ 
-+ 	DLItem : START_DT TextList . EndDT 
-+ 
-+ 	END_DT	shift 262
-+ 
-+ 	EndDT	goto 261
-+ 
-+ 	.	reduce by rule 88
-+ 
-+ 
-+ state 223:
-+ 
-+ 	DLItem : START_DD Flow1 . EndDD 
-+ 
-+ 	END_DD	shift 264
-+ 
-+ 	EndDD	goto 263
-+ 
-+ 	.	reduce by rule 90
-+ 
-+ 
-+ state 224:
-+ 
-+ 	BlockWOIndex : START_DIV BodyContent END_DIV .  (reduce by rule 56)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 56
-+ 
-+ 
-+ state 225:
-+ 
-+ 	List : START_DIR ListItemList END_DIR .  (reduce by rule 67)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 67
-+ 
-+ 
-+ state 226:
-+ 
-+ 	Phrase : START_DFN TextList END_DFN .  (reduce by rule 127)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 127
-+ 
-+ 
-+ state 227:
-+ 
-+ 	Phrase : START_CODE TextList END_CODE .  (reduce by rule 126)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 126
-+ 
-+ 
-+ state 228:
-+ 
-+ 	Phrase : START_CITE TextList END_CITE .  (reduce by rule 131)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 131
-+ 
-+ 
-+ state 229:
-+ 
-+ 	BlockWOIndex : START_CENTER BodyContent END_CENTER .  (reduce by rule 57)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 57
-+ 
-+ 
-+ state 230:
-+ 
-+ 	BlockWOIndex : START_BLOCKQUOTE BodyContent END_BLOCKQUOTE .  (reduce by rule 58)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 58
-+ 
-+ 
-+ state 231:
-+ 
-+ 	Font : START_BIG TextList END_BIG .  (reduce by rule 120)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 120
-+ 
-+ 
-+ state 232:
-+ 
-+ 	Font : START_B TextList END_B .  (reduce by rule 117)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 117
-+ 
-+ 
-+ state 233:
-+ 
-+ 	Special : START_APPLET TextList END_APPLET .  (reduce by rule 134)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 134
-+ 
-+ 
-+ state 234:
-+ 
-+ 	AddressContent1 : Text AddressContent1 .  (reduce by rule 48)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 48
-+ 
-+ 
-+ state 235:
-+ 
-+ 	AddressContent2 : Paragraph . END_P AddressContent1 
-+ 	AddressContent2 : Paragraph . AddressContent2 
-+ 
-+ 	START_P	shift 46
-+ 	END_P	shift 266
-+ 
-+ 	AddressContent2	goto 265
-+ 	Paragraph	goto 235
-+ 
-+ 	.	reduce by rule 51
-+ 
-+ 
-+ state 236:
-+ 
-+ 	AddressContent1 : Paragraph AddressContent2 .  (reduce by rule 50)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 50
-+ 
-+ 
-+ state 237:
-+ 
-+ 	AddressContent1 : Paragraph END_P . AddressContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	AddressContent1	goto 267
-+ 	Paragraph	goto 162
-+ 	TextWOScript	goto 89
-+ 	Text	goto 161
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 47
-+ 
-+ 
-+ state 238:
-+ 
-+ 	BodyElement : START_ADDRESS AddressContent1 END_ADDRESS .  (reduce by rule 46)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 46
-+ 
-+ 
-+ state 239:
-+ 
-+ 	Special : START_A TextList END_A .  (reduce by rule 132)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 132
-+ 
-+ 
-+ state 240:
-+ 
-+ 	HeadContents : HeadElements START_TITLE PCData END_TITLE . HeadElements 
-+ 
-+ 	TAG_BASE	shift 14
-+ 	TAG_ISINDEX	shift 13
-+ 	TAG_LINK	shift 12
-+ 	TAG_META	shift 11
-+ 	START_SCRIPT	shift 10
-+ 	START_STYLE	shift 9
-+ 
-+ 	HeadElements	goto 268
-+ 	HeadElement	goto 6
-+ 
-+ 	.	reduce by rule 11
-+ 
-+ 
-+ state 241:
-+ 
-+ 	BodyContent1 : Paragraph END_P BodyContent1 .  (reduce by rule 33)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 33
-+ 
-+ 
-+ state 242:
-+ 
-+ 	Text : START_SCRIPT PCData END_SCRIPT .  (reduce by rule 114)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 114
-+ 
-+ 
-+ state 243:
-+ 
-+ 	BodyContent2 : Paragraph END_P BodyContent1 .  (reduce by rule 38)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 38
-+ 
-+ 
-+ state 244:
-+ 
-+ 	Flow1 : Text Flow1 .  (reduce by rule 78)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 78
-+ 
-+ 
-+ state 245:
-+ 
-+ 	ListItem : START_LI Flow1 EndLI .  (reduce by rule 72)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 72
-+ 
-+ 
-+ state 246:
-+ 
-+ 	EndLI : END_LI .  (reduce by rule 87)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 87
-+ 
-+ 
-+ state 247:
-+ 
-+ 	Flow1 : Paragraph Flow2 .  (reduce by rule 81)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 81
-+ 
-+ 
-+ state 248:
-+ 
-+ 	Flow2 : Paragraph . END_P Flow1 
-+ 	Flow2 : Paragraph . Flow2 
-+ 
-+ 	START_BLOCKQUOTE	shift 74
-+ 	START_CENTER	shift 71
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	TAG_ISINDEX	shift 96
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	END_P	shift 270
-+ 	START_PRE	shift 44
-+ 	START_TABLE	shift 36
-+ 	START_UL	shift 32
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 249
-+ 	Paragraph	goto 248
-+ 	List	goto 22
-+ 	Flow2	goto 269
-+ 	Preformatted	goto 21
-+ 
-+ 	.	reduce by rule 82
-+ 
-+ 
-+ state 249:
-+ 
-+ 	Flow2 : Block . Flow1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 271
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 250:
-+ 
-+ 	Flow1 : Paragraph END_P . Flow1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 272
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 251:
-+ 
-+ 	Flow1 : Block Flow1 .  (reduce by rule 79)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 79
-+ 
-+ 
-+ state 252:
-+ 
-+ 	TableRowList : TableRow TableRowList .  (reduce by rule 96)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 96
-+ 
-+ 
-+ state 253:
-+ 
-+ 	BlockWOIndex : START_TABLE optCaption TableRowList END_TABLE .  (reduce by rule 61)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 61
-+ 
-+ 
-+ state 254:
-+ 
-+ 	TableCellList : TableCell .  (reduce by rule 99)
-+ 	TableCellList : TableCell . TableCellList 
-+ 
-+ 	START_TD	shift 257
-+ 	START_TH	shift 256
-+ 
-+ 	TableCellList	goto 273
-+ 	TableCell	goto 254
-+ 
-+ 	.	reduce by rule 99
-+ 
-+ 
-+ state 255:
-+ 
-+ 	TableRow : START_TR TableCellList .  (reduce by rule 97)
-+ 	TableRow : START_TR TableCellList . END_TR 
-+ 
-+ 	END_TR	shift 274
-+ 
-+ 
-+ 	.	reduce by rule 97
-+ 
-+ 
-+ state 256:
-+ 
-+ 	TableCell : START_TH . BodyContent END_TH 
-+ 	TableCell : START_TH . BodyContent 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 275
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 257:
-+ 
-+ 	TableCell : START_TD . BodyContent END_TD 
-+ 	TableCell : START_TD . BodyContent 
-+ 
-+ 	START_A	shift 79
-+ 	START_ADDRESS	shift 78
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	START_H1	shift 60
-+ 	START_H2	shift 59
-+ 	START_H3	shift 58
-+ 	START_H4	shift 57
-+ 	START_H5	shift 56
-+ 	START_H6	shift 55
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BodyContent	goto 276
-+ 	BodyContent1	goto 141
-+ 	BodyElement	goto 93
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 91
-+ 	Paragraph	goto 90
-+ 	List	goto 22
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 88
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 29
-+ 
-+ 
-+ state 258:
-+ 
-+ 	optCaption : START_CAPTION TextList END_CAPTION .  (reduce by rule 94)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 94
-+ 
-+ 
-+ state 259:
-+ 
-+ 	OptionList : START_OPTION PCData EndOPTION . OptionList 
-+ 
-+ 	START_OPTION	shift 125
-+ 
-+ 	OptionList	goto 277
-+ 
-+ 	.	reduce by rule 145
-+ 
-+ 
-+ state 260:
-+ 
-+ 	EndOPTION : END_OPTION .  (reduce by rule 148)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 148
-+ 
-+ 
-+ state 261:
-+ 
-+ 	DLItem : START_DT TextList EndDT .  (reduce by rule 75)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 75
-+ 
-+ 
-+ state 262:
-+ 
-+ 	EndDT : END_DT .  (reduce by rule 89)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 89
-+ 
-+ 
-+ state 263:
-+ 
-+ 	DLItem : START_DD Flow1 EndDD .  (reduce by rule 76)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 76
-+ 
-+ 
-+ state 264:
-+ 
-+ 	EndDD : END_DD .  (reduce by rule 91)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 91
-+ 
-+ 
-+ state 265:
-+ 
-+ 	AddressContent2 : Paragraph AddressContent2 .  (reduce by rule 53)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 53
-+ 
-+ 
-+ state 266:
-+ 
-+ 	AddressContent2 : Paragraph END_P . AddressContent1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	TAG_BR	shift 72
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	AddressContent1	goto 278
-+ 	Paragraph	goto 162
-+ 	TextWOScript	goto 89
-+ 	Text	goto 161
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 47
-+ 
-+ 
-+ state 267:
-+ 
-+ 	AddressContent1 : Paragraph END_P AddressContent1 .  (reduce by rule 49)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 49
-+ 
-+ 
-+ state 268:
-+ 
-+ 	HeadContents : HeadElements START_TITLE PCData END_TITLE HeadElements .  (reduce by rule 10)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 10
-+ 
-+ 
-+ state 269:
-+ 
-+ 	Flow2 : Paragraph Flow2 .  (reduce by rule 85)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 85
-+ 
-+ 
-+ state 270:
-+ 
-+ 	Flow2 : Paragraph END_P . Flow1 
-+ 
-+ 	START_A	shift 79
-+ 	START_APPLET	shift 77
-+ 	START_B	shift 76
-+ 	START_BIG	shift 75
-+ 	START_BLOCKQUOTE	shift 74
-+ 	TAG_BR	shift 72
-+ 	START_CENTER	shift 71
-+ 	START_CITE	shift 70
-+ 	START_CODE	shift 69
-+ 	START_DFN	shift 68
-+ 	START_DIR	shift 67
-+ 	START_DIV	shift 66
-+ 	START_DL	shift 65
-+ 	START_EM	shift 64
-+ 	START_FONT	shift 63
-+ 	START_BASEFONT	shift 62
-+ 	START_FORM	shift 61
-+ 	TAG_HR	shift 54
-+ 	START_I	shift 53
-+ 	TAG_IMG	shift 52
-+ 	TAG_INPUT	shift 51
-+ 	TAG_ISINDEX	shift 96
-+ 	START_KBD	shift 50
-+ 	START_MAP	shift 49
-+ 	START_MENU	shift 48
-+ 	START_OL	shift 47
-+ 	START_P	shift 46
-+ 	TAG_PARAM	shift 45
-+ 	START_PRE	shift 44
-+ 	START_SAMP	shift 43
-+ 	START_SCRIPT	shift 95
-+ 	START_SELECT	shift 42
-+ 	START_SMALL	shift 41
-+ 	START_STRIKE	shift 40
-+ 	START_STRONG	shift 39
-+ 	START_SUB	shift 38
-+ 	START_SUP	shift 37
-+ 	START_TABLE	shift 36
-+ 	START_TEXTAREA	shift 35
-+ 	START_TT	shift 34
-+ 	START_U	shift 33
-+ 	START_UL	shift 32
-+ 	START_VAR	shift 31
-+ 	PCDATA	shift 30
-+ 	CHAR_REF	shift 29
-+ 	ENTITY_REF	shift 28
-+ 
-+ 	BlockWOIndex	goto 92
-+ 	Block	goto 187
-+ 	Paragraph	goto 186
-+ 	List	goto 22
-+ 	Flow1	goto 279
-+ 	Preformatted	goto 21
-+ 	TextWOScript	goto 89
-+ 	Text	goto 184
-+ 	Font	goto 19
-+ 	Phrase	goto 18
-+ 	Special	goto 17
-+ 	Form	goto 16
-+ 	PCDataElem	goto 15
-+ 
-+ 	.	reduce by rule 77
-+ 
-+ 
-+ state 271:
-+ 
-+ 	Flow2 : Block Flow1 .  (reduce by rule 83)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 83
-+ 
-+ 
-+ state 272:
-+ 
-+ 	Flow1 : Paragraph END_P Flow1 .  (reduce by rule 80)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 80
-+ 
-+ 
-+ state 273:
-+ 
-+ 	TableCellList : TableCell TableCellList .  (reduce by rule 100)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 100
-+ 
-+ 
-+ state 274:
-+ 
-+ 	TableRow : START_TR TableCellList END_TR .  (reduce by rule 98)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 98
-+ 
-+ 
-+ state 275:
-+ 
-+ 	TableCell : START_TH BodyContent . END_TH 
-+ 	TableCell : START_TH BodyContent .  (reduce by rule 102)
-+ 
-+ 	END_TH	shift 280
-+ 
-+ 
-+ 	.	reduce by rule 102
-+ 
-+ 
-+ state 276:
-+ 
-+ 	TableCell : START_TD BodyContent . END_TD 
-+ 	TableCell : START_TD BodyContent .  (reduce by rule 104)
-+ 
-+ 	END_TD	shift 281
-+ 
-+ 
-+ 	.	reduce by rule 104
-+ 
-+ 
-+ state 277:
-+ 
-+ 	OptionList : START_OPTION PCData EndOPTION OptionList .  (reduce by rule 146)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 146
-+ 
-+ 
-+ state 278:
-+ 
-+ 	AddressContent2 : Paragraph END_P AddressContent1 .  (reduce by rule 52)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 52
-+ 
-+ 
-+ state 279:
-+ 
-+ 	Flow2 : Paragraph END_P Flow1 .  (reduce by rule 84)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 84
-+ 
-+ 
-+ state 280:
-+ 
-+ 	TableCell : START_TH BodyContent END_TH .  (reduce by rule 101)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 101
-+ 
-+ 
-+ state 281:
-+ 
-+ 	TableCell : START_TD BodyContent END_TD .  (reduce by rule 103)
-+ 
-+ 
-+ 
-+ 	.	reduce by rule 103
-+ 
-+ 
-+ state 282:
-+ 
-+ 
-+ 	EOF	accept
-+ 
-+ 
-+ 	.	error
-+ 
-+ 398 of 2987 action table entries left after compaction
-+ 788 goto table entries
-diff -N -C 2 -r smlnj-lib/HTML/html-gram.sig smlnj-lib-mlton/HTML/html-gram.sig
-*** smlnj-lib/HTML/html-gram.sig	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HTML/html-gram.sig	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,140 ----
-+ signature HTML_TOKENS =
-+ sig
-+ type ('a,'b) token
-+ type svalue
-+ val ENTITY_REF: (string) *  'a * 'a -> (svalue,'a) token
-+ val CHAR_REF: (string) *  'a * 'a -> (svalue,'a) token
-+ val PCDATA: (string) *  'a * 'a -> (svalue,'a) token
-+ val END_VAR:  'a * 'a -> (svalue,'a) token
-+ val START_VAR:  'a * 'a -> (svalue,'a) token
-+ val END_UL:  'a * 'a -> (svalue,'a) token
-+ val START_UL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_U:  'a * 'a -> (svalue,'a) token
-+ val START_U:  'a * 'a -> (svalue,'a) token
-+ val END_TT:  'a * 'a -> (svalue,'a) token
-+ val START_TT:  'a * 'a -> (svalue,'a) token
-+ val END_TR:  'a * 'a -> (svalue,'a) token
-+ val START_TR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_TITLE:  'a * 'a -> (svalue,'a) token
-+ val START_TITLE:  'a * 'a -> (svalue,'a) token
-+ val END_TH:  'a * 'a -> (svalue,'a) token
-+ val START_TH: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_TEXTAREA:  'a * 'a -> (svalue,'a) token
-+ val START_TEXTAREA: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_TD:  'a * 'a -> (svalue,'a) token
-+ val START_TD: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_TABLE:  'a * 'a -> (svalue,'a) token
-+ val START_TABLE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_SUP:  'a * 'a -> (svalue,'a) token
-+ val START_SUP:  'a * 'a -> (svalue,'a) token
-+ val END_SUB:  'a * 'a -> (svalue,'a) token
-+ val START_SUB:  'a * 'a -> (svalue,'a) token
-+ val END_STYLE:  'a * 'a -> (svalue,'a) token
-+ val START_STYLE:  'a * 'a -> (svalue,'a) token
-+ val END_STRONG:  'a * 'a -> (svalue,'a) token
-+ val START_STRONG:  'a * 'a -> (svalue,'a) token
-+ val END_STRIKE:  'a * 'a -> (svalue,'a) token
-+ val START_STRIKE:  'a * 'a -> (svalue,'a) token
-+ val END_SMALL:  'a * 'a -> (svalue,'a) token
-+ val START_SMALL:  'a * 'a -> (svalue,'a) token
-+ val END_SELECT:  'a * 'a -> (svalue,'a) token
-+ val START_SELECT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_SCRIPT:  'a * 'a -> (svalue,'a) token
-+ val START_SCRIPT:  'a * 'a -> (svalue,'a) token
-+ val END_SAMP:  'a * 'a -> (svalue,'a) token
-+ val START_SAMP:  'a * 'a -> (svalue,'a) token
-+ val END_PRE:  'a * 'a -> (svalue,'a) token
-+ val START_PRE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_PARAM: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_P:  'a * 'a -> (svalue,'a) token
-+ val START_P: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_OPTION:  'a * 'a -> (svalue,'a) token
-+ val START_OPTION: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_OL:  'a * 'a -> (svalue,'a) token
-+ val START_OL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_META: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_MENU:  'a * 'a -> (svalue,'a) token
-+ val START_MENU: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_MAP:  'a * 'a -> (svalue,'a) token
-+ val START_MAP: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_LINK: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_LI:  'a * 'a -> (svalue,'a) token
-+ val START_LI: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_KBD:  'a * 'a -> (svalue,'a) token
-+ val START_KBD:  'a * 'a -> (svalue,'a) token
-+ val TAG_ISINDEX: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_INPUT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_IMG: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_I:  'a * 'a -> (svalue,'a) token
-+ val START_I:  'a * 'a -> (svalue,'a) token
-+ val END_HTML:  'a * 'a -> (svalue,'a) token
-+ val START_HTML:  'a * 'a -> (svalue,'a) token
-+ val TAG_HR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_HEAD:  'a * 'a -> (svalue,'a) token
-+ val START_HEAD:  'a * 'a -> (svalue,'a) token
-+ val END_H6:  'a * 'a -> (svalue,'a) token
-+ val START_H6: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_H5:  'a * 'a -> (svalue,'a) token
-+ val START_H5: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_H4:  'a * 'a -> (svalue,'a) token
-+ val START_H4: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_H3:  'a * 'a -> (svalue,'a) token
-+ val START_H3: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_H2:  'a * 'a -> (svalue,'a) token
-+ val START_H2: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_H1:  'a * 'a -> (svalue,'a) token
-+ val START_H1: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_FORM:  'a * 'a -> (svalue,'a) token
-+ val START_FORM: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_BASEFONT:  'a * 'a -> (svalue,'a) token
-+ val START_BASEFONT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_FONT:  'a * 'a -> (svalue,'a) token
-+ val START_FONT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_EM:  'a * 'a -> (svalue,'a) token
-+ val START_EM:  'a * 'a -> (svalue,'a) token
-+ val END_DT:  'a * 'a -> (svalue,'a) token
-+ val START_DT:  'a * 'a -> (svalue,'a) token
-+ val END_DL:  'a * 'a -> (svalue,'a) token
-+ val START_DL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_DIV:  'a * 'a -> (svalue,'a) token
-+ val START_DIV: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_DIR:  'a * 'a -> (svalue,'a) token
-+ val START_DIR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_DFN:  'a * 'a -> (svalue,'a) token
-+ val START_DFN:  'a * 'a -> (svalue,'a) token
-+ val END_DD:  'a * 'a -> (svalue,'a) token
-+ val START_DD:  'a * 'a -> (svalue,'a) token
-+ val END_CODE:  'a * 'a -> (svalue,'a) token
-+ val START_CODE:  'a * 'a -> (svalue,'a) token
-+ val END_CITE:  'a * 'a -> (svalue,'a) token
-+ val START_CITE:  'a * 'a -> (svalue,'a) token
-+ val END_CENTER:  'a * 'a -> (svalue,'a) token
-+ val START_CENTER:  'a * 'a -> (svalue,'a) token
-+ val END_CAPTION:  'a * 'a -> (svalue,'a) token
-+ val START_CAPTION: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val TAG_BR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_BODY:  'a * 'a -> (svalue,'a) token
-+ val START_BODY: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_BLOCKQUOTE:  'a * 'a -> (svalue,'a) token
-+ val START_BLOCKQUOTE:  'a * 'a -> (svalue,'a) token
-+ val END_BIG:  'a * 'a -> (svalue,'a) token
-+ val START_BIG:  'a * 'a -> (svalue,'a) token
-+ val TAG_BASE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_B:  'a * 'a -> (svalue,'a) token
-+ val START_B:  'a * 'a -> (svalue,'a) token
-+ val TAG_AREA: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_APPLET:  'a * 'a -> (svalue,'a) token
-+ val START_APPLET: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val END_ADDRESS:  'a * 'a -> (svalue,'a) token
-+ val START_ADDRESS:  'a * 'a -> (svalue,'a) token
-+ val END_A:  'a * 'a -> (svalue,'a) token
-+ val START_A: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
-+ val EOF:  'a * 'a -> (svalue,'a) token
-+ end
-+ signature HTML_LRVALS=
-+ sig
-+ structure Tokens : HTML_TOKENS
-+ structure ParserData:PARSER_DATA
-+ sharing type ParserData.Token.token = Tokens.token
-+ sharing type ParserData.svalue = Tokens.svalue
-+ end
-diff -N -C 2 -r smlnj-lib/HTML/html-gram.sml smlnj-lib-mlton/HTML/html-gram.sml
-*** smlnj-lib/HTML/html-gram.sml	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HTML/html-gram.sml	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,2477 ----
-+ 
-+ 
-+   functor HTMLLrValsFn (
-+     structure Token : TOKEN
-+     structure HTMLAttrs : HTML_ATTRS) = 
-+ struct
-+ structure ParserData=
-+ struct
-+ structure Header = 
-+ struct
-+ (* html-gram
-+  *
-+  * COPYRIGHT (c) 1996 AT&T Research.
-+  *
-+  * This grammar parses HTML 3.2.  Note that it does not enforce exclusions
-+  * (for the content of FORM, PRE, etc).  Exclusions should be enforced as
-+  * a second pass over the parse tree.
-+  *)
-+ 
-+ fun textList [text] = text
-+   | textList l = HTML.TextList l
-+ 
-+ fun blockList [blk] = blk
-+   | blockList l = HTML.BlockList l
-+ 
-+ fun textBlock l = HTML.TextBlock(textList l)
-+     
-+ (* The elements of a definition list (<DL>) are tags (<DT>) and items (<DD>).
-+  * To avoid shift/reduce problems, we parse them and then group them.
-+  *)
-+ datatype deflist_item
-+   = DL_tag of HTML.text
-+   | DL_item of HTML.block
-+ 
-+ fun groupDefListContents [] = []
-+   | groupDefListContents (h :: t) = let
-+       fun gdlc (DL_tag tag, []) = ({dt=[tag], dd=HTML.BlockList[]}, [])
-+ 	| gdlc (DL_tag tag, h :: t) = let
-+ 	    val ({dt, dd}, r) = gdlc (h, t)
-+ 	    in
-+ 	      ({dt = tag :: dt, dd = dd}, r)
-+ 	    end
-+ 	| gdlc (DL_item blk, r) = ({dt=[],dd=blk}, groupDefListContents r)
-+       in
-+ 	op :: (gdlc (h, t))
-+       end
-+ 
-+ (* A list of Text, paragraphs and blocks requires grouping the Text items and
-+  * making an implicit paragraph.  We cannot directly use TextList because of
-+  * conflicts.
-+  *)
-+ datatype blklist_item
-+   = BL_text of HTML.text list
-+   | BL_block of HTML.block list
-+ 
-+ fun consText (txt, BL_text tl :: r) = BL_text(txt::tl) :: r
-+   | consText (txt, l) = BL_text[txt] :: l
-+ 
-+ fun consBlock (blk, BL_block bl :: r) = BL_block(blk::bl) :: r
-+   | consBlock (blk, l) = BL_block[blk] :: l
-+ 
-+ fun mkBlock blks = let
-+       fun f (BL_text tl) = textBlock tl
-+ 	| f (BL_block bl) = blockList bl
-+       in
-+ 	blockList(List.map f blks)
-+       end
-+ 
-+ fun mkBody blks = HTML.BODY{
-+ 	background = NONE,
-+ 	bgcolor = NONE,
-+ 	text = NONE,
-+ 	link = NONE,
-+ 	vlink = NONE,
-+ 	alink = NONE,
-+ 	content = mkBlock blks
-+       }
-+ 
-+ 
-+ end
-+ structure LrTable = Token.LrTable
-+ structure Token = Token
-+ local open LrTable in 
-+ val table=let val actionRows =
-+ "\
-+ \\001\000\001\000\000\000\000\000\
-+ \\001\000\002\000\081\000\004\000\080\000\006\000\079\000\009\000\078\000\
-+ \\012\000\077\000\014\000\076\000\016\000\075\000\018\000\074\000\
-+ \\021\000\073\000\023\000\072\000\025\000\071\000\029\000\070\000\
-+ \\031\000\069\000\033\000\068\000\035\000\067\000\039\000\066\000\
-+ \\041\000\065\000\043\000\064\000\045\000\063\000\047\000\062\000\
-+ \\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
-+ \\057\000\057\000\061\000\056\000\064\000\055\000\066\000\054\000\
-+ \\067\000\053\000\069\000\052\000\074\000\051\000\076\000\050\000\
-+ \\079\000\049\000\083\000\048\000\085\000\047\000\086\000\046\000\
-+ \\088\000\045\000\092\000\044\000\094\000\043\000\096\000\042\000\
-+ \\098\000\041\000\102\000\040\000\104\000\039\000\106\000\038\000\
-+ \\110\000\037\000\118\000\036\000\120\000\035\000\122\000\034\000\
-+ \\124\000\033\000\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
-+ \\001\000\003\000\241\000\000\000\
-+ \\001\000\005\000\240\000\000\000\
-+ \\001\000\007\000\235\000\000\000\
-+ \\001\000\010\000\234\000\000\000\
-+ \\001\000\013\000\233\000\000\000\
-+ \\001\000\015\000\232\000\000\000\
-+ \\001\000\020\000\004\001\000\000\
-+ \\001\000\022\000\231\000\000\000\
-+ \\001\000\024\000\230\000\000\000\
-+ \\001\000\026\000\229\000\000\000\
-+ \\001\000\030\000\228\000\000\000\
-+ \\001\000\032\000\227\000\000\000\
-+ \\001\000\034\000\226\000\000\000\
-+ \\001\000\036\000\223\000\000\000\
-+ \\001\000\040\000\221\000\000\000\
-+ \\001\000\042\000\220\000\000\000\
-+ \\001\000\044\000\219\000\000\000\
-+ \\001\000\046\000\218\000\000\000\
-+ \\001\000\048\000\217\000\000\000\
-+ \\001\000\050\000\216\000\000\000\
-+ \\001\000\052\000\215\000\000\000\
-+ \\001\000\054\000\214\000\000\000\
-+ \\001\000\056\000\213\000\000\000\
-+ \\001\000\058\000\212\000\000\000\
-+ \\001\000\065\000\211\000\000\000\
-+ \\001\000\070\000\210\000\000\000\
-+ \\001\000\075\000\208\000\000\000\
-+ \\001\000\077\000\207\000\000\000\
-+ \\001\000\080\000\206\000\000\000\
-+ \\001\000\087\000\205\000\000\000\
-+ \\001\000\089\000\204\000\000\000\
-+ \\001\000\091\000\170\000\000\000\
-+ \\001\000\091\000\244\000\000\000\
-+ \\001\000\093\000\202\000\000\000\
-+ \\001\000\095\000\201\000\000\000\
-+ \\001\000\097\000\200\000\000\000\
-+ \\001\000\099\000\199\000\000\000\
-+ \\001\000\101\000\169\000\000\000\
-+ \\001\000\103\000\198\000\000\000\
-+ \\001\000\105\000\197\000\000\000\
-+ \\001\000\107\000\255\000\000\000\
-+ \\001\000\108\000\003\001\112\000\002\001\000\000\
-+ \\001\000\111\000\192\000\000\000\
-+ \\001\000\114\000\083\000\000\000\
-+ \\001\000\115\000\242\000\000\000\
-+ \\001\000\116\000\195\000\000\000\
-+ \\001\000\119\000\191\000\000\000\
-+ \\001\000\121\000\190\000\000\000\
-+ \\001\000\123\000\185\000\000\000\
-+ \\001\000\125\000\183\000\000\000\
-+ \\029\001\000\000\
-+ \\030\001\062\000\004\000\000\000\
-+ \\031\001\000\000\
-+ \\032\001\063\000\109\000\000\000\
-+ \\033\001\000\000\
-+ \\034\001\000\000\
-+ \\035\001\059\000\007\000\000\000\
-+ \\036\001\000\000\
-+ \\037\001\060\000\085\000\000\000\
-+ \\038\001\000\000\
-+ \\039\001\000\000\
-+ \\040\001\011\000\016\000\068\000\015\000\073\000\014\000\078\000\013\000\
-+ \\090\000\012\000\100\000\011\000\000\000\
-+ \\041\001\000\000\
-+ \\042\001\000\000\
-+ \\043\001\000\000\
-+ \\044\001\000\000\
-+ \\045\001\000\000\
-+ \\046\001\000\000\
-+ \\047\001\000\000\
-+ \\048\001\000\000\
-+ \\049\001\017\000\107\000\000\000\
-+ \\050\001\000\000\
-+ \\051\001\000\000\
-+ \\052\001\000\000\
-+ \\053\001\000\000\
-+ \\054\001\000\000\
-+ \\055\001\000\000\
-+ \\056\001\000\000\
-+ \\057\001\000\000\
-+ \\058\001\002\000\081\000\004\000\080\000\006\000\079\000\009\000\078\000\
-+ \\012\000\077\000\014\000\076\000\018\000\074\000\021\000\073\000\
-+ \\023\000\072\000\025\000\071\000\029\000\070\000\031\000\069\000\
-+ \\033\000\068\000\035\000\067\000\039\000\066\000\041\000\065\000\
-+ \\043\000\064\000\045\000\063\000\047\000\062\000\049\000\061\000\
-+ \\051\000\060\000\053\000\059\000\055\000\058\000\057\000\057\000\
-+ \\061\000\056\000\064\000\055\000\066\000\054\000\067\000\053\000\
-+ \\068\000\098\000\069\000\052\000\074\000\051\000\076\000\050\000\
-+ \\079\000\049\000\083\000\048\000\085\000\047\000\086\000\046\000\
-+ \\088\000\045\000\090\000\097\000\092\000\044\000\094\000\043\000\
-+ \\096\000\042\000\098\000\041\000\102\000\040\000\104\000\039\000\
-+ \\106\000\038\000\110\000\037\000\118\000\036\000\120\000\035\000\
-+ \\122\000\034\000\124\000\033\000\126\000\032\000\127\000\031\000\
-+ \\128\000\030\000\000\000\
-+ \\059\001\000\000\
-+ \\060\001\000\000\
-+ \\061\001\000\000\
-+ \\062\001\000\000\
-+ \\063\001\000\000\
-+ \\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
-+ \\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
-+ \\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
-+ \\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
-+ \\079\000\049\000\083\000\048\000\084\000\103\000\086\000\046\000\
-+ \\106\000\038\000\122\000\034\000\000\000\
-+ \\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
-+ \\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
-+ \\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
-+ \\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
-+ \\079\000\049\000\083\000\048\000\084\000\173\000\086\000\046\000\
-+ \\106\000\038\000\122\000\034\000\000\000\
-+ \\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
-+ \\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
-+ \\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
-+ \\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
-+ \\079\000\049\000\083\000\048\000\084\000\178\000\086\000\046\000\
-+ \\106\000\038\000\122\000\034\000\000\000\
-+ \\065\001\000\000\
-+ \\066\001\000\000\
-+ \\067\001\000\000\
-+ \\068\001\000\000\
-+ \\069\001\000\000\
-+ \\070\001\000\000\
-+ \\071\001\000\000\
-+ \\072\001\000\000\
-+ \\073\001\000\000\
-+ \\074\001\000\000\
-+ \\075\001\000\000\
-+ \\076\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
-+ \\018\000\074\000\023\000\072\000\025\000\071\000\029\000\070\000\
-+ \\039\000\066\000\041\000\065\000\043\000\064\000\064\000\055\000\
-+ \\066\000\054\000\067\000\053\000\069\000\052\000\074\000\051\000\
-+ \\083\000\048\000\085\000\047\000\088\000\045\000\090\000\097\000\
-+ \\092\000\044\000\094\000\043\000\096\000\042\000\098\000\041\000\
-+ \\102\000\040\000\104\000\039\000\110\000\037\000\118\000\036\000\
-+ \\120\000\035\000\124\000\033\000\126\000\032\000\127\000\031\000\
-+ \\128\000\030\000\000\000\
-+ \\077\001\000\000\
-+ \\078\001\000\000\
-+ \\079\001\000\000\
-+ \\080\001\083\000\048\000\084\000\239\000\000\000\
-+ \\080\001\083\000\048\000\084\000\012\001\000\000\
-+ \\081\001\000\000\
-+ \\082\001\000\000\
-+ \\083\001\000\000\
-+ \\084\001\000\000\
-+ \\085\001\000\000\
-+ \\086\001\000\000\
-+ \\087\001\000\000\
-+ \\088\001\000\000\
-+ \\089\001\000\000\
-+ \\090\001\000\000\
-+ \\091\001\000\000\
-+ \\092\001\000\000\
-+ \\093\001\000\000\
-+ \\094\001\000\000\
-+ \\095\001\000\000\
-+ \\096\001\000\000\
-+ \\097\001\000\000\
-+ \\098\001\000\000\
-+ \\099\001\071\000\115\000\000\000\
-+ \\100\001\000\000\
-+ \\101\001\000\000\
-+ \\102\001\027\000\151\000\037\000\150\000\000\000\
-+ \\103\001\000\000\
-+ \\104\001\000\000\
-+ \\105\001\000\000\
-+ \\106\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
-+ \\014\000\076\000\018\000\074\000\021\000\073\000\023\000\072\000\
-+ \\025\000\071\000\029\000\070\000\031\000\069\000\033\000\068\000\
-+ \\035\000\067\000\039\000\066\000\041\000\065\000\043\000\064\000\
-+ \\045\000\063\000\061\000\056\000\064\000\055\000\066\000\054\000\
-+ \\067\000\053\000\068\000\098\000\069\000\052\000\074\000\051\000\
-+ \\076\000\050\000\079\000\049\000\083\000\048\000\085\000\047\000\
-+ \\086\000\046\000\088\000\045\000\090\000\097\000\092\000\044\000\
-+ \\094\000\043\000\096\000\042\000\098\000\041\000\102\000\040\000\
-+ \\104\000\039\000\106\000\038\000\110\000\037\000\118\000\036\000\
-+ \\120\000\035\000\122\000\034\000\124\000\033\000\126\000\032\000\
-+ \\127\000\031\000\128\000\030\000\000\000\
-+ \\107\001\000\000\
-+ \\108\001\000\000\
-+ \\109\001\000\000\
-+ \\110\001\000\000\
-+ \\111\001\014\000\076\000\021\000\073\000\031\000\069\000\033\000\068\000\
-+ \\035\000\067\000\045\000\063\000\061\000\056\000\068\000\098\000\
-+ \\076\000\050\000\079\000\049\000\083\000\048\000\084\000\252\000\
-+ \\086\000\046\000\106\000\038\000\122\000\034\000\000\000\
-+ \\111\001\014\000\076\000\021\000\073\000\031\000\069\000\033\000\068\000\
-+ \\035\000\067\000\045\000\063\000\061\000\056\000\068\000\098\000\
-+ \\076\000\050\000\079\000\049\000\083\000\048\000\084\000\016\001\
-+ \\086\000\046\000\106\000\038\000\122\000\034\000\000\000\
-+ \\112\001\000\000\
-+ \\113\001\000\000\
-+ \\114\001\000\000\
-+ \\115\001\072\000\248\000\000\000\
-+ \\116\001\000\000\
-+ \\117\001\038\000\008\001\000\000\
-+ \\118\001\000\000\
-+ \\119\001\028\000\010\001\000\000\
-+ \\120\001\000\000\
-+ \\121\001\000\000\
-+ \\122\001\019\000\120\000\000\000\
-+ \\123\001\000\000\
-+ \\124\001\116\000\195\000\000\000\
-+ \\125\001\000\000\
-+ \\126\001\117\000\020\001\000\000\
-+ \\127\001\000\000\
-+ \\128\001\108\000\003\001\112\000\002\001\000\000\
-+ \\129\001\000\000\
-+ \\130\001\000\000\
-+ \\131\001\113\000\026\001\000\000\
-+ \\132\001\000\000\
-+ \\133\001\109\000\027\001\000\000\
-+ \\134\001\000\000\
-+ \\135\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
-+ \\018\000\074\000\023\000\072\000\025\000\071\000\029\000\070\000\
-+ \\039\000\066\000\041\000\065\000\043\000\064\000\064\000\055\000\
-+ \\066\000\054\000\067\000\053\000\069\000\052\000\074\000\051\000\
-+ \\085\000\047\000\088\000\045\000\090\000\097\000\092\000\044\000\
-+ \\094\000\043\000\096\000\042\000\098\000\041\000\102\000\040\000\
-+ \\104\000\039\000\110\000\037\000\118\000\036\000\120\000\035\000\
-+ \\124\000\033\000\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
-+ \\136\001\000\000\
-+ \\137\001\000\000\
-+ \\138\001\000\000\
-+ \\139\001\000\000\
-+ \\140\001\000\000\
-+ \\141\001\000\000\
-+ \\142\001\000\000\
-+ \\143\001\000\000\
-+ \\144\001\000\000\
-+ \\145\001\000\000\
-+ \\146\001\000\000\
-+ \\147\001\000\000\
-+ \\148\001\000\000\
-+ \\149\001\000\000\
-+ \\150\001\000\000\
-+ \\151\001\000\000\
-+ \\152\001\000\000\
-+ \\153\001\000\000\
-+ \\154\001\000\000\
-+ \\155\001\000\000\
-+ \\156\001\000\000\
-+ \\157\001\000\000\
-+ \\158\001\000\000\
-+ \\159\001\000\000\
-+ \\160\001\000\000\
-+ \\161\001\000\000\
-+ \\162\001\000\000\
-+ \\163\001\000\000\
-+ \\164\001\000\000\
-+ \\165\001\000\000\
-+ \\166\001\000\000\
-+ \\167\001\000\000\
-+ \\168\001\000\000\
-+ \\169\001\008\000\134\000\000\000\
-+ \\170\001\000\000\
-+ \\171\001\000\000\
-+ \\172\001\000\000\
-+ \\173\001\000\000\
-+ \\174\001\081\000\127\000\000\000\
-+ \\175\001\000\000\
-+ \\176\001\082\000\006\001\000\000\
-+ \\177\001\000\000\
-+ \\178\001\000\000\
-+ \\179\001\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
-+ \\180\001\000\000\
-+ \\181\001\000\000\
-+ \\182\001\000\000\
-+ \\183\001\000\000\
-+ \"
-+ val actionRowNumbers =
-+ "\053\000\058\000\054\000\063\000\
-+ \\001\000\059\000\063\000\045\000\
-+ \\060\000\206\000\206\000\065\000\
-+ \\066\000\067\000\068\000\164\000\
-+ \\168\000\167\000\166\000\165\000\
-+ \\081\000\110\000\109\000\087\000\
-+ \\081\000\081\000\072\000\055\000\
-+ \\210\000\209\000\208\000\162\000\
-+ \\125\000\162\000\162\000\206\000\
-+ \\149\000\162\000\162\000\162\000\
-+ \\162\000\162\000\201\000\162\000\
-+ \\162\000\195\000\162\000\125\000\
-+ \\125\000\196\000\162\000\198\000\
-+ \\189\000\162\000\115\000\162\000\
-+ \\162\000\162\000\162\000\162\000\
-+ \\162\000\081\000\162\000\162\000\
-+ \\162\000\128\000\081\000\125\000\
-+ \\162\000\162\000\162\000\081\000\
-+ \\193\000\081\000\081\000\162\000\
-+ \\162\000\162\000\101\000\162\000\
-+ \\064\000\206\000\057\000\061\000\
-+ \\206\000\205\000\039\000\033\000\
-+ \\081\000\169\000\088\000\081\000\
-+ \\117\000\081\000\076\000\206\000\
-+ \\118\000\089\000\081\000\081\000\
-+ \\080\000\081\000\078\000\077\000\
-+ \\071\000\073\000\052\000\056\000\
-+ \\162\000\161\000\051\000\125\000\
-+ \\050\000\132\000\049\000\048\000\
-+ \\044\000\047\000\162\000\041\000\
-+ \\040\000\038\000\037\000\036\000\
-+ \\035\000\206\000\032\000\031\000\
-+ \\119\000\030\000\029\000\028\000\
-+ \\196\000\027\000\026\000\025\000\
-+ \\024\000\023\000\022\000\021\000\
-+ \\020\000\074\000\019\000\018\000\
-+ \\017\000\016\000\128\000\015\000\
-+ \\162\000\132\000\014\000\013\000\
-+ \\012\000\011\000\010\000\009\000\
-+ \\075\000\007\000\006\000\005\000\
-+ \\004\000\101\000\105\000\003\000\
-+ \\002\000\046\000\207\000\069\000\
-+ \\070\000\082\000\086\000\081\000\
-+ \\084\000\083\000\034\000\093\000\
-+ \\081\000\091\000\090\000\079\000\
-+ \\163\000\186\000\126\000\120\000\
-+ \\132\000\142\000\137\000\132\000\
-+ \\174\000\171\000\200\000\151\000\
-+ \\042\000\043\000\008\000\179\000\
-+ \\178\000\181\000\175\000\177\000\
-+ \\199\000\203\000\184\000\148\000\
-+ \\121\000\123\000\194\000\197\000\
-+ \\185\000\172\000\099\000\098\000\
-+ \\097\000\096\000\095\000\094\000\
-+ \\114\000\192\000\191\000\180\000\
-+ \\129\000\124\000\144\000\146\000\
-+ \\111\000\122\000\183\000\182\000\
-+ \\187\000\112\000\113\000\176\000\
-+ \\173\000\190\000\102\000\106\000\
-+ \\104\000\101\000\100\000\188\000\
-+ \\063\000\085\000\170\000\092\000\
-+ \\133\000\127\000\143\000\136\000\
-+ \\138\000\132\000\132\000\134\000\
-+ \\152\000\116\000\155\000\153\000\
-+ \\081\000\081\000\150\000\201\000\
-+ \\204\000\130\000\145\000\131\000\
-+ \\147\000\108\000\101\000\103\000\
-+ \\062\000\141\000\132\000\139\000\
-+ \\135\000\156\000\154\000\158\000\
-+ \\160\000\202\000\107\000\140\000\
-+ \\157\000\159\000\000\000"
-+ val gotoT =
-+ "\
-+ \\001\000\026\001\002\000\001\000\000\000\
-+ \\004\000\004\000\005\000\003\000\000\000\
-+ \\000\000\
-+ \\007\000\008\000\008\000\007\000\009\000\006\000\000\000\
-+ \\010\000\027\000\014\000\026\000\017\000\025\000\020\000\024\000\
-+ \\022\000\023\000\023\000\022\000\033\000\021\000\041\000\020\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\008\000\080\000\009\000\006\000\000\000\
-+ \\000\000\
-+ \\006\000\082\000\000\000\
-+ \\050\000\086\000\051\000\085\000\052\000\084\000\000\000\
-+ \\050\000\087\000\051\000\085\000\052\000\084\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\015\000\094\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\016\000\100\000\017\000\099\000\020\000\092\000\021\000\098\000\
-+ \\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
-+ \\015\000\102\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\015\000\103\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\012\000\104\000\000\000\
-+ \\003\000\106\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\039\000\110\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\024\000\112\000\025\000\111\000\000\000\
-+ \\039\000\114\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\115\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\050\000\116\000\051\000\085\000\052\000\084\000\000\000\
-+ \\034\000\117\000\000\000\
-+ \\039\000\119\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\120\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\121\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\122\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\123\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\048\000\124\000\000\000\
-+ \\039\000\126\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\127\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\039\000\128\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\024\000\129\000\025\000\111\000\000\000\
-+ \\024\000\130\000\025\000\111\000\000\000\
-+ \\046\000\131\000\000\000\
-+ \\039\000\133\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\039\000\134\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\039\000\135\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\136\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\137\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\138\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\139\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\140\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\013\000\142\000\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\039\000\143\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\144\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\145\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\026\000\147\000\027\000\146\000\000\000\
-+ \\013\000\150\000\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\024\000\151\000\025\000\111\000\000\000\
-+ \\039\000\152\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\153\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\154\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\013\000\155\000\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\013\000\156\000\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\013\000\157\000\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\039\000\158\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\159\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\160\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\018\000\163\000\022\000\162\000\041\000\089\000\042\000\161\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\039\000\164\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\050\000\165\000\051\000\085\000\052\000\084\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\051\000\166\000\052\000\084\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\015\000\169\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\016\000\170\000\017\000\099\000\020\000\092\000\021\000\098\000\
-+ \\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
-+ \\015\000\172\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\015\000\173\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\050\000\174\000\051\000\085\000\052\000\084\000\000\000\
-+ \\000\000\
-+ \\016\000\175\000\017\000\099\000\020\000\092\000\021\000\098\000\
-+ \\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
-+ \\015\000\177\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\015\000\178\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\015\000\179\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\040\000\180\000\041\000\089\000\042\000\108\000\043\000\019\000\
-+ \\044\000\018\000\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\024\000\182\000\025\000\111\000\000\000\
-+ \\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\185\000\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\035\000\192\000\036\000\191\000\000\000\
-+ \\039\000\194\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\050\000\201\000\051\000\085\000\052\000\084\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\046\000\207\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\026\000\220\000\027\000\146\000\000\000\
-+ \\000\000\
-+ \\039\000\222\000\040\000\109\000\041\000\089\000\042\000\108\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\223\000\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\018\000\234\000\022\000\162\000\041\000\089\000\042\000\161\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\019\000\236\000\022\000\235\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\015\000\241\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\015\000\243\000\017\000\093\000\020\000\092\000\021\000\091\000\
-+ \\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
-+ \\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
-+ \\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\244\000\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\030\000\245\000\000\000\
-+ \\020\000\092\000\021\000\249\000\022\000\248\000\023\000\022\000\
-+ \\029\000\247\000\033\000\021\000\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\251\000\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\035\000\252\000\036\000\191\000\000\000\
-+ \\000\000\
-+ \\037\000\255\000\038\000\254\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\049\000\003\001\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\031\000\005\001\000\000\
-+ \\032\000\007\001\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\019\000\009\001\022\000\235\000\000\000\
-+ \\000\000\
-+ \\018\000\011\001\022\000\162\000\041\000\089\000\042\000\161\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\008\000\012\001\009\000\006\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\020\000\092\000\021\000\249\000\022\000\248\000\023\000\022\000\
-+ \\029\000\013\001\033\000\021\000\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\015\001\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\016\001\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\037\000\017\001\038\000\254\000\000\000\
-+ \\000\000\
-+ \\013\000\019\001\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\013\000\020\001\015\000\141\000\017\000\093\000\020\000\092\000\
-+ \\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
-+ \\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
-+ \\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
-+ \\000\000\
-+ \\048\000\021\001\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\018\000\022\001\022\000\162\000\041\000\089\000\042\000\161\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
-+ \\028\000\023\001\033\000\021\000\041\000\089\000\042\000\184\000\
-+ \\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
-+ \\052\000\015\000\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \\000\000\
-+ \"
-+ val numstates = 283
-+ val numrules = 155
-+ val s = ref "" and index = ref 0
-+ val string_to_int = fn () => 
-+ let val i = !index
-+ in index := i+2; Char.ord(String.sub(!s,i)) + Char.ord(String.sub(!s,i+1)) * 256
-+ end
-+ val string_to_list = fn s' =>
-+     let val len = String.size s'
-+         fun f () =
-+            if !index < len then string_to_int() :: f()
-+            else nil
-+    in index := 0; s := s'; f ()
-+    end
-+ val string_to_pairlist = fn (conv_key,conv_entry) =>
-+      let fun f () =
-+          case string_to_int()
-+          of 0 => EMPTY
-+           | n => PAIR(conv_key (n-1),conv_entry (string_to_int()),f())
-+      in f
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = Option
++   end
++   local
++      open l4
++   in
++      structure gs_1 = List
++   end
++   local
++      open l11
++   in
++      structure gs_2 = Atom
++   end
++   local
++      open l4
++   in
++      structure gs_3 = Int
++   end
++   local
++      controls-sig.sml
++   in
++      signature gs_4 = CONTROLS
++   end
++   local
++      open l11
++   in
++      structure gs_5 = AtomTable
++   end
++   local
++      structure Atom = gs_2
++      structure AtomTable = gs_5
++      structure Int = gs_3
++      structure List = gs_1
++      control-reps.sml
++   in
++      structure gs_6 = ControlReps
++   end
++   local
++      structure Atom = gs_2
++      signature CONTROLS = gs_4
++      structure ControlReps = gs_6
++      structure Int = gs_3
++      structure List = gs_1
++      structure Option = gs_0
++      controls.sml
++   in
++      structure gs_7 = Controls
++   end
++   local
++      open l11
++   in
++      structure gs_8 = ListMergeSort
++   end
++   local
++      structure Atom = gs_2
++      structure Controls = gs_7
++      control-set-sig.sml
++   in
++      signature gs_9 = CONTROL_SET
++   end
++   local
++      structure AtomTable = gs_5
++      signature CONTROL_SET = gs_9
++      structure ControlReps = gs_6
++      structure Controls = gs_7
++      structure ListMergeSort = gs_8
++      structure Option = gs_0
++      control-set.sml
++   in
++      structure gs_10 = ControlSet
++   end
++   local
++      structure ControlSet = gs_10
++      structure Controls = gs_7
++      registry-sig.sml
++   in
++      signature gs_11 = CONTROL_REGISTRY
++   end
++   local
++      open l4
++   in
++      structure gs_12 = String
++   end
++   local
++      open l4
++   in
++      structure gs_13 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_14 = Char
++   end
++   local
++      open l4
++   in
++      structure gs_15 = Bool
++   end
++   local
++      structure Controls = gs_7
++      control-util-sig.sml
++   in
++      signature gs_16 = CONTROL_UTIL
++   end
++   local
++      structure Bool = gs_15
++      signature CONTROL_UTIL = gs_16
++      structure Char = gs_14
++      structure Controls = gs_7
++      structure Int = gs_3
++      structure List = gs_1
++      structure Real = gs_13
++      structure String = gs_12
++      control-util.sml
++   in
++      structure gs_17 = ControlUtil
++   end
++   local
++      open l4
++   in
++      structure gs_18 = OS
++   end
++   local
++      structure Atom = gs_2
++      structure AtomTable = gs_5
++      signature CONTROL_REGISTRY = gs_11
++      structure ControlReps = gs_6
++      structure ControlSet = gs_10
++      structure Controls = gs_7
++      structure List = gs_1
++      structure ListMergeSort = gs_8
++      structure OS = gs_18
++      registry.sml
++   in
++      structure gs_19 = ControlRegistry
++   end
++in
++   signature CONTROLS = gs_4
++   signature CONTROL_REGISTRY = gs_11
++   signature CONTROL_SET = gs_9
++   signature CONTROL_UTIL = gs_16
++   structure ControlRegistry = gs_19
++   structure ControlSet = gs_10
++   structure ControlUtil = gs_17
++   structure Controls = gs_7
++end
++end
++
++end
+diff --git a/HTML/html-attrs-fn.sml b/HTML/html-attrs-fn.sml
+index fde0845..e5b5dd5 100644
+--- a/HTML/html-attrs-fn.sml
++++ b/HTML/html-attrs-fn.sml
+@@ -89,19 +89,24 @@ functor HTMLAttrsFn (Err : HTML_ERROR) : HTML_ATTRS =
+ 		fun error () = (
+ 		      Err.badAttrVal ctx (attrName, attrValToString attrVal);
+ 		      NONE)
+-		fun cvt (AT_IMPLICIT, IMPLICIT) = SOME IMPLICIT
+-		  | cvt (AT_INSTANCE, IMPLICIT) = SOME(NAME attrName)
+-		  | cvt (AT_TEXT, v) = SOME v
+-		  | cvt (AT_NUMBER, v) = SOME v
+-		  | cvt (AT_NAMES names, (NAME s | STRING s)) = (
++		fun atNames (names, s) = (
+ 		      case (List.find (eqName s) names)
+ 		       of NONE => error()
+ 			| (SOME name) => SOME(NAME name)
+ 		      (* end case *))
+-		  | cvt (AT_IMPLICIT, (NAME s | STRING s)) =
++		fun atImplicit (s) =
+ 		      if (s = attrName)
+ 			then SOME IMPLICIT
+ 			else error()
++
++		fun cvt (AT_IMPLICIT, IMPLICIT) = SOME IMPLICIT
++		  | cvt (AT_INSTANCE, IMPLICIT) = SOME(NAME attrName)
++		  | cvt (AT_TEXT, v) = SOME v
++		  | cvt (AT_NUMBER, v) = SOME v
++		  | cvt (AT_NAMES names, NAME s) = atNames (names, s)
++		  | cvt (AT_NAMES names, STRING s) = atNames (names, s)
++		  | cvt (AT_IMPLICIT, NAME s) = atImplicit (s)
++		  | cvt (AT_IMPLICIT, STRING s) = atImplicit (s)
+ 		  | cvt _ = error()
+ 		in
+ 		  case (HTbl.find attrTbl attrName)
+@@ -138,7 +143,8 @@ functor HTMLAttrsFn (Err : HTML_ERROR) : HTML_ATTRS =
+ 	  val getFn = bindFindAttr (attrMap, attr)
+ 	  fun get attrVec = (case (getFn attrVec)
+ 		 of NONE => NONE
+-		  | (SOME((STRING s) | (NAME s))) => SOME s
++		  | SOME (STRING s) => SOME s
++		  | SOME (NAME s) => SOME s
+ 		  | _ => (
+ 		      Err.missingAttrVal (getContext attrVec) attr;
+ 		      NONE)
+@@ -162,31 +168,41 @@ functor HTMLAttrsFn (Err : HTML_ERROR) : HTML_ATTRS =
+ 	  end
+     fun getNUMBER (attrMap, attr) = let
+ 	  val getFn = bindFindAttr (attrMap, attr)
+-	  fun get attrVec = (case (getFn attrVec)
++	  fun get attrVec = let
++	  fun doitStringName s = (case (Int.fromString s)
++		 of NONE =>  (
++		      Err.badAttrVal (getContext attrVec) (attr, s);
++		      NONE)
++		  | someN => someN
++		(* end case *))
++          in
++             (case (getFn attrVec)
+ 		 of NONE => NONE
+-		  | (SOME((STRING s) | (NAME s))) => (case (Int.fromString s)
+-		       of NONE =>  (
+-			    Err.badAttrVal (getContext attrVec) (attr, s);
+-			    NONE)
+-			| someN => someN
+-		      (* end case *))
++		  | SOME (STRING s) => doitStringName s
++		  | SOME (NAME s) => doitStringName s
+ 		  | SOME IMPLICIT => raise Fail "getNUMBER: IMPLICIT unexpected"
+ 		(* end case *))
++          end
+ 	  in
+ 	    get
+ 	  end
+     fun getChar (attrMap, attr) = let
+ 	  val getFn = bindFindAttr (attrMap, attr)
+-	  fun get attrVec = (case (getFn attrVec)
+-		 of NONE => NONE
+-		  | (SOME((STRING s) | (NAME s))) =>
+-		      if (size s = 1) then SOME(String.sub(s, 0))
++	  fun get attrVec = let
++	  fun doitStringName s =
++		if (size s = 1) then SOME(String.sub(s, 0))
+ (** NOTE: we should probably accept &#xx; as a character value **)
+-			else  (
+-			Err.badAttrVal (getContext attrVec) (attr, s);
+-			NONE)
++		  else  (
++		  Err.badAttrVal (getContext attrVec) (attr, s);
++		  NONE)
++          in
++             (case (getFn attrVec)
++		 of NONE => NONE
++		  | SOME (STRING s) => doitStringName s
++		  | SOME (NAME s) => doitStringName s
+ 		  | SOME IMPLICIT => raise Fail "getChar: IMPLICIT unexpected"
+ 		(* end case *))
++	  end
+ 	  in
+ 	    get
+ 	  end
+diff --git a/HTML/html-elements-fn.sml b/HTML/html-elements-fn.sml
+index 9495983..fade6d7 100644
+--- a/HTML/html-elements-fn.sml
++++ b/HTML/html-elements-fn.sml
+@@ -144,7 +144,8 @@ functor HTMLElementsFn (
+    *   3) a string literal enclosed in ''
+    *)
+     fun scanAttrVal (ctx, attrName, ss) = let
+-	  fun isNameChar (#"." | #"-") = true
++	  fun isNameChar #"." = true
++	    | isNameChar #"-" = true
+ 	    | isNameChar c = (Char.isAlphaNum c)
+ 	  in
+ 	    case SS.getc ss
+diff --git a/HTML/html-gram.desc b/HTML/html-gram.desc
+new file mode 100644
+index 0000000..8a23ad2
+--- /dev/null
++++ b/HTML/html-gram.desc
+@@ -0,0 +1,6055 @@
++
++state 0:
++
++	Document : . StartHTML Head Body EndHTML 
++
++	START_HTML	shift 2
++
++	Document	goto 282
++	StartHTML	goto 1
++
++	.	reduce by rule 1
++
++
++state 1:
++
++	Document : StartHTML . Head Body EndHTML 
++
++	START_HEAD	shift 5
++
++	Head	goto 4
++	StartHEAD	goto 3
++
++	.	reduce by rule 6
++
++
++state 2:
++
++	StartHTML : START_HTML .  (reduce by rule 2)
++
++
++
++	.	reduce by rule 2
++
++
++state 3:
++
++	Head : StartHEAD . HeadContents EndHEAD 
++
++	TAG_BASE	shift 14
++	TAG_ISINDEX	shift 13
++	TAG_LINK	shift 12
++	TAG_META	shift 11
++	START_SCRIPT	shift 10
++	START_STYLE	shift 9
++
++	HeadContents	goto 8
++	HeadElements	goto 7
++	HeadElement	goto 6
++
++	.	reduce by rule 11
++
++
++state 4:
++
++	Document : StartHTML Head . Body EndHTML 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	START_BODY	shift 73
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	Body	goto 27
++	BodyContent0	goto 26
++	BodyElement	goto 25
++	BlockWOIndex	goto 24
++	Paragraph	goto 23
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 20
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	error
++
++
++state 5:
++
++	StartHEAD : START_HEAD .  (reduce by rule 7)
++
++
++
++	.	reduce by rule 7
++
++
++state 6:
++
++	HeadElements : HeadElement . HeadElements 
++
++	TAG_BASE	shift 14
++	TAG_ISINDEX	shift 13
++	TAG_LINK	shift 12
++	TAG_META	shift 11
++	START_SCRIPT	shift 10
++	START_STYLE	shift 9
++
++	HeadElements	goto 80
++	HeadElement	goto 6
++
++	.	reduce by rule 11
++
++
++state 7:
++
++	HeadContents : HeadElements . START_TITLE PCData END_TITLE HeadElements 
++
++	START_TITLE	shift 81
++
++
++	.	error
++
++
++state 8:
++
++	Head : StartHEAD HeadContents . EndHEAD 
++
++	END_HEAD	shift 83
++
++	EndHEAD	goto 82
++
++	.	reduce by rule 8
++
++
++state 9:
++
++	HeadElement : START_STYLE . PCData END_STYLE 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 86
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 10:
++
++	HeadElement : START_SCRIPT . PCData END_SCRIPT 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 87
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 11:
++
++	HeadElement : TAG_META .  (reduce by rule 13)
++
++
++
++	.	reduce by rule 13
++
++
++state 12:
++
++	HeadElement : TAG_LINK .  (reduce by rule 14)
++
++
++
++	.	reduce by rule 14
++
++
++state 13:
++
++	HeadElement : TAG_ISINDEX .  (reduce by rule 15)
++
++
++
++	.	reduce by rule 15
++
++
++state 14:
++
++	HeadElement : TAG_BASE .  (reduce by rule 16)
++
++
++
++	.	reduce by rule 16
++
++
++state 15:
++
++	TextWOScript : PCDataElem .  (reduce by rule 108)
++
++
++
++	.	reduce by rule 108
++
++
++state 16:
++
++	TextWOScript : Form .  (reduce by rule 112)
++
++
++
++	.	reduce by rule 112
++
++
++state 17:
++
++	TextWOScript : Special .  (reduce by rule 111)
++
++
++
++	.	reduce by rule 111
++
++
++state 18:
++
++	TextWOScript : Phrase .  (reduce by rule 110)
++
++
++
++	.	reduce by rule 110
++
++
++state 19:
++
++	TextWOScript : Font .  (reduce by rule 109)
++
++
++
++	.	reduce by rule 109
++
++
++state 20:
++
++	BodyContent0 : TextWOScript . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 94
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 21:
++
++	BlockWOIndex : Preformatted .  (reduce by rule 55)
++
++
++
++	.	reduce by rule 55
++
++
++state 22:
++
++	BlockWOIndex : List .  (reduce by rule 54)
++
++
++
++	.	reduce by rule 54
++
++
++state 23:
++
++	BodyContent0 : Paragraph . END_P BodyContent1 
++	BodyContent0 : Paragraph . BodyContent2 
++
++	START_ADDRESS	shift 78
++	START_BLOCKQUOTE	shift 74
++	START_CENTER	shift 71
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	TAG_ISINDEX	shift 96
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	END_P	shift 101
++	START_PRE	shift 44
++	START_TABLE	shift 36
++	START_UL	shift 32
++
++	BodyContent2	goto 100
++	BodyElement	goto 99
++	BlockWOIndex	goto 92
++	Block	goto 98
++	Paragraph	goto 97
++	List	goto 22
++	Preformatted	goto 21
++
++	.	reduce by rule 35
++
++
++state 24:
++
++	BodyContent0 : BlockWOIndex . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 102
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 25:
++
++	BodyContent0 : BodyElement . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 103
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 26:
++
++	Body : BodyContent0 . EndBODY 
++
++	END_BODY	shift 105
++
++	EndBODY	goto 104
++
++	.	reduce by rule 20
++
++
++state 27:
++
++	Document : StartHTML Head Body . EndHTML 
++
++	END_HTML	shift 107
++
++	EndHTML	goto 106
++
++	.	reduce by rule 3
++
++
++state 28:
++
++	PCDataElem : ENTITY_REF .  (reduce by rule 154)
++
++
++
++	.	reduce by rule 154
++
++
++state 29:
++
++	PCDataElem : CHAR_REF .  (reduce by rule 153)
++
++
++
++	.	reduce by rule 153
++
++
++state 30:
++
++	PCDataElem : PCDATA .  (reduce by rule 152)
++
++
++
++	.	reduce by rule 152
++
++
++state 31:
++
++	Phrase : START_VAR . TextList END_VAR 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 110
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 32:
++
++	List : START_UL . ListItemList END_UL 
++
++	START_LI	shift 113
++
++	ListItemList	goto 112
++	ListItem	goto 111
++
++	.	reduce by rule 70
++
++
++state 33:
++
++	Font : START_U . TextList END_U 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 114
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 34:
++
++	Font : START_TT . TextList END_TT 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 115
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 35:
++
++	Form : START_TEXTAREA . PCData END_TEXTAREA 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 116
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 36:
++
++	BlockWOIndex : START_TABLE . optCaption TableRowList END_TABLE 
++
++	START_CAPTION	shift 118
++
++	optCaption	goto 117
++
++	.	reduce by rule 93
++
++
++state 37:
++
++	Font : START_SUP . TextList END_SUP 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 119
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 38:
++
++	Font : START_SUB . TextList END_SUB 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 120
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 39:
++
++	Phrase : START_STRONG . TextList END_STRONG 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 121
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 40:
++
++	Font : START_STRIKE . TextList END_STRIKE 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 122
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 41:
++
++	Font : START_SMALL . TextList END_SMALL 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 123
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 42:
++
++	Form : START_SELECT . OptionList END_SELECT 
++
++	START_OPTION	shift 125
++
++	OptionList	goto 124
++
++	.	reduce by rule 145
++
++
++state 43:
++
++	Phrase : START_SAMP . TextList END_SAMP 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 126
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 44:
++
++	Preformatted : START_PRE . TextList END_PRE 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 127
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 45:
++
++	Special : TAG_PARAM .  (reduce by rule 139)
++
++
++
++	.	reduce by rule 139
++
++
++state 46:
++
++	Paragraph : START_P . TextList 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 128
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 47:
++
++	List : START_OL . ListItemList END_OL 
++
++	START_LI	shift 113
++
++	ListItemList	goto 129
++	ListItem	goto 111
++
++	.	reduce by rule 70
++
++
++state 48:
++
++	List : START_MENU . ListItemList END_MENU 
++
++	START_LI	shift 113
++
++	ListItemList	goto 130
++	ListItem	goto 111
++
++	.	reduce by rule 70
++
++
++state 49:
++
++	Special : START_MAP . AreaList END_MAP 
++
++	TAG_AREA	shift 132
++
++	AreaList	goto 131
++
++	.	reduce by rule 140
++
++
++state 50:
++
++	Phrase : START_KBD . TextList END_KBD 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 133
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 51:
++
++	Form : TAG_INPUT .  (reduce by rule 142)
++
++
++
++	.	reduce by rule 142
++
++
++state 52:
++
++	Special : TAG_IMG .  (reduce by rule 133)
++
++
++
++	.	reduce by rule 133
++
++
++state 53:
++
++	Font : START_I . TextList END_I 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 134
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 54:
++
++	BlockWOIndex : TAG_HR .  (reduce by rule 60)
++
++
++
++	.	reduce by rule 60
++
++
++state 55:
++
++	BodyElement : START_H6 . TextList END_H6 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 135
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 56:
++
++	BodyElement : START_H5 . TextList END_H5 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 136
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 57:
++
++	BodyElement : START_H4 . TextList END_H4 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 137
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 58:
++
++	BodyElement : START_H3 . TextList END_H3 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 138
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 59:
++
++	BodyElement : START_H2 . TextList END_H2 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 139
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 60:
++
++	BodyElement : START_H1 . TextList END_H1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 140
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 61:
++
++	BlockWOIndex : START_FORM . BodyContent END_FORM 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 142
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 62:
++
++	Special : START_BASEFONT . TextList END_BASEFONT 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 143
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 63:
++
++	Special : START_FONT . TextList END_FONT 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 144
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 64:
++
++	Phrase : START_EM . TextList END_EM 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 145
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 65:
++
++	List : START_DL . DLItemList END_DL 
++
++	START_DD	shift 149
++	START_DT	shift 148
++
++	DLItemList	goto 147
++	DLItem	goto 146
++
++	.	reduce by rule 73
++
++
++state 66:
++
++	BlockWOIndex : START_DIV . BodyContent END_DIV 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 150
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 67:
++
++	List : START_DIR . ListItemList END_DIR 
++
++	START_LI	shift 113
++
++	ListItemList	goto 151
++	ListItem	goto 111
++
++	.	reduce by rule 70
++
++
++state 68:
++
++	Phrase : START_DFN . TextList END_DFN 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 152
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 69:
++
++	Phrase : START_CODE . TextList END_CODE 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 153
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 70:
++
++	Phrase : START_CITE . TextList END_CITE 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 154
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 71:
++
++	BlockWOIndex : START_CENTER . BodyContent END_CENTER 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 155
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 72:
++
++	Special : TAG_BR .  (reduce by rule 137)
++
++
++
++	.	reduce by rule 137
++
++
++state 73:
++
++	BodyContent0 : START_BODY . BodyContent 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 156
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 74:
++
++	BlockWOIndex : START_BLOCKQUOTE . BodyContent END_BLOCKQUOTE 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 157
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 75:
++
++	Font : START_BIG . TextList END_BIG 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 158
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 76:
++
++	Font : START_B . TextList END_B 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 159
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 77:
++
++	Special : START_APPLET . TextList END_APPLET 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 160
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 78:
++
++	BodyElement : START_ADDRESS . AddressContent1 END_ADDRESS 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	AddressContent1	goto 163
++	Paragraph	goto 162
++	TextWOScript	goto 89
++	Text	goto 161
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 47
++
++
++state 79:
++
++	Special : START_A . TextList END_A 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 164
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 80:
++
++	HeadElements : HeadElement HeadElements .  (reduce by rule 12)
++
++
++
++	.	reduce by rule 12
++
++
++state 81:
++
++	HeadContents : HeadElements START_TITLE . PCData END_TITLE HeadElements 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 165
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 82:
++
++	Head : StartHEAD HeadContents EndHEAD .  (reduce by rule 5)
++
++
++
++	.	reduce by rule 5
++
++
++state 83:
++
++	EndHEAD : END_HEAD .  (reduce by rule 9)
++
++
++
++	.	reduce by rule 9
++
++
++state 84:
++
++	PCDataList : PCDataElem . PCDataList 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCDataList	goto 166
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 85:
++
++	PCData : PCDataList .  (reduce by rule 149)
++
++
++
++	.	reduce by rule 149
++
++
++state 86:
++
++	HeadElement : START_STYLE PCData . END_STYLE 
++
++	END_STYLE	shift 167
++
++
++	.	error
++
++
++state 87:
++
++	HeadElement : START_SCRIPT PCData . END_SCRIPT 
++
++	END_SCRIPT	shift 168
++
++
++	.	error
++
++
++state 88:
++
++	BodyContent1 : Text . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 169
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 89:
++
++	Text : TextWOScript .  (reduce by rule 113)
++
++
++
++	.	reduce by rule 113
++
++
++state 90:
++
++	BodyContent1 : Paragraph . END_P BodyContent1 
++	BodyContent1 : Paragraph . BodyContent2 
++
++	START_ADDRESS	shift 78
++	START_BLOCKQUOTE	shift 74
++	START_CENTER	shift 71
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	TAG_ISINDEX	shift 96
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	END_P	shift 171
++	START_PRE	shift 44
++	START_TABLE	shift 36
++	START_UL	shift 32
++
++	BodyContent2	goto 170
++	BodyElement	goto 99
++	BlockWOIndex	goto 92
++	Block	goto 98
++	Paragraph	goto 97
++	List	goto 22
++	Preformatted	goto 21
++
++	.	reduce by rule 35
++
++
++state 91:
++
++	BodyContent1 : Block . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 172
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 92:
++
++	Block : BlockWOIndex .  (reduce by rule 62)
++
++
++
++	.	reduce by rule 62
++
++
++state 93:
++
++	BodyContent1 : BodyElement . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 173
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 94:
++
++	BodyContent0 : TextWOScript BodyContent1 .  (reduce by rule 24)
++
++
++
++	.	reduce by rule 24
++
++
++state 95:
++
++	Text : START_SCRIPT . PCData END_SCRIPT 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 174
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 96:
++
++	Block : TAG_ISINDEX .  (reduce by rule 63)
++
++
++
++	.	reduce by rule 63
++
++
++state 97:
++
++	BodyContent2 : Paragraph . END_P BodyContent1 
++	BodyContent2 : Paragraph . BodyContent2 
++
++	START_ADDRESS	shift 78
++	START_BLOCKQUOTE	shift 74
++	START_CENTER	shift 71
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	TAG_ISINDEX	shift 96
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	END_P	shift 176
++	START_PRE	shift 44
++	START_TABLE	shift 36
++	START_UL	shift 32
++
++	BodyContent2	goto 175
++	BodyElement	goto 99
++	BlockWOIndex	goto 92
++	Block	goto 98
++	Paragraph	goto 97
++	List	goto 22
++	Preformatted	goto 21
++
++	.	reduce by rule 35
++
++
++state 98:
++
++	BodyContent2 : Block . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 177
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 99:
++
++	BodyContent2 : BodyElement . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 178
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 100:
++
++	BodyContent0 : Paragraph BodyContent2 .  (reduce by rule 28)
++
++
++
++	.	reduce by rule 28
++
++
++state 101:
++
++	BodyContent0 : Paragraph END_P . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 179
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 102:
++
++	BodyContent0 : BlockWOIndex BodyContent1 .  (reduce by rule 26)
++
++
++
++	.	reduce by rule 26
++
++
++state 103:
++
++	BodyContent0 : BodyElement BodyContent1 .  (reduce by rule 25)
++
++
++
++	.	reduce by rule 25
++
++
++state 104:
++
++	Body : BodyContent0 EndBODY .  (reduce by rule 19)
++
++
++
++	.	reduce by rule 19
++
++
++state 105:
++
++	EndBODY : END_BODY .  (reduce by rule 21)
++
++
++
++	.	reduce by rule 21
++
++
++state 106:
++
++	Document : StartHTML Head Body EndHTML .  (reduce by rule 0)
++
++
++
++	.	reduce by rule 0
++
++
++state 107:
++
++	EndHTML : END_HTML .  (reduce by rule 4)
++
++
++
++	.	reduce by rule 4
++
++
++state 108:
++
++	TextList' : Text . TextList' 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList'	goto 180
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 109:
++
++	TextList : TextList' .  (reduce by rule 105)
++
++
++
++	.	reduce by rule 105
++
++
++state 110:
++
++	Phrase : START_VAR TextList . END_VAR 
++
++	END_VAR	shift 181
++
++
++	.	error
++
++
++state 111:
++
++	ListItemList : ListItem . ListItemList 
++
++	START_LI	shift 113
++
++	ListItemList	goto 182
++	ListItem	goto 111
++
++	.	reduce by rule 70
++
++
++state 112:
++
++	List : START_UL ListItemList . END_UL 
++
++	END_UL	shift 183
++
++
++	.	error
++
++
++state 113:
++
++	ListItem : START_LI . Flow1 EndLI 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 185
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 114:
++
++	Font : START_U TextList . END_U 
++
++	END_U	shift 188
++
++
++	.	error
++
++
++state 115:
++
++	Font : START_TT TextList . END_TT 
++
++	END_TT	shift 189
++
++
++	.	error
++
++
++state 116:
++
++	Form : START_TEXTAREA PCData . END_TEXTAREA 
++
++	END_TEXTAREA	shift 190
++
++
++	.	error
++
++
++state 117:
++
++	BlockWOIndex : START_TABLE optCaption . TableRowList END_TABLE 
++
++	START_TR	shift 193
++
++	TableRowList	goto 192
++	TableRow	goto 191
++
++	.	error
++
++
++state 118:
++
++	optCaption : START_CAPTION . TextList END_CAPTION 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 194
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 119:
++
++	Font : START_SUP TextList . END_SUP 
++
++	END_SUP	shift 195
++
++
++	.	error
++
++
++state 120:
++
++	Font : START_SUB TextList . END_SUB 
++
++	END_SUB	shift 196
++
++
++	.	error
++
++
++state 121:
++
++	Phrase : START_STRONG TextList . END_STRONG 
++
++	END_STRONG	shift 197
++
++
++	.	error
++
++
++state 122:
++
++	Font : START_STRIKE TextList . END_STRIKE 
++
++	END_STRIKE	shift 198
++
++
++	.	error
++
++
++state 123:
++
++	Font : START_SMALL TextList . END_SMALL 
++
++	END_SMALL	shift 199
++
++
++	.	error
++
++
++state 124:
++
++	Form : START_SELECT OptionList . END_SELECT 
++
++	END_SELECT	shift 200
++
++
++	.	error
++
++
++state 125:
++
++	OptionList : START_OPTION . PCData EndOPTION OptionList 
++
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	PCData	goto 201
++	PCDataList	goto 85
++	PCDataElem	goto 84
++
++	.	reduce by rule 150
++
++
++state 126:
++
++	Phrase : START_SAMP TextList . END_SAMP 
++
++	END_SAMP	shift 202
++
++
++	.	error
++
++
++state 127:
++
++	Preformatted : START_PRE TextList . END_PRE 
++
++	END_PRE	shift 203
++
++
++	.	error
++
++
++state 128:
++
++	Paragraph : START_P TextList .  (reduce by rule 64)
++
++
++
++	.	reduce by rule 64
++
++
++state 129:
++
++	List : START_OL ListItemList . END_OL 
++
++	END_OL	shift 204
++
++
++	.	error
++
++
++state 130:
++
++	List : START_MENU ListItemList . END_MENU 
++
++	END_MENU	shift 205
++
++
++	.	error
++
++
++state 131:
++
++	Special : START_MAP AreaList . END_MAP 
++
++	END_MAP	shift 206
++
++
++	.	error
++
++
++state 132:
++
++	AreaList : TAG_AREA . AreaList 
++
++	TAG_AREA	shift 132
++
++	AreaList	goto 207
++
++	.	reduce by rule 140
++
++
++state 133:
++
++	Phrase : START_KBD TextList . END_KBD 
++
++	END_KBD	shift 208
++
++
++	.	error
++
++
++state 134:
++
++	Font : START_I TextList . END_I 
++
++	END_I	shift 209
++
++
++	.	error
++
++
++state 135:
++
++	BodyElement : START_H6 TextList . END_H6 
++
++	END_H6	shift 210
++
++
++	.	error
++
++
++state 136:
++
++	BodyElement : START_H5 TextList . END_H5 
++
++	END_H5	shift 211
++
++
++	.	error
++
++
++state 137:
++
++	BodyElement : START_H4 TextList . END_H4 
++
++	END_H4	shift 212
++
++
++	.	error
++
++
++state 138:
++
++	BodyElement : START_H3 TextList . END_H3 
++
++	END_H3	shift 213
++
++
++	.	error
++
++
++state 139:
++
++	BodyElement : START_H2 TextList . END_H2 
++
++	END_H2	shift 214
++
++
++	.	error
++
++
++state 140:
++
++	BodyElement : START_H1 TextList . END_H1 
++
++	END_H1	shift 215
++
++
++	.	error
++
++
++state 141:
++
++	BodyContent : BodyContent1 .  (reduce by rule 22)
++
++
++
++	.	reduce by rule 22
++
++
++state 142:
++
++	BlockWOIndex : START_FORM BodyContent . END_FORM 
++
++	END_FORM	shift 216
++
++
++	.	error
++
++
++state 143:
++
++	Special : START_BASEFONT TextList . END_BASEFONT 
++
++	END_BASEFONT	shift 217
++
++
++	.	error
++
++
++state 144:
++
++	Special : START_FONT TextList . END_FONT 
++
++	END_FONT	shift 218
++
++
++	.	error
++
++
++state 145:
++
++	Phrase : START_EM TextList . END_EM 
++
++	END_EM	shift 219
++
++
++	.	error
++
++
++state 146:
++
++	DLItemList : DLItem . DLItemList 
++
++	START_DD	shift 149
++	START_DT	shift 148
++
++	DLItemList	goto 220
++	DLItem	goto 146
++
++	.	reduce by rule 73
++
++
++state 147:
++
++	List : START_DL DLItemList . END_DL 
++
++	END_DL	shift 221
++
++
++	.	error
++
++
++state 148:
++
++	DLItem : START_DT . TextList EndDT 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	TextList	goto 222
++	TextList'	goto 109
++	TextWOScript	goto 89
++	Text	goto 108
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 106
++
++
++state 149:
++
++	DLItem : START_DD . Flow1 EndDD 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 223
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 150:
++
++	BlockWOIndex : START_DIV BodyContent . END_DIV 
++
++	END_DIV	shift 224
++
++
++	.	error
++
++
++state 151:
++
++	List : START_DIR ListItemList . END_DIR 
++
++	END_DIR	shift 225
++
++
++	.	error
++
++
++state 152:
++
++	Phrase : START_DFN TextList . END_DFN 
++
++	END_DFN	shift 226
++
++
++	.	error
++
++
++state 153:
++
++	Phrase : START_CODE TextList . END_CODE 
++
++	END_CODE	shift 227
++
++
++	.	error
++
++
++state 154:
++
++	Phrase : START_CITE TextList . END_CITE 
++
++	END_CITE	shift 228
++
++
++	.	error
++
++
++state 155:
++
++	BlockWOIndex : START_CENTER BodyContent . END_CENTER 
++
++	END_CENTER	shift 229
++
++
++	.	error
++
++
++state 156:
++
++	BodyContent0 : START_BODY BodyContent .  (reduce by rule 23)
++
++
++
++	.	reduce by rule 23
++
++
++state 157:
++
++	BlockWOIndex : START_BLOCKQUOTE BodyContent . END_BLOCKQUOTE 
++
++	END_BLOCKQUOTE	shift 230
++
++
++	.	error
++
++
++state 158:
++
++	Font : START_BIG TextList . END_BIG 
++
++	END_BIG	shift 231
++
++
++	.	error
++
++
++state 159:
++
++	Font : START_B TextList . END_B 
++
++	END_B	shift 232
++
++
++	.	error
++
++
++state 160:
++
++	Special : START_APPLET TextList . END_APPLET 
++
++	END_APPLET	shift 233
++
++
++	.	error
++
++
++state 161:
++
++	AddressContent1 : Text . AddressContent1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	AddressContent1	goto 234
++	Paragraph	goto 162
++	TextWOScript	goto 89
++	Text	goto 161
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 47
++
++
++state 162:
++
++	AddressContent1 : Paragraph . END_P AddressContent1 
++	AddressContent1 : Paragraph . AddressContent2 
++
++	START_P	shift 46
++	END_P	shift 237
++
++	AddressContent2	goto 236
++	Paragraph	goto 235
++
++	.	reduce by rule 51
++
++
++state 163:
++
++	BodyElement : START_ADDRESS AddressContent1 . END_ADDRESS 
++
++	END_ADDRESS	shift 238
++
++
++	.	error
++
++
++state 164:
++
++	Special : START_A TextList . END_A 
++
++	END_A	shift 239
++
++
++	.	error
++
++
++state 165:
++
++	HeadContents : HeadElements START_TITLE PCData . END_TITLE HeadElements 
++
++	END_TITLE	shift 240
++
++
++	.	error
++
++
++state 166:
++
++	PCDataList : PCDataElem PCDataList .  (reduce by rule 151)
++
++
++
++	.	reduce by rule 151
++
++
++state 167:
++
++	HeadElement : START_STYLE PCData END_STYLE .  (reduce by rule 17)
++
++
++
++	.	reduce by rule 17
++
++
++state 168:
++
++	HeadElement : START_SCRIPT PCData END_SCRIPT .  (reduce by rule 18)
++
++
++
++	.	reduce by rule 18
++
++
++state 169:
++
++	BodyContent1 : Text BodyContent1 .  (reduce by rule 30)
++
++
++
++	.	reduce by rule 30
++
++
++state 170:
++
++	BodyContent1 : Paragraph BodyContent2 .  (reduce by rule 34)
++
++
++
++	.	reduce by rule 34
++
++
++state 171:
++
++	BodyContent1 : Paragraph END_P . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 241
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 172:
++
++	BodyContent1 : Block BodyContent1 .  (reduce by rule 32)
++
++
++
++	.	reduce by rule 32
++
++
++state 173:
++
++	BodyContent1 : BodyElement BodyContent1 .  (reduce by rule 31)
++
++
++
++	.	reduce by rule 31
++
++
++state 174:
++
++	Text : START_SCRIPT PCData . END_SCRIPT 
++
++	END_SCRIPT	shift 242
++
++
++	.	error
++
++
++state 175:
++
++	BodyContent2 : Paragraph BodyContent2 .  (reduce by rule 39)
++
++
++
++	.	reduce by rule 39
++
++
++state 176:
++
++	BodyContent2 : Paragraph END_P . BodyContent1 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent1	goto 243
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 177:
++
++	BodyContent2 : Block BodyContent1 .  (reduce by rule 37)
++
++
++
++	.	reduce by rule 37
++
++
++state 178:
++
++	BodyContent2 : BodyElement BodyContent1 .  (reduce by rule 36)
++
++
++
++	.	reduce by rule 36
++
++
++state 179:
++
++	BodyContent0 : Paragraph END_P BodyContent1 .  (reduce by rule 27)
++
++
++
++	.	reduce by rule 27
++
++
++state 180:
++
++	TextList' : Text TextList' .  (reduce by rule 107)
++
++
++
++	.	reduce by rule 107
++
++
++state 181:
++
++	Phrase : START_VAR TextList END_VAR .  (reduce by rule 130)
++
++
++
++	.	reduce by rule 130
++
++
++state 182:
++
++	ListItemList : ListItem ListItemList .  (reduce by rule 71)
++
++
++
++	.	reduce by rule 71
++
++
++state 183:
++
++	List : START_UL ListItemList END_UL .  (reduce by rule 65)
++
++
++
++	.	reduce by rule 65
++
++
++state 184:
++
++	Flow1 : Text . Flow1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 244
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 185:
++
++	ListItem : START_LI Flow1 . EndLI 
++
++	END_LI	shift 246
++
++	EndLI	goto 245
++
++	.	reduce by rule 86
++
++
++state 186:
++
++	Flow1 : Paragraph . END_P Flow1 
++	Flow1 : Paragraph . Flow2 
++
++	START_BLOCKQUOTE	shift 74
++	START_CENTER	shift 71
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	TAG_ISINDEX	shift 96
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	END_P	shift 250
++	START_PRE	shift 44
++	START_TABLE	shift 36
++	START_UL	shift 32
++
++	BlockWOIndex	goto 92
++	Block	goto 249
++	Paragraph	goto 248
++	List	goto 22
++	Flow2	goto 247
++	Preformatted	goto 21
++
++	.	reduce by rule 82
++
++
++state 187:
++
++	Flow1 : Block . Flow1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 251
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 188:
++
++	Font : START_U TextList END_U .  (reduce by rule 118)
++
++
++
++	.	reduce by rule 118
++
++
++state 189:
++
++	Font : START_TT TextList END_TT .  (reduce by rule 115)
++
++
++
++	.	reduce by rule 115
++
++
++state 190:
++
++	Form : START_TEXTAREA PCData END_TEXTAREA .  (reduce by rule 144)
++
++
++
++	.	reduce by rule 144
++
++
++state 191:
++
++	TableRowList : TableRow .  (reduce by rule 95)
++	TableRowList : TableRow . TableRowList 
++
++	START_TR	shift 193
++
++	TableRowList	goto 252
++	TableRow	goto 191
++
++	.	reduce by rule 95
++
++
++state 192:
++
++	BlockWOIndex : START_TABLE optCaption TableRowList . END_TABLE 
++
++	END_TABLE	shift 253
++
++
++	.	error
++
++
++state 193:
++
++	TableRow : START_TR . TableCellList 
++	TableRow : START_TR . TableCellList END_TR 
++
++	START_TD	shift 257
++	START_TH	shift 256
++
++	TableCellList	goto 255
++	TableCell	goto 254
++
++	.	error
++
++
++state 194:
++
++	optCaption : START_CAPTION TextList . END_CAPTION 
++
++	END_CAPTION	shift 258
++
++
++	.	error
++
++
++state 195:
++
++	Font : START_SUP TextList END_SUP .  (reduce by rule 123)
++
++
++
++	.	reduce by rule 123
++
++
++state 196:
++
++	Font : START_SUB TextList END_SUB .  (reduce by rule 122)
++
++
++
++	.	reduce by rule 122
++
++
++state 197:
++
++	Phrase : START_STRONG TextList END_STRONG .  (reduce by rule 125)
++
++
++
++	.	reduce by rule 125
++
++
++state 198:
++
++	Font : START_STRIKE TextList END_STRIKE .  (reduce by rule 119)
++
++
++
++	.	reduce by rule 119
++
++
++state 199:
++
++	Font : START_SMALL TextList END_SMALL .  (reduce by rule 121)
++
++
++
++	.	reduce by rule 121
++
++
++state 200:
++
++	Form : START_SELECT OptionList END_SELECT .  (reduce by rule 143)
++
++
++
++	.	reduce by rule 143
++
++
++state 201:
++
++	OptionList : START_OPTION PCData . EndOPTION OptionList 
++
++	END_OPTION	shift 260
++
++	EndOPTION	goto 259
++
++	.	reduce by rule 147
++
++
++state 202:
++
++	Phrase : START_SAMP TextList END_SAMP .  (reduce by rule 128)
++
++
++
++	.	reduce by rule 128
++
++
++state 203:
++
++	Preformatted : START_PRE TextList END_PRE .  (reduce by rule 92)
++
++
++
++	.	reduce by rule 92
++
++
++state 204:
++
++	List : START_OL ListItemList END_OL .  (reduce by rule 66)
++
++
++
++	.	reduce by rule 66
++
++
++state 205:
++
++	List : START_MENU ListItemList END_MENU .  (reduce by rule 68)
++
++
++
++	.	reduce by rule 68
++
++
++state 206:
++
++	Special : START_MAP AreaList END_MAP .  (reduce by rule 138)
++
++
++
++	.	reduce by rule 138
++
++
++state 207:
++
++	AreaList : TAG_AREA AreaList .  (reduce by rule 141)
++
++
++
++	.	reduce by rule 141
++
++
++state 208:
++
++	Phrase : START_KBD TextList END_KBD .  (reduce by rule 129)
++
++
++
++	.	reduce by rule 129
++
++
++state 209:
++
++	Font : START_I TextList END_I .  (reduce by rule 116)
++
++
++
++	.	reduce by rule 116
++
++
++state 210:
++
++	BodyElement : START_H6 TextList END_H6 .  (reduce by rule 45)
++
++
++
++	.	reduce by rule 45
++
++
++state 211:
++
++	BodyElement : START_H5 TextList END_H5 .  (reduce by rule 44)
++
++
++
++	.	reduce by rule 44
++
++
++state 212:
++
++	BodyElement : START_H4 TextList END_H4 .  (reduce by rule 43)
++
++
++
++	.	reduce by rule 43
++
++
++state 213:
++
++	BodyElement : START_H3 TextList END_H3 .  (reduce by rule 42)
++
++
++
++	.	reduce by rule 42
++
++
++state 214:
++
++	BodyElement : START_H2 TextList END_H2 .  (reduce by rule 41)
++
++
++
++	.	reduce by rule 41
++
++
++state 215:
++
++	BodyElement : START_H1 TextList END_H1 .  (reduce by rule 40)
++
++
++
++	.	reduce by rule 40
++
++
++state 216:
++
++	BlockWOIndex : START_FORM BodyContent END_FORM .  (reduce by rule 59)
++
++
++
++	.	reduce by rule 59
++
++
++state 217:
++
++	Special : START_BASEFONT TextList END_BASEFONT .  (reduce by rule 136)
++
++
++
++	.	reduce by rule 136
++
++
++state 218:
++
++	Special : START_FONT TextList END_FONT .  (reduce by rule 135)
++
++
++
++	.	reduce by rule 135
++
++
++state 219:
++
++	Phrase : START_EM TextList END_EM .  (reduce by rule 124)
++
++
++
++	.	reduce by rule 124
++
++
++state 220:
++
++	DLItemList : DLItem DLItemList .  (reduce by rule 74)
++
++
++
++	.	reduce by rule 74
++
++
++state 221:
++
++	List : START_DL DLItemList END_DL .  (reduce by rule 69)
++
++
++
++	.	reduce by rule 69
++
++
++state 222:
++
++	DLItem : START_DT TextList . EndDT 
++
++	END_DT	shift 262
++
++	EndDT	goto 261
++
++	.	reduce by rule 88
++
++
++state 223:
++
++	DLItem : START_DD Flow1 . EndDD 
++
++	END_DD	shift 264
++
++	EndDD	goto 263
++
++	.	reduce by rule 90
++
++
++state 224:
++
++	BlockWOIndex : START_DIV BodyContent END_DIV .  (reduce by rule 56)
++
++
++
++	.	reduce by rule 56
++
++
++state 225:
++
++	List : START_DIR ListItemList END_DIR .  (reduce by rule 67)
++
++
++
++	.	reduce by rule 67
++
++
++state 226:
++
++	Phrase : START_DFN TextList END_DFN .  (reduce by rule 127)
++
++
++
++	.	reduce by rule 127
++
++
++state 227:
++
++	Phrase : START_CODE TextList END_CODE .  (reduce by rule 126)
++
++
++
++	.	reduce by rule 126
++
++
++state 228:
++
++	Phrase : START_CITE TextList END_CITE .  (reduce by rule 131)
++
++
++
++	.	reduce by rule 131
++
++
++state 229:
++
++	BlockWOIndex : START_CENTER BodyContent END_CENTER .  (reduce by rule 57)
++
++
++
++	.	reduce by rule 57
++
++
++state 230:
++
++	BlockWOIndex : START_BLOCKQUOTE BodyContent END_BLOCKQUOTE .  (reduce by rule 58)
++
++
++
++	.	reduce by rule 58
++
++
++state 231:
++
++	Font : START_BIG TextList END_BIG .  (reduce by rule 120)
++
++
++
++	.	reduce by rule 120
++
++
++state 232:
++
++	Font : START_B TextList END_B .  (reduce by rule 117)
++
++
++
++	.	reduce by rule 117
++
++
++state 233:
++
++	Special : START_APPLET TextList END_APPLET .  (reduce by rule 134)
++
++
++
++	.	reduce by rule 134
++
++
++state 234:
++
++	AddressContent1 : Text AddressContent1 .  (reduce by rule 48)
++
++
++
++	.	reduce by rule 48
++
++
++state 235:
++
++	AddressContent2 : Paragraph . END_P AddressContent1 
++	AddressContent2 : Paragraph . AddressContent2 
++
++	START_P	shift 46
++	END_P	shift 266
++
++	AddressContent2	goto 265
++	Paragraph	goto 235
++
++	.	reduce by rule 51
++
++
++state 236:
++
++	AddressContent1 : Paragraph AddressContent2 .  (reduce by rule 50)
++
++
++
++	.	reduce by rule 50
++
++
++state 237:
++
++	AddressContent1 : Paragraph END_P . AddressContent1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	AddressContent1	goto 267
++	Paragraph	goto 162
++	TextWOScript	goto 89
++	Text	goto 161
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 47
++
++
++state 238:
++
++	BodyElement : START_ADDRESS AddressContent1 END_ADDRESS .  (reduce by rule 46)
++
++
++
++	.	reduce by rule 46
++
++
++state 239:
++
++	Special : START_A TextList END_A .  (reduce by rule 132)
++
++
++
++	.	reduce by rule 132
++
++
++state 240:
++
++	HeadContents : HeadElements START_TITLE PCData END_TITLE . HeadElements 
++
++	TAG_BASE	shift 14
++	TAG_ISINDEX	shift 13
++	TAG_LINK	shift 12
++	TAG_META	shift 11
++	START_SCRIPT	shift 10
++	START_STYLE	shift 9
++
++	HeadElements	goto 268
++	HeadElement	goto 6
++
++	.	reduce by rule 11
++
++
++state 241:
++
++	BodyContent1 : Paragraph END_P BodyContent1 .  (reduce by rule 33)
++
++
++
++	.	reduce by rule 33
++
++
++state 242:
++
++	Text : START_SCRIPT PCData END_SCRIPT .  (reduce by rule 114)
++
++
++
++	.	reduce by rule 114
++
++
++state 243:
++
++	BodyContent2 : Paragraph END_P BodyContent1 .  (reduce by rule 38)
++
++
++
++	.	reduce by rule 38
++
++
++state 244:
++
++	Flow1 : Text Flow1 .  (reduce by rule 78)
++
++
++
++	.	reduce by rule 78
++
++
++state 245:
++
++	ListItem : START_LI Flow1 EndLI .  (reduce by rule 72)
++
++
++
++	.	reduce by rule 72
++
++
++state 246:
++
++	EndLI : END_LI .  (reduce by rule 87)
++
++
++
++	.	reduce by rule 87
++
++
++state 247:
++
++	Flow1 : Paragraph Flow2 .  (reduce by rule 81)
++
++
++
++	.	reduce by rule 81
++
++
++state 248:
++
++	Flow2 : Paragraph . END_P Flow1 
++	Flow2 : Paragraph . Flow2 
++
++	START_BLOCKQUOTE	shift 74
++	START_CENTER	shift 71
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	TAG_ISINDEX	shift 96
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	END_P	shift 270
++	START_PRE	shift 44
++	START_TABLE	shift 36
++	START_UL	shift 32
++
++	BlockWOIndex	goto 92
++	Block	goto 249
++	Paragraph	goto 248
++	List	goto 22
++	Flow2	goto 269
++	Preformatted	goto 21
++
++	.	reduce by rule 82
++
++
++state 249:
++
++	Flow2 : Block . Flow1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 271
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 250:
++
++	Flow1 : Paragraph END_P . Flow1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 272
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 251:
++
++	Flow1 : Block Flow1 .  (reduce by rule 79)
++
++
++
++	.	reduce by rule 79
++
++
++state 252:
++
++	TableRowList : TableRow TableRowList .  (reduce by rule 96)
++
++
++
++	.	reduce by rule 96
++
++
++state 253:
++
++	BlockWOIndex : START_TABLE optCaption TableRowList END_TABLE .  (reduce by rule 61)
++
++
++
++	.	reduce by rule 61
++
++
++state 254:
++
++	TableCellList : TableCell .  (reduce by rule 99)
++	TableCellList : TableCell . TableCellList 
++
++	START_TD	shift 257
++	START_TH	shift 256
++
++	TableCellList	goto 273
++	TableCell	goto 254
++
++	.	reduce by rule 99
++
++
++state 255:
++
++	TableRow : START_TR TableCellList .  (reduce by rule 97)
++	TableRow : START_TR TableCellList . END_TR 
++
++	END_TR	shift 274
++
++
++	.	reduce by rule 97
++
++
++state 256:
++
++	TableCell : START_TH . BodyContent END_TH 
++	TableCell : START_TH . BodyContent 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 275
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 257:
++
++	TableCell : START_TD . BodyContent END_TD 
++	TableCell : START_TD . BodyContent 
++
++	START_A	shift 79
++	START_ADDRESS	shift 78
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	START_H1	shift 60
++	START_H2	shift 59
++	START_H3	shift 58
++	START_H4	shift 57
++	START_H5	shift 56
++	START_H6	shift 55
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BodyContent	goto 276
++	BodyContent1	goto 141
++	BodyElement	goto 93
++	BlockWOIndex	goto 92
++	Block	goto 91
++	Paragraph	goto 90
++	List	goto 22
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 88
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 29
++
++
++state 258:
++
++	optCaption : START_CAPTION TextList END_CAPTION .  (reduce by rule 94)
++
++
++
++	.	reduce by rule 94
++
++
++state 259:
++
++	OptionList : START_OPTION PCData EndOPTION . OptionList 
++
++	START_OPTION	shift 125
++
++	OptionList	goto 277
++
++	.	reduce by rule 145
++
++
++state 260:
++
++	EndOPTION : END_OPTION .  (reduce by rule 148)
++
++
++
++	.	reduce by rule 148
++
++
++state 261:
++
++	DLItem : START_DT TextList EndDT .  (reduce by rule 75)
++
++
++
++	.	reduce by rule 75
++
++
++state 262:
++
++	EndDT : END_DT .  (reduce by rule 89)
++
++
++
++	.	reduce by rule 89
++
++
++state 263:
++
++	DLItem : START_DD Flow1 EndDD .  (reduce by rule 76)
++
++
++
++	.	reduce by rule 76
++
++
++state 264:
++
++	EndDD : END_DD .  (reduce by rule 91)
++
++
++
++	.	reduce by rule 91
++
++
++state 265:
++
++	AddressContent2 : Paragraph AddressContent2 .  (reduce by rule 53)
++
++
++
++	.	reduce by rule 53
++
++
++state 266:
++
++	AddressContent2 : Paragraph END_P . AddressContent1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	TAG_BR	shift 72
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	AddressContent1	goto 278
++	Paragraph	goto 162
++	TextWOScript	goto 89
++	Text	goto 161
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 47
++
++
++state 267:
++
++	AddressContent1 : Paragraph END_P AddressContent1 .  (reduce by rule 49)
++
++
++
++	.	reduce by rule 49
++
++
++state 268:
++
++	HeadContents : HeadElements START_TITLE PCData END_TITLE HeadElements .  (reduce by rule 10)
++
++
++
++	.	reduce by rule 10
++
++
++state 269:
++
++	Flow2 : Paragraph Flow2 .  (reduce by rule 85)
++
++
++
++	.	reduce by rule 85
++
++
++state 270:
++
++	Flow2 : Paragraph END_P . Flow1 
++
++	START_A	shift 79
++	START_APPLET	shift 77
++	START_B	shift 76
++	START_BIG	shift 75
++	START_BLOCKQUOTE	shift 74
++	TAG_BR	shift 72
++	START_CENTER	shift 71
++	START_CITE	shift 70
++	START_CODE	shift 69
++	START_DFN	shift 68
++	START_DIR	shift 67
++	START_DIV	shift 66
++	START_DL	shift 65
++	START_EM	shift 64
++	START_FONT	shift 63
++	START_BASEFONT	shift 62
++	START_FORM	shift 61
++	TAG_HR	shift 54
++	START_I	shift 53
++	TAG_IMG	shift 52
++	TAG_INPUT	shift 51
++	TAG_ISINDEX	shift 96
++	START_KBD	shift 50
++	START_MAP	shift 49
++	START_MENU	shift 48
++	START_OL	shift 47
++	START_P	shift 46
++	TAG_PARAM	shift 45
++	START_PRE	shift 44
++	START_SAMP	shift 43
++	START_SCRIPT	shift 95
++	START_SELECT	shift 42
++	START_SMALL	shift 41
++	START_STRIKE	shift 40
++	START_STRONG	shift 39
++	START_SUB	shift 38
++	START_SUP	shift 37
++	START_TABLE	shift 36
++	START_TEXTAREA	shift 35
++	START_TT	shift 34
++	START_U	shift 33
++	START_UL	shift 32
++	START_VAR	shift 31
++	PCDATA	shift 30
++	CHAR_REF	shift 29
++	ENTITY_REF	shift 28
++
++	BlockWOIndex	goto 92
++	Block	goto 187
++	Paragraph	goto 186
++	List	goto 22
++	Flow1	goto 279
++	Preformatted	goto 21
++	TextWOScript	goto 89
++	Text	goto 184
++	Font	goto 19
++	Phrase	goto 18
++	Special	goto 17
++	Form	goto 16
++	PCDataElem	goto 15
++
++	.	reduce by rule 77
++
++
++state 271:
++
++	Flow2 : Block Flow1 .  (reduce by rule 83)
++
++
++
++	.	reduce by rule 83
++
++
++state 272:
++
++	Flow1 : Paragraph END_P Flow1 .  (reduce by rule 80)
++
++
++
++	.	reduce by rule 80
++
++
++state 273:
++
++	TableCellList : TableCell TableCellList .  (reduce by rule 100)
++
++
++
++	.	reduce by rule 100
++
++
++state 274:
++
++	TableRow : START_TR TableCellList END_TR .  (reduce by rule 98)
++
++
++
++	.	reduce by rule 98
++
++
++state 275:
++
++	TableCell : START_TH BodyContent . END_TH 
++	TableCell : START_TH BodyContent .  (reduce by rule 102)
++
++	END_TH	shift 280
++
++
++	.	reduce by rule 102
++
++
++state 276:
++
++	TableCell : START_TD BodyContent . END_TD 
++	TableCell : START_TD BodyContent .  (reduce by rule 104)
++
++	END_TD	shift 281
++
++
++	.	reduce by rule 104
++
++
++state 277:
++
++	OptionList : START_OPTION PCData EndOPTION OptionList .  (reduce by rule 146)
++
++
++
++	.	reduce by rule 146
++
++
++state 278:
++
++	AddressContent2 : Paragraph END_P AddressContent1 .  (reduce by rule 52)
++
++
++
++	.	reduce by rule 52
++
++
++state 279:
++
++	Flow2 : Paragraph END_P Flow1 .  (reduce by rule 84)
++
++
++
++	.	reduce by rule 84
++
++
++state 280:
++
++	TableCell : START_TH BodyContent END_TH .  (reduce by rule 101)
++
++
++
++	.	reduce by rule 101
++
++
++state 281:
++
++	TableCell : START_TD BodyContent END_TD .  (reduce by rule 103)
++
++
++
++	.	reduce by rule 103
++
++
++state 282:
++
++
++	EOF	accept
++
++
++	.	error
++
++398 of 2987 action table entries left after compaction
++788 goto table entries
+diff --git a/HTML/html-gram.sig b/HTML/html-gram.sig
+new file mode 100644
+index 0000000..c61b473
+--- /dev/null
++++ b/HTML/html-gram.sig
+@@ -0,0 +1,140 @@
++signature HTML_TOKENS =
++sig
++type ('a,'b) token
++type svalue
++val ENTITY_REF: (string) *  'a * 'a -> (svalue,'a) token
++val CHAR_REF: (string) *  'a * 'a -> (svalue,'a) token
++val PCDATA: (string) *  'a * 'a -> (svalue,'a) token
++val END_VAR:  'a * 'a -> (svalue,'a) token
++val START_VAR:  'a * 'a -> (svalue,'a) token
++val END_UL:  'a * 'a -> (svalue,'a) token
++val START_UL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_U:  'a * 'a -> (svalue,'a) token
++val START_U:  'a * 'a -> (svalue,'a) token
++val END_TT:  'a * 'a -> (svalue,'a) token
++val START_TT:  'a * 'a -> (svalue,'a) token
++val END_TR:  'a * 'a -> (svalue,'a) token
++val START_TR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_TITLE:  'a * 'a -> (svalue,'a) token
++val START_TITLE:  'a * 'a -> (svalue,'a) token
++val END_TH:  'a * 'a -> (svalue,'a) token
++val START_TH: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_TEXTAREA:  'a * 'a -> (svalue,'a) token
++val START_TEXTAREA: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_TD:  'a * 'a -> (svalue,'a) token
++val START_TD: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_TABLE:  'a * 'a -> (svalue,'a) token
++val START_TABLE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_SUP:  'a * 'a -> (svalue,'a) token
++val START_SUP:  'a * 'a -> (svalue,'a) token
++val END_SUB:  'a * 'a -> (svalue,'a) token
++val START_SUB:  'a * 'a -> (svalue,'a) token
++val END_STYLE:  'a * 'a -> (svalue,'a) token
++val START_STYLE:  'a * 'a -> (svalue,'a) token
++val END_STRONG:  'a * 'a -> (svalue,'a) token
++val START_STRONG:  'a * 'a -> (svalue,'a) token
++val END_STRIKE:  'a * 'a -> (svalue,'a) token
++val START_STRIKE:  'a * 'a -> (svalue,'a) token
++val END_SMALL:  'a * 'a -> (svalue,'a) token
++val START_SMALL:  'a * 'a -> (svalue,'a) token
++val END_SELECT:  'a * 'a -> (svalue,'a) token
++val START_SELECT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_SCRIPT:  'a * 'a -> (svalue,'a) token
++val START_SCRIPT:  'a * 'a -> (svalue,'a) token
++val END_SAMP:  'a * 'a -> (svalue,'a) token
++val START_SAMP:  'a * 'a -> (svalue,'a) token
++val END_PRE:  'a * 'a -> (svalue,'a) token
++val START_PRE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_PARAM: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_P:  'a * 'a -> (svalue,'a) token
++val START_P: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_OPTION:  'a * 'a -> (svalue,'a) token
++val START_OPTION: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_OL:  'a * 'a -> (svalue,'a) token
++val START_OL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_META: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_MENU:  'a * 'a -> (svalue,'a) token
++val START_MENU: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_MAP:  'a * 'a -> (svalue,'a) token
++val START_MAP: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_LINK: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_LI:  'a * 'a -> (svalue,'a) token
++val START_LI: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_KBD:  'a * 'a -> (svalue,'a) token
++val START_KBD:  'a * 'a -> (svalue,'a) token
++val TAG_ISINDEX: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_INPUT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_IMG: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_I:  'a * 'a -> (svalue,'a) token
++val START_I:  'a * 'a -> (svalue,'a) token
++val END_HTML:  'a * 'a -> (svalue,'a) token
++val START_HTML:  'a * 'a -> (svalue,'a) token
++val TAG_HR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_HEAD:  'a * 'a -> (svalue,'a) token
++val START_HEAD:  'a * 'a -> (svalue,'a) token
++val END_H6:  'a * 'a -> (svalue,'a) token
++val START_H6: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_H5:  'a * 'a -> (svalue,'a) token
++val START_H5: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_H4:  'a * 'a -> (svalue,'a) token
++val START_H4: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_H3:  'a * 'a -> (svalue,'a) token
++val START_H3: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_H2:  'a * 'a -> (svalue,'a) token
++val START_H2: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_H1:  'a * 'a -> (svalue,'a) token
++val START_H1: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_FORM:  'a * 'a -> (svalue,'a) token
++val START_FORM: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_BASEFONT:  'a * 'a -> (svalue,'a) token
++val START_BASEFONT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_FONT:  'a * 'a -> (svalue,'a) token
++val START_FONT: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_EM:  'a * 'a -> (svalue,'a) token
++val START_EM:  'a * 'a -> (svalue,'a) token
++val END_DT:  'a * 'a -> (svalue,'a) token
++val START_DT:  'a * 'a -> (svalue,'a) token
++val END_DL:  'a * 'a -> (svalue,'a) token
++val START_DL: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_DIV:  'a * 'a -> (svalue,'a) token
++val START_DIV: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_DIR:  'a * 'a -> (svalue,'a) token
++val START_DIR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_DFN:  'a * 'a -> (svalue,'a) token
++val START_DFN:  'a * 'a -> (svalue,'a) token
++val END_DD:  'a * 'a -> (svalue,'a) token
++val START_DD:  'a * 'a -> (svalue,'a) token
++val END_CODE:  'a * 'a -> (svalue,'a) token
++val START_CODE:  'a * 'a -> (svalue,'a) token
++val END_CITE:  'a * 'a -> (svalue,'a) token
++val START_CITE:  'a * 'a -> (svalue,'a) token
++val END_CENTER:  'a * 'a -> (svalue,'a) token
++val START_CENTER:  'a * 'a -> (svalue,'a) token
++val END_CAPTION:  'a * 'a -> (svalue,'a) token
++val START_CAPTION: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val TAG_BR: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_BODY:  'a * 'a -> (svalue,'a) token
++val START_BODY: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_BLOCKQUOTE:  'a * 'a -> (svalue,'a) token
++val START_BLOCKQUOTE:  'a * 'a -> (svalue,'a) token
++val END_BIG:  'a * 'a -> (svalue,'a) token
++val START_BIG:  'a * 'a -> (svalue,'a) token
++val TAG_BASE: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_B:  'a * 'a -> (svalue,'a) token
++val START_B:  'a * 'a -> (svalue,'a) token
++val TAG_AREA: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_APPLET:  'a * 'a -> (svalue,'a) token
++val START_APPLET: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val END_ADDRESS:  'a * 'a -> (svalue,'a) token
++val START_ADDRESS:  'a * 'a -> (svalue,'a) token
++val END_A:  'a * 'a -> (svalue,'a) token
++val START_A: (HTMLAttrVals.attrs) *  'a * 'a -> (svalue,'a) token
++val EOF:  'a * 'a -> (svalue,'a) token
++end
++signature HTML_LRVALS=
++sig
++structure Tokens : HTML_TOKENS
++structure ParserData:PARSER_DATA
++sharing type ParserData.Token.token = Tokens.token
++sharing type ParserData.svalue = Tokens.svalue
++end
+diff --git a/HTML/html-gram.sml b/HTML/html-gram.sml
+new file mode 100644
+index 0000000..0dd6ee6
+--- /dev/null
++++ b/HTML/html-gram.sml
+@@ -0,0 +1,2477 @@
++
++
++  functor HTMLLrValsFn (
++    structure Token : TOKEN
++    structure HTMLAttrs : HTML_ATTRS) = 
++struct
++structure ParserData=
++struct
++structure Header = 
++struct
++(* html-gram
++ *
++ * COPYRIGHT (c) 1996 AT&T Research.
++ *
++ * This grammar parses HTML 3.2.  Note that it does not enforce exclusions
++ * (for the content of FORM, PRE, etc).  Exclusions should be enforced as
++ * a second pass over the parse tree.
++ *)
++
++fun textList [text] = text
++  | textList l = HTML.TextList l
++
++fun blockList [blk] = blk
++  | blockList l = HTML.BlockList l
++
++fun textBlock l = HTML.TextBlock(textList l)
++    
++(* The elements of a definition list (<DL>) are tags (<DT>) and items (<DD>).
++ * To avoid shift/reduce problems, we parse them and then group them.
++ *)
++datatype deflist_item
++  = DL_tag of HTML.text
++  | DL_item of HTML.block
++
++fun groupDefListContents [] = []
++  | groupDefListContents (h :: t) = let
++      fun gdlc (DL_tag tag, []) = ({dt=[tag], dd=HTML.BlockList[]}, [])
++	| gdlc (DL_tag tag, h :: t) = let
++	    val ({dt, dd}, r) = gdlc (h, t)
++	    in
++	      ({dt = tag :: dt, dd = dd}, r)
++	    end
++	| gdlc (DL_item blk, r) = ({dt=[],dd=blk}, groupDefListContents r)
++      in
++	op :: (gdlc (h, t))
 +      end
-+ val string_to_pairlist_default = fn (conv_key,conv_entry) =>
-+     let val conv_row = string_to_pairlist(conv_key,conv_entry)
-+     in fn () =>
-+        let val default = conv_entry(string_to_int())
-+            val row = conv_row()
-+        in (row,default)
-+        end
-+    end
-+ val string_to_table = fn (convert_row,s') =>
-+     let val len = String.size s'
-+         fun f ()=
-+            if !index < len then convert_row() :: f()
-+            else nil
-+      in (s := s'; index := 0; f ())
++
++(* A list of Text, paragraphs and blocks requires grouping the Text items and
++ * making an implicit paragraph.  We cannot directly use TextList because of
++ * conflicts.
++ *)
++datatype blklist_item
++  = BL_text of HTML.text list
++  | BL_block of HTML.block list
++
++fun consText (txt, BL_text tl :: r) = BL_text(txt::tl) :: r
++  | consText (txt, l) = BL_text[txt] :: l
++
++fun consBlock (blk, BL_block bl :: r) = BL_block(blk::bl) :: r
++  | consBlock (blk, l) = BL_block[blk] :: l
++
++fun mkBlock blks = let
++      fun f (BL_text tl) = textBlock tl
++	| f (BL_block bl) = blockList bl
++      in
++	blockList(List.map f blks)
 +      end
-+ local
-+   val memo = Array.array(numstates+numrules,ERROR)
-+   val _ =let fun g i=(Array.update(memo,i,REDUCE(i-numstates)); g(i+1))
-+        fun f i =
-+             if i=numstates then g i
-+             else (Array.update(memo,i,SHIFT (STATE i)); f (i+1))
-+           in f 0 handle Subscript => ()
-+           end
-+ in
-+ val entry_to_action = fn 0 => ACCEPT | 1 => ERROR | j => Array.sub(memo,(j-2))
-+ end
-+ val gotoT=Array.fromList(string_to_table(string_to_pairlist(NT,STATE),gotoT))
-+ val actionRows=string_to_table(string_to_pairlist_default(T,entry_to_action),actionRows)
-+ val actionRowNumbers = string_to_list actionRowNumbers
-+ val actionT = let val actionRowLookUp=
-+ let val a=Array.fromList(actionRows) in fn i=>Array.sub(a,i) end
-+ in Array.fromList(map actionRowLookUp actionRowNumbers)
-+ end
-+ in LrTable.mkLrTable {actions=actionT,gotos=gotoT,numRules=numrules,
-+ numStates=numstates,initialState=STATE 0}
-+ end
-+ end
-+ local open Header in
-+ type pos = int
-+ type arg = int -> HTMLAttrs.context
-+ structure MlyValue = 
-+ struct
-+ datatype svalue = VOID | ntVOID of unit | ENTITY_REF of  (string)
-+  | CHAR_REF of  (string) | PCDATA of  (string)
-+  | START_UL of  (HTMLAttrVals.attrs)
-+  | START_TR of  (HTMLAttrVals.attrs)
-+  | START_TH of  (HTMLAttrVals.attrs)
-+  | START_TEXTAREA of  (HTMLAttrVals.attrs)
-+  | START_TD of  (HTMLAttrVals.attrs)
-+  | START_TABLE of  (HTMLAttrVals.attrs)
-+  | START_SELECT of  (HTMLAttrVals.attrs)
-+  | START_PRE of  (HTMLAttrVals.attrs)
-+  | TAG_PARAM of  (HTMLAttrVals.attrs)
-+  | START_P of  (HTMLAttrVals.attrs)
-+  | START_OPTION of  (HTMLAttrVals.attrs)
-+  | START_OL of  (HTMLAttrVals.attrs)
-+  | TAG_META of  (HTMLAttrVals.attrs)
-+  | START_MENU of  (HTMLAttrVals.attrs)
-+  | START_MAP of  (HTMLAttrVals.attrs)
-+  | TAG_LINK of  (HTMLAttrVals.attrs)
-+  | START_LI of  (HTMLAttrVals.attrs)
-+  | TAG_ISINDEX of  (HTMLAttrVals.attrs)
-+  | TAG_INPUT of  (HTMLAttrVals.attrs)
-+  | TAG_IMG of  (HTMLAttrVals.attrs) | TAG_HR of  (HTMLAttrVals.attrs)
-+  | START_H6 of  (HTMLAttrVals.attrs)
-+  | START_H5 of  (HTMLAttrVals.attrs)
-+  | START_H4 of  (HTMLAttrVals.attrs)
-+  | START_H3 of  (HTMLAttrVals.attrs)
-+  | START_H2 of  (HTMLAttrVals.attrs)
-+  | START_H1 of  (HTMLAttrVals.attrs)
-+  | START_FORM of  (HTMLAttrVals.attrs)
-+  | START_BASEFONT of  (HTMLAttrVals.attrs)
-+  | START_FONT of  (HTMLAttrVals.attrs)
-+  | START_DL of  (HTMLAttrVals.attrs)
-+  | START_DIV of  (HTMLAttrVals.attrs)
-+  | START_DIR of  (HTMLAttrVals.attrs)
-+  | START_CAPTION of  (HTMLAttrVals.attrs)
-+  | TAG_BR of  (HTMLAttrVals.attrs)
-+  | START_BODY of  (HTMLAttrVals.attrs)
-+  | TAG_BASE of  (HTMLAttrVals.attrs)
-+  | TAG_AREA of  (HTMLAttrVals.attrs)
-+  | START_APPLET of  (HTMLAttrVals.attrs)
-+  | START_A of  (HTMLAttrVals.attrs) | PCDataElem of  (HTML.pcdata)
-+  | PCDataList of  (HTML.pcdata list) | PCData of  (HTML.pcdata)
-+  | OptionList of  (HTML.select_option list) | Form of  (HTML.text)
-+  | AreaList of  (HTML.area list) | Special of  (HTML.text)
-+  | Phrase of  (HTML.text) | Font of  (HTML.text)
-+  | Text of  (HTML.text) | TextWOScript of  (HTML.text)
-+  | TextList' of  (HTML.text list) | TextList of  (HTML.text)
-+  | TableCell of  (HTML.table_cell)
-+  | TableCellList of  (HTML.table_cell list) | TableRow of  (HTML.tr)
-+  | TableRowList of  (HTML.tr list)
-+  | optCaption of  (HTML.caption option)
-+  | Preformatted of  (HTML.block) | Flow2 of  (blklist_item list)
-+  | Flow1 of  (blklist_item list) | DLItem of  (deflist_item)
-+  | DLItemList of  (deflist_item list) | ListItem of  (HTML.list_item)
-+  | ListItemList of  (HTML.list_item list) | List of  (HTML.block)
-+  | Paragraph of  (HTML.block) | Block of  (HTML.block)
-+  | BlockWOIndex of  (HTML.block)
-+  | AddressContent2 of  (blklist_item list)
-+  | AddressContent1 of  (blklist_item list)
-+  | BodyElement of  (HTML.block) | BodyContent2 of  (blklist_item list)
-+  | BodyContent1 of  (blklist_item list) | BodyContent0 of  (HTML.body)
-+  | BodyContent of  (HTML.block) | Body of  (HTML.body)
-+  | HeadElement of  (HTML.head_content)
-+  | HeadElements of  (HTML.head_content list)
-+  | HeadContents of  (HTML.head_content list)
-+  | Head of  (HTML.head_content list)
-+  | StartHTML of  (HTML.cdata option) | Document of  (HTML.html)
-+ end
-+ type svalue = MlyValue.svalue
-+ type result = HTML.html
-+ end
-+ structure EC=
-+ struct
-+ open LrTable
-+ infix 5 $$
-+ fun x $$ y = y::x
-+ val is_keyword =
-+ fn _ => false
-+ val preferred_change : (term list * term list) list = 
-+ nil
-+ val noShift = 
-+ fn (T 0) => true | _ => false
-+ val showTerminal =
-+ fn (T 0) => "EOF"
-+   | (T 1) => "START_A"
-+   | (T 2) => "END_A"
-+   | (T 3) => "START_ADDRESS"
-+   | (T 4) => "END_ADDRESS"
-+   | (T 5) => "START_APPLET"
-+   | (T 6) => "END_APPLET"
-+   | (T 7) => "TAG_AREA"
-+   | (T 8) => "START_B"
-+   | (T 9) => "END_B"
-+   | (T 10) => "TAG_BASE"
-+   | (T 11) => "START_BIG"
-+   | (T 12) => "END_BIG"
-+   | (T 13) => "START_BLOCKQUOTE"
-+   | (T 14) => "END_BLOCKQUOTE"
-+   | (T 15) => "START_BODY"
-+   | (T 16) => "END_BODY"
-+   | (T 17) => "TAG_BR"
-+   | (T 18) => "START_CAPTION"
-+   | (T 19) => "END_CAPTION"
-+   | (T 20) => "START_CENTER"
-+   | (T 21) => "END_CENTER"
-+   | (T 22) => "START_CITE"
-+   | (T 23) => "END_CITE"
-+   | (T 24) => "START_CODE"
-+   | (T 25) => "END_CODE"
-+   | (T 26) => "START_DD"
-+   | (T 27) => "END_DD"
-+   | (T 28) => "START_DFN"
-+   | (T 29) => "END_DFN"
-+   | (T 30) => "START_DIR"
-+   | (T 31) => "END_DIR"
-+   | (T 32) => "START_DIV"
-+   | (T 33) => "END_DIV"
-+   | (T 34) => "START_DL"
-+   | (T 35) => "END_DL"
-+   | (T 36) => "START_DT"
-+   | (T 37) => "END_DT"
-+   | (T 38) => "START_EM"
-+   | (T 39) => "END_EM"
-+   | (T 40) => "START_FONT"
-+   | (T 41) => "END_FONT"
-+   | (T 42) => "START_BASEFONT"
-+   | (T 43) => "END_BASEFONT"
-+   | (T 44) => "START_FORM"
-+   | (T 45) => "END_FORM"
-+   | (T 46) => "START_H1"
-+   | (T 47) => "END_H1"
-+   | (T 48) => "START_H2"
-+   | (T 49) => "END_H2"
-+   | (T 50) => "START_H3"
-+   | (T 51) => "END_H3"
-+   | (T 52) => "START_H4"
-+   | (T 53) => "END_H4"
-+   | (T 54) => "START_H5"
-+   | (T 55) => "END_H5"
-+   | (T 56) => "START_H6"
-+   | (T 57) => "END_H6"
-+   | (T 58) => "START_HEAD"
-+   | (T 59) => "END_HEAD"
-+   | (T 60) => "TAG_HR"
-+   | (T 61) => "START_HTML"
-+   | (T 62) => "END_HTML"
-+   | (T 63) => "START_I"
-+   | (T 64) => "END_I"
-+   | (T 65) => "TAG_IMG"
-+   | (T 66) => "TAG_INPUT"
-+   | (T 67) => "TAG_ISINDEX"
-+   | (T 68) => "START_KBD"
-+   | (T 69) => "END_KBD"
-+   | (T 70) => "START_LI"
-+   | (T 71) => "END_LI"
-+   | (T 72) => "TAG_LINK"
-+   | (T 73) => "START_MAP"
-+   | (T 74) => "END_MAP"
-+   | (T 75) => "START_MENU"
-+   | (T 76) => "END_MENU"
-+   | (T 77) => "TAG_META"
-+   | (T 78) => "START_OL"
-+   | (T 79) => "END_OL"
-+   | (T 80) => "START_OPTION"
-+   | (T 81) => "END_OPTION"
-+   | (T 82) => "START_P"
-+   | (T 83) => "END_P"
-+   | (T 84) => "TAG_PARAM"
-+   | (T 85) => "START_PRE"
-+   | (T 86) => "END_PRE"
-+   | (T 87) => "START_SAMP"
-+   | (T 88) => "END_SAMP"
-+   | (T 89) => "START_SCRIPT"
-+   | (T 90) => "END_SCRIPT"
-+   | (T 91) => "START_SELECT"
-+   | (T 92) => "END_SELECT"
-+   | (T 93) => "START_SMALL"
-+   | (T 94) => "END_SMALL"
-+   | (T 95) => "START_STRIKE"
-+   | (T 96) => "END_STRIKE"
-+   | (T 97) => "START_STRONG"
-+   | (T 98) => "END_STRONG"
-+   | (T 99) => "START_STYLE"
-+   | (T 100) => "END_STYLE"
-+   | (T 101) => "START_SUB"
-+   | (T 102) => "END_SUB"
-+   | (T 103) => "START_SUP"
-+   | (T 104) => "END_SUP"
-+   | (T 105) => "START_TABLE"
-+   | (T 106) => "END_TABLE"
-+   | (T 107) => "START_TD"
-+   | (T 108) => "END_TD"
-+   | (T 109) => "START_TEXTAREA"
-+   | (T 110) => "END_TEXTAREA"
-+   | (T 111) => "START_TH"
-+   | (T 112) => "END_TH"
-+   | (T 113) => "START_TITLE"
-+   | (T 114) => "END_TITLE"
-+   | (T 115) => "START_TR"
-+   | (T 116) => "END_TR"
-+   | (T 117) => "START_TT"
-+   | (T 118) => "END_TT"
-+   | (T 119) => "START_U"
-+   | (T 120) => "END_U"
-+   | (T 121) => "START_UL"
-+   | (T 122) => "END_UL"
-+   | (T 123) => "START_VAR"
-+   | (T 124) => "END_VAR"
-+   | (T 125) => "PCDATA"
-+   | (T 126) => "CHAR_REF"
-+   | (T 127) => "ENTITY_REF"
-+   | _ => "bogus-term"
-+ local open Header in
-+ val errtermvalue=
-+ fn (T 1) => MlyValue.START_A(([])) | 
-+ (T 5) => MlyValue.START_APPLET((
-+ [
-+     ("CODE", HTMLAttrs.NAME ""),
-+     ("WIDTH", HTMLAttrs.NAME ""),
-+     ("HEIGHT", HTMLAttrs.NAME "")
-+   ]
-+ )) | 
-+ (T 7) => MlyValue.TAG_AREA(([("ALT", HTMLAttrs.NAME "")])) | 
-+ (T 10) => MlyValue.TAG_BASE(([("URL", HTMLAttrs.NAME "")])) | 
-+ (T 15) => MlyValue.START_BODY(([])) | 
-+ (T 17) => MlyValue.TAG_BR(([])) | 
-+ (T 18) => MlyValue.START_CAPTION(([])) | 
-+ (T 30) => MlyValue.START_DIR(([])) | 
-+ (T 32) => MlyValue.START_DIV(([])) | 
-+ (T 34) => MlyValue.START_DL(([])) | 
-+ (T 40) => MlyValue.START_FONT(([])) | 
-+ (T 42) => MlyValue.START_BASEFONT(([])) | 
-+ (T 44) => MlyValue.START_FORM(([])) | 
-+ (T 46) => MlyValue.START_H1(([])) | 
-+ (T 48) => MlyValue.START_H2(([])) | 
-+ (T 50) => MlyValue.START_H3(([])) | 
-+ (T 52) => MlyValue.START_H4(([])) | 
-+ (T 54) => MlyValue.START_H5(([])) | 
-+ (T 56) => MlyValue.START_H6(([])) | 
-+ (T 60) => MlyValue.TAG_HR(([])) | 
-+ (T 65) => MlyValue.TAG_IMG(([("SRC", HTMLAttrs.NAME "")])) | 
-+ (T 66) => MlyValue.TAG_INPUT(([])) | 
-+ (T 67) => MlyValue.TAG_ISINDEX(([])) | 
-+ (T 72) => MlyValue.TAG_LINK(([])) | 
-+ (T 73) => MlyValue.START_MAP(([])) | 
-+ (T 75) => MlyValue.START_MENU(([])) | 
-+ (T 77) => MlyValue.TAG_META(([("CONTENT", HTMLAttrs.NAME "")])) | 
-+ (T 78) => MlyValue.START_OL(([])) | 
-+ (T 80) => MlyValue.START_OPTION(([])) | 
-+ (T 82) => MlyValue.START_P(([])) | 
-+ (T 84) => MlyValue.TAG_PARAM(([("NAME", HTMLAttrs.NAME "")])) | 
-+ (T 85) => MlyValue.START_PRE(([])) | 
-+ (T 91) => MlyValue.START_SELECT(([("NAME", HTMLAttrs.NAME "")])) | 
-+ (T 105) => MlyValue.START_TABLE(([])) | 
-+ (T 107) => MlyValue.START_TD(([])) | 
-+ (T 109) => MlyValue.START_TEXTAREA((
-+ [
-+     ("NAME", HTMLAttrs.NAME ""),
-+     ("ROWS", HTMLAttrs.NAME "0"),
-+     ("COLS", HTMLAttrs.NAME "0")
-+   ]
-+ )) | 
-+ (T 111) => MlyValue.START_TH(([])) | 
-+ (T 115) => MlyValue.START_TR(([])) | 
-+ (T 121) => MlyValue.START_UL(([])) | 
-+ _ => MlyValue.VOID
-+ end
-+ val terms : term list = nil
-+  $$ (T 124) $$ (T 123) $$ (T 122) $$ (T 120) $$ (T 119) $$ (T 118) $$ 
-+ (T 117) $$ (T 116) $$ (T 114) $$ (T 113) $$ (T 112) $$ (T 110) $$ (T 
-+ 108) $$ (T 106) $$ (T 104) $$ (T 103) $$ (T 102) $$ (T 101) $$ (T 100)
-+  $$ (T 99) $$ (T 98) $$ (T 97) $$ (T 96) $$ (T 95) $$ (T 94) $$ (T 93)
-+  $$ (T 92) $$ (T 90) $$ (T 89) $$ (T 88) $$ (T 87) $$ (T 86) $$ (T 83)
-+  $$ (T 81) $$ (T 79) $$ (T 76) $$ (T 74) $$ (T 71) $$ (T 69) $$ (T 68)
-+  $$ (T 64) $$ (T 63) $$ (T 62) $$ (T 61) $$ (T 59) $$ (T 58) $$ (T 57)
-+  $$ (T 55) $$ (T 53) $$ (T 51) $$ (T 49) $$ (T 47) $$ (T 45) $$ (T 43)
-+  $$ (T 41) $$ (T 39) $$ (T 38) $$ (T 37) $$ (T 36) $$ (T 35) $$ (T 33)
-+  $$ (T 31) $$ (T 29) $$ (T 28) $$ (T 27) $$ (T 26) $$ (T 25) $$ (T 24)
-+  $$ (T 23) $$ (T 22) $$ (T 21) $$ (T 20) $$ (T 19) $$ (T 16) $$ (T 14)
-+  $$ (T 13) $$ (T 12) $$ (T 11) $$ (T 9) $$ (T 8) $$ (T 6) $$ (T 4) $$ 
-+ (T 3) $$ (T 2) $$ (T 0)end
-+ structure Actions =
-+ struct 
-+ exception mlyAction of int
-+ local open Header in
-+ val actions = 
-+ fn (i392,defaultPos,stack,
-+     (ctx):arg) =>
-+ case (i392,stack)
-+ of  ( 0, ( ( _, ( _, _, EndHTML1right)) :: ( _, ( MlyValue.Body Body,
-+  _, _)) :: ( _, ( MlyValue.Head Head, _, _)) :: ( _, ( 
-+ MlyValue.StartHTML StartHTML, StartHTML1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Document (
-+ HTML.HTML{version=StartHTML, head=Head, body=Body})
-+  in ( LrTable.NT 0, ( result, StartHTML1left, EndHTML1right), rest671)
-+ 
-+ end
-+ |  ( 1, ( rest671)) => let val  result = MlyValue.StartHTML (NONE)
-+  in ( LrTable.NT 1, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 2, ( ( _, ( _, START_HTML1left, START_HTML1right)) :: rest671))
-+  => let val  result = MlyValue.StartHTML (NONE)
-+  in ( LrTable.NT 1, ( result, START_HTML1left, START_HTML1right), 
++
++fun mkBody blks = HTML.BODY{
++	background = NONE,
++	bgcolor = NONE,
++	text = NONE,
++	link = NONE,
++	vlink = NONE,
++	alink = NONE,
++	content = mkBlock blks
++      }
++
++
++end
++structure LrTable = Token.LrTable
++structure Token = Token
++local open LrTable in 
++val table=let val actionRows =
++"\
++\\001\000\001\000\000\000\000\000\
++\\001\000\002\000\081\000\004\000\080\000\006\000\079\000\009\000\078\000\
++\\012\000\077\000\014\000\076\000\016\000\075\000\018\000\074\000\
++\\021\000\073\000\023\000\072\000\025\000\071\000\029\000\070\000\
++\\031\000\069\000\033\000\068\000\035\000\067\000\039\000\066\000\
++\\041\000\065\000\043\000\064\000\045\000\063\000\047\000\062\000\
++\\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
++\\057\000\057\000\061\000\056\000\064\000\055\000\066\000\054\000\
++\\067\000\053\000\069\000\052\000\074\000\051\000\076\000\050\000\
++\\079\000\049\000\083\000\048\000\085\000\047\000\086\000\046\000\
++\\088\000\045\000\092\000\044\000\094\000\043\000\096\000\042\000\
++\\098\000\041\000\102\000\040\000\104\000\039\000\106\000\038\000\
++\\110\000\037\000\118\000\036\000\120\000\035\000\122\000\034\000\
++\\124\000\033\000\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
++\\001\000\003\000\241\000\000\000\
++\\001\000\005\000\240\000\000\000\
++\\001\000\007\000\235\000\000\000\
++\\001\000\010\000\234\000\000\000\
++\\001\000\013\000\233\000\000\000\
++\\001\000\015\000\232\000\000\000\
++\\001\000\020\000\004\001\000\000\
++\\001\000\022\000\231\000\000\000\
++\\001\000\024\000\230\000\000\000\
++\\001\000\026\000\229\000\000\000\
++\\001\000\030\000\228\000\000\000\
++\\001\000\032\000\227\000\000\000\
++\\001\000\034\000\226\000\000\000\
++\\001\000\036\000\223\000\000\000\
++\\001\000\040\000\221\000\000\000\
++\\001\000\042\000\220\000\000\000\
++\\001\000\044\000\219\000\000\000\
++\\001\000\046\000\218\000\000\000\
++\\001\000\048\000\217\000\000\000\
++\\001\000\050\000\216\000\000\000\
++\\001\000\052\000\215\000\000\000\
++\\001\000\054\000\214\000\000\000\
++\\001\000\056\000\213\000\000\000\
++\\001\000\058\000\212\000\000\000\
++\\001\000\065\000\211\000\000\000\
++\\001\000\070\000\210\000\000\000\
++\\001\000\075\000\208\000\000\000\
++\\001\000\077\000\207\000\000\000\
++\\001\000\080\000\206\000\000\000\
++\\001\000\087\000\205\000\000\000\
++\\001\000\089\000\204\000\000\000\
++\\001\000\091\000\170\000\000\000\
++\\001\000\091\000\244\000\000\000\
++\\001\000\093\000\202\000\000\000\
++\\001\000\095\000\201\000\000\000\
++\\001\000\097\000\200\000\000\000\
++\\001\000\099\000\199\000\000\000\
++\\001\000\101\000\169\000\000\000\
++\\001\000\103\000\198\000\000\000\
++\\001\000\105\000\197\000\000\000\
++\\001\000\107\000\255\000\000\000\
++\\001\000\108\000\003\001\112\000\002\001\000\000\
++\\001\000\111\000\192\000\000\000\
++\\001\000\114\000\083\000\000\000\
++\\001\000\115\000\242\000\000\000\
++\\001\000\116\000\195\000\000\000\
++\\001\000\119\000\191\000\000\000\
++\\001\000\121\000\190\000\000\000\
++\\001\000\123\000\185\000\000\000\
++\\001\000\125\000\183\000\000\000\
++\\029\001\000\000\
++\\030\001\062\000\004\000\000\000\
++\\031\001\000\000\
++\\032\001\063\000\109\000\000\000\
++\\033\001\000\000\
++\\034\001\000\000\
++\\035\001\059\000\007\000\000\000\
++\\036\001\000\000\
++\\037\001\060\000\085\000\000\000\
++\\038\001\000\000\
++\\039\001\000\000\
++\\040\001\011\000\016\000\068\000\015\000\073\000\014\000\078\000\013\000\
++\\090\000\012\000\100\000\011\000\000\000\
++\\041\001\000\000\
++\\042\001\000\000\
++\\043\001\000\000\
++\\044\001\000\000\
++\\045\001\000\000\
++\\046\001\000\000\
++\\047\001\000\000\
++\\048\001\000\000\
++\\049\001\017\000\107\000\000\000\
++\\050\001\000\000\
++\\051\001\000\000\
++\\052\001\000\000\
++\\053\001\000\000\
++\\054\001\000\000\
++\\055\001\000\000\
++\\056\001\000\000\
++\\057\001\000\000\
++\\058\001\002\000\081\000\004\000\080\000\006\000\079\000\009\000\078\000\
++\\012\000\077\000\014\000\076\000\018\000\074\000\021\000\073\000\
++\\023\000\072\000\025\000\071\000\029\000\070\000\031\000\069\000\
++\\033\000\068\000\035\000\067\000\039\000\066\000\041\000\065\000\
++\\043\000\064\000\045\000\063\000\047\000\062\000\049\000\061\000\
++\\051\000\060\000\053\000\059\000\055\000\058\000\057\000\057\000\
++\\061\000\056\000\064\000\055\000\066\000\054\000\067\000\053\000\
++\\068\000\098\000\069\000\052\000\074\000\051\000\076\000\050\000\
++\\079\000\049\000\083\000\048\000\085\000\047\000\086\000\046\000\
++\\088\000\045\000\090\000\097\000\092\000\044\000\094\000\043\000\
++\\096\000\042\000\098\000\041\000\102\000\040\000\104\000\039\000\
++\\106\000\038\000\110\000\037\000\118\000\036\000\120\000\035\000\
++\\122\000\034\000\124\000\033\000\126\000\032\000\127\000\031\000\
++\\128\000\030\000\000\000\
++\\059\001\000\000\
++\\060\001\000\000\
++\\061\001\000\000\
++\\062\001\000\000\
++\\063\001\000\000\
++\\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
++\\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
++\\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
++\\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
++\\079\000\049\000\083\000\048\000\084\000\103\000\086\000\046\000\
++\\106\000\038\000\122\000\034\000\000\000\
++\\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
++\\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
++\\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
++\\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
++\\079\000\049\000\083\000\048\000\084\000\173\000\086\000\046\000\
++\\106\000\038\000\122\000\034\000\000\000\
++\\064\001\004\000\080\000\014\000\076\000\021\000\073\000\031\000\069\000\
++\\033\000\068\000\035\000\067\000\045\000\063\000\047\000\062\000\
++\\049\000\061\000\051\000\060\000\053\000\059\000\055\000\058\000\
++\\057\000\057\000\061\000\056\000\068\000\098\000\076\000\050\000\
++\\079\000\049\000\083\000\048\000\084\000\178\000\086\000\046\000\
++\\106\000\038\000\122\000\034\000\000\000\
++\\065\001\000\000\
++\\066\001\000\000\
++\\067\001\000\000\
++\\068\001\000\000\
++\\069\001\000\000\
++\\070\001\000\000\
++\\071\001\000\000\
++\\072\001\000\000\
++\\073\001\000\000\
++\\074\001\000\000\
++\\075\001\000\000\
++\\076\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
++\\018\000\074\000\023\000\072\000\025\000\071\000\029\000\070\000\
++\\039\000\066\000\041\000\065\000\043\000\064\000\064\000\055\000\
++\\066\000\054\000\067\000\053\000\069\000\052\000\074\000\051\000\
++\\083\000\048\000\085\000\047\000\088\000\045\000\090\000\097\000\
++\\092\000\044\000\094\000\043\000\096\000\042\000\098\000\041\000\
++\\102\000\040\000\104\000\039\000\110\000\037\000\118\000\036\000\
++\\120\000\035\000\124\000\033\000\126\000\032\000\127\000\031\000\
++\\128\000\030\000\000\000\
++\\077\001\000\000\
++\\078\001\000\000\
++\\079\001\000\000\
++\\080\001\083\000\048\000\084\000\239\000\000\000\
++\\080\001\083\000\048\000\084\000\012\001\000\000\
++\\081\001\000\000\
++\\082\001\000\000\
++\\083\001\000\000\
++\\084\001\000\000\
++\\085\001\000\000\
++\\086\001\000\000\
++\\087\001\000\000\
++\\088\001\000\000\
++\\089\001\000\000\
++\\090\001\000\000\
++\\091\001\000\000\
++\\092\001\000\000\
++\\093\001\000\000\
++\\094\001\000\000\
++\\095\001\000\000\
++\\096\001\000\000\
++\\097\001\000\000\
++\\098\001\000\000\
++\\099\001\071\000\115\000\000\000\
++\\100\001\000\000\
++\\101\001\000\000\
++\\102\001\027\000\151\000\037\000\150\000\000\000\
++\\103\001\000\000\
++\\104\001\000\000\
++\\105\001\000\000\
++\\106\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
++\\014\000\076\000\018\000\074\000\021\000\073\000\023\000\072\000\
++\\025\000\071\000\029\000\070\000\031\000\069\000\033\000\068\000\
++\\035\000\067\000\039\000\066\000\041\000\065\000\043\000\064\000\
++\\045\000\063\000\061\000\056\000\064\000\055\000\066\000\054\000\
++\\067\000\053\000\068\000\098\000\069\000\052\000\074\000\051\000\
++\\076\000\050\000\079\000\049\000\083\000\048\000\085\000\047\000\
++\\086\000\046\000\088\000\045\000\090\000\097\000\092\000\044\000\
++\\094\000\043\000\096\000\042\000\098\000\041\000\102\000\040\000\
++\\104\000\039\000\106\000\038\000\110\000\037\000\118\000\036\000\
++\\120\000\035\000\122\000\034\000\124\000\033\000\126\000\032\000\
++\\127\000\031\000\128\000\030\000\000\000\
++\\107\001\000\000\
++\\108\001\000\000\
++\\109\001\000\000\
++\\110\001\000\000\
++\\111\001\014\000\076\000\021\000\073\000\031\000\069\000\033\000\068\000\
++\\035\000\067\000\045\000\063\000\061\000\056\000\068\000\098\000\
++\\076\000\050\000\079\000\049\000\083\000\048\000\084\000\252\000\
++\\086\000\046\000\106\000\038\000\122\000\034\000\000\000\
++\\111\001\014\000\076\000\021\000\073\000\031\000\069\000\033\000\068\000\
++\\035\000\067\000\045\000\063\000\061\000\056\000\068\000\098\000\
++\\076\000\050\000\079\000\049\000\083\000\048\000\084\000\016\001\
++\\086\000\046\000\106\000\038\000\122\000\034\000\000\000\
++\\112\001\000\000\
++\\113\001\000\000\
++\\114\001\000\000\
++\\115\001\072\000\248\000\000\000\
++\\116\001\000\000\
++\\117\001\038\000\008\001\000\000\
++\\118\001\000\000\
++\\119\001\028\000\010\001\000\000\
++\\120\001\000\000\
++\\121\001\000\000\
++\\122\001\019\000\120\000\000\000\
++\\123\001\000\000\
++\\124\001\116\000\195\000\000\000\
++\\125\001\000\000\
++\\126\001\117\000\020\001\000\000\
++\\127\001\000\000\
++\\128\001\108\000\003\001\112\000\002\001\000\000\
++\\129\001\000\000\
++\\130\001\000\000\
++\\131\001\113\000\026\001\000\000\
++\\132\001\000\000\
++\\133\001\109\000\027\001\000\000\
++\\134\001\000\000\
++\\135\001\002\000\081\000\006\000\079\000\009\000\078\000\012\000\077\000\
++\\018\000\074\000\023\000\072\000\025\000\071\000\029\000\070\000\
++\\039\000\066\000\041\000\065\000\043\000\064\000\064\000\055\000\
++\\066\000\054\000\067\000\053\000\069\000\052\000\074\000\051\000\
++\\085\000\047\000\088\000\045\000\090\000\097\000\092\000\044\000\
++\\094\000\043\000\096\000\042\000\098\000\041\000\102\000\040\000\
++\\104\000\039\000\110\000\037\000\118\000\036\000\120\000\035\000\
++\\124\000\033\000\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
++\\136\001\000\000\
++\\137\001\000\000\
++\\138\001\000\000\
++\\139\001\000\000\
++\\140\001\000\000\
++\\141\001\000\000\
++\\142\001\000\000\
++\\143\001\000\000\
++\\144\001\000\000\
++\\145\001\000\000\
++\\146\001\000\000\
++\\147\001\000\000\
++\\148\001\000\000\
++\\149\001\000\000\
++\\150\001\000\000\
++\\151\001\000\000\
++\\152\001\000\000\
++\\153\001\000\000\
++\\154\001\000\000\
++\\155\001\000\000\
++\\156\001\000\000\
++\\157\001\000\000\
++\\158\001\000\000\
++\\159\001\000\000\
++\\160\001\000\000\
++\\161\001\000\000\
++\\162\001\000\000\
++\\163\001\000\000\
++\\164\001\000\000\
++\\165\001\000\000\
++\\166\001\000\000\
++\\167\001\000\000\
++\\168\001\000\000\
++\\169\001\008\000\134\000\000\000\
++\\170\001\000\000\
++\\171\001\000\000\
++\\172\001\000\000\
++\\173\001\000\000\
++\\174\001\081\000\127\000\000\000\
++\\175\001\000\000\
++\\176\001\082\000\006\001\000\000\
++\\177\001\000\000\
++\\178\001\000\000\
++\\179\001\126\000\032\000\127\000\031\000\128\000\030\000\000\000\
++\\180\001\000\000\
++\\181\001\000\000\
++\\182\001\000\000\
++\\183\001\000\000\
++\"
++val actionRowNumbers =
++"\053\000\058\000\054\000\063\000\
++\\001\000\059\000\063\000\045\000\
++\\060\000\206\000\206\000\065\000\
++\\066\000\067\000\068\000\164\000\
++\\168\000\167\000\166\000\165\000\
++\\081\000\110\000\109\000\087\000\
++\\081\000\081\000\072\000\055\000\
++\\210\000\209\000\208\000\162\000\
++\\125\000\162\000\162\000\206\000\
++\\149\000\162\000\162\000\162\000\
++\\162\000\162\000\201\000\162\000\
++\\162\000\195\000\162\000\125\000\
++\\125\000\196\000\162\000\198\000\
++\\189\000\162\000\115\000\162\000\
++\\162\000\162\000\162\000\162\000\
++\\162\000\081\000\162\000\162\000\
++\\162\000\128\000\081\000\125\000\
++\\162\000\162\000\162\000\081\000\
++\\193\000\081\000\081\000\162\000\
++\\162\000\162\000\101\000\162\000\
++\\064\000\206\000\057\000\061\000\
++\\206\000\205\000\039\000\033\000\
++\\081\000\169\000\088\000\081\000\
++\\117\000\081\000\076\000\206\000\
++\\118\000\089\000\081\000\081\000\
++\\080\000\081\000\078\000\077\000\
++\\071\000\073\000\052\000\056\000\
++\\162\000\161\000\051\000\125\000\
++\\050\000\132\000\049\000\048\000\
++\\044\000\047\000\162\000\041\000\
++\\040\000\038\000\037\000\036\000\
++\\035\000\206\000\032\000\031\000\
++\\119\000\030\000\029\000\028\000\
++\\196\000\027\000\026\000\025\000\
++\\024\000\023\000\022\000\021\000\
++\\020\000\074\000\019\000\018\000\
++\\017\000\016\000\128\000\015\000\
++\\162\000\132\000\014\000\013\000\
++\\012\000\011\000\010\000\009\000\
++\\075\000\007\000\006\000\005\000\
++\\004\000\101\000\105\000\003\000\
++\\002\000\046\000\207\000\069\000\
++\\070\000\082\000\086\000\081\000\
++\\084\000\083\000\034\000\093\000\
++\\081\000\091\000\090\000\079\000\
++\\163\000\186\000\126\000\120\000\
++\\132\000\142\000\137\000\132\000\
++\\174\000\171\000\200\000\151\000\
++\\042\000\043\000\008\000\179\000\
++\\178\000\181\000\175\000\177\000\
++\\199\000\203\000\184\000\148\000\
++\\121\000\123\000\194\000\197\000\
++\\185\000\172\000\099\000\098\000\
++\\097\000\096\000\095\000\094\000\
++\\114\000\192\000\191\000\180\000\
++\\129\000\124\000\144\000\146\000\
++\\111\000\122\000\183\000\182\000\
++\\187\000\112\000\113\000\176\000\
++\\173\000\190\000\102\000\106\000\
++\\104\000\101\000\100\000\188\000\
++\\063\000\085\000\170\000\092\000\
++\\133\000\127\000\143\000\136\000\
++\\138\000\132\000\132\000\134\000\
++\\152\000\116\000\155\000\153\000\
++\\081\000\081\000\150\000\201\000\
++\\204\000\130\000\145\000\131\000\
++\\147\000\108\000\101\000\103\000\
++\\062\000\141\000\132\000\139\000\
++\\135\000\156\000\154\000\158\000\
++\\160\000\202\000\107\000\140\000\
++\\157\000\159\000\000\000"
++val gotoT =
++"\
++\\001\000\026\001\002\000\001\000\000\000\
++\\004\000\004\000\005\000\003\000\000\000\
++\\000\000\
++\\007\000\008\000\008\000\007\000\009\000\006\000\000\000\
++\\010\000\027\000\014\000\026\000\017\000\025\000\020\000\024\000\
++\\022\000\023\000\023\000\022\000\033\000\021\000\041\000\020\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\008\000\080\000\009\000\006\000\000\000\
++\\000\000\
++\\006\000\082\000\000\000\
++\\050\000\086\000\051\000\085\000\052\000\084\000\000\000\
++\\050\000\087\000\051\000\085\000\052\000\084\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\015\000\094\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\016\000\100\000\017\000\099\000\020\000\092\000\021\000\098\000\
++\\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
++\\015\000\102\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\015\000\103\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\012\000\104\000\000\000\
++\\003\000\106\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\039\000\110\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\024\000\112\000\025\000\111\000\000\000\
++\\039\000\114\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\115\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\050\000\116\000\051\000\085\000\052\000\084\000\000\000\
++\\034\000\117\000\000\000\
++\\039\000\119\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\120\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\121\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\122\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\123\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\048\000\124\000\000\000\
++\\039\000\126\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\127\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\039\000\128\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\024\000\129\000\025\000\111\000\000\000\
++\\024\000\130\000\025\000\111\000\000\000\
++\\046\000\131\000\000\000\
++\\039\000\133\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\039\000\134\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\039\000\135\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\136\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\137\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\138\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\139\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\140\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\013\000\142\000\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\039\000\143\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\144\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\145\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\026\000\147\000\027\000\146\000\000\000\
++\\013\000\150\000\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\024\000\151\000\025\000\111\000\000\000\
++\\039\000\152\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\153\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\154\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\013\000\155\000\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\013\000\156\000\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\013\000\157\000\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\039\000\158\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\159\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\160\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\018\000\163\000\022\000\162\000\041\000\089\000\042\000\161\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\039\000\164\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\050\000\165\000\051\000\085\000\052\000\084\000\000\000\
++\\000\000\
++\\000\000\
++\\051\000\166\000\052\000\084\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\015\000\169\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\016\000\170\000\017\000\099\000\020\000\092\000\021\000\098\000\
++\\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
++\\015\000\172\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\015\000\173\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\050\000\174\000\051\000\085\000\052\000\084\000\000\000\
++\\000\000\
++\\016\000\175\000\017\000\099\000\020\000\092\000\021\000\098\000\
++\\022\000\097\000\023\000\022\000\033\000\021\000\000\000\
++\\015\000\177\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\015\000\178\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\015\000\179\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\040\000\180\000\041\000\089\000\042\000\108\000\043\000\019\000\
++\\044\000\018\000\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\024\000\182\000\025\000\111\000\000\000\
++\\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\185\000\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\035\000\192\000\036\000\191\000\000\000\
++\\039\000\194\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\050\000\201\000\051\000\085\000\052\000\084\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\046\000\207\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\026\000\220\000\027\000\146\000\000\000\
++\\000\000\
++\\039\000\222\000\040\000\109\000\041\000\089\000\042\000\108\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\223\000\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\018\000\234\000\022\000\162\000\041\000\089\000\042\000\161\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\019\000\236\000\022\000\235\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\015\000\241\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\015\000\243\000\017\000\093\000\020\000\092\000\021\000\091\000\
++\\022\000\090\000\023\000\022\000\033\000\021\000\041\000\089\000\
++\\042\000\088\000\043\000\019\000\044\000\018\000\045\000\017\000\
++\\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\244\000\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\030\000\245\000\000\000\
++\\020\000\092\000\021\000\249\000\022\000\248\000\023\000\022\000\
++\\029\000\247\000\033\000\021\000\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\251\000\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\035\000\252\000\036\000\191\000\000\000\
++\\000\000\
++\\037\000\255\000\038\000\254\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\049\000\003\001\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\031\000\005\001\000\000\
++\\032\000\007\001\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\019\000\009\001\022\000\235\000\000\000\
++\\000\000\
++\\018\000\011\001\022\000\162\000\041\000\089\000\042\000\161\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\008\000\012\001\009\000\006\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\020\000\092\000\021\000\249\000\022\000\248\000\023\000\022\000\
++\\029\000\013\001\033\000\021\000\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\015\001\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\016\001\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\037\000\017\001\038\000\254\000\000\000\
++\\000\000\
++\\013\000\019\001\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\013\000\020\001\015\000\141\000\017\000\093\000\020\000\092\000\
++\\021\000\091\000\022\000\090\000\023\000\022\000\033\000\021\000\
++\\041\000\089\000\042\000\088\000\043\000\019\000\044\000\018\000\
++\\045\000\017\000\047\000\016\000\052\000\015\000\000\000\
++\\000\000\
++\\048\000\021\001\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\018\000\022\001\022\000\162\000\041\000\089\000\042\000\161\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\020\000\092\000\021\000\187\000\022\000\186\000\023\000\022\000\
++\\028\000\023\001\033\000\021\000\041\000\089\000\042\000\184\000\
++\\043\000\019\000\044\000\018\000\045\000\017\000\047\000\016\000\
++\\052\000\015\000\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\\000\000\
++\"
++val numstates = 283
++val numrules = 155
++val s = ref "" and index = ref 0
++val string_to_int = fn () => 
++let val i = !index
++in index := i+2; Char.ord(String.sub(!s,i)) + Char.ord(String.sub(!s,i+1)) * 256
++end
++val string_to_list = fn s' =>
++    let val len = String.size s'
++        fun f () =
++           if !index < len then string_to_int() :: f()
++           else nil
++   in index := 0; s := s'; f ()
++   end
++val string_to_pairlist = fn (conv_key,conv_entry) =>
++     let fun f () =
++         case string_to_int()
++         of 0 => EMPTY
++          | n => PAIR(conv_key (n-1),conv_entry (string_to_int()),f())
++     in f
++     end
++val string_to_pairlist_default = fn (conv_key,conv_entry) =>
++    let val conv_row = string_to_pairlist(conv_key,conv_entry)
++    in fn () =>
++       let val default = conv_entry(string_to_int())
++           val row = conv_row()
++       in (row,default)
++       end
++   end
++val string_to_table = fn (convert_row,s') =>
++    let val len = String.size s'
++        fun f ()=
++           if !index < len then convert_row() :: f()
++           else nil
++     in (s := s'; index := 0; f ())
++     end
++local
++  val memo = Array.array(numstates+numrules,ERROR)
++  val _ =let fun g i=(Array.update(memo,i,REDUCE(i-numstates)); g(i+1))
++       fun f i =
++            if i=numstates then g i
++            else (Array.update(memo,i,SHIFT (STATE i)); f (i+1))
++          in f 0 handle Subscript => ()
++          end
++in
++val entry_to_action = fn 0 => ACCEPT | 1 => ERROR | j => Array.sub(memo,(j-2))
++end
++val gotoT=Array.fromList(string_to_table(string_to_pairlist(NT,STATE),gotoT))
++val actionRows=string_to_table(string_to_pairlist_default(T,entry_to_action),actionRows)
++val actionRowNumbers = string_to_list actionRowNumbers
++val actionT = let val actionRowLookUp=
++let val a=Array.fromList(actionRows) in fn i=>Array.sub(a,i) end
++in Array.fromList(map actionRowLookUp actionRowNumbers)
++end
++in LrTable.mkLrTable {actions=actionT,gotos=gotoT,numRules=numrules,
++numStates=numstates,initialState=STATE 0}
++end
++end
++local open Header in
++type pos = int
++type arg = int -> HTMLAttrs.context
++structure MlyValue = 
++struct
++datatype svalue = VOID | ntVOID of unit | ENTITY_REF of  (string)
++ | CHAR_REF of  (string) | PCDATA of  (string)
++ | START_UL of  (HTMLAttrVals.attrs)
++ | START_TR of  (HTMLAttrVals.attrs)
++ | START_TH of  (HTMLAttrVals.attrs)
++ | START_TEXTAREA of  (HTMLAttrVals.attrs)
++ | START_TD of  (HTMLAttrVals.attrs)
++ | START_TABLE of  (HTMLAttrVals.attrs)
++ | START_SELECT of  (HTMLAttrVals.attrs)
++ | START_PRE of  (HTMLAttrVals.attrs)
++ | TAG_PARAM of  (HTMLAttrVals.attrs)
++ | START_P of  (HTMLAttrVals.attrs)
++ | START_OPTION of  (HTMLAttrVals.attrs)
++ | START_OL of  (HTMLAttrVals.attrs)
++ | TAG_META of  (HTMLAttrVals.attrs)
++ | START_MENU of  (HTMLAttrVals.attrs)
++ | START_MAP of  (HTMLAttrVals.attrs)
++ | TAG_LINK of  (HTMLAttrVals.attrs)
++ | START_LI of  (HTMLAttrVals.attrs)
++ | TAG_ISINDEX of  (HTMLAttrVals.attrs)
++ | TAG_INPUT of  (HTMLAttrVals.attrs)
++ | TAG_IMG of  (HTMLAttrVals.attrs) | TAG_HR of  (HTMLAttrVals.attrs)
++ | START_H6 of  (HTMLAttrVals.attrs)
++ | START_H5 of  (HTMLAttrVals.attrs)
++ | START_H4 of  (HTMLAttrVals.attrs)
++ | START_H3 of  (HTMLAttrVals.attrs)
++ | START_H2 of  (HTMLAttrVals.attrs)
++ | START_H1 of  (HTMLAttrVals.attrs)
++ | START_FORM of  (HTMLAttrVals.attrs)
++ | START_BASEFONT of  (HTMLAttrVals.attrs)
++ | START_FONT of  (HTMLAttrVals.attrs)
++ | START_DL of  (HTMLAttrVals.attrs)
++ | START_DIV of  (HTMLAttrVals.attrs)
++ | START_DIR of  (HTMLAttrVals.attrs)
++ | START_CAPTION of  (HTMLAttrVals.attrs)
++ | TAG_BR of  (HTMLAttrVals.attrs)
++ | START_BODY of  (HTMLAttrVals.attrs)
++ | TAG_BASE of  (HTMLAttrVals.attrs)
++ | TAG_AREA of  (HTMLAttrVals.attrs)
++ | START_APPLET of  (HTMLAttrVals.attrs)
++ | START_A of  (HTMLAttrVals.attrs) | PCDataElem of  (HTML.pcdata)
++ | PCDataList of  (HTML.pcdata list) | PCData of  (HTML.pcdata)
++ | OptionList of  (HTML.select_option list) | Form of  (HTML.text)
++ | AreaList of  (HTML.area list) | Special of  (HTML.text)
++ | Phrase of  (HTML.text) | Font of  (HTML.text)
++ | Text of  (HTML.text) | TextWOScript of  (HTML.text)
++ | TextList' of  (HTML.text list) | TextList of  (HTML.text)
++ | TableCell of  (HTML.table_cell)
++ | TableCellList of  (HTML.table_cell list) | TableRow of  (HTML.tr)
++ | TableRowList of  (HTML.tr list)
++ | optCaption of  (HTML.caption option)
++ | Preformatted of  (HTML.block) | Flow2 of  (blklist_item list)
++ | Flow1 of  (blklist_item list) | DLItem of  (deflist_item)
++ | DLItemList of  (deflist_item list) | ListItem of  (HTML.list_item)
++ | ListItemList of  (HTML.list_item list) | List of  (HTML.block)
++ | Paragraph of  (HTML.block) | Block of  (HTML.block)
++ | BlockWOIndex of  (HTML.block)
++ | AddressContent2 of  (blklist_item list)
++ | AddressContent1 of  (blklist_item list)
++ | BodyElement of  (HTML.block) | BodyContent2 of  (blklist_item list)
++ | BodyContent1 of  (blklist_item list) | BodyContent0 of  (HTML.body)
++ | BodyContent of  (HTML.block) | Body of  (HTML.body)
++ | HeadElement of  (HTML.head_content)
++ | HeadElements of  (HTML.head_content list)
++ | HeadContents of  (HTML.head_content list)
++ | Head of  (HTML.head_content list)
++ | StartHTML of  (HTML.cdata option) | Document of  (HTML.html)
++end
++type svalue = MlyValue.svalue
++type result = HTML.html
++end
++structure EC=
++struct
++open LrTable
++infix 5 $$
++fun x $$ y = y::x
++val is_keyword =
++fn _ => false
++val preferred_change : (term list * term list) list = 
++nil
++val noShift = 
++fn (T 0) => true | _ => false
++val showTerminal =
++fn (T 0) => "EOF"
++  | (T 1) => "START_A"
++  | (T 2) => "END_A"
++  | (T 3) => "START_ADDRESS"
++  | (T 4) => "END_ADDRESS"
++  | (T 5) => "START_APPLET"
++  | (T 6) => "END_APPLET"
++  | (T 7) => "TAG_AREA"
++  | (T 8) => "START_B"
++  | (T 9) => "END_B"
++  | (T 10) => "TAG_BASE"
++  | (T 11) => "START_BIG"
++  | (T 12) => "END_BIG"
++  | (T 13) => "START_BLOCKQUOTE"
++  | (T 14) => "END_BLOCKQUOTE"
++  | (T 15) => "START_BODY"
++  | (T 16) => "END_BODY"
++  | (T 17) => "TAG_BR"
++  | (T 18) => "START_CAPTION"
++  | (T 19) => "END_CAPTION"
++  | (T 20) => "START_CENTER"
++  | (T 21) => "END_CENTER"
++  | (T 22) => "START_CITE"
++  | (T 23) => "END_CITE"
++  | (T 24) => "START_CODE"
++  | (T 25) => "END_CODE"
++  | (T 26) => "START_DD"
++  | (T 27) => "END_DD"
++  | (T 28) => "START_DFN"
++  | (T 29) => "END_DFN"
++  | (T 30) => "START_DIR"
++  | (T 31) => "END_DIR"
++  | (T 32) => "START_DIV"
++  | (T 33) => "END_DIV"
++  | (T 34) => "START_DL"
++  | (T 35) => "END_DL"
++  | (T 36) => "START_DT"
++  | (T 37) => "END_DT"
++  | (T 38) => "START_EM"
++  | (T 39) => "END_EM"
++  | (T 40) => "START_FONT"
++  | (T 41) => "END_FONT"
++  | (T 42) => "START_BASEFONT"
++  | (T 43) => "END_BASEFONT"
++  | (T 44) => "START_FORM"
++  | (T 45) => "END_FORM"
++  | (T 46) => "START_H1"
++  | (T 47) => "END_H1"
++  | (T 48) => "START_H2"
++  | (T 49) => "END_H2"
++  | (T 50) => "START_H3"
++  | (T 51) => "END_H3"
++  | (T 52) => "START_H4"
++  | (T 53) => "END_H4"
++  | (T 54) => "START_H5"
++  | (T 55) => "END_H5"
++  | (T 56) => "START_H6"
++  | (T 57) => "END_H6"
++  | (T 58) => "START_HEAD"
++  | (T 59) => "END_HEAD"
++  | (T 60) => "TAG_HR"
++  | (T 61) => "START_HTML"
++  | (T 62) => "END_HTML"
++  | (T 63) => "START_I"
++  | (T 64) => "END_I"
++  | (T 65) => "TAG_IMG"
++  | (T 66) => "TAG_INPUT"
++  | (T 67) => "TAG_ISINDEX"
++  | (T 68) => "START_KBD"
++  | (T 69) => "END_KBD"
++  | (T 70) => "START_LI"
++  | (T 71) => "END_LI"
++  | (T 72) => "TAG_LINK"
++  | (T 73) => "START_MAP"
++  | (T 74) => "END_MAP"
++  | (T 75) => "START_MENU"
++  | (T 76) => "END_MENU"
++  | (T 77) => "TAG_META"
++  | (T 78) => "START_OL"
++  | (T 79) => "END_OL"
++  | (T 80) => "START_OPTION"
++  | (T 81) => "END_OPTION"
++  | (T 82) => "START_P"
++  | (T 83) => "END_P"
++  | (T 84) => "TAG_PARAM"
++  | (T 85) => "START_PRE"
++  | (T 86) => "END_PRE"
++  | (T 87) => "START_SAMP"
++  | (T 88) => "END_SAMP"
++  | (T 89) => "START_SCRIPT"
++  | (T 90) => "END_SCRIPT"
++  | (T 91) => "START_SELECT"
++  | (T 92) => "END_SELECT"
++  | (T 93) => "START_SMALL"
++  | (T 94) => "END_SMALL"
++  | (T 95) => "START_STRIKE"
++  | (T 96) => "END_STRIKE"
++  | (T 97) => "START_STRONG"
++  | (T 98) => "END_STRONG"
++  | (T 99) => "START_STYLE"
++  | (T 100) => "END_STYLE"
++  | (T 101) => "START_SUB"
++  | (T 102) => "END_SUB"
++  | (T 103) => "START_SUP"
++  | (T 104) => "END_SUP"
++  | (T 105) => "START_TABLE"
++  | (T 106) => "END_TABLE"
++  | (T 107) => "START_TD"
++  | (T 108) => "END_TD"
++  | (T 109) => "START_TEXTAREA"
++  | (T 110) => "END_TEXTAREA"
++  | (T 111) => "START_TH"
++  | (T 112) => "END_TH"
++  | (T 113) => "START_TITLE"
++  | (T 114) => "END_TITLE"
++  | (T 115) => "START_TR"
++  | (T 116) => "END_TR"
++  | (T 117) => "START_TT"
++  | (T 118) => "END_TT"
++  | (T 119) => "START_U"
++  | (T 120) => "END_U"
++  | (T 121) => "START_UL"
++  | (T 122) => "END_UL"
++  | (T 123) => "START_VAR"
++  | (T 124) => "END_VAR"
++  | (T 125) => "PCDATA"
++  | (T 126) => "CHAR_REF"
++  | (T 127) => "ENTITY_REF"
++  | _ => "bogus-term"
++local open Header in
++val errtermvalue=
++fn (T 1) => MlyValue.START_A(([])) | 
++(T 5) => MlyValue.START_APPLET((
++[
++    ("CODE", HTMLAttrs.NAME ""),
++    ("WIDTH", HTMLAttrs.NAME ""),
++    ("HEIGHT", HTMLAttrs.NAME "")
++  ]
++)) | 
++(T 7) => MlyValue.TAG_AREA(([("ALT", HTMLAttrs.NAME "")])) | 
++(T 10) => MlyValue.TAG_BASE(([("URL", HTMLAttrs.NAME "")])) | 
++(T 15) => MlyValue.START_BODY(([])) | 
++(T 17) => MlyValue.TAG_BR(([])) | 
++(T 18) => MlyValue.START_CAPTION(([])) | 
++(T 30) => MlyValue.START_DIR(([])) | 
++(T 32) => MlyValue.START_DIV(([])) | 
++(T 34) => MlyValue.START_DL(([])) | 
++(T 40) => MlyValue.START_FONT(([])) | 
++(T 42) => MlyValue.START_BASEFONT(([])) | 
++(T 44) => MlyValue.START_FORM(([])) | 
++(T 46) => MlyValue.START_H1(([])) | 
++(T 48) => MlyValue.START_H2(([])) | 
++(T 50) => MlyValue.START_H3(([])) | 
++(T 52) => MlyValue.START_H4(([])) | 
++(T 54) => MlyValue.START_H5(([])) | 
++(T 56) => MlyValue.START_H6(([])) | 
++(T 60) => MlyValue.TAG_HR(([])) | 
++(T 65) => MlyValue.TAG_IMG(([("SRC", HTMLAttrs.NAME "")])) | 
++(T 66) => MlyValue.TAG_INPUT(([])) | 
++(T 67) => MlyValue.TAG_ISINDEX(([])) | 
++(T 72) => MlyValue.TAG_LINK(([])) | 
++(T 73) => MlyValue.START_MAP(([])) | 
++(T 75) => MlyValue.START_MENU(([])) | 
++(T 77) => MlyValue.TAG_META(([("CONTENT", HTMLAttrs.NAME "")])) | 
++(T 78) => MlyValue.START_OL(([])) | 
++(T 80) => MlyValue.START_OPTION(([])) | 
++(T 82) => MlyValue.START_P(([])) | 
++(T 84) => MlyValue.TAG_PARAM(([("NAME", HTMLAttrs.NAME "")])) | 
++(T 85) => MlyValue.START_PRE(([])) | 
++(T 91) => MlyValue.START_SELECT(([("NAME", HTMLAttrs.NAME "")])) | 
++(T 105) => MlyValue.START_TABLE(([])) | 
++(T 107) => MlyValue.START_TD(([])) | 
++(T 109) => MlyValue.START_TEXTAREA((
++[
++    ("NAME", HTMLAttrs.NAME ""),
++    ("ROWS", HTMLAttrs.NAME "0"),
++    ("COLS", HTMLAttrs.NAME "0")
++  ]
++)) | 
++(T 111) => MlyValue.START_TH(([])) | 
++(T 115) => MlyValue.START_TR(([])) | 
++(T 121) => MlyValue.START_UL(([])) | 
++_ => MlyValue.VOID
++end
++val terms : term list = nil
++ $$ (T 124) $$ (T 123) $$ (T 122) $$ (T 120) $$ (T 119) $$ (T 118) $$ 
++(T 117) $$ (T 116) $$ (T 114) $$ (T 113) $$ (T 112) $$ (T 110) $$ (T 
++108) $$ (T 106) $$ (T 104) $$ (T 103) $$ (T 102) $$ (T 101) $$ (T 100)
++ $$ (T 99) $$ (T 98) $$ (T 97) $$ (T 96) $$ (T 95) $$ (T 94) $$ (T 93)
++ $$ (T 92) $$ (T 90) $$ (T 89) $$ (T 88) $$ (T 87) $$ (T 86) $$ (T 83)
++ $$ (T 81) $$ (T 79) $$ (T 76) $$ (T 74) $$ (T 71) $$ (T 69) $$ (T 68)
++ $$ (T 64) $$ (T 63) $$ (T 62) $$ (T 61) $$ (T 59) $$ (T 58) $$ (T 57)
++ $$ (T 55) $$ (T 53) $$ (T 51) $$ (T 49) $$ (T 47) $$ (T 45) $$ (T 43)
++ $$ (T 41) $$ (T 39) $$ (T 38) $$ (T 37) $$ (T 36) $$ (T 35) $$ (T 33)
++ $$ (T 31) $$ (T 29) $$ (T 28) $$ (T 27) $$ (T 26) $$ (T 25) $$ (T 24)
++ $$ (T 23) $$ (T 22) $$ (T 21) $$ (T 20) $$ (T 19) $$ (T 16) $$ (T 14)
++ $$ (T 13) $$ (T 12) $$ (T 11) $$ (T 9) $$ (T 8) $$ (T 6) $$ (T 4) $$ 
++(T 3) $$ (T 2) $$ (T 0)end
++structure Actions =
++struct 
++exception mlyAction of int
++local open Header in
++val actions = 
++fn (i392,defaultPos,stack,
++    (ctx):arg) =>
++case (i392,stack)
++of  ( 0, ( ( _, ( _, _, EndHTML1right)) :: ( _, ( MlyValue.Body Body,
++ _, _)) :: ( _, ( MlyValue.Head Head, _, _)) :: ( _, ( 
++MlyValue.StartHTML StartHTML, StartHTML1left, _)) :: rest671)) => let
++ val  result = MlyValue.Document (
++HTML.HTML{version=StartHTML, head=Head, body=Body})
++ in ( LrTable.NT 0, ( result, StartHTML1left, EndHTML1right), rest671)
++
++end
++|  ( 1, ( rest671)) => let val  result = MlyValue.StartHTML (NONE)
++ in ( LrTable.NT 1, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 2, ( ( _, ( _, START_HTML1left, START_HTML1right)) :: rest671))
++ => let val  result = MlyValue.StartHTML (NONE)
++ in ( LrTable.NT 1, ( result, START_HTML1left, START_HTML1right), 
++rest671)
++end
++|  ( 3, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 2, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 4, ( ( _, ( _, END_HTML1left, END_HTML1right)) :: rest671)) =>
++ let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 2, ( result, END_HTML1left, END_HTML1right), rest671)
++
++end
++|  ( 5, ( ( _, ( _, _, EndHEAD1right)) :: ( _, ( MlyValue.HeadContents
++ HeadContents, _, _)) :: ( _, ( _, StartHEAD1left, _)) :: rest671)) =>
++ let val  result = MlyValue.Head (HeadContents)
++ in ( LrTable.NT 3, ( result, StartHEAD1left, EndHEAD1right), rest671)
++
++end
++|  ( 6, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 4, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 7, ( ( _, ( _, START_HEAD1left, START_HEAD1right)) :: rest671))
++ => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 4, ( result, START_HEAD1left, START_HEAD1right), 
++rest671)
++end
++|  ( 8, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 5, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 9, ( ( _, ( _, END_HEAD1left, END_HEAD1right)) :: rest671)) =>
++ let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 5, ( result, END_HEAD1left, END_HEAD1right), rest671)
++
++end
++|  ( 10, ( ( _, ( MlyValue.HeadElements HeadElements2, _, 
++HeadElements2right)) :: _ :: ( _, ( MlyValue.PCData PCData, _, _)) ::
++ _ :: ( _, ( MlyValue.HeadElements HeadElements1, HeadElements1left, _
++)) :: rest671)) => let val  result = MlyValue.HeadContents (
++HeadElements1 @ (HTML.Head_TITLE PCData :: HeadElements2))
++ in ( LrTable.NT 6, ( result, HeadElements1left, HeadElements2right), 
++rest671)
++end
++|  ( 11, ( rest671)) => let val  result = MlyValue.HeadElements ([])
++ in ( LrTable.NT 7, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 12, ( ( _, ( MlyValue.HeadElements HeadElements, _, 
++HeadElements1right)) :: ( _, ( MlyValue.HeadElement HeadElement, 
++HeadElement1left, _)) :: rest671)) => let val  result = 
++MlyValue.HeadElements (HeadElement :: HeadElements)
++ in ( LrTable.NT 7, ( result, HeadElement1left, HeadElements1right), 
++rest671)
++end
++|  ( 13, ( ( _, ( MlyValue.TAG_META TAG_META, (TAG_METAleft as 
++TAG_META1left), TAG_META1right)) :: rest671)) => let val  result = 
++MlyValue.HeadElement (HTMLAttrs.mkMETA(ctx TAG_METAleft, TAG_META))
++ in ( LrTable.NT 8, ( result, TAG_META1left, TAG_META1right), rest671)
++
++end
++|  ( 14, ( ( _, ( MlyValue.TAG_LINK TAG_LINK, (TAG_LINKleft as 
++TAG_LINK1left), TAG_LINK1right)) :: rest671)) => let val  result = 
++MlyValue.HeadElement (HTMLAttrs.mkLINK(ctx TAG_LINKleft, TAG_LINK))
++ in ( LrTable.NT 8, ( result, TAG_LINK1left, TAG_LINK1right), rest671)
++
++end
++|  ( 15, ( ( _, ( MlyValue.TAG_ISINDEX TAG_ISINDEX, (TAG_ISINDEXleft
++ as TAG_ISINDEX1left), TAG_ISINDEX1right)) :: rest671)) => let val  
++result = MlyValue.HeadElement (
++let val stuff =
++		    HTMLAttrs.mkISINDEX (ctx TAG_ISINDEXleft, TAG_ISINDEX)
++		  in HTML.Head_ISINDEX stuff end
++		
++)
++ in ( LrTable.NT 8, ( result, TAG_ISINDEX1left, TAG_ISINDEX1right), 
++rest671)
++end
++|  ( 16, ( ( _, ( MlyValue.TAG_BASE TAG_BASE, (TAG_BASEleft as 
++TAG_BASE1left), TAG_BASE1right)) :: rest671)) => let val  result = 
++MlyValue.HeadElement (HTMLAttrs.mkBASE(ctx TAG_BASEleft, TAG_BASE))
++ in ( LrTable.NT 8, ( result, TAG_BASE1left, TAG_BASE1right), rest671)
++
++end
++|  ( 17, ( ( _, ( _, _, END_STYLE1right)) :: ( _, ( MlyValue.PCData 
++PCData, _, _)) :: ( _, ( _, START_STYLE1left, _)) :: rest671)) => let
++ val  result = MlyValue.HeadElement (HTML.Head_STYLE(PCData))
++ in ( LrTable.NT 8, ( result, START_STYLE1left, END_STYLE1right), 
++rest671)
++end
++|  ( 18, ( ( _, ( _, _, END_SCRIPT1right)) :: ( _, ( MlyValue.PCData 
++PCData, _, _)) :: ( _, ( _, START_SCRIPT1left, _)) :: rest671)) => let
++ val  result = MlyValue.HeadElement (HTML.Head_SCRIPT(PCData))
++ in ( LrTable.NT 8, ( result, START_SCRIPT1left, END_SCRIPT1right), 
++rest671)
++end
++|  ( 19, ( ( _, ( _, _, EndBODY1right)) :: ( _, ( 
++MlyValue.BodyContent0 BodyContent0, BodyContent01left, _)) :: rest671)
++) => let val  result = MlyValue.Body (BodyContent0)
++ in ( LrTable.NT 9, ( result, BodyContent01left, EndBODY1right), 
++rest671)
++end
++|  ( 20, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 11, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 21, ( ( _, ( _, END_BODY1left, END_BODY1right)) :: rest671)) =>
++ let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 11, ( result, END_BODY1left, END_BODY1right), rest671
++)
++end
++|  ( 22, ( ( _, ( MlyValue.BodyContent1 BodyContent1, 
++BodyContent11left, BodyContent11right)) :: rest671)) => let val  
++result = MlyValue.BodyContent (mkBlock BodyContent1)
++ in ( LrTable.NT 12, ( result, BodyContent11left, BodyContent11right),
 + rest671)
-+ end
-+ |  ( 3, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 2, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 4, ( ( _, ( _, END_HTML1left, END_HTML1right)) :: rest671)) =>
-+  let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 2, ( result, END_HTML1left, END_HTML1right), rest671)
-+ 
-+ end
-+ |  ( 5, ( ( _, ( _, _, EndHEAD1right)) :: ( _, ( MlyValue.HeadContents
-+  HeadContents, _, _)) :: ( _, ( _, StartHEAD1left, _)) :: rest671)) =>
-+  let val  result = MlyValue.Head (HeadContents)
-+  in ( LrTable.NT 3, ( result, StartHEAD1left, EndHEAD1right), rest671)
-+ 
-+ end
-+ |  ( 6, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 4, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 7, ( ( _, ( _, START_HEAD1left, START_HEAD1right)) :: rest671))
-+  => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 4, ( result, START_HEAD1left, START_HEAD1right), 
++end
++|  ( 23, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
++BodyContent1right)) :: ( _, ( MlyValue.START_BODY START_BODY, (
++START_BODYleft as START_BODY1left), _)) :: rest671)) => let val  
++result = MlyValue.BodyContent0 (
++HTMLAttrs.mkBODY(ctx START_BODYleft, START_BODY, BodyContent))
++ in ( LrTable.NT 13, ( result, START_BODY1left, BodyContent1right), 
++rest671)
++end
++|  ( 24, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.TextWOScript TextWOScript, 
++TextWOScript1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent0 (mkBody(consText(TextWOScript, BodyContent1)))
++ in ( LrTable.NT 13, ( result, TextWOScript1left, BodyContent11right),
 + rest671)
-+ end
-+ |  ( 8, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 5, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 9, ( ( _, ( _, END_HEAD1left, END_HEAD1right)) :: rest671)) =>
-+  let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 5, ( result, END_HEAD1left, END_HEAD1right), rest671)
-+ 
-+ end
-+ |  ( 10, ( ( _, ( MlyValue.HeadElements HeadElements2, _, 
-+ HeadElements2right)) :: _ :: ( _, ( MlyValue.PCData PCData, _, _)) ::
-+  _ :: ( _, ( MlyValue.HeadElements HeadElements1, HeadElements1left, _
-+ )) :: rest671)) => let val  result = MlyValue.HeadContents (
-+ HeadElements1 @ (HTML.Head_TITLE PCData :: HeadElements2))
-+  in ( LrTable.NT 6, ( result, HeadElements1left, HeadElements2right), 
++end
++|  ( 25, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
++BodyElement1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent0 (mkBody(consBlock(BodyElement, BodyContent1)))
++ in ( LrTable.NT 13, ( result, BodyElement1left, BodyContent11right), 
++rest671)
++end
++|  ( 26, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.BlockWOIndex BlockWOIndex, 
++BlockWOIndex1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent0 (mkBody(consBlock(BlockWOIndex, BodyContent1)))
++ in ( LrTable.NT 13, ( result, BlockWOIndex1left, BodyContent11right),
 + rest671)
-+ end
-+ |  ( 11, ( rest671)) => let val  result = MlyValue.HeadElements ([])
-+  in ( LrTable.NT 7, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 12, ( ( _, ( MlyValue.HeadElements HeadElements, _, 
-+ HeadElements1right)) :: ( _, ( MlyValue.HeadElement HeadElement, 
-+ HeadElement1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.HeadElements (HeadElement :: HeadElements)
-+  in ( LrTable.NT 7, ( result, HeadElement1left, HeadElements1right), 
++end
++|  ( 27, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent0 (mkBody(consBlock(Paragraph, BodyContent1)))
++ in ( LrTable.NT 13, ( result, Paragraph1left, BodyContent11right), 
++rest671)
++end
++|  ( 28, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
++BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent0 (mkBody(consBlock(Paragraph, BodyContent2)))
++ in ( LrTable.NT 13, ( result, Paragraph1left, BodyContent21right), 
++rest671)
++end
++|  ( 29, ( rest671)) => let val  result = MlyValue.BodyContent1 ([])
++ in ( LrTable.NT 14, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 30, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.Text Text, Text1left, _)) :: 
++rest671)) => let val  result = MlyValue.BodyContent1 (
++consText(Text, BodyContent1))
++ in ( LrTable.NT 14, ( result, Text1left, BodyContent11right), rest671
++)
++end
++|  ( 31, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
++BodyElement1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent1 (consBlock(BodyElement, BodyContent1))
++ in ( LrTable.NT 14, ( result, BodyElement1left, BodyContent11right), 
++rest671)
++end
++|  ( 32, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.Block Block, Block1left, _))
++ :: rest671)) => let val  result = MlyValue.BodyContent1 (
++consBlock(Block, BodyContent1))
++ in ( LrTable.NT 14, ( result, Block1left, BodyContent11right), 
++rest671)
++end
++|  ( 33, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent1 (consBlock(Paragraph, BodyContent1))
++ in ( LrTable.NT 14, ( result, Paragraph1left, BodyContent11right), 
++rest671)
++end
++|  ( 34, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
++BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent1 (consBlock(Paragraph, BodyContent2))
++ in ( LrTable.NT 14, ( result, Paragraph1left, BodyContent21right), 
++rest671)
++end
++|  ( 35, ( rest671)) => let val  result = MlyValue.BodyContent2 ([])
++ in ( LrTable.NT 15, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 36, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
++BodyElement1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent2 (consBlock(BodyElement, BodyContent1))
++ in ( LrTable.NT 15, ( result, BodyElement1left, BodyContent11right), 
++rest671)
++end
++|  ( 37, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: ( _, ( MlyValue.Block Block, Block1left, _))
++ :: rest671)) => let val  result = MlyValue.BodyContent2 (
++consBlock(Block, BodyContent1))
++ in ( LrTable.NT 15, ( result, Block1left, BodyContent11right), 
++rest671)
++end
++|  ( 38, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
++BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent2 (consBlock(Paragraph, BodyContent1))
++ in ( LrTable.NT 15, ( result, Paragraph1left, BodyContent11right), 
++rest671)
++end
++|  ( 39, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
++BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyContent2 (consBlock(Paragraph, BodyContent2))
++ in ( LrTable.NT 15, ( result, Paragraph1left, BodyContent21right), 
++rest671)
++end
++|  ( 40, ( ( _, ( _, _, END_H11right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H1 START_H1, (START_H1left
++ as START_H11left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(1, ctx START_H1left, START_H1, TextList))
++ in ( LrTable.NT 16, ( result, START_H11left, END_H11right), rest671)
++
++end
++|  ( 41, ( ( _, ( _, _, END_H21right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H2 START_H2, (START_H2left
++ as START_H21left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(2, ctx START_H2left, START_H2, TextList))
++ in ( LrTable.NT 16, ( result, START_H21left, END_H21right), rest671)
++
++end
++|  ( 42, ( ( _, ( _, _, END_H31right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H3 START_H3, (START_H3left
++ as START_H31left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(3, ctx START_H3left, START_H3, TextList))
++ in ( LrTable.NT 16, ( result, START_H31left, END_H31right), rest671)
++
++end
++|  ( 43, ( ( _, ( _, _, END_H41right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H4 START_H4, (START_H4left
++ as START_H41left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(4, ctx START_H4left, START_H4, TextList))
++ in ( LrTable.NT 16, ( result, START_H41left, END_H41right), rest671)
++
++end
++|  ( 44, ( ( _, ( _, _, END_H51right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H5 START_H5, (START_H5left
++ as START_H51left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(5, ctx START_H5left, START_H5, TextList))
++ in ( LrTable.NT 16, ( result, START_H51left, END_H51right), rest671)
++
++end
++|  ( 45, ( ( _, ( _, _, END_H61right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_H6 START_H6, (START_H6left
++ as START_H61left), _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (
++HTMLAttrs.mkHn(6, ctx START_H6left, START_H6, TextList))
++ in ( LrTable.NT 16, ( result, START_H61left, END_H61right), rest671)
++
++end
++|  ( 46, ( ( _, ( _, _, END_ADDRESS1right)) :: ( _, ( 
++MlyValue.AddressContent1 AddressContent1, _, _)) :: ( _, ( _, 
++START_ADDRESS1left, _)) :: rest671)) => let val  result = 
++MlyValue.BodyElement (HTML.ADDRESS(mkBlock AddressContent1))
++ in ( LrTable.NT 16, ( result, START_ADDRESS1left, END_ADDRESS1right),
 + rest671)
-+ end
-+ |  ( 13, ( ( _, ( MlyValue.TAG_META TAG_META, (TAG_METAleft as 
-+ TAG_META1left), TAG_META1right)) :: rest671)) => let val  result = 
-+ MlyValue.HeadElement (HTMLAttrs.mkMETA(ctx TAG_METAleft, TAG_META))
-+  in ( LrTable.NT 8, ( result, TAG_META1left, TAG_META1right), rest671)
-+ 
-+ end
-+ |  ( 14, ( ( _, ( MlyValue.TAG_LINK TAG_LINK, (TAG_LINKleft as 
-+ TAG_LINK1left), TAG_LINK1right)) :: rest671)) => let val  result = 
-+ MlyValue.HeadElement (HTMLAttrs.mkLINK(ctx TAG_LINKleft, TAG_LINK))
-+  in ( LrTable.NT 8, ( result, TAG_LINK1left, TAG_LINK1right), rest671)
-+ 
-+ end
-+ |  ( 15, ( ( _, ( MlyValue.TAG_ISINDEX TAG_ISINDEX, (TAG_ISINDEXleft
-+  as TAG_ISINDEX1left), TAG_ISINDEX1right)) :: rest671)) => let val  
-+ result = MlyValue.HeadElement (
-+ let val stuff =
-+ 		    HTMLAttrs.mkISINDEX (ctx TAG_ISINDEXleft, TAG_ISINDEX)
-+ 		  in HTML.Head_ISINDEX stuff end
-+ 		
-+ )
-+  in ( LrTable.NT 8, ( result, TAG_ISINDEX1left, TAG_ISINDEX1right), 
++end
++|  ( 47, ( rest671)) => let val  result = MlyValue.AddressContent1 ([]
++)
++ in ( LrTable.NT 17, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 48, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
++AddressContent11right)) :: ( _, ( MlyValue.Text Text, Text1left, _))
++ :: rest671)) => let val  result = MlyValue.AddressContent1 (
++consText(Text, AddressContent1))
++ in ( LrTable.NT 17, ( result, Text1left, AddressContent11right), 
++rest671)
++end
++|  ( 49, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
++AddressContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.AddressContent1 (consBlock(Paragraph, AddressContent1))
++ in ( LrTable.NT 17, ( result, Paragraph1left, AddressContent11right),
 + rest671)
-+ end
-+ |  ( 16, ( ( _, ( MlyValue.TAG_BASE TAG_BASE, (TAG_BASEleft as 
-+ TAG_BASE1left), TAG_BASE1right)) :: rest671)) => let val  result = 
-+ MlyValue.HeadElement (HTMLAttrs.mkBASE(ctx TAG_BASEleft, TAG_BASE))
-+  in ( LrTable.NT 8, ( result, TAG_BASE1left, TAG_BASE1right), rest671)
-+ 
-+ end
-+ |  ( 17, ( ( _, ( _, _, END_STYLE1right)) :: ( _, ( MlyValue.PCData 
-+ PCData, _, _)) :: ( _, ( _, START_STYLE1left, _)) :: rest671)) => let
-+  val  result = MlyValue.HeadElement (HTML.Head_STYLE(PCData))
-+  in ( LrTable.NT 8, ( result, START_STYLE1left, END_STYLE1right), 
++end
++|  ( 50, ( ( _, ( MlyValue.AddressContent2 AddressContent2, _, 
++AddressContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.AddressContent1 (consBlock(Paragraph, AddressContent2))
++ in ( LrTable.NT 17, ( result, Paragraph1left, AddressContent21right),
 + rest671)
-+ end
-+ |  ( 18, ( ( _, ( _, _, END_SCRIPT1right)) :: ( _, ( MlyValue.PCData 
-+ PCData, _, _)) :: ( _, ( _, START_SCRIPT1left, _)) :: rest671)) => let
-+  val  result = MlyValue.HeadElement (HTML.Head_SCRIPT(PCData))
-+  in ( LrTable.NT 8, ( result, START_SCRIPT1left, END_SCRIPT1right), 
++end
++|  ( 51, ( rest671)) => let val  result = MlyValue.AddressContent2 ([]
++)
++ in ( LrTable.NT 18, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 52, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
++AddressContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.AddressContent2 (consBlock(Paragraph, AddressContent1))
++ in ( LrTable.NT 18, ( result, Paragraph1left, AddressContent11right),
 + rest671)
-+ end
-+ |  ( 19, ( ( _, ( _, _, EndBODY1right)) :: ( _, ( 
-+ MlyValue.BodyContent0 BodyContent0, BodyContent01left, _)) :: rest671)
-+ ) => let val  result = MlyValue.Body (BodyContent0)
-+  in ( LrTable.NT 9, ( result, BodyContent01left, EndBODY1right), 
++end
++|  ( 53, ( ( _, ( MlyValue.AddressContent2 AddressContent2, _, 
++AddressContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
++Paragraph1left, _)) :: rest671)) => let val  result = 
++MlyValue.AddressContent2 (consBlock(Paragraph, AddressContent2))
++ in ( LrTable.NT 18, ( result, Paragraph1left, AddressContent21right),
 + rest671)
-+ end
-+ |  ( 20, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 11, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 21, ( ( _, ( _, END_BODY1left, END_BODY1right)) :: rest671)) =>
-+  let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 11, ( result, END_BODY1left, END_BODY1right), rest671
-+ )
-+ end
-+ |  ( 22, ( ( _, ( MlyValue.BodyContent1 BodyContent1, 
-+ BodyContent11left, BodyContent11right)) :: rest671)) => let val  
-+ result = MlyValue.BodyContent (mkBlock BodyContent1)
-+  in ( LrTable.NT 12, ( result, BodyContent11left, BodyContent11right),
-+  rest671)
-+ end
-+ |  ( 23, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
-+ BodyContent1right)) :: ( _, ( MlyValue.START_BODY START_BODY, (
-+ START_BODYleft as START_BODY1left), _)) :: rest671)) => let val  
-+ result = MlyValue.BodyContent0 (
-+ HTMLAttrs.mkBODY(ctx START_BODYleft, START_BODY, BodyContent))
-+  in ( LrTable.NT 13, ( result, START_BODY1left, BodyContent1right), 
++end
++|  ( 54, ( ( _, ( MlyValue.List List, List1left, List1right)) :: 
++rest671)) => let val  result = MlyValue.BlockWOIndex (List)
++ in ( LrTable.NT 19, ( result, List1left, List1right), rest671)
++end
++|  ( 55, ( ( _, ( MlyValue.Preformatted Preformatted, 
++Preformatted1left, Preformatted1right)) :: rest671)) => let val  
++result = MlyValue.BlockWOIndex (Preformatted)
++ in ( LrTable.NT 19, ( result, Preformatted1left, Preformatted1right),
 + rest671)
-+ end
-+ |  ( 24, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.TextWOScript TextWOScript, 
-+ TextWOScript1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent0 (mkBody(consText(TextWOScript, BodyContent1)))
-+  in ( LrTable.NT 13, ( result, TextWOScript1left, BodyContent11right),
-+  rest671)
-+ end
-+ |  ( 25, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
-+ BodyElement1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent0 (mkBody(consBlock(BodyElement, BodyContent1)))
-+  in ( LrTable.NT 13, ( result, BodyElement1left, BodyContent11right), 
++end
++|  ( 56, ( ( _, ( _, _, END_DIV1right)) :: ( _, ( MlyValue.BodyContent
++ BodyContent, _, _)) :: ( _, ( MlyValue.START_DIV START_DIV, (
++START_DIVleft as START_DIV1left), _)) :: rest671)) => let val  result
++ = MlyValue.BlockWOIndex (
++HTMLAttrs.mkDIV(ctx START_DIVleft, START_DIV, BodyContent))
++ in ( LrTable.NT 19, ( result, START_DIV1left, END_DIV1right), rest671
++)
++end
++|  ( 57, ( ( _, ( _, _, END_CENTER1right)) :: ( _, ( 
++MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( _, 
++START_CENTER1left, _)) :: rest671)) => let val  result = 
++MlyValue.BlockWOIndex (HTML.CENTER BodyContent)
++ in ( LrTable.NT 19, ( result, START_CENTER1left, END_CENTER1right), 
++rest671)
++end
++|  ( 58, ( ( _, ( _, _, END_BLOCKQUOTE1right)) :: ( _, ( 
++MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( _, 
++START_BLOCKQUOTE1left, _)) :: rest671)) => let val  result = 
++MlyValue.BlockWOIndex (HTML.BLOCKQUOTE BodyContent)
++ in ( LrTable.NT 19, ( result, START_BLOCKQUOTE1left, 
++END_BLOCKQUOTE1right), rest671)
++end
++|  ( 59, ( ( _, ( _, _, END_FORM1right)) :: ( _, ( 
++MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( MlyValue.START_FORM
++ START_FORM, (START_FORMleft as START_FORM1left), _)) :: rest671)) =>
++ let val  result = MlyValue.BlockWOIndex (
++HTMLAttrs.mkFORM(ctx START_FORMleft, START_FORM, BodyContent))
++ in ( LrTable.NT 19, ( result, START_FORM1left, END_FORM1right), 
++rest671)
++end
++|  ( 60, ( ( _, ( MlyValue.TAG_HR TAG_HR, (TAG_HRleft as TAG_HR1left),
++ TAG_HR1right)) :: rest671)) => let val  result = 
++MlyValue.BlockWOIndex (HTMLAttrs.mkHR(ctx TAG_HRleft, TAG_HR))
++ in ( LrTable.NT 19, ( result, TAG_HR1left, TAG_HR1right), rest671)
++
++end
++|  ( 61, ( ( _, ( _, _, END_TABLE1right)) :: ( _, ( 
++MlyValue.TableRowList TableRowList, _, _)) :: ( _, ( 
++MlyValue.optCaption optCaption, _, _)) :: ( _, ( MlyValue.START_TABLE 
++START_TABLE, (START_TABLEleft as START_TABLE1left), _)) :: rest671))
++ => let val  result = MlyValue.BlockWOIndex (
++HTMLAttrs.mkTABLE(
++		    ctx START_TABLEleft, START_TABLE,
++		    {caption = optCaption, body = TableRowList})
++		
++)
++ in ( LrTable.NT 19, ( result, START_TABLE1left, END_TABLE1right), 
++rest671)
++end
++|  ( 62, ( ( _, ( MlyValue.BlockWOIndex BlockWOIndex, 
++BlockWOIndex1left, BlockWOIndex1right)) :: rest671)) => let val  
++result = MlyValue.Block (BlockWOIndex)
++ in ( LrTable.NT 20, ( result, BlockWOIndex1left, BlockWOIndex1right),
 + rest671)
-+ end
-+ |  ( 26, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.BlockWOIndex BlockWOIndex, 
-+ BlockWOIndex1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent0 (mkBody(consBlock(BlockWOIndex, BodyContent1)))
-+  in ( LrTable.NT 13, ( result, BlockWOIndex1left, BodyContent11right),
-+  rest671)
-+ end
-+ |  ( 27, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent0 (mkBody(consBlock(Paragraph, BodyContent1)))
-+  in ( LrTable.NT 13, ( result, Paragraph1left, BodyContent11right), 
++end
++|  ( 63, ( ( _, ( MlyValue.TAG_ISINDEX TAG_ISINDEX, (TAG_ISINDEXleft
++ as TAG_ISINDEX1left), TAG_ISINDEX1right)) :: rest671)) => let val  
++result = MlyValue.Block (
++let val stuff =
++		    HTMLAttrs.mkISINDEX (ctx TAG_ISINDEXleft, TAG_ISINDEX)
++		  in HTML.ISINDEX stuff end
++		
++)
++ in ( LrTable.NT 20, ( result, TAG_ISINDEX1left, TAG_ISINDEX1right), 
++rest671)
++end
++|  ( 64, ( ( _, ( MlyValue.TextList TextList, _, TextList1right)) :: (
++ _, ( MlyValue.START_P START_P, (START_Pleft as START_P1left), _)) :: 
++rest671)) => let val  result = MlyValue.Paragraph (
++HTMLAttrs.mkP(ctx START_Pleft, START_P, TextList))
++ in ( LrTable.NT 21, ( result, START_P1left, TextList1right), rest671)
++
++end
++|  ( 65, ( ( _, ( _, _, END_UL1right)) :: ( _, ( MlyValue.ListItemList
++ ListItemList, _, _)) :: ( _, ( MlyValue.START_UL START_UL, (
++START_ULleft as START_UL1left), _)) :: rest671)) => let val  result = 
++MlyValue.List (
++HTMLAttrs.mkUL(ctx START_ULleft, START_UL, ListItemList))
++ in ( LrTable.NT 22, ( result, START_UL1left, END_UL1right), rest671)
++
++end
++|  ( 66, ( ( _, ( _, _, END_OL1right)) :: ( _, ( MlyValue.ListItemList
++ ListItemList, _, _)) :: ( _, ( MlyValue.START_OL START_OL, (
++START_OLleft as START_OL1left), _)) :: rest671)) => let val  result = 
++MlyValue.List (
++HTMLAttrs.mkOL(ctx START_OLleft, START_OL, ListItemList))
++ in ( LrTable.NT 22, ( result, START_OL1left, END_OL1right), rest671)
++
++end
++|  ( 67, ( ( _, ( _, _, END_DIR1right)) :: ( _, ( 
++MlyValue.ListItemList ListItemList, _, _)) :: ( _, ( 
++MlyValue.START_DIR START_DIR, (START_DIRleft as START_DIR1left), _))
++ :: rest671)) => let val  result = MlyValue.List (
++HTMLAttrs.mkDIR(ctx START_DIRleft, START_DIR, ListItemList))
++ in ( LrTable.NT 22, ( result, START_DIR1left, END_DIR1right), rest671
++)
++end
++|  ( 68, ( ( _, ( _, _, END_MENU1right)) :: ( _, ( 
++MlyValue.ListItemList ListItemList, _, _)) :: ( _, ( 
++MlyValue.START_MENU START_MENU, (START_MENUleft as START_MENU1left), _
++)) :: rest671)) => let val  result = MlyValue.List (
++HTMLAttrs.mkMENU(ctx START_MENUleft, START_MENU, ListItemList))
++ in ( LrTable.NT 22, ( result, START_MENU1left, END_MENU1right), 
++rest671)
++end
++|  ( 69, ( ( _, ( _, _, END_DL1right)) :: ( _, ( MlyValue.DLItemList 
++DLItemList, _, _)) :: ( _, ( MlyValue.START_DL START_DL, (START_DLleft
++ as START_DL1left), _)) :: rest671)) => let val  result = 
++MlyValue.List (
++HTMLAttrs.mkDL(
++		  ctx START_DLleft, START_DL,
++		  groupDefListContents DLItemList)
++		
++)
++ in ( LrTable.NT 22, ( result, START_DL1left, END_DL1right), rest671)
++
++end
++|  ( 70, ( rest671)) => let val  result = MlyValue.ListItemList ([])
++ in ( LrTable.NT 23, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 71, ( ( _, ( MlyValue.ListItemList ListItemList, _, 
++ListItemList1right)) :: ( _, ( MlyValue.ListItem ListItem, 
++ListItem1left, _)) :: rest671)) => let val  result = 
++MlyValue.ListItemList (ListItem :: ListItemList)
++ in ( LrTable.NT 23, ( result, ListItem1left, ListItemList1right), 
++rest671)
++end
++|  ( 72, ( ( _, ( _, _, EndLI1right)) :: ( _, ( MlyValue.Flow1 Flow1,
++ _, _)) :: ( _, ( MlyValue.START_LI START_LI, (START_LIleft as 
++START_LI1left), _)) :: rest671)) => let val  result = 
++MlyValue.ListItem (
++HTMLAttrs.mkLI(ctx START_LIleft, START_LI, mkBlock Flow1))
++ in ( LrTable.NT 24, ( result, START_LI1left, EndLI1right), rest671)
++
++end
++|  ( 73, ( rest671)) => let val  result = MlyValue.DLItemList ([])
++ in ( LrTable.NT 25, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 74, ( ( _, ( MlyValue.DLItemList DLItemList, _, DLItemList1right)
++) :: ( _, ( MlyValue.DLItem DLItem, DLItem1left, _)) :: rest671)) =>
++ let val  result = MlyValue.DLItemList (DLItem :: DLItemList)
++ in ( LrTable.NT 25, ( result, DLItem1left, DLItemList1right), rest671
++)
++end
++|  ( 75, ( ( _, ( _, _, EndDT1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_DT1left, _)) :: rest671)) => let
++ val  result = MlyValue.DLItem (DL_tag TextList)
++ in ( LrTable.NT 26, ( result, START_DT1left, EndDT1right), rest671)
++
++end
++|  ( 76, ( ( _, ( _, _, EndDD1right)) :: ( _, ( MlyValue.Flow1 Flow1,
++ _, _)) :: ( _, ( _, START_DD1left, _)) :: rest671)) => let val  
++result = MlyValue.DLItem (DL_item(mkBlock Flow1))
++ in ( LrTable.NT 26, ( result, START_DD1left, EndDD1right), rest671)
++
++end
++|  ( 77, ( rest671)) => let val  result = MlyValue.Flow1 ([])
++ in ( LrTable.NT 27, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 78, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
++MlyValue.Text Text, Text1left, _)) :: rest671)) => let val  result = 
++MlyValue.Flow1 (consText(Text, Flow1))
++ in ( LrTable.NT 27, ( result, Text1left, Flow11right), rest671)
++end
++|  ( 79, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
++MlyValue.Block Block, Block1left, _)) :: rest671)) => let val  result
++ = MlyValue.Flow1 (consBlock(Block, Flow1))
++ in ( LrTable.NT 27, ( result, Block1left, Flow11right), rest671)
++end
++|  ( 80, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: _ :: ( _, 
++( MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) =>
++ let val  result = MlyValue.Flow1 (consBlock(Paragraph, Flow1))
++ in ( LrTable.NT 27, ( result, Paragraph1left, Flow11right), rest671)
++
++end
++|  ( 81, ( ( _, ( MlyValue.Flow2 Flow2, _, Flow21right)) :: ( _, ( 
++MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) => let
++ val  result = MlyValue.Flow1 (consBlock(Paragraph, Flow2))
++ in ( LrTable.NT 27, ( result, Paragraph1left, Flow21right), rest671)
++
++end
++|  ( 82, ( rest671)) => let val  result = MlyValue.Flow2 ([])
++ in ( LrTable.NT 28, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 83, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
++MlyValue.Block Block, Block1left, _)) :: rest671)) => let val  result
++ = MlyValue.Flow2 (consBlock(Block, Flow1))
++ in ( LrTable.NT 28, ( result, Block1left, Flow11right), rest671)
++end
++|  ( 84, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: _ :: ( _, 
++( MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) =>
++ let val  result = MlyValue.Flow2 (consBlock(Paragraph, Flow1))
++ in ( LrTable.NT 28, ( result, Paragraph1left, Flow11right), rest671)
++
++end
++|  ( 85, ( ( _, ( MlyValue.Flow2 Flow2, _, Flow21right)) :: ( _, ( 
++MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) => let
++ val  result = MlyValue.Flow2 (consBlock(Paragraph, Flow2))
++ in ( LrTable.NT 28, ( result, Paragraph1left, Flow21right), rest671)
++
++end
++|  ( 86, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 29, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 87, ( ( _, ( _, END_LI1left, END_LI1right)) :: rest671)) => let
++ val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 29, ( result, END_LI1left, END_LI1right), rest671)
++
++end
++|  ( 88, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 30, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 89, ( ( _, ( _, END_DT1left, END_DT1right)) :: rest671)) => let
++ val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 30, ( result, END_DT1left, END_DT1right), rest671)
++
++end
++|  ( 90, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 31, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 91, ( ( _, ( _, END_DD1left, END_DD1right)) :: rest671)) => let
++ val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 31, ( result, END_DD1left, END_DD1right), rest671)
++
++end
++|  ( 92, ( ( _, ( _, _, END_PRE1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_PRE START_PRE, (
++START_PREleft as START_PRE1left), _)) :: rest671)) => let val  result
++ = MlyValue.Preformatted (
++HTMLAttrs.mkPRE(ctx START_PREleft, START_PRE, TextList))
++ in ( LrTable.NT 32, ( result, START_PRE1left, END_PRE1right), rest671
++)
++end
++|  ( 93, ( rest671)) => let val  result = MlyValue.optCaption (NONE)
++ in ( LrTable.NT 33, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 94, ( ( _, ( _, _, END_CAPTION1right)) :: ( _, ( 
++MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_CAPTION 
++START_CAPTION, (START_CAPTIONleft as START_CAPTION1left), _)) :: 
++rest671)) => let val  result = MlyValue.optCaption (
++SOME(HTMLAttrs.mkCAPTION(
++		  ctx START_CAPTIONleft, START_CAPTION, TextList))
++)
++ in ( LrTable.NT 33, ( result, START_CAPTION1left, END_CAPTION1right),
 + rest671)
-+ end
-+ |  ( 28, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
-+ BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent0 (mkBody(consBlock(Paragraph, BodyContent2)))
-+  in ( LrTable.NT 13, ( result, Paragraph1left, BodyContent21right), 
++end
++|  ( 95, ( ( _, ( MlyValue.TableRow TableRow, TableRow1left, 
++TableRow1right)) :: rest671)) => let val  result = 
++MlyValue.TableRowList ([TableRow])
++ in ( LrTable.NT 34, ( result, TableRow1left, TableRow1right), rest671
++)
++end
++|  ( 96, ( ( _, ( MlyValue.TableRowList TableRowList, _, 
++TableRowList1right)) :: ( _, ( MlyValue.TableRow TableRow, 
++TableRow1left, _)) :: rest671)) => let val  result = 
++MlyValue.TableRowList (TableRow :: TableRowList)
++ in ( LrTable.NT 34, ( result, TableRow1left, TableRowList1right), 
++rest671)
++end
++|  ( 97, ( ( _, ( MlyValue.TableCellList TableCellList, _, 
++TableCellList1right)) :: ( _, ( MlyValue.START_TR START_TR, (
++START_TRleft as START_TR1left), _)) :: rest671)) => let val  result = 
++MlyValue.TableRow (
++HTMLAttrs.mkTR(ctx START_TRleft, START_TR, TableCellList))
++ in ( LrTable.NT 35, ( result, START_TR1left, TableCellList1right), 
++rest671)
++end
++|  ( 98, ( ( _, ( _, _, END_TR1right)) :: ( _, ( 
++MlyValue.TableCellList TableCellList, _, _)) :: ( _, ( 
++MlyValue.START_TR START_TR, (START_TRleft as START_TR1left), _)) :: 
++rest671)) => let val  result = MlyValue.TableRow (
++HTMLAttrs.mkTR(ctx START_TRleft, START_TR, TableCellList))
++ in ( LrTable.NT 35, ( result, START_TR1left, END_TR1right), rest671)
++
++end
++|  ( 99, ( ( _, ( MlyValue.TableCell TableCell, TableCell1left, 
++TableCell1right)) :: rest671)) => let val  result = 
++MlyValue.TableCellList ([TableCell])
++ in ( LrTable.NT 36, ( result, TableCell1left, TableCell1right), 
++rest671)
++end
++|  ( 100, ( ( _, ( MlyValue.TableCellList TableCellList, _, 
++TableCellList1right)) :: ( _, ( MlyValue.TableCell TableCell, 
++TableCell1left, _)) :: rest671)) => let val  result = 
++MlyValue.TableCellList (TableCell :: TableCellList)
++ in ( LrTable.NT 36, ( result, TableCell1left, TableCellList1right), 
++rest671)
++end
++|  ( 101, ( ( _, ( _, _, END_TH1right)) :: ( _, ( MlyValue.BodyContent
++ BodyContent, _, _)) :: ( _, ( MlyValue.START_TH START_TH, (
++START_THleft as START_TH1left), _)) :: rest671)) => let val  result = 
++MlyValue.TableCell (
++HTMLAttrs.mkTH(ctx START_THleft, START_TH, BodyContent))
++ in ( LrTable.NT 37, ( result, START_TH1left, END_TH1right), rest671)
++
++end
++|  ( 102, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
++BodyContent1right)) :: ( _, ( MlyValue.START_TH START_TH, (
++START_THleft as START_TH1left), _)) :: rest671)) => let val  result = 
++MlyValue.TableCell (
++HTMLAttrs.mkTH(ctx START_THleft, START_TH, BodyContent))
++ in ( LrTable.NT 37, ( result, START_TH1left, BodyContent1right), 
++rest671)
++end
++|  ( 103, ( ( _, ( _, _, END_TD1right)) :: ( _, ( MlyValue.BodyContent
++ BodyContent, _, _)) :: ( _, ( MlyValue.START_TD START_TD, (
++START_TDleft as START_TD1left), _)) :: rest671)) => let val  result = 
++MlyValue.TableCell (
++HTMLAttrs.mkTD(ctx START_TDleft, START_TD, BodyContent))
++ in ( LrTable.NT 37, ( result, START_TD1left, END_TD1right), rest671)
++
++end
++|  ( 104, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
++BodyContent1right)) :: ( _, ( MlyValue.START_TD START_TD, (
++START_TDleft as START_TD1left), _)) :: rest671)) => let val  result = 
++MlyValue.TableCell (
++HTMLAttrs.mkTD(ctx START_TDleft, START_TD, BodyContent))
++ in ( LrTable.NT 37, ( result, START_TD1left, BodyContent1right), 
++rest671)
++end
++|  ( 105, ( ( _, ( MlyValue.TextList' TextList', TextList'1left, 
++TextList'1right)) :: rest671)) => let val  result = MlyValue.TextList
++ (textList TextList')
++ in ( LrTable.NT 38, ( result, TextList'1left, TextList'1right), 
++rest671)
++end
++|  ( 106, ( rest671)) => let val  result = MlyValue.TextList' ([])
++ in ( LrTable.NT 39, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 107, ( ( _, ( MlyValue.TextList' TextList', _, TextList'1right))
++ :: ( _, ( MlyValue.Text Text, Text1left, _)) :: rest671)) => let val 
++ result = MlyValue.TextList' (Text :: TextList')
++ in ( LrTable.NT 39, ( result, Text1left, TextList'1right), rest671)
++
++end
++|  ( 108, ( ( _, ( MlyValue.PCDataElem PCDataElem, PCDataElem1left, 
++PCDataElem1right)) :: rest671)) => let val  result = 
++MlyValue.TextWOScript (HTML.PCDATA PCDataElem)
++ in ( LrTable.NT 40, ( result, PCDataElem1left, PCDataElem1right), 
++rest671)
++end
++|  ( 109, ( ( _, ( MlyValue.Font Font, Font1left, Font1right)) :: 
++rest671)) => let val  result = MlyValue.TextWOScript (Font)
++ in ( LrTable.NT 40, ( result, Font1left, Font1right), rest671)
++end
++|  ( 110, ( ( _, ( MlyValue.Phrase Phrase, Phrase1left, Phrase1right))
++ :: rest671)) => let val  result = MlyValue.TextWOScript (Phrase)
++ in ( LrTable.NT 40, ( result, Phrase1left, Phrase1right), rest671)
++
++end
++|  ( 111, ( ( _, ( MlyValue.Special Special, Special1left, 
++Special1right)) :: rest671)) => let val  result = 
++MlyValue.TextWOScript (Special)
++ in ( LrTable.NT 40, ( result, Special1left, Special1right), rest671)
++
++end
++|  ( 112, ( ( _, ( MlyValue.Form Form, Form1left, Form1right)) :: 
++rest671)) => let val  result = MlyValue.TextWOScript (Form)
++ in ( LrTable.NT 40, ( result, Form1left, Form1right), rest671)
++end
++|  ( 113, ( ( _, ( MlyValue.TextWOScript TextWOScript, 
++TextWOScript1left, TextWOScript1right)) :: rest671)) => let val  
++result = MlyValue.Text (TextWOScript)
++ in ( LrTable.NT 41, ( result, TextWOScript1left, TextWOScript1right),
 + rest671)
-+ end
-+ |  ( 29, ( rest671)) => let val  result = MlyValue.BodyContent1 ([])
-+  in ( LrTable.NT 14, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 30, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.Text Text, Text1left, _)) :: 
-+ rest671)) => let val  result = MlyValue.BodyContent1 (
-+ consText(Text, BodyContent1))
-+  in ( LrTable.NT 14, ( result, Text1left, BodyContent11right), rest671
-+ )
-+ end
-+ |  ( 31, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
-+ BodyElement1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent1 (consBlock(BodyElement, BodyContent1))
-+  in ( LrTable.NT 14, ( result, BodyElement1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 32, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.Block Block, Block1left, _))
-+  :: rest671)) => let val  result = MlyValue.BodyContent1 (
-+ consBlock(Block, BodyContent1))
-+  in ( LrTable.NT 14, ( result, Block1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 33, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent1 (consBlock(Paragraph, BodyContent1))
-+  in ( LrTable.NT 14, ( result, Paragraph1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 34, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
-+ BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent1 (consBlock(Paragraph, BodyContent2))
-+  in ( LrTable.NT 14, ( result, Paragraph1left, BodyContent21right), 
-+ rest671)
-+ end
-+ |  ( 35, ( rest671)) => let val  result = MlyValue.BodyContent2 ([])
-+  in ( LrTable.NT 15, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 36, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.BodyElement BodyElement, 
-+ BodyElement1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent2 (consBlock(BodyElement, BodyContent1))
-+  in ( LrTable.NT 15, ( result, BodyElement1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 37, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: ( _, ( MlyValue.Block Block, Block1left, _))
-+  :: rest671)) => let val  result = MlyValue.BodyContent2 (
-+ consBlock(Block, BodyContent1))
-+  in ( LrTable.NT 15, ( result, Block1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 38, ( ( _, ( MlyValue.BodyContent1 BodyContent1, _, 
-+ BodyContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent2 (consBlock(Paragraph, BodyContent1))
-+  in ( LrTable.NT 15, ( result, Paragraph1left, BodyContent11right), 
-+ rest671)
-+ end
-+ |  ( 39, ( ( _, ( MlyValue.BodyContent2 BodyContent2, _, 
-+ BodyContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyContent2 (consBlock(Paragraph, BodyContent2))
-+  in ( LrTable.NT 15, ( result, Paragraph1left, BodyContent21right), 
-+ rest671)
-+ end
-+ |  ( 40, ( ( _, ( _, _, END_H11right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H1 START_H1, (START_H1left
-+  as START_H11left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(1, ctx START_H1left, START_H1, TextList))
-+  in ( LrTable.NT 16, ( result, START_H11left, END_H11right), rest671)
-+ 
-+ end
-+ |  ( 41, ( ( _, ( _, _, END_H21right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H2 START_H2, (START_H2left
-+  as START_H21left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(2, ctx START_H2left, START_H2, TextList))
-+  in ( LrTable.NT 16, ( result, START_H21left, END_H21right), rest671)
-+ 
-+ end
-+ |  ( 42, ( ( _, ( _, _, END_H31right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H3 START_H3, (START_H3left
-+  as START_H31left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(3, ctx START_H3left, START_H3, TextList))
-+  in ( LrTable.NT 16, ( result, START_H31left, END_H31right), rest671)
-+ 
-+ end
-+ |  ( 43, ( ( _, ( _, _, END_H41right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H4 START_H4, (START_H4left
-+  as START_H41left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(4, ctx START_H4left, START_H4, TextList))
-+  in ( LrTable.NT 16, ( result, START_H41left, END_H41right), rest671)
-+ 
-+ end
-+ |  ( 44, ( ( _, ( _, _, END_H51right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H5 START_H5, (START_H5left
-+  as START_H51left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(5, ctx START_H5left, START_H5, TextList))
-+  in ( LrTable.NT 16, ( result, START_H51left, END_H51right), rest671)
-+ 
-+ end
-+ |  ( 45, ( ( _, ( _, _, END_H61right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_H6 START_H6, (START_H6left
-+  as START_H61left), _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (
-+ HTMLAttrs.mkHn(6, ctx START_H6left, START_H6, TextList))
-+  in ( LrTable.NT 16, ( result, START_H61left, END_H61right), rest671)
-+ 
-+ end
-+ |  ( 46, ( ( _, ( _, _, END_ADDRESS1right)) :: ( _, ( 
-+ MlyValue.AddressContent1 AddressContent1, _, _)) :: ( _, ( _, 
-+ START_ADDRESS1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BodyElement (HTML.ADDRESS(mkBlock AddressContent1))
-+  in ( LrTable.NT 16, ( result, START_ADDRESS1left, END_ADDRESS1right),
-+  rest671)
-+ end
-+ |  ( 47, ( rest671)) => let val  result = MlyValue.AddressContent1 ([]
-+ )
-+  in ( LrTable.NT 17, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 48, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
-+ AddressContent11right)) :: ( _, ( MlyValue.Text Text, Text1left, _))
-+  :: rest671)) => let val  result = MlyValue.AddressContent1 (
-+ consText(Text, AddressContent1))
-+  in ( LrTable.NT 17, ( result, Text1left, AddressContent11right), 
-+ rest671)
-+ end
-+ |  ( 49, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
-+ AddressContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.AddressContent1 (consBlock(Paragraph, AddressContent1))
-+  in ( LrTable.NT 17, ( result, Paragraph1left, AddressContent11right),
-+  rest671)
-+ end
-+ |  ( 50, ( ( _, ( MlyValue.AddressContent2 AddressContent2, _, 
-+ AddressContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.AddressContent1 (consBlock(Paragraph, AddressContent2))
-+  in ( LrTable.NT 17, ( result, Paragraph1left, AddressContent21right),
-+  rest671)
-+ end
-+ |  ( 51, ( rest671)) => let val  result = MlyValue.AddressContent2 ([]
-+ )
-+  in ( LrTable.NT 18, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 52, ( ( _, ( MlyValue.AddressContent1 AddressContent1, _, 
-+ AddressContent11right)) :: _ :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.AddressContent2 (consBlock(Paragraph, AddressContent1))
-+  in ( LrTable.NT 18, ( result, Paragraph1left, AddressContent11right),
-+  rest671)
-+ end
-+ |  ( 53, ( ( _, ( MlyValue.AddressContent2 AddressContent2, _, 
-+ AddressContent21right)) :: ( _, ( MlyValue.Paragraph Paragraph, 
-+ Paragraph1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.AddressContent2 (consBlock(Paragraph, AddressContent2))
-+  in ( LrTable.NT 18, ( result, Paragraph1left, AddressContent21right),
-+  rest671)
-+ end
-+ |  ( 54, ( ( _, ( MlyValue.List List, List1left, List1right)) :: 
-+ rest671)) => let val  result = MlyValue.BlockWOIndex (List)
-+  in ( LrTable.NT 19, ( result, List1left, List1right), rest671)
-+ end
-+ |  ( 55, ( ( _, ( MlyValue.Preformatted Preformatted, 
-+ Preformatted1left, Preformatted1right)) :: rest671)) => let val  
-+ result = MlyValue.BlockWOIndex (Preformatted)
-+  in ( LrTable.NT 19, ( result, Preformatted1left, Preformatted1right),
-+  rest671)
-+ end
-+ |  ( 56, ( ( _, ( _, _, END_DIV1right)) :: ( _, ( MlyValue.BodyContent
-+  BodyContent, _, _)) :: ( _, ( MlyValue.START_DIV START_DIV, (
-+ START_DIVleft as START_DIV1left), _)) :: rest671)) => let val  result
-+  = MlyValue.BlockWOIndex (
-+ HTMLAttrs.mkDIV(ctx START_DIVleft, START_DIV, BodyContent))
-+  in ( LrTable.NT 19, ( result, START_DIV1left, END_DIV1right), rest671
-+ )
-+ end
-+ |  ( 57, ( ( _, ( _, _, END_CENTER1right)) :: ( _, ( 
-+ MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( _, 
-+ START_CENTER1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BlockWOIndex (HTML.CENTER BodyContent)
-+  in ( LrTable.NT 19, ( result, START_CENTER1left, END_CENTER1right), 
-+ rest671)
-+ end
-+ |  ( 58, ( ( _, ( _, _, END_BLOCKQUOTE1right)) :: ( _, ( 
-+ MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( _, 
-+ START_BLOCKQUOTE1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.BlockWOIndex (HTML.BLOCKQUOTE BodyContent)
-+  in ( LrTable.NT 19, ( result, START_BLOCKQUOTE1left, 
-+ END_BLOCKQUOTE1right), rest671)
-+ end
-+ |  ( 59, ( ( _, ( _, _, END_FORM1right)) :: ( _, ( 
-+ MlyValue.BodyContent BodyContent, _, _)) :: ( _, ( MlyValue.START_FORM
-+  START_FORM, (START_FORMleft as START_FORM1left), _)) :: rest671)) =>
-+  let val  result = MlyValue.BlockWOIndex (
-+ HTMLAttrs.mkFORM(ctx START_FORMleft, START_FORM, BodyContent))
-+  in ( LrTable.NT 19, ( result, START_FORM1left, END_FORM1right), 
-+ rest671)
-+ end
-+ |  ( 60, ( ( _, ( MlyValue.TAG_HR TAG_HR, (TAG_HRleft as TAG_HR1left),
-+  TAG_HR1right)) :: rest671)) => let val  result = 
-+ MlyValue.BlockWOIndex (HTMLAttrs.mkHR(ctx TAG_HRleft, TAG_HR))
-+  in ( LrTable.NT 19, ( result, TAG_HR1left, TAG_HR1right), rest671)
-+ 
-+ end
-+ |  ( 61, ( ( _, ( _, _, END_TABLE1right)) :: ( _, ( 
-+ MlyValue.TableRowList TableRowList, _, _)) :: ( _, ( 
-+ MlyValue.optCaption optCaption, _, _)) :: ( _, ( MlyValue.START_TABLE 
-+ START_TABLE, (START_TABLEleft as START_TABLE1left), _)) :: rest671))
-+  => let val  result = MlyValue.BlockWOIndex (
-+ HTMLAttrs.mkTABLE(
-+ 		    ctx START_TABLEleft, START_TABLE,
-+ 		    {caption = optCaption, body = TableRowList})
-+ 		
-+ )
-+  in ( LrTable.NT 19, ( result, START_TABLE1left, END_TABLE1right), 
-+ rest671)
-+ end
-+ |  ( 62, ( ( _, ( MlyValue.BlockWOIndex BlockWOIndex, 
-+ BlockWOIndex1left, BlockWOIndex1right)) :: rest671)) => let val  
-+ result = MlyValue.Block (BlockWOIndex)
-+  in ( LrTable.NT 20, ( result, BlockWOIndex1left, BlockWOIndex1right),
-+  rest671)
-+ end
-+ |  ( 63, ( ( _, ( MlyValue.TAG_ISINDEX TAG_ISINDEX, (TAG_ISINDEXleft
-+  as TAG_ISINDEX1left), TAG_ISINDEX1right)) :: rest671)) => let val  
-+ result = MlyValue.Block (
-+ let val stuff =
-+ 		    HTMLAttrs.mkISINDEX (ctx TAG_ISINDEXleft, TAG_ISINDEX)
-+ 		  in HTML.ISINDEX stuff end
-+ 		
-+ )
-+  in ( LrTable.NT 20, ( result, TAG_ISINDEX1left, TAG_ISINDEX1right), 
-+ rest671)
-+ end
-+ |  ( 64, ( ( _, ( MlyValue.TextList TextList, _, TextList1right)) :: (
-+  _, ( MlyValue.START_P START_P, (START_Pleft as START_P1left), _)) :: 
-+ rest671)) => let val  result = MlyValue.Paragraph (
-+ HTMLAttrs.mkP(ctx START_Pleft, START_P, TextList))
-+  in ( LrTable.NT 21, ( result, START_P1left, TextList1right), rest671)
-+ 
-+ end
-+ |  ( 65, ( ( _, ( _, _, END_UL1right)) :: ( _, ( MlyValue.ListItemList
-+  ListItemList, _, _)) :: ( _, ( MlyValue.START_UL START_UL, (
-+ START_ULleft as START_UL1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.List (
-+ HTMLAttrs.mkUL(ctx START_ULleft, START_UL, ListItemList))
-+  in ( LrTable.NT 22, ( result, START_UL1left, END_UL1right), rest671)
-+ 
-+ end
-+ |  ( 66, ( ( _, ( _, _, END_OL1right)) :: ( _, ( MlyValue.ListItemList
-+  ListItemList, _, _)) :: ( _, ( MlyValue.START_OL START_OL, (
-+ START_OLleft as START_OL1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.List (
-+ HTMLAttrs.mkOL(ctx START_OLleft, START_OL, ListItemList))
-+  in ( LrTable.NT 22, ( result, START_OL1left, END_OL1right), rest671)
-+ 
-+ end
-+ |  ( 67, ( ( _, ( _, _, END_DIR1right)) :: ( _, ( 
-+ MlyValue.ListItemList ListItemList, _, _)) :: ( _, ( 
-+ MlyValue.START_DIR START_DIR, (START_DIRleft as START_DIR1left), _))
-+  :: rest671)) => let val  result = MlyValue.List (
-+ HTMLAttrs.mkDIR(ctx START_DIRleft, START_DIR, ListItemList))
-+  in ( LrTable.NT 22, ( result, START_DIR1left, END_DIR1right), rest671
-+ )
-+ end
-+ |  ( 68, ( ( _, ( _, _, END_MENU1right)) :: ( _, ( 
-+ MlyValue.ListItemList ListItemList, _, _)) :: ( _, ( 
-+ MlyValue.START_MENU START_MENU, (START_MENUleft as START_MENU1left), _
-+ )) :: rest671)) => let val  result = MlyValue.List (
-+ HTMLAttrs.mkMENU(ctx START_MENUleft, START_MENU, ListItemList))
-+  in ( LrTable.NT 22, ( result, START_MENU1left, END_MENU1right), 
-+ rest671)
-+ end
-+ |  ( 69, ( ( _, ( _, _, END_DL1right)) :: ( _, ( MlyValue.DLItemList 
-+ DLItemList, _, _)) :: ( _, ( MlyValue.START_DL START_DL, (START_DLleft
-+  as START_DL1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.List (
-+ HTMLAttrs.mkDL(
-+ 		  ctx START_DLleft, START_DL,
-+ 		  groupDefListContents DLItemList)
-+ 		
-+ )
-+  in ( LrTable.NT 22, ( result, START_DL1left, END_DL1right), rest671)
-+ 
-+ end
-+ |  ( 70, ( rest671)) => let val  result = MlyValue.ListItemList ([])
-+  in ( LrTable.NT 23, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 71, ( ( _, ( MlyValue.ListItemList ListItemList, _, 
-+ ListItemList1right)) :: ( _, ( MlyValue.ListItem ListItem, 
-+ ListItem1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.ListItemList (ListItem :: ListItemList)
-+  in ( LrTable.NT 23, ( result, ListItem1left, ListItemList1right), 
-+ rest671)
-+ end
-+ |  ( 72, ( ( _, ( _, _, EndLI1right)) :: ( _, ( MlyValue.Flow1 Flow1,
-+  _, _)) :: ( _, ( MlyValue.START_LI START_LI, (START_LIleft as 
-+ START_LI1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.ListItem (
-+ HTMLAttrs.mkLI(ctx START_LIleft, START_LI, mkBlock Flow1))
-+  in ( LrTable.NT 24, ( result, START_LI1left, EndLI1right), rest671)
-+ 
-+ end
-+ |  ( 73, ( rest671)) => let val  result = MlyValue.DLItemList ([])
-+  in ( LrTable.NT 25, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 74, ( ( _, ( MlyValue.DLItemList DLItemList, _, DLItemList1right)
-+ ) :: ( _, ( MlyValue.DLItem DLItem, DLItem1left, _)) :: rest671)) =>
-+  let val  result = MlyValue.DLItemList (DLItem :: DLItemList)
-+  in ( LrTable.NT 25, ( result, DLItem1left, DLItemList1right), rest671
-+ )
-+ end
-+ |  ( 75, ( ( _, ( _, _, EndDT1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_DT1left, _)) :: rest671)) => let
-+  val  result = MlyValue.DLItem (DL_tag TextList)
-+  in ( LrTable.NT 26, ( result, START_DT1left, EndDT1right), rest671)
-+ 
-+ end
-+ |  ( 76, ( ( _, ( _, _, EndDD1right)) :: ( _, ( MlyValue.Flow1 Flow1,
-+  _, _)) :: ( _, ( _, START_DD1left, _)) :: rest671)) => let val  
-+ result = MlyValue.DLItem (DL_item(mkBlock Flow1))
-+  in ( LrTable.NT 26, ( result, START_DD1left, EndDD1right), rest671)
-+ 
-+ end
-+ |  ( 77, ( rest671)) => let val  result = MlyValue.Flow1 ([])
-+  in ( LrTable.NT 27, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 78, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
-+ MlyValue.Text Text, Text1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.Flow1 (consText(Text, Flow1))
-+  in ( LrTable.NT 27, ( result, Text1left, Flow11right), rest671)
-+ end
-+ |  ( 79, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
-+ MlyValue.Block Block, Block1left, _)) :: rest671)) => let val  result
-+  = MlyValue.Flow1 (consBlock(Block, Flow1))
-+  in ( LrTable.NT 27, ( result, Block1left, Flow11right), rest671)
-+ end
-+ |  ( 80, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: _ :: ( _, 
-+ ( MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) =>
-+  let val  result = MlyValue.Flow1 (consBlock(Paragraph, Flow1))
-+  in ( LrTable.NT 27, ( result, Paragraph1left, Flow11right), rest671)
-+ 
-+ end
-+ |  ( 81, ( ( _, ( MlyValue.Flow2 Flow2, _, Flow21right)) :: ( _, ( 
-+ MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Flow1 (consBlock(Paragraph, Flow2))
-+  in ( LrTable.NT 27, ( result, Paragraph1left, Flow21right), rest671)
-+ 
-+ end
-+ |  ( 82, ( rest671)) => let val  result = MlyValue.Flow2 ([])
-+  in ( LrTable.NT 28, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 83, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: ( _, ( 
-+ MlyValue.Block Block, Block1left, _)) :: rest671)) => let val  result
-+  = MlyValue.Flow2 (consBlock(Block, Flow1))
-+  in ( LrTable.NT 28, ( result, Block1left, Flow11right), rest671)
-+ end
-+ |  ( 84, ( ( _, ( MlyValue.Flow1 Flow1, _, Flow11right)) :: _ :: ( _, 
-+ ( MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) =>
-+  let val  result = MlyValue.Flow2 (consBlock(Paragraph, Flow1))
-+  in ( LrTable.NT 28, ( result, Paragraph1left, Flow11right), rest671)
-+ 
-+ end
-+ |  ( 85, ( ( _, ( MlyValue.Flow2 Flow2, _, Flow21right)) :: ( _, ( 
-+ MlyValue.Paragraph Paragraph, Paragraph1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Flow2 (consBlock(Paragraph, Flow2))
-+  in ( LrTable.NT 28, ( result, Paragraph1left, Flow21right), rest671)
-+ 
-+ end
-+ |  ( 86, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 29, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 87, ( ( _, ( _, END_LI1left, END_LI1right)) :: rest671)) => let
-+  val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 29, ( result, END_LI1left, END_LI1right), rest671)
-+ 
-+ end
-+ |  ( 88, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 30, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 89, ( ( _, ( _, END_DT1left, END_DT1right)) :: rest671)) => let
-+  val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 30, ( result, END_DT1left, END_DT1right), rest671)
-+ 
-+ end
-+ |  ( 90, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 31, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 91, ( ( _, ( _, END_DD1left, END_DD1right)) :: rest671)) => let
-+  val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 31, ( result, END_DD1left, END_DD1right), rest671)
-+ 
-+ end
-+ |  ( 92, ( ( _, ( _, _, END_PRE1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_PRE START_PRE, (
-+ START_PREleft as START_PRE1left), _)) :: rest671)) => let val  result
-+  = MlyValue.Preformatted (
-+ HTMLAttrs.mkPRE(ctx START_PREleft, START_PRE, TextList))
-+  in ( LrTable.NT 32, ( result, START_PRE1left, END_PRE1right), rest671
-+ )
-+ end
-+ |  ( 93, ( rest671)) => let val  result = MlyValue.optCaption (NONE)
-+  in ( LrTable.NT 33, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 94, ( ( _, ( _, _, END_CAPTION1right)) :: ( _, ( 
-+ MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_CAPTION 
-+ START_CAPTION, (START_CAPTIONleft as START_CAPTION1left), _)) :: 
-+ rest671)) => let val  result = MlyValue.optCaption (
-+ SOME(HTMLAttrs.mkCAPTION(
-+ 		  ctx START_CAPTIONleft, START_CAPTION, TextList))
-+ )
-+  in ( LrTable.NT 33, ( result, START_CAPTION1left, END_CAPTION1right),
-+  rest671)
-+ end
-+ |  ( 95, ( ( _, ( MlyValue.TableRow TableRow, TableRow1left, 
-+ TableRow1right)) :: rest671)) => let val  result = 
-+ MlyValue.TableRowList ([TableRow])
-+  in ( LrTable.NT 34, ( result, TableRow1left, TableRow1right), rest671
-+ )
-+ end
-+ |  ( 96, ( ( _, ( MlyValue.TableRowList TableRowList, _, 
-+ TableRowList1right)) :: ( _, ( MlyValue.TableRow TableRow, 
-+ TableRow1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.TableRowList (TableRow :: TableRowList)
-+  in ( LrTable.NT 34, ( result, TableRow1left, TableRowList1right), 
-+ rest671)
-+ end
-+ |  ( 97, ( ( _, ( MlyValue.TableCellList TableCellList, _, 
-+ TableCellList1right)) :: ( _, ( MlyValue.START_TR START_TR, (
-+ START_TRleft as START_TR1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.TableRow (
-+ HTMLAttrs.mkTR(ctx START_TRleft, START_TR, TableCellList))
-+  in ( LrTable.NT 35, ( result, START_TR1left, TableCellList1right), 
-+ rest671)
-+ end
-+ |  ( 98, ( ( _, ( _, _, END_TR1right)) :: ( _, ( 
-+ MlyValue.TableCellList TableCellList, _, _)) :: ( _, ( 
-+ MlyValue.START_TR START_TR, (START_TRleft as START_TR1left), _)) :: 
-+ rest671)) => let val  result = MlyValue.TableRow (
-+ HTMLAttrs.mkTR(ctx START_TRleft, START_TR, TableCellList))
-+  in ( LrTable.NT 35, ( result, START_TR1left, END_TR1right), rest671)
-+ 
-+ end
-+ |  ( 99, ( ( _, ( MlyValue.TableCell TableCell, TableCell1left, 
-+ TableCell1right)) :: rest671)) => let val  result = 
-+ MlyValue.TableCellList ([TableCell])
-+  in ( LrTable.NT 36, ( result, TableCell1left, TableCell1right), 
-+ rest671)
-+ end
-+ |  ( 100, ( ( _, ( MlyValue.TableCellList TableCellList, _, 
-+ TableCellList1right)) :: ( _, ( MlyValue.TableCell TableCell, 
-+ TableCell1left, _)) :: rest671)) => let val  result = 
-+ MlyValue.TableCellList (TableCell :: TableCellList)
-+  in ( LrTable.NT 36, ( result, TableCell1left, TableCellList1right), 
-+ rest671)
-+ end
-+ |  ( 101, ( ( _, ( _, _, END_TH1right)) :: ( _, ( MlyValue.BodyContent
-+  BodyContent, _, _)) :: ( _, ( MlyValue.START_TH START_TH, (
-+ START_THleft as START_TH1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.TableCell (
-+ HTMLAttrs.mkTH(ctx START_THleft, START_TH, BodyContent))
-+  in ( LrTable.NT 37, ( result, START_TH1left, END_TH1right), rest671)
-+ 
-+ end
-+ |  ( 102, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
-+ BodyContent1right)) :: ( _, ( MlyValue.START_TH START_TH, (
-+ START_THleft as START_TH1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.TableCell (
-+ HTMLAttrs.mkTH(ctx START_THleft, START_TH, BodyContent))
-+  in ( LrTable.NT 37, ( result, START_TH1left, BodyContent1right), 
-+ rest671)
-+ end
-+ |  ( 103, ( ( _, ( _, _, END_TD1right)) :: ( _, ( MlyValue.BodyContent
-+  BodyContent, _, _)) :: ( _, ( MlyValue.START_TD START_TD, (
-+ START_TDleft as START_TD1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.TableCell (
-+ HTMLAttrs.mkTD(ctx START_TDleft, START_TD, BodyContent))
-+  in ( LrTable.NT 37, ( result, START_TD1left, END_TD1right), rest671)
-+ 
-+ end
-+ |  ( 104, ( ( _, ( MlyValue.BodyContent BodyContent, _, 
-+ BodyContent1right)) :: ( _, ( MlyValue.START_TD START_TD, (
-+ START_TDleft as START_TD1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.TableCell (
-+ HTMLAttrs.mkTD(ctx START_TDleft, START_TD, BodyContent))
-+  in ( LrTable.NT 37, ( result, START_TD1left, BodyContent1right), 
-+ rest671)
-+ end
-+ |  ( 105, ( ( _, ( MlyValue.TextList' TextList', TextList'1left, 
-+ TextList'1right)) :: rest671)) => let val  result = MlyValue.TextList
-+  (textList TextList')
-+  in ( LrTable.NT 38, ( result, TextList'1left, TextList'1right), 
-+ rest671)
-+ end
-+ |  ( 106, ( rest671)) => let val  result = MlyValue.TextList' ([])
-+  in ( LrTable.NT 39, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 107, ( ( _, ( MlyValue.TextList' TextList', _, TextList'1right))
-+  :: ( _, ( MlyValue.Text Text, Text1left, _)) :: rest671)) => let val 
-+  result = MlyValue.TextList' (Text :: TextList')
-+  in ( LrTable.NT 39, ( result, Text1left, TextList'1right), rest671)
-+ 
-+ end
-+ |  ( 108, ( ( _, ( MlyValue.PCDataElem PCDataElem, PCDataElem1left, 
-+ PCDataElem1right)) :: rest671)) => let val  result = 
-+ MlyValue.TextWOScript (HTML.PCDATA PCDataElem)
-+  in ( LrTable.NT 40, ( result, PCDataElem1left, PCDataElem1right), 
-+ rest671)
-+ end
-+ |  ( 109, ( ( _, ( MlyValue.Font Font, Font1left, Font1right)) :: 
-+ rest671)) => let val  result = MlyValue.TextWOScript (Font)
-+  in ( LrTable.NT 40, ( result, Font1left, Font1right), rest671)
-+ end
-+ |  ( 110, ( ( _, ( MlyValue.Phrase Phrase, Phrase1left, Phrase1right))
-+  :: rest671)) => let val  result = MlyValue.TextWOScript (Phrase)
-+  in ( LrTable.NT 40, ( result, Phrase1left, Phrase1right), rest671)
-+ 
-+ end
-+ |  ( 111, ( ( _, ( MlyValue.Special Special, Special1left, 
-+ Special1right)) :: rest671)) => let val  result = 
-+ MlyValue.TextWOScript (Special)
-+  in ( LrTable.NT 40, ( result, Special1left, Special1right), rest671)
-+ 
-+ end
-+ |  ( 112, ( ( _, ( MlyValue.Form Form, Form1left, Form1right)) :: 
-+ rest671)) => let val  result = MlyValue.TextWOScript (Form)
-+  in ( LrTable.NT 40, ( result, Form1left, Form1right), rest671)
-+ end
-+ |  ( 113, ( ( _, ( MlyValue.TextWOScript TextWOScript, 
-+ TextWOScript1left, TextWOScript1right)) :: rest671)) => let val  
-+ result = MlyValue.Text (TextWOScript)
-+  in ( LrTable.NT 41, ( result, TextWOScript1left, TextWOScript1right),
-+  rest671)
-+ end
-+ |  ( 114, ( ( _, ( _, _, END_SCRIPT1right)) :: ( _, ( MlyValue.PCData 
-+ PCData, _, _)) :: ( _, ( _, START_SCRIPT1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Text (HTML.SCRIPT PCData)
-+  in ( LrTable.NT 41, ( result, START_SCRIPT1left, END_SCRIPT1right), 
-+ rest671)
-+ end
-+ |  ( 115, ( ( _, ( _, _, END_TT1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_TT1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.TT(TextList))
-+  in ( LrTable.NT 42, ( result, START_TT1left, END_TT1right), rest671)
-+ 
-+ end
-+ |  ( 116, ( ( _, ( _, _, END_I1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_I1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.I(TextList))
-+  in ( LrTable.NT 42, ( result, START_I1left, END_I1right), rest671)
-+ 
-+ end
-+ |  ( 117, ( ( _, ( _, _, END_B1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_B1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.B(TextList))
-+  in ( LrTable.NT 42, ( result, START_B1left, END_B1right), rest671)
-+ 
-+ end
-+ |  ( 118, ( ( _, ( _, _, END_U1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_U1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.U(TextList))
-+  in ( LrTable.NT 42, ( result, START_U1left, END_U1right), rest671)
-+ 
-+ end
-+ |  ( 119, ( ( _, ( _, _, END_STRIKE1right)) :: ( _, ( 
-+ MlyValue.TextList TextList, _, _)) :: ( _, ( _, START_STRIKE1left, _))
-+  :: rest671)) => let val  result = MlyValue.Font (
-+ HTML.STRIKE(TextList))
-+  in ( LrTable.NT 42, ( result, START_STRIKE1left, END_STRIKE1right), 
-+ rest671)
-+ end
-+ |  ( 120, ( ( _, ( _, _, END_BIG1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_BIG1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.BIG(TextList))
-+  in ( LrTable.NT 42, ( result, START_BIG1left, END_BIG1right), rest671
-+ )
-+ end
-+ |  ( 121, ( ( _, ( _, _, END_SMALL1right)) :: ( _, ( MlyValue.TextList
-+  TextList, _, _)) :: ( _, ( _, START_SMALL1left, _)) :: rest671)) =>
-+  let val  result = MlyValue.Font (HTML.SMALL(TextList))
-+  in ( LrTable.NT 42, ( result, START_SMALL1left, END_SMALL1right), 
-+ rest671)
-+ end
-+ |  ( 122, ( ( _, ( _, _, END_SUB1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_SUB1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.SUB(TextList))
-+  in ( LrTable.NT 42, ( result, START_SUB1left, END_SUB1right), rest671
-+ )
-+ end
-+ |  ( 123, ( ( _, ( _, _, END_SUP1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_SUP1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Font (HTML.SUP(TextList))
-+  in ( LrTable.NT 42, ( result, START_SUP1left, END_SUP1right), rest671
-+ )
-+ end
-+ |  ( 124, ( ( _, ( _, _, END_EM1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_EM1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.EM(TextList))
-+  in ( LrTable.NT 43, ( result, START_EM1left, END_EM1right), rest671)
-+ 
-+ end
-+ |  ( 125, ( ( _, ( _, _, END_STRONG1right)) :: ( _, ( 
-+ MlyValue.TextList TextList, _, _)) :: ( _, ( _, START_STRONG1left, _))
-+  :: rest671)) => let val  result = MlyValue.Phrase (
-+ HTML.STRONG(TextList))
-+  in ( LrTable.NT 43, ( result, START_STRONG1left, END_STRONG1right), 
-+ rest671)
-+ end
-+ |  ( 126, ( ( _, ( _, _, END_CODE1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_CODE1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.CODE(TextList))
-+  in ( LrTable.NT 43, ( result, START_CODE1left, END_CODE1right), 
-+ rest671)
-+ end
-+ |  ( 127, ( ( _, ( _, _, END_DFN1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_DFN1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.DFN(TextList))
-+  in ( LrTable.NT 43, ( result, START_DFN1left, END_DFN1right), rest671
-+ )
-+ end
-+ |  ( 128, ( ( _, ( _, _, END_SAMP1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_SAMP1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.SAMP(TextList))
-+  in ( LrTable.NT 43, ( result, START_SAMP1left, END_SAMP1right), 
-+ rest671)
-+ end
-+ |  ( 129, ( ( _, ( _, _, END_KBD1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_KBD1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.KBD(TextList))
-+  in ( LrTable.NT 43, ( result, START_KBD1left, END_KBD1right), rest671
-+ )
-+ end
-+ |  ( 130, ( ( _, ( _, _, END_VAR1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_VAR1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.VAR(TextList))
-+  in ( LrTable.NT 43, ( result, START_VAR1left, END_VAR1right), rest671
-+ )
-+ end
-+ |  ( 131, ( ( _, ( _, _, END_CITE1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( _, START_CITE1left, _)) :: rest671)) => let
-+  val  result = MlyValue.Phrase (HTML.CITE(TextList))
-+  in ( LrTable.NT 43, ( result, START_CITE1left, END_CITE1right), 
-+ rest671)
-+ end
-+ |  ( 132, ( ( _, ( _, _, END_A1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_A START_A, (START_Aleft as 
-+ START_A1left), _)) :: rest671)) => let val  result = MlyValue.Special
-+  (HTMLAttrs.mkA(ctx START_Aleft, START_A, TextList))
-+  in ( LrTable.NT 44, ( result, START_A1left, END_A1right), rest671)
-+ 
-+ end
-+ |  ( 133, ( ( _, ( MlyValue.TAG_IMG TAG_IMG, (TAG_IMGleft as 
-+ TAG_IMG1left), TAG_IMG1right)) :: rest671)) => let val  result = 
-+ MlyValue.Special (HTMLAttrs.mkIMG(ctx TAG_IMGleft, TAG_IMG))
-+  in ( LrTable.NT 44, ( result, TAG_IMG1left, TAG_IMG1right), rest671)
-+ 
-+ end
-+ |  ( 134, ( ( _, ( _, _, END_APPLET1right)) :: ( _, ( 
-+ MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_APPLET 
-+ START_APPLET, (START_APPLETleft as START_APPLET1left), _)) :: rest671)
-+ ) => let val  result = MlyValue.Special (
-+ HTMLAttrs.mkAPPLET(ctx START_APPLETleft, START_APPLET, TextList))
-+  in ( LrTable.NT 44, ( result, START_APPLET1left, END_APPLET1right), 
-+ rest671)
-+ end
-+ |  ( 135, ( ( _, ( _, _, END_FONT1right)) :: ( _, ( MlyValue.TextList 
-+ TextList, _, _)) :: ( _, ( MlyValue.START_FONT START_FONT, (
-+ START_FONTleft as START_FONT1left), _)) :: rest671)) => let val  
-+ result = MlyValue.Special (
-+ HTMLAttrs.mkFONT(ctx START_FONTleft, START_FONT, TextList))
-+  in ( LrTable.NT 44, ( result, START_FONT1left, END_FONT1right), 
-+ rest671)
-+ end
-+ |  ( 136, ( ( _, ( _, _, END_BASEFONT1right)) :: ( _, ( 
-+ MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_BASEFONT 
-+ START_BASEFONT, (START_BASEFONTleft as START_BASEFONT1left), _)) :: 
-+ rest671)) => let val  result = MlyValue.Special (
-+ HTMLAttrs.mkBASEFONT(
-+ 		  ctx START_BASEFONTleft, START_BASEFONT, TextList)
-+ 		
-+ )
-+  in ( LrTable.NT 44, ( result, START_BASEFONT1left, END_BASEFONT1right
-+ ), rest671)
-+ end
-+ |  ( 137, ( ( _, ( MlyValue.TAG_BR TAG_BR, (TAG_BRleft as TAG_BR1left)
-+ , TAG_BR1right)) :: rest671)) => let val  result = MlyValue.Special (
-+ HTMLAttrs.mkBR(ctx TAG_BRleft, TAG_BR))
-+  in ( LrTable.NT 44, ( result, TAG_BR1left, TAG_BR1right), rest671)
-+ 
-+ end
-+ |  ( 138, ( ( _, ( _, _, END_MAP1right)) :: ( _, ( MlyValue.AreaList 
-+ AreaList, _, _)) :: ( _, ( MlyValue.START_MAP START_MAP, (
-+ START_MAPleft as START_MAP1left), _)) :: rest671)) => let val  result
-+  = MlyValue.Special (
-+ HTMLAttrs.mkMAP(ctx START_MAPleft, START_MAP, AreaList))
-+  in ( LrTable.NT 44, ( result, START_MAP1left, END_MAP1right), rest671
-+ )
-+ end
-+ |  ( 139, ( ( _, ( MlyValue.TAG_PARAM TAG_PARAM, (TAG_PARAMleft as 
-+ TAG_PARAM1left), TAG_PARAM1right)) :: rest671)) => let val  result = 
-+ MlyValue.Special (HTMLAttrs.mkPARAM(ctx TAG_PARAMleft, TAG_PARAM))
-+  in ( LrTable.NT 44, ( result, TAG_PARAM1left, TAG_PARAM1right), 
-+ rest671)
-+ end
-+ |  ( 140, ( rest671)) => let val  result = MlyValue.AreaList ([])
-+  in ( LrTable.NT 45, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 141, ( ( _, ( MlyValue.AreaList AreaList, _, AreaList1right)) :: 
-+ ( _, ( MlyValue.TAG_AREA TAG_AREA, (TAG_AREAleft as TAG_AREA1left), _)
-+ ) :: rest671)) => let val  result = MlyValue.AreaList (
-+ HTMLAttrs.mkAREA(ctx TAG_AREAleft, TAG_AREA) :: AreaList)
-+  in ( LrTable.NT 45, ( result, TAG_AREA1left, AreaList1right), rest671
-+ )
-+ end
-+ |  ( 142, ( ( _, ( MlyValue.TAG_INPUT TAG_INPUT, (TAG_INPUTleft as 
-+ TAG_INPUT1left), TAG_INPUT1right)) :: rest671)) => let val  result = 
-+ MlyValue.Form (HTMLAttrs.mkINPUT(ctx TAG_INPUTleft, TAG_INPUT))
-+  in ( LrTable.NT 46, ( result, TAG_INPUT1left, TAG_INPUT1right), 
-+ rest671)
-+ end
-+ |  ( 143, ( ( _, ( _, _, END_SELECT1right)) :: ( _, ( 
-+ MlyValue.OptionList OptionList, _, _)) :: ( _, ( MlyValue.START_SELECT
-+  START_SELECT, (START_SELECTleft as START_SELECT1left), _)) :: rest671
-+ )) => let val  result = MlyValue.Form (
-+ HTMLAttrs.mkSELECT(ctx START_SELECTleft, START_SELECT, OptionList))
-+  in ( LrTable.NT 46, ( result, START_SELECT1left, END_SELECT1right), 
-+ rest671)
-+ end
-+ |  ( 144, ( ( _, ( _, _, END_TEXTAREA1right)) :: ( _, ( 
-+ MlyValue.PCData PCData, _, _)) :: ( _, ( MlyValue.START_TEXTAREA 
-+ START_TEXTAREA, (START_TEXTAREAleft as START_TEXTAREA1left), _)) :: 
-+ rest671)) => let val  result = MlyValue.Form (
-+ HTMLAttrs.mkTEXTAREA(
-+ 		  ctx START_TEXTAREAleft, START_TEXTAREA,
-+ 		  PCData)
-+ 		
-+ )
-+  in ( LrTable.NT 46, ( result, START_TEXTAREA1left, END_TEXTAREA1right
-+ ), rest671)
-+ end
-+ |  ( 145, ( rest671)) => let val  result = MlyValue.OptionList ([])
-+  in ( LrTable.NT 47, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 146, ( ( _, ( MlyValue.OptionList OptionList, _, OptionList1right
-+ )) :: _ :: ( _, ( MlyValue.PCData PCData, _, _)) :: ( _, ( 
-+ MlyValue.START_OPTION START_OPTION, (START_OPTIONleft as 
-+ START_OPTION1left), _)) :: rest671)) => let val  result = 
-+ MlyValue.OptionList (
-+ HTMLAttrs.mkOPTION(ctx START_OPTIONleft, START_OPTION, PCData)
-+ 		  :: OptionList
-+ 		
-+ )
-+  in ( LrTable.NT 47, ( result, START_OPTION1left, OptionList1right), 
-+ rest671)
-+ end
-+ |  ( 147, ( rest671)) => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 48, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 148, ( ( _, ( _, END_OPTION1left, END_OPTION1right)) :: rest671))
-+  => let val  result = MlyValue.ntVOID ()
-+  in ( LrTable.NT 48, ( result, END_OPTION1left, END_OPTION1right), 
-+ rest671)
-+ end
-+ |  ( 149, ( ( _, ( MlyValue.PCDataList PCDataList, PCDataList1left, 
-+ PCDataList1right)) :: rest671)) => let val  result = MlyValue.PCData (
-+ concat PCDataList)
-+  in ( LrTable.NT 49, ( result, PCDataList1left, PCDataList1right), 
-+ rest671)
-+ end
-+ |  ( 150, ( rest671)) => let val  result = MlyValue.PCDataList ([])
-+  in ( LrTable.NT 50, ( result, defaultPos, defaultPos), rest671)
-+ end
-+ |  ( 151, ( ( _, ( MlyValue.PCDataList PCDataList, _, PCDataList1right
-+ )) :: ( _, ( MlyValue.PCDataElem PCDataElem, PCDataElem1left, _)) :: 
-+ rest671)) => let val  result = MlyValue.PCDataList (
-+ PCDataElem :: PCDataList)
-+  in ( LrTable.NT 50, ( result, PCDataElem1left, PCDataList1right), 
-+ rest671)
-+ end
-+ |  ( 152, ( ( _, ( MlyValue.PCDATA PCDATA, PCDATA1left, PCDATA1right))
-+  :: rest671)) => let val  result = MlyValue.PCDataElem (PCDATA)
-+  in ( LrTable.NT 51, ( result, PCDATA1left, PCDATA1right), rest671)
-+ 
-+ end
-+ |  ( 153, ( ( _, ( MlyValue.CHAR_REF CHAR_REF, CHAR_REF1left, 
-+ CHAR_REF1right)) :: rest671)) => let val  result = MlyValue.PCDataElem
-+  (CHAR_REF)
-+  in ( LrTable.NT 51, ( result, CHAR_REF1left, CHAR_REF1right), rest671
-+ )
-+ end
-+ |  ( 154, ( ( _, ( MlyValue.ENTITY_REF ENTITY_REF, ENTITY_REF1left, 
-+ ENTITY_REF1right)) :: rest671)) => let val  result = 
-+ MlyValue.PCDataElem (ENTITY_REF)
-+  in ( LrTable.NT 51, ( result, ENTITY_REF1left, ENTITY_REF1right), 
-+ rest671)
-+ end
-+ | _ => raise (mlyAction i392)
-+ end
-+ val void = MlyValue.VOID
-+ val extract = fn a => (fn MlyValue.Document x => x
-+ | _ => let exception ParseInternal
-+ 	in raise ParseInternal end) a 
-+ end
-+ end
-+ structure Tokens : HTML_TOKENS =
-+ struct
-+ type svalue = ParserData.svalue
-+ type ('a,'b) token = ('a,'b) Token.token
-+ fun EOF (p1,p2) = Token.TOKEN (ParserData.LrTable.T 0,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_A (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 1,(
-+ ParserData.MlyValue.START_A i,p1,p2))
-+ fun END_A (p1,p2) = Token.TOKEN (ParserData.LrTable.T 2,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_ADDRESS (p1,p2) = Token.TOKEN (ParserData.LrTable.T 3,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_ADDRESS (p1,p2) = Token.TOKEN (ParserData.LrTable.T 4,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_APPLET (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 5,(
-+ ParserData.MlyValue.START_APPLET i,p1,p2))
-+ fun END_APPLET (p1,p2) = Token.TOKEN (ParserData.LrTable.T 6,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_AREA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 7,(
-+ ParserData.MlyValue.TAG_AREA i,p1,p2))
-+ fun START_B (p1,p2) = Token.TOKEN (ParserData.LrTable.T 8,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_B (p1,p2) = Token.TOKEN (ParserData.LrTable.T 9,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_BASE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 10,(
-+ ParserData.MlyValue.TAG_BASE i,p1,p2))
-+ fun START_BIG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 11,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_BIG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 12,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_BLOCKQUOTE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 13,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_BLOCKQUOTE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 14,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_BODY (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 15,(
-+ ParserData.MlyValue.START_BODY i,p1,p2))
-+ fun END_BODY (p1,p2) = Token.TOKEN (ParserData.LrTable.T 16,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_BR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 17,(
-+ ParserData.MlyValue.TAG_BR i,p1,p2))
-+ fun START_CAPTION (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 18,(
-+ ParserData.MlyValue.START_CAPTION i,p1,p2))
-+ fun END_CAPTION (p1,p2) = Token.TOKEN (ParserData.LrTable.T 19,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_CENTER (p1,p2) = Token.TOKEN (ParserData.LrTable.T 20,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_CENTER (p1,p2) = Token.TOKEN (ParserData.LrTable.T 21,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_CITE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 22,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_CITE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 23,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_CODE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 24,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_CODE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 25,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 26,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_DD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 27,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DFN (p1,p2) = Token.TOKEN (ParserData.LrTable.T 28,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_DFN (p1,p2) = Token.TOKEN (ParserData.LrTable.T 29,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DIR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 30,(
-+ ParserData.MlyValue.START_DIR i,p1,p2))
-+ fun END_DIR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 31,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DIV (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 32,(
-+ ParserData.MlyValue.START_DIV i,p1,p2))
-+ fun END_DIV (p1,p2) = Token.TOKEN (ParserData.LrTable.T 33,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 34,(
-+ ParserData.MlyValue.START_DL i,p1,p2))
-+ fun END_DL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 35,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_DT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 36,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_DT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 37,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_EM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 38,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_EM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 39,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_FONT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 40,(
-+ ParserData.MlyValue.START_FONT i,p1,p2))
-+ fun END_FONT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 41,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_BASEFONT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 42,(
-+ ParserData.MlyValue.START_BASEFONT i,p1,p2))
-+ fun END_BASEFONT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 43,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_FORM (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 44,(
-+ ParserData.MlyValue.START_FORM i,p1,p2))
-+ fun END_FORM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 45,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H1 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 46,(
-+ ParserData.MlyValue.START_H1 i,p1,p2))
-+ fun END_H1 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 47,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H2 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 48,(
-+ ParserData.MlyValue.START_H2 i,p1,p2))
-+ fun END_H2 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 49,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H3 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 50,(
-+ ParserData.MlyValue.START_H3 i,p1,p2))
-+ fun END_H3 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 51,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H4 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 52,(
-+ ParserData.MlyValue.START_H4 i,p1,p2))
-+ fun END_H4 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 53,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H5 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 54,(
-+ ParserData.MlyValue.START_H5 i,p1,p2))
-+ fun END_H5 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 55,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_H6 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 56,(
-+ ParserData.MlyValue.START_H6 i,p1,p2))
-+ fun END_H6 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 57,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_HEAD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 58,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_HEAD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 59,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_HR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 60,(
-+ ParserData.MlyValue.TAG_HR i,p1,p2))
-+ fun START_HTML (p1,p2) = Token.TOKEN (ParserData.LrTable.T 61,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_HTML (p1,p2) = Token.TOKEN (ParserData.LrTable.T 62,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_I (p1,p2) = Token.TOKEN (ParserData.LrTable.T 63,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_I (p1,p2) = Token.TOKEN (ParserData.LrTable.T 64,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_IMG (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 65,(
-+ ParserData.MlyValue.TAG_IMG i,p1,p2))
-+ fun TAG_INPUT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 66,(
-+ ParserData.MlyValue.TAG_INPUT i,p1,p2))
-+ fun TAG_ISINDEX (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 67,(
-+ ParserData.MlyValue.TAG_ISINDEX i,p1,p2))
-+ fun START_KBD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 68,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_KBD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 69,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_LI (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 70,(
-+ ParserData.MlyValue.START_LI i,p1,p2))
-+ fun END_LI (p1,p2) = Token.TOKEN (ParserData.LrTable.T 71,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_LINK (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 72,(
-+ ParserData.MlyValue.TAG_LINK i,p1,p2))
-+ fun START_MAP (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 73,(
-+ ParserData.MlyValue.START_MAP i,p1,p2))
-+ fun END_MAP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 74,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_MENU (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 75,(
-+ ParserData.MlyValue.START_MENU i,p1,p2))
-+ fun END_MENU (p1,p2) = Token.TOKEN (ParserData.LrTable.T 76,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_META (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 77,(
-+ ParserData.MlyValue.TAG_META i,p1,p2))
-+ fun START_OL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 78,(
-+ ParserData.MlyValue.START_OL i,p1,p2))
-+ fun END_OL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 79,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_OPTION (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 80,(
-+ ParserData.MlyValue.START_OPTION i,p1,p2))
-+ fun END_OPTION (p1,p2) = Token.TOKEN (ParserData.LrTable.T 81,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_P (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 82,(
-+ ParserData.MlyValue.START_P i,p1,p2))
-+ fun END_P (p1,p2) = Token.TOKEN (ParserData.LrTable.T 83,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun TAG_PARAM (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 84,(
-+ ParserData.MlyValue.TAG_PARAM i,p1,p2))
-+ fun START_PRE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 85,(
-+ ParserData.MlyValue.START_PRE i,p1,p2))
-+ fun END_PRE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 86,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SAMP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 87,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_SAMP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 88,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SCRIPT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 89,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_SCRIPT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 90,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SELECT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 91,(
-+ ParserData.MlyValue.START_SELECT i,p1,p2))
-+ fun END_SELECT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 92,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SMALL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 93,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_SMALL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 94,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_STRIKE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 95,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_STRIKE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 96,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_STRONG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 97,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_STRONG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 98,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_STYLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 99,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_STYLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 100,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SUB (p1,p2) = Token.TOKEN (ParserData.LrTable.T 101,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_SUB (p1,p2) = Token.TOKEN (ParserData.LrTable.T 102,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_SUP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 103,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_SUP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 104,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TABLE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 105,(
-+ ParserData.MlyValue.START_TABLE i,p1,p2))
-+ fun END_TABLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 106,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TD (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 107,(
-+ ParserData.MlyValue.START_TD i,p1,p2))
-+ fun END_TD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 108,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TEXTAREA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 109,(
-+ ParserData.MlyValue.START_TEXTAREA i,p1,p2))
-+ fun END_TEXTAREA (p1,p2) = Token.TOKEN (ParserData.LrTable.T 110,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TH (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 111,(
-+ ParserData.MlyValue.START_TH i,p1,p2))
-+ fun END_TH (p1,p2) = Token.TOKEN (ParserData.LrTable.T 112,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TITLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 113,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_TITLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 114,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 115,(
-+ ParserData.MlyValue.START_TR i,p1,p2))
-+ fun END_TR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 116,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_TT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 117,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_TT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 118,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_U (p1,p2) = Token.TOKEN (ParserData.LrTable.T 119,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_U (p1,p2) = Token.TOKEN (ParserData.LrTable.T 120,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_UL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 121,(
-+ ParserData.MlyValue.START_UL i,p1,p2))
-+ fun END_UL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 122,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun START_VAR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 123,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun END_VAR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 124,(
-+ ParserData.MlyValue.VOID,p1,p2))
-+ fun PCDATA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 125,(
-+ ParserData.MlyValue.PCDATA i,p1,p2))
-+ fun CHAR_REF (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 126,(
-+ ParserData.MlyValue.CHAR_REF i,p1,p2))
-+ fun ENTITY_REF (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 127,(
-+ ParserData.MlyValue.ENTITY_REF i,p1,p2))
-+ end
-+ end
-diff -N -C 2 -r smlnj-lib/HTML/html-lex.sml smlnj-lib-mlton/HTML/html-lex.sml
-*** smlnj-lib/HTML/html-lex.sml	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HTML/html-lex.sml	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,670 ----
-+ functor HTMLLexFn (
-+   structure Tokens : HTML_TOKENS
-+   structure Err : HTML_ERROR
-+   structure HTMLAttrs : HTML_ATTRS)=
-+    struct
-+     structure UserDeclarations =
-+       struct
-+ (* html-lex
-+  *
-+  * COPYRIGHT (c) 1995 AT&T Bell Laboratories.
-+  * COPYRIGHT (c) 1996 AT&T Research.
-+  *
-+  * A scanner for HTML.
-+  *
-+  * TODO:
-+  *    Recognize the DOCTYPE element
-+  *	<!DOCTYPE HTML PUBLIC "...">
-+  *    Clean-up the scanning of start tags (do we need Err?).
-+  *    Whitespace in PRE elements should be preserved, but how?
-+  *)
-+ 
-+ structure T = Tokens
-+ structure Elems = HTMLElementsFn (
-+   structure Tokens = Tokens
-+   structure Err = Err
-+   structure HTMLAttrs = HTMLAttrs)
-+ 
-+ type pos = int
-+ type svalue = T.svalue
-+ type arg = (((string * int * int) -> unit) * string option)
-+ type ('a, 'b) token = ('a, 'b) T.token
-+ type lexresult= (svalue, pos) token
-+ 
-+ fun eof _ = Tokens.EOF(0, 0)
-+ 
-+ (* a buffer for collecting a string piecewise *)
-+ val buffer = ref ([] : string list)
-+ fun addStr s = (buffer := s :: !buffer)
-+ fun getStr () = (String.concat(List.rev(! buffer)) before (buffer := []))
-+ 
-+ end (* end of user routines *)
-+ exception LexError (* raised if illegal leaf action tried *)
-+ structure Internal =
-+ 	struct
-+ 
-+ datatype yyfinstate = N of int
-+ type statedata = {fin : yyfinstate list, trans: string}
-+ (* transition & final state table *)
-+ val tab = let
-+ val s = [ 
-+  (0, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (1, 
-+ "\009\009\009\009\009\009\009\009\009\028\029\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\028\009\009\009\009\009\020\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\011\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
-+ \\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009"
-+ ),
-+  (3, 
-+ "\030\030\030\030\030\030\030\030\030\030\033\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\031\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
-+ \\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030"
-+ ),
-+  (5, 
-+ "\034\034\034\034\034\034\034\034\034\038\039\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\038\034\034\034\034\034\034\034\034\034\034\034\034\036\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\035\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
-+ \\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034"
-+ ),
-+  (7, 
-+ "\040\040\040\040\040\040\040\040\040\051\053\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\051\040\048\040\040\040\040\045\040\040\040\040\040\041\041\040\
-+ \\041\041\041\041\041\041\041\041\041\041\040\040\040\044\043\040\
-+ \\040\041\041\041\041\041\041\041\041\041\041\041\041\041\041\041\
-+ \\041\041\041\041\041\041\041\041\041\041\041\040\040\040\040\040\
-+ \\040\041\041\041\041\041\041\041\041\041\041\041\041\041\041\041\
-+ \\041\041\041\041\041\041\041\041\041\041\041\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
-+ \\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040"
-+ ),
-+  (9, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\000\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (11, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\017\000\000\000\000\000\000\000\000\000\000\000\000\000\013\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
-+ \\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
-+ \\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
-+ \\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (12, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\012\012\000\
-+ \\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\000\
-+ \\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
-+ \\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
-+ \\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
-+ \\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (13, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
-+ \\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
-+ \\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
-+ \\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (14, 
-+ "\000\000\000\000\000\000\000\000\000\016\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\016\000\000\000\000\000\000\000\000\000\000\000\000\014\014\000\
-+ \\014\014\014\014\014\014\014\014\014\014\000\000\000\000\015\000\
-+ \\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
-+ \\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
-+ \\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
-+ \\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (16, 
-+ "\000\000\000\000\000\000\000\000\000\016\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\016\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\015\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (17, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\018\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (18, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\019\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (20, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\023\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\000\010\010\010\
-+ \\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
-+ \\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
-+ \\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
-+ \\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (21, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\021\021\010\
-+ \\021\021\021\021\021\021\021\021\021\021\010\022\000\010\010\010\
-+ \\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
-+ \\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
-+ \\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
-+ \\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (23, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\026\026\026\026\026\026\026\026\026\026\010\010\000\010\010\010\
-+ \\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
-+ \\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
-+ \\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
-+ \\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (24, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\025\000\010\010\010\
-+ \\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
-+ \\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
-+ \\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
-+ \\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (26, 
-+ "\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\026\026\026\026\026\026\026\026\026\026\010\027\000\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
-+ \\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
-+ ),
-+  (31, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\032\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (36, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\037\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (41, 
-+ "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\042\042\000\
-+ \\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\000\
-+ \\000\042\042\042\042\042\042\042\042\042\042\042\042\042\042\042\
-+ \\042\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\
-+ \\000\042\042\042\042\042\042\042\042\042\042\042\042\042\042\042\
-+ \\042\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+  (45, 
-+ "\046\046\046\046\046\046\046\046\046\046\000\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\047\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
-+ \\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046"
-+ ),
-+  (48, 
-+ "\049\049\049\049\049\049\049\049\049\049\000\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\050\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
-+ \\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049"
-+ ),
-+  (51, 
-+ "\000\000\000\000\000\000\000\000\000\052\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\052\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
-+ \\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
-+ ),
-+ (0, "")]
-+ fun f x = x 
-+ val s = map f (rev (tl (rev s))) 
-+ exception LexHackingError 
-+ fun look ((j,x)::r, i: int) = if i = j then x else look(r, i) 
-+   | look ([], i) = raise LexHackingError
-+ fun g {fin=x, trans=i} = {fin=x, trans=look(s,i)} 
-+ in Vector.fromList(map g 
-+ [{fin = [], trans = 0},
-+ {fin = [], trans = 1},
-+ {fin = [], trans = 1},
-+ {fin = [], trans = 3},
-+ {fin = [], trans = 3},
-+ {fin = [], trans = 5},
-+ {fin = [], trans = 5},
-+ {fin = [], trans = 7},
-+ {fin = [], trans = 7},
-+ {fin = [(N 79),(N 81)], trans = 9},
-+ {fin = [(N 79)], trans = 9},
-+ {fin = [(N 81)], trans = 11},
-+ {fin = [(N 3)], trans = 12},
-+ {fin = [], trans = 13},
-+ {fin = [], trans = 14},
-+ {fin = [(N 32)], trans = 0},
-+ {fin = [], trans = 16},
-+ {fin = [], trans = 17},
-+ {fin = [], trans = 18},
-+ {fin = [(N 37)], trans = 0},
-+ {fin = [(N 79),(N 81)], trans = 20},
-+ {fin = [(N 79)], trans = 21},
-+ {fin = [(N 72),(N 79)], trans = 9},
-+ {fin = [(N 79)], trans = 23},
-+ {fin = [(N 79)], trans = 24},
-+ {fin = [(N 61),(N 79)], trans = 9},
-+ {fin = [(N 79)], trans = 26},
-+ {fin = [(N 67),(N 79)], trans = 9},
-+ {fin = [(N 76),(N 79),(N 81)], trans = 9},
-+ {fin = [(N 74),(N 79)], trans = 9},
-+ {fin = [(N 44)], trans = 0},
-+ {fin = [(N 44)], trans = 31},
-+ {fin = [(N 40)], trans = 0},
-+ {fin = [(N 42)], trans = 0},
-+ {fin = [(N 55)], trans = 0},
-+ {fin = [(N 49),(N 55)], trans = 0},
-+ {fin = [(N 55)], trans = 36},
-+ {fin = [(N 47)], trans = 0},
-+ {fin = [(N 53),(N 55)], trans = 0},
-+ {fin = [(N 51)], trans = 0},
-+ {fin = [(N 25)], trans = 0},
-+ {fin = [(N 13),(N 25)], trans = 41},
-+ {fin = [(N 13)], trans = 41},
-+ {fin = [(N 5),(N 25)], trans = 0},
-+ {fin = [(N 15),(N 25)], trans = 0},
-+ {fin = [(N 25)], trans = 45},
-+ {fin = [], trans = 45},
-+ {fin = [(N 23)], trans = 0},
-+ {fin = [(N 25)], trans = 48},
-+ {fin = [], trans = 48},
-+ {fin = [(N 19)], trans = 0},
-+ {fin = [(N 10),(N 25)], trans = 51},
-+ {fin = [(N 10)], trans = 51},
-+ {fin = [(N 7)], trans = 0}])
-+ end
-+ structure StartStates =
-+ 	struct
-+ 	datatype yystartstate = STARTSTATE of int
-+ 
-+ (* start state definitions *)
-+ 
-+ val COM1 = STARTSTATE 3;
-+ val COM2 = STARTSTATE 5;
-+ val INITIAL = STARTSTATE 1;
-+ val STAG = STARTSTATE 7;
-+ 
-+ end
-+ type result = UserDeclarations.lexresult
-+ 	exception LexerError (* raised if illegal leaf action tried *)
-+ end
-+ 
-+ fun makeLexer yyinput =
-+ let	val yygone0=1
-+ 	val yylineno = ref 0
-+ 
-+ 	val yyb = ref "\n" 		(* buffer *)
-+ 	val yybl = ref 1		(*buffer length *)
-+ 	val yybufpos = ref 1		(* location of next character to use *)
-+ 	val yygone = ref yygone0	(* position in file of beginning of buffer *)
-+ 	val yydone = ref false		(* eof found yet? *)
-+ 	val yybegin = ref 1		(*Current 'start state' for lexer *)
-+ 
-+ 	val YYBEGIN = fn (Internal.StartStates.STARTSTATE x) =>
-+ 		 yybegin := x
-+ 
-+ fun lex (yyarg as (errorFn, file)) =
-+ let fun continue() : Internal.result = 
-+   let fun scan (s,AcceptingLeaves : Internal.yyfinstate list list,l,i0) =
-+ 	let fun action (i,nil) = raise LexError
-+ 	| action (i,nil::l) = action (i-1,l)
-+ 	| action (i,(node::acts)::l) =
-+ 		case node of
-+ 		    Internal.N yyk => 
-+ 			(let fun yymktext() = substring(!yyb,i0,i-i0)
-+ 			     val yypos = i0+ !yygone
-+ 			val _ = yylineno := CharVectorSlice.foldli
-+ 				(fn (_,#"\n", n) => n+1 | (_,_, n) => n) (!yylineno) (CharVectorSlice.slice (!yyb,i0,SOME(i-i0)))
-+ 			open UserDeclarations Internal.StartStates
-+  in (yybufpos := i; case yyk of 
-+ 
-+ 			(* Application actions *)
-+ 
-+   10 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 13 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 15 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 19 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 23 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 25 => let val yytext=yymktext() in addStr yytext; continue() end
-+ | 3 => let val yytext=yymktext() in addStr yytext; YYBEGIN STAG; continue() end
-+ | 32 => let val yytext=yymktext() in case Elems.endTag file (yytext, !yylineno, !yylineno)
-+ 	     of NONE => continue()
-+ 	      | (SOME tag) => tag
-+ 	    (* end case *) end
-+ | 37 => (YYBEGIN COM1; continue())
-+ | 40 => (YYBEGIN COM2; continue())
-+ | 42 => (continue())
-+ | 44 => (continue())
-+ | 47 => (YYBEGIN COM1; continue())
-+ | 49 => (YYBEGIN INITIAL; continue())
-+ | 5 => let val yytext=yymktext() in addStr yytext;
-+ 	    YYBEGIN INITIAL;
-+ 	    case Elems.startTag file (getStr(), !yylineno, !yylineno)
-+ 	     of NONE => continue()
-+ 	      | (SOME tag) => tag
-+ 	    (* end case *) end
-+ | 51 => (continue())
-+ | 53 => (continue())
-+ | 55 => (errorFn("bad comment syntax", !yylineno, !yylineno+1);
-+ 	    YYBEGIN INITIAL;
-+ 	    continue())
-+ | 61 => (
-+ (** At some point, we should support &#SPACE; and &#TAB; **)
-+ 	    continue())
-+ | 67 => let val yytext=yymktext() in T.CHAR_REF(yytext, !yylineno, !yylineno) end
-+ | 7 => (addStr " "; continue())
-+ | 72 => let val yytext=yymktext() in T.ENTITY_REF(yytext, !yylineno, !yylineno) end
-+ | 74 => (continue())
-+ | 76 => (continue())
-+ | 79 => let val yytext=yymktext() in T.PCDATA(yytext, !yylineno, !yylineno) end
-+ | 81 => let val yytext=yymktext() in errorFn(concat[
-+ 		"bogus character #\"", Char.toString(String.sub(yytext, 0)),
-+ 		"\" in PCDATA\n"
-+ 	      ], !yylineno, !yylineno+1);
-+ 	    continue() end
-+ | _ => raise Internal.LexerError
-+ 
-+ 		) end )
-+ 
-+ 	val {fin,trans} = Unsafe.Vector.sub(Internal.tab, s)
-+ 	val NewAcceptingLeaves = fin::AcceptingLeaves
-+ 	in if l = !yybl then
-+ 	     if trans = #trans(Vector.sub(Internal.tab,0))
-+ 	       then action(l,NewAcceptingLeaves
-+ ) else	    let val newchars= if !yydone then "" else yyinput 1024
-+ 	    in if (size newchars)=0
-+ 		  then (yydone := true;
-+ 		        if (l=i0) then UserDeclarations.eof yyarg
-+ 		                  else action(l,NewAcceptingLeaves))
-+ 		  else (if i0=l then yyb := newchars
-+ 		     else yyb := substring(!yyb,i0,l-i0)^newchars;
-+ 		     yygone := !yygone+i0;
-+ 		     yybl := size (!yyb);
-+ 		     scan (s,AcceptingLeaves,l-i0,0))
-+ 	    end
-+ 	  else let val NewChar = Char.ord(Unsafe.CharVector.sub(!yyb,l))
-+ 		val NewState = Char.ord(Unsafe.CharVector.sub(trans,NewChar))
-+ 		in if NewState=0 then action(l,NewAcceptingLeaves)
-+ 		else scan(NewState,NewAcceptingLeaves,l+1,i0)
-+ 	end
-+ 	end
-+ (*
-+ 	val start= if substring(!yyb,!yybufpos-1,1)="\n"
-+ then !yybegin+1 else !yybegin
++end
++|  ( 114, ( ( _, ( _, _, END_SCRIPT1right)) :: ( _, ( MlyValue.PCData 
++PCData, _, _)) :: ( _, ( _, START_SCRIPT1left, _)) :: rest671)) => let
++ val  result = MlyValue.Text (HTML.SCRIPT PCData)
++ in ( LrTable.NT 41, ( result, START_SCRIPT1left, END_SCRIPT1right), 
++rest671)
++end
++|  ( 115, ( ( _, ( _, _, END_TT1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_TT1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.TT(TextList))
++ in ( LrTable.NT 42, ( result, START_TT1left, END_TT1right), rest671)
++
++end
++|  ( 116, ( ( _, ( _, _, END_I1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_I1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.I(TextList))
++ in ( LrTable.NT 42, ( result, START_I1left, END_I1right), rest671)
++
++end
++|  ( 117, ( ( _, ( _, _, END_B1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_B1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.B(TextList))
++ in ( LrTable.NT 42, ( result, START_B1left, END_B1right), rest671)
++
++end
++|  ( 118, ( ( _, ( _, _, END_U1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_U1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.U(TextList))
++ in ( LrTable.NT 42, ( result, START_U1left, END_U1right), rest671)
++
++end
++|  ( 119, ( ( _, ( _, _, END_STRIKE1right)) :: ( _, ( 
++MlyValue.TextList TextList, _, _)) :: ( _, ( _, START_STRIKE1left, _))
++ :: rest671)) => let val  result = MlyValue.Font (
++HTML.STRIKE(TextList))
++ in ( LrTable.NT 42, ( result, START_STRIKE1left, END_STRIKE1right), 
++rest671)
++end
++|  ( 120, ( ( _, ( _, _, END_BIG1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_BIG1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.BIG(TextList))
++ in ( LrTable.NT 42, ( result, START_BIG1left, END_BIG1right), rest671
++)
++end
++|  ( 121, ( ( _, ( _, _, END_SMALL1right)) :: ( _, ( MlyValue.TextList
++ TextList, _, _)) :: ( _, ( _, START_SMALL1left, _)) :: rest671)) =>
++ let val  result = MlyValue.Font (HTML.SMALL(TextList))
++ in ( LrTable.NT 42, ( result, START_SMALL1left, END_SMALL1right), 
++rest671)
++end
++|  ( 122, ( ( _, ( _, _, END_SUB1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_SUB1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.SUB(TextList))
++ in ( LrTable.NT 42, ( result, START_SUB1left, END_SUB1right), rest671
++)
++end
++|  ( 123, ( ( _, ( _, _, END_SUP1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_SUP1left, _)) :: rest671)) => let
++ val  result = MlyValue.Font (HTML.SUP(TextList))
++ in ( LrTable.NT 42, ( result, START_SUP1left, END_SUP1right), rest671
++)
++end
++|  ( 124, ( ( _, ( _, _, END_EM1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_EM1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.EM(TextList))
++ in ( LrTable.NT 43, ( result, START_EM1left, END_EM1right), rest671)
++
++end
++|  ( 125, ( ( _, ( _, _, END_STRONG1right)) :: ( _, ( 
++MlyValue.TextList TextList, _, _)) :: ( _, ( _, START_STRONG1left, _))
++ :: rest671)) => let val  result = MlyValue.Phrase (
++HTML.STRONG(TextList))
++ in ( LrTable.NT 43, ( result, START_STRONG1left, END_STRONG1right), 
++rest671)
++end
++|  ( 126, ( ( _, ( _, _, END_CODE1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_CODE1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.CODE(TextList))
++ in ( LrTable.NT 43, ( result, START_CODE1left, END_CODE1right), 
++rest671)
++end
++|  ( 127, ( ( _, ( _, _, END_DFN1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_DFN1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.DFN(TextList))
++ in ( LrTable.NT 43, ( result, START_DFN1left, END_DFN1right), rest671
++)
++end
++|  ( 128, ( ( _, ( _, _, END_SAMP1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_SAMP1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.SAMP(TextList))
++ in ( LrTable.NT 43, ( result, START_SAMP1left, END_SAMP1right), 
++rest671)
++end
++|  ( 129, ( ( _, ( _, _, END_KBD1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_KBD1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.KBD(TextList))
++ in ( LrTable.NT 43, ( result, START_KBD1left, END_KBD1right), rest671
++)
++end
++|  ( 130, ( ( _, ( _, _, END_VAR1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_VAR1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.VAR(TextList))
++ in ( LrTable.NT 43, ( result, START_VAR1left, END_VAR1right), rest671
++)
++end
++|  ( 131, ( ( _, ( _, _, END_CITE1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( _, START_CITE1left, _)) :: rest671)) => let
++ val  result = MlyValue.Phrase (HTML.CITE(TextList))
++ in ( LrTable.NT 43, ( result, START_CITE1left, END_CITE1right), 
++rest671)
++end
++|  ( 132, ( ( _, ( _, _, END_A1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_A START_A, (START_Aleft as 
++START_A1left), _)) :: rest671)) => let val  result = MlyValue.Special
++ (HTMLAttrs.mkA(ctx START_Aleft, START_A, TextList))
++ in ( LrTable.NT 44, ( result, START_A1left, END_A1right), rest671)
++
++end
++|  ( 133, ( ( _, ( MlyValue.TAG_IMG TAG_IMG, (TAG_IMGleft as 
++TAG_IMG1left), TAG_IMG1right)) :: rest671)) => let val  result = 
++MlyValue.Special (HTMLAttrs.mkIMG(ctx TAG_IMGleft, TAG_IMG))
++ in ( LrTable.NT 44, ( result, TAG_IMG1left, TAG_IMG1right), rest671)
++
++end
++|  ( 134, ( ( _, ( _, _, END_APPLET1right)) :: ( _, ( 
++MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_APPLET 
++START_APPLET, (START_APPLETleft as START_APPLET1left), _)) :: rest671)
++) => let val  result = MlyValue.Special (
++HTMLAttrs.mkAPPLET(ctx START_APPLETleft, START_APPLET, TextList))
++ in ( LrTable.NT 44, ( result, START_APPLET1left, END_APPLET1right), 
++rest671)
++end
++|  ( 135, ( ( _, ( _, _, END_FONT1right)) :: ( _, ( MlyValue.TextList 
++TextList, _, _)) :: ( _, ( MlyValue.START_FONT START_FONT, (
++START_FONTleft as START_FONT1left), _)) :: rest671)) => let val  
++result = MlyValue.Special (
++HTMLAttrs.mkFONT(ctx START_FONTleft, START_FONT, TextList))
++ in ( LrTable.NT 44, ( result, START_FONT1left, END_FONT1right), 
++rest671)
++end
++|  ( 136, ( ( _, ( _, _, END_BASEFONT1right)) :: ( _, ( 
++MlyValue.TextList TextList, _, _)) :: ( _, ( MlyValue.START_BASEFONT 
++START_BASEFONT, (START_BASEFONTleft as START_BASEFONT1left), _)) :: 
++rest671)) => let val  result = MlyValue.Special (
++HTMLAttrs.mkBASEFONT(
++		  ctx START_BASEFONTleft, START_BASEFONT, TextList)
++		
++)
++ in ( LrTable.NT 44, ( result, START_BASEFONT1left, END_BASEFONT1right
++), rest671)
++end
++|  ( 137, ( ( _, ( MlyValue.TAG_BR TAG_BR, (TAG_BRleft as TAG_BR1left)
++, TAG_BR1right)) :: rest671)) => let val  result = MlyValue.Special (
++HTMLAttrs.mkBR(ctx TAG_BRleft, TAG_BR))
++ in ( LrTable.NT 44, ( result, TAG_BR1left, TAG_BR1right), rest671)
++
++end
++|  ( 138, ( ( _, ( _, _, END_MAP1right)) :: ( _, ( MlyValue.AreaList 
++AreaList, _, _)) :: ( _, ( MlyValue.START_MAP START_MAP, (
++START_MAPleft as START_MAP1left), _)) :: rest671)) => let val  result
++ = MlyValue.Special (
++HTMLAttrs.mkMAP(ctx START_MAPleft, START_MAP, AreaList))
++ in ( LrTable.NT 44, ( result, START_MAP1left, END_MAP1right), rest671
++)
++end
++|  ( 139, ( ( _, ( MlyValue.TAG_PARAM TAG_PARAM, (TAG_PARAMleft as 
++TAG_PARAM1left), TAG_PARAM1right)) :: rest671)) => let val  result = 
++MlyValue.Special (HTMLAttrs.mkPARAM(ctx TAG_PARAMleft, TAG_PARAM))
++ in ( LrTable.NT 44, ( result, TAG_PARAM1left, TAG_PARAM1right), 
++rest671)
++end
++|  ( 140, ( rest671)) => let val  result = MlyValue.AreaList ([])
++ in ( LrTable.NT 45, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 141, ( ( _, ( MlyValue.AreaList AreaList, _, AreaList1right)) :: 
++( _, ( MlyValue.TAG_AREA TAG_AREA, (TAG_AREAleft as TAG_AREA1left), _)
++) :: rest671)) => let val  result = MlyValue.AreaList (
++HTMLAttrs.mkAREA(ctx TAG_AREAleft, TAG_AREA) :: AreaList)
++ in ( LrTable.NT 45, ( result, TAG_AREA1left, AreaList1right), rest671
++)
++end
++|  ( 142, ( ( _, ( MlyValue.TAG_INPUT TAG_INPUT, (TAG_INPUTleft as 
++TAG_INPUT1left), TAG_INPUT1right)) :: rest671)) => let val  result = 
++MlyValue.Form (HTMLAttrs.mkINPUT(ctx TAG_INPUTleft, TAG_INPUT))
++ in ( LrTable.NT 46, ( result, TAG_INPUT1left, TAG_INPUT1right), 
++rest671)
++end
++|  ( 143, ( ( _, ( _, _, END_SELECT1right)) :: ( _, ( 
++MlyValue.OptionList OptionList, _, _)) :: ( _, ( MlyValue.START_SELECT
++ START_SELECT, (START_SELECTleft as START_SELECT1left), _)) :: rest671
++)) => let val  result = MlyValue.Form (
++HTMLAttrs.mkSELECT(ctx START_SELECTleft, START_SELECT, OptionList))
++ in ( LrTable.NT 46, ( result, START_SELECT1left, END_SELECT1right), 
++rest671)
++end
++|  ( 144, ( ( _, ( _, _, END_TEXTAREA1right)) :: ( _, ( 
++MlyValue.PCData PCData, _, _)) :: ( _, ( MlyValue.START_TEXTAREA 
++START_TEXTAREA, (START_TEXTAREAleft as START_TEXTAREA1left), _)) :: 
++rest671)) => let val  result = MlyValue.Form (
++HTMLAttrs.mkTEXTAREA(
++		  ctx START_TEXTAREAleft, START_TEXTAREA,
++		  PCData)
++		
++)
++ in ( LrTable.NT 46, ( result, START_TEXTAREA1left, END_TEXTAREA1right
++), rest671)
++end
++|  ( 145, ( rest671)) => let val  result = MlyValue.OptionList ([])
++ in ( LrTable.NT 47, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 146, ( ( _, ( MlyValue.OptionList OptionList, _, OptionList1right
++)) :: _ :: ( _, ( MlyValue.PCData PCData, _, _)) :: ( _, ( 
++MlyValue.START_OPTION START_OPTION, (START_OPTIONleft as 
++START_OPTION1left), _)) :: rest671)) => let val  result = 
++MlyValue.OptionList (
++HTMLAttrs.mkOPTION(ctx START_OPTIONleft, START_OPTION, PCData)
++		  :: OptionList
++		
++)
++ in ( LrTable.NT 47, ( result, START_OPTION1left, OptionList1right), 
++rest671)
++end
++|  ( 147, ( rest671)) => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 48, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 148, ( ( _, ( _, END_OPTION1left, END_OPTION1right)) :: rest671))
++ => let val  result = MlyValue.ntVOID ()
++ in ( LrTable.NT 48, ( result, END_OPTION1left, END_OPTION1right), 
++rest671)
++end
++|  ( 149, ( ( _, ( MlyValue.PCDataList PCDataList, PCDataList1left, 
++PCDataList1right)) :: rest671)) => let val  result = MlyValue.PCData (
++concat PCDataList)
++ in ( LrTable.NT 49, ( result, PCDataList1left, PCDataList1right), 
++rest671)
++end
++|  ( 150, ( rest671)) => let val  result = MlyValue.PCDataList ([])
++ in ( LrTable.NT 50, ( result, defaultPos, defaultPos), rest671)
++end
++|  ( 151, ( ( _, ( MlyValue.PCDataList PCDataList, _, PCDataList1right
++)) :: ( _, ( MlyValue.PCDataElem PCDataElem, PCDataElem1left, _)) :: 
++rest671)) => let val  result = MlyValue.PCDataList (
++PCDataElem :: PCDataList)
++ in ( LrTable.NT 50, ( result, PCDataElem1left, PCDataList1right), 
++rest671)
++end
++|  ( 152, ( ( _, ( MlyValue.PCDATA PCDATA, PCDATA1left, PCDATA1right))
++ :: rest671)) => let val  result = MlyValue.PCDataElem (PCDATA)
++ in ( LrTable.NT 51, ( result, PCDATA1left, PCDATA1right), rest671)
++
++end
++|  ( 153, ( ( _, ( MlyValue.CHAR_REF CHAR_REF, CHAR_REF1left, 
++CHAR_REF1right)) :: rest671)) => let val  result = MlyValue.PCDataElem
++ (CHAR_REF)
++ in ( LrTable.NT 51, ( result, CHAR_REF1left, CHAR_REF1right), rest671
++)
++end
++|  ( 154, ( ( _, ( MlyValue.ENTITY_REF ENTITY_REF, ENTITY_REF1left, 
++ENTITY_REF1right)) :: rest671)) => let val  result = 
++MlyValue.PCDataElem (ENTITY_REF)
++ in ( LrTable.NT 51, ( result, ENTITY_REF1left, ENTITY_REF1right), 
++rest671)
++end
++| _ => raise (mlyAction i392)
++end
++val void = MlyValue.VOID
++val extract = fn a => (fn MlyValue.Document x => x
++| _ => let exception ParseInternal
++	in raise ParseInternal end) a 
++end
++end
++structure Tokens : HTML_TOKENS =
++struct
++type svalue = ParserData.svalue
++type ('a,'b) token = ('a,'b) Token.token
++fun EOF (p1,p2) = Token.TOKEN (ParserData.LrTable.T 0,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_A (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 1,(
++ParserData.MlyValue.START_A i,p1,p2))
++fun END_A (p1,p2) = Token.TOKEN (ParserData.LrTable.T 2,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_ADDRESS (p1,p2) = Token.TOKEN (ParserData.LrTable.T 3,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_ADDRESS (p1,p2) = Token.TOKEN (ParserData.LrTable.T 4,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_APPLET (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 5,(
++ParserData.MlyValue.START_APPLET i,p1,p2))
++fun END_APPLET (p1,p2) = Token.TOKEN (ParserData.LrTable.T 6,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_AREA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 7,(
++ParserData.MlyValue.TAG_AREA i,p1,p2))
++fun START_B (p1,p2) = Token.TOKEN (ParserData.LrTable.T 8,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_B (p1,p2) = Token.TOKEN (ParserData.LrTable.T 9,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_BASE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 10,(
++ParserData.MlyValue.TAG_BASE i,p1,p2))
++fun START_BIG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 11,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_BIG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 12,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_BLOCKQUOTE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 13,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_BLOCKQUOTE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 14,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_BODY (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 15,(
++ParserData.MlyValue.START_BODY i,p1,p2))
++fun END_BODY (p1,p2) = Token.TOKEN (ParserData.LrTable.T 16,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_BR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 17,(
++ParserData.MlyValue.TAG_BR i,p1,p2))
++fun START_CAPTION (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 18,(
++ParserData.MlyValue.START_CAPTION i,p1,p2))
++fun END_CAPTION (p1,p2) = Token.TOKEN (ParserData.LrTable.T 19,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_CENTER (p1,p2) = Token.TOKEN (ParserData.LrTable.T 20,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_CENTER (p1,p2) = Token.TOKEN (ParserData.LrTable.T 21,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_CITE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 22,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_CITE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 23,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_CODE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 24,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_CODE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 25,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 26,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_DD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 27,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DFN (p1,p2) = Token.TOKEN (ParserData.LrTable.T 28,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_DFN (p1,p2) = Token.TOKEN (ParserData.LrTable.T 29,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DIR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 30,(
++ParserData.MlyValue.START_DIR i,p1,p2))
++fun END_DIR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 31,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DIV (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 32,(
++ParserData.MlyValue.START_DIV i,p1,p2))
++fun END_DIV (p1,p2) = Token.TOKEN (ParserData.LrTable.T 33,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 34,(
++ParserData.MlyValue.START_DL i,p1,p2))
++fun END_DL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 35,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_DT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 36,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_DT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 37,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_EM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 38,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_EM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 39,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_FONT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 40,(
++ParserData.MlyValue.START_FONT i,p1,p2))
++fun END_FONT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 41,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_BASEFONT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 42,(
++ParserData.MlyValue.START_BASEFONT i,p1,p2))
++fun END_BASEFONT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 43,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_FORM (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 44,(
++ParserData.MlyValue.START_FORM i,p1,p2))
++fun END_FORM (p1,p2) = Token.TOKEN (ParserData.LrTable.T 45,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H1 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 46,(
++ParserData.MlyValue.START_H1 i,p1,p2))
++fun END_H1 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 47,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H2 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 48,(
++ParserData.MlyValue.START_H2 i,p1,p2))
++fun END_H2 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 49,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H3 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 50,(
++ParserData.MlyValue.START_H3 i,p1,p2))
++fun END_H3 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 51,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H4 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 52,(
++ParserData.MlyValue.START_H4 i,p1,p2))
++fun END_H4 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 53,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H5 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 54,(
++ParserData.MlyValue.START_H5 i,p1,p2))
++fun END_H5 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 55,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_H6 (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 56,(
++ParserData.MlyValue.START_H6 i,p1,p2))
++fun END_H6 (p1,p2) = Token.TOKEN (ParserData.LrTable.T 57,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_HEAD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 58,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_HEAD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 59,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_HR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 60,(
++ParserData.MlyValue.TAG_HR i,p1,p2))
++fun START_HTML (p1,p2) = Token.TOKEN (ParserData.LrTable.T 61,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_HTML (p1,p2) = Token.TOKEN (ParserData.LrTable.T 62,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_I (p1,p2) = Token.TOKEN (ParserData.LrTable.T 63,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_I (p1,p2) = Token.TOKEN (ParserData.LrTable.T 64,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_IMG (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 65,(
++ParserData.MlyValue.TAG_IMG i,p1,p2))
++fun TAG_INPUT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 66,(
++ParserData.MlyValue.TAG_INPUT i,p1,p2))
++fun TAG_ISINDEX (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 67,(
++ParserData.MlyValue.TAG_ISINDEX i,p1,p2))
++fun START_KBD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 68,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_KBD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 69,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_LI (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 70,(
++ParserData.MlyValue.START_LI i,p1,p2))
++fun END_LI (p1,p2) = Token.TOKEN (ParserData.LrTable.T 71,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_LINK (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 72,(
++ParserData.MlyValue.TAG_LINK i,p1,p2))
++fun START_MAP (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 73,(
++ParserData.MlyValue.START_MAP i,p1,p2))
++fun END_MAP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 74,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_MENU (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 75,(
++ParserData.MlyValue.START_MENU i,p1,p2))
++fun END_MENU (p1,p2) = Token.TOKEN (ParserData.LrTable.T 76,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_META (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 77,(
++ParserData.MlyValue.TAG_META i,p1,p2))
++fun START_OL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 78,(
++ParserData.MlyValue.START_OL i,p1,p2))
++fun END_OL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 79,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_OPTION (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 80,(
++ParserData.MlyValue.START_OPTION i,p1,p2))
++fun END_OPTION (p1,p2) = Token.TOKEN (ParserData.LrTable.T 81,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_P (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 82,(
++ParserData.MlyValue.START_P i,p1,p2))
++fun END_P (p1,p2) = Token.TOKEN (ParserData.LrTable.T 83,(
++ParserData.MlyValue.VOID,p1,p2))
++fun TAG_PARAM (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 84,(
++ParserData.MlyValue.TAG_PARAM i,p1,p2))
++fun START_PRE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 85,(
++ParserData.MlyValue.START_PRE i,p1,p2))
++fun END_PRE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 86,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SAMP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 87,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_SAMP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 88,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SCRIPT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 89,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_SCRIPT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 90,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SELECT (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 91,(
++ParserData.MlyValue.START_SELECT i,p1,p2))
++fun END_SELECT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 92,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SMALL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 93,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_SMALL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 94,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_STRIKE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 95,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_STRIKE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 96,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_STRONG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 97,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_STRONG (p1,p2) = Token.TOKEN (ParserData.LrTable.T 98,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_STYLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 99,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_STYLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 100,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SUB (p1,p2) = Token.TOKEN (ParserData.LrTable.T 101,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_SUB (p1,p2) = Token.TOKEN (ParserData.LrTable.T 102,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_SUP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 103,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_SUP (p1,p2) = Token.TOKEN (ParserData.LrTable.T 104,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TABLE (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 105,(
++ParserData.MlyValue.START_TABLE i,p1,p2))
++fun END_TABLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 106,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TD (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 107,(
++ParserData.MlyValue.START_TD i,p1,p2))
++fun END_TD (p1,p2) = Token.TOKEN (ParserData.LrTable.T 108,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TEXTAREA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 109,(
++ParserData.MlyValue.START_TEXTAREA i,p1,p2))
++fun END_TEXTAREA (p1,p2) = Token.TOKEN (ParserData.LrTable.T 110,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TH (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 111,(
++ParserData.MlyValue.START_TH i,p1,p2))
++fun END_TH (p1,p2) = Token.TOKEN (ParserData.LrTable.T 112,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TITLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 113,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_TITLE (p1,p2) = Token.TOKEN (ParserData.LrTable.T 114,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TR (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 115,(
++ParserData.MlyValue.START_TR i,p1,p2))
++fun END_TR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 116,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_TT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 117,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_TT (p1,p2) = Token.TOKEN (ParserData.LrTable.T 118,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_U (p1,p2) = Token.TOKEN (ParserData.LrTable.T 119,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_U (p1,p2) = Token.TOKEN (ParserData.LrTable.T 120,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_UL (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 121,(
++ParserData.MlyValue.START_UL i,p1,p2))
++fun END_UL (p1,p2) = Token.TOKEN (ParserData.LrTable.T 122,(
++ParserData.MlyValue.VOID,p1,p2))
++fun START_VAR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 123,(
++ParserData.MlyValue.VOID,p1,p2))
++fun END_VAR (p1,p2) = Token.TOKEN (ParserData.LrTable.T 124,(
++ParserData.MlyValue.VOID,p1,p2))
++fun PCDATA (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 125,(
++ParserData.MlyValue.PCDATA i,p1,p2))
++fun CHAR_REF (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 126,(
++ParserData.MlyValue.CHAR_REF i,p1,p2))
++fun ENTITY_REF (i,p1,p2) = Token.TOKEN (ParserData.LrTable.T 127,(
++ParserData.MlyValue.ENTITY_REF i,p1,p2))
++end
++end
+diff --git a/HTML/html-lex.sml b/HTML/html-lex.sml
+new file mode 100644
+index 0000000..e5a78a0
+--- /dev/null
++++ b/HTML/html-lex.sml
+@@ -0,0 +1,670 @@
++functor HTMLLexFn (
++  structure Tokens : HTML_TOKENS
++  structure Err : HTML_ERROR
++  structure HTMLAttrs : HTML_ATTRS)=
++   struct
++    structure UserDeclarations =
++      struct
++(* html-lex
++ *
++ * COPYRIGHT (c) 1995 AT&T Bell Laboratories.
++ * COPYRIGHT (c) 1996 AT&T Research.
++ *
++ * A scanner for HTML.
++ *
++ * TODO:
++ *    Recognize the DOCTYPE element
++ *	<!DOCTYPE HTML PUBLIC "...">
++ *    Clean-up the scanning of start tags (do we need Err?).
++ *    Whitespace in PRE elements should be preserved, but how?
 + *)
-+ 	in scan(!yybegin (* start *),nil,!yybufpos,!yybufpos)
-+     end
-+ in continue end
-+   in lex
-+   end
-+ end
-diff -N -C 2 -r smlnj-lib/HTML/html-lib.mlb smlnj-lib-mlton/HTML/html-lib.mlb
-*** smlnj-lib/HTML/html-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HTML/html-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 0 ****
---- 1,298 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l5 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l46 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l35 = 
-+     bas
-+       (* $/ml-yacc-lib.cm ====> *) $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l5
-+    in
-+       structure gs_0 = General
++
++structure T = Tokens
++structure Elems = HTMLElementsFn (
++  structure Tokens = Tokens
++  structure Err = Err
++  structure HTMLAttrs = HTMLAttrs)
++
++type pos = int
++type svalue = T.svalue
++type arg = (((string * int * int) -> unit) * string option)
++type ('a, 'b) token = ('a, 'b) T.token
++type lexresult= (svalue, pos) token
++
++fun eof _ = Tokens.EOF(0, 0)
++
++(* a buffer for collecting a string piecewise *)
++val buffer = ref ([] : string list)
++fun addStr s = (buffer := s :: !buffer)
++fun getStr () = (String.concat(List.rev(! buffer)) before (buffer := []))
++
++end (* end of user routines *)
++exception LexError (* raised if illegal leaf action tried *)
++structure Internal =
++	struct
++
++datatype yyfinstate = N of int
++type statedata = {fin : yyfinstate list, trans: string}
++(* transition & final state table *)
++val tab = let
++val s = [ 
++ (0, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (1, 
++"\009\009\009\009\009\009\009\009\009\028\029\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\028\009\009\009\009\009\020\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\011\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\
++\\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009\009"
++),
++ (3, 
++"\030\030\030\030\030\030\030\030\030\030\033\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\031\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\
++\\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030\030"
++),
++ (5, 
++"\034\034\034\034\034\034\034\034\034\038\039\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\038\034\034\034\034\034\034\034\034\034\034\034\034\036\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\035\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\
++\\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034\034"
++),
++ (7, 
++"\040\040\040\040\040\040\040\040\040\051\053\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\051\040\048\040\040\040\040\045\040\040\040\040\040\041\041\040\
++\\041\041\041\041\041\041\041\041\041\041\040\040\040\044\043\040\
++\\040\041\041\041\041\041\041\041\041\041\041\041\041\041\041\041\
++\\041\041\041\041\041\041\041\041\041\041\041\040\040\040\040\040\
++\\040\041\041\041\041\041\041\041\041\041\041\041\041\041\041\041\
++\\041\041\041\041\041\041\041\041\041\041\041\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\
++\\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040\040"
++),
++ (9, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\000\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (11, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\017\000\000\000\000\000\000\000\000\000\000\000\000\000\013\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
++\\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
++\\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
++\\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (12, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\012\012\000\
++\\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\000\
++\\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
++\\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
++\\000\012\012\012\012\012\012\012\012\012\012\012\012\012\012\012\
++\\012\012\012\012\012\012\012\012\012\012\012\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (13, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
++\\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
++\\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
++\\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (14, 
++"\000\000\000\000\000\000\000\000\000\016\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\016\000\000\000\000\000\000\000\000\000\000\000\000\014\014\000\
++\\014\014\014\014\014\014\014\014\014\014\000\000\000\000\015\000\
++\\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
++\\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
++\\000\014\014\014\014\014\014\014\014\014\014\014\014\014\014\014\
++\\014\014\014\014\014\014\014\014\014\014\014\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (16, 
++"\000\000\000\000\000\000\000\000\000\016\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\016\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\015\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (17, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\018\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (18, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\019\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (20, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\023\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\000\010\010\010\
++\\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
++\\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
++\\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
++\\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (21, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\021\021\010\
++\\021\021\021\021\021\021\021\021\021\021\010\022\000\010\010\010\
++\\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
++\\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
++\\010\021\021\021\021\021\021\021\021\021\021\021\021\021\021\021\
++\\021\021\021\021\021\021\021\021\021\021\021\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (23, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\026\026\026\026\026\026\026\026\026\026\010\010\000\010\010\010\
++\\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
++\\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
++\\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
++\\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (24, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\025\000\010\010\010\
++\\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
++\\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
++\\010\024\024\024\024\024\024\024\024\024\024\024\024\024\024\024\
++\\024\024\024\024\024\024\024\024\024\024\024\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (26, 
++"\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\026\026\026\026\026\026\026\026\026\026\010\027\000\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\
++\\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010\010"
++),
++ (31, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\032\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (36, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\037\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (41, 
++"\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\042\042\000\
++\\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\000\
++\\000\042\042\042\042\042\042\042\042\042\042\042\042\042\042\042\
++\\042\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\
++\\000\042\042\042\042\042\042\042\042\042\042\042\042\042\042\042\
++\\042\042\042\042\042\042\042\042\042\042\042\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++ (45, 
++"\046\046\046\046\046\046\046\046\046\046\000\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\047\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\
++\\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046\046"
++),
++ (48, 
++"\049\049\049\049\049\049\049\049\049\049\000\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\050\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\
++\\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049\049"
++),
++ (51, 
++"\000\000\000\000\000\000\000\000\000\052\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\052\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\
++\\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
++),
++(0, "")]
++fun f x = x 
++val s = map f (rev (tl (rev s))) 
++exception LexHackingError 
++fun look ((j,x)::r, i: int) = if i = j then x else look(r, i) 
++  | look ([], i) = raise LexHackingError
++fun g {fin=x, trans=i} = {fin=x, trans=look(s,i)} 
++in Vector.fromList(map g 
++[{fin = [], trans = 0},
++{fin = [], trans = 1},
++{fin = [], trans = 1},
++{fin = [], trans = 3},
++{fin = [], trans = 3},
++{fin = [], trans = 5},
++{fin = [], trans = 5},
++{fin = [], trans = 7},
++{fin = [], trans = 7},
++{fin = [(N 79),(N 81)], trans = 9},
++{fin = [(N 79)], trans = 9},
++{fin = [(N 81)], trans = 11},
++{fin = [(N 3)], trans = 12},
++{fin = [], trans = 13},
++{fin = [], trans = 14},
++{fin = [(N 32)], trans = 0},
++{fin = [], trans = 16},
++{fin = [], trans = 17},
++{fin = [], trans = 18},
++{fin = [(N 37)], trans = 0},
++{fin = [(N 79),(N 81)], trans = 20},
++{fin = [(N 79)], trans = 21},
++{fin = [(N 72),(N 79)], trans = 9},
++{fin = [(N 79)], trans = 23},
++{fin = [(N 79)], trans = 24},
++{fin = [(N 61),(N 79)], trans = 9},
++{fin = [(N 79)], trans = 26},
++{fin = [(N 67),(N 79)], trans = 9},
++{fin = [(N 76),(N 79),(N 81)], trans = 9},
++{fin = [(N 74),(N 79)], trans = 9},
++{fin = [(N 44)], trans = 0},
++{fin = [(N 44)], trans = 31},
++{fin = [(N 40)], trans = 0},
++{fin = [(N 42)], trans = 0},
++{fin = [(N 55)], trans = 0},
++{fin = [(N 49),(N 55)], trans = 0},
++{fin = [(N 55)], trans = 36},
++{fin = [(N 47)], trans = 0},
++{fin = [(N 53),(N 55)], trans = 0},
++{fin = [(N 51)], trans = 0},
++{fin = [(N 25)], trans = 0},
++{fin = [(N 13),(N 25)], trans = 41},
++{fin = [(N 13)], trans = 41},
++{fin = [(N 5),(N 25)], trans = 0},
++{fin = [(N 15),(N 25)], trans = 0},
++{fin = [(N 25)], trans = 45},
++{fin = [], trans = 45},
++{fin = [(N 23)], trans = 0},
++{fin = [(N 25)], trans = 48},
++{fin = [], trans = 48},
++{fin = [(N 19)], trans = 0},
++{fin = [(N 10),(N 25)], trans = 51},
++{fin = [(N 10)], trans = 51},
++{fin = [(N 7)], trans = 0}])
++end
++structure StartStates =
++	struct
++	datatype yystartstate = STARTSTATE of int
++
++(* start state definitions *)
++
++val COM1 = STARTSTATE 3;
++val COM2 = STARTSTATE 5;
++val INITIAL = STARTSTATE 1;
++val STAG = STARTSTATE 7;
++
++end
++type result = UserDeclarations.lexresult
++	exception LexerError (* raised if illegal leaf action tried *)
++end
++
++fun makeLexer yyinput =
++let	val yygone0=1
++	val yylineno = ref 0
++
++	val yyb = ref "\n" 		(* buffer *)
++	val yybl = ref 1		(*buffer length *)
++	val yybufpos = ref 1		(* location of next character to use *)
++	val yygone = ref yygone0	(* position in file of beginning of buffer *)
++	val yydone = ref false		(* eof found yet? *)
++	val yybegin = ref 1		(*Current 'start state' for lexer *)
++
++	val YYBEGIN = fn (Internal.StartStates.STARTSTATE x) =>
++		 yybegin := x
++
++fun lex (yyarg as (errorFn, file)) =
++let fun continue() : Internal.result = 
++  let fun scan (s,AcceptingLeaves : Internal.yyfinstate list list,l,i0) =
++	let fun action (i,nil) = raise LexError
++	| action (i,nil::l) = action (i-1,l)
++	| action (i,(node::acts)::l) =
++		case node of
++		    Internal.N yyk => 
++			(let fun yymktext() = substring(!yyb,i0,i-i0)
++			     val yypos = i0+ !yygone
++			val _ = yylineno := CharVectorSlice.foldli
++				(fn (_,#"\n", n) => n+1 | (_,_, n) => n) (!yylineno) (CharVectorSlice.slice (!yyb,i0,SOME(i-i0)))
++			open UserDeclarations Internal.StartStates
++ in (yybufpos := i; case yyk of 
++
++			(* Application actions *)
++
++  10 => let val yytext=yymktext() in addStr yytext; continue() end
++| 13 => let val yytext=yymktext() in addStr yytext; continue() end
++| 15 => let val yytext=yymktext() in addStr yytext; continue() end
++| 19 => let val yytext=yymktext() in addStr yytext; continue() end
++| 23 => let val yytext=yymktext() in addStr yytext; continue() end
++| 25 => let val yytext=yymktext() in addStr yytext; continue() end
++| 3 => let val yytext=yymktext() in addStr yytext; YYBEGIN STAG; continue() end
++| 32 => let val yytext=yymktext() in case Elems.endTag file (yytext, !yylineno, !yylineno)
++	     of NONE => continue()
++	      | (SOME tag) => tag
++	    (* end case *) end
++| 37 => (YYBEGIN COM1; continue())
++| 40 => (YYBEGIN COM2; continue())
++| 42 => (continue())
++| 44 => (continue())
++| 47 => (YYBEGIN COM1; continue())
++| 49 => (YYBEGIN INITIAL; continue())
++| 5 => let val yytext=yymktext() in addStr yytext;
++	    YYBEGIN INITIAL;
++	    case Elems.startTag file (getStr(), !yylineno, !yylineno)
++	     of NONE => continue()
++	      | (SOME tag) => tag
++	    (* end case *) end
++| 51 => (continue())
++| 53 => (continue())
++| 55 => (errorFn("bad comment syntax", !yylineno, !yylineno+1);
++	    YYBEGIN INITIAL;
++	    continue())
++| 61 => (
++(** At some point, we should support &#SPACE; and &#TAB; **)
++	    continue())
++| 67 => let val yytext=yymktext() in T.CHAR_REF(yytext, !yylineno, !yylineno) end
++| 7 => (addStr " "; continue())
++| 72 => let val yytext=yymktext() in T.ENTITY_REF(yytext, !yylineno, !yylineno) end
++| 74 => (continue())
++| 76 => (continue())
++| 79 => let val yytext=yymktext() in T.PCDATA(yytext, !yylineno, !yylineno) end
++| 81 => let val yytext=yymktext() in errorFn(concat[
++		"bogus character #\"", Char.toString(String.sub(yytext, 0)),
++		"\" in PCDATA\n"
++	      ], !yylineno, !yylineno+1);
++	    continue() end
++| _ => raise Internal.LexerError
++
++		) end )
++
++	val {fin,trans} = Unsafe.Vector.sub(Internal.tab, s)
++	val NewAcceptingLeaves = fin::AcceptingLeaves
++	in if l = !yybl then
++	     if trans = #trans(Vector.sub(Internal.tab,0))
++	       then action(l,NewAcceptingLeaves
++) else	    let val newchars= if !yydone then "" else yyinput 1024
++	    in if (size newchars)=0
++		  then (yydone := true;
++		        if (l=i0) then UserDeclarations.eof yyarg
++		                  else action(l,NewAcceptingLeaves))
++		  else (if i0=l then yyb := newchars
++		     else yyb := substring(!yyb,i0,l-i0)^newchars;
++		     yygone := !yygone+i0;
++		     yybl := size (!yyb);
++		     scan (s,AcceptingLeaves,l-i0,0))
++	    end
++	  else let val NewChar = Char.ord(Unsafe.CharVector.sub(!yyb,l))
++		val NewState = Char.ord(Unsafe.CharVector.sub(trans,NewChar))
++		in if NewState=0 then action(l,NewAcceptingLeaves)
++		else scan(NewState,NewAcceptingLeaves,l+1,i0)
++	end
++	end
++(*
++	val start= if substring(!yyb,!yybufpos-1,1)="\n"
++then !yybegin+1 else !yybegin
++*)
++	in scan(!yybegin (* start *),nil,!yybufpos,!yybufpos)
 +    end
-+    local
-+       open l5
-+    in
-+       structure gs_1 = String
++in continue end
++  in lex
++  end
++end
+diff --git a/HTML/html-lib.mlb b/HTML/html-lib.mlb
+new file mode 100644
+index 0000000..38d179f
+--- /dev/null
++++ b/HTML/html-lib.mlb
+@@ -0,0 +1,298 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l5 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l5
-+    in
-+       structure gs_2 = List
++  basis l46 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l5
-+    in
-+       structure gs_3 = Char
++  basis l35 =
++    bas
++      (* $/ml-yacc-lib.cm ====> *) $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
 +    end
-+    local
-+       html-sig.sml
-+    in
-+       signature gs_4 = HTML
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l5
++   in
++      structure gs_0 = General
++   end
++   local
++      open l5
++   in
++      structure gs_1 = String
++   end
++   local
++      open l5
++   in
++      structure gs_2 = List
++   end
++   local
++      open l5
++   in
++      structure gs_3 = Char
++   end
++   local
++      html-sig.sml
++   in
++      signature gs_4 = HTML
++   end
++   local
++      structure Char = gs_3
++      structure General = gs_0
++      signature HTML = gs_4
++      structure List = gs_2
++      structure String = gs_1
++      html.sml
++   in
++      structure gs_5 = HTML
++   end
++   local
++      structure HTML = gs_5
++      make-html.sml
++   in
++      structure gs_6 = MakeHTML
++   end
++   local
++      structure HTML = gs_5
++      html-defaults.sml
++   in
++      structure gs_7 = HTMLDefaults
++   end
++   local
++      html-error-sig.sml
++   in
++      signature gs_8 = HTML_ERROR
++   end
++   local
++      open l35
++   in
++      functor gs_9 = Join
++      functor gs_10 = JoinWithArg
++   end
++   local
++      open l35
++   in
++      structure gs_11 = LrParser
++   end
++   local
++      open l5
++   in
++      structure gs_12 = TextIO
++   end
++   local
++      open l46
++   in
++      structure gs_13 = Format
++   end
++   local
++      structure Format = gs_13
++      structure HTML = gs_5
++      signature HTML_ERROR = gs_8
++      structure List = gs_2
++      check-html-fn.sml
++   in
++      functor gs_14 = CheckHTMLFn
++   end
++   local
++      open l5
++   in
++      structure gs_15 = Unsafe
++   end
++   local
++      open l5
++   in
++      structure gs_16 = CharVectorSlice
++   end
++   local
++      open l5
++   in
++      structure gs_17 = Vector
++   end
++   local
++      open l5
++   in
++      structure gs_18 = Substring
++   end
++   local
++      open l46
++   in
++      functor gs_19 = HashTableFn
++   end
++   local
++      open l46
++   in
++      structure gs_20 = HashString
++   end
++   local
++      html-attr-vals.sml
++   in
++      structure gs_21 = HTMLAttrVals
++   end
++   local
++      structure HTML = gs_5
++      structure HTMLAttrVals = gs_21
++      html-attrs-sig.sml
++   in
++      signature gs_22 = HTML_ATTRS
++   end
++   local
++      open l35
++   in
++      signature gs_23 = ARG_LEXER
++      signature gs_24 = ARG_PARSER
++      signature gs_25 = LEXER
++      signature gs_26 = LR_PARSER
++      signature gs_27 = LR_TABLE
++      signature gs_28 = PARSER
++      signature gs_29 = PARSER_DATA
++      signature gs_30 = STREAM
++      signature gs_31 = TOKEN
++   end
++   local
++      signature ARG_LEXER = gs_23
++      signature ARG_PARSER = gs_24
++      structure HTMLAttrVals = gs_21
++      signature LEXER = gs_25
++      signature LR_PARSER = gs_26
++      signature LR_TABLE = gs_27
++      signature PARSER = gs_28
++      signature PARSER_DATA = gs_29
++      signature STREAM = gs_30
++      signature TOKEN = gs_31
++      html-gram.sig
++   in
++      signature gs_32 = HTML_LRVALS
++      signature gs_33 = HTML_TOKENS
++   end
++   local
++      structure Char = gs_3
++      signature HTML_ATTRS = gs_22
++      signature HTML_ERROR = gs_8
++      signature HTML_LRVALS = gs_32
++      signature HTML_TOKENS = gs_33
++      structure HashString = gs_20
++      functor HashTableFn = gs_19
++      structure List = gs_2
++      structure String = gs_1
++      structure Substring = gs_18
++      html-elements-fn.sml
++   in
++      functor gs_34 = HTMLElementsFn
++   end
++   local
++      structure Char = gs_3
++      structure CharVectorSlice = gs_16
++      functor HTMLElementsFn = gs_34
++      signature HTML_ATTRS = gs_22
++      signature HTML_ERROR = gs_8
++      signature HTML_LRVALS = gs_32
++      signature HTML_TOKENS = gs_33
++      structure List = gs_2
++      structure String = gs_1
++      structure Unsafe = gs_15
++      structure Vector = gs_17
++      html-lex.sml
++   in
++      functor gs_35 = HTMLLexFn
++   end
++   local
++      open l5
++   in
++      structure gs_36 = Array
++   end
++   local
++      signature ARG_LEXER = gs_23
++      signature ARG_PARSER = gs_24
++      structure Array = gs_36
++      structure Char = gs_3
++      structure HTML = gs_5
++      structure HTMLAttrVals = gs_21
++      signature HTML_ATTRS = gs_22
++      signature HTML_LRVALS = gs_32
++      signature HTML_TOKENS = gs_33
++      signature LEXER = gs_25
++      signature LR_PARSER = gs_26
++      signature LR_TABLE = gs_27
++      structure List = gs_2
++      signature PARSER = gs_28
++      signature PARSER_DATA = gs_29
++      signature STREAM = gs_30
++      structure String = gs_1
++      signature TOKEN = gs_31
++      html-gram.sml
++   in
++      functor gs_37 = HTMLLrValsFn
++   end
++   local
++      open l5
++   in
++      structure gs_38 = Int
++   end
++   local
++      structure Array = gs_36
++      structure Char = gs_3
++      structure HTML = gs_5
++      structure HTMLAttrVals = gs_21
++      signature HTML_ATTRS = gs_22
++      signature HTML_ERROR = gs_8
++      structure HashString = gs_20
++      functor HashTableFn = gs_19
++      structure Int = gs_38
++      structure List = gs_2
++      structure String = gs_1
++      html-attrs-fn.sml
++   in
++      functor gs_39 = HTMLAttrsFn
++   end
++   local
++      functor CheckHTMLFn = gs_14
++      structure HTML = gs_5
++      functor HTMLAttrsFn = gs_39
++      functor HTMLLexFn = gs_35
++      functor HTMLLrValsFn = gs_37
++      signature HTML_ERROR = gs_8
++      functor Join = gs_9
++      functor JoinWithArg = gs_10
++      structure LrParser = gs_11
++      structure TextIO = gs_12
++      html-parser-fn.sml
++   in
++      functor gs_40 = HTMLParserFn
++   end
++   local
++      open l46
++   in
++      structure gs_41 = ListFormat
++   end
++   local
++      structure Format = gs_13
++      structure HTML = gs_5
++      structure Int = gs_38
++      structure List = gs_2
++      structure ListFormat = gs_41
++      pr-html.sml
++   in
++      structure gs_42 = PrHTML
++   end
++in
++   signature HTML = gs_4
++   structure HTML = gs_5
++   structure HTMLDefaults = gs_7
++   functor HTMLParserFn = gs_40
++   signature HTML_ERROR = gs_8
++   structure MakeHTML = gs_6
++   structure PrHTML = gs_42
++end
++end
++
++end
+diff --git a/HTML4/html4-lib.cm b/HTML4/html4-lib.cm
+index 68cdc5a..bac8d74 100644
+--- a/HTML4/html4-lib.cm
++++ b/HTML4/html4-lib.cm
+@@ -15,11 +15,10 @@ Library
+ is
+     $/basis.cm
+     $/smlnj-lib.cm
++    $/pp-lib.cm
+     $/ml-lpt-lib.cm
+ 
+-    (* XXX IMO, the following should not be required to be able to
+-    "see" the PrettyPrint structure. *)
+-    $smlnj/compiler/current.cm
++    pp-init.sml
+ 
+     html4.g : ml-antlr
+     html4.l : ml-ulex
+diff --git a/HTML4/html4-lib.mlb b/HTML4/html4-lib.mlb
+new file mode 100644
+index 0000000..bdc15cd
+--- /dev/null
++++ b/HTML4/html4-lib.mlb
+@@ -0,0 +1,282 @@
++
++ann
++  "nonexhaustiveMatch ignore" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       structure Char = gs_3
-+       structure General = gs_0
-+       signature HTML = gs_4
-+       structure List = gs_2
-+       structure String = gs_1
-+       html.sml
-+    in
-+       structure gs_5 = HTML
++  basis l8 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       structure HTML = gs_5
-+       make-html.sml
-+    in
-+       structure gs_6 = MakeHTML
++  basis l23 =
++    bas
++      (* $/pp-lib.cm ====> *) $(SML_LIB)/smlnj-lib/PP/pp-lib.mlb
 +    end
-+    local
-+       structure HTML = gs_5
-+       html-defaults.sml
-+    in
-+       structure gs_7 = HTMLDefaults
++  basis l64 =
++    bas
++      (* $/ml-lpt-lib.cm ====> *) $(SML_LIB)/mllpt-lib/mllpt-lib.mlb
 +    end
-+    local
-+       html-error-sig.sml
-+    in
-+       signature gs_8 = HTML_ERROR
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = String
++   end
++   local
++      open l8
++   in
++      structure gs_1 = Atom
++   end
++   local
++      structure Atom = gs_1
++      structure String = gs_0
++      html4-utils.sml
++   in
++      structure gs_2 = HTML4Utils
++   end
++   local
++      open l4
++   in
++      structure gs_3 = IntInf
++   end
++   local
++      open l4
++   in
++      structure gs_4 = List
++   end
++   local
++      open l23
++   in
++      functor gs_5 = PPStreamFn
++   end
++   local
++      open l23
++   in
++      structure gs_6 = StringToken
++   end
++   local
++      open l23
++   in
++      signature gs_7 = PP_STREAM
++   end
++   local
++      open l4
++   in
++      structure gs_8 = StringCvt
++   end
++   local
++      structure List = gs_4
++      functor PPStreamFn = gs_5
++      signature PP_STREAM = gs_7
++      structure String = gs_0
++      structure StringCvt = gs_8
++      structure StringToken = gs_6
++      pp-init.sml
++   in
++      signature gs_9 = PRETTYPRINT
++      structure gs_10 = PrettyPrint
++   end
++   local
++      structure Atom = gs_1
++      structure IntInf = gs_3
++      html4.sig
++   in
++      signature gs_11 = HTML4
++   end
++   local
++      structure Atom = gs_1
++      signature HTML4 = gs_11
++      structure IntInf = gs_3
++      html4.sml
++   in
++      structure gs_12 = HTML4
++   end
++   local
++      structure Atom = gs_1
++      structure HTML4 = gs_12
++      structure HTML4Utils = gs_2
++      structure IntInf = gs_3
++      signature PRETTYPRINT = gs_9
++      structure PrettyPrint = gs_10
++      structure String = gs_0
++      html4-printer.sml
++   in
++      structure gs_13 = HTML4Printer
++   end
++   local
++      open l8
++   in
++      signature gs_14 = ORD_MAP
++   end
++   local
++      open l8
++   in
++      functor gs_15 = RedBlackMapFn
++   end
++   local
++      open l4
++   in
++      structure gs_16 = Substring
++   end
++   local
++      open l4
++   in
++      structure gs_17 = Char
++   end
++   local
++      open l64
++   in
++      structure gs_18 = AntlrStreamPos
++   end
++   local
++      open l4
++   in
++      structure gs_19 = TextIO
++   end
++   local
++      open l64
++   in
++      functor gs_20 = AntlrEBNF
++   end
++   local
++      open l64
++   in
++      functor gs_21 = AntlrErrHandler
++   end
++   local
++      open l64
++   in
++      signature gs_22 = ANTLR_LEXER
++   end
++   local
++      signature ANTLR_LEXER = gs_22
++      functor AntlrEBNF = gs_20
++      functor AntlrErrHandler = gs_21
++      structure Atom = gs_1
++      structure HTML4Utils = gs_2
++      structure IntInf = gs_3
++      structure String = gs_0
++      html4.g.sml
++   in
++      functor gs_23 = HTML4ParseFn
++      structure gs_24 = HTML4Tokens
++   end
++   local
++      signature ANTLR_LEXER = gs_22
++      functor AntlrEBNF = gs_20
++      functor AntlrErrHandler = gs_21
++      structure Atom = gs_1
++      structure String = gs_0
++      html4-attr.g.sml
++   in
++      functor gs_25 = HTML4AttrParseFn
++      structure gs_26 = HTML4AttrTokens
++   end
++   local
++      open l4
++   in
++      structure gs_27 = Vector
++   end
++   local
++      open l64
++   in
++      structure gs_28 = ULexBuffer
++   end
++   local
++      open l8
++   in
++      structure gs_29 = UTF8
++   end
++   local
++      structure AntlrStreamPos = gs_18
++      structure Atom = gs_1
++      functor HTML4AttrParseFn = gs_25
++      structure HTML4AttrTokens = gs_26
++      structure String = gs_0
++      structure Substring = gs_16
++      structure TextIO = gs_19
++      structure ULexBuffer = gs_28
++      structure UTF8 = gs_29
++      structure Vector = gs_27
++      html4-attr.l.sml
++   in
++      structure gs_30 = HTML4AttrLexer
++   end
++   local
++      structure AntlrStreamPos = gs_18
++      structure Atom = gs_1
++      structure Char = gs_17
++      structure HTML4AttrLexer = gs_30
++      functor HTML4AttrParseFn = gs_25
++      structure HTML4AttrTokens = gs_26
++      functor HTML4ParseFn = gs_23
++      structure HTML4Tokens = gs_24
++      structure HTML4Utils = gs_2
++      structure IntInf = gs_3
++      signature ORD_MAP = gs_14
++      functor RedBlackMapFn = gs_15
++      structure String = gs_0
++      structure Substring = gs_16
++      structure TextIO = gs_19
++      html4-token-utils.sml
++   in
++      structure gs_31 = HTML4TokenUtils
++   end
++   local
++      open l4
++   in
++      structure gs_32 = Option
++   end
++   local
++      structure AntlrStreamPos = gs_18
++      structure Atom = gs_1
++      structure HTML4TokenUtils = gs_31
++      structure IntInf = gs_3
++      structure List = gs_4
++      structure String = gs_0
++      structure Substring = gs_16
++      structure TextIO = gs_19
++      structure ULexBuffer = gs_28
++      structure UTF8 = gs_29
++      structure Vector = gs_27
++      html4.l.sml
++   in
++      structure gs_33 = HTML4Lexer
++   end
++   local
++      structure AntlrStreamPos = gs_18
++      structure Atom = gs_1
++      structure Char = gs_17
++      structure HTML4 = gs_12
++      structure HTML4Lexer = gs_33
++      functor HTML4ParseFn = gs_23
++      structure HTML4TokenUtils = gs_31
++      structure HTML4Tokens = gs_24
++      structure HTML4Utils = gs_2
++      structure Option = gs_32
++      structure String = gs_0
++      structure TextIO = gs_19
++      html4-parser.sml
++   in
++      structure gs_34 = HTML4Parser
++   end
++in
++   signature HTML4 = gs_11
++   structure HTML4 = gs_12
++   structure HTML4Parser = gs_34
++   structure HTML4Printer = gs_13
++   structure HTML4TokenUtils = gs_31
++   structure HTML4Tokens = gs_24
++   structure HTML4Utils = gs_2
++end
++end
++
++end
+diff --git a/HTML4/pp-init.sml b/HTML4/pp-init.sml
+new file mode 100644
+index 0000000..ca97b62
+--- /dev/null
++++ b/HTML4/pp-init.sml
+@@ -0,0 +1,67 @@
++ (* pp-init.sml
++ *
++ * COPYRIGHT (c) 2003 The SML/NJ Fellowship
++ *
++ * An implementation of SML/NJ's PP interface.
++ *   - This is an (almost) literal copy of the original code in
++ *     smlnj-lib/PP/examples/old-pp.sml
++ *)
++
++
++signature PRETTYPRINT =
++sig
++  include PP_STREAM
++  val with_pp : device -> (stream -> unit) -> unit
++  val pp_to_string : int -> (stream -> 'a -> unit) -> 'a -> string
++end
++
++structure PrettyPrint : PRETTYPRINT =
++struct
++
++  type ppconsumer = {
++      consumer : string -> unit,
++      linewidth : int,
++      flush : unit -> unit
++    }
++
++  structure Dev =
++  struct
++    type device = ppconsumer
++    type style = unit
++    fun sameStyle _ = true
++    fun pushStyle _ = ()
++    fun popStyle _ = ()
++    fun defaultStyle _ = ()
++    fun depth _ = NONE
++    fun lineWidth {consumer, linewidth, flush} = SOME linewidth
++    fun textWidth _ = NONE
++    fun space ({consumer, linewidth, flush}, n) =
++          consumer (StringCvt.padLeft #" " n "")
++    fun newline {consumer, linewidth, flush} = consumer "\n"
++    fun string ({consumer, linewidth, flush}, s) = consumer s
++    fun char ({consumer, linewidth, flush}, c) = consumer(str c)
++    fun flush {consumer, linewidth, flush} = flush()
++  end
++
++  structure PP = PPStreamFn
++      (structure Token = StringToken
++       structure Device = Dev)
++
++  open PP
++
++  fun with_pp device (f: PP.stream -> unit) =
++      let val ppstrm = PP.openStream device
++       in f ppstrm;
++          PP.closeStream ppstrm
++      end
++
++  fun pp_to_string wid ppFn obj =
++      let val l = ref ([] : string list)
++          fun attach s = l := s :: !l
++          val device = {consumer = attach, linewidth = wid, flush = fn()=>()}
++       in with_pp device
++            (fn ppStrm => ppFn ppStrm obj);
++          String.concat(List.rev(!l))
++      end
++
++end (* structure PrettyPrint *)
+diff --git a/HashCons/hash-cons-lib.mlb b/HashCons/hash-cons-lib.mlb
+new file mode 100644
+index 0000000..2364e93
+--- /dev/null
++++ b/HashCons/hash-cons-lib.mlb
+@@ -0,0 +1,144 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l35
-+    in
-+       functor gs_9 = Join
-+       functor gs_10 = JoinWithArg
++  basis l4 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l35
-+    in
-+       structure gs_11 = LrParser
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = PrimeSizes
++   end
++   local
++      open l8
++   in
++      structure gs_1 = Array
++   end
++   local
++      open l8
++   in
++      structure gs_2 = Word
++   end
++   local
++      open l8
++   in
++      structure gs_3 = List
++   end
++   local
++      hash-cons-sig.sml
++   in
++      signature gs_4 = HASH_CONS
++   end
++   local
++      structure Array = gs_1
++      signature HASH_CONS = gs_4
++      structure List = gs_3
++      structure PrimeSizes = gs_0
++      structure Word = gs_2
++      hash-cons.sml
++   in
++      structure gs_5 = HashCons
++   end
++   local
++      structure HashCons = gs_5
++      hash-cons-set-sig.sml
++   in
++      signature gs_6 = HASH_CONS_SET
++   end
++   local
++      structure HashCons = gs_5
++      hash-cons-map-sig.sml
++   in
++      signature gs_7 = HASH_CONS_MAP
++   end
++   local
++      open l4
++   in
++      structure gs_8 = WordRedBlackMap
++   end
++   local
++      signature HASH_CONS_SET = gs_6
++      structure HashCons = gs_5
++      structure List = gs_3
++      structure WordRedBlackMap = gs_8
++      hash-cons-set.sml
++   in
++      structure gs_9 = HashConsSet
++   end
++   local
++      open l8
++   in
++      structure gs_10 = Option
++   end
++   local
++      signature HASH_CONS_MAP = gs_7
++      structure HashCons = gs_5
++      structure Option = gs_10
++      structure WordRedBlackMap = gs_8
++      hash-cons-map.sml
++   in
++      structure gs_11 = HashConsMap
++   end
++   local
++      open l4
++   in
++      structure gs_12 = HashString
++   end
++   local
++      open l4
++   in
++      signature gs_13 = HASH_KEY
++   end
++   local
++      signature HASH_KEY = gs_13
++      structure HashCons = gs_5
++      hash-cons-ground-fn.sml
++   in
++      functor gs_14 = HashConsGroundFn
++   end
++   local
++      functor HashConsGroundFn = gs_14
++      structure HashString = gs_12
++      hash-cons-string.sml
++   in
++      structure gs_15 = HashConsString
++   end
++   local
++      open l4
++   in
++      structure gs_16 = Atom
++   end
++   local
++      structure Atom = gs_16
++      functor HashConsGroundFn = gs_14
++      hash-cons-atom.sml
++   in
++      structure gs_17 = HashConsAtom
++   end
++in
++   signature HASH_CONS = gs_4
++   signature HASH_CONS_MAP = gs_7
++   signature HASH_CONS_SET = gs_6
++   structure HashCons = gs_5
++   structure HashConsAtom = gs_17
++   functor HashConsGroundFn = gs_14
++   structure HashConsMap = gs_11
++   structure HashConsSet = gs_9
++   structure HashConsString = gs_15
++end
++end
++
++end
+diff --git a/INet/inet-lib.mlb b/INet/inet-lib.mlb
+new file mode 100644
+index 0000000..ad7f940
+--- /dev/null
++++ b/INet/inet-lib.mlb
+@@ -0,0 +1,144 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l5
-+    in
-+       structure gs_12 = TextIO
++  basis l31 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l46
-+    in
-+       structure gs_13 = Format
-+    end
-+    local
-+       structure Format = gs_13
-+       structure HTML = gs_5
-+       signature HTML_ERROR = gs_8
-+       structure List = gs_2
-+       check-html-fn.sml
-+    in
-+       functor gs_14 = CheckHTMLFn
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_15 = Unsafe
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_16 = CharVectorSlice
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_17 = Vector
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_18 = Substring
-+    end
-+    local
-+       open l46
-+    in
-+       functor gs_19 = HashTableFn
-+    end
-+    local
-+       open l46
-+    in
-+       structure gs_20 = HashString
-+    end
-+    local
-+       html-attr-vals.sml
-+    in
-+       structure gs_21 = HTMLAttrVals
-+    end
-+    local
-+       structure HTML = gs_5
-+       structure HTMLAttrVals = gs_21
-+       html-attrs-sig.sml
-+    in
-+       signature gs_22 = HTML_ATTRS
-+    end
-+    local
-+       open l35
-+    in
-+       signature gs_23 = ARG_LEXER
-+       signature gs_24 = ARG_PARSER
-+       signature gs_25 = LEXER
-+       signature gs_26 = LR_PARSER
-+       signature gs_27 = LR_TABLE
-+       signature gs_28 = PARSER
-+       signature gs_29 = PARSER_DATA
-+       signature gs_30 = STREAM
-+       signature gs_31 = TOKEN
-+    end
-+    local
-+       signature ARG_LEXER = gs_23
-+       signature ARG_PARSER = gs_24
-+       structure HTMLAttrVals = gs_21
-+       signature LEXER = gs_25
-+       signature LR_PARSER = gs_26
-+       signature LR_TABLE = gs_27
-+       signature PARSER = gs_28
-+       signature PARSER_DATA = gs_29
-+       signature STREAM = gs_30
-+       signature TOKEN = gs_31
-+       html-gram.sig
-+    in
-+       signature gs_32 = HTML_LRVALS
-+       signature gs_33 = HTML_TOKENS
-+    end
-+    local
-+       structure Char = gs_3
-+       signature HTML_ATTRS = gs_22
-+       signature HTML_ERROR = gs_8
-+       signature HTML_LRVALS = gs_32
-+       signature HTML_TOKENS = gs_33
-+       structure HashString = gs_20
-+       functor HashTableFn = gs_19
-+       structure List = gs_2
-+       structure String = gs_1
-+       structure Substring = gs_18
-+       html-elements-fn.sml
-+    in
-+       functor gs_34 = HTMLElementsFn
-+    end
-+    local
-+       structure Char = gs_3
-+       structure CharVectorSlice = gs_16
-+       functor HTMLElementsFn = gs_34
-+       signature HTML_ATTRS = gs_22
-+       signature HTML_ERROR = gs_8
-+       signature HTML_LRVALS = gs_32
-+       signature HTML_TOKENS = gs_33
-+       structure List = gs_2
-+       structure String = gs_1
-+       structure Unsafe = gs_15
-+       structure Vector = gs_17
-+       html-lex.sml
-+    in
-+       functor gs_35 = HTMLLexFn
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_36 = Array
-+    end
-+    local
-+       signature ARG_LEXER = gs_23
-+       signature ARG_PARSER = gs_24
-+       structure Array = gs_36
-+       structure Char = gs_3
-+       structure HTML = gs_5
-+       structure HTMLAttrVals = gs_21
-+       signature HTML_ATTRS = gs_22
-+       signature HTML_LRVALS = gs_32
-+       signature HTML_TOKENS = gs_33
-+       signature LEXER = gs_25
-+       signature LR_PARSER = gs_26
-+       signature LR_TABLE = gs_27
-+       structure List = gs_2
-+       signature PARSER = gs_28
-+       signature PARSER_DATA = gs_29
-+       signature STREAM = gs_30
-+       structure String = gs_1
-+       signature TOKEN = gs_31
-+       html-gram.sml
-+    in
-+       functor gs_37 = HTMLLrValsFn
-+    end
-+    local
-+       open l5
-+    in
-+       structure gs_38 = Int
-+    end
-+    local
-+       structure Array = gs_36
-+       structure Char = gs_3
-+       structure HTML = gs_5
-+       structure HTMLAttrVals = gs_21
-+       signature HTML_ATTRS = gs_22
-+       signature HTML_ERROR = gs_8
-+       structure HashString = gs_20
-+       functor HashTableFn = gs_19
-+       structure Int = gs_38
-+       structure List = gs_2
-+       structure String = gs_1
-+       html-attrs-fn.sml
-+    in
-+       functor gs_39 = HTMLAttrsFn
-+    end
-+    local
-+       functor CheckHTMLFn = gs_14
-+       structure HTML = gs_5
-+       functor HTMLAttrsFn = gs_39
-+       functor HTMLLexFn = gs_35
-+       functor HTMLLrValsFn = gs_37
-+       signature HTML_ERROR = gs_8
-+       functor Join = gs_9
-+       functor JoinWithArg = gs_10
-+       structure LrParser = gs_11
-+       structure TextIO = gs_12
-+       html-parser-fn.sml
-+    in
-+       functor gs_40 = HTMLParserFn
-+    end
-+    local
-+       open l46
-+    in
-+       structure gs_41 = ListFormat
-+    end
-+    local
-+       structure Format = gs_13
-+       structure HTML = gs_5
-+       structure Int = gs_38
-+       structure List = gs_2
-+       structure ListFormat = gs_41
-+       pr-html.sml
-+    in
-+       structure gs_42 = PrHTML
-+    end
-+ in
-+    signature HTML = gs_4
-+    structure HTML = gs_5
-+    structure HTMLDefaults = gs_7
-+    functor HTMLParserFn = gs_40
-+    signature HTML_ERROR = gs_8
-+    structure MakeHTML = gs_6
-+    structure PrHTML = gs_42
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/HashCons/hash-cons-lib.mlb smlnj-lib-mlton/HashCons/hash-cons-lib.mlb
-*** smlnj-lib/HashCons/hash-cons-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/HashCons/hash-cons-lib.mlb	2010-04-02 16:09:14.000000000 -0400
-***************
-*** 0 ****
---- 1,144 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l4 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = PrimeSizes
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = Array
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_2 = Word
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_3 = List
-+    end
-+    local
-+       hash-cons-sig.sml
-+    in
-+       signature gs_4 = HASH_CONS
-+    end
-+    local
-+       structure Array = gs_1
-+       signature HASH_CONS = gs_4
-+       structure List = gs_3
-+       structure PrimeSizes = gs_0
-+       structure Word = gs_2
-+       hash-cons.sml
-+    in
-+       structure gs_5 = HashCons
-+    end
-+    local
-+       structure HashCons = gs_5
-+       hash-cons-set-sig.sml
-+    in
-+       signature gs_6 = HASH_CONS_SET
-+    end
-+    local
-+       structure HashCons = gs_5
-+       hash-cons-map-sig.sml
-+    in
-+       signature gs_7 = HASH_CONS_MAP
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_8 = WordRedBlackMap
-+    end
-+    local
-+       signature HASH_CONS_SET = gs_6
-+       structure HashCons = gs_5
-+       structure List = gs_3
-+       structure WordRedBlackMap = gs_8
-+       hash-cons-set.sml
-+    in
-+       structure gs_9 = HashConsSet
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_10 = Option
-+    end
-+    local
-+       signature HASH_CONS_MAP = gs_7
-+       structure HashCons = gs_5
-+       structure Option = gs_10
-+       structure WordRedBlackMap = gs_8
-+       hash-cons-map.sml
-+    in
-+       structure gs_11 = HashConsMap
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = HashString
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_13 = HASH_KEY
-+    end
-+    local
-+       signature HASH_KEY = gs_13
-+       structure HashCons = gs_5
-+       hash-cons-ground-fn.sml
-+    in
-+       functor gs_14 = HashConsGroundFn
-+    end
-+    local
-+       functor HashConsGroundFn = gs_14
-+       structure HashString = gs_12
-+       hash-cons-string.sml
-+    in
-+       structure gs_15 = HashConsString
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_16 = Atom
-+    end
-+    local
-+       structure Atom = gs_16
-+       functor HashConsGroundFn = gs_14
-+       hash-cons-atom.sml
-+    in
-+       structure gs_17 = HashConsAtom
-+    end
-+ in
-+    signature HASH_CONS = gs_4
-+    signature HASH_CONS_MAP = gs_7
-+    signature HASH_CONS_SET = gs_6
-+    structure HashCons = gs_5
-+    structure HashConsAtom = gs_17
-+    functor HashConsGroundFn = gs_14
-+    structure HashConsMap = gs_11
-+    structure HashConsSet = gs_9
-+    structure HashConsString = gs_15
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/INet/inet-lib.mlb smlnj-lib-mlton/INet/inet-lib.mlb
-*** smlnj-lib/INet/inet-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/INet/inet-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 0 ****
---- 1,144 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l31 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = StringCvt
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = Word8Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_2 = Word8Vector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = NetHostDB
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_4 = Socket
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_5 = INetSock
-+    end
-+    local
-+       structure INetSock = gs_5
-+       structure NetHostDB = gs_3
-+       structure Socket = gs_4
-+       structure StringCvt = gs_0
-+       structure Word8Array = gs_1
-+       structure Word8Vector = gs_2
-+       sock-util-sig.sml
-+    in
-+       signature gs_6 = SOCK_UTIL
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = UnixSock
-+    end
-+    local
-+       open l31
-+    in
-+       structure gs_8 = ParserComb
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Char
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_10 = Word8VectorSlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_11 = Word8ArraySlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = NetServDB
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_13 = Byte
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_14 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_15 = OS
-+    end
-+    local
-+       structure Byte = gs_13
-+       structure Char = gs_9
-+       structure INetSock = gs_5
-+       structure Int = gs_14
-+       structure NetHostDB = gs_3
-+       structure NetServDB = gs_12
-+       structure OS = gs_15
-+       structure ParserComb = gs_8
-+       signature SOCK_UTIL = gs_6
-+       structure Socket = gs_4
-+       structure StringCvt = gs_0
-+       structure Word8Array = gs_1
-+       structure Word8ArraySlice = gs_11
-+       structure Word8Vector = gs_2
-+       structure Word8VectorSlice = gs_10
-+       sock-util.sml
-+    in
-+       structure gs_16 = SockUtil
-+    end
-+    local
-+       signature SOCK_UTIL = gs_6
-+       structure SockUtil = gs_16
-+       structure Socket = gs_4
-+       structure UnixSock = gs_7
-+       unix-sock-util.sml
-+    in
-+       signature gs_17 = UNIX_SOCK_UTIL
-+       structure gs_18 = UnixSockUtil
-+    end
-+ in
-+    signature SOCK_UTIL = gs_6
-+    structure SockUtil = gs_16
-+    signature UNIX_SOCK_UTIL = gs_17
-+    structure UnixSockUtil = gs_18
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/JSON/json-lib.mlb smlnj-lib-mlton/JSON/json-lib.mlb
-*** smlnj-lib/JSON/json-lib.mlb	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/JSON/json-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 1,47 ****
-- (* json-lib.mlb
--  *
--  * COPYRIGHT (c) 2008 The Fellowship of SML/NJ (http://www.smlnj.org)
--  * All rights reserved.
--  *
--  * An MLB file for the JSON library, so that it can be used by MLton programs.
--  *
--  * TODO:
--  *	This is not complete, since MLton does not have the ml-lpt-lib yet.
--  *)
-- 
-- local
-- 
--   $(SML_LIB)/basis/basis.mlb
--   $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-- (* I don't know what the path to this library will be
--   ??/ml-lpt-lib/ml-lpt-lib.mlb
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = StringCvt
++   end
++   local
++      open l4
++   in
++      structure gs_1 = Word8Array
++   end
++   local
++      open l4
++   in
++      structure gs_2 = Word8Vector
++   end
++   local
++      open l4
++   in
++      structure gs_3 = NetHostDB
++   end
++   local
++      open l4
++   in
++      structure gs_4 = Socket
++   end
++   local
++      open l4
++   in
++      structure gs_5 = INetSock
++   end
++   local
++      structure INetSock = gs_5
++      structure NetHostDB = gs_3
++      structure Socket = gs_4
++      structure StringCvt = gs_0
++      structure Word8Array = gs_1
++      structure Word8Vector = gs_2
++      sock-util-sig.sml
++   in
++      signature gs_6 = SOCK_UTIL
++   end
++   local
++      open l4
++   in
++      structure gs_7 = UnixSock
++   end
++   local
++      open l31
++   in
++      structure gs_8 = ParserComb
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Char
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Word8VectorSlice
++   end
++   local
++      open l4
++   in
++      structure gs_11 = Word8ArraySlice
++   end
++   local
++      open l4
++   in
++      structure gs_12 = NetServDB
++   end
++   local
++      open l4
++   in
++      structure gs_13 = Byte
++   end
++   local
++      open l4
++   in
++      structure gs_14 = Int
++   end
++   local
++      open l4
++   in
++      structure gs_15 = OS
++   end
++   local
++      structure Byte = gs_13
++      structure Char = gs_9
++      structure INetSock = gs_5
++      structure Int = gs_14
++      structure NetHostDB = gs_3
++      structure NetServDB = gs_12
++      structure OS = gs_15
++      structure ParserComb = gs_8
++      signature SOCK_UTIL = gs_6
++      structure Socket = gs_4
++      structure StringCvt = gs_0
++      structure Word8Array = gs_1
++      structure Word8ArraySlice = gs_11
++      structure Word8Vector = gs_2
++      structure Word8VectorSlice = gs_10
++      sock-util.sml
++   in
++      structure gs_16 = SockUtil
++   end
++   local
++      signature SOCK_UTIL = gs_6
++      structure SockUtil = gs_16
++      structure Socket = gs_4
++      structure UnixSock = gs_7
++      unix-sock-util.sml
++   in
++      signature gs_17 = UNIX_SOCK_UTIL
++      structure gs_18 = UnixSockUtil
++   end
++in
++   signature SOCK_UTIL = gs_6
++   structure SockUtil = gs_16
++   signature UNIX_SOCK_UTIL = gs_17
++   structure UnixSockUtil = gs_18
++end
++end
++
++end
+diff --git a/JSON/json-lib.mlb b/JSON/json-lib.mlb
+index 477d0bf..a9c7429 100644
+--- a/JSON/json-lib.mlb
++++ b/JSON/json-lib.mlb
+@@ -1,47 +1,176 @@
+-(* json-lib.mlb
+- *
+- * COPYRIGHT (c) 2008 The Fellowship of SML/NJ (http://www.smlnj.org)
+- * All rights reserved.
+- *
+- * An MLB file for the JSON library, so that it can be used by MLton programs.
+- *
+- * TODO:
+- *	This is not complete, since MLton does not have the ml-lpt-lib yet.
 - *)
-- 
--   ann
--     "nonexhaustiveMatch warn" "redundantMatch warn"
--     "sequenceNonUnit ignore"
--     "warnUnused false" "forceUsed"
--   in
-- 
--     json-tokens.sml
--     json.lex.sml
--     json.sml
--     json-stream-parser.sml
--     json-parser.sml
--     json-stream-printer.sml
--     json-printer.sml
-- 
--   end
-  
-  in
-  
-! (* DOM-style API (tree based) *)
-!   structure JSON
-!   structure JSONParser
-!   structure JSONPrinter
-! 
-! (* SAX-style API (event based) *)
-!   structure JSONStreamParser
-!   structure JSONStreamPrinter
-  
-  end
---- 1,176 ----
-  
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-  in
-  
-! local
-!   basis l4 = 
-!     bas
-!       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-!     end
-!   basis l19 = 
-!     bas
-!       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-!     end
-!   basis l8 = 
-!     bas
-!       (* $/ml-lpt-lib.cm =??=> *) /Users/mtf/devel/smlnj/smlnj-110.72/lib/ml-lpt-lib.cm/ml-lpt-lib.mlb
-!     end
-! in
-! local
-!    $(SML_LIB)/basis/pervasive.mlb
-!    local
-!       open l4
-!    in
-!       structure gs_0 = IntInf
-!    end
-!    local
-!       open l8
-!    in
-!       structure gs_1 = AntlrStreamPos
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_2 = TextIO
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_3 = String
-!    end
-!    local
-!       open l19
-!    in
-!       structure gs_4 = UTF8
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_5 = Real
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_6 = List
-!    end
-!    local
-!       structure IntInf = gs_0
-!       structure List = gs_6
-!       structure Real = gs_5
-!       structure String = gs_3
-!       structure UTF8 = gs_4
-!       json-tokens.sml
-!    in
-!       structure gs_7 = JSONTokens
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_8 = StringCvt
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_9 = LargeReal
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_10 = Substring
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_11 = Vector
-!    end
-!    local
-!       open l8
-!    in
-!       structure gs_12 = ULexBuffer
-!    end
-!    local
-!       open l4
-!    in
-!       structure gs_13 = Word
-!    end
-!    local
-!       structure AntlrStreamPos = gs_1
-!       structure IntInf = gs_0
-!       structure JSONTokens = gs_7
-!       structure LargeReal = gs_9
-!       structure List = gs_6
-!       structure String = gs_3
-!       structure StringCvt = gs_8
-!       structure Substring = gs_10
-!       structure TextIO = gs_2
-!       structure ULexBuffer = gs_12
-!       structure UTF8 = gs_4
-!       structure Vector = gs_11
-!       structure Word = gs_13
-!       json.lex.sml
-!    in
-!       structure gs_14 = JSONLexer
-!    end
-!    local
-!       structure AntlrStreamPos = gs_1
-!       structure IntInf = gs_0
-!       structure JSONLexer = gs_14
-!       structure JSONTokens = gs_7
-!       structure TextIO = gs_2
-!       json-stream-parser.sml
-!    in
-!       structure gs_15 = JSONStreamParser
-!    end
-!    local
-!       structure IntInf = gs_0
-!       json.sml
-!    in
-!       structure gs_16 = JSON
-!    end
-!    local
-!       structure AntlrStreamPos = gs_1
-!       structure JSON = gs_16
-!       structure JSONLexer = gs_14
-!       structure JSONTokens = gs_7
-!       structure List = gs_6
-!       structure TextIO = gs_2
-!       json-parser.sml
-!    in
-!       structure gs_17 = JSONParser
-!    end
-!    local
-!       open l19
-!    in
-!       structure gs_18 = Format
-!    end
-!    local
-!       structure Format = gs_18
-!       structure IntInf = gs_0
-!       structure String = gs_3
-!       structure TextIO = gs_2
-!       json-stream-printer.sml
-!    in
-!       structure gs_19 = JSONStreamPrinter
-!    end
-!    local
-!       structure JSON = gs_16
-!       structure JSONStreamPrinter = gs_19
-!       structure List = gs_6
-!       structure TextIO = gs_2
-!       json-printer.sml
-!    in
-!       structure gs_20 = JSONPrinter
-!    end
-! in
-!    structure JSON = gs_16
-!    structure JSONParser = gs_17
-!    structure JSONPrinter = gs_20
-!    structure JSONStreamParser = gs_15
-!    structure JSONStreamPrinter = gs_19
-! end
-! end
-  
-  end
-diff -N -C 2 -r smlnj-lib/PP/pp-lib.mlb smlnj-lib-mlton/PP/pp-lib.mlb
-*** smlnj-lib/PP/pp-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/PP/pp-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 0 ****
---- 1,212 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l26 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l83 = 
-+     bas
-+       (* $/html-lib.cm ====> *) $(SML_LIB)/smlnj-lib/HTML/html-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = TextIO
+-
+-local
+-
+-  $(SML_LIB)/basis/basis.mlb
+-  $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
+-(* I don't know what the path to this library will be
+-  ??/ml-lpt-lib/ml-lpt-lib.mlb
+-*)
+-
+-  ann
+-    "nonexhaustiveMatch warn" "redundantMatch warn"
+-    "sequenceNonUnit ignore"
+-    "warnUnused false" "forceUsed"
+-  in
+-
+-    json-tokens.sml
+-    json.lex.sml
+-    json.sml
+-    json-stream-parser.sml
+-    json-parser.sml
+-    json-stream-printer.sml
+-    json-printer.sml
+-
+-  end
+ 
++ann
++  "nonexhaustiveMatch ignore" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
+ in
+ 
+-(* DOM-style API (tree based) *)
+-  structure JSON
+-  structure JSONParser
+-  structure JSONPrinter
+-
+-(* SAX-style API (event based) *)
+-  structure JSONStreamParser
+-  structure JSONStreamPrinter
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       src/pp-stream-sig.sml
-+    in
-+       signature gs_1 = PP_STREAM
++  basis l19 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       signature PP_STREAM = gs_1
-+       structure TextIO = gs_0
-+       src/pp-debug-fn.sml
-+    in
-+       functor gs_2 = PPDebugFn
++  basis l8 =
++    bas
++      (* $/ml-lpt-lib.cm ====> *) $(SML_LIB)/mllpt-lib/mllpt-lib.mlb
 +    end
-+    local
-+       src/pp-device-sig.sml
-+    in
-+       signature gs_3 = PP_DEVICE
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = IntInf
++   end
++   local
++      open l8
++   in
++      structure gs_1 = AntlrStreamPos
++   end
++   local
++      open l4
++   in
++      structure gs_2 = TextIO
++   end
++   local
++      open l4
++   in
++      structure gs_3 = String
++   end
++   local
++      open l19
++   in
++      structure gs_4 = UTF8
++   end
++   local
++      open l4
++   in
++      structure gs_5 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_6 = List
++   end
++   local
++      structure IntInf = gs_0
++      structure List = gs_6
++      structure Real = gs_5
++      structure String = gs_3
++      structure UTF8 = gs_4
++      json-tokens.sml
++   in
++      structure gs_7 = JSONTokens
++   end
++   local
++      open l4
++   in
++      structure gs_8 = StringCvt
++   end
++   local
++      open l4
++   in
++      structure gs_9 = LargeReal
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Substring
++   end
++   local
++      open l4
++   in
++      structure gs_11 = Vector
++   end
++   local
++      open l8
++   in
++      structure gs_12 = ULexBuffer
++   end
++   local
++      open l4
++   in
++      structure gs_13 = Word
++   end
++   local
++      structure AntlrStreamPos = gs_1
++      structure IntInf = gs_0
++      structure JSONTokens = gs_7
++      structure LargeReal = gs_9
++      structure List = gs_6
++      structure String = gs_3
++      structure StringCvt = gs_8
++      structure Substring = gs_10
++      structure TextIO = gs_2
++      structure ULexBuffer = gs_12
++      structure UTF8 = gs_4
++      structure Vector = gs_11
++      structure Word = gs_13
++      json.lex.sml
++   in
++      structure gs_14 = JSONLexer
++   end
++   local
++      structure AntlrStreamPos = gs_1
++      structure IntInf = gs_0
++      structure JSONLexer = gs_14
++      structure JSONTokens = gs_7
++      structure TextIO = gs_2
++      json-stream-parser.sml
++   in
++      structure gs_15 = JSONStreamParser
++   end
++   local
++      structure IntInf = gs_0
++      json.sml
++   in
++      structure gs_16 = JSON
++   end
++   local
++      structure AntlrStreamPos = gs_1
++      structure JSON = gs_16
++      structure JSONLexer = gs_14
++      structure JSONTokens = gs_7
++      structure List = gs_6
++      structure TextIO = gs_2
++      json-parser.sml
++   in
++      structure gs_17 = JSONParser
++   end
++   local
++      open l19
++   in
++      structure gs_18 = Format
++   end
++   local
++      structure Format = gs_18
++      structure IntInf = gs_0
++      structure String = gs_3
++      structure TextIO = gs_2
++      json-stream-printer.sml
++   in
++      structure gs_19 = JSONStreamPrinter
++   end
++   local
++      structure JSON = gs_16
++      structure JSONStreamPrinter = gs_19
++      structure List = gs_6
++      structure TextIO = gs_2
++      json-printer.sml
++   in
++      structure gs_20 = JSONPrinter
++   end
++in
++   structure JSON = gs_16
++   structure JSONParser = gs_17
++   structure JSONPrinter = gs_20
++   structure JSONStreamParser = gs_15
++   structure JSONStreamPrinter = gs_19
++end
++end
+ 
+ end
+diff --git a/PP/pp-lib.mlb b/PP/pp-lib.mlb
+new file mode 100644
+index 0000000..5961278
+--- /dev/null
++++ b/PP/pp-lib.mlb
+@@ -0,0 +1,212 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_4 = StringCvt
++  basis l26 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       signature PP_DEVICE = gs_3
-+       structure StringCvt = gs_4
-+       structure TextIO = gs_0
-+       devices/simple-textio-dev.sml
-+    in
-+       structure gs_5 = SimpleTextIODev
++  basis l83 =
++    bas
++      (* $/html-lib.cm ====> *) $(SML_LIB)/smlnj-lib/HTML/html-lib.mlb
 +    end
-+    local
-+       open l26
-+    in
-+       structure gs_6 = Format
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = TextIO
++   end
++   local
++      src/pp-stream-sig.sml
++   in
++      signature gs_1 = PP_STREAM
++   end
++   local
++      signature PP_STREAM = gs_1
++      structure TextIO = gs_0
++      src/pp-debug-fn.sml
++   in
++      functor gs_2 = PPDebugFn
++   end
++   local
++      src/pp-device-sig.sml
++   in
++      signature gs_3 = PP_DEVICE
++   end
++   local
++      open l4
++   in
++      structure gs_4 = StringCvt
++   end
++   local
++      signature PP_DEVICE = gs_3
++      structure StringCvt = gs_4
++      structure TextIO = gs_0
++      devices/simple-textio-dev.sml
++   in
++      structure gs_5 = SimpleTextIODev
++   end
++   local
++      open l26
++   in
++      structure gs_6 = Format
++   end
++   local
++      open l26
++   in
++      structure gs_7 = Queue
++   end
++   local
++      open l26
++   in
++      structure gs_8 = ListFormat
++   end
++   local
++      open l4
++   in
++      structure gs_9 = String
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Option
++   end
++   local
++      open l4
++   in
++      structure gs_11 = Int
++   end
++   local
++      src/pp-token-sig.sml
++   in
++      signature gs_12 = PP_TOKEN
++   end
++   local
++      structure Format = gs_6
++      structure Int = gs_11
++      structure ListFormat = gs_8
++      structure Option = gs_10
++      signature PP_DEVICE = gs_3
++      signature PP_STREAM = gs_1
++      signature PP_TOKEN = gs_12
++      structure Queue = gs_7
++      structure String = gs_9
++      structure TextIO = gs_0
++      src/pp-stream-fn.sml
++   in
++      functor gs_13 = PPStreamFn
++   end
++   local
++      signature PP_STREAM = gs_1
++      src/pp-desc-sig.sml
++   in
++      signature gs_14 = PP_DESC
++   end
++   local
++      signature PP_DESC = gs_14
++      signature PP_STREAM = gs_1
++      src/pp-desc-fn.sml
++   in
++      functor gs_15 = PPDescFn
++   end
++   local
++      signature PP_TOKEN = gs_12
++      structure String = gs_9
++      devices/string-token.sml
++   in
++      structure gs_16 = StringToken
++   end
++   local
++      functor PPStreamFn = gs_13
++      signature PP_STREAM = gs_1
++      structure SimpleTextIODev = gs_5
++      structure StringToken = gs_16
++      structure TextIO = gs_0
++      devices/textio-pp.sml
++   in
++      structure gs_17 = TextIOPP
++   end
++   local
++      open l26
++   in
++      structure gs_18 = ANSITerm
++   end
++   local
++      open l4
++   in
++      structure gs_19 = TextPrimIO
++   end
++   local
++      open l4
++   in
++      structure gs_20 = OS
++   end
++   local
++      structure ANSITerm = gs_18
++      structure OS = gs_20
++      signature PP_DEVICE = gs_3
++      structure StringCvt = gs_4
++      structure TextIO = gs_0
++      structure TextPrimIO = gs_19
++      devices/ansi-term-dev.sml
++   in
++      structure gs_21 = ANSITermDev
++   end
++   local
++      open l4
++   in
++      structure gs_22 = List
++   end
++   local
++      open l83
++   in
++      structure gs_23 = HTML
++   end
++   local
++      structure HTML = gs_23
++      structure List = gs_22
++      signature PP_DEVICE = gs_3
++      structure String = gs_9
++      devices/html-dev.sml
++   in
++      structure gs_24 = HTMLDev
++   end
++   local
++      structure ANSITermDev = gs_21
++      functor PPStreamFn = gs_13
++      signature PP_STREAM = gs_1
++      signature PP_TOKEN = gs_12
++      structure String = gs_9
++      structure TextIO = gs_0
++      devices/ansi-term-pp.sml
++   in
++      structure gs_25 = ANSITermPP
++   end
++in
++   structure ANSITermDev = gs_21
++   structure ANSITermPP = gs_25
++   structure HTMLDev = gs_24
++   functor PPDebugFn = gs_2
++   functor PPDescFn = gs_15
++   functor PPStreamFn = gs_13
++   signature PP_DESC = gs_14
++   signature PP_DEVICE = gs_3
++   signature PP_STREAM = gs_1
++   signature PP_TOKEN = gs_12
++   structure SimpleTextIODev = gs_5
++   structure StringToken = gs_16
++   structure TextIOPP = gs_17
++end
++end
++
++end
+diff --git a/README.mlton b/README.mlton
+new file mode 100644
+index 0000000..d8dab58
+--- /dev/null
++++ b/README.mlton
+@@ -0,0 +1,16 @@
++The following changes were made to the SML/NJ Library, in addition to
++deriving the {{{.mlb}}} files from the {{{.cm}}} files:
++ * {{{HTML/html-attrs-fn.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{HTML/html-elements-fn.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{HTML4/pp-init.sml}}} (added): Implements {{{structure PrettyPrint}}} using the SML/NJ PP Library.  This implementation is taken from the SML/NJ compiler source, since the SML/NJ HTML4 Library used the {{{structure PrettyPrint}}} provided by the SML/NJ compiler itself.
++ * {{{Util/bit-array.sml}}} (modified): The computation of the {{{maxLen}}} is given by: {{{
++val maxLen = 8*Word8Array.maxLen
++}}} This is fine in SML/NJ where {{{Word8Array.maxLen}}} is 16777215, but in MLton, {{{Word8Array.maxLen}}} is equal to {{{valOf(Int.maxInt)}}}, so the computation overflows. To accommodate both SML/NJ and MLton, the computation is replaced by {{{
++val maxLen = (8*Word8Array.maxLen) handle Overflow => Word8Array.maxLen
++}}}
++ * {{{Util/engine.mlton.sml}}} (added, not exported): Implements {{{structure Engine}}}, providing time-limited, resumable computations using ["MLtonThread"], ["MLtonSignal"], and ["MLtonItimer"].
++ * {{{Util/graph-scc-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
++ * {{{Util/redblack-map-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
++ * {{{Util/redblack-set-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
++ * {{{Util/time-limit.mlb}}} (added): Exports {{{structure TimeLimit}}}, which is ''not'' exported by {{{smlnj-lib.mlb}}}.  Since MLton is very conservative in the presence of threads and signals, program performance may be adversely affected by unnecessarily including {{{structure TimeLimit}}}.
++ * {{{Util/time-limit.mlton.sml}}} (added): Implements {{{structure TimeLimit}}} using {{{structure Engine}}}.  The SML/NJ implementation of {{{structure TimeLimit}}} uses SML/NJ's first-class continuations, signals, and interval timer.
+diff --git a/Reactive/reactive-lib.mlb b/Reactive/reactive-lib.mlb
+new file mode 100644
+index 0000000..3f13994
+--- /dev/null
++++ b/Reactive/reactive-lib.mlb
+@@ -0,0 +1,71 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l14 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l26
-+    in
-+       structure gs_7 = Queue
++  basis l4 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l26
-+    in
-+       structure gs_8 = ListFormat
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = Atom
++   end
++   local
++      structure Atom = gs_0
++      reactive-sig.sml
++   in
++      signature gs_1 = REACTIVE
++   end
++   local
++      open l4
++   in
++      structure gs_2 = AtomBinaryMap
++   end
++   local
++      open l14
++   in
++      structure gs_3 = List
++   end
++   local
++      structure Atom = gs_0
++      instruction.sml
++   in
++      structure gs_4 = Instruction
++   end
++   local
++      structure Atom = gs_0
++      structure Instruction = gs_4
++      structure List = gs_3
++      machine.sml
++   in
++      structure gs_5 = Machine
++   end
++   local
++      structure AtomBinaryMap = gs_2
++      structure Instruction = gs_4
++      structure List = gs_3
++      structure Machine = gs_5
++      signature REACTIVE = gs_1
++      reactive.sml
++   in
++      structure gs_6 = Reactive
++   end
++in
++   signature REACTIVE = gs_1
++   structure Reactive = gs_6
++end
++end
++
++end
+diff --git a/RegExp/regexp-lib.mlb b/RegExp/regexp-lib.mlb
+new file mode 100644
+index 0000000..0dae724
+--- /dev/null
++++ b/RegExp/regexp-lib.mlb
+@@ -0,0 +1,235 @@
++
++ann
++  "nonexhaustiveMatch ignore" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = String
++  basis l16 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_10 = Option
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = StringCvt
++   end
++   local
++      open l4
++   in
++      structure gs_1 = List
++   end
++   local
++      structure List = gs_1
++      Glue/match-tree.sml
++   in
++      signature gs_2 = MATCH_TREE
++      structure gs_3 = MatchTree
++   end
++   local
++      open l16
++   in
++      functor gs_4 = ListSetFn
++   end
++   local
++      open l4
++   in
++      structure gs_5 = Char
++   end
++   local
++      open l16
++   in
++      signature gs_6 = ORD_SET
++   end
++   local
++      signature ORD_SET = gs_6
++      FrontEnd/syntax-sig.sml
++   in
++      signature gs_7 = REGEXP_SYNTAX
++   end
++   local
++      structure Char = gs_5
++      structure List = gs_1
++      functor ListSetFn = gs_4
++      signature REGEXP_SYNTAX = gs_7
++      FrontEnd/syntax.sml
++   in
++      structure gs_8 = RegExpSyntax
++   end
++   local
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      structure RegExpSyntax = gs_8
++      structure StringCvt = gs_0
++      BackEnd/engine-sig.sml
++   in
++      signature gs_9 = REGEXP_ENGINE
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Array
++   end
++   local
++      open l4
++   in
++      structure gs_11 = Vector
++   end
++   local
++      open l4
++   in
++      structure gs_12 = Int
++   end
++   local
++      structure Array = gs_10
++      structure Char = gs_5
++      structure Int = gs_12
++      structure List = gs_1
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      signature REGEXP_ENGINE = gs_9
++      structure RegExpSyntax = gs_8
++      structure StringCvt = gs_0
++      structure Vector = gs_11
++      BackEnd/thompson-engine.sml
++   in
++      structure gs_13 = ThompsonEngine
++   end
++   local
++      open l16
++   in
++      functor gs_14 = ListMapFn
++   end
++   local
++      open l4
++   in
++      structure gs_15 = Array2
++   end
++   local
++      open l4
++   in
++      structure gs_16 = TextIO
++   end
++   local
++      open l4
++   in
++      structure gs_17 = ListPair
++   end
++   local
++      structure Array = gs_10
++      structure Array2 = gs_15
++      structure Char = gs_5
++      structure Int = gs_12
++      structure List = gs_1
++      functor ListMapFn = gs_14
++      structure ListPair = gs_17
++      functor ListSetFn = gs_4
++      signature ORD_SET = gs_6
++      structure RegExpSyntax = gs_8
++      structure TextIO = gs_16
++      BackEnd/fsm.sml
++   in
++      signature gs_18 = DFA
++      structure gs_19 = Dfa
++      signature gs_20 = NFA
++      structure gs_21 = Nfa
++   end
++   local
++      signature DFA = gs_18
++      structure Dfa = gs_19
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      signature NFA = gs_20
++      structure Nfa = gs_21
++      signature REGEXP_ENGINE = gs_9
++      structure RegExpSyntax = gs_8
++      structure Vector = gs_11
++      BackEnd/dfa-engine.sml
++   in
++      structure gs_22 = DfaEngine
++   end
++   local
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      structure StringCvt = gs_0
++      Glue/regexp-sig.sml
++   in
++      signature gs_23 = REGEXP
++   end
++   local
++      structure RegExpSyntax = gs_8
++      structure StringCvt = gs_0
++      FrontEnd/parser-sig.sml
++   in
++      signature gs_24 = REGEXP_PARSER
++   end
++   local
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      signature REGEXP = gs_23
++      signature REGEXP_ENGINE = gs_9
++      signature REGEXP_PARSER = gs_24
++      structure RegExpSyntax = gs_8
++      structure StringCvt = gs_0
++      Glue/regexp-fn.sml
++   in
++      functor gs_25 = RegExpFn
++   end
++   local
++      open l4
++   in
++      structure gs_26 = Word8
++   end
++   local
++      structure Char = gs_5
++      structure Int = gs_12
++      structure List = gs_1
++      signature REGEXP_PARSER = gs_24
++      structure RegExpSyntax = gs_8
++      structure StringCvt = gs_0
++      structure Word8 = gs_26
++      FrontEnd/awk-syntax.sml
++   in
++      structure gs_27 = AwkSyntax
++   end
++   local
++      open l4
++   in
++      structure gs_28 = Option
++   end
++   local
++      structure List = gs_1
++      signature MATCH_TREE = gs_2
++      structure MatchTree = gs_3
++      structure Option = gs_28
++      signature REGEXP_ENGINE = gs_9
++      structure RegExpSyntax = gs_8
++      BackEnd/bt-engine.sml
++   in
++      structure gs_29 = BackTrackEngine
++   end
++in
++   structure AwkSyntax = gs_27
++   structure BackTrackEngine = gs_29
++   structure DfaEngine = gs_22
++   signature MATCH_TREE = gs_2
++   structure MatchTree = gs_3
++   signature REGEXP = gs_23
++   signature REGEXP_ENGINE = gs_9
++   signature REGEXP_PARSER = gs_24
++   signature REGEXP_SYNTAX = gs_7
++   functor RegExpFn = gs_25
++   structure RegExpSyntax = gs_8
++   structure ThompsonEngine = gs_13
++end
++end
++
++end
+diff --git a/Unix/unix-lib.mlb b/Unix/unix-lib.mlb
+new file mode 100644
+index 0000000..ebceb6d
+--- /dev/null
++++ b/Unix/unix-lib.mlb
+@@ -0,0 +1,45 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_11 = Int
-+    end
-+    local
-+       src/pp-token-sig.sml
-+    in
-+       signature gs_12 = PP_TOKEN
-+    end
-+    local
-+       structure Format = gs_6
-+       structure Int = gs_11
-+       structure ListFormat = gs_8
-+       structure Option = gs_10
-+       signature PP_DEVICE = gs_3
-+       signature PP_STREAM = gs_1
-+       signature PP_TOKEN = gs_12
-+       structure Queue = gs_7
-+       structure String = gs_9
-+       structure TextIO = gs_0
-+       src/pp-stream-fn.sml
-+    in
-+       functor gs_13 = PPStreamFn
-+    end
-+    local
-+       signature PP_STREAM = gs_1
-+       src/pp-desc-sig.sml
-+    in
-+       signature gs_14 = PP_DESC
-+    end
-+    local
-+       signature PP_DESC = gs_14
-+       signature PP_STREAM = gs_1
-+       src/pp-desc-fn.sml
-+    in
-+       functor gs_15 = PPDescFn
-+    end
-+    local
-+       signature PP_TOKEN = gs_12
-+       structure String = gs_9
-+       devices/string-token.sml
-+    in
-+       structure gs_16 = StringToken
-+    end
-+    local
-+       functor PPStreamFn = gs_13
-+       signature PP_STREAM = gs_1
-+       structure SimpleTextIODev = gs_5
-+       structure StringToken = gs_16
-+       structure TextIO = gs_0
-+       devices/textio-pp.sml
-+    in
-+       structure gs_17 = TextIOPP
-+    end
-+    local
-+       open l26
-+    in
-+       structure gs_18 = ANSITerm
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_19 = TextPrimIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_20 = OS
-+    end
-+    local
-+       structure ANSITerm = gs_18
-+       structure OS = gs_20
-+       signature PP_DEVICE = gs_3
-+       structure StringCvt = gs_4
-+       structure TextIO = gs_0
-+       structure TextPrimIO = gs_19
-+       devices/ansi-term-dev.sml
-+    in
-+       structure gs_21 = ANSITermDev
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_22 = List
-+    end
-+    local
-+       open l83
-+    in
-+       structure gs_23 = HTML
-+    end
-+    local
-+       structure HTML = gs_23
-+       structure List = gs_22
-+       signature PP_DEVICE = gs_3
-+       structure String = gs_9
-+       devices/html-dev.sml
-+    in
-+       structure gs_24 = HTMLDev
-+    end
-+    local
-+       structure ANSITermDev = gs_21
-+       functor PPStreamFn = gs_13
-+       signature PP_STREAM = gs_1
-+       signature PP_TOKEN = gs_12
-+       structure String = gs_9
-+       structure TextIO = gs_0
-+       devices/ansi-term-pp.sml
-+    in
-+       structure gs_25 = ANSITermPP
-+    end
-+ in
-+    structure ANSITermDev = gs_21
-+    structure ANSITermPP = gs_25
-+    structure HTMLDev = gs_24
-+    functor PPDebugFn = gs_2
-+    functor PPDescFn = gs_15
-+    functor PPStreamFn = gs_13
-+    signature PP_DESC = gs_14
-+    signature PP_DEVICE = gs_3
-+    signature PP_STREAM = gs_1
-+    signature PP_TOKEN = gs_12
-+    structure SimpleTextIODev = gs_5
-+    structure StringToken = gs_16
-+    structure TextIOPP = gs_17
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/README.mlton smlnj-lib-mlton/README.mlton
-*** smlnj-lib/README.mlton	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/README.mlton	2010-04-02 15:28:21.000000000 -0400
-***************
-*** 0 ****
---- 1,15 ----
-+ The following changes were made to the SML/NJ Library, in addition to
-+ deriving the {{{.mlb}}} files from the {{{.cm}}} files:
-+  * {{{Util/redblack-set-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
-+  * {{{Util/redblack-map-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
-+  * {{{Util/graph-scc-fn.sml}}} (modified): Rewrote use of {{{where}}} structure specification.
-+  * {{{Util/bit-array.sml}}} (modified): The computation of the {{{maxLen}}} is given by: {{{
-+ val maxLen = 8*Word8Array.maxLen
-+ }}} This is fine in SML/NJ where {{{Word8Array.maxLen}}} is 16777215, but in MLton, {{{Word8Array.maxLen}}} is equal to {{{valOf(Int.maxInt)}}}, so the computation overflows. To accommodate both SML/NJ and MLton, the computation is replaced by {{{
-+ val maxLen = (8*Word8Array.maxLen) handle Overflow => Word8Array.maxLen
-+ }}}
-+  * {{{Util/engine.mlton.sml}}} (added, not exported): Implements {{{structure Engine}}}, providing time-limited, resumable computations using ["MLtonThread"], ["MLtonSignal"], and ["MLtonItimer"].
-+  * {{{Util/time-limit.mlton.sml}}} (added): Implements {{{structure TimeLimit}}} using {{{structure Engine}}}.  The SML/NJ implementation of {{{structure TimeLimit}}} uses SML/NJ's first-class continuations, signals, and interval timer.
-+  * {{{Util/time-limit.mlb}}} (added): Exports {{{structure TimeLimit}}}, which is ''not'' exported by {{{smlnj-lib.mlb}}}.  Since MLton is very conservative in the presence of threads and signals, program performance may be adversely affected by unnecessarily including {{{structure TimeLimit}}}.
-+  * {{{HTML/html-elements-fn.sml}}} (modified): Rewrote use of ''or-patterns''.
-+  * {{{HTML/html-attrs-fn.sml}}} (modified): Rewrote use of ''or-patterns''.
-diff -N -C 2 -r smlnj-lib/Reactive/reactive-lib.mlb smlnj-lib-mlton/Reactive/reactive-lib.mlb
-*** smlnj-lib/Reactive/reactive-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Reactive/reactive-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 0 ****
---- 1,71 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l14 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l4 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = Atom
-+    end
-+    local
-+       structure Atom = gs_0
-+       reactive-sig.sml
-+    in
-+       signature gs_1 = REACTIVE
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_2 = AtomBinaryMap
-+    end
-+    local
-+       open l14
-+    in
-+       structure gs_3 = List
-+    end
-+    local
-+       structure Atom = gs_0
-+       instruction.sml
-+    in
-+       structure gs_4 = Instruction
-+    end
-+    local
-+       structure Atom = gs_0
-+       structure Instruction = gs_4
-+       structure List = gs_3
-+       machine.sml
-+    in
-+       structure gs_5 = Machine
-+    end
-+    local
-+       structure AtomBinaryMap = gs_2
-+       structure Instruction = gs_4
-+       structure List = gs_3
-+       structure Machine = gs_5
-+       signature REACTIVE = gs_1
-+       reactive.sml
-+    in
-+       structure gs_6 = Reactive
-+    end
-+ in
-+    signature REACTIVE = gs_1
-+    structure Reactive = gs_6
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/RegExp/regexp-lib.mlb smlnj-lib-mlton/RegExp/regexp-lib.mlb
-*** smlnj-lib/RegExp/regexp-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/RegExp/regexp-lib.mlb	2010-04-02 16:09:15.000000000 -0400
-***************
-*** 0 ****
---- 1,235 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch ignore" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l16 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = StringCvt
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = List
-+    end
-+    local
-+       structure List = gs_1
-+       Glue/match-tree.sml
-+    in
-+       signature gs_2 = MATCH_TREE
-+       structure gs_3 = MatchTree
-+    end
-+    local
-+       open l16
-+    in
-+       functor gs_4 = ListSetFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_5 = Char
-+    end
-+    local
-+       open l16
-+    in
-+       signature gs_6 = ORD_SET
-+    end
-+    local
-+       signature ORD_SET = gs_6
-+       FrontEnd/syntax-sig.sml
-+    in
-+       signature gs_7 = REGEXP_SYNTAX
-+    end
-+    local
-+       structure Char = gs_5
-+       structure List = gs_1
-+       functor ListSetFn = gs_4
-+       signature REGEXP_SYNTAX = gs_7
-+       FrontEnd/syntax.sml
-+    in
-+       structure gs_8 = RegExpSyntax
-+    end
-+    local
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       structure RegExpSyntax = gs_8
-+       structure StringCvt = gs_0
-+       BackEnd/engine-sig.sml
-+    in
-+       signature gs_9 = REGEXP_ENGINE
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_10 = Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_11 = Vector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = Int
-+    end
-+    local
-+       structure Array = gs_10
-+       structure Char = gs_5
-+       structure Int = gs_12
-+       structure List = gs_1
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       signature REGEXP_ENGINE = gs_9
-+       structure RegExpSyntax = gs_8
-+       structure StringCvt = gs_0
-+       structure Vector = gs_11
-+       BackEnd/thompson-engine.sml
-+    in
-+       structure gs_13 = ThompsonEngine
-+    end
-+    local
-+       open l16
-+    in
-+       functor gs_14 = ListMapFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_15 = Array2
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_16 = TextIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_17 = ListPair
-+    end
-+    local
-+       structure Array = gs_10
-+       structure Array2 = gs_15
-+       structure Char = gs_5
-+       structure Int = gs_12
-+       structure List = gs_1
-+       functor ListMapFn = gs_14
-+       structure ListPair = gs_17
-+       functor ListSetFn = gs_4
-+       signature ORD_SET = gs_6
-+       structure RegExpSyntax = gs_8
-+       structure TextIO = gs_16
-+       BackEnd/fsm.sml
-+    in
-+       signature gs_18 = DFA
-+       structure gs_19 = Dfa
-+       signature gs_20 = NFA
-+       structure gs_21 = Nfa
-+    end
-+    local
-+       signature DFA = gs_18
-+       structure Dfa = gs_19
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       signature NFA = gs_20
-+       structure Nfa = gs_21
-+       signature REGEXP_ENGINE = gs_9
-+       structure RegExpSyntax = gs_8
-+       structure Vector = gs_11
-+       BackEnd/dfa-engine.sml
-+    in
-+       structure gs_22 = DfaEngine
-+    end
-+    local
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       structure StringCvt = gs_0
-+       Glue/regexp-sig.sml
-+    in
-+       signature gs_23 = REGEXP
-+    end
-+    local
-+       structure RegExpSyntax = gs_8
-+       structure StringCvt = gs_0
-+       FrontEnd/parser-sig.sml
-+    in
-+       signature gs_24 = REGEXP_PARSER
-+    end
-+    local
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       signature REGEXP = gs_23
-+       signature REGEXP_ENGINE = gs_9
-+       signature REGEXP_PARSER = gs_24
-+       structure RegExpSyntax = gs_8
-+       structure StringCvt = gs_0
-+       Glue/regexp-fn.sml
-+    in
-+       functor gs_25 = RegExpFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_26 = Word8
-+    end
-+    local
-+       structure Char = gs_5
-+       structure Int = gs_12
-+       structure List = gs_1
-+       signature REGEXP_PARSER = gs_24
-+       structure RegExpSyntax = gs_8
-+       structure StringCvt = gs_0
-+       structure Word8 = gs_26
-+       FrontEnd/awk-syntax.sml
-+    in
-+       structure gs_27 = AwkSyntax
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_28 = Option
-+    end
-+    local
-+       structure List = gs_1
-+       signature MATCH_TREE = gs_2
-+       structure MatchTree = gs_3
-+       structure Option = gs_28
-+       signature REGEXP_ENGINE = gs_9
-+       structure RegExpSyntax = gs_8
-+       BackEnd/bt-engine.sml
-+    in
-+       structure gs_29 = BackTrackEngine
-+    end
-+ in
-+    structure AwkSyntax = gs_27
-+    structure BackTrackEngine = gs_29
-+    structure DfaEngine = gs_22
-+    signature MATCH_TREE = gs_2
-+    structure MatchTree = gs_3
-+    signature REGEXP = gs_23
-+    signature REGEXP_ENGINE = gs_9
-+    signature REGEXP_PARSER = gs_24
-+    signature REGEXP_SYNTAX = gs_7
-+    functor RegExpFn = gs_25
-+    structure RegExpSyntax = gs_8
-+    structure ThompsonEngine = gs_13
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/Unix/unix-lib.mlb smlnj-lib-mlton/Unix/unix-lib.mlb
-*** smlnj-lib/Unix/unix-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Unix/unix-lib.mlb	2010-04-02 16:09:16.000000000 -0400
-***************
-*** 0 ****
---- 1,45 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = Substring
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = Posix
-+    end
-+    local
-+       unix-env-sig.sml
-+    in
-+       signature gs_2 = UNIX_ENV
-+    end
-+    local
-+       structure Posix = gs_1
-+       structure Substring = gs_0
-+       signature UNIX_ENV = gs_2
-+       unix-env.sml
-+    in
-+       structure gs_3 = UnixEnv
-+    end
-+ in
-+    signature UNIX_ENV = gs_2
-+    structure UnixEnv = gs_3
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/Util/bit-array.sml smlnj-lib-mlton/Util/bit-array.sml
-*** smlnj-lib/Util/bit-array.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/Util/bit-array.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 48,52 ****
-           *)
-            type elem = bool
-!           val maxLen = 8*Word8Array.maxLen
-            datatype vector = BA of {nbits : int, bits : W8A.array}
-        
---- 48,54 ----
-           *)
-            type elem = bool
-!           val maxLen = (8*Word8Array.maxLen)
-! 	               handle Overflow => Word8Array.maxLen
-! 	               
-            datatype vector = BA of {nbits : int, bits : W8A.array}
-        
-diff -N -C 2 -r smlnj-lib/Util/engine.mlton.sml smlnj-lib-mlton/Util/engine.mlton.sml
-*** smlnj-lib/Util/engine.mlton.sml	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Util/engine.mlton.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 0 ****
---- 1,99 ----
-+ (* Copyright (C) 1999-2004 Henry Cejtin, Matthew Fluet, Suresh
-+  *    Jagannathan, and Stephen Weeks.
-+  *
-+  * MLton is released under the GNU General Public License (GPL).
-+  * Please see the file MLton-LICENSE for license information.
-+  *)
-+ 
-+ signature ENGINE =
-+    sig
-+       type 'a t
-+ 
-+       datatype 'a res =
-+ 	 Done of 'a
-+        | Raise of exn
-+        | TimeOut of 'a t
-+ 
-+       val new: (unit -> 'a) -> 'a t
-+       val repeat: {thunk: unit -> 'a,
-+ 		   limit: Time.time,
-+ 		   tries: int} -> 'a option
-+       val run: 'a t * Time.time -> 'a res
-+       val timeLimit: Time.time * (unit -> 'a) -> 'a option
-+    end
-+ 
-+ structure Engine: ENGINE =
-+ struct
-+ 
-+ open MLton
-+ 
-+ datatype 'a t = T of {return: 'a res Thread.t option ref,
-+ 		      thread: Thread.Runnable.t}
-+ and 'a res =
-+    Done of 'a
-+  | Raise of exn
-+  | TimeOut of 'a t
-+ 
-+ val which = Itimer.Real
-+ val signal = Itimer.signal which
-+ 
-+ fun done (return): unit =
-+    (return := NONE
-+     ; Itimer.set (which, {value = Time.zeroTime,
-+ 			  interval = Time.zeroTime})
-+     ; Signal.setHandler (signal, Signal.Handler.default))
-+ 
-+ fun new (f: unit -> 'a): 'a t =
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = Substring
++   end
++   local
++      open l4
++   in
++      structure gs_1 = Posix
++   end
++   local
++      unix-env-sig.sml
++   in
++      signature gs_2 = UNIX_ENV
++   end
++   local
++      structure Posix = gs_1
++      structure Substring = gs_0
++      signature UNIX_ENV = gs_2
++      unix-env.sml
++   in
++      structure gs_3 = UnixEnv
++   end
++in
++   signature UNIX_ENV = gs_2
++   structure UnixEnv = gs_3
++end
++end
++
++end
+diff --git a/Util/bit-array.sml b/Util/bit-array.sml
+index 8d962d8..e1de7e7 100644
+--- a/Util/bit-array.sml
++++ b/Util/bit-array.sml
+@@ -47,7 +47,9 @@ structure BitArray :> BIT_ARRAY =
+          * We maintain the invariant that all bits >= nbits are 0.
+          *)
+           type elem = bool
+-          val maxLen = 8*Word8Array.maxLen
++          val maxLen = (8*Word8Array.maxLen)
++	               handle Overflow => Word8Array.maxLen
++	               
+           datatype vector = BA of {nbits : int, bits : W8A.array}
+       
+           fun array (0,init) = BA{nbits=0,bits=W8A.array(0,0w0)}
+diff --git a/Util/engine.mlton.sml b/Util/engine.mlton.sml
+new file mode 100644
+index 0000000..2463ad6
+--- /dev/null
++++ b/Util/engine.mlton.sml
+@@ -0,0 +1,99 @@
++(* Copyright (C) 1999-2004 Henry Cejtin, Matthew Fluet, Suresh
++ *    Jagannathan, and Stephen Weeks.
++ *
++ * MLton is released under the GNU General Public License (GPL).
++ * Please see the file MLton-LICENSE for license information.
++ *)
++
++signature ENGINE =
++   sig
++      type 'a t
++
++      datatype 'a res =
++	 Done of 'a
++       | Raise of exn
++       | TimeOut of 'a t
++
++      val new: (unit -> 'a) -> 'a t
++      val repeat: {thunk: unit -> 'a,
++		   limit: Time.time,
++		   tries: int} -> 'a option
++      val run: 'a t * Time.time -> 'a res
++      val timeLimit: Time.time * (unit -> 'a) -> 'a option
++   end
++
++structure Engine: ENGINE =
++struct
++
++open MLton
++
++datatype 'a t = T of {return: 'a res Thread.t option ref,
++		      thread: Thread.Runnable.t}
++and 'a res =
++   Done of 'a
++ | Raise of exn
++ | TimeOut of 'a t
++
++val which = Itimer.Real
++val signal = Itimer.signal which
++
++fun done (return): unit =
++   (return := NONE
++    ; Itimer.set (which, {value = Time.zeroTime,
++			  interval = Time.zeroTime})
++    ; Signal.setHandler (signal, Signal.Handler.default))
++
++fun new (f: unit -> 'a): 'a t =
++   let
++      val return = ref NONE
++      val thread =
++	 Thread.new
++	 (fn () =>
++	  let
++	     val res = Done (f ()) handle e => Raise e
++	     val ret = valOf (!return)
++	     val _ = done return
++	  in
++	     Thread.switch (fn _ => Thread.prepare (ret, res))
++	  end)
++      val thread = Thread.prepare (thread, ())
++   in
++      T {return = return, thread = thread}
++   end
++     
++fun run (T {return, thread}, time: Time.time): 'a res =
++   Thread.switch
++   (fn cur: 'a res Thread.t =>
 +    let
-+       val return = ref NONE
-+       val thread =
-+ 	 Thread.new
-+ 	 (fn () =>
-+ 	  let
-+ 	     val res = Done (f ()) handle e => Raise e
-+ 	     val ret = valOf (!return)
-+ 	     val _ = done return
-+ 	  in
-+ 	     Thread.switch (fn _ => Thread.prepare (ret, res))
-+ 	  end)
-+       val thread = Thread.prepare (thread, ())
++       val _ = return := SOME cur
++       fun handler (me: Thread.Runnable.t): Thread.Runnable.t =
++	  Thread.prepare
++	  (Thread.prepend (cur, fn () => (done return
++					  ; TimeOut (T {return = return,
++							thread = me}))),
++	   ())
++       val _ = Signal.setHandler (signal, Signal.Handler.handler handler)
++       val _ = Itimer.set (which, {value = time,
++				   interval = Time.zeroTime})
 +    in
-+       T {return = return, thread = thread}
++       thread
++    end)
++
++fun timeLimit (t: Time.time, f: unit -> 'a): 'a option =
++   case run (new f, t) of
++      Done a => SOME a
++    | Raise e => raise e
++    | TimeOut _ => NONE
++
++fun repeat {thunk, limit, tries} =
++   let
++      fun loop (n: int) =
++	 if n <= 0
++	    then NONE
++	 else (case timeLimit (limit, thunk) of
++		  NONE => loop (n - 1)
++		| SOME a => SOME a)
++   in loop tries
++   end
++
++end
+diff --git a/Util/graph-scc-fn.sml b/Util/graph-scc-fn.sml
+index 0dc3b32..4ae2d01 100644
+--- a/Util/graph-scc-fn.sml
++++ b/Util/graph-scc-fn.sml
+@@ -8,7 +8,7 @@
+  * author: Matthias Blume
+  *) 
+ 
+-functor GraphSCCFn (Nd: ORD_KEY) :> GRAPH_SCC where Nd = Nd =
++functor GraphSCCFn (Nd: ORD_KEY) :> GRAPH_SCC where type Nd.ord_key = Nd.ord_key =
+   struct
+     structure Nd = Nd
+ 
+diff --git a/Util/real-order-stats.sml b/Util/real-order-stats.sml
+index 9dc231c..98edf74 100644
+--- a/Util/real-order-stats.sml
++++ b/Util/real-order-stats.sml
+@@ -23,7 +23,7 @@ structure RealOrderStats : sig
+ 
+ end = struct
+ 
+-    infix 8 $  val op $ = Unsafe.Array.sub
++    infix 8 $$  val op $$ = Unsafe.Array.sub
+     infix 3 <- fun (a, i) <- x = Unsafe.Array.update (a, i, x)
+ 
+     (* initialize random number generator *)
+@@ -36,12 +36,12 @@ end = struct
+ 	    fun x - y = Word.toIntX (Word.- (Word.fromInt x, Word.fromInt y))
+ 	    (* random partition: *)
+ 	    fun rp (p, r) =
+-		let fun sw(i,j) = let val t=a$i in (a,i)<-a$j; (a,j)<-t end
++		let fun sw(i,j) = let val t=a$$i in (a,i)<-a$$j; (a,j)<-t end
+ 		    val q = Random.randRange (p, r) rand
+-		    val qv = a$q
+-		    val _ = if q<>p then ((a,q)<-a$p; (a,p)<-qv) else ()
+-		    fun up i = if i>r orelse qv < a$i then i else up(i+1)
+-		    fun dn i = if i>=p andalso qv < a$i then dn(i-1) else i
++		    val qv = a$$q
++		    val _ = if q<>p then ((a,q)<-a$$p; (a,p)<-qv) else ()
++		    fun up i = if i>r orelse qv < a$$i then i else up(i+1)
++		    fun dn i = if i>=p andalso qv < a$$i then dn(i-1) else i
+ 		    fun lp (i, j) =
+ 			let val (i, j) = (up i, dn j)
+ 			in if i>j then let val q' = i-1 in sw(p,q'); (q',qv) end
+@@ -50,7 +50,7 @@ end = struct
+ 		in lp (p+1, r) end
+ 	    (* random select: *)
+ 	    fun rs (p, r) =
+-		if p=r then a$r
++		if p=r then a$$r
+ 		else let val (q, qv) = rp (p, r)
+ 		     in if i=q then qv else if i<q then rs(p,q-1) else rs(q+1,r)
+ 		     end
+@@ -64,8 +64,8 @@ end = struct
+ 	let val mid = p + len div 2
+ 	    val r = p + len - 1
+ 	    val m0 = select0 (a, p, r, mid)
+-	    fun l(i,m) = if i>=mid then m else l(i+1, Real.max(a$i,m))
+-	in if len mod 2 = 1 then m0 else (l(p+1,a$p) + m0) / 2.0
++	    fun l(i,m) = if i>=mid then m else l(i+1, Real.max(a$$i,m))
++	in if len mod 2 = 1 then m0 else (l(p+1,a$$p) + m0) / 2.0
+ 	end
+ 
+     fun median a = median0 (a, 0, Array.length a)
+diff --git a/Util/redblack-map-fn.sml b/Util/redblack-map-fn.sml
+index 83c4354..3caf287 100644
+--- a/Util/redblack-map-fn.sml
++++ b/Util/redblack-map-fn.sml
+@@ -20,7 +20,7 @@
+  * its child will be a red leaf.
+  *)
+ 
+-functor RedBlackMapFn (K : ORD_KEY) :> ORD_MAP where Key = K =
++functor RedBlackMapFn (K : ORD_KEY) :> ORD_MAP where type Key.ord_key = K.ord_key =
+   struct
+ 
+     structure Key = K
+diff --git a/Util/redblack-set-fn.sml b/Util/redblack-set-fn.sml
+index f360528..545defd 100644
+--- a/Util/redblack-set-fn.sml
++++ b/Util/redblack-set-fn.sml
+@@ -20,7 +20,7 @@
+  * its child will be a red leaf.
+  *)
+ 
+-functor RedBlackSetFn (K : ORD_KEY) :> ORD_SET where Key = K =
++functor RedBlackSetFn (K : ORD_KEY) :> ORD_SET where type Key.ord_key = K.ord_key =
+   struct
+ 
+     structure Key = K
+diff --git a/Util/smlnj-lib.mlb b/Util/smlnj-lib.mlb
+new file mode 100644
+index 0000000..14462d8
+--- /dev/null
++++ b/Util/smlnj-lib.mlb
+@@ -0,0 +1,1108 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb $(SML_LIB)/basis/sml-nj.mlb
 +    end
-+      
-+ fun run (T {return, thread}, time: Time.time): 'a res =
-+    Thread.switch
-+    (fn cur: 'a res Thread.t =>
-+     let
-+        val _ = return := SOME cur
-+        fun handler (me: Thread.Runnable.t): Thread.Runnable.t =
-+ 	  Thread.prepare
-+ 	  (Thread.prepend (cur, fn () => (done return
-+ 					  ; TimeOut (T {return = return,
-+ 							thread = me}))),
-+ 	   ())
-+        val _ = Signal.setHandler (signal, Signal.Handler.handler handler)
-+        val _ = Itimer.set (which, {value = time,
-+ 				   interval = Time.zeroTime})
-+     in
-+        thread
-+     end)
-+ 
-+ fun timeLimit (t: Time.time, f: unit -> 'a): 'a option =
-+    case run (new f, t) of
-+       Done a => SOME a
-+     | Raise e => raise e
-+     | TimeOut _ => NONE
-+ 
-+ fun repeat {thunk, limit, tries} =
-+    let
-+       fun loop (n: int) =
-+ 	 if n <= 0
-+ 	    then NONE
-+ 	 else (case timeLimit (limit, thunk) of
-+ 		  NONE => loop (n - 1)
-+ 		| SOME a => SOME a)
-+    in loop tries
-+    end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/Util/graph-scc-fn.sml smlnj-lib-mlton/Util/graph-scc-fn.sml
-*** smlnj-lib/Util/graph-scc-fn.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/Util/graph-scc-fn.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 9,13 ****
-   *) 
-  
-! functor GraphSCCFn (Nd: ORD_KEY) :> GRAPH_SCC where Nd = Nd =
-    struct
-      structure Nd = Nd
---- 9,13 ----
-   *) 
-  
-! functor GraphSCCFn (Nd: ORD_KEY) :> GRAPH_SCC where type Nd.ord_key = Nd.ord_key =
-    struct
-      structure Nd = Nd
-diff -N -C 2 -r smlnj-lib/Util/real-order-stats.sml smlnj-lib-mlton/Util/real-order-stats.sml
-*** smlnj-lib/Util/real-order-stats.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/Util/real-order-stats.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 24,28 ****
-  end = struct
-  
-!     infix 8 $  val op $ = Unsafe.Array.sub
-      infix 3 <- fun (a, i) <- x = Unsafe.Array.update (a, i, x)
-  
---- 24,28 ----
-  end = struct
-  
-!     infix 8 $$  val op $$ = Unsafe.Array.sub
-      infix 3 <- fun (a, i) <- x = Unsafe.Array.update (a, i, x)
-  
-***************
-*** 37,46 ****
-  	    (* random partition: *)
-  	    fun rp (p, r) =
-! 		let fun sw(i,j) = let val t=a$i in (a,i)<-a$j; (a,j)<-t end
-  		    val q = Random.randRange (p, r) rand
-! 		    val qv = a$q
-! 		    val _ = if q<>p then ((a,q)<-a$p; (a,p)<-qv) else ()
-! 		    fun up i = if i>r orelse qv < a$i then i else up(i+1)
-! 		    fun dn i = if i>=p andalso qv < a$i then dn(i-1) else i
-  		    fun lp (i, j) =
-  			let val (i, j) = (up i, dn j)
---- 37,46 ----
-  	    (* random partition: *)
-  	    fun rp (p, r) =
-! 		let fun sw(i,j) = let val t=a$$i in (a,i)<-a$$j; (a,j)<-t end
-  		    val q = Random.randRange (p, r) rand
-! 		    val qv = a$$q
-! 		    val _ = if q<>p then ((a,q)<-a$$p; (a,p)<-qv) else ()
-! 		    fun up i = if i>r orelse qv < a$$i then i else up(i+1)
-! 		    fun dn i = if i>=p andalso qv < a$$i then dn(i-1) else i
-  		    fun lp (i, j) =
-  			let val (i, j) = (up i, dn j)
-***************
-*** 51,55 ****
-  	    (* random select: *)
-  	    fun rs (p, r) =
-! 		if p=r then a$r
-  		else let val (q, qv) = rp (p, r)
-  		     in if i=q then qv else if i<q then rs(p,q-1) else rs(q+1,r)
---- 51,55 ----
-  	    (* random select: *)
-  	    fun rs (p, r) =
-! 		if p=r then a$$r
-  		else let val (q, qv) = rp (p, r)
-  		     in if i=q then qv else if i<q then rs(p,q-1) else rs(q+1,r)
-***************
-*** 65,70 ****
-  	    val r = p + len - 1
-  	    val m0 = select0 (a, p, r, mid)
-! 	    fun l(i,m) = if i>=mid then m else l(i+1, Real.max(a$i,m))
-! 	in if len mod 2 = 1 then m0 else (l(p+1,a$p) + m0) / 2.0
-  	end
-  
---- 65,70 ----
-  	    val r = p + len - 1
-  	    val m0 = select0 (a, p, r, mid)
-! 	    fun l(i,m) = if i>=mid then m else l(i+1, Real.max(a$$i,m))
-! 	in if len mod 2 = 1 then m0 else (l(p+1,a$$p) + m0) / 2.0
-  	end
-  
-diff -N -C 2 -r smlnj-lib/Util/redblack-map-fn.sml smlnj-lib-mlton/Util/redblack-map-fn.sml
-*** smlnj-lib/Util/redblack-map-fn.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/Util/redblack-map-fn.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 21,25 ****
-   *)
-  
-! functor RedBlackMapFn (K : ORD_KEY) :> ORD_MAP where Key = K =
-    struct
-  
---- 21,25 ----
-   *)
-  
-! functor RedBlackMapFn (K : ORD_KEY) :> ORD_MAP where type Key.ord_key = K.ord_key =
-    struct
-  
-diff -N -C 2 -r smlnj-lib/Util/redblack-set-fn.sml smlnj-lib-mlton/Util/redblack-set-fn.sml
-*** smlnj-lib/Util/redblack-set-fn.sml	2009-10-02 09:51:26.000000000 -0400
---- smlnj-lib-mlton/Util/redblack-set-fn.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 21,25 ****
-   *)
-  
-! functor RedBlackSetFn (K : ORD_KEY) :> ORD_SET where Key = K =
-    struct
-  
---- 21,25 ----
-   *)
-  
-! functor RedBlackSetFn (K : ORD_KEY) :> ORD_SET where type Key.ord_key = K.ord_key =
-    struct
-  
-diff -N -C 2 -r smlnj-lib/Util/smlnj-lib.mlb smlnj-lib-mlton/Util/smlnj-lib.mlb
-*** smlnj-lib/Util/smlnj-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Util/smlnj-lib.mlb	2010-04-02 16:09:16.000000000 -0400
-***************
-*** 0 ****
---- 1,1108 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb $(SML_LIB)/basis/sml-nj.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = List
-+    end
-+    local
-+       ord-key-sig.sml
-+    in
-+       signature gs_1 = ORD_KEY
-+    end
-+    local
-+       signature ORD_KEY = gs_1
-+       ord-set-sig.sml
-+    in
-+       signature gs_2 = ORD_SET
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = Int
-+    end
-+    local
-+       lib-base-sig.sml
-+    in
-+       signature gs_4 = LIB_BASE
-+    end
-+    local
-+       structure Int = gs_3
-+       signature LIB_BASE = gs_4
-+       lib-base.sml
-+    in
-+       structure gs_5 = LibBase
-+    end
-+    local
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_KEY = gs_1
-+       signature ORD_SET = gs_2
-+       list-set-fn.sml
-+    in
-+       functor gs_6 = ListSetFn
-+    end
-+    local
-+       signature ORD_KEY = gs_1
-+       ord-map-sig.sml
-+    in
-+       signature gs_7 = ORD_MAP
-+    end
-+    local
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_KEY = gs_1
-+       signature ORD_MAP = gs_7
-+       list-map-fn.sml
-+    in
-+       functor gs_8 = ListMapFn
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_SET = gs_2
-+       int-binary-set.sml
-+    in
-+       structure gs_9 = IntBinarySet
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       signature ORD_MAP = gs_7
-+       int-binary-map.sml
-+    in
-+       structure gs_10 = IntBinaryMap
-+    end
-+    local
-+       prime-sizes.sml
-+    in
-+       structure gs_11 = PrimeSizes
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_13 = ArraySlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_14 = General
-+    end
-+    local
-+       dynamic-array-sig.sml
-+    in
-+       signature gs_15 = DYNAMIC_ARRAY
-+    end
-+    local
-+       structure Array = gs_12
-+       structure ArraySlice = gs_13
-+       signature DYNAMIC_ARRAY = gs_15
-+       structure General = gs_14
-+       structure Int = gs_3
-+       dynamic-array.sml
-+    in
-+       structure gs_16 = DynamicArray
-+    end
-+    local
-+       io-util-sig.sml
-+    in
-+       signature gs_17 = IO_UTIL
-+    end
-+    local
-+       splaytree-sig.sml
-+    in
-+       signature gs_18 = SPLAY_TREE
-+    end
-+    local
-+       signature SPLAY_TREE = gs_18
-+       splaytree.sml
-+    in
-+       structure gs_19 = SplayTree
-+    end
-+    local
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_KEY = gs_1
-+       signature ORD_SET = gs_2
-+       structure SplayTree = gs_19
-+       splay-set-fn.sml
-+    in
-+       functor gs_20 = SplaySetFn
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_KEY = gs_1
-+       signature ORD_MAP = gs_7
-+       structure SplayTree = gs_19
-+       splay-map-fn.sml
-+    in
-+       functor gs_21 = SplayMapFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_22 = TextIO
-+    end
-+    local
-+       structure Int = gs_3
-+       structure List = gs_0
-+       structure TextIO = gs_22
-+       ansi-term.sml
-+    in
-+       structure gs_23 = ANSITerm
-+    end
-+    local
-+       signature IO_UTIL = gs_17
-+       structure TextIO = gs_22
-+       io-util.sml
-+    in
-+       structure gs_24 = IOUtil
-+    end
-+    local
-+       plist-sig.sml
-+    in
-+       signature gs_25 = PROP_LIST
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_26 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_27 = Substring
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_28 = StringCvt
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_29 = Char
-+    end
-+    local
-+       getopt-sig.sml
-+    in
-+       signature gs_30 = GET_OPT
-+    end
-+    local
-+       structure Char = gs_29
-+       signature GET_OPT = gs_30
-+       structure Int = gs_3
-+       structure List = gs_0
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       getopt.sml
-+    in
-+       structure gs_31 = GetOpt
-+    end
-+    local
-+       interval-domain-sig.sml
-+    in
-+       signature gs_32 = INTERVAL_DOMAIN
-+    end
-+    local
-+       signature INTERVAL_DOMAIN = gs_32
-+       interval-set-sig.sml
-+    in
-+       signature gs_33 = INTERVAL_SET
-+    end
-+    local
-+       structure StringCvt = gs_28
-+       parser-comb-sig.sml
-+    in
-+       signature gs_34 = PARSER_COMB
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_35 = Word8
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_36 = CharVector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_37 = LargeWord
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_38 = LargeInt
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_39 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_40 = Real
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_41 = LargeReal
-+    end
-+    local
-+       atom-sig.sml
-+    in
-+       signature gs_42 = ATOM
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_43 = Unsafe
-+    end
-+    local
-+       structure Char = gs_29
-+       structure Substring = gs_27
-+       structure Unsafe = gs_43
-+       structure Word = gs_39
-+       hash-string.sml
-+    in
-+       structure gs_44 = HashString
-+    end
-+    local
-+       signature ATOM = gs_42
-+       structure Array = gs_12
-+       structure HashString = gs_44
-+       structure String = gs_26
-+       structure Substring = gs_27
-+       structure Word = gs_39
-+       atom.sml
-+    in
-+       structure gs_45 = Atom
-+    end
-+    local
-+       structure Atom = gs_45
-+       structure Int = gs_3
-+       structure LargeInt = gs_38
-+       structure LargeReal = gs_41
-+       structure LargeWord = gs_37
-+       structure Real = gs_40
-+       structure Word = gs_39
-+       structure Word8 = gs_35
-+       format-sig.sml
-+    in
-+       signature gs_46 = FORMAT
-+    end
-+    local
-+       structure Int = gs_3
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       real-format.sml
-+    in
-+       structure gs_47 = RealFormat
-+    end
-+    local
-+       structure Atom = gs_45
-+       structure Char = gs_29
-+       structure Int = gs_3
-+       structure LargeInt = gs_38
-+       structure LargeReal = gs_41
-+       structure LargeWord = gs_37
-+       structure Real = gs_40
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       structure Word = gs_39
-+       structure Word8 = gs_35
-+       fmt-fields.sml
-+    in
-+       structure gs_48 = FmtFields
-+    end
-+    local
-+       structure Atom = gs_45
-+       structure Char = gs_29
-+       structure CharVector = gs_36
-+       signature FORMAT = gs_46
-+       structure FmtFields = gs_48
-+       structure Int = gs_3
-+       structure LargeInt = gs_38
-+       structure LargeWord = gs_37
-+       structure Real = gs_40
-+       structure RealFormat = gs_47
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       structure Word = gs_39
-+       structure Word8 = gs_35
-+       format.sml
-+    in
-+       structure gs_49 = Format
-+    end
-+    local
-+       priority-sig.sml
-+    in
-+       signature gs_50 = PRIORITY
-+    end
-+    local
-+       hash-key-sig.sml
-+    in
-+       signature gs_51 = HASH_KEY
-+    end
-+    local
-+       signature HASH_KEY = gs_51
-+       mono-hash-table-sig.sml
-+    in
-+       signature gs_52 = MONO_HASH_TABLE
-+    end
-+    local
-+       structure Array = gs_12
-+       structure Word = gs_39
-+       hash-table-rep.sml
-+    in
-+       structure gs_53 = HashTableRep
-+    end
-+    local
-+       structure Array = gs_12
-+       structure HashTableRep = gs_53
-+       signature MONO_HASH_TABLE = gs_52
-+       structure Word = gs_39
-+       int-hash-table.sml
-+    in
-+       structure gs_54 = IntHashTable
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_55 = MONO_ARRAY
-+    end
-+    local
-+       signature MONO_ARRAY = gs_55
-+       bit-array-sig.sml
-+    in
-+       signature gs_56 = BIT_ARRAY
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_KEY = gs_1
-+       signature ORD_SET = gs_2
-+       redblack-set-fn.sml
-+    in
-+       functor gs_57 = RedBlackSetFn
-+    end
-+    local
-+       structure Atom = gs_45
-+       functor RedBlackSetFn = gs_57
-+       atom-redblack-set.sml
-+    in
-+       structure gs_58 = AtomRedBlackSet
-+    end
-+    local
-+       structure AtomRedBlackSet = gs_58
-+       atom-set.sml
-+    in
-+       structure gs_59 = AtomSet
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_KEY = gs_1
-+       signature ORD_MAP = gs_7
-+       redblack-map-fn.sml
-+    in
-+       functor gs_60 = RedBlackMapFn
-+    end
-+    local
-+       structure Atom = gs_45
-+       functor RedBlackMapFn = gs_60
-+       atom-redblack-map.sml
-+    in
-+       structure gs_61 = AtomRedBlackMap
-+    end
-+    local
-+       structure AtomRedBlackMap = gs_61
-+       atom-map.sml
-+    in
-+       structure gs_62 = AtomMap
-+    end
-+    local
-+       structure List = gs_0
-+       signature PROP_LIST = gs_25
-+       plist.sml
-+    in
-+       structure gs_63 = PropList
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_64 = Vector
-+    end
-+    local
-+       char-map-sig.sml
-+    in
-+       signature gs_65 = CHAR_MAP
-+    end
-+    local
-+       structure Array = gs_12
-+       signature CHAR_MAP = gs_65
-+       structure Char = gs_29
-+       structure String = gs_26
-+       structure Vector = gs_64
-+       char-map.sml
-+    in
-+       structure gs_66 = CharMap
-+    end
-+    local
-+       list-xprod-sig.sml
-+    in
-+       signature gs_67 = LIST_XPROD
-+    end
-+    local
-+       signature ORD_KEY = gs_1
-+       graph-scc-sig.sml
-+    in
-+       signature gs_68 = GRAPH_SCC
-+    end
-+    local
-+       signature GRAPH_SCC = gs_68
-+       structure List = gs_0
-+       signature ORD_KEY = gs_1
-+       functor RedBlackMapFn = gs_60
-+       graph-scc-fn.sml
-+    in
-+       functor gs_69 = GraphSCCFn
-+    end
-+    local
-+       structure Array = gs_12
-+       signature HASH_KEY = gs_51
-+       structure HashTableRep = gs_53
-+       signature MONO_HASH_TABLE = gs_52
-+       structure Word = gs_39
-+       hash-table-fn.sml
-+    in
-+       functor gs_70 = HashTableFn
-+    end
-+    local
-+       structure Atom = gs_45
-+       functor HashTableFn = gs_70
-+       atom-table.sml
-+    in
-+       structure gs_71 = AtomTable
-+    end
-+    local
-+       structure StringCvt = gs_28
-+       list-format-sig.sml
-+    in
-+       signature gs_72 = LIST_FORMAT
-+    end
-+    local
-+       signature LIST_FORMAT = gs_72
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       list-format.sml
-+    in
-+       structure gs_73 = ListFormat
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_74 = MONO_VECTOR
-+    end
-+    local
-+       signature MONO_VECTOR = gs_74
-+       bit-vector-sig.sml
-+    in
-+       signature gs_75 = BIT_VECTOR
-+    end
-+    local
-+       signature PARSER_COMB = gs_34
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       parser-comb.sml
-+    in
-+       structure gs_76 = ParserComb
-+    end
-+    local
-+       signature HASH_KEY = gs_51
-+       mono-hash2-table-sig.sml
-+    in
-+       signature gs_77 = MONO_HASH2_TABLE
-+    end
-+    local
-+       signature INTERVAL_DOMAIN = gs_32
-+       signature INTERVAL_SET = gs_33
-+       structure List = gs_0
-+       interval-set-fn.sml
-+    in
-+       functor gs_78 = IntervalSetFn
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_SET = gs_2
-+       structure Word = gs_39
-+       word-redblack-set.sml
-+    in
-+       structure gs_79 = WordRedBlackSet
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_MAP = gs_7
-+       structure Word = gs_39
-+       word-redblack-map.sml
-+    in
-+       structure gs_80 = WordRedBlackMap
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_SET = gs_2
-+       int-list-set.sml
-+    in
-+       structure gs_81 = IntListSet
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_MAP = gs_7
-+       int-list-map.sml
-+    in
-+       structure gs_82 = IntListMap
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_83 = OS
-+    end
-+    local
-+       path-util-sig.sml
-+    in
-+       signature gs_84 = PATH_UTIL
-+    end
-+    local
-+       structure OS = gs_83
-+       signature PATH_UTIL = gs_84
-+       path-util.sml
-+    in
-+       structure gs_85 = PathUtil
-+    end
-+    local
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       signature ORD_KEY = gs_1
-+       signature ORD_SET = gs_2
-+       binary-set-fn.sml
-+    in
-+       functor gs_86 = BinarySetFn
-+    end
-+    local
-+       structure LibBase = gs_5
-+       signature ORD_KEY = gs_1
-+       signature ORD_MAP = gs_7
-+       binary-map-fn.sml
-+    in
-+       functor gs_87 = BinaryMapFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_88 = Math
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_89 = PackWord32Big
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_90 = Word8Vector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_91 = Word8Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_92 = Word31
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_93 = Byte
-+    end
-+    local
-+       random-sig.sml
-+    in
-+       signature gs_94 = RANDOM
-+    end
-+    local
-+       structure Array = gs_12
-+       structure Byte = gs_93
-+       structure LargeWord = gs_37
-+       structure LibBase = gs_5
-+       structure PackWord32Big = gs_89
-+       signature RANDOM = gs_94
-+       structure Word31 = gs_92
-+       structure Word8Array = gs_91
-+       structure Word8Vector = gs_90
-+       random.sml
-+    in
-+       structure gs_95 = Random
-+    end
-+    local
-+       structure Array = gs_12
-+       structure ArraySlice = gs_13
-+       structure Random = gs_95
-+       structure Real = gs_40
-+       structure Unsafe = gs_43
-+       structure Word = gs_39
-+       real-order-stats.sml
-+    in
-+       structure gs_96 = RealOrderStats
-+    end
-+    local
-+       structure Array = gs_12
-+       structure ArraySlice = gs_13
-+       structure Math = gs_88
-+       structure RealOrderStats = gs_96
-+       structure Unsafe = gs_43
-+       univariate-stats.sml
-+    in
-+       structure gs_97 = UnivariateStats
-+    end
-+    local
-+       signature BIT_ARRAY = gs_56
-+       structure Byte = gs_93
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       structure List = gs_0
-+       structure Word = gs_39
-+       structure Word8 = gs_35
-+       structure Word8Array = gs_91
-+       structure Word8Vector = gs_90
-+       bit-array.sml
-+    in
-+       structure gs_98 = BitArray
-+    end
-+    local
-+       structure Array = gs_12
-+       signature MONO_ARRAY = gs_55
-+       structure Vector = gs_64
-+       mono-array-fn.sml
-+    in
-+       functor gs_99 = MonoArrayFn
-+    end
-+    local
-+       signature MONO_ARRAY = gs_55
-+       bsearch-fn.sml
-+    in
-+       functor gs_100 = BSearchFn
-+    end
-+    local
-+       mono-dynamic-array-sig.sml
-+    in
-+       signature gs_101 = MONO_DYNAMIC_ARRAY
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_102 = Bool
-+    end
-+    local
-+       structure StringCvt = gs_28
-+       format-comb-sig.sml
-+    in
-+       signature gs_103 = FORMAT_COMB
-+    end
-+    local
-+       structure Bool = gs_102
-+       structure Char = gs_29
-+       signature FORMAT_COMB = gs_103
-+       structure Int = gs_3
-+       structure List = gs_0
-+       structure Real = gs_40
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       format-comb.sml
-+    in
-+       structure gs_104 = FormatComb
-+    end
-+    local
-+       queue-sig.sml
-+    in
-+       signature gs_105 = QUEUE
-+    end
-+    local
-+       fifo-sig.sml
-+    in
-+       signature gs_106 = FIFO
-+    end
-+    local
-+       signature FIFO = gs_106
-+       structure List = gs_0
-+       fifo.sml
-+    in
-+       structure gs_107 = Fifo
-+    end
-+    local
-+       structure Fifo = gs_107
-+       signature QUEUE = gs_105
-+       queue.sml
-+    in
-+       structure gs_108 = Queue
-+    end
-+    local
-+       structure Array = gs_12
-+       signature HASH_KEY = gs_51
-+       structure HashTableRep = gs_53
-+       signature MONO_HASH2_TABLE = gs_77
-+       structure Word = gs_39
-+       hash2-table-fn.sml
-+    in
-+       functor gs_109 = Hash2TableFn
-+    end
-+    local
-+       structure Array = gs_12
-+       structure HashTableRep = gs_53
-+       signature MONO_HASH_TABLE = gs_52
-+       structure Word = gs_39
-+       word-hash-table.sml
-+    in
-+       structure gs_110 = WordHashTable
-+    end
-+    local
-+       structure Atom = gs_45
-+       structure AtomTable = gs_71
-+       structure List = gs_0
-+       keyword-fn.sml
-+    in
-+       functor gs_111 = KeywordFn
-+    end
-+    local
-+       mono-priorityq-sig.sml
-+    in
-+       signature gs_112 = MONO_PRIORITYQ
-+    end
-+    local
-+       structure List = gs_0
-+       signature MONO_PRIORITYQ = gs_112
-+       signature PRIORITY = gs_50
-+       left-priorityq-fn.sml
-+    in
-+       functor gs_113 = LeftPriorityQFn
-+    end
-+    local
-+       hash-table-sig.sml
-+    in
-+       signature gs_114 = HASH_TABLE
-+    end
-+    local
-+       structure Array = gs_12
-+       signature HASH_TABLE = gs_114
-+       structure HashTableRep = gs_53
-+       structure Word = gs_39
-+       hash-table.sml
-+    in
-+       structure gs_115 = HashTable
-+    end
-+    local
-+       structure General = gs_14
-+       structure Int = gs_3
-+       signature MONO_ARRAY = gs_55
-+       signature MONO_DYNAMIC_ARRAY = gs_101
-+       dynamic-array-fn.sml
-+    in
-+       functor gs_116 = DynamicArrayFn
-+    end
-+    local
-+       signature MONO_ARRAY = gs_55
-+       mono-array-sort-sig.sml
-+    in
-+       signature gs_117 = MONO_ARRAY_SORT
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       signature ORD_SET = gs_2
-+       int-redblack-set.sml
-+    in
-+       structure gs_118 = IntRedBlackSet
-+    end
-+    local
-+       structure Int = gs_3
-+       structure LibBase = gs_5
-+       signature ORD_MAP = gs_7
-+       int-redblack-map.sml
-+    in
-+       structure gs_119 = IntRedBlackMap
-+    end
-+    local
-+       array-sort-sig.sml
-+    in
-+       signature gs_120 = ARRAY_SORT
-+    end
-+    local
-+       signature ARRAY_SORT = gs_120
-+       structure Array = gs_12
-+       structure Int = gs_3
-+       structure Unsafe = gs_43
-+       array-qsort.sml
-+    in
-+       structure gs_121 = ArrayQSort
-+    end
-+    local
-+       uref-sig.sml
-+    in
-+       signature gs_122 = UREF
-+    end
-+    local
-+       signature UREF = gs_122
-+       simple-uref.sml
-+    in
-+       structure gs_123 = SimpleURef
-+    end
-+    local
-+       listsort-sig.sml
-+    in
-+       signature gs_124 = LIST_SORT
-+    end
-+    local
-+       signature LIST_SORT = gs_124
-+       structure LibBase = gs_5
-+       list-mergesort.sml
-+    in
-+       structure gs_125 = ListMergeSort
-+    end
-+    local
-+       structure Int = gs_3
-+       signature MONO_ARRAY = gs_55
-+       signature MONO_ARRAY_SORT = gs_117
-+       array-qsort-fn.sml
-+    in
-+       functor gs_126 = ArrayQSortFn
-+    end
-+    local
-+       structure Atom = gs_45
-+       functor BinarySetFn = gs_86
-+       atom-binary-set.sml
-+    in
-+       structure gs_127 = AtomBinarySet
-+    end
-+    local
-+       structure Atom = gs_45
-+       functor BinaryMapFn = gs_87
-+       atom-binary-map.sml
-+    in
-+       structure gs_128 = AtomBinaryMap
-+    end
-+    local
-+       structure StringCvt = gs_28
-+       utf8-sig.sml
-+    in
-+       signature gs_129 = UTF8
-+    end
-+    local
-+       structure Char = gs_29
-+       structure String = gs_26
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       signature UTF8 = gs_129
-+       structure Word = gs_39
-+       utf8.sml
-+    in
-+       structure gs_130 = UTF8
-+    end
-+    local
-+       signature UREF = gs_122
-+       uref.sml
-+    in
-+       structure gs_131 = URef
-+    end
-+    local
-+       structure Atom = gs_45
-+       structure Int = gs_3
-+       structure LargeInt = gs_38
-+       structure LargeReal = gs_41
-+       structure LargeWord = gs_37
-+       structure Real = gs_40
-+       structure StringCvt = gs_28
-+       structure Word = gs_39
-+       structure Word8 = gs_35
-+       scan-sig.sml
-+    in
-+       signature gs_132 = SCAN
-+    end
-+    local
-+       structure Bool = gs_102
-+       structure Char = gs_29
-+       structure FmtFields = gs_48
-+       structure Int = gs_3
-+       structure LargeInt = gs_38
-+       structure LargeReal = gs_41
-+       signature SCAN = gs_132
-+       structure StringCvt = gs_28
-+       structure Substring = gs_27
-+       structure Word8Array = gs_91
-+       scan.sml
-+    in
-+       structure gs_133 = Scan
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_134 = Int32
-+    end
-+    local
-+       structure Word31 = gs_92
-+       rand-sig.sml
-+    in
-+       signature gs_135 = RAND
-+    end
-+    local
-+       structure Int32 = gs_134
-+       structure LibBase = gs_5
-+       signature RAND = gs_135
-+       structure Real = gs_40
-+       structure Word31 = gs_92
-+       rand.sml
-+    in
-+       structure gs_136 = Rand
-+    end
-+    local
-+       signature LIST_XPROD = gs_67
-+       list-xprod.sml
-+    in
-+       structure gs_137 = ListXProd
-+    end
-+ in
-+    structure ANSITerm = gs_23
-+    signature ARRAY_SORT = gs_120
-+    signature ATOM = gs_42
-+    structure ArrayQSort = gs_121
-+    functor ArrayQSortFn = gs_126
-+    structure Atom = gs_45
-+    structure AtomBinaryMap = gs_128
-+    structure AtomBinarySet = gs_127
-+    structure AtomMap = gs_62
-+    structure AtomRedBlackMap = gs_61
-+    structure AtomRedBlackSet = gs_58
-+    structure AtomSet = gs_59
-+    structure AtomTable = gs_71
-+    signature BIT_ARRAY = gs_56
-+    signature BIT_VECTOR = gs_75
-+    functor BSearchFn = gs_100
-+    functor BinaryMapFn = gs_87
-+    functor BinarySetFn = gs_86
-+    structure BitArray = gs_98
-+    signature CHAR_MAP = gs_65
-+    structure CharMap = gs_66
-+    signature DYNAMIC_ARRAY = gs_15
-+    structure DynamicArray = gs_16
-+    functor DynamicArrayFn = gs_116
-+    signature FIFO = gs_106
-+    signature FORMAT = gs_46
-+    signature FORMAT_COMB = gs_103
-+    structure Fifo = gs_107
-+    structure Format = gs_49
-+    structure FormatComb = gs_104
-+    signature GET_OPT = gs_30
-+    signature GRAPH_SCC = gs_68
-+    structure GetOpt = gs_31
-+    functor GraphSCCFn = gs_69
-+    signature HASH_KEY = gs_51
-+    signature HASH_TABLE = gs_114
-+    functor Hash2TableFn = gs_109
-+    structure HashString = gs_44
-+    structure HashTable = gs_115
-+    functor HashTableFn = gs_70
-+    signature INTERVAL_DOMAIN = gs_32
-+    signature INTERVAL_SET = gs_33
-+    structure IOUtil = gs_24
-+    signature IO_UTIL = gs_17
-+    structure IntBinaryMap = gs_10
-+    structure IntBinarySet = gs_9
-+    structure IntHashTable = gs_54
-+    structure IntListMap = gs_82
-+    structure IntListSet = gs_81
-+    structure IntRedBlackMap = gs_119
-+    structure IntRedBlackSet = gs_118
-+    functor IntervalSetFn = gs_78
-+    functor KeywordFn = gs_111
-+    signature LIB_BASE = gs_4
-+    signature LIST_FORMAT = gs_72
-+    signature LIST_SORT = gs_124
-+    signature LIST_XPROD = gs_67
-+    functor LeftPriorityQFn = gs_113
-+    structure LibBase = gs_5
-+    structure ListFormat = gs_73
-+    functor ListMapFn = gs_8
-+    structure ListMergeSort = gs_125
-+    functor ListSetFn = gs_6
-+    structure ListXProd = gs_137
-+    signature MONO_ARRAY_SORT = gs_117
-+    signature MONO_DYNAMIC_ARRAY = gs_101
-+    signature MONO_HASH2_TABLE = gs_77
-+    signature MONO_HASH_TABLE = gs_52
-+    signature MONO_PRIORITYQ = gs_112
-+    functor MonoArrayFn = gs_99
-+    signature ORD_KEY = gs_1
-+    signature ORD_MAP = gs_7
-+    signature ORD_SET = gs_2
-+    signature PARSER_COMB = gs_34
-+    signature PATH_UTIL = gs_84
-+    signature PRIORITY = gs_50
-+    signature PROP_LIST = gs_25
-+    structure ParserComb = gs_76
-+    structure PathUtil = gs_85
-+    structure PrimeSizes = gs_11
-+    structure PropList = gs_63
-+    signature QUEUE = gs_105
-+    structure Queue = gs_108
-+    signature RAND = gs_135
-+    signature RANDOM = gs_94
-+    structure Rand = gs_136
-+    structure Random = gs_95
-+    structure RealOrderStats = gs_96
-+    functor RedBlackMapFn = gs_60
-+    functor RedBlackSetFn = gs_57
-+    signature SCAN = gs_132
-+    signature SPLAY_TREE = gs_18
-+    structure Scan = gs_133
-+    structure SimpleURef = gs_123
-+    functor SplayMapFn = gs_21
-+    functor SplaySetFn = gs_20
-+    structure SplayTree = gs_19
-+    signature UREF = gs_122
-+    structure URef = gs_131
-+    signature UTF8 = gs_129
-+    structure UTF8 = gs_130
-+    structure UnivariateStats = gs_97
-+    structure WordHashTable = gs_110
-+    structure WordRedBlackMap = gs_80
-+    structure WordRedBlackSet = gs_79
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/Util/time-limit.mlb smlnj-lib-mlton/Util/time-limit.mlb
-*** smlnj-lib/Util/time-limit.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Util/time-limit.mlb	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 0 ****
---- 1,16 ----
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit warn"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   $(SML_LIB)/basis/basis.mlb
-+   $(SML_LIB)/basis/mlton.mlb
-+   engine.mlton.sml
-+   time-limit.mlton.sml      
-+ in
-+   structure TimeLimit = TimeLimit
-+ end
-+ 
-+ end
-diff -N -C 2 -r smlnj-lib/Util/time-limit.mlton.sml smlnj-lib-mlton/Util/time-limit.mlton.sml
-*** smlnj-lib/Util/time-limit.mlton.sml	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/Util/time-limit.mlton.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 0 ****
---- 1,24 ----
-+ (* time-limit.mlton.sml
-+  * 
-+  * Copyright (C) 1999-2004 Henry Cejtin, Matthew Fluet, Suresh
-+  *    Jagannathan, and Stephen Weeks.
-+  *
-+  * MLton is released under the GNU General Public License (GPL).
-+  * Please see the file MLton-LICENSE for license information.
-+  *
-+  *)
-+ 
-+ structure TimeLimit:
-+ sig
-+    exception TimeOut
-+    val timeLimit : Time.time -> ('a -> 'b) -> 'a -> 'b
-+ end =
-+ struct
-+    exception TimeOut
-+ 
-+    fun timeLimit t f x =
-+       case Engine.run (Engine.new (fn () => f x), t) of
-+ 	 Engine.Done res => res
-+        | Engine.Raise exn => raise exn
-+        | Engine.TimeOut _ => raise TimeOut
-+ end
-diff -N -C 2 -r smlnj-lib/smlnj-lib.mlb smlnj-lib-mlton/smlnj-lib.mlb
-*** smlnj-lib/smlnj-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- smlnj-lib-mlton/smlnj-lib.mlb	2009-10-02 09:51:07.000000000 -0400
-***************
-*** 0 ****
---- 1,13 ----
-+ local
-+    Controls/controls-lib.mlb
-+    HTML/html-lib.mlb
-+    HashCons/hash-cons-lib.mlb
-+    INet/inet-lib.mlb
-+    PP/pp-lib.mlb
-+    Reactive/reactive-lib.mlb
-+    RegExp/regexp-lib.mlb
-+    Unix/unix-lib.mlb
-+    Util/smlnj-lib.mlb
-+    Util/time-limit.mlb
-+ in
-+ end
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = List
++   end
++   local
++      ord-key-sig.sml
++   in
++      signature gs_1 = ORD_KEY
++   end
++   local
++      signature ORD_KEY = gs_1
++      ord-set-sig.sml
++   in
++      signature gs_2 = ORD_SET
++   end
++   local
++      open l4
++   in
++      structure gs_3 = Int
++   end
++   local
++      lib-base-sig.sml
++   in
++      signature gs_4 = LIB_BASE
++   end
++   local
++      structure Int = gs_3
++      signature LIB_BASE = gs_4
++      lib-base.sml
++   in
++      structure gs_5 = LibBase
++   end
++   local
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_KEY = gs_1
++      signature ORD_SET = gs_2
++      list-set-fn.sml
++   in
++      functor gs_6 = ListSetFn
++   end
++   local
++      signature ORD_KEY = gs_1
++      ord-map-sig.sml
++   in
++      signature gs_7 = ORD_MAP
++   end
++   local
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_KEY = gs_1
++      signature ORD_MAP = gs_7
++      list-map-fn.sml
++   in
++      functor gs_8 = ListMapFn
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_SET = gs_2
++      int-binary-set.sml
++   in
++      structure gs_9 = IntBinarySet
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      signature ORD_MAP = gs_7
++      int-binary-map.sml
++   in
++      structure gs_10 = IntBinaryMap
++   end
++   local
++      prime-sizes.sml
++   in
++      structure gs_11 = PrimeSizes
++   end
++   local
++      open l4
++   in
++      structure gs_12 = Array
++   end
++   local
++      open l4
++   in
++      structure gs_13 = ArraySlice
++   end
++   local
++      open l4
++   in
++      structure gs_14 = General
++   end
++   local
++      dynamic-array-sig.sml
++   in
++      signature gs_15 = DYNAMIC_ARRAY
++   end
++   local
++      structure Array = gs_12
++      structure ArraySlice = gs_13
++      signature DYNAMIC_ARRAY = gs_15
++      structure General = gs_14
++      structure Int = gs_3
++      dynamic-array.sml
++   in
++      structure gs_16 = DynamicArray
++   end
++   local
++      io-util-sig.sml
++   in
++      signature gs_17 = IO_UTIL
++   end
++   local
++      splaytree-sig.sml
++   in
++      signature gs_18 = SPLAY_TREE
++   end
++   local
++      signature SPLAY_TREE = gs_18
++      splaytree.sml
++   in
++      structure gs_19 = SplayTree
++   end
++   local
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_KEY = gs_1
++      signature ORD_SET = gs_2
++      structure SplayTree = gs_19
++      splay-set-fn.sml
++   in
++      functor gs_20 = SplaySetFn
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_KEY = gs_1
++      signature ORD_MAP = gs_7
++      structure SplayTree = gs_19
++      splay-map-fn.sml
++   in
++      functor gs_21 = SplayMapFn
++   end
++   local
++      open l4
++   in
++      structure gs_22 = TextIO
++   end
++   local
++      structure Int = gs_3
++      structure List = gs_0
++      structure TextIO = gs_22
++      ansi-term.sml
++   in
++      structure gs_23 = ANSITerm
++   end
++   local
++      signature IO_UTIL = gs_17
++      structure TextIO = gs_22
++      io-util.sml
++   in
++      structure gs_24 = IOUtil
++   end
++   local
++      plist-sig.sml
++   in
++      signature gs_25 = PROP_LIST
++   end
++   local
++      open l4
++   in
++      structure gs_26 = Substring
++   end
++   local
++      open l4
++   in
++      structure gs_27 = StringCvt
++   end
++   local
++      open l4
++   in
++      structure gs_28 = String
++   end
++   local
++      open l4
++   in
++      structure gs_29 = Char
++   end
++   local
++      getopt-sig.sml
++   in
++      signature gs_30 = GET_OPT
++   end
++   local
++      structure Char = gs_29
++      signature GET_OPT = gs_30
++      structure Int = gs_3
++      structure List = gs_0
++      structure String = gs_28
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      getopt.sml
++   in
++      structure gs_31 = GetOpt
++   end
++   local
++      interval-domain-sig.sml
++   in
++      signature gs_32 = INTERVAL_DOMAIN
++   end
++   local
++      signature INTERVAL_DOMAIN = gs_32
++      interval-set-sig.sml
++   in
++      signature gs_33 = INTERVAL_SET
++   end
++   local
++      structure StringCvt = gs_27
++      parser-comb-sig.sml
++   in
++      signature gs_34 = PARSER_COMB
++   end
++   local
++      open l4
++   in
++      structure gs_35 = Word8
++   end
++   local
++      open l4
++   in
++      structure gs_36 = CharVector
++   end
++   local
++      open l4
++   in
++      structure gs_37 = LargeWord
++   end
++   local
++      open l4
++   in
++      structure gs_38 = LargeInt
++   end
++   local
++      open l4
++   in
++      structure gs_39 = Word
++   end
++   local
++      open l4
++   in
++      structure gs_40 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_41 = LargeReal
++   end
++   local
++      atom-sig.sml
++   in
++      signature gs_42 = ATOM
++   end
++   local
++      open l4
++   in
++      structure gs_43 = Unsafe
++   end
++   local
++      structure Char = gs_29
++      structure Substring = gs_26
++      structure Unsafe = gs_43
++      structure Word = gs_39
++      hash-string.sml
++   in
++      structure gs_44 = HashString
++   end
++   local
++      signature ATOM = gs_42
++      structure Array = gs_12
++      structure HashString = gs_44
++      structure String = gs_28
++      structure Substring = gs_26
++      structure Word = gs_39
++      atom.sml
++   in
++      structure gs_45 = Atom
++   end
++   local
++      structure Atom = gs_45
++      structure Int = gs_3
++      structure LargeInt = gs_38
++      structure LargeReal = gs_41
++      structure LargeWord = gs_37
++      structure Real = gs_40
++      structure Word = gs_39
++      structure Word8 = gs_35
++      format-sig.sml
++   in
++      signature gs_46 = FORMAT
++   end
++   local
++      structure Int = gs_3
++      structure String = gs_28
++      structure StringCvt = gs_27
++      real-format.sml
++   in
++      structure gs_47 = RealFormat
++   end
++   local
++      structure Atom = gs_45
++      structure Char = gs_29
++      structure Int = gs_3
++      structure LargeInt = gs_38
++      structure LargeReal = gs_41
++      structure LargeWord = gs_37
++      structure Real = gs_40
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      structure Word = gs_39
++      structure Word8 = gs_35
++      fmt-fields.sml
++   in
++      structure gs_48 = FmtFields
++   end
++   local
++      structure Atom = gs_45
++      structure Char = gs_29
++      structure CharVector = gs_36
++      signature FORMAT = gs_46
++      structure FmtFields = gs_48
++      structure Int = gs_3
++      structure LargeInt = gs_38
++      structure LargeWord = gs_37
++      structure Real = gs_40
++      structure RealFormat = gs_47
++      structure String = gs_28
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      structure Word = gs_39
++      structure Word8 = gs_35
++      format.sml
++   in
++      structure gs_49 = Format
++   end
++   local
++      priority-sig.sml
++   in
++      signature gs_50 = PRIORITY
++   end
++   local
++      hash-key-sig.sml
++   in
++      signature gs_51 = HASH_KEY
++   end
++   local
++      signature HASH_KEY = gs_51
++      mono-hash-table-sig.sml
++   in
++      signature gs_52 = MONO_HASH_TABLE
++   end
++   local
++      structure Array = gs_12
++      structure Word = gs_39
++      hash-table-rep.sml
++   in
++      structure gs_53 = HashTableRep
++   end
++   local
++      structure Array = gs_12
++      structure HashTableRep = gs_53
++      signature MONO_HASH_TABLE = gs_52
++      structure Word = gs_39
++      int-hash-table.sml
++   in
++      structure gs_54 = IntHashTable
++   end
++   local
++      open l4
++   in
++      signature gs_55 = MONO_ARRAY
++   end
++   local
++      signature MONO_ARRAY = gs_55
++      bit-array-sig.sml
++   in
++      signature gs_56 = BIT_ARRAY
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_KEY = gs_1
++      signature ORD_SET = gs_2
++      redblack-set-fn.sml
++   in
++      functor gs_57 = RedBlackSetFn
++   end
++   local
++      structure Atom = gs_45
++      functor RedBlackSetFn = gs_57
++      atom-redblack-set.sml
++   in
++      structure gs_58 = AtomRedBlackSet
++   end
++   local
++      structure AtomRedBlackSet = gs_58
++      atom-set.sml
++   in
++      structure gs_59 = AtomSet
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_KEY = gs_1
++      signature ORD_MAP = gs_7
++      redblack-map-fn.sml
++   in
++      functor gs_60 = RedBlackMapFn
++   end
++   local
++      structure Atom = gs_45
++      functor RedBlackMapFn = gs_60
++      atom-redblack-map.sml
++   in
++      structure gs_61 = AtomRedBlackMap
++   end
++   local
++      structure AtomRedBlackMap = gs_61
++      atom-map.sml
++   in
++      structure gs_62 = AtomMap
++   end
++   local
++      structure List = gs_0
++      signature PROP_LIST = gs_25
++      plist.sml
++   in
++      structure gs_63 = PropList
++   end
++   local
++      open l4
++   in
++      structure gs_64 = Vector
++   end
++   local
++      char-map-sig.sml
++   in
++      signature gs_65 = CHAR_MAP
++   end
++   local
++      structure Array = gs_12
++      signature CHAR_MAP = gs_65
++      structure Char = gs_29
++      structure String = gs_28
++      structure Vector = gs_64
++      char-map.sml
++   in
++      structure gs_66 = CharMap
++   end
++   local
++      list-xprod-sig.sml
++   in
++      signature gs_67 = LIST_XPROD
++   end
++   local
++      signature ORD_KEY = gs_1
++      graph-scc-sig.sml
++   in
++      signature gs_68 = GRAPH_SCC
++   end
++   local
++      signature GRAPH_SCC = gs_68
++      structure List = gs_0
++      signature ORD_KEY = gs_1
++      functor RedBlackMapFn = gs_60
++      graph-scc-fn.sml
++   in
++      functor gs_69 = GraphSCCFn
++   end
++   local
++      structure Array = gs_12
++      signature HASH_KEY = gs_51
++      structure HashTableRep = gs_53
++      signature MONO_HASH_TABLE = gs_52
++      structure Word = gs_39
++      hash-table-fn.sml
++   in
++      functor gs_70 = HashTableFn
++   end
++   local
++      structure Atom = gs_45
++      functor HashTableFn = gs_70
++      atom-table.sml
++   in
++      structure gs_71 = AtomTable
++   end
++   local
++      structure StringCvt = gs_27
++      list-format-sig.sml
++   in
++      signature gs_72 = LIST_FORMAT
++   end
++   local
++      signature LIST_FORMAT = gs_72
++      structure String = gs_28
++      structure StringCvt = gs_27
++      list-format.sml
++   in
++      structure gs_73 = ListFormat
++   end
++   local
++      open l4
++   in
++      signature gs_74 = MONO_VECTOR
++   end
++   local
++      signature MONO_VECTOR = gs_74
++      bit-vector-sig.sml
++   in
++      signature gs_75 = BIT_VECTOR
++   end
++   local
++      signature PARSER_COMB = gs_34
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      parser-comb.sml
++   in
++      structure gs_76 = ParserComb
++   end
++   local
++      signature HASH_KEY = gs_51
++      mono-hash2-table-sig.sml
++   in
++      signature gs_77 = MONO_HASH2_TABLE
++   end
++   local
++      signature INTERVAL_DOMAIN = gs_32
++      signature INTERVAL_SET = gs_33
++      structure List = gs_0
++      interval-set-fn.sml
++   in
++      functor gs_78 = IntervalSetFn
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_SET = gs_2
++      structure Word = gs_39
++      word-redblack-set.sml
++   in
++      structure gs_79 = WordRedBlackSet
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_MAP = gs_7
++      structure Word = gs_39
++      word-redblack-map.sml
++   in
++      structure gs_80 = WordRedBlackMap
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_SET = gs_2
++      int-list-set.sml
++   in
++      structure gs_81 = IntListSet
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_MAP = gs_7
++      int-list-map.sml
++   in
++      structure gs_82 = IntListMap
++   end
++   local
++      open l4
++   in
++      structure gs_83 = OS
++   end
++   local
++      path-util-sig.sml
++   in
++      signature gs_84 = PATH_UTIL
++   end
++   local
++      structure OS = gs_83
++      signature PATH_UTIL = gs_84
++      path-util.sml
++   in
++      structure gs_85 = PathUtil
++   end
++   local
++      structure LibBase = gs_5
++      structure List = gs_0
++      signature ORD_KEY = gs_1
++      signature ORD_SET = gs_2
++      binary-set-fn.sml
++   in
++      functor gs_86 = BinarySetFn
++   end
++   local
++      structure LibBase = gs_5
++      signature ORD_KEY = gs_1
++      signature ORD_MAP = gs_7
++      binary-map-fn.sml
++   in
++      functor gs_87 = BinaryMapFn
++   end
++   local
++      open l4
++   in
++      structure gs_88 = Math
++   end
++   local
++      open l4
++   in
++      structure gs_89 = PackWord32Big
++   end
++   local
++      open l4
++   in
++      structure gs_90 = Word8Vector
++   end
++   local
++      open l4
++   in
++      structure gs_91 = Word8Array
++   end
++   local
++      open l4
++   in
++      structure gs_92 = Word31
++   end
++   local
++      open l4
++   in
++      structure gs_93 = Byte
++   end
++   local
++      random-sig.sml
++   in
++      signature gs_94 = RANDOM
++   end
++   local
++      structure Array = gs_12
++      structure Byte = gs_93
++      structure LargeWord = gs_37
++      structure LibBase = gs_5
++      structure PackWord32Big = gs_89
++      signature RANDOM = gs_94
++      structure Word31 = gs_92
++      structure Word8Array = gs_91
++      structure Word8Vector = gs_90
++      random.sml
++   in
++      structure gs_95 = Random
++   end
++   local
++      structure Array = gs_12
++      structure ArraySlice = gs_13
++      structure Random = gs_95
++      structure Real = gs_40
++      structure Unsafe = gs_43
++      structure Word = gs_39
++      real-order-stats.sml
++   in
++      structure gs_96 = RealOrderStats
++   end
++   local
++      structure Array = gs_12
++      structure ArraySlice = gs_13
++      structure Math = gs_88
++      structure RealOrderStats = gs_96
++      structure Unsafe = gs_43
++      univariate-stats.sml
++   in
++      structure gs_97 = UnivariateStats
++   end
++   local
++      signature BIT_ARRAY = gs_56
++      structure Byte = gs_93
++      structure Int = gs_3
++      structure LibBase = gs_5
++      structure List = gs_0
++      structure Word = gs_39
++      structure Word8 = gs_35
++      structure Word8Array = gs_91
++      structure Word8Vector = gs_90
++      bit-array.sml
++   in
++      structure gs_98 = BitArray
++   end
++   local
++      structure Array = gs_12
++      signature MONO_ARRAY = gs_55
++      structure Vector = gs_64
++      mono-array-fn.sml
++   in
++      functor gs_99 = MonoArrayFn
++   end
++   local
++      signature MONO_ARRAY = gs_55
++      bsearch-fn.sml
++   in
++      functor gs_100 = BSearchFn
++   end
++   local
++      mono-dynamic-array-sig.sml
++   in
++      signature gs_101 = MONO_DYNAMIC_ARRAY
++   end
++   local
++      open l4
++   in
++      structure gs_102 = Bool
++   end
++   local
++      structure StringCvt = gs_27
++      format-comb-sig.sml
++   in
++      signature gs_103 = FORMAT_COMB
++   end
++   local
++      structure Bool = gs_102
++      structure Char = gs_29
++      signature FORMAT_COMB = gs_103
++      structure Int = gs_3
++      structure List = gs_0
++      structure Real = gs_40
++      structure String = gs_28
++      structure StringCvt = gs_27
++      format-comb.sml
++   in
++      structure gs_104 = FormatComb
++   end
++   local
++      queue-sig.sml
++   in
++      signature gs_105 = QUEUE
++   end
++   local
++      fifo-sig.sml
++   in
++      signature gs_106 = FIFO
++   end
++   local
++      signature FIFO = gs_106
++      structure List = gs_0
++      fifo.sml
++   in
++      structure gs_107 = Fifo
++   end
++   local
++      structure Fifo = gs_107
++      signature QUEUE = gs_105
++      queue.sml
++   in
++      structure gs_108 = Queue
++   end
++   local
++      structure Array = gs_12
++      signature HASH_KEY = gs_51
++      structure HashTableRep = gs_53
++      signature MONO_HASH2_TABLE = gs_77
++      structure Word = gs_39
++      hash2-table-fn.sml
++   in
++      functor gs_109 = Hash2TableFn
++   end
++   local
++      structure Array = gs_12
++      structure HashTableRep = gs_53
++      signature MONO_HASH_TABLE = gs_52
++      structure Word = gs_39
++      word-hash-table.sml
++   in
++      structure gs_110 = WordHashTable
++   end
++   local
++      structure Atom = gs_45
++      structure AtomTable = gs_71
++      structure List = gs_0
++      keyword-fn.sml
++   in
++      functor gs_111 = KeywordFn
++   end
++   local
++      mono-priorityq-sig.sml
++   in
++      signature gs_112 = MONO_PRIORITYQ
++   end
++   local
++      structure List = gs_0
++      signature MONO_PRIORITYQ = gs_112
++      signature PRIORITY = gs_50
++      left-priorityq-fn.sml
++   in
++      functor gs_113 = LeftPriorityQFn
++   end
++   local
++      hash-table-sig.sml
++   in
++      signature gs_114 = HASH_TABLE
++   end
++   local
++      structure Array = gs_12
++      signature HASH_TABLE = gs_114
++      structure HashTableRep = gs_53
++      structure Word = gs_39
++      hash-table.sml
++   in
++      structure gs_115 = HashTable
++   end
++   local
++      structure General = gs_14
++      structure Int = gs_3
++      signature MONO_ARRAY = gs_55
++      signature MONO_DYNAMIC_ARRAY = gs_101
++      dynamic-array-fn.sml
++   in
++      functor gs_116 = DynamicArrayFn
++   end
++   local
++      signature MONO_ARRAY = gs_55
++      mono-array-sort-sig.sml
++   in
++      signature gs_117 = MONO_ARRAY_SORT
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      signature ORD_SET = gs_2
++      int-redblack-set.sml
++   in
++      structure gs_118 = IntRedBlackSet
++   end
++   local
++      structure Int = gs_3
++      structure LibBase = gs_5
++      signature ORD_MAP = gs_7
++      int-redblack-map.sml
++   in
++      structure gs_119 = IntRedBlackMap
++   end
++   local
++      array-sort-sig.sml
++   in
++      signature gs_120 = ARRAY_SORT
++   end
++   local
++      signature ARRAY_SORT = gs_120
++      structure Array = gs_12
++      structure Int = gs_3
++      structure Unsafe = gs_43
++      array-qsort.sml
++   in
++      structure gs_121 = ArrayQSort
++   end
++   local
++      uref-sig.sml
++   in
++      signature gs_122 = UREF
++   end
++   local
++      signature UREF = gs_122
++      simple-uref.sml
++   in
++      structure gs_123 = SimpleURef
++   end
++   local
++      listsort-sig.sml
++   in
++      signature gs_124 = LIST_SORT
++   end
++   local
++      signature LIST_SORT = gs_124
++      structure LibBase = gs_5
++      list-mergesort.sml
++   in
++      structure gs_125 = ListMergeSort
++   end
++   local
++      structure Int = gs_3
++      signature MONO_ARRAY = gs_55
++      signature MONO_ARRAY_SORT = gs_117
++      array-qsort-fn.sml
++   in
++      functor gs_126 = ArrayQSortFn
++   end
++   local
++      structure Atom = gs_45
++      functor BinarySetFn = gs_86
++      atom-binary-set.sml
++   in
++      structure gs_127 = AtomBinarySet
++   end
++   local
++      structure Atom = gs_45
++      functor BinaryMapFn = gs_87
++      atom-binary-map.sml
++   in
++      structure gs_128 = AtomBinaryMap
++   end
++   local
++      structure StringCvt = gs_27
++      utf8-sig.sml
++   in
++      signature gs_129 = UTF8
++   end
++   local
++      structure Char = gs_29
++      structure String = gs_28
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      signature UTF8 = gs_129
++      structure Word = gs_39
++      utf8.sml
++   in
++      structure gs_130 = UTF8
++   end
++   local
++      signature UREF = gs_122
++      uref.sml
++   in
++      structure gs_131 = URef
++   end
++   local
++      structure Atom = gs_45
++      structure Int = gs_3
++      structure LargeInt = gs_38
++      structure LargeReal = gs_41
++      structure LargeWord = gs_37
++      structure Real = gs_40
++      structure StringCvt = gs_27
++      structure Word = gs_39
++      structure Word8 = gs_35
++      scan-sig.sml
++   in
++      signature gs_132 = SCAN
++   end
++   local
++      structure Bool = gs_102
++      structure Char = gs_29
++      structure FmtFields = gs_48
++      structure Int = gs_3
++      structure LargeInt = gs_38
++      structure LargeReal = gs_41
++      signature SCAN = gs_132
++      structure StringCvt = gs_27
++      structure Substring = gs_26
++      structure Word8Array = gs_91
++      scan.sml
++   in
++      structure gs_133 = Scan
++   end
++   local
++      open l4
++   in
++      structure gs_134 = Int32
++   end
++   local
++      structure Word31 = gs_92
++      rand-sig.sml
++   in
++      signature gs_135 = RAND
++   end
++   local
++      structure Int32 = gs_134
++      structure LibBase = gs_5
++      signature RAND = gs_135
++      structure Real = gs_40
++      structure Word31 = gs_92
++      rand.sml
++   in
++      structure gs_136 = Rand
++   end
++   local
++      signature LIST_XPROD = gs_67
++      list-xprod.sml
++   in
++      structure gs_137 = ListXProd
++   end
++in
++   structure ANSITerm = gs_23
++   signature ARRAY_SORT = gs_120
++   signature ATOM = gs_42
++   structure ArrayQSort = gs_121
++   functor ArrayQSortFn = gs_126
++   structure Atom = gs_45
++   structure AtomBinaryMap = gs_128
++   structure AtomBinarySet = gs_127
++   structure AtomMap = gs_62
++   structure AtomRedBlackMap = gs_61
++   structure AtomRedBlackSet = gs_58
++   structure AtomSet = gs_59
++   structure AtomTable = gs_71
++   signature BIT_ARRAY = gs_56
++   signature BIT_VECTOR = gs_75
++   functor BSearchFn = gs_100
++   functor BinaryMapFn = gs_87
++   functor BinarySetFn = gs_86
++   structure BitArray = gs_98
++   signature CHAR_MAP = gs_65
++   structure CharMap = gs_66
++   signature DYNAMIC_ARRAY = gs_15
++   structure DynamicArray = gs_16
++   functor DynamicArrayFn = gs_116
++   signature FIFO = gs_106
++   signature FORMAT = gs_46
++   signature FORMAT_COMB = gs_103
++   structure Fifo = gs_107
++   structure Format = gs_49
++   structure FormatComb = gs_104
++   signature GET_OPT = gs_30
++   signature GRAPH_SCC = gs_68
++   structure GetOpt = gs_31
++   functor GraphSCCFn = gs_69
++   signature HASH_KEY = gs_51
++   signature HASH_TABLE = gs_114
++   functor Hash2TableFn = gs_109
++   structure HashString = gs_44
++   structure HashTable = gs_115
++   functor HashTableFn = gs_70
++   signature INTERVAL_DOMAIN = gs_32
++   signature INTERVAL_SET = gs_33
++   structure IOUtil = gs_24
++   signature IO_UTIL = gs_17
++   structure IntBinaryMap = gs_10
++   structure IntBinarySet = gs_9
++   structure IntHashTable = gs_54
++   structure IntListMap = gs_82
++   structure IntListSet = gs_81
++   structure IntRedBlackMap = gs_119
++   structure IntRedBlackSet = gs_118
++   functor IntervalSetFn = gs_78
++   functor KeywordFn = gs_111
++   signature LIB_BASE = gs_4
++   signature LIST_FORMAT = gs_72
++   signature LIST_SORT = gs_124
++   signature LIST_XPROD = gs_67
++   functor LeftPriorityQFn = gs_113
++   structure LibBase = gs_5
++   structure ListFormat = gs_73
++   functor ListMapFn = gs_8
++   structure ListMergeSort = gs_125
++   functor ListSetFn = gs_6
++   structure ListXProd = gs_137
++   signature MONO_ARRAY_SORT = gs_117
++   signature MONO_DYNAMIC_ARRAY = gs_101
++   signature MONO_HASH2_TABLE = gs_77
++   signature MONO_HASH_TABLE = gs_52
++   signature MONO_PRIORITYQ = gs_112
++   functor MonoArrayFn = gs_99
++   signature ORD_KEY = gs_1
++   signature ORD_MAP = gs_7
++   signature ORD_SET = gs_2
++   signature PARSER_COMB = gs_34
++   signature PATH_UTIL = gs_84
++   signature PRIORITY = gs_50
++   signature PROP_LIST = gs_25
++   structure ParserComb = gs_76
++   structure PathUtil = gs_85
++   structure PrimeSizes = gs_11
++   structure PropList = gs_63
++   signature QUEUE = gs_105
++   structure Queue = gs_108
++   signature RAND = gs_135
++   signature RANDOM = gs_94
++   structure Rand = gs_136
++   structure Random = gs_95
++   structure RealOrderStats = gs_96
++   functor RedBlackMapFn = gs_60
++   functor RedBlackSetFn = gs_57
++   signature SCAN = gs_132
++   signature SPLAY_TREE = gs_18
++   structure Scan = gs_133
++   structure SimpleURef = gs_123
++   functor SplayMapFn = gs_21
++   functor SplaySetFn = gs_20
++   structure SplayTree = gs_19
++   signature UREF = gs_122
++   structure URef = gs_131
++   signature UTF8 = gs_129
++   structure UTF8 = gs_130
++   structure UnivariateStats = gs_97
++   structure WordHashTable = gs_110
++   structure WordRedBlackMap = gs_80
++   structure WordRedBlackSet = gs_79
++end
++end
++
++end
+diff --git a/Util/time-limit.mlb b/Util/time-limit.mlb
+new file mode 100644
+index 0000000..c4ca078
+--- /dev/null
++++ b/Util/time-limit.mlb
+@@ -0,0 +1,16 @@
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit warn"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  $(SML_LIB)/basis/basis.mlb
++  $(SML_LIB)/basis/mlton.mlb
++  engine.mlton.sml
++  time-limit.mlton.sml
++in
++  structure TimeLimit = TimeLimit
++end
++
++end
+diff --git a/Util/time-limit.mlton.sml b/Util/time-limit.mlton.sml
+new file mode 100644
+index 0000000..0f585b7
+--- /dev/null
++++ b/Util/time-limit.mlton.sml
+@@ -0,0 +1,24 @@
++(* time-limit.mlton.sml
++ *
++ * Copyright (C) 1999-2004 Henry Cejtin, Matthew Fluet, Suresh
++ *    Jagannathan, and Stephen Weeks.
++ *
++ * MLton is released under the GNU General Public License (GPL).
++ * Please see the file MLton-LICENSE for license information.
++ *
++ *)
++
++structure TimeLimit:
++sig
++   exception TimeOut
++   val timeLimit : Time.time -> ('a -> 'b) -> 'a -> 'b
++end =
++struct
++   exception TimeOut
++
++   fun timeLimit t f x =
++      case Engine.run (Engine.new (fn () => f x), t) of
++	 Engine.Done res => res
++       | Engine.Raise exn => raise exn
++       | Engine.TimeOut _ => raise TimeOut
++end
+diff --git a/smlnj-lib.mlb b/smlnj-lib.mlb
+new file mode 100644
+index 0000000..b59979f
+--- /dev/null
++++ b/smlnj-lib.mlb
+@@ -0,0 +1,15 @@
++local
++   Controls/controls-lib.mlb
++   HTML/html-lib.mlb
++   HTML4/html4-lib.mlb
++   HashCons/hash-cons-lib.mlb
++   INet/inet-lib.mlb
++   JSON/json-lib.mlb
++   PP/pp-lib.mlb
++   Reactive/reactive-lib.mlb
++   RegExp/regexp-lib.mlb
++   Unix/unix-lib.mlb
++   Util/smlnj-lib.mlb
++   Util/time-limit.mlb
++in
++end
Index: lib/smlnj-lib/smlnj-lib.tgz
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream
Index: lib/mllpt-lib/.ignore
===================================================================
--- lib/mllpt-lib/.ignore	(revision 0)
+++ lib/mllpt-lib/.ignore	(revision 7552)
@@ -0,0 +1 @@
+ml-lpt
Index: lib/mllpt-lib/ml-lpt.patch
===================================================================
--- lib/mllpt-lib/ml-lpt.patch	(revision 0)
+++ lib/mllpt-lib/ml-lpt.patch	(revision 7552)
@@ -0,0 +1,7 @@
+diff --git a/lib/mllpt-lib.mlb b/lib/mllpt-lib.mlb
+new file mode 100644
+index 0000000..0d6bf2a
+--- /dev/null
++++ b/lib/mllpt-lib.mlb
+@@ -0,0 +1 @@
++ml-lpt-lib.mlb
Index: lib/mllpt-lib/ml-lpt.tgz
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream

Property changes on: lib/mllpt-lib/ml-lpt.tgz
___________________________________________________________________
Added: svn:mime-type
   + application/octet-stream

Index: lib/mllpt-lib/Makefile
===================================================================
--- lib/mllpt-lib/Makefile	(revision 0)
+++ lib/mllpt-lib/Makefile	(revision 7552)
@@ -0,0 +1,26 @@
+## Copyright (C) 2011 Matthew Fluet.
+ #
+ # MLton is released under a BSD-style license.
+ # See the file MLton-LICENSE for details.
+ ##
+
+all: ml-lpt/README
+
+ml-lpt/README: ml-lpt.tgz ml-lpt.patch
+	rm -rf ml-lpt
+	gzip -dc ml-lpt.tgz | tar xf -
+	chmod -R a+r ml-lpt
+	chmod -R g-s ml-lpt
+	patch -s -d ml-lpt -p1 < ml-lpt.patch
+
+.PHONY: clean
+clean:
+	../../bin/clean
+
+.PHONY: patch
+patch:
+	mv ml-lpt ml-lpt-mlton
+	gzip -dc ml-lpt.tgz | tar xf -
+	diff -Naur ml-lpt ml-lpt-mlton >ml-lpt.patch || exit 0
+	rm -rf ml-lpt
+	mv ml-lpt-mlton ml-lpt

Property changes on: lib/mllpt-lib
___________________________________________________________________
Added: svn:ignore
   + ml-lpt


Index: lib/mlrisc-lib/MLRISC.patch
===================================================================
--- lib/mlrisc-lib/MLRISC.patch	(revision 7524)
+++ lib/mlrisc-lib/MLRISC.patch	(revision 7552)
@@ -1,46756 +1,17315 @@
-diff -N -C 2 -r MLRISC/Doc/html/mltex2html MLRISC-mlton/Doc/html/mltex2html
-*** MLRISC/Doc/html/mltex2html	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/Doc/html/mltex2html	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,3 ****
-! #!/usr/local/bin/perl
-  #
-  # This tool generates HTML pages in my own format given a stylized Latex file.
---- 1,3 ----
-! #!/usr/bin/perl
-  #
-  # This tool generates HTML pages in my own format given a stylized Latex file.
-diff -N -C 2 -r MLRISC/README.mlton MLRISC-mlton/README.mlton
-*** MLRISC/README.mlton	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/README.mlton	2010-04-02 15:25:14.000000000 -0400
-***************
-*** 0 ****
---- 1,8 ----
-+ The following changes were made to the MLRISC Library, in addition to
-+ deriving the {{{.mlb}}} file from the {{{.cm}}} files:
-+  * eliminate or-patterns: Duplicate the whole match ({{{p => e}}}) at each of the patterns.
-+  * eliminate vector constants: Change {{{#[}}} to {{{Vector.fromList [}}}.
-+  * eliminate {{{withtype}}} in signatures.
-+  * eliminate sequential {{{withtype}}} expansions: Most could be rewritten as a sequence of type definitions and datatype definitions.
-+  * eliminate higher-order functors: Every higher-order functor definition and application could be uncurried in the obvious way.
-+  * eliminate {{{where <str> = <str>}}}: Quite painful to expand out all the flexible types in the respective structures.  Furthermore, many of the implied type equalities aren't needed, but it's too hard to pick out the right ones.
-diff -N -C 2 -r MLRISC/Tools/Parser/mdl.grm.desc MLRISC-mlton/Tools/Parser/mdl.grm.desc
-*** MLRISC/Tools/Parser/mdl.grm.desc	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/Tools/Parser/mdl.grm.desc	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 0 ****
---- 1,28165 ----
-+ 31 shift/reduce conflicts
-+ 5 rules not reduced
-+ 
-+ warning: rule <mldecls : > will never be reduced
-+ warning: rule <mldecls : mldecl mldecls > will never be reduced
-+ warning: rule <scopedmldecls : newScope mldecls oldScope > will never be reduced
-+ warning: rule <branching : BRANCHING FORWARDS > will never be reduced
-+ warning: rule <branching : BRANCHING BACKWARDS > will never be reduced
-+ error:  state 126: shift/reduce conflict (shift SYMBOL, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift ID, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift CELLSET, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift NOT, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift DEREF, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift TIMES, reduce by rule 311)
-+ error:  state 262: shift/reduce conflict (shift SYMBOL, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift ID, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift INSTRUCTION, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift CELLSET, reduce by rule 373)
-+ error:  state 282: shift/reduce conflict (shift INT, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift WORD, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift SYMBOL, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift ID, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift CELLSET, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift LPAREN, reduce by rule 274)
-+ error:  state 412: shift/reduce conflict (shift BAR, reduce by rule 341)
-+ error:  state 428: shift/reduce conflict (shift RPAREN, reduce by rule 417)
-+ error:  state 493: shift/reduce conflict (shift SYMBOL, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift ID, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift INSTRUCTION, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift CELLSET, reduce by rule 379)
-+ error:  state 516: shift/reduce conflict (shift LDQUOTE, reduce by rule 186)
-+ error:  state 653: shift/reduce conflict (shift CONCAT, reduce by rule 50)
-+ error:  state 653: shift/reduce conflict (shift TIMES, reduce by rule 50)
-+ error:  state 661: shift/reduce conflict (shift AND, reduce by rule 165)
-+ error:  state 690: shift/reduce conflict (shift AND, reduce by rule 165)
-+ error:  state 704: shift/reduce conflict (shift AND, reduce by rule 165)
-+ error:  state 705: shift/reduce conflict (shift AND, reduce by rule 165)
-+ error:  state 712: shift/reduce conflict (shift LATENCY, reduce by rule 146)
-+ error:  state 725: shift/reduce conflict (shift PIPELINE, reduce by rule 148)
-+ 
-+ state 0:
-+ 
-+ 	architecture : . decls 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	LOCAL	shift 38
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 	EOF	reduce by rule 1
-+ 
-+ 	architecture	goto 756
-+ 	decls	goto 7
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 1:
-+ 
-+ 	mymddecl : assemblycase . ASSEMBLY 
-+ 
-+ 	ASSEMBLY	shift 40
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 2:
-+ 
-+ 	mddecl : mymddecl .  (reduce by rule 11)
-+ 
-+ 	ARCHITECTURE	reduce by rule 11
-+ 	END	reduce by rule 11
-+ 	LOCAL	reduce by rule 11
-+ 	IN	reduce by rule 11
-+ 	DATATYPE	reduce by rule 11
-+ 	TYPE	reduce by rule 11
-+ 	RPAREN	reduce by rule 11
-+ 	SEMICOLON	reduce by rule 11
-+ 	STORAGE	reduce by rule 11
-+ 	LOCATIONS	reduce by rule 11
-+ 	STRUCTURE	reduce by rule 11
-+ 	FUNCTOR	reduce by rule 11
-+ 	SIGNATURE	reduce by rule 11
-+ 	SHARING	reduce by rule 11
-+ 	INSTRUCTION	reduce by rule 11
-+ 	VLIW	reduce by rule 11
-+ 	SUPERSCALAR	reduce by rule 11
-+ 	FUN	reduce by rule 11
-+ 	VAL	reduce by rule 11
-+ 	INCLUDE	reduce by rule 11
-+ 	OPEN	reduce by rule 11
-+ 	LITTLE	reduce by rule 11
-+ 	BIG	reduce by rule 11
-+ 	PIPELINE	reduce by rule 11
-+ 	LOWERCASE	reduce by rule 11
-+ 	UPPERCASE	reduce by rule 11
-+ 	VERBATIM	reduce by rule 11
-+ 	RTL	reduce by rule 11
-+ 	NONFIX	reduce by rule 11
-+ 	INFIX	reduce by rule 11
-+ 	INFIXR	reduce by rule 11
-+ 	DEBUG	reduce by rule 11
-+ 	RESOURCE	reduce by rule 11
-+ 	CPU	reduce by rule 11
-+ 	LATENCY	reduce by rule 11
-+ 	EXCEPTION	reduce by rule 11
-+ 	EOF	reduce by rule 11
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 3:
-+ 
-+ 	decl : mddecl . optsemi 
-+ 
-+ 	ARCHITECTURE	reduce by rule 5
-+ 	END	reduce by rule 5
-+ 	LOCAL	reduce by rule 5
-+ 	IN	reduce by rule 5
-+ 	DATATYPE	reduce by rule 5
-+ 	TYPE	reduce by rule 5
-+ 	RPAREN	reduce by rule 5
-+ 	SEMICOLON	shift 42
-+ 	STORAGE	reduce by rule 5
-+ 	LOCATIONS	reduce by rule 5
-+ 	STRUCTURE	reduce by rule 5
-+ 	FUNCTOR	reduce by rule 5
-+ 	SIGNATURE	reduce by rule 5
-+ 	SHARING	reduce by rule 5
-+ 	INSTRUCTION	reduce by rule 5
-+ 	VLIW	reduce by rule 5
-+ 	SUPERSCALAR	reduce by rule 5
-+ 	FUN	reduce by rule 5
-+ 	VAL	reduce by rule 5
-+ 	INCLUDE	reduce by rule 5
-+ 	OPEN	reduce by rule 5
-+ 	LITTLE	reduce by rule 5
-+ 	BIG	reduce by rule 5
-+ 	PIPELINE	reduce by rule 5
-+ 	LOWERCASE	reduce by rule 5
-+ 	UPPERCASE	reduce by rule 5
-+ 	VERBATIM	reduce by rule 5
-+ 	RTL	reduce by rule 5
-+ 	NONFIX	reduce by rule 5
-+ 	INFIX	reduce by rule 5
-+ 	INFIXR	reduce by rule 5
-+ 	DEBUG	reduce by rule 5
-+ 	RESOURCE	reduce by rule 5
-+ 	CPU	reduce by rule 5
-+ 	LATENCY	reduce by rule 5
-+ 	EXCEPTION	reduce by rule 5
-+ 	EOF	reduce by rule 5
-+ 
-+ 	optsemi	goto 41
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 4:
-+ 
-+ 	mldecl : mymldecl .  (reduce by rule 10)
-+ 
-+ 	ARCHITECTURE	reduce by rule 10
-+ 	END	reduce by rule 10
-+ 	LOCAL	reduce by rule 10
-+ 	IN	reduce by rule 10
-+ 	DATATYPE	reduce by rule 10
-+ 	TYPE	reduce by rule 10
-+ 	RPAREN	reduce by rule 10
-+ 	SEMICOLON	reduce by rule 10
-+ 	STORAGE	reduce by rule 10
-+ 	LOCATIONS	reduce by rule 10
-+ 	STRUCTURE	reduce by rule 10
-+ 	FUNCTOR	reduce by rule 10
-+ 	SIGNATURE	reduce by rule 10
-+ 	SHARING	reduce by rule 10
-+ 	INSTRUCTION	reduce by rule 10
-+ 	VLIW	reduce by rule 10
-+ 	SUPERSCALAR	reduce by rule 10
-+ 	FUN	reduce by rule 10
-+ 	VAL	reduce by rule 10
-+ 	INCLUDE	reduce by rule 10
-+ 	OPEN	reduce by rule 10
-+ 	LITTLE	reduce by rule 10
-+ 	BIG	reduce by rule 10
-+ 	PIPELINE	reduce by rule 10
-+ 	LOWERCASE	reduce by rule 10
-+ 	UPPERCASE	reduce by rule 10
-+ 	VERBATIM	reduce by rule 10
-+ 	RTL	reduce by rule 10
-+ 	NONFIX	reduce by rule 10
-+ 	INFIX	reduce by rule 10
-+ 	INFIXR	reduce by rule 10
-+ 	DEBUG	reduce by rule 10
-+ 	RESOURCE	reduce by rule 10
-+ 	CPU	reduce by rule 10
-+ 	LATENCY	reduce by rule 10
-+ 	EXCEPTION	reduce by rule 10
-+ 	EOF	reduce by rule 10
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 5:
-+ 
-+ 	decl : mldecl . optsemi 
-+ 
-+ 	ARCHITECTURE	reduce by rule 5
-+ 	END	reduce by rule 5
-+ 	LOCAL	reduce by rule 5
-+ 	IN	reduce by rule 5
-+ 	DATATYPE	reduce by rule 5
-+ 	TYPE	reduce by rule 5
-+ 	RPAREN	reduce by rule 5
-+ 	SEMICOLON	shift 42
-+ 	STORAGE	reduce by rule 5
-+ 	LOCATIONS	reduce by rule 5
-+ 	STRUCTURE	reduce by rule 5
-+ 	FUNCTOR	reduce by rule 5
-+ 	SIGNATURE	reduce by rule 5
-+ 	SHARING	reduce by rule 5
-+ 	INSTRUCTION	reduce by rule 5
-+ 	VLIW	reduce by rule 5
-+ 	SUPERSCALAR	reduce by rule 5
-+ 	FUN	reduce by rule 5
-+ 	VAL	reduce by rule 5
-+ 	INCLUDE	reduce by rule 5
-+ 	OPEN	reduce by rule 5
-+ 	LITTLE	reduce by rule 5
-+ 	BIG	reduce by rule 5
-+ 	PIPELINE	reduce by rule 5
-+ 	LOWERCASE	reduce by rule 5
-+ 	UPPERCASE	reduce by rule 5
-+ 	VERBATIM	reduce by rule 5
-+ 	RTL	reduce by rule 5
-+ 	NONFIX	reduce by rule 5
-+ 	INFIX	reduce by rule 5
-+ 	INFIXR	reduce by rule 5
-+ 	DEBUG	reduce by rule 5
-+ 	RESOURCE	reduce by rule 5
-+ 	CPU	reduce by rule 5
-+ 	LATENCY	reduce by rule 5
-+ 	EXCEPTION	reduce by rule 5
-+ 	EOF	reduce by rule 5
-+ 
-+ 	optsemi	goto 43
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 6:
-+ 
-+ 	decls : decl . decls 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	END	reduce by rule 1
-+ 	LOCAL	shift 38
-+ 	IN	reduce by rule 1
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	RPAREN	reduce by rule 1
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 	EOF	reduce by rule 1
-+ 
-+ 	decls	goto 44
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 7:
-+ 
-+ 	architecture : decls .  (reduce by rule 0)
-+ 
-+ 	EOF	reduce by rule 0
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 8:
-+ 
-+ 	mymldecl : EXCEPTION . exceptionbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 47
-+ 	exceptionbind	goto 46
-+ 	exceptionbinds	goto 45
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 9:
-+ 
-+ 	mymddecl : LATENCY . latencybinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 55
-+ 	latencybinds	goto 54
-+ 	latencybind	goto 53
-+ 	latencyclauses	goto 52
-+ 	latencyclause	goto 51
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 10:
-+ 
-+ 	mymddecl : CPU . cpubinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 58
-+ 	cpubinds	goto 57
-+ 	cpubind	goto 56
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 11:
-+ 
-+ 	mymddecl : RESOURCE . resourcebinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 60
-+ 	resourcebinds	goto 59
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 12:
-+ 
-+ 	mymddecl : DEBUG . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 61
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 13:
-+ 
-+ 	mymldecl : INFIXR . intopt syms 
-+ 
-+ 	TIMES	reduce by rule 397
-+ 	DEREF	reduce by rule 397
-+ 	NOT	reduce by rule 397
-+ 	CELLSET	reduce by rule 397
-+ 	ID	reduce by rule 397
-+ 	SYMBOL	reduce by rule 397
-+ 	INT	shift 64
-+ 
-+ 	int	goto 63
-+ 	intopt	goto 62
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 14:
-+ 
-+ 	mymldecl : INFIX . intopt syms 
-+ 
-+ 	TIMES	reduce by rule 397
-+ 	DEREF	reduce by rule 397
-+ 	NOT	reduce by rule 397
-+ 	CELLSET	reduce by rule 397
-+ 	ID	reduce by rule 397
-+ 	SYMBOL	reduce by rule 397
-+ 	INT	shift 64
-+ 
-+ 	int	goto 63
-+ 	intopt	goto 65
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 15:
-+ 
-+ 	mymldecl : NONFIX . syms 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 66
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 16:
-+ 
-+ 	mymldecl : RTL . id LBRACE labpats0 RBRACE EQ exp 
-+ 	mymldecl : RTL . asapat EQ exp 
-+ 	mymldecl : RTL . syms COLON ty 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 89
-+ 	sym	goto 88
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	syms	goto 86
-+ 	path	goto 85
-+ 	apat	goto 84
-+ 	asapat	goto 83
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 17:
-+ 
-+ 	assemblycase : VERBATIM .  (reduce by rule 115)
-+ 
-+ 	ASSEMBLY	reduce by rule 115
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 18:
-+ 
-+ 	assemblycase : UPPERCASE .  (reduce by rule 114)
-+ 
-+ 	ASSEMBLY	reduce by rule 114
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 19:
-+ 
-+ 	assemblycase : LOWERCASE .  (reduce by rule 113)
-+ 
-+ 	ASSEMBLY	reduce by rule 113
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 20:
-+ 
-+ 	mymddecl : PIPELINE . pipelinebinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 108
-+ 	pipelinebinds	goto 107
-+ 	pipelinebind	goto 106
-+ 	pipelineclauses	goto 105
-+ 	pipelineclause	goto 104
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 21:
-+ 
-+ 	mymddecl : BIG . ENDIAN 
-+ 
-+ 	ENDIAN	shift 109
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 22:
-+ 
-+ 	mymddecl : LITTLE . ENDIAN 
-+ 
-+ 	ENDIAN	shift 110
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 23:
-+ 
-+ 	mymldecl : OPEN . idents 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 113
-+ 	ident2	goto 112
-+ 	idents	goto 111
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 24:
-+ 
-+ 	decl : INCLUDE . string optsemi 
-+ 	mymldecl : INCLUDE . sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	SIG	shift 118
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	STRING	shift 91
-+ 
-+ 	id	goto 114
-+ 	ident	goto 117
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	string	goto 116
-+ 	sigexp	goto 115
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 25:
-+ 
-+ 	mymldecl : VAL . valbinds 
-+ 	mymldecl : VAL . syms COLON ty 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 126
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	syms	goto 125
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 121
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	valbind	goto 120
-+ 	valbinds	goto 119
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 26:
-+ 
-+ 	mymldecl : FUN . funbinds 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 133
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	funclause	goto 132
-+ 	funclauses	goto 131
-+ 	funbind	goto 130
-+ 	funbinds	goto 129
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 27:
-+ 
-+ 	mymddecl : SUPERSCALAR .  (reduce by rule 16)
-+ 
-+ 	ARCHITECTURE	reduce by rule 16
-+ 	END	reduce by rule 16
-+ 	LOCAL	reduce by rule 16
-+ 	IN	reduce by rule 16
-+ 	DATATYPE	reduce by rule 16
-+ 	TYPE	reduce by rule 16
-+ 	RPAREN	reduce by rule 16
-+ 	SEMICOLON	reduce by rule 16
-+ 	STORAGE	reduce by rule 16
-+ 	LOCATIONS	reduce by rule 16
-+ 	STRUCTURE	reduce by rule 16
-+ 	FUNCTOR	reduce by rule 16
-+ 	SIGNATURE	reduce by rule 16
-+ 	SHARING	reduce by rule 16
-+ 	INSTRUCTION	reduce by rule 16
-+ 	VLIW	reduce by rule 16
-+ 	SUPERSCALAR	reduce by rule 16
-+ 	FUN	reduce by rule 16
-+ 	VAL	reduce by rule 16
-+ 	INCLUDE	reduce by rule 16
-+ 	OPEN	reduce by rule 16
-+ 	LITTLE	reduce by rule 16
-+ 	BIG	reduce by rule 16
-+ 	PIPELINE	reduce by rule 16
-+ 	LOWERCASE	reduce by rule 16
-+ 	UPPERCASE	reduce by rule 16
-+ 	VERBATIM	reduce by rule 16
-+ 	RTL	reduce by rule 16
-+ 	NONFIX	reduce by rule 16
-+ 	INFIX	reduce by rule 16
-+ 	INFIXR	reduce by rule 16
-+ 	DEBUG	reduce by rule 16
-+ 	RESOURCE	reduce by rule 16
-+ 	CPU	reduce by rule 16
-+ 	LATENCY	reduce by rule 16
-+ 	EXCEPTION	reduce by rule 16
-+ 	EOF	reduce by rule 16
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 28:
-+ 
-+ 	mymddecl : VLIW .  (reduce by rule 15)
-+ 
-+ 	ARCHITECTURE	reduce by rule 15
-+ 	END	reduce by rule 15
-+ 	LOCAL	reduce by rule 15
-+ 	IN	reduce by rule 15
-+ 	DATATYPE	reduce by rule 15
-+ 	TYPE	reduce by rule 15
-+ 	RPAREN	reduce by rule 15
-+ 	SEMICOLON	reduce by rule 15
-+ 	STORAGE	reduce by rule 15
-+ 	LOCATIONS	reduce by rule 15
-+ 	STRUCTURE	reduce by rule 15
-+ 	FUNCTOR	reduce by rule 15
-+ 	SIGNATURE	reduce by rule 15
-+ 	SHARING	reduce by rule 15
-+ 	INSTRUCTION	reduce by rule 15
-+ 	VLIW	reduce by rule 15
-+ 	SUPERSCALAR	reduce by rule 15
-+ 	FUN	reduce by rule 15
-+ 	VAL	reduce by rule 15
-+ 	INCLUDE	reduce by rule 15
-+ 	OPEN	reduce by rule 15
-+ 	LITTLE	reduce by rule 15
-+ 	BIG	reduce by rule 15
-+ 	PIPELINE	reduce by rule 15
-+ 	LOWERCASE	reduce by rule 15
-+ 	UPPERCASE	reduce by rule 15
-+ 	VERBATIM	reduce by rule 15
-+ 	RTL	reduce by rule 15
-+ 	NONFIX	reduce by rule 15
-+ 	INFIX	reduce by rule 15
-+ 	INFIXR	reduce by rule 15
-+ 	DEBUG	reduce by rule 15
-+ 	RESOURCE	reduce by rule 15
-+ 	CPU	reduce by rule 15
-+ 	LATENCY	reduce by rule 15
-+ 	EXCEPTION	reduce by rule 15
-+ 	EOF	reduce by rule 15
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 29:
-+ 
-+ 	mymddecl : INSTRUCTION . FORMATS int BITS formatbinds 
-+ 	mymddecl : INSTRUCTION . FORMATS formatbinds 
-+ 	mymddecl : INSTRUCTION . consbinds 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	FORMATS	shift 139
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 138
-+ 	symb	goto 67
-+ 	consbinds	goto 137
-+ 	consbind	goto 136
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 30:
-+ 
-+ 	mymldecl : SHARING . sharingdecls 
-+ 
-+ 	TYPE	shift 144
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 143
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sharingdecl	goto 142
-+ 	sharingdecls	goto 141
-+ 	sharelist	goto 140
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 31:
-+ 
-+ 	mymldecl : SIGNATURE . id EQ sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 145
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 32:
-+ 
-+ 	mymldecl : FUNCTOR . id LPAREN functorarg RPAREN EQ structexp 
-+ 	mymldecl : FUNCTOR . id LPAREN functorarg RPAREN sigcon EQ structexp 
-+ 	mymldecl : FUNCTOR . id EQ structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 146
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 33:
-+ 
-+ 	mymldecl : STRUCTURE . id EQ structexp 
-+ 	mymldecl : STRUCTURE . id sigcon EQ structexp 
-+ 	mymldecl : STRUCTURE . id COLON sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 147
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 34:
-+ 
-+ 	mymddecl : LOCATIONS . locbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 150
-+ 	locbind	goto 149
-+ 	locbinds	goto 148
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 35:
-+ 
-+ 	mymddecl : STORAGE . storagedecls 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 153
-+ 	storagedecl	goto 152
-+ 	storagedecls	goto 151
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 36:
-+ 
-+ 	mymldecl : TYPE . typebinds 
-+ 	mymldecl : TYPE . tyvarseq tid 
-+ 
-+ 	LPAREN	shift 160
-+ 	CELLSET	reduce by rule 199
-+ 	HASH	shift 159
-+ 	BITS	reduce by rule 199
-+ 	INSTRUCTION	reduce by rule 199
-+ 	CELL	reduce by rule 199
-+ 	ID	reduce by rule 199
-+ 	SYMBOL	reduce by rule 199
-+ 	TYVAR	shift 158
-+ 
-+ 	typebinds	goto 157
-+ 	typebind	goto 156
-+ 	tyvar	goto 155
-+ 	tyvarseq	goto 154
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 37:
-+ 
-+ 	mymldecl : DATATYPE . datatypebinds withtypeclause 
-+ 
-+ 	LPAREN	shift 160
-+ 	CELLSET	reduce by rule 199
-+ 	HASH	shift 159
-+ 	ID	reduce by rule 199
-+ 	SYMBOL	reduce by rule 199
-+ 	TYVAR	shift 158
-+ 
-+ 	datatypebinds	goto 163
-+ 	datatypebind	goto 162
-+ 	tyvar	goto 155
-+ 	tyvarseq	goto 161
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 38:
-+ 
-+ 	mymldecl : LOCAL . scopeddecls IN scopeddecls END 
-+ 
-+ 	ARCHITECTURE	reduce by rule 107
-+ 	LOCAL	reduce by rule 107
-+ 	IN	reduce by rule 107
-+ 	DATATYPE	reduce by rule 107
-+ 	TYPE	reduce by rule 107
-+ 	STORAGE	reduce by rule 107
-+ 	LOCATIONS	reduce by rule 107
-+ 	STRUCTURE	reduce by rule 107
-+ 	FUNCTOR	reduce by rule 107
-+ 	SIGNATURE	reduce by rule 107
-+ 	SHARING	reduce by rule 107
-+ 	INSTRUCTION	reduce by rule 107
-+ 	VLIW	reduce by rule 107
-+ 	SUPERSCALAR	reduce by rule 107
-+ 	FUN	reduce by rule 107
-+ 	VAL	reduce by rule 107
-+ 	INCLUDE	reduce by rule 107
-+ 	OPEN	reduce by rule 107
-+ 	LITTLE	reduce by rule 107
-+ 	BIG	reduce by rule 107
-+ 	PIPELINE	reduce by rule 107
-+ 	LOWERCASE	reduce by rule 107
-+ 	UPPERCASE	reduce by rule 107
-+ 	VERBATIM	reduce by rule 107
-+ 	RTL	reduce by rule 107
-+ 	NONFIX	reduce by rule 107
-+ 	INFIX	reduce by rule 107
-+ 	INFIXR	reduce by rule 107
-+ 	DEBUG	reduce by rule 107
-+ 	RESOURCE	reduce by rule 107
-+ 	CPU	reduce by rule 107
-+ 	LATENCY	reduce by rule 107
-+ 	EXCEPTION	reduce by rule 107
-+ 
-+ 	scopeddecls	goto 165
-+ 	newScope	goto 164
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 39:
-+ 
-+ 	mymddecl : ARCHITECTURE . id EQ STRUCT decls END 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 166
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 40:
-+ 
-+ 	mymddecl : assemblycase ASSEMBLY .  (reduce by rule 17)
-+ 
-+ 	ARCHITECTURE	reduce by rule 17
-+ 	END	reduce by rule 17
-+ 	LOCAL	reduce by rule 17
-+ 	IN	reduce by rule 17
-+ 	DATATYPE	reduce by rule 17
-+ 	TYPE	reduce by rule 17
-+ 	RPAREN	reduce by rule 17
-+ 	SEMICOLON	reduce by rule 17
-+ 	STORAGE	reduce by rule 17
-+ 	LOCATIONS	reduce by rule 17
-+ 	STRUCTURE	reduce by rule 17
-+ 	FUNCTOR	reduce by rule 17
-+ 	SIGNATURE	reduce by rule 17
-+ 	SHARING	reduce by rule 17
-+ 	INSTRUCTION	reduce by rule 17
-+ 	VLIW	reduce by rule 17
-+ 	SUPERSCALAR	reduce by rule 17
-+ 	FUN	reduce by rule 17
-+ 	VAL	reduce by rule 17
-+ 	INCLUDE	reduce by rule 17
-+ 	OPEN	reduce by rule 17
-+ 	LITTLE	reduce by rule 17
-+ 	BIG	reduce by rule 17
-+ 	PIPELINE	reduce by rule 17
-+ 	LOWERCASE	reduce by rule 17
-+ 	UPPERCASE	reduce by rule 17
-+ 	VERBATIM	reduce by rule 17
-+ 	RTL	reduce by rule 17
-+ 	NONFIX	reduce by rule 17
-+ 	INFIX	reduce by rule 17
-+ 	INFIXR	reduce by rule 17
-+ 	DEBUG	reduce by rule 17
-+ 	RESOURCE	reduce by rule 17
-+ 	CPU	reduce by rule 17
-+ 	LATENCY	reduce by rule 17
-+ 	EXCEPTION	reduce by rule 17
-+ 	EOF	reduce by rule 17
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 41:
-+ 
-+ 	decl : mddecl optsemi .  (reduce by rule 8)
-+ 
-+ 	ARCHITECTURE	reduce by rule 8
-+ 	END	reduce by rule 8
-+ 	LOCAL	reduce by rule 8
-+ 	IN	reduce by rule 8
-+ 	DATATYPE	reduce by rule 8
-+ 	TYPE	reduce by rule 8
-+ 	RPAREN	reduce by rule 8
-+ 	STORAGE	reduce by rule 8
-+ 	LOCATIONS	reduce by rule 8
-+ 	STRUCTURE	reduce by rule 8
-+ 	FUNCTOR	reduce by rule 8
-+ 	SIGNATURE	reduce by rule 8
-+ 	SHARING	reduce by rule 8
-+ 	INSTRUCTION	reduce by rule 8
-+ 	VLIW	reduce by rule 8
-+ 	SUPERSCALAR	reduce by rule 8
-+ 	FUN	reduce by rule 8
-+ 	VAL	reduce by rule 8
-+ 	INCLUDE	reduce by rule 8
-+ 	OPEN	reduce by rule 8
-+ 	LITTLE	reduce by rule 8
-+ 	BIG	reduce by rule 8
-+ 	PIPELINE	reduce by rule 8
-+ 	LOWERCASE	reduce by rule 8
-+ 	UPPERCASE	reduce by rule 8
-+ 	VERBATIM	reduce by rule 8
-+ 	RTL	reduce by rule 8
-+ 	NONFIX	reduce by rule 8
-+ 	INFIX	reduce by rule 8
-+ 	INFIXR	reduce by rule 8
-+ 	DEBUG	reduce by rule 8
-+ 	RESOURCE	reduce by rule 8
-+ 	CPU	reduce by rule 8
-+ 	LATENCY	reduce by rule 8
-+ 	EXCEPTION	reduce by rule 8
-+ 	EOF	reduce by rule 8
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 42:
-+ 
-+ 	optsemi : SEMICOLON . optsemi 
-+ 
-+ 	ARCHITECTURE	reduce by rule 5
-+ 	END	reduce by rule 5
-+ 	LOCAL	reduce by rule 5
-+ 	IN	reduce by rule 5
-+ 	DATATYPE	reduce by rule 5
-+ 	TYPE	reduce by rule 5
-+ 	RPAREN	reduce by rule 5
-+ 	SEMICOLON	shift 42
-+ 	STORAGE	reduce by rule 5
-+ 	LOCATIONS	reduce by rule 5
-+ 	STRUCTURE	reduce by rule 5
-+ 	FUNCTOR	reduce by rule 5
-+ 	SIGNATURE	reduce by rule 5
-+ 	SHARING	reduce by rule 5
-+ 	INSTRUCTION	reduce by rule 5
-+ 	VLIW	reduce by rule 5
-+ 	SUPERSCALAR	reduce by rule 5
-+ 	FUN	reduce by rule 5
-+ 	VAL	reduce by rule 5
-+ 	INCLUDE	reduce by rule 5
-+ 	OPEN	reduce by rule 5
-+ 	LITTLE	reduce by rule 5
-+ 	BIG	reduce by rule 5
-+ 	PIPELINE	reduce by rule 5
-+ 	LOWERCASE	reduce by rule 5
-+ 	UPPERCASE	reduce by rule 5
-+ 	VERBATIM	reduce by rule 5
-+ 	RTL	reduce by rule 5
-+ 	NONFIX	reduce by rule 5
-+ 	INFIX	reduce by rule 5
-+ 	INFIXR	reduce by rule 5
-+ 	DEBUG	reduce by rule 5
-+ 	RESOURCE	reduce by rule 5
-+ 	CPU	reduce by rule 5
-+ 	LATENCY	reduce by rule 5
-+ 	EXCEPTION	reduce by rule 5
-+ 	EOF	reduce by rule 5
-+ 
-+ 	optsemi	goto 167
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 43:
-+ 
-+ 	decl : mldecl optsemi .  (reduce by rule 7)
-+ 
-+ 	ARCHITECTURE	reduce by rule 7
-+ 	END	reduce by rule 7
-+ 	LOCAL	reduce by rule 7
-+ 	IN	reduce by rule 7
-+ 	DATATYPE	reduce by rule 7
-+ 	TYPE	reduce by rule 7
-+ 	RPAREN	reduce by rule 7
-+ 	STORAGE	reduce by rule 7
-+ 	LOCATIONS	reduce by rule 7
-+ 	STRUCTURE	reduce by rule 7
-+ 	FUNCTOR	reduce by rule 7
-+ 	SIGNATURE	reduce by rule 7
-+ 	SHARING	reduce by rule 7
-+ 	INSTRUCTION	reduce by rule 7
-+ 	VLIW	reduce by rule 7
-+ 	SUPERSCALAR	reduce by rule 7
-+ 	FUN	reduce by rule 7
-+ 	VAL	reduce by rule 7
-+ 	INCLUDE	reduce by rule 7
-+ 	OPEN	reduce by rule 7
-+ 	LITTLE	reduce by rule 7
-+ 	BIG	reduce by rule 7
-+ 	PIPELINE	reduce by rule 7
-+ 	LOWERCASE	reduce by rule 7
-+ 	UPPERCASE	reduce by rule 7
-+ 	VERBATIM	reduce by rule 7
-+ 	RTL	reduce by rule 7
-+ 	NONFIX	reduce by rule 7
-+ 	INFIX	reduce by rule 7
-+ 	INFIXR	reduce by rule 7
-+ 	DEBUG	reduce by rule 7
-+ 	RESOURCE	reduce by rule 7
-+ 	CPU	reduce by rule 7
-+ 	LATENCY	reduce by rule 7
-+ 	EXCEPTION	reduce by rule 7
-+ 	EOF	reduce by rule 7
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 44:
-+ 
-+ 	decls : decl decls .  (reduce by rule 2)
-+ 
-+ 	END	reduce by rule 2
-+ 	IN	reduce by rule 2
-+ 	RPAREN	reduce by rule 2
-+ 	EOF	reduce by rule 2
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 45:
-+ 
-+ 	mymldecl : EXCEPTION exceptionbinds .  (reduce by rule 82)
-+ 
-+ 	ARCHITECTURE	reduce by rule 82
-+ 	END	reduce by rule 82
-+ 	LOCAL	reduce by rule 82
-+ 	IN	reduce by rule 82
-+ 	DATATYPE	reduce by rule 82
-+ 	TYPE	reduce by rule 82
-+ 	RPAREN	reduce by rule 82
-+ 	SEMICOLON	reduce by rule 82
-+ 	STORAGE	reduce by rule 82
-+ 	LOCATIONS	reduce by rule 82
-+ 	STRUCTURE	reduce by rule 82
-+ 	FUNCTOR	reduce by rule 82
-+ 	SIGNATURE	reduce by rule 82
-+ 	SHARING	reduce by rule 82
-+ 	INSTRUCTION	reduce by rule 82
-+ 	VLIW	reduce by rule 82
-+ 	SUPERSCALAR	reduce by rule 82
-+ 	FUN	reduce by rule 82
-+ 	VAL	reduce by rule 82
-+ 	INCLUDE	reduce by rule 82
-+ 	OPEN	reduce by rule 82
-+ 	LITTLE	reduce by rule 82
-+ 	BIG	reduce by rule 82
-+ 	PIPELINE	reduce by rule 82
-+ 	LOWERCASE	reduce by rule 82
-+ 	UPPERCASE	reduce by rule 82
-+ 	VERBATIM	reduce by rule 82
-+ 	RTL	reduce by rule 82
-+ 	NONFIX	reduce by rule 82
-+ 	INFIX	reduce by rule 82
-+ 	INFIXR	reduce by rule 82
-+ 	DEBUG	reduce by rule 82
-+ 	RESOURCE	reduce by rule 82
-+ 	CPU	reduce by rule 82
-+ 	LATENCY	reduce by rule 82
-+ 	EXCEPTION	reduce by rule 82
-+ 	EOF	reduce by rule 82
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 46:
-+ 
-+ 	exceptionbinds : exceptionbind .  (reduce by rule 83)
-+ 	exceptionbinds : exceptionbind . AND exceptionbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 83
-+ 	END	reduce by rule 83
-+ 	LOCAL	reduce by rule 83
-+ 	IN	reduce by rule 83
-+ 	DATATYPE	reduce by rule 83
-+ 	TYPE	reduce by rule 83
-+ 	AND	shift 168
-+ 	RPAREN	reduce by rule 83
-+ 	SEMICOLON	reduce by rule 83
-+ 	STORAGE	reduce by rule 83
-+ 	LOCATIONS	reduce by rule 83
-+ 	STRUCTURE	reduce by rule 83
-+ 	FUNCTOR	reduce by rule 83
-+ 	SIGNATURE	reduce by rule 83
-+ 	SHARING	reduce by rule 83
-+ 	INSTRUCTION	reduce by rule 83
-+ 	VLIW	reduce by rule 83
-+ 	SUPERSCALAR	reduce by rule 83
-+ 	FUN	reduce by rule 83
-+ 	VAL	reduce by rule 83
-+ 	INCLUDE	reduce by rule 83
-+ 	OPEN	reduce by rule 83
-+ 	LITTLE	reduce by rule 83
-+ 	BIG	reduce by rule 83
-+ 	PIPELINE	reduce by rule 83
-+ 	LOWERCASE	reduce by rule 83
-+ 	UPPERCASE	reduce by rule 83
-+ 	VERBATIM	reduce by rule 83
-+ 	RTL	reduce by rule 83
-+ 	NONFIX	reduce by rule 83
-+ 	INFIX	reduce by rule 83
-+ 	INFIXR	reduce by rule 83
-+ 	DEBUG	reduce by rule 83
-+ 	RESOURCE	reduce by rule 83
-+ 	CPU	reduce by rule 83
-+ 	LATENCY	reduce by rule 83
-+ 	EXCEPTION	reduce by rule 83
-+ 	EOF	reduce by rule 83
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 47:
-+ 
-+ 	exceptionbind : id .  (reduce by rule 85)
-+ 	exceptionbind : id . OF ty 
-+ 	exceptionbind : id . EQ ident 
-+ 
-+ 	ARCHITECTURE	reduce by rule 85
-+ 	END	reduce by rule 85
-+ 	LOCAL	reduce by rule 85
-+ 	IN	reduce by rule 85
-+ 	OF	shift 170
-+ 	DATATYPE	reduce by rule 85
-+ 	TYPE	reduce by rule 85
-+ 	EQ	shift 169
-+ 	AND	reduce by rule 85
-+ 	RPAREN	reduce by rule 85
-+ 	SEMICOLON	reduce by rule 85
-+ 	STORAGE	reduce by rule 85
-+ 	LOCATIONS	reduce by rule 85
-+ 	STRUCTURE	reduce by rule 85
-+ 	FUNCTOR	reduce by rule 85
-+ 	SIGNATURE	reduce by rule 85
-+ 	SHARING	reduce by rule 85
-+ 	INSTRUCTION	reduce by rule 85
-+ 	VLIW	reduce by rule 85
-+ 	SUPERSCALAR	reduce by rule 85
-+ 	FUN	reduce by rule 85
-+ 	VAL	reduce by rule 85
-+ 	INCLUDE	reduce by rule 85
-+ 	OPEN	reduce by rule 85
-+ 	LITTLE	reduce by rule 85
-+ 	BIG	reduce by rule 85
-+ 	PIPELINE	reduce by rule 85
-+ 	LOWERCASE	reduce by rule 85
-+ 	UPPERCASE	reduce by rule 85
-+ 	VERBATIM	reduce by rule 85
-+ 	RTL	reduce by rule 85
-+ 	NONFIX	reduce by rule 85
-+ 	INFIX	reduce by rule 85
-+ 	INFIXR	reduce by rule 85
-+ 	DEBUG	reduce by rule 85
-+ 	RESOURCE	reduce by rule 85
-+ 	CPU	reduce by rule 85
-+ 	LATENCY	reduce by rule 85
-+ 	EXCEPTION	reduce by rule 85
-+ 	EOF	reduce by rule 85
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 48:
-+ 
-+ 	id : SYMBOL .  (reduce by rule 414)
-+ 
-+ 	ARCHITECTURE	reduce by rule 414
-+ 	END	reduce by rule 414
-+ 	LOCAL	reduce by rule 414
-+ 	IN	reduce by rule 414
-+ 	OF	reduce by rule 414
-+ 	DATATYPE	reduce by rule 414
-+ 	TYPE	reduce by rule 414
-+ 	EQ	reduce by rule 414
-+ 	DOLLAR	reduce by rule 414
-+ 	TIMES	reduce by rule 414
-+ 	AND	reduce by rule 414
-+ 	DEREF	reduce by rule 414
-+ 	NOT	reduce by rule 414
-+ 	CONCAT	reduce by rule 414
-+ 	LLBRACKET	reduce by rule 414
-+ 	RRBRACKET	reduce by rule 414
-+ 	LHASHBRACKET	reduce by rule 414
-+ 	LPAREN	reduce by rule 414
-+ 	RPAREN	reduce by rule 414
-+ 	LBRACKET	reduce by rule 414
-+ 	RBRACKET	reduce by rule 414
-+ 	LBRACE	reduce by rule 414
-+ 	RBRACE	reduce by rule 414
-+ 	SEMICOLON	reduce by rule 414
-+ 	LDQUOTE	reduce by rule 414
-+ 	RMETA	reduce by rule 414
-+ 	CELLSET	reduce by rule 414
-+ 	STORAGE	reduce by rule 414
-+ 	LOCATIONS	reduce by rule 414
-+ 	HASH	reduce by rule 414
-+ 	COMMA	reduce by rule 414
-+ 	COLON	reduce by rule 414
-+ 	COLONGREATER	reduce by rule 414
-+ 	DOT	reduce by rule 414
-+ 	AT	reduce by rule 414
-+ 	BAR	reduce by rule 414
-+ 	ARROW	reduce by rule 414
-+ 	DARROW	reduce by rule 414
-+ 	BITS	reduce by rule 414
-+ 	THEN	reduce by rule 414
-+ 	ELSE	reduce by rule 414
-+ 	TRUE	reduce by rule 414
-+ 	FALSE	reduce by rule 414
-+ 	WILD	reduce by rule 414
-+ 	HANDLE	reduce by rule 414
-+ 	LET	reduce by rule 414
-+ 	STRUCTURE	reduce by rule 414
-+ 	FUNCTOR	reduce by rule 414
-+ 	SIGNATURE	reduce by rule 414
-+ 	WHERE	reduce by rule 414
-+ 	SHARING	reduce by rule 414
-+ 	INSTRUCTION	reduce by rule 414
-+ 	CELL	reduce by rule 414
-+ 	VLIW	reduce by rule 414
-+ 	SUPERSCALAR	reduce by rule 414
-+ 	SIGNED	reduce by rule 414
-+ 	UNSIGNED	reduce by rule 414
-+ 	AS	reduce by rule 414
-+ 	WITHTYPE	reduce by rule 414
-+ 	FUN	reduce by rule 414
-+ 	VAL	reduce by rule 414
-+ 	INCLUDE	reduce by rule 414
-+ 	OPEN	reduce by rule 414
-+ 	OP	reduce by rule 414
-+ 	LITTLE	reduce by rule 414
-+ 	BIG	reduce by rule 414
-+ 	PIPELINE	reduce by rule 414
-+ 	LOWERCASE	reduce by rule 414
-+ 	UPPERCASE	reduce by rule 414
-+ 	VERBATIM	reduce by rule 414
-+ 	RTL	reduce by rule 414
-+ 	SPAN	reduce by rule 414
-+ 	DELAYSLOT	reduce by rule 414
-+ 	ALWAYS	reduce by rule 414
-+ 	NEVER	reduce by rule 414
-+ 	NONFIX	reduce by rule 414
-+ 	INFIX	reduce by rule 414
-+ 	INFIXR	reduce by rule 414
-+ 	DEBUG	reduce by rule 414
-+ 	ASM_COLON	reduce by rule 414
-+ 	MC_COLON	reduce by rule 414
-+ 	RTL_COLON	reduce by rule 414
-+ 	DELAYSLOT_COLON	reduce by rule 414
-+ 	NULLIFIED_COLON	reduce by rule 414
-+ 	PADDING_COLON	reduce by rule 414
-+ 	RESOURCE	reduce by rule 414
-+ 	CPU	reduce by rule 414
-+ 	LATENCY	reduce by rule 414
-+ 	EXCEPTION	reduce by rule 414
-+ 	ID	reduce by rule 414
-+ 	SYMBOL	reduce by rule 414
-+ 	WORD	reduce by rule 414
-+ 	INT	reduce by rule 414
-+ 	INTINF	reduce by rule 414
-+ 	REAL	reduce by rule 414
-+ 	STRING	reduce by rule 414
-+ 	CHAR	reduce by rule 414
-+ 	EOF	reduce by rule 414
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 49:
-+ 
-+ 	id : ID .  (reduce by rule 413)
-+ 
-+ 	ARCHITECTURE	reduce by rule 413
-+ 	END	reduce by rule 413
-+ 	LOCAL	reduce by rule 413
-+ 	IN	reduce by rule 413
-+ 	OF	reduce by rule 413
-+ 	DATATYPE	reduce by rule 413
-+ 	TYPE	reduce by rule 413
-+ 	EQ	reduce by rule 413
-+ 	DOLLAR	reduce by rule 413
-+ 	TIMES	reduce by rule 413
-+ 	AND	reduce by rule 413
-+ 	DEREF	reduce by rule 413
-+ 	NOT	reduce by rule 413
-+ 	CONCAT	reduce by rule 413
-+ 	LLBRACKET	reduce by rule 413
-+ 	RRBRACKET	reduce by rule 413
-+ 	LHASHBRACKET	reduce by rule 413
-+ 	LPAREN	reduce by rule 413
-+ 	RPAREN	reduce by rule 413
-+ 	LBRACKET	reduce by rule 413
-+ 	RBRACKET	reduce by rule 413
-+ 	LBRACE	reduce by rule 413
-+ 	RBRACE	reduce by rule 413
-+ 	SEMICOLON	reduce by rule 413
-+ 	LDQUOTE	reduce by rule 413
-+ 	RMETA	reduce by rule 413
-+ 	CELLSET	reduce by rule 413
-+ 	STORAGE	reduce by rule 413
-+ 	LOCATIONS	reduce by rule 413
-+ 	HASH	reduce by rule 413
-+ 	COMMA	reduce by rule 413
-+ 	COLON	reduce by rule 413
-+ 	COLONGREATER	reduce by rule 413
-+ 	DOT	reduce by rule 413
-+ 	AT	reduce by rule 413
-+ 	BAR	reduce by rule 413
-+ 	ARROW	reduce by rule 413
-+ 	DARROW	reduce by rule 413
-+ 	BITS	reduce by rule 413
-+ 	THEN	reduce by rule 413
-+ 	ELSE	reduce by rule 413
-+ 	TRUE	reduce by rule 413
-+ 	FALSE	reduce by rule 413
-+ 	WILD	reduce by rule 413
-+ 	HANDLE	reduce by rule 413
-+ 	LET	reduce by rule 413
-+ 	STRUCTURE	reduce by rule 413
-+ 	FUNCTOR	reduce by rule 413
-+ 	SIGNATURE	reduce by rule 413
-+ 	WHERE	reduce by rule 413
-+ 	SHARING	reduce by rule 413
-+ 	INSTRUCTION	reduce by rule 413
-+ 	CELL	reduce by rule 413
-+ 	VLIW	reduce by rule 413
-+ 	SUPERSCALAR	reduce by rule 413
-+ 	SIGNED	reduce by rule 413
-+ 	UNSIGNED	reduce by rule 413
-+ 	AS	reduce by rule 413
-+ 	WITHTYPE	reduce by rule 413
-+ 	FUN	reduce by rule 413
-+ 	VAL	reduce by rule 413
-+ 	INCLUDE	reduce by rule 413
-+ 	OPEN	reduce by rule 413
-+ 	OP	reduce by rule 413
-+ 	LITTLE	reduce by rule 413
-+ 	BIG	reduce by rule 413
-+ 	PIPELINE	reduce by rule 413
-+ 	LOWERCASE	reduce by rule 413
-+ 	UPPERCASE	reduce by rule 413
-+ 	VERBATIM	reduce by rule 413
-+ 	RTL	reduce by rule 413
-+ 	SPAN	reduce by rule 413
-+ 	DELAYSLOT	reduce by rule 413
-+ 	ALWAYS	reduce by rule 413
-+ 	NEVER	reduce by rule 413
-+ 	NONFIX	reduce by rule 413
-+ 	INFIX	reduce by rule 413
-+ 	INFIXR	reduce by rule 413
-+ 	DEBUG	reduce by rule 413
-+ 	ASM_COLON	reduce by rule 413
-+ 	MC_COLON	reduce by rule 413
-+ 	RTL_COLON	reduce by rule 413
-+ 	DELAYSLOT_COLON	reduce by rule 413
-+ 	NULLIFIED_COLON	reduce by rule 413
-+ 	PADDING_COLON	reduce by rule 413
-+ 	RESOURCE	reduce by rule 413
-+ 	CPU	reduce by rule 413
-+ 	LATENCY	reduce by rule 413
-+ 	EXCEPTION	reduce by rule 413
-+ 	ID	reduce by rule 413
-+ 	SYMBOL	reduce by rule 413
-+ 	WORD	reduce by rule 413
-+ 	INT	reduce by rule 413
-+ 	INTINF	reduce by rule 413
-+ 	REAL	reduce by rule 413
-+ 	STRING	reduce by rule 413
-+ 	CHAR	reduce by rule 413
-+ 	EOF	reduce by rule 413
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 50:
-+ 
-+ 	id : CELLSET .  (reduce by rule 415)
-+ 
-+ 	ARCHITECTURE	reduce by rule 415
-+ 	END	reduce by rule 415
-+ 	LOCAL	reduce by rule 415
-+ 	IN	reduce by rule 415
-+ 	OF	reduce by rule 415
-+ 	DATATYPE	reduce by rule 415
-+ 	TYPE	reduce by rule 415
-+ 	EQ	reduce by rule 415
-+ 	DOLLAR	reduce by rule 415
-+ 	TIMES	reduce by rule 415
-+ 	AND	reduce by rule 415
-+ 	DEREF	reduce by rule 415
-+ 	NOT	reduce by rule 415
-+ 	CONCAT	reduce by rule 415
-+ 	LLBRACKET	reduce by rule 415
-+ 	RRBRACKET	reduce by rule 415
-+ 	LHASHBRACKET	reduce by rule 415
-+ 	LPAREN	reduce by rule 415
-+ 	RPAREN	reduce by rule 415
-+ 	LBRACKET	reduce by rule 415
-+ 	RBRACKET	reduce by rule 415
-+ 	LBRACE	reduce by rule 415
-+ 	RBRACE	reduce by rule 415
-+ 	SEMICOLON	reduce by rule 415
-+ 	LDQUOTE	reduce by rule 415
-+ 	RMETA	reduce by rule 415
-+ 	CELLSET	reduce by rule 415
-+ 	STORAGE	reduce by rule 415
-+ 	LOCATIONS	reduce by rule 415
-+ 	HASH	reduce by rule 415
-+ 	COMMA	reduce by rule 415
-+ 	COLON	reduce by rule 415
-+ 	COLONGREATER	reduce by rule 415
-+ 	DOT	reduce by rule 415
-+ 	AT	reduce by rule 415
-+ 	BAR	reduce by rule 415
-+ 	ARROW	reduce by rule 415
-+ 	DARROW	reduce by rule 415
-+ 	BITS	reduce by rule 415
-+ 	THEN	reduce by rule 415
-+ 	ELSE	reduce by rule 415
-+ 	TRUE	reduce by rule 415
-+ 	FALSE	reduce by rule 415
-+ 	WILD	reduce by rule 415
-+ 	HANDLE	reduce by rule 415
-+ 	LET	reduce by rule 415
-+ 	STRUCTURE	reduce by rule 415
-+ 	FUNCTOR	reduce by rule 415
-+ 	SIGNATURE	reduce by rule 415
-+ 	WHERE	reduce by rule 415
-+ 	SHARING	reduce by rule 415
-+ 	INSTRUCTION	reduce by rule 415
-+ 	CELL	reduce by rule 415
-+ 	VLIW	reduce by rule 415
-+ 	SUPERSCALAR	reduce by rule 415
-+ 	SIGNED	reduce by rule 415
-+ 	UNSIGNED	reduce by rule 415
-+ 	AS	reduce by rule 415
-+ 	WITHTYPE	reduce by rule 415
-+ 	FUN	reduce by rule 415
-+ 	VAL	reduce by rule 415
-+ 	INCLUDE	reduce by rule 415
-+ 	OPEN	reduce by rule 415
-+ 	OP	reduce by rule 415
-+ 	LITTLE	reduce by rule 415
-+ 	BIG	reduce by rule 415
-+ 	PIPELINE	reduce by rule 415
-+ 	LOWERCASE	reduce by rule 415
-+ 	UPPERCASE	reduce by rule 415
-+ 	VERBATIM	reduce by rule 415
-+ 	RTL	reduce by rule 415
-+ 	SPAN	reduce by rule 415
-+ 	DELAYSLOT	reduce by rule 415
-+ 	ALWAYS	reduce by rule 415
-+ 	NEVER	reduce by rule 415
-+ 	NONFIX	reduce by rule 415
-+ 	INFIX	reduce by rule 415
-+ 	INFIXR	reduce by rule 415
-+ 	DEBUG	reduce by rule 415
-+ 	ASM_COLON	reduce by rule 415
-+ 	MC_COLON	reduce by rule 415
-+ 	RTL_COLON	reduce by rule 415
-+ 	DELAYSLOT_COLON	reduce by rule 415
-+ 	NULLIFIED_COLON	reduce by rule 415
-+ 	PADDING_COLON	reduce by rule 415
-+ 	RESOURCE	reduce by rule 415
-+ 	CPU	reduce by rule 415
-+ 	LATENCY	reduce by rule 415
-+ 	EXCEPTION	reduce by rule 415
-+ 	ID	reduce by rule 415
-+ 	SYMBOL	reduce by rule 415
-+ 	WORD	reduce by rule 415
-+ 	INT	reduce by rule 415
-+ 	INTINF	reduce by rule 415
-+ 	REAL	reduce by rule 415
-+ 	STRING	reduce by rule 415
-+ 	CHAR	reduce by rule 415
-+ 	EOF	reduce by rule 415
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 51:
-+ 
-+ 	latencyclauses : latencyclause .  (reduce by rule 56)
-+ 	latencyclauses : latencyclause . BAR latencyclauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 56
-+ 	END	reduce by rule 56
-+ 	LOCAL	reduce by rule 56
-+ 	IN	reduce by rule 56
-+ 	DATATYPE	reduce by rule 56
-+ 	TYPE	reduce by rule 56
-+ 	AND	reduce by rule 56
-+ 	RPAREN	reduce by rule 56
-+ 	SEMICOLON	reduce by rule 56
-+ 	STORAGE	reduce by rule 56
-+ 	LOCATIONS	reduce by rule 56
-+ 	BAR	shift 171
-+ 	STRUCTURE	reduce by rule 56
-+ 	FUNCTOR	reduce by rule 56
-+ 	SIGNATURE	reduce by rule 56
-+ 	SHARING	reduce by rule 56
-+ 	INSTRUCTION	reduce by rule 56
-+ 	VLIW	reduce by rule 56
-+ 	SUPERSCALAR	reduce by rule 56
-+ 	FUN	reduce by rule 56
-+ 	VAL	reduce by rule 56
-+ 	INCLUDE	reduce by rule 56
-+ 	OPEN	reduce by rule 56
-+ 	LITTLE	reduce by rule 56
-+ 	BIG	reduce by rule 56
-+ 	PIPELINE	reduce by rule 56
-+ 	LOWERCASE	reduce by rule 56
-+ 	UPPERCASE	reduce by rule 56
-+ 	VERBATIM	reduce by rule 56
-+ 	RTL	reduce by rule 56
-+ 	NONFIX	reduce by rule 56
-+ 	INFIX	reduce by rule 56
-+ 	INFIXR	reduce by rule 56
-+ 	DEBUG	reduce by rule 56
-+ 	RESOURCE	reduce by rule 56
-+ 	CPU	reduce by rule 56
-+ 	LATENCY	reduce by rule 56
-+ 	EXCEPTION	reduce by rule 56
-+ 	EOF	reduce by rule 56
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 52:
-+ 
-+ 	latencybind : latencyclauses .  (reduce by rule 55)
-+ 
-+ 	ARCHITECTURE	reduce by rule 55
-+ 	END	reduce by rule 55
-+ 	LOCAL	reduce by rule 55
-+ 	IN	reduce by rule 55
-+ 	DATATYPE	reduce by rule 55
-+ 	TYPE	reduce by rule 55
-+ 	AND	reduce by rule 55
-+ 	RPAREN	reduce by rule 55
-+ 	SEMICOLON	reduce by rule 55
-+ 	STORAGE	reduce by rule 55
-+ 	LOCATIONS	reduce by rule 55
-+ 	STRUCTURE	reduce by rule 55
-+ 	FUNCTOR	reduce by rule 55
-+ 	SIGNATURE	reduce by rule 55
-+ 	SHARING	reduce by rule 55
-+ 	INSTRUCTION	reduce by rule 55
-+ 	VLIW	reduce by rule 55
-+ 	SUPERSCALAR	reduce by rule 55
-+ 	FUN	reduce by rule 55
-+ 	VAL	reduce by rule 55
-+ 	INCLUDE	reduce by rule 55
-+ 	OPEN	reduce by rule 55
-+ 	LITTLE	reduce by rule 55
-+ 	BIG	reduce by rule 55
-+ 	PIPELINE	reduce by rule 55
-+ 	LOWERCASE	reduce by rule 55
-+ 	UPPERCASE	reduce by rule 55
-+ 	VERBATIM	reduce by rule 55
-+ 	RTL	reduce by rule 55
-+ 	NONFIX	reduce by rule 55
-+ 	INFIX	reduce by rule 55
-+ 	INFIXR	reduce by rule 55
-+ 	DEBUG	reduce by rule 55
-+ 	RESOURCE	reduce by rule 55
-+ 	CPU	reduce by rule 55
-+ 	LATENCY	reduce by rule 55
-+ 	EXCEPTION	reduce by rule 55
-+ 	EOF	reduce by rule 55
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 53:
-+ 
-+ 	latencybinds : latencybind .  (reduce by rule 53)
-+ 	latencybinds : latencybind . AND latencybinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 53
-+ 	END	reduce by rule 53
-+ 	LOCAL	reduce by rule 53
-+ 	IN	reduce by rule 53
-+ 	DATATYPE	reduce by rule 53
-+ 	TYPE	reduce by rule 53
-+ 	AND	shift 172
-+ 	RPAREN	reduce by rule 53
-+ 	SEMICOLON	reduce by rule 53
-+ 	STORAGE	reduce by rule 53
-+ 	LOCATIONS	reduce by rule 53
-+ 	STRUCTURE	reduce by rule 53
-+ 	FUNCTOR	reduce by rule 53
-+ 	SIGNATURE	reduce by rule 53
-+ 	SHARING	reduce by rule 53
-+ 	INSTRUCTION	reduce by rule 53
-+ 	VLIW	reduce by rule 53
-+ 	SUPERSCALAR	reduce by rule 53
-+ 	FUN	reduce by rule 53
-+ 	VAL	reduce by rule 53
-+ 	INCLUDE	reduce by rule 53
-+ 	OPEN	reduce by rule 53
-+ 	LITTLE	reduce by rule 53
-+ 	BIG	reduce by rule 53
-+ 	PIPELINE	reduce by rule 53
-+ 	LOWERCASE	reduce by rule 53
-+ 	UPPERCASE	reduce by rule 53
-+ 	VERBATIM	reduce by rule 53
-+ 	RTL	reduce by rule 53
-+ 	NONFIX	reduce by rule 53
-+ 	INFIX	reduce by rule 53
-+ 	INFIXR	reduce by rule 53
-+ 	DEBUG	reduce by rule 53
-+ 	RESOURCE	reduce by rule 53
-+ 	CPU	reduce by rule 53
-+ 	LATENCY	reduce by rule 53
-+ 	EXCEPTION	reduce by rule 53
-+ 	EOF	reduce by rule 53
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 54:
-+ 
-+ 	mymddecl : LATENCY latencybinds .  (reduce by rule 27)
-+ 
-+ 	ARCHITECTURE	reduce by rule 27
-+ 	END	reduce by rule 27
-+ 	LOCAL	reduce by rule 27
-+ 	IN	reduce by rule 27
-+ 	DATATYPE	reduce by rule 27
-+ 	TYPE	reduce by rule 27
-+ 	RPAREN	reduce by rule 27
-+ 	SEMICOLON	reduce by rule 27
-+ 	STORAGE	reduce by rule 27
-+ 	LOCATIONS	reduce by rule 27
-+ 	STRUCTURE	reduce by rule 27
-+ 	FUNCTOR	reduce by rule 27
-+ 	SIGNATURE	reduce by rule 27
-+ 	SHARING	reduce by rule 27
-+ 	INSTRUCTION	reduce by rule 27
-+ 	VLIW	reduce by rule 27
-+ 	SUPERSCALAR	reduce by rule 27
-+ 	FUN	reduce by rule 27
-+ 	VAL	reduce by rule 27
-+ 	INCLUDE	reduce by rule 27
-+ 	OPEN	reduce by rule 27
-+ 	LITTLE	reduce by rule 27
-+ 	BIG	reduce by rule 27
-+ 	PIPELINE	reduce by rule 27
-+ 	LOWERCASE	reduce by rule 27
-+ 	UPPERCASE	reduce by rule 27
-+ 	VERBATIM	reduce by rule 27
-+ 	RTL	reduce by rule 27
-+ 	NONFIX	reduce by rule 27
-+ 	INFIX	reduce by rule 27
-+ 	INFIXR	reduce by rule 27
-+ 	DEBUG	reduce by rule 27
-+ 	RESOURCE	reduce by rule 27
-+ 	CPU	reduce by rule 27
-+ 	LATENCY	reduce by rule 27
-+ 	EXCEPTION	reduce by rule 27
-+ 	EOF	reduce by rule 27
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 55:
-+ 
-+ 	latencyclause : id . pat EQ exp 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 173
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 56:
-+ 
-+ 	cpubinds : cpubind .  (reduce by rule 30)
-+ 	cpubinds : cpubind . AND cpubinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 30
-+ 	END	reduce by rule 30
-+ 	LOCAL	reduce by rule 30
-+ 	IN	reduce by rule 30
-+ 	DATATYPE	reduce by rule 30
-+ 	TYPE	reduce by rule 30
-+ 	AND	shift 174
-+ 	RPAREN	reduce by rule 30
-+ 	SEMICOLON	reduce by rule 30
-+ 	STORAGE	reduce by rule 30
-+ 	LOCATIONS	reduce by rule 30
-+ 	STRUCTURE	reduce by rule 30
-+ 	FUNCTOR	reduce by rule 30
-+ 	SIGNATURE	reduce by rule 30
-+ 	SHARING	reduce by rule 30
-+ 	INSTRUCTION	reduce by rule 30
-+ 	VLIW	reduce by rule 30
-+ 	SUPERSCALAR	reduce by rule 30
-+ 	FUN	reduce by rule 30
-+ 	VAL	reduce by rule 30
-+ 	INCLUDE	reduce by rule 30
-+ 	OPEN	reduce by rule 30
-+ 	LITTLE	reduce by rule 30
-+ 	BIG	reduce by rule 30
-+ 	PIPELINE	reduce by rule 30
-+ 	LOWERCASE	reduce by rule 30
-+ 	UPPERCASE	reduce by rule 30
-+ 	VERBATIM	reduce by rule 30
-+ 	RTL	reduce by rule 30
-+ 	NONFIX	reduce by rule 30
-+ 	INFIX	reduce by rule 30
-+ 	INFIXR	reduce by rule 30
-+ 	DEBUG	reduce by rule 30
-+ 	RESOURCE	reduce by rule 30
-+ 	CPU	reduce by rule 30
-+ 	LATENCY	reduce by rule 30
-+ 	EXCEPTION	reduce by rule 30
-+ 	EOF	reduce by rule 30
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 57:
-+ 
-+ 	mymddecl : CPU cpubinds .  (reduce by rule 25)
-+ 
-+ 	ARCHITECTURE	reduce by rule 25
-+ 	END	reduce by rule 25
-+ 	LOCAL	reduce by rule 25
-+ 	IN	reduce by rule 25
-+ 	DATATYPE	reduce by rule 25
-+ 	TYPE	reduce by rule 25
-+ 	RPAREN	reduce by rule 25
-+ 	SEMICOLON	reduce by rule 25
-+ 	STORAGE	reduce by rule 25
-+ 	LOCATIONS	reduce by rule 25
-+ 	STRUCTURE	reduce by rule 25
-+ 	FUNCTOR	reduce by rule 25
-+ 	SIGNATURE	reduce by rule 25
-+ 	SHARING	reduce by rule 25
-+ 	INSTRUCTION	reduce by rule 25
-+ 	VLIW	reduce by rule 25
-+ 	SUPERSCALAR	reduce by rule 25
-+ 	FUN	reduce by rule 25
-+ 	VAL	reduce by rule 25
-+ 	INCLUDE	reduce by rule 25
-+ 	OPEN	reduce by rule 25
-+ 	LITTLE	reduce by rule 25
-+ 	BIG	reduce by rule 25
-+ 	PIPELINE	reduce by rule 25
-+ 	LOWERCASE	reduce by rule 25
-+ 	UPPERCASE	reduce by rule 25
-+ 	VERBATIM	reduce by rule 25
-+ 	RTL	reduce by rule 25
-+ 	NONFIX	reduce by rule 25
-+ 	INFIX	reduce by rule 25
-+ 	INFIXR	reduce by rule 25
-+ 	DEBUG	reduce by rule 25
-+ 	RESOURCE	reduce by rule 25
-+ 	CPU	reduce by rule 25
-+ 	LATENCY	reduce by rule 25
-+ 	EXCEPTION	reduce by rule 25
-+ 	EOF	reduce by rule 25
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 58:
-+ 
-+ 	cpubind : id . aliases int LBRACKET resources RBRACKET 
-+ 
-+ 	INT	reduce by rule 33
-+ 	STRING	shift 91
-+ 
-+ 	string	goto 176
-+ 	aliases	goto 175
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 59:
-+ 
-+ 	mymddecl : RESOURCE resourcebinds .  (reduce by rule 24)
-+ 
-+ 	ARCHITECTURE	reduce by rule 24
-+ 	END	reduce by rule 24
-+ 	LOCAL	reduce by rule 24
-+ 	IN	reduce by rule 24
-+ 	DATATYPE	reduce by rule 24
-+ 	TYPE	reduce by rule 24
-+ 	RPAREN	reduce by rule 24
-+ 	SEMICOLON	reduce by rule 24
-+ 	STORAGE	reduce by rule 24
-+ 	LOCATIONS	reduce by rule 24
-+ 	STRUCTURE	reduce by rule 24
-+ 	FUNCTOR	reduce by rule 24
-+ 	SIGNATURE	reduce by rule 24
-+ 	SHARING	reduce by rule 24
-+ 	INSTRUCTION	reduce by rule 24
-+ 	VLIW	reduce by rule 24
-+ 	SUPERSCALAR	reduce by rule 24
-+ 	FUN	reduce by rule 24
-+ 	VAL	reduce by rule 24
-+ 	INCLUDE	reduce by rule 24
-+ 	OPEN	reduce by rule 24
-+ 	LITTLE	reduce by rule 24
-+ 	BIG	reduce by rule 24
-+ 	PIPELINE	reduce by rule 24
-+ 	LOWERCASE	reduce by rule 24
-+ 	UPPERCASE	reduce by rule 24
-+ 	VERBATIM	reduce by rule 24
-+ 	RTL	reduce by rule 24
-+ 	NONFIX	reduce by rule 24
-+ 	INFIX	reduce by rule 24
-+ 	INFIXR	reduce by rule 24
-+ 	DEBUG	reduce by rule 24
-+ 	RESOURCE	reduce by rule 24
-+ 	CPU	reduce by rule 24
-+ 	LATENCY	reduce by rule 24
-+ 	EXCEPTION	reduce by rule 24
-+ 	EOF	reduce by rule 24
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 60:
-+ 
-+ 	resourcebinds : id .  (reduce by rule 28)
-+ 	resourcebinds : id . AND resourcebinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 28
-+ 	END	reduce by rule 28
-+ 	LOCAL	reduce by rule 28
-+ 	IN	reduce by rule 28
-+ 	DATATYPE	reduce by rule 28
-+ 	TYPE	reduce by rule 28
-+ 	AND	shift 177
-+ 	RPAREN	reduce by rule 28
-+ 	SEMICOLON	reduce by rule 28
-+ 	STORAGE	reduce by rule 28
-+ 	LOCATIONS	reduce by rule 28
-+ 	STRUCTURE	reduce by rule 28
-+ 	FUNCTOR	reduce by rule 28
-+ 	SIGNATURE	reduce by rule 28
-+ 	SHARING	reduce by rule 28
-+ 	INSTRUCTION	reduce by rule 28
-+ 	VLIW	reduce by rule 28
-+ 	SUPERSCALAR	reduce by rule 28
-+ 	FUN	reduce by rule 28
-+ 	VAL	reduce by rule 28
-+ 	INCLUDE	reduce by rule 28
-+ 	OPEN	reduce by rule 28
-+ 	LITTLE	reduce by rule 28
-+ 	BIG	reduce by rule 28
-+ 	PIPELINE	reduce by rule 28
-+ 	LOWERCASE	reduce by rule 28
-+ 	UPPERCASE	reduce by rule 28
-+ 	VERBATIM	reduce by rule 28
-+ 	RTL	reduce by rule 28
-+ 	NONFIX	reduce by rule 28
-+ 	INFIX	reduce by rule 28
-+ 	INFIXR	reduce by rule 28
-+ 	DEBUG	reduce by rule 28
-+ 	RESOURCE	reduce by rule 28
-+ 	CPU	reduce by rule 28
-+ 	LATENCY	reduce by rule 28
-+ 	EXCEPTION	reduce by rule 28
-+ 	EOF	reduce by rule 28
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 61:
-+ 
-+ 	mymddecl : DEBUG id .  (reduce by rule 23)
-+ 
-+ 	ARCHITECTURE	reduce by rule 23
-+ 	END	reduce by rule 23
-+ 	LOCAL	reduce by rule 23
-+ 	IN	reduce by rule 23
-+ 	DATATYPE	reduce by rule 23
-+ 	TYPE	reduce by rule 23
-+ 	RPAREN	reduce by rule 23
-+ 	SEMICOLON	reduce by rule 23
-+ 	STORAGE	reduce by rule 23
-+ 	LOCATIONS	reduce by rule 23
-+ 	STRUCTURE	reduce by rule 23
-+ 	FUNCTOR	reduce by rule 23
-+ 	SIGNATURE	reduce by rule 23
-+ 	SHARING	reduce by rule 23
-+ 	INSTRUCTION	reduce by rule 23
-+ 	VLIW	reduce by rule 23
-+ 	SUPERSCALAR	reduce by rule 23
-+ 	FUN	reduce by rule 23
-+ 	VAL	reduce by rule 23
-+ 	INCLUDE	reduce by rule 23
-+ 	OPEN	reduce by rule 23
-+ 	LITTLE	reduce by rule 23
-+ 	BIG	reduce by rule 23
-+ 	PIPELINE	reduce by rule 23
-+ 	LOWERCASE	reduce by rule 23
-+ 	UPPERCASE	reduce by rule 23
-+ 	VERBATIM	reduce by rule 23
-+ 	RTL	reduce by rule 23
-+ 	NONFIX	reduce by rule 23
-+ 	INFIX	reduce by rule 23
-+ 	INFIXR	reduce by rule 23
-+ 	DEBUG	reduce by rule 23
-+ 	RESOURCE	reduce by rule 23
-+ 	CPU	reduce by rule 23
-+ 	LATENCY	reduce by rule 23
-+ 	EXCEPTION	reduce by rule 23
-+ 	EOF	reduce by rule 23
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 62:
-+ 
-+ 	mymldecl : INFIXR intopt . syms 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 178
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 63:
-+ 
-+ 	intopt : int .  (reduce by rule 396)
-+ 
-+ 	TIMES	reduce by rule 396
-+ 	DEREF	reduce by rule 396
-+ 	NOT	reduce by rule 396
-+ 	CELLSET	reduce by rule 396
-+ 	ID	reduce by rule 396
-+ 	SYMBOL	reduce by rule 396
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 64:
-+ 
-+ 	int : INT .  (reduce by rule 395)
-+ 
-+ 	ARCHITECTURE	reduce by rule 395
-+ 	END	reduce by rule 395
-+ 	LOCAL	reduce by rule 395
-+ 	IN	reduce by rule 395
-+ 	OF	reduce by rule 395
-+ 	DATATYPE	reduce by rule 395
-+ 	TYPE	reduce by rule 395
-+ 	EQ	reduce by rule 395
-+ 	DOLLAR	reduce by rule 395
-+ 	TIMES	reduce by rule 395
-+ 	AND	reduce by rule 395
-+ 	DEREF	reduce by rule 395
-+ 	NOT	reduce by rule 395
-+ 	CONCAT	reduce by rule 395
-+ 	LLBRACKET	reduce by rule 395
-+ 	LHASHBRACKET	reduce by rule 395
-+ 	LPAREN	reduce by rule 395
-+ 	RPAREN	reduce by rule 395
-+ 	LBRACKET	reduce by rule 395
-+ 	RBRACKET	reduce by rule 395
-+ 	LBRACE	reduce by rule 395
-+ 	RBRACE	reduce by rule 395
-+ 	SEMICOLON	reduce by rule 395
-+ 	LDQUOTE	reduce by rule 395
-+ 	RMETA	reduce by rule 395
-+ 	CELLSET	reduce by rule 395
-+ 	STORAGE	reduce by rule 395
-+ 	LOCATIONS	reduce by rule 395
-+ 	HASH	reduce by rule 395
-+ 	COMMA	reduce by rule 395
-+ 	COLON	reduce by rule 395
-+ 	DOTDOT	reduce by rule 395
-+ 	AT	reduce by rule 395
-+ 	BAR	reduce by rule 395
-+ 	ARROW	reduce by rule 395
-+ 	DARROW	reduce by rule 395
-+ 	BITS	reduce by rule 395
-+ 	THEN	reduce by rule 395
-+ 	ELSE	reduce by rule 395
-+ 	TRUE	reduce by rule 395
-+ 	FALSE	reduce by rule 395
-+ 	WILD	reduce by rule 395
-+ 	HANDLE	reduce by rule 395
-+ 	LET	reduce by rule 395
-+ 	STRUCTURE	reduce by rule 395
-+ 	FUNCTOR	reduce by rule 395
-+ 	SIGNATURE	reduce by rule 395
-+ 	WHERE	reduce by rule 395
-+ 	SHARING	reduce by rule 395
-+ 	INSTRUCTION	reduce by rule 395
-+ 	CELL	reduce by rule 395
-+ 	VLIW	reduce by rule 395
-+ 	SUPERSCALAR	reduce by rule 395
-+ 	WITHTYPE	reduce by rule 395
-+ 	FUN	reduce by rule 395
-+ 	VAL	reduce by rule 395
-+ 	INCLUDE	reduce by rule 395
-+ 	OPEN	reduce by rule 395
-+ 	OP	reduce by rule 395
-+ 	LITTLE	reduce by rule 395
-+ 	BIG	reduce by rule 395
-+ 	PIPELINE	reduce by rule 395
-+ 	LOWERCASE	reduce by rule 395
-+ 	UPPERCASE	reduce by rule 395
-+ 	VERBATIM	reduce by rule 395
-+ 	RTL	reduce by rule 395
-+ 	SPAN	reduce by rule 395
-+ 	DELAYSLOT	reduce by rule 395
-+ 	ALWAYS	reduce by rule 395
-+ 	NEVER	reduce by rule 395
-+ 	NONFIX	reduce by rule 395
-+ 	INFIX	reduce by rule 395
-+ 	INFIXR	reduce by rule 395
-+ 	DEBUG	reduce by rule 395
-+ 	ASM_COLON	reduce by rule 395
-+ 	MC_COLON	reduce by rule 395
-+ 	RTL_COLON	reduce by rule 395
-+ 	DELAYSLOT_COLON	reduce by rule 395
-+ 	NULLIFIED_COLON	reduce by rule 395
-+ 	PADDING_COLON	reduce by rule 395
-+ 	AGGREGABLE	reduce by rule 395
-+ 	RESOURCE	reduce by rule 395
-+ 	CPU	reduce by rule 395
-+ 	LATENCY	reduce by rule 395
-+ 	EXCEPTION	reduce by rule 395
-+ 	ID	reduce by rule 395
-+ 	SYMBOL	reduce by rule 395
-+ 	WORD	reduce by rule 395
-+ 	INT	reduce by rule 395
-+ 	INTINF	reduce by rule 395
-+ 	REAL	reduce by rule 395
-+ 	STRING	reduce by rule 395
-+ 	CHAR	reduce by rule 395
-+ 	EOF	reduce by rule 395
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 65:
-+ 
-+ 	mymldecl : INFIX intopt . syms 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 179
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 66:
-+ 
-+ 	mymldecl : NONFIX syms .  (reduce by rule 79)
-+ 
-+ 	ARCHITECTURE	reduce by rule 79
-+ 	END	reduce by rule 79
-+ 	LOCAL	reduce by rule 79
-+ 	IN	reduce by rule 79
-+ 	DATATYPE	reduce by rule 79
-+ 	TYPE	reduce by rule 79
-+ 	RPAREN	reduce by rule 79
-+ 	SEMICOLON	reduce by rule 79
-+ 	STORAGE	reduce by rule 79
-+ 	LOCATIONS	reduce by rule 79
-+ 	STRUCTURE	reduce by rule 79
-+ 	FUNCTOR	reduce by rule 79
-+ 	SIGNATURE	reduce by rule 79
-+ 	SHARING	reduce by rule 79
-+ 	INSTRUCTION	reduce by rule 79
-+ 	VLIW	reduce by rule 79
-+ 	SUPERSCALAR	reduce by rule 79
-+ 	FUN	reduce by rule 79
-+ 	VAL	reduce by rule 79
-+ 	INCLUDE	reduce by rule 79
-+ 	OPEN	reduce by rule 79
-+ 	LITTLE	reduce by rule 79
-+ 	BIG	reduce by rule 79
-+ 	PIPELINE	reduce by rule 79
-+ 	LOWERCASE	reduce by rule 79
-+ 	UPPERCASE	reduce by rule 79
-+ 	VERBATIM	reduce by rule 79
-+ 	RTL	reduce by rule 79
-+ 	NONFIX	reduce by rule 79
-+ 	INFIX	reduce by rule 79
-+ 	INFIXR	reduce by rule 79
-+ 	DEBUG	reduce by rule 79
-+ 	RESOURCE	reduce by rule 79
-+ 	CPU	reduce by rule 79
-+ 	LATENCY	reduce by rule 79
-+ 	EXCEPTION	reduce by rule 79
-+ 	EOF	reduce by rule 79
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 67:
-+ 
-+ 	sym : symb .  (reduce by rule 417)
-+ 
-+ 	ARCHITECTURE	reduce by rule 417
-+ 	END	reduce by rule 417
-+ 	LOCAL	reduce by rule 417
-+ 	IN	reduce by rule 417
-+ 	OF	reduce by rule 417
-+ 	DATATYPE	reduce by rule 417
-+ 	TYPE	reduce by rule 417
-+ 	EQ	reduce by rule 417
-+ 	DOLLAR	reduce by rule 417
-+ 	TIMES	reduce by rule 417
-+ 	AND	reduce by rule 417
-+ 	DEREF	reduce by rule 417
-+ 	NOT	reduce by rule 417
-+ 	CONCAT	reduce by rule 417
-+ 	LLBRACKET	reduce by rule 417
-+ 	RRBRACKET	reduce by rule 417
-+ 	LHASHBRACKET	reduce by rule 417
-+ 	LPAREN	reduce by rule 417
-+ 	RPAREN	reduce by rule 417
-+ 	LBRACKET	reduce by rule 417
-+ 	RBRACKET	reduce by rule 417
-+ 	LBRACE	reduce by rule 417
-+ 	RBRACE	reduce by rule 417
-+ 	SEMICOLON	reduce by rule 417
-+ 	LDQUOTE	reduce by rule 417
-+ 	RMETA	reduce by rule 417
-+ 	CELLSET	reduce by rule 417
-+ 	STORAGE	reduce by rule 417
-+ 	LOCATIONS	reduce by rule 417
-+ 	HASH	reduce by rule 417
-+ 	COMMA	reduce by rule 417
-+ 	COLON	reduce by rule 417
-+ 	DOT	reduce by rule 417
-+ 	AT	reduce by rule 417
-+ 	BAR	reduce by rule 417
-+ 	DARROW	reduce by rule 417
-+ 	THEN	reduce by rule 417
-+ 	ELSE	reduce by rule 417
-+ 	TRUE	reduce by rule 417
-+ 	FALSE	reduce by rule 417
-+ 	WILD	reduce by rule 417
-+ 	HANDLE	reduce by rule 417
-+ 	LET	reduce by rule 417
-+ 	STRUCTURE	reduce by rule 417
-+ 	FUNCTOR	reduce by rule 417
-+ 	SIGNATURE	reduce by rule 417
-+ 	WHERE	reduce by rule 417
-+ 	SHARING	reduce by rule 417
-+ 	INSTRUCTION	reduce by rule 417
-+ 	VLIW	reduce by rule 417
-+ 	SUPERSCALAR	reduce by rule 417
-+ 	AS	reduce by rule 417
-+ 	WITHTYPE	reduce by rule 417
-+ 	FUN	reduce by rule 417
-+ 	VAL	reduce by rule 417
-+ 	INCLUDE	reduce by rule 417
-+ 	OPEN	reduce by rule 417
-+ 	OP	reduce by rule 417
-+ 	LITTLE	reduce by rule 417
-+ 	BIG	reduce by rule 417
-+ 	PIPELINE	reduce by rule 417
-+ 	LOWERCASE	reduce by rule 417
-+ 	UPPERCASE	reduce by rule 417
-+ 	VERBATIM	reduce by rule 417
-+ 	RTL	reduce by rule 417
-+ 	SPAN	reduce by rule 417
-+ 	DELAYSLOT	reduce by rule 417
-+ 	ALWAYS	reduce by rule 417
-+ 	NEVER	reduce by rule 417
-+ 	NONFIX	reduce by rule 417
-+ 	INFIX	reduce by rule 417
-+ 	INFIXR	reduce by rule 417
-+ 	DEBUG	reduce by rule 417
-+ 	ASM_COLON	reduce by rule 417
-+ 	MC_COLON	reduce by rule 417
-+ 	RTL_COLON	reduce by rule 417
-+ 	DELAYSLOT_COLON	reduce by rule 417
-+ 	NULLIFIED_COLON	reduce by rule 417
-+ 	PADDING_COLON	reduce by rule 417
-+ 	RESOURCE	reduce by rule 417
-+ 	CPU	reduce by rule 417
-+ 	LATENCY	reduce by rule 417
-+ 	EXCEPTION	reduce by rule 417
-+ 	ID	reduce by rule 417
-+ 	SYMBOL	reduce by rule 417
-+ 	WORD	reduce by rule 417
-+ 	INT	reduce by rule 417
-+ 	INTINF	reduce by rule 417
-+ 	REAL	reduce by rule 417
-+ 	STRING	reduce by rule 417
-+ 	CHAR	reduce by rule 417
-+ 	EOF	reduce by rule 417
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 68:
-+ 
-+ 	syms : sym .  (reduce by rule 109)
-+ 	syms : sym . syms 
-+ 
-+ 	ARCHITECTURE	reduce by rule 109
-+ 	END	reduce by rule 109
-+ 	LOCAL	reduce by rule 109
-+ 	IN	reduce by rule 109
-+ 	DATATYPE	reduce by rule 109
-+ 	TYPE	reduce by rule 109
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	RPAREN	reduce by rule 109
-+ 	SEMICOLON	reduce by rule 109
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 109
-+ 	LOCATIONS	reduce by rule 109
-+ 	COLON	reduce by rule 109
-+ 	STRUCTURE	reduce by rule 109
-+ 	FUNCTOR	reduce by rule 109
-+ 	SIGNATURE	reduce by rule 109
-+ 	SHARING	reduce by rule 109
-+ 	INSTRUCTION	reduce by rule 109
-+ 	VLIW	reduce by rule 109
-+ 	SUPERSCALAR	reduce by rule 109
-+ 	FUN	reduce by rule 109
-+ 	VAL	reduce by rule 109
-+ 	INCLUDE	reduce by rule 109
-+ 	OPEN	reduce by rule 109
-+ 	LITTLE	reduce by rule 109
-+ 	BIG	reduce by rule 109
-+ 	PIPELINE	reduce by rule 109
-+ 	LOWERCASE	reduce by rule 109
-+ 	UPPERCASE	reduce by rule 109
-+ 	VERBATIM	reduce by rule 109
-+ 	RTL	reduce by rule 109
-+ 	NONFIX	reduce by rule 109
-+ 	INFIX	reduce by rule 109
-+ 	INFIXR	reduce by rule 109
-+ 	DEBUG	reduce by rule 109
-+ 	RESOURCE	reduce by rule 109
-+ 	CPU	reduce by rule 109
-+ 	LATENCY	reduce by rule 109
-+ 	EXCEPTION	reduce by rule 109
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	EOF	reduce by rule 109
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 180
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 69:
-+ 
-+ 	sym : id .  (reduce by rule 416)
-+ 
-+ 	ARCHITECTURE	reduce by rule 416
-+ 	END	reduce by rule 416
-+ 	LOCAL	reduce by rule 416
-+ 	IN	reduce by rule 416
-+ 	OF	reduce by rule 416
-+ 	DATATYPE	reduce by rule 416
-+ 	TYPE	reduce by rule 416
-+ 	EQ	reduce by rule 416
-+ 	DOLLAR	reduce by rule 416
-+ 	TIMES	reduce by rule 416
-+ 	AND	reduce by rule 416
-+ 	DEREF	reduce by rule 416
-+ 	NOT	reduce by rule 416
-+ 	LLBRACKET	reduce by rule 416
-+ 	RRBRACKET	reduce by rule 416
-+ 	LHASHBRACKET	reduce by rule 416
-+ 	LPAREN	reduce by rule 416
-+ 	RPAREN	reduce by rule 416
-+ 	LBRACKET	reduce by rule 416
-+ 	RBRACKET	reduce by rule 416
-+ 	LBRACE	reduce by rule 416
-+ 	RBRACE	reduce by rule 416
-+ 	SEMICOLON	reduce by rule 416
-+ 	LDQUOTE	reduce by rule 416
-+ 	RMETA	reduce by rule 416
-+ 	CELLSET	reduce by rule 416
-+ 	STORAGE	reduce by rule 416
-+ 	LOCATIONS	reduce by rule 416
-+ 	HASH	reduce by rule 416
-+ 	COMMA	reduce by rule 416
-+ 	COLON	reduce by rule 416
-+ 	DOT	reduce by rule 416
-+ 	AT	reduce by rule 416
-+ 	BAR	reduce by rule 416
-+ 	DARROW	reduce by rule 416
-+ 	THEN	reduce by rule 416
-+ 	ELSE	reduce by rule 416
-+ 	TRUE	reduce by rule 416
-+ 	FALSE	reduce by rule 416
-+ 	WILD	reduce by rule 416
-+ 	HANDLE	reduce by rule 416
-+ 	LET	reduce by rule 416
-+ 	STRUCTURE	reduce by rule 416
-+ 	FUNCTOR	reduce by rule 416
-+ 	SIGNATURE	reduce by rule 416
-+ 	WHERE	reduce by rule 416
-+ 	SHARING	reduce by rule 416
-+ 	INSTRUCTION	reduce by rule 416
-+ 	VLIW	reduce by rule 416
-+ 	SUPERSCALAR	reduce by rule 416
-+ 	AS	reduce by rule 416
-+ 	WITHTYPE	reduce by rule 416
-+ 	FUN	reduce by rule 416
-+ 	VAL	reduce by rule 416
-+ 	INCLUDE	reduce by rule 416
-+ 	OPEN	reduce by rule 416
-+ 	OP	reduce by rule 416
-+ 	LITTLE	reduce by rule 416
-+ 	BIG	reduce by rule 416
-+ 	PIPELINE	reduce by rule 416
-+ 	LOWERCASE	reduce by rule 416
-+ 	UPPERCASE	reduce by rule 416
-+ 	VERBATIM	reduce by rule 416
-+ 	RTL	reduce by rule 416
-+ 	SPAN	reduce by rule 416
-+ 	DELAYSLOT	reduce by rule 416
-+ 	ALWAYS	reduce by rule 416
-+ 	NEVER	reduce by rule 416
-+ 	NONFIX	reduce by rule 416
-+ 	INFIX	reduce by rule 416
-+ 	INFIXR	reduce by rule 416
-+ 	DEBUG	reduce by rule 416
-+ 	ASM_COLON	reduce by rule 416
-+ 	MC_COLON	reduce by rule 416
-+ 	RTL_COLON	reduce by rule 416
-+ 	DELAYSLOT_COLON	reduce by rule 416
-+ 	NULLIFIED_COLON	reduce by rule 416
-+ 	PADDING_COLON	reduce by rule 416
-+ 	RESOURCE	reduce by rule 416
-+ 	CPU	reduce by rule 416
-+ 	LATENCY	reduce by rule 416
-+ 	EXCEPTION	reduce by rule 416
-+ 	ID	reduce by rule 416
-+ 	SYMBOL	reduce by rule 416
-+ 	WORD	reduce by rule 416
-+ 	INT	reduce by rule 416
-+ 	INTINF	reduce by rule 416
-+ 	REAL	reduce by rule 416
-+ 	STRING	reduce by rule 416
-+ 	CHAR	reduce by rule 416
-+ 	EOF	reduce by rule 416
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 70:
-+ 
-+ 	symb : NOT .  (reduce by rule 419)
-+ 
-+ 	ARCHITECTURE	reduce by rule 419
-+ 	END	reduce by rule 419
-+ 	LOCAL	reduce by rule 419
-+ 	IN	reduce by rule 419
-+ 	OF	reduce by rule 419
-+ 	DATATYPE	reduce by rule 419
-+ 	TYPE	reduce by rule 419
-+ 	EQ	reduce by rule 419
-+ 	DOLLAR	reduce by rule 419
-+ 	TIMES	reduce by rule 419
-+ 	AND	reduce by rule 419
-+ 	DEREF	reduce by rule 419
-+ 	NOT	reduce by rule 419
-+ 	CONCAT	reduce by rule 419
-+ 	LLBRACKET	reduce by rule 419
-+ 	RRBRACKET	reduce by rule 419
-+ 	LHASHBRACKET	reduce by rule 419
-+ 	LPAREN	reduce by rule 419
-+ 	RPAREN	reduce by rule 419
-+ 	LBRACKET	reduce by rule 419
-+ 	RBRACKET	reduce by rule 419
-+ 	LBRACE	reduce by rule 419
-+ 	RBRACE	reduce by rule 419
-+ 	SEMICOLON	reduce by rule 419
-+ 	LDQUOTE	reduce by rule 419
-+ 	RMETA	reduce by rule 419
-+ 	CELLSET	reduce by rule 419
-+ 	STORAGE	reduce by rule 419
-+ 	LOCATIONS	reduce by rule 419
-+ 	HASH	reduce by rule 419
-+ 	COMMA	reduce by rule 419
-+ 	COLON	reduce by rule 419
-+ 	DOT	reduce by rule 419
-+ 	AT	reduce by rule 419
-+ 	BAR	reduce by rule 419
-+ 	DARROW	reduce by rule 419
-+ 	THEN	reduce by rule 419
-+ 	ELSE	reduce by rule 419
-+ 	TRUE	reduce by rule 419
-+ 	FALSE	reduce by rule 419
-+ 	WILD	reduce by rule 419
-+ 	HANDLE	reduce by rule 419
-+ 	LET	reduce by rule 419
-+ 	STRUCTURE	reduce by rule 419
-+ 	FUNCTOR	reduce by rule 419
-+ 	SIGNATURE	reduce by rule 419
-+ 	WHERE	reduce by rule 419
-+ 	SHARING	reduce by rule 419
-+ 	INSTRUCTION	reduce by rule 419
-+ 	VLIW	reduce by rule 419
-+ 	SUPERSCALAR	reduce by rule 419
-+ 	AS	reduce by rule 419
-+ 	WITHTYPE	reduce by rule 419
-+ 	FUN	reduce by rule 419
-+ 	VAL	reduce by rule 419
-+ 	INCLUDE	reduce by rule 419
-+ 	OPEN	reduce by rule 419
-+ 	OP	reduce by rule 419
-+ 	LITTLE	reduce by rule 419
-+ 	BIG	reduce by rule 419
-+ 	PIPELINE	reduce by rule 419
-+ 	LOWERCASE	reduce by rule 419
-+ 	UPPERCASE	reduce by rule 419
-+ 	VERBATIM	reduce by rule 419
-+ 	RTL	reduce by rule 419
-+ 	SPAN	reduce by rule 419
-+ 	DELAYSLOT	reduce by rule 419
-+ 	ALWAYS	reduce by rule 419
-+ 	NEVER	reduce by rule 419
-+ 	NONFIX	reduce by rule 419
-+ 	INFIX	reduce by rule 419
-+ 	INFIXR	reduce by rule 419
-+ 	DEBUG	reduce by rule 419
-+ 	ASM_COLON	reduce by rule 419
-+ 	MC_COLON	reduce by rule 419
-+ 	RTL_COLON	reduce by rule 419
-+ 	DELAYSLOT_COLON	reduce by rule 419
-+ 	NULLIFIED_COLON	reduce by rule 419
-+ 	PADDING_COLON	reduce by rule 419
-+ 	RESOURCE	reduce by rule 419
-+ 	CPU	reduce by rule 419
-+ 	LATENCY	reduce by rule 419
-+ 	EXCEPTION	reduce by rule 419
-+ 	ID	reduce by rule 419
-+ 	SYMBOL	reduce by rule 419
-+ 	WORD	reduce by rule 419
-+ 	INT	reduce by rule 419
-+ 	INTINF	reduce by rule 419
-+ 	REAL	reduce by rule 419
-+ 	STRING	reduce by rule 419
-+ 	CHAR	reduce by rule 419
-+ 	EOF	reduce by rule 419
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 71:
-+ 
-+ 	symb : DEREF .  (reduce by rule 420)
-+ 
-+ 	ARCHITECTURE	reduce by rule 420
-+ 	END	reduce by rule 420
-+ 	LOCAL	reduce by rule 420
-+ 	IN	reduce by rule 420
-+ 	OF	reduce by rule 420
-+ 	DATATYPE	reduce by rule 420
-+ 	TYPE	reduce by rule 420
-+ 	EQ	reduce by rule 420
-+ 	DOLLAR	reduce by rule 420
-+ 	TIMES	reduce by rule 420
-+ 	AND	reduce by rule 420
-+ 	DEREF	reduce by rule 420
-+ 	NOT	reduce by rule 420
-+ 	CONCAT	reduce by rule 420
-+ 	LLBRACKET	reduce by rule 420
-+ 	RRBRACKET	reduce by rule 420
-+ 	LHASHBRACKET	reduce by rule 420
-+ 	LPAREN	reduce by rule 420
-+ 	RPAREN	reduce by rule 420
-+ 	LBRACKET	reduce by rule 420
-+ 	RBRACKET	reduce by rule 420
-+ 	LBRACE	reduce by rule 420
-+ 	RBRACE	reduce by rule 420
-+ 	SEMICOLON	reduce by rule 420
-+ 	LDQUOTE	reduce by rule 420
-+ 	RMETA	reduce by rule 420
-+ 	CELLSET	reduce by rule 420
-+ 	STORAGE	reduce by rule 420
-+ 	LOCATIONS	reduce by rule 420
-+ 	HASH	reduce by rule 420
-+ 	COMMA	reduce by rule 420
-+ 	COLON	reduce by rule 420
-+ 	DOT	reduce by rule 420
-+ 	AT	reduce by rule 420
-+ 	BAR	reduce by rule 420
-+ 	DARROW	reduce by rule 420
-+ 	THEN	reduce by rule 420
-+ 	ELSE	reduce by rule 420
-+ 	TRUE	reduce by rule 420
-+ 	FALSE	reduce by rule 420
-+ 	WILD	reduce by rule 420
-+ 	HANDLE	reduce by rule 420
-+ 	LET	reduce by rule 420
-+ 	STRUCTURE	reduce by rule 420
-+ 	FUNCTOR	reduce by rule 420
-+ 	SIGNATURE	reduce by rule 420
-+ 	WHERE	reduce by rule 420
-+ 	SHARING	reduce by rule 420
-+ 	INSTRUCTION	reduce by rule 420
-+ 	VLIW	reduce by rule 420
-+ 	SUPERSCALAR	reduce by rule 420
-+ 	AS	reduce by rule 420
-+ 	WITHTYPE	reduce by rule 420
-+ 	FUN	reduce by rule 420
-+ 	VAL	reduce by rule 420
-+ 	INCLUDE	reduce by rule 420
-+ 	OPEN	reduce by rule 420
-+ 	OP	reduce by rule 420
-+ 	LITTLE	reduce by rule 420
-+ 	BIG	reduce by rule 420
-+ 	PIPELINE	reduce by rule 420
-+ 	LOWERCASE	reduce by rule 420
-+ 	UPPERCASE	reduce by rule 420
-+ 	VERBATIM	reduce by rule 420
-+ 	RTL	reduce by rule 420
-+ 	SPAN	reduce by rule 420
-+ 	DELAYSLOT	reduce by rule 420
-+ 	ALWAYS	reduce by rule 420
-+ 	NEVER	reduce by rule 420
-+ 	NONFIX	reduce by rule 420
-+ 	INFIX	reduce by rule 420
-+ 	INFIXR	reduce by rule 420
-+ 	DEBUG	reduce by rule 420
-+ 	ASM_COLON	reduce by rule 420
-+ 	MC_COLON	reduce by rule 420
-+ 	RTL_COLON	reduce by rule 420
-+ 	DELAYSLOT_COLON	reduce by rule 420
-+ 	NULLIFIED_COLON	reduce by rule 420
-+ 	PADDING_COLON	reduce by rule 420
-+ 	RESOURCE	reduce by rule 420
-+ 	CPU	reduce by rule 420
-+ 	LATENCY	reduce by rule 420
-+ 	EXCEPTION	reduce by rule 420
-+ 	ID	reduce by rule 420
-+ 	SYMBOL	reduce by rule 420
-+ 	WORD	reduce by rule 420
-+ 	INT	reduce by rule 420
-+ 	INTINF	reduce by rule 420
-+ 	REAL	reduce by rule 420
-+ 	STRING	reduce by rule 420
-+ 	CHAR	reduce by rule 420
-+ 	EOF	reduce by rule 420
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 72:
-+ 
-+ 	symb : TIMES .  (reduce by rule 418)
-+ 
-+ 	ARCHITECTURE	reduce by rule 418
-+ 	END	reduce by rule 418
-+ 	LOCAL	reduce by rule 418
-+ 	IN	reduce by rule 418
-+ 	OF	reduce by rule 418
-+ 	DATATYPE	reduce by rule 418
-+ 	TYPE	reduce by rule 418
-+ 	EQ	reduce by rule 418
-+ 	DOLLAR	reduce by rule 418
-+ 	TIMES	reduce by rule 418
-+ 	AND	reduce by rule 418
-+ 	DEREF	reduce by rule 418
-+ 	NOT	reduce by rule 418
-+ 	CONCAT	reduce by rule 418
-+ 	LLBRACKET	reduce by rule 418
-+ 	RRBRACKET	reduce by rule 418
-+ 	LHASHBRACKET	reduce by rule 418
-+ 	LPAREN	reduce by rule 418
-+ 	RPAREN	reduce by rule 418
-+ 	LBRACKET	reduce by rule 418
-+ 	RBRACKET	reduce by rule 418
-+ 	LBRACE	reduce by rule 418
-+ 	RBRACE	reduce by rule 418
-+ 	SEMICOLON	reduce by rule 418
-+ 	LDQUOTE	reduce by rule 418
-+ 	RMETA	reduce by rule 418
-+ 	CELLSET	reduce by rule 418
-+ 	STORAGE	reduce by rule 418
-+ 	LOCATIONS	reduce by rule 418
-+ 	HASH	reduce by rule 418
-+ 	COMMA	reduce by rule 418
-+ 	COLON	reduce by rule 418
-+ 	DOT	reduce by rule 418
-+ 	AT	reduce by rule 418
-+ 	BAR	reduce by rule 418
-+ 	DARROW	reduce by rule 418
-+ 	THEN	reduce by rule 418
-+ 	ELSE	reduce by rule 418
-+ 	TRUE	reduce by rule 418
-+ 	FALSE	reduce by rule 418
-+ 	WILD	reduce by rule 418
-+ 	HANDLE	reduce by rule 418
-+ 	LET	reduce by rule 418
-+ 	STRUCTURE	reduce by rule 418
-+ 	FUNCTOR	reduce by rule 418
-+ 	SIGNATURE	reduce by rule 418
-+ 	WHERE	reduce by rule 418
-+ 	SHARING	reduce by rule 418
-+ 	INSTRUCTION	reduce by rule 418
-+ 	VLIW	reduce by rule 418
-+ 	SUPERSCALAR	reduce by rule 418
-+ 	AS	reduce by rule 418
-+ 	WITHTYPE	reduce by rule 418
-+ 	FUN	reduce by rule 418
-+ 	VAL	reduce by rule 418
-+ 	INCLUDE	reduce by rule 418
-+ 	OPEN	reduce by rule 418
-+ 	OP	reduce by rule 418
-+ 	LITTLE	reduce by rule 418
-+ 	BIG	reduce by rule 418
-+ 	PIPELINE	reduce by rule 418
-+ 	LOWERCASE	reduce by rule 418
-+ 	UPPERCASE	reduce by rule 418
-+ 	VERBATIM	reduce by rule 418
-+ 	RTL	reduce by rule 418
-+ 	SPAN	reduce by rule 418
-+ 	DELAYSLOT	reduce by rule 418
-+ 	ALWAYS	reduce by rule 418
-+ 	NEVER	reduce by rule 418
-+ 	NONFIX	reduce by rule 418
-+ 	INFIX	reduce by rule 418
-+ 	INFIXR	reduce by rule 418
-+ 	DEBUG	reduce by rule 418
-+ 	ASM_COLON	reduce by rule 418
-+ 	MC_COLON	reduce by rule 418
-+ 	RTL_COLON	reduce by rule 418
-+ 	DELAYSLOT_COLON	reduce by rule 418
-+ 	NULLIFIED_COLON	reduce by rule 418
-+ 	PADDING_COLON	reduce by rule 418
-+ 	RESOURCE	reduce by rule 418
-+ 	CPU	reduce by rule 418
-+ 	LATENCY	reduce by rule 418
-+ 	EXCEPTION	reduce by rule 418
-+ 	ID	reduce by rule 418
-+ 	SYMBOL	reduce by rule 418
-+ 	WORD	reduce by rule 418
-+ 	INT	reduce by rule 418
-+ 	INTINF	reduce by rule 418
-+ 	REAL	reduce by rule 418
-+ 	STRING	reduce by rule 418
-+ 	CHAR	reduce by rule 418
-+ 	EOF	reduce by rule 418
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 73:
-+ 
-+ 	bool : False .  (reduce by rule 430)
-+ 
-+ 	ARCHITECTURE	reduce by rule 430
-+ 	END	reduce by rule 430
-+ 	LOCAL	reduce by rule 430
-+ 	IN	reduce by rule 430
-+ 	OF	reduce by rule 430
-+ 	DATATYPE	reduce by rule 430
-+ 	TYPE	reduce by rule 430
-+ 	EQ	reduce by rule 430
-+ 	DOLLAR	reduce by rule 430
-+ 	TIMES	reduce by rule 430
-+ 	AND	reduce by rule 430
-+ 	DEREF	reduce by rule 430
-+ 	NOT	reduce by rule 430
-+ 	LLBRACKET	reduce by rule 430
-+ 	LHASHBRACKET	reduce by rule 430
-+ 	LPAREN	reduce by rule 430
-+ 	RPAREN	reduce by rule 430
-+ 	LBRACKET	reduce by rule 430
-+ 	RBRACKET	reduce by rule 430
-+ 	LBRACE	reduce by rule 430
-+ 	RBRACE	reduce by rule 430
-+ 	SEMICOLON	reduce by rule 430
-+ 	LDQUOTE	reduce by rule 430
-+ 	RMETA	reduce by rule 430
-+ 	CELLSET	reduce by rule 430
-+ 	STORAGE	reduce by rule 430
-+ 	LOCATIONS	reduce by rule 430
-+ 	HASH	reduce by rule 430
-+ 	COMMA	reduce by rule 430
-+ 	COLON	reduce by rule 430
-+ 	AT	reduce by rule 430
-+ 	BAR	reduce by rule 430
-+ 	DARROW	reduce by rule 430
-+ 	THEN	reduce by rule 430
-+ 	ELSE	reduce by rule 430
-+ 	TRUE	reduce by rule 430
-+ 	FALSE	reduce by rule 430
-+ 	WILD	reduce by rule 430
-+ 	HANDLE	reduce by rule 430
-+ 	LET	reduce by rule 430
-+ 	STRUCTURE	reduce by rule 430
-+ 	FUNCTOR	reduce by rule 430
-+ 	SIGNATURE	reduce by rule 430
-+ 	WHERE	reduce by rule 430
-+ 	SHARING	reduce by rule 430
-+ 	INSTRUCTION	reduce by rule 430
-+ 	VLIW	reduce by rule 430
-+ 	SUPERSCALAR	reduce by rule 430
-+ 	WITHTYPE	reduce by rule 430
-+ 	FUN	reduce by rule 430
-+ 	VAL	reduce by rule 430
-+ 	INCLUDE	reduce by rule 430
-+ 	OPEN	reduce by rule 430
-+ 	OP	reduce by rule 430
-+ 	LITTLE	reduce by rule 430
-+ 	BIG	reduce by rule 430
-+ 	PIPELINE	reduce by rule 430
-+ 	LOWERCASE	reduce by rule 430
-+ 	UPPERCASE	reduce by rule 430
-+ 	VERBATIM	reduce by rule 430
-+ 	RTL	reduce by rule 430
-+ 	SPAN	reduce by rule 430
-+ 	DELAYSLOT	reduce by rule 430
-+ 	ALWAYS	reduce by rule 430
-+ 	NEVER	reduce by rule 430
-+ 	NONFIX	reduce by rule 430
-+ 	INFIX	reduce by rule 430
-+ 	INFIXR	reduce by rule 430
-+ 	DEBUG	reduce by rule 430
-+ 	ASM_COLON	reduce by rule 430
-+ 	MC_COLON	reduce by rule 430
-+ 	RTL_COLON	reduce by rule 430
-+ 	DELAYSLOT_COLON	reduce by rule 430
-+ 	NULLIFIED_COLON	reduce by rule 430
-+ 	PADDING_COLON	reduce by rule 430
-+ 	RESOURCE	reduce by rule 430
-+ 	CPU	reduce by rule 430
-+ 	LATENCY	reduce by rule 430
-+ 	EXCEPTION	reduce by rule 430
-+ 	ID	reduce by rule 430
-+ 	SYMBOL	reduce by rule 430
-+ 	WORD	reduce by rule 430
-+ 	INT	reduce by rule 430
-+ 	INTINF	reduce by rule 430
-+ 	REAL	reduce by rule 430
-+ 	STRING	reduce by rule 430
-+ 	CHAR	reduce by rule 430
-+ 	EOF	reduce by rule 430
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 74:
-+ 
-+ 	bool : True .  (reduce by rule 431)
-+ 
-+ 	ARCHITECTURE	reduce by rule 431
-+ 	END	reduce by rule 431
-+ 	LOCAL	reduce by rule 431
-+ 	IN	reduce by rule 431
-+ 	OF	reduce by rule 431
-+ 	DATATYPE	reduce by rule 431
-+ 	TYPE	reduce by rule 431
-+ 	EQ	reduce by rule 431
-+ 	DOLLAR	reduce by rule 431
-+ 	TIMES	reduce by rule 431
-+ 	AND	reduce by rule 431
-+ 	DEREF	reduce by rule 431
-+ 	NOT	reduce by rule 431
-+ 	LLBRACKET	reduce by rule 431
-+ 	LHASHBRACKET	reduce by rule 431
-+ 	LPAREN	reduce by rule 431
-+ 	RPAREN	reduce by rule 431
-+ 	LBRACKET	reduce by rule 431
-+ 	RBRACKET	reduce by rule 431
-+ 	LBRACE	reduce by rule 431
-+ 	RBRACE	reduce by rule 431
-+ 	SEMICOLON	reduce by rule 431
-+ 	LDQUOTE	reduce by rule 431
-+ 	RMETA	reduce by rule 431
-+ 	CELLSET	reduce by rule 431
-+ 	STORAGE	reduce by rule 431
-+ 	LOCATIONS	reduce by rule 431
-+ 	HASH	reduce by rule 431
-+ 	COMMA	reduce by rule 431
-+ 	COLON	reduce by rule 431
-+ 	AT	reduce by rule 431
-+ 	BAR	reduce by rule 431
-+ 	DARROW	reduce by rule 431
-+ 	THEN	reduce by rule 431
-+ 	ELSE	reduce by rule 431
-+ 	TRUE	reduce by rule 431
-+ 	FALSE	reduce by rule 431
-+ 	WILD	reduce by rule 431
-+ 	HANDLE	reduce by rule 431
-+ 	LET	reduce by rule 431
-+ 	STRUCTURE	reduce by rule 431
-+ 	FUNCTOR	reduce by rule 431
-+ 	SIGNATURE	reduce by rule 431
-+ 	WHERE	reduce by rule 431
-+ 	SHARING	reduce by rule 431
-+ 	INSTRUCTION	reduce by rule 431
-+ 	VLIW	reduce by rule 431
-+ 	SUPERSCALAR	reduce by rule 431
-+ 	WITHTYPE	reduce by rule 431
-+ 	FUN	reduce by rule 431
-+ 	VAL	reduce by rule 431
-+ 	INCLUDE	reduce by rule 431
-+ 	OPEN	reduce by rule 431
-+ 	OP	reduce by rule 431
-+ 	LITTLE	reduce by rule 431
-+ 	BIG	reduce by rule 431
-+ 	PIPELINE	reduce by rule 431
-+ 	LOWERCASE	reduce by rule 431
-+ 	UPPERCASE	reduce by rule 431
-+ 	VERBATIM	reduce by rule 431
-+ 	RTL	reduce by rule 431
-+ 	SPAN	reduce by rule 431
-+ 	DELAYSLOT	reduce by rule 431
-+ 	ALWAYS	reduce by rule 431
-+ 	NEVER	reduce by rule 431
-+ 	NONFIX	reduce by rule 431
-+ 	INFIX	reduce by rule 431
-+ 	INFIXR	reduce by rule 431
-+ 	DEBUG	reduce by rule 431
-+ 	ASM_COLON	reduce by rule 431
-+ 	MC_COLON	reduce by rule 431
-+ 	RTL_COLON	reduce by rule 431
-+ 	DELAYSLOT_COLON	reduce by rule 431
-+ 	NULLIFIED_COLON	reduce by rule 431
-+ 	PADDING_COLON	reduce by rule 431
-+ 	RESOURCE	reduce by rule 431
-+ 	CPU	reduce by rule 431
-+ 	LATENCY	reduce by rule 431
-+ 	EXCEPTION	reduce by rule 431
-+ 	ID	reduce by rule 431
-+ 	SYMBOL	reduce by rule 431
-+ 	WORD	reduce by rule 431
-+ 	INT	reduce by rule 431
-+ 	INTINF	reduce by rule 431
-+ 	REAL	reduce by rule 431
-+ 	STRING	reduce by rule 431
-+ 	CHAR	reduce by rule 431
-+ 	EOF	reduce by rule 431
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 75:
-+ 
-+ 	apat : literal .  (reduce by rule 291)
-+ 
-+ 	EQ	reduce by rule 291
-+ 	TIMES	reduce by rule 291
-+ 	AND	reduce by rule 291
-+ 	DEREF	reduce by rule 291
-+ 	NOT	reduce by rule 291
-+ 	LHASHBRACKET	reduce by rule 291
-+ 	LPAREN	reduce by rule 291
-+ 	RPAREN	reduce by rule 291
-+ 	LBRACKET	reduce by rule 291
-+ 	RBRACKET	reduce by rule 291
-+ 	LBRACE	reduce by rule 291
-+ 	RBRACE	reduce by rule 291
-+ 	CELLSET	reduce by rule 291
-+ 	COMMA	reduce by rule 291
-+ 	COLON	reduce by rule 291
-+ 	BAR	reduce by rule 291
-+ 	DARROW	reduce by rule 291
-+ 	TRUE	reduce by rule 291
-+ 	FALSE	reduce by rule 291
-+ 	WILD	reduce by rule 291
-+ 	WHERE	reduce by rule 291
-+ 	OP	reduce by rule 291
-+ 	ALWAYS	reduce by rule 291
-+ 	NEVER	reduce by rule 291
-+ 	EXCEPTION	reduce by rule 291
-+ 	ID	reduce by rule 291
-+ 	SYMBOL	reduce by rule 291
-+ 	WORD	reduce by rule 291
-+ 	INT	reduce by rule 291
-+ 	INTINF	reduce by rule 291
-+ 	REAL	reduce by rule 291
-+ 	STRING	reduce by rule 291
-+ 	CHAR	reduce by rule 291
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 76:
-+ 
-+ 	literal : bool .  (reduce by rule 239)
-+ 
-+ 	ARCHITECTURE	reduce by rule 239
-+ 	END	reduce by rule 239
-+ 	LOCAL	reduce by rule 239
-+ 	IN	reduce by rule 239
-+ 	OF	reduce by rule 239
-+ 	DATATYPE	reduce by rule 239
-+ 	TYPE	reduce by rule 239
-+ 	EQ	reduce by rule 239
-+ 	DOLLAR	reduce by rule 239
-+ 	TIMES	reduce by rule 239
-+ 	AND	reduce by rule 239
-+ 	DEREF	reduce by rule 239
-+ 	NOT	reduce by rule 239
-+ 	LLBRACKET	reduce by rule 239
-+ 	LHASHBRACKET	reduce by rule 239
-+ 	LPAREN	reduce by rule 239
-+ 	RPAREN	reduce by rule 239
-+ 	LBRACKET	reduce by rule 239
-+ 	RBRACKET	reduce by rule 239
-+ 	LBRACE	reduce by rule 239
-+ 	RBRACE	reduce by rule 239
-+ 	SEMICOLON	reduce by rule 239
-+ 	LDQUOTE	reduce by rule 239
-+ 	RMETA	reduce by rule 239
-+ 	CELLSET	reduce by rule 239
-+ 	STORAGE	reduce by rule 239
-+ 	LOCATIONS	reduce by rule 239
-+ 	HASH	reduce by rule 239
-+ 	COMMA	reduce by rule 239
-+ 	COLON	reduce by rule 239
-+ 	AT	reduce by rule 239
-+ 	BAR	reduce by rule 239
-+ 	DARROW	reduce by rule 239
-+ 	THEN	reduce by rule 239
-+ 	ELSE	reduce by rule 239
-+ 	TRUE	reduce by rule 239
-+ 	FALSE	reduce by rule 239
-+ 	WILD	reduce by rule 239
-+ 	HANDLE	reduce by rule 239
-+ 	LET	reduce by rule 239
-+ 	STRUCTURE	reduce by rule 239
-+ 	FUNCTOR	reduce by rule 239
-+ 	SIGNATURE	reduce by rule 239
-+ 	WHERE	reduce by rule 239
-+ 	SHARING	reduce by rule 239
-+ 	INSTRUCTION	reduce by rule 239
-+ 	VLIW	reduce by rule 239
-+ 	SUPERSCALAR	reduce by rule 239
-+ 	WITHTYPE	reduce by rule 239
-+ 	FUN	reduce by rule 239
-+ 	VAL	reduce by rule 239
-+ 	INCLUDE	reduce by rule 239
-+ 	OPEN	reduce by rule 239
-+ 	OP	reduce by rule 239
-+ 	LITTLE	reduce by rule 239
-+ 	BIG	reduce by rule 239
-+ 	PIPELINE	reduce by rule 239
-+ 	LOWERCASE	reduce by rule 239
-+ 	UPPERCASE	reduce by rule 239
-+ 	VERBATIM	reduce by rule 239
-+ 	RTL	reduce by rule 239
-+ 	SPAN	reduce by rule 239
-+ 	DELAYSLOT	reduce by rule 239
-+ 	ALWAYS	reduce by rule 239
-+ 	NEVER	reduce by rule 239
-+ 	NONFIX	reduce by rule 239
-+ 	INFIX	reduce by rule 239
-+ 	INFIXR	reduce by rule 239
-+ 	DEBUG	reduce by rule 239
-+ 	ASM_COLON	reduce by rule 239
-+ 	MC_COLON	reduce by rule 239
-+ 	RTL_COLON	reduce by rule 239
-+ 	DELAYSLOT_COLON	reduce by rule 239
-+ 	NULLIFIED_COLON	reduce by rule 239
-+ 	PADDING_COLON	reduce by rule 239
-+ 	RESOURCE	reduce by rule 239
-+ 	CPU	reduce by rule 239
-+ 	LATENCY	reduce by rule 239
-+ 	EXCEPTION	reduce by rule 239
-+ 	ID	reduce by rule 239
-+ 	SYMBOL	reduce by rule 239
-+ 	WORD	reduce by rule 239
-+ 	INT	reduce by rule 239
-+ 	INTINF	reduce by rule 239
-+ 	REAL	reduce by rule 239
-+ 	STRING	reduce by rule 239
-+ 	CHAR	reduce by rule 239
-+ 	EOF	reduce by rule 239
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 77:
-+ 
-+ 	literal : char .  (reduce by rule 238)
-+ 
-+ 	ARCHITECTURE	reduce by rule 238
-+ 	END	reduce by rule 238
-+ 	LOCAL	reduce by rule 238
-+ 	IN	reduce by rule 238
-+ 	OF	reduce by rule 238
-+ 	DATATYPE	reduce by rule 238
-+ 	TYPE	reduce by rule 238
-+ 	EQ	reduce by rule 238
-+ 	DOLLAR	reduce by rule 238
-+ 	TIMES	reduce by rule 238
-+ 	AND	reduce by rule 238
-+ 	DEREF	reduce by rule 238
-+ 	NOT	reduce by rule 238
-+ 	LLBRACKET	reduce by rule 238
-+ 	LHASHBRACKET	reduce by rule 238
-+ 	LPAREN	reduce by rule 238
-+ 	RPAREN	reduce by rule 238
-+ 	LBRACKET	reduce by rule 238
-+ 	RBRACKET	reduce by rule 238
-+ 	LBRACE	reduce by rule 238
-+ 	RBRACE	reduce by rule 238
-+ 	SEMICOLON	reduce by rule 238
-+ 	LDQUOTE	reduce by rule 238
-+ 	RMETA	reduce by rule 238
-+ 	CELLSET	reduce by rule 238
-+ 	STORAGE	reduce by rule 238
-+ 	LOCATIONS	reduce by rule 238
-+ 	HASH	reduce by rule 238
-+ 	COMMA	reduce by rule 238
-+ 	COLON	reduce by rule 238
-+ 	AT	reduce by rule 238
-+ 	BAR	reduce by rule 238
-+ 	DARROW	reduce by rule 238
-+ 	THEN	reduce by rule 238
-+ 	ELSE	reduce by rule 238
-+ 	TRUE	reduce by rule 238
-+ 	FALSE	reduce by rule 238
-+ 	WILD	reduce by rule 238
-+ 	HANDLE	reduce by rule 238
-+ 	LET	reduce by rule 238
-+ 	STRUCTURE	reduce by rule 238
-+ 	FUNCTOR	reduce by rule 238
-+ 	SIGNATURE	reduce by rule 238
-+ 	WHERE	reduce by rule 238
-+ 	SHARING	reduce by rule 238
-+ 	INSTRUCTION	reduce by rule 238
-+ 	VLIW	reduce by rule 238
-+ 	SUPERSCALAR	reduce by rule 238
-+ 	WITHTYPE	reduce by rule 238
-+ 	FUN	reduce by rule 238
-+ 	VAL	reduce by rule 238
-+ 	INCLUDE	reduce by rule 238
-+ 	OPEN	reduce by rule 238
-+ 	OP	reduce by rule 238
-+ 	LITTLE	reduce by rule 238
-+ 	BIG	reduce by rule 238
-+ 	PIPELINE	reduce by rule 238
-+ 	LOWERCASE	reduce by rule 238
-+ 	UPPERCASE	reduce by rule 238
-+ 	VERBATIM	reduce by rule 238
-+ 	RTL	reduce by rule 238
-+ 	SPAN	reduce by rule 238
-+ 	DELAYSLOT	reduce by rule 238
-+ 	ALWAYS	reduce by rule 238
-+ 	NEVER	reduce by rule 238
-+ 	NONFIX	reduce by rule 238
-+ 	INFIX	reduce by rule 238
-+ 	INFIXR	reduce by rule 238
-+ 	DEBUG	reduce by rule 238
-+ 	ASM_COLON	reduce by rule 238
-+ 	MC_COLON	reduce by rule 238
-+ 	RTL_COLON	reduce by rule 238
-+ 	DELAYSLOT_COLON	reduce by rule 238
-+ 	NULLIFIED_COLON	reduce by rule 238
-+ 	PADDING_COLON	reduce by rule 238
-+ 	RESOURCE	reduce by rule 238
-+ 	CPU	reduce by rule 238
-+ 	LATENCY	reduce by rule 238
-+ 	EXCEPTION	reduce by rule 238
-+ 	ID	reduce by rule 238
-+ 	SYMBOL	reduce by rule 238
-+ 	WORD	reduce by rule 238
-+ 	INT	reduce by rule 238
-+ 	INTINF	reduce by rule 238
-+ 	REAL	reduce by rule 238
-+ 	STRING	reduce by rule 238
-+ 	CHAR	reduce by rule 238
-+ 	EOF	reduce by rule 238
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 78:
-+ 
-+ 	literal : string .  (reduce by rule 237)
-+ 
-+ 	ARCHITECTURE	reduce by rule 237
-+ 	END	reduce by rule 237
-+ 	LOCAL	reduce by rule 237
-+ 	IN	reduce by rule 237
-+ 	OF	reduce by rule 237
-+ 	DATATYPE	reduce by rule 237
-+ 	TYPE	reduce by rule 237
-+ 	EQ	reduce by rule 237
-+ 	DOLLAR	reduce by rule 237
-+ 	TIMES	reduce by rule 237
-+ 	AND	reduce by rule 237
-+ 	DEREF	reduce by rule 237
-+ 	NOT	reduce by rule 237
-+ 	LLBRACKET	reduce by rule 237
-+ 	LHASHBRACKET	reduce by rule 237
-+ 	LPAREN	reduce by rule 237
-+ 	RPAREN	reduce by rule 237
-+ 	LBRACKET	reduce by rule 237
-+ 	RBRACKET	reduce by rule 237
-+ 	LBRACE	reduce by rule 237
-+ 	RBRACE	reduce by rule 237
-+ 	SEMICOLON	reduce by rule 237
-+ 	LDQUOTE	reduce by rule 237
-+ 	RMETA	reduce by rule 237
-+ 	CELLSET	reduce by rule 237
-+ 	STORAGE	reduce by rule 237
-+ 	LOCATIONS	reduce by rule 237
-+ 	HASH	reduce by rule 237
-+ 	COMMA	reduce by rule 237
-+ 	COLON	reduce by rule 237
-+ 	AT	reduce by rule 237
-+ 	BAR	reduce by rule 237
-+ 	DARROW	reduce by rule 237
-+ 	THEN	reduce by rule 237
-+ 	ELSE	reduce by rule 237
-+ 	TRUE	reduce by rule 237
-+ 	FALSE	reduce by rule 237
-+ 	WILD	reduce by rule 237
-+ 	HANDLE	reduce by rule 237
-+ 	LET	reduce by rule 237
-+ 	STRUCTURE	reduce by rule 237
-+ 	FUNCTOR	reduce by rule 237
-+ 	SIGNATURE	reduce by rule 237
-+ 	WHERE	reduce by rule 237
-+ 	SHARING	reduce by rule 237
-+ 	INSTRUCTION	reduce by rule 237
-+ 	VLIW	reduce by rule 237
-+ 	SUPERSCALAR	reduce by rule 237
-+ 	WITHTYPE	reduce by rule 237
-+ 	FUN	reduce by rule 237
-+ 	VAL	reduce by rule 237
-+ 	INCLUDE	reduce by rule 237
-+ 	OPEN	reduce by rule 237
-+ 	OP	reduce by rule 237
-+ 	LITTLE	reduce by rule 237
-+ 	BIG	reduce by rule 237
-+ 	PIPELINE	reduce by rule 237
-+ 	LOWERCASE	reduce by rule 237
-+ 	UPPERCASE	reduce by rule 237
-+ 	VERBATIM	reduce by rule 237
-+ 	RTL	reduce by rule 237
-+ 	SPAN	reduce by rule 237
-+ 	DELAYSLOT	reduce by rule 237
-+ 	ALWAYS	reduce by rule 237
-+ 	NEVER	reduce by rule 237
-+ 	NONFIX	reduce by rule 237
-+ 	INFIX	reduce by rule 237
-+ 	INFIXR	reduce by rule 237
-+ 	DEBUG	reduce by rule 237
-+ 	ASM_COLON	reduce by rule 237
-+ 	MC_COLON	reduce by rule 237
-+ 	RTL_COLON	reduce by rule 237
-+ 	DELAYSLOT_COLON	reduce by rule 237
-+ 	NULLIFIED_COLON	reduce by rule 237
-+ 	PADDING_COLON	reduce by rule 237
-+ 	RESOURCE	reduce by rule 237
-+ 	CPU	reduce by rule 237
-+ 	LATENCY	reduce by rule 237
-+ 	EXCEPTION	reduce by rule 237
-+ 	ID	reduce by rule 237
-+ 	SYMBOL	reduce by rule 237
-+ 	WORD	reduce by rule 237
-+ 	INT	reduce by rule 237
-+ 	INTINF	reduce by rule 237
-+ 	REAL	reduce by rule 237
-+ 	STRING	reduce by rule 237
-+ 	CHAR	reduce by rule 237
-+ 	EOF	reduce by rule 237
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 79:
-+ 
-+ 	literal : real .  (reduce by rule 240)
-+ 
-+ 	ARCHITECTURE	reduce by rule 240
-+ 	END	reduce by rule 240
-+ 	LOCAL	reduce by rule 240
-+ 	IN	reduce by rule 240
-+ 	OF	reduce by rule 240
-+ 	DATATYPE	reduce by rule 240
-+ 	TYPE	reduce by rule 240
-+ 	EQ	reduce by rule 240
-+ 	DOLLAR	reduce by rule 240
-+ 	TIMES	reduce by rule 240
-+ 	AND	reduce by rule 240
-+ 	DEREF	reduce by rule 240
-+ 	NOT	reduce by rule 240
-+ 	LLBRACKET	reduce by rule 240
-+ 	LHASHBRACKET	reduce by rule 240
-+ 	LPAREN	reduce by rule 240
-+ 	RPAREN	reduce by rule 240
-+ 	LBRACKET	reduce by rule 240
-+ 	RBRACKET	reduce by rule 240
-+ 	LBRACE	reduce by rule 240
-+ 	RBRACE	reduce by rule 240
-+ 	SEMICOLON	reduce by rule 240
-+ 	LDQUOTE	reduce by rule 240
-+ 	RMETA	reduce by rule 240
-+ 	CELLSET	reduce by rule 240
-+ 	STORAGE	reduce by rule 240
-+ 	LOCATIONS	reduce by rule 240
-+ 	HASH	reduce by rule 240
-+ 	COMMA	reduce by rule 240
-+ 	COLON	reduce by rule 240
-+ 	AT	reduce by rule 240
-+ 	BAR	reduce by rule 240
-+ 	DARROW	reduce by rule 240
-+ 	THEN	reduce by rule 240
-+ 	ELSE	reduce by rule 240
-+ 	TRUE	reduce by rule 240
-+ 	FALSE	reduce by rule 240
-+ 	WILD	reduce by rule 240
-+ 	HANDLE	reduce by rule 240
-+ 	LET	reduce by rule 240
-+ 	STRUCTURE	reduce by rule 240
-+ 	FUNCTOR	reduce by rule 240
-+ 	SIGNATURE	reduce by rule 240
-+ 	WHERE	reduce by rule 240
-+ 	SHARING	reduce by rule 240
-+ 	INSTRUCTION	reduce by rule 240
-+ 	VLIW	reduce by rule 240
-+ 	SUPERSCALAR	reduce by rule 240
-+ 	WITHTYPE	reduce by rule 240
-+ 	FUN	reduce by rule 240
-+ 	VAL	reduce by rule 240
-+ 	INCLUDE	reduce by rule 240
-+ 	OPEN	reduce by rule 240
-+ 	OP	reduce by rule 240
-+ 	LITTLE	reduce by rule 240
-+ 	BIG	reduce by rule 240
-+ 	PIPELINE	reduce by rule 240
-+ 	LOWERCASE	reduce by rule 240
-+ 	UPPERCASE	reduce by rule 240
-+ 	VERBATIM	reduce by rule 240
-+ 	RTL	reduce by rule 240
-+ 	SPAN	reduce by rule 240
-+ 	DELAYSLOT	reduce by rule 240
-+ 	ALWAYS	reduce by rule 240
-+ 	NEVER	reduce by rule 240
-+ 	NONFIX	reduce by rule 240
-+ 	INFIX	reduce by rule 240
-+ 	INFIXR	reduce by rule 240
-+ 	DEBUG	reduce by rule 240
-+ 	ASM_COLON	reduce by rule 240
-+ 	MC_COLON	reduce by rule 240
-+ 	RTL_COLON	reduce by rule 240
-+ 	DELAYSLOT_COLON	reduce by rule 240
-+ 	NULLIFIED_COLON	reduce by rule 240
-+ 	PADDING_COLON	reduce by rule 240
-+ 	RESOURCE	reduce by rule 240
-+ 	CPU	reduce by rule 240
-+ 	LATENCY	reduce by rule 240
-+ 	EXCEPTION	reduce by rule 240
-+ 	ID	reduce by rule 240
-+ 	SYMBOL	reduce by rule 240
-+ 	WORD	reduce by rule 240
-+ 	INT	reduce by rule 240
-+ 	INTINF	reduce by rule 240
-+ 	REAL	reduce by rule 240
-+ 	STRING	reduce by rule 240
-+ 	CHAR	reduce by rule 240
-+ 	EOF	reduce by rule 240
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 80:
-+ 
-+ 	literal : intinf .  (reduce by rule 236)
-+ 
-+ 	ARCHITECTURE	reduce by rule 236
-+ 	END	reduce by rule 236
-+ 	LOCAL	reduce by rule 236
-+ 	IN	reduce by rule 236
-+ 	OF	reduce by rule 236
-+ 	DATATYPE	reduce by rule 236
-+ 	TYPE	reduce by rule 236
-+ 	EQ	reduce by rule 236
-+ 	DOLLAR	reduce by rule 236
-+ 	TIMES	reduce by rule 236
-+ 	AND	reduce by rule 236
-+ 	DEREF	reduce by rule 236
-+ 	NOT	reduce by rule 236
-+ 	LLBRACKET	reduce by rule 236
-+ 	LHASHBRACKET	reduce by rule 236
-+ 	LPAREN	reduce by rule 236
-+ 	RPAREN	reduce by rule 236
-+ 	LBRACKET	reduce by rule 236
-+ 	RBRACKET	reduce by rule 236
-+ 	LBRACE	reduce by rule 236
-+ 	RBRACE	reduce by rule 236
-+ 	SEMICOLON	reduce by rule 236
-+ 	LDQUOTE	reduce by rule 236
-+ 	RMETA	reduce by rule 236
-+ 	CELLSET	reduce by rule 236
-+ 	STORAGE	reduce by rule 236
-+ 	LOCATIONS	reduce by rule 236
-+ 	HASH	reduce by rule 236
-+ 	COMMA	reduce by rule 236
-+ 	COLON	reduce by rule 236
-+ 	AT	reduce by rule 236
-+ 	BAR	reduce by rule 236
-+ 	DARROW	reduce by rule 236
-+ 	THEN	reduce by rule 236
-+ 	ELSE	reduce by rule 236
-+ 	TRUE	reduce by rule 236
-+ 	FALSE	reduce by rule 236
-+ 	WILD	reduce by rule 236
-+ 	HANDLE	reduce by rule 236
-+ 	LET	reduce by rule 236
-+ 	STRUCTURE	reduce by rule 236
-+ 	FUNCTOR	reduce by rule 236
-+ 	SIGNATURE	reduce by rule 236
-+ 	WHERE	reduce by rule 236
-+ 	SHARING	reduce by rule 236
-+ 	INSTRUCTION	reduce by rule 236
-+ 	VLIW	reduce by rule 236
-+ 	SUPERSCALAR	reduce by rule 236
-+ 	WITHTYPE	reduce by rule 236
-+ 	FUN	reduce by rule 236
-+ 	VAL	reduce by rule 236
-+ 	INCLUDE	reduce by rule 236
-+ 	OPEN	reduce by rule 236
-+ 	OP	reduce by rule 236
-+ 	LITTLE	reduce by rule 236
-+ 	BIG	reduce by rule 236
-+ 	PIPELINE	reduce by rule 236
-+ 	LOWERCASE	reduce by rule 236
-+ 	UPPERCASE	reduce by rule 236
-+ 	VERBATIM	reduce by rule 236
-+ 	RTL	reduce by rule 236
-+ 	SPAN	reduce by rule 236
-+ 	DELAYSLOT	reduce by rule 236
-+ 	ALWAYS	reduce by rule 236
-+ 	NEVER	reduce by rule 236
-+ 	NONFIX	reduce by rule 236
-+ 	INFIX	reduce by rule 236
-+ 	INFIXR	reduce by rule 236
-+ 	DEBUG	reduce by rule 236
-+ 	ASM_COLON	reduce by rule 236
-+ 	MC_COLON	reduce by rule 236
-+ 	RTL_COLON	reduce by rule 236
-+ 	DELAYSLOT_COLON	reduce by rule 236
-+ 	NULLIFIED_COLON	reduce by rule 236
-+ 	PADDING_COLON	reduce by rule 236
-+ 	RESOURCE	reduce by rule 236
-+ 	CPU	reduce by rule 236
-+ 	LATENCY	reduce by rule 236
-+ 	EXCEPTION	reduce by rule 236
-+ 	ID	reduce by rule 236
-+ 	SYMBOL	reduce by rule 236
-+ 	WORD	reduce by rule 236
-+ 	INT	reduce by rule 236
-+ 	INTINF	reduce by rule 236
-+ 	REAL	reduce by rule 236
-+ 	STRING	reduce by rule 236
-+ 	CHAR	reduce by rule 236
-+ 	EOF	reduce by rule 236
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 81:
-+ 
-+ 	literal : int .  (reduce by rule 235)
-+ 
-+ 	ARCHITECTURE	reduce by rule 235
-+ 	END	reduce by rule 235
-+ 	LOCAL	reduce by rule 235
-+ 	IN	reduce by rule 235
-+ 	OF	reduce by rule 235
-+ 	DATATYPE	reduce by rule 235
-+ 	TYPE	reduce by rule 235
-+ 	EQ	reduce by rule 235
-+ 	DOLLAR	reduce by rule 235
-+ 	TIMES	reduce by rule 235
-+ 	AND	reduce by rule 235
-+ 	DEREF	reduce by rule 235
-+ 	NOT	reduce by rule 235
-+ 	LLBRACKET	reduce by rule 235
-+ 	LHASHBRACKET	reduce by rule 235
-+ 	LPAREN	reduce by rule 235
-+ 	RPAREN	reduce by rule 235
-+ 	LBRACKET	reduce by rule 235
-+ 	RBRACKET	reduce by rule 235
-+ 	LBRACE	reduce by rule 235
-+ 	RBRACE	reduce by rule 235
-+ 	SEMICOLON	reduce by rule 235
-+ 	LDQUOTE	reduce by rule 235
-+ 	RMETA	reduce by rule 235
-+ 	CELLSET	reduce by rule 235
-+ 	STORAGE	reduce by rule 235
-+ 	LOCATIONS	reduce by rule 235
-+ 	HASH	reduce by rule 235
-+ 	COMMA	reduce by rule 235
-+ 	COLON	reduce by rule 235
-+ 	AT	reduce by rule 235
-+ 	BAR	reduce by rule 235
-+ 	DARROW	reduce by rule 235
-+ 	THEN	reduce by rule 235
-+ 	ELSE	reduce by rule 235
-+ 	TRUE	reduce by rule 235
-+ 	FALSE	reduce by rule 235
-+ 	WILD	reduce by rule 235
-+ 	HANDLE	reduce by rule 235
-+ 	LET	reduce by rule 235
-+ 	STRUCTURE	reduce by rule 235
-+ 	FUNCTOR	reduce by rule 235
-+ 	SIGNATURE	reduce by rule 235
-+ 	WHERE	reduce by rule 235
-+ 	SHARING	reduce by rule 235
-+ 	INSTRUCTION	reduce by rule 235
-+ 	VLIW	reduce by rule 235
-+ 	SUPERSCALAR	reduce by rule 235
-+ 	WITHTYPE	reduce by rule 235
-+ 	FUN	reduce by rule 235
-+ 	VAL	reduce by rule 235
-+ 	INCLUDE	reduce by rule 235
-+ 	OPEN	reduce by rule 235
-+ 	OP	reduce by rule 235
-+ 	LITTLE	reduce by rule 235
-+ 	BIG	reduce by rule 235
-+ 	PIPELINE	reduce by rule 235
-+ 	LOWERCASE	reduce by rule 235
-+ 	UPPERCASE	reduce by rule 235
-+ 	VERBATIM	reduce by rule 235
-+ 	RTL	reduce by rule 235
-+ 	SPAN	reduce by rule 235
-+ 	DELAYSLOT	reduce by rule 235
-+ 	ALWAYS	reduce by rule 235
-+ 	NEVER	reduce by rule 235
-+ 	NONFIX	reduce by rule 235
-+ 	INFIX	reduce by rule 235
-+ 	INFIXR	reduce by rule 235
-+ 	DEBUG	reduce by rule 235
-+ 	ASM_COLON	reduce by rule 235
-+ 	MC_COLON	reduce by rule 235
-+ 	RTL_COLON	reduce by rule 235
-+ 	DELAYSLOT_COLON	reduce by rule 235
-+ 	NULLIFIED_COLON	reduce by rule 235
-+ 	PADDING_COLON	reduce by rule 235
-+ 	RESOURCE	reduce by rule 235
-+ 	CPU	reduce by rule 235
-+ 	LATENCY	reduce by rule 235
-+ 	EXCEPTION	reduce by rule 235
-+ 	ID	reduce by rule 235
-+ 	SYMBOL	reduce by rule 235
-+ 	WORD	reduce by rule 235
-+ 	INT	reduce by rule 235
-+ 	INTINF	reduce by rule 235
-+ 	REAL	reduce by rule 235
-+ 	STRING	reduce by rule 235
-+ 	CHAR	reduce by rule 235
-+ 	EOF	reduce by rule 235
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 82:
-+ 
-+ 	literal : word .  (reduce by rule 234)
-+ 
-+ 	ARCHITECTURE	reduce by rule 234
-+ 	END	reduce by rule 234
-+ 	LOCAL	reduce by rule 234
-+ 	IN	reduce by rule 234
-+ 	OF	reduce by rule 234
-+ 	DATATYPE	reduce by rule 234
-+ 	TYPE	reduce by rule 234
-+ 	EQ	reduce by rule 234
-+ 	DOLLAR	reduce by rule 234
-+ 	TIMES	reduce by rule 234
-+ 	AND	reduce by rule 234
-+ 	DEREF	reduce by rule 234
-+ 	NOT	reduce by rule 234
-+ 	LLBRACKET	reduce by rule 234
-+ 	LHASHBRACKET	reduce by rule 234
-+ 	LPAREN	reduce by rule 234
-+ 	RPAREN	reduce by rule 234
-+ 	LBRACKET	reduce by rule 234
-+ 	RBRACKET	reduce by rule 234
-+ 	LBRACE	reduce by rule 234
-+ 	RBRACE	reduce by rule 234
-+ 	SEMICOLON	reduce by rule 234
-+ 	LDQUOTE	reduce by rule 234
-+ 	RMETA	reduce by rule 234
-+ 	CELLSET	reduce by rule 234
-+ 	STORAGE	reduce by rule 234
-+ 	LOCATIONS	reduce by rule 234
-+ 	HASH	reduce by rule 234
-+ 	COMMA	reduce by rule 234
-+ 	COLON	reduce by rule 234
-+ 	AT	reduce by rule 234
-+ 	BAR	reduce by rule 234
-+ 	DARROW	reduce by rule 234
-+ 	THEN	reduce by rule 234
-+ 	ELSE	reduce by rule 234
-+ 	TRUE	reduce by rule 234
-+ 	FALSE	reduce by rule 234
-+ 	WILD	reduce by rule 234
-+ 	HANDLE	reduce by rule 234
-+ 	LET	reduce by rule 234
-+ 	STRUCTURE	reduce by rule 234
-+ 	FUNCTOR	reduce by rule 234
-+ 	SIGNATURE	reduce by rule 234
-+ 	WHERE	reduce by rule 234
-+ 	SHARING	reduce by rule 234
-+ 	INSTRUCTION	reduce by rule 234
-+ 	VLIW	reduce by rule 234
-+ 	SUPERSCALAR	reduce by rule 234
-+ 	WITHTYPE	reduce by rule 234
-+ 	FUN	reduce by rule 234
-+ 	VAL	reduce by rule 234
-+ 	INCLUDE	reduce by rule 234
-+ 	OPEN	reduce by rule 234
-+ 	OP	reduce by rule 234
-+ 	LITTLE	reduce by rule 234
-+ 	BIG	reduce by rule 234
-+ 	PIPELINE	reduce by rule 234
-+ 	LOWERCASE	reduce by rule 234
-+ 	UPPERCASE	reduce by rule 234
-+ 	VERBATIM	reduce by rule 234
-+ 	RTL	reduce by rule 234
-+ 	SPAN	reduce by rule 234
-+ 	DELAYSLOT	reduce by rule 234
-+ 	ALWAYS	reduce by rule 234
-+ 	NEVER	reduce by rule 234
-+ 	NONFIX	reduce by rule 234
-+ 	INFIX	reduce by rule 234
-+ 	INFIXR	reduce by rule 234
-+ 	DEBUG	reduce by rule 234
-+ 	ASM_COLON	reduce by rule 234
-+ 	MC_COLON	reduce by rule 234
-+ 	RTL_COLON	reduce by rule 234
-+ 	DELAYSLOT_COLON	reduce by rule 234
-+ 	NULLIFIED_COLON	reduce by rule 234
-+ 	PADDING_COLON	reduce by rule 234
-+ 	RESOURCE	reduce by rule 234
-+ 	CPU	reduce by rule 234
-+ 	LATENCY	reduce by rule 234
-+ 	EXCEPTION	reduce by rule 234
-+ 	ID	reduce by rule 234
-+ 	SYMBOL	reduce by rule 234
-+ 	WORD	reduce by rule 234
-+ 	INT	reduce by rule 234
-+ 	INTINF	reduce by rule 234
-+ 	REAL	reduce by rule 234
-+ 	STRING	reduce by rule 234
-+ 	CHAR	reduce by rule 234
-+ 	EOF	reduce by rule 234
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 83:
-+ 
-+ 	mymldecl : RTL asapat . EQ exp 
-+ 
-+ 	EQ	shift 181
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 84:
-+ 
-+ 	asapat : apat .  (reduce by rule 319)
-+ 
-+ 	EQ	reduce by rule 319
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 85:
-+ 
-+ 	ident2 : path .  (reduce by rule 423)
-+ 	path : path . DOT sym 
-+ 
-+ 	ARCHITECTURE	reduce by rule 423
-+ 	END	reduce by rule 423
-+ 	LOCAL	reduce by rule 423
-+ 	IN	reduce by rule 423
-+ 	OF	reduce by rule 423
-+ 	DATATYPE	reduce by rule 423
-+ 	TYPE	reduce by rule 423
-+ 	EQ	reduce by rule 423
-+ 	DOLLAR	reduce by rule 423
-+ 	TIMES	reduce by rule 423
-+ 	AND	reduce by rule 423
-+ 	DEREF	reduce by rule 423
-+ 	NOT	reduce by rule 423
-+ 	LLBRACKET	reduce by rule 423
-+ 	LHASHBRACKET	reduce by rule 423
-+ 	LPAREN	reduce by rule 423
-+ 	RPAREN	reduce by rule 423
-+ 	LBRACKET	reduce by rule 423
-+ 	RBRACKET	reduce by rule 423
-+ 	LBRACE	reduce by rule 423
-+ 	RBRACE	reduce by rule 423
-+ 	SEMICOLON	reduce by rule 423
-+ 	LDQUOTE	reduce by rule 423
-+ 	RMETA	reduce by rule 423
-+ 	CELLSET	reduce by rule 423
-+ 	STORAGE	reduce by rule 423
-+ 	LOCATIONS	reduce by rule 423
-+ 	HASH	reduce by rule 423
-+ 	COMMA	reduce by rule 423
-+ 	COLON	reduce by rule 423
-+ 	DOT	shift 182
-+ 	AT	reduce by rule 423
-+ 	BAR	reduce by rule 423
-+ 	DARROW	reduce by rule 423
-+ 	THEN	reduce by rule 423
-+ 	ELSE	reduce by rule 423
-+ 	TRUE	reduce by rule 423
-+ 	FALSE	reduce by rule 423
-+ 	WILD	reduce by rule 423
-+ 	HANDLE	reduce by rule 423
-+ 	LET	reduce by rule 423
-+ 	STRUCTURE	reduce by rule 423
-+ 	FUNCTOR	reduce by rule 423
-+ 	SIGNATURE	reduce by rule 423
-+ 	WHERE	reduce by rule 423
-+ 	SHARING	reduce by rule 423
-+ 	INSTRUCTION	reduce by rule 423
-+ 	VLIW	reduce by rule 423
-+ 	SUPERSCALAR	reduce by rule 423
-+ 	WITHTYPE	reduce by rule 423
-+ 	FUN	reduce by rule 423
-+ 	VAL	reduce by rule 423
-+ 	INCLUDE	reduce by rule 423
-+ 	OPEN	reduce by rule 423
-+ 	OP	reduce by rule 423
-+ 	LITTLE	reduce by rule 423
-+ 	BIG	reduce by rule 423
-+ 	PIPELINE	reduce by rule 423
-+ 	LOWERCASE	reduce by rule 423
-+ 	UPPERCASE	reduce by rule 423
-+ 	VERBATIM	reduce by rule 423
-+ 	RTL	reduce by rule 423
-+ 	SPAN	reduce by rule 423
-+ 	DELAYSLOT	reduce by rule 423
-+ 	ALWAYS	reduce by rule 423
-+ 	NEVER	reduce by rule 423
-+ 	NONFIX	reduce by rule 423
-+ 	INFIX	reduce by rule 423
-+ 	INFIXR	reduce by rule 423
-+ 	DEBUG	reduce by rule 423
-+ 	ASM_COLON	reduce by rule 423
-+ 	MC_COLON	reduce by rule 423
-+ 	RTL_COLON	reduce by rule 423
-+ 	DELAYSLOT_COLON	reduce by rule 423
-+ 	NULLIFIED_COLON	reduce by rule 423
-+ 	PADDING_COLON	reduce by rule 423
-+ 	RESOURCE	reduce by rule 423
-+ 	CPU	reduce by rule 423
-+ 	LATENCY	reduce by rule 423
-+ 	EXCEPTION	reduce by rule 423
-+ 	ID	reduce by rule 423
-+ 	SYMBOL	reduce by rule 423
-+ 	WORD	reduce by rule 423
-+ 	INT	reduce by rule 423
-+ 	INTINF	reduce by rule 423
-+ 	REAL	reduce by rule 423
-+ 	STRING	reduce by rule 423
-+ 	CHAR	reduce by rule 423
-+ 	EOF	reduce by rule 423
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 86:
-+ 
-+ 	mymldecl : RTL syms . COLON ty 
-+ 
-+ 	COLON	shift 183
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 87:
-+ 
-+ 	apat : ident2 .  (reduce by rule 290)
-+ 
-+ 	EQ	reduce by rule 290
-+ 	TIMES	reduce by rule 290
-+ 	AND	reduce by rule 290
-+ 	DEREF	reduce by rule 290
-+ 	NOT	reduce by rule 290
-+ 	LHASHBRACKET	reduce by rule 290
-+ 	LPAREN	reduce by rule 290
-+ 	RPAREN	reduce by rule 290
-+ 	LBRACKET	reduce by rule 290
-+ 	RBRACKET	reduce by rule 290
-+ 	LBRACE	reduce by rule 290
-+ 	RBRACE	reduce by rule 290
-+ 	CELLSET	reduce by rule 290
-+ 	COMMA	reduce by rule 290
-+ 	COLON	reduce by rule 290
-+ 	BAR	reduce by rule 290
-+ 	DARROW	reduce by rule 290
-+ 	TRUE	reduce by rule 290
-+ 	FALSE	reduce by rule 290
-+ 	WILD	reduce by rule 290
-+ 	WHERE	reduce by rule 290
-+ 	OP	reduce by rule 290
-+ 	ALWAYS	reduce by rule 290
-+ 	NEVER	reduce by rule 290
-+ 	EXCEPTION	reduce by rule 290
-+ 	ID	reduce by rule 290
-+ 	SYMBOL	reduce by rule 290
-+ 	WORD	reduce by rule 290
-+ 	INT	reduce by rule 290
-+ 	INTINF	reduce by rule 290
-+ 	REAL	reduce by rule 290
-+ 	STRING	reduce by rule 290
-+ 	CHAR	reduce by rule 290
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 88:
-+ 
-+ 	syms : sym .  (reduce by rule 109)
-+ 	syms : sym . syms 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET CONCAT sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CONCAT	shift 184
-+ 	CELLSET	shift 50
-+ 	COLON	reduce by rule 109
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 180
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 89:
-+ 
-+ 	sym : id .  (reduce by rule 416)
-+ 	path : id . DOT sym 
-+ 	mymldecl : RTL id . LBRACE labpats0 RBRACE EQ exp 
-+ 	asapat : id . AS asapat 
-+ 
-+ 	TIMES	reduce by rule 416
-+ 	DEREF	reduce by rule 416
-+ 	NOT	reduce by rule 416
-+ 	CONCAT	reduce by rule 416
-+ 	LBRACE	shift 187
-+ 	CELLSET	reduce by rule 416
-+ 	COLON	reduce by rule 416
-+ 	DOT	shift 186
-+ 	AS	shift 185
-+ 	ID	reduce by rule 416
-+ 	SYMBOL	reduce by rule 416
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 90:
-+ 
-+ 	char : CHAR .  (reduce by rule 429)
-+ 
-+ 	ARCHITECTURE	reduce by rule 429
-+ 	END	reduce by rule 429
-+ 	LOCAL	reduce by rule 429
-+ 	IN	reduce by rule 429
-+ 	OF	reduce by rule 429
-+ 	DATATYPE	reduce by rule 429
-+ 	TYPE	reduce by rule 429
-+ 	EQ	reduce by rule 429
-+ 	DOLLAR	reduce by rule 429
-+ 	TIMES	reduce by rule 429
-+ 	AND	reduce by rule 429
-+ 	DEREF	reduce by rule 429
-+ 	NOT	reduce by rule 429
-+ 	LLBRACKET	reduce by rule 429
-+ 	LHASHBRACKET	reduce by rule 429
-+ 	LPAREN	reduce by rule 429
-+ 	RPAREN	reduce by rule 429
-+ 	LBRACKET	reduce by rule 429
-+ 	RBRACKET	reduce by rule 429
-+ 	LBRACE	reduce by rule 429
-+ 	RBRACE	reduce by rule 429
-+ 	SEMICOLON	reduce by rule 429
-+ 	LDQUOTE	reduce by rule 429
-+ 	RMETA	reduce by rule 429
-+ 	CELLSET	reduce by rule 429
-+ 	STORAGE	reduce by rule 429
-+ 	LOCATIONS	reduce by rule 429
-+ 	HASH	reduce by rule 429
-+ 	COMMA	reduce by rule 429
-+ 	COLON	reduce by rule 429
-+ 	AT	reduce by rule 429
-+ 	BAR	reduce by rule 429
-+ 	DARROW	reduce by rule 429
-+ 	THEN	reduce by rule 429
-+ 	ELSE	reduce by rule 429
-+ 	TRUE	reduce by rule 429
-+ 	FALSE	reduce by rule 429
-+ 	WILD	reduce by rule 429
-+ 	HANDLE	reduce by rule 429
-+ 	LET	reduce by rule 429
-+ 	STRUCTURE	reduce by rule 429
-+ 	FUNCTOR	reduce by rule 429
-+ 	SIGNATURE	reduce by rule 429
-+ 	WHERE	reduce by rule 429
-+ 	SHARING	reduce by rule 429
-+ 	INSTRUCTION	reduce by rule 429
-+ 	VLIW	reduce by rule 429
-+ 	SUPERSCALAR	reduce by rule 429
-+ 	WITHTYPE	reduce by rule 429
-+ 	FUN	reduce by rule 429
-+ 	VAL	reduce by rule 429
-+ 	INCLUDE	reduce by rule 429
-+ 	OPEN	reduce by rule 429
-+ 	OP	reduce by rule 429
-+ 	LITTLE	reduce by rule 429
-+ 	BIG	reduce by rule 429
-+ 	PIPELINE	reduce by rule 429
-+ 	LOWERCASE	reduce by rule 429
-+ 	UPPERCASE	reduce by rule 429
-+ 	VERBATIM	reduce by rule 429
-+ 	RTL	reduce by rule 429
-+ 	SPAN	reduce by rule 429
-+ 	DELAYSLOT	reduce by rule 429
-+ 	ALWAYS	reduce by rule 429
-+ 	NEVER	reduce by rule 429
-+ 	NONFIX	reduce by rule 429
-+ 	INFIX	reduce by rule 429
-+ 	INFIXR	reduce by rule 429
-+ 	DEBUG	reduce by rule 429
-+ 	ASM_COLON	reduce by rule 429
-+ 	MC_COLON	reduce by rule 429
-+ 	RTL_COLON	reduce by rule 429
-+ 	DELAYSLOT_COLON	reduce by rule 429
-+ 	NULLIFIED_COLON	reduce by rule 429
-+ 	PADDING_COLON	reduce by rule 429
-+ 	RESOURCE	reduce by rule 429
-+ 	CPU	reduce by rule 429
-+ 	LATENCY	reduce by rule 429
-+ 	EXCEPTION	reduce by rule 429
-+ 	ID	reduce by rule 429
-+ 	SYMBOL	reduce by rule 429
-+ 	WORD	reduce by rule 429
-+ 	INT	reduce by rule 429
-+ 	INTINF	reduce by rule 429
-+ 	REAL	reduce by rule 429
-+ 	STRING	reduce by rule 429
-+ 	CHAR	reduce by rule 429
-+ 	EOF	reduce by rule 429
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 91:
-+ 
-+ 	string : STRING .  (reduce by rule 428)
-+ 
-+ 	ARCHITECTURE	reduce by rule 428
-+ 	END	reduce by rule 428
-+ 	LOCAL	reduce by rule 428
-+ 	IN	reduce by rule 428
-+ 	OF	reduce by rule 428
-+ 	DATATYPE	reduce by rule 428
-+ 	TYPE	reduce by rule 428
-+ 	EQ	reduce by rule 428
-+ 	DOLLAR	reduce by rule 428
-+ 	TIMES	reduce by rule 428
-+ 	AND	reduce by rule 428
-+ 	DEREF	reduce by rule 428
-+ 	NOT	reduce by rule 428
-+ 	LLBRACKET	reduce by rule 428
-+ 	RRBRACKET	reduce by rule 428
-+ 	LHASHBRACKET	reduce by rule 428
-+ 	LPAREN	reduce by rule 428
-+ 	RPAREN	reduce by rule 428
-+ 	LBRACKET	reduce by rule 428
-+ 	RBRACKET	reduce by rule 428
-+ 	LBRACE	reduce by rule 428
-+ 	RBRACE	reduce by rule 428
-+ 	SEMICOLON	reduce by rule 428
-+ 	LDQUOTE	reduce by rule 428
-+ 	RMETA	reduce by rule 428
-+ 	CELLSET	reduce by rule 428
-+ 	STORAGE	reduce by rule 428
-+ 	LOCATIONS	reduce by rule 428
-+ 	HASH	reduce by rule 428
-+ 	COMMA	reduce by rule 428
-+ 	COLON	reduce by rule 428
-+ 	AT	reduce by rule 428
-+ 	BAR	reduce by rule 428
-+ 	DARROW	reduce by rule 428
-+ 	THEN	reduce by rule 428
-+ 	ELSE	reduce by rule 428
-+ 	TRUE	reduce by rule 428
-+ 	FALSE	reduce by rule 428
-+ 	WILD	reduce by rule 428
-+ 	HANDLE	reduce by rule 428
-+ 	LET	reduce by rule 428
-+ 	STRUCTURE	reduce by rule 428
-+ 	FUNCTOR	reduce by rule 428
-+ 	SIGNATURE	reduce by rule 428
-+ 	WHERE	reduce by rule 428
-+ 	SHARING	reduce by rule 428
-+ 	INSTRUCTION	reduce by rule 428
-+ 	VLIW	reduce by rule 428
-+ 	SUPERSCALAR	reduce by rule 428
-+ 	WITHTYPE	reduce by rule 428
-+ 	FUN	reduce by rule 428
-+ 	VAL	reduce by rule 428
-+ 	INCLUDE	reduce by rule 428
-+ 	OPEN	reduce by rule 428
-+ 	OP	reduce by rule 428
-+ 	LITTLE	reduce by rule 428
-+ 	BIG	reduce by rule 428
-+ 	PIPELINE	reduce by rule 428
-+ 	LOWERCASE	reduce by rule 428
-+ 	UPPERCASE	reduce by rule 428
-+ 	VERBATIM	reduce by rule 428
-+ 	RTL	reduce by rule 428
-+ 	SPAN	reduce by rule 428
-+ 	DELAYSLOT	reduce by rule 428
-+ 	ALWAYS	reduce by rule 428
-+ 	NEVER	reduce by rule 428
-+ 	NONFIX	reduce by rule 428
-+ 	INFIX	reduce by rule 428
-+ 	INFIXR	reduce by rule 428
-+ 	DEBUG	reduce by rule 428
-+ 	ASM_COLON	reduce by rule 428
-+ 	MC_COLON	reduce by rule 428
-+ 	RTL_COLON	reduce by rule 428
-+ 	DELAYSLOT_COLON	reduce by rule 428
-+ 	NULLIFIED_COLON	reduce by rule 428
-+ 	PADDING_COLON	reduce by rule 428
-+ 	RESOURCE	reduce by rule 428
-+ 	CPU	reduce by rule 428
-+ 	LATENCY	reduce by rule 428
-+ 	EXCEPTION	reduce by rule 428
-+ 	ID	reduce by rule 428
-+ 	SYMBOL	reduce by rule 428
-+ 	WORD	reduce by rule 428
-+ 	INT	reduce by rule 428
-+ 	INTINF	reduce by rule 428
-+ 	REAL	reduce by rule 428
-+ 	STRING	reduce by rule 428
-+ 	CHAR	reduce by rule 428
-+ 	EOF	reduce by rule 428
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 92:
-+ 
-+ 	real : REAL .  (reduce by rule 399)
-+ 
-+ 	ARCHITECTURE	reduce by rule 399
-+ 	END	reduce by rule 399
-+ 	LOCAL	reduce by rule 399
-+ 	IN	reduce by rule 399
-+ 	OF	reduce by rule 399
-+ 	DATATYPE	reduce by rule 399
-+ 	TYPE	reduce by rule 399
-+ 	EQ	reduce by rule 399
-+ 	DOLLAR	reduce by rule 399
-+ 	TIMES	reduce by rule 399
-+ 	AND	reduce by rule 399
-+ 	DEREF	reduce by rule 399
-+ 	NOT	reduce by rule 399
-+ 	LLBRACKET	reduce by rule 399
-+ 	LHASHBRACKET	reduce by rule 399
-+ 	LPAREN	reduce by rule 399
-+ 	RPAREN	reduce by rule 399
-+ 	LBRACKET	reduce by rule 399
-+ 	RBRACKET	reduce by rule 399
-+ 	LBRACE	reduce by rule 399
-+ 	RBRACE	reduce by rule 399
-+ 	SEMICOLON	reduce by rule 399
-+ 	LDQUOTE	reduce by rule 399
-+ 	RMETA	reduce by rule 399
-+ 	CELLSET	reduce by rule 399
-+ 	STORAGE	reduce by rule 399
-+ 	LOCATIONS	reduce by rule 399
-+ 	HASH	reduce by rule 399
-+ 	COMMA	reduce by rule 399
-+ 	COLON	reduce by rule 399
-+ 	AT	reduce by rule 399
-+ 	BAR	reduce by rule 399
-+ 	DARROW	reduce by rule 399
-+ 	THEN	reduce by rule 399
-+ 	ELSE	reduce by rule 399
-+ 	TRUE	reduce by rule 399
-+ 	FALSE	reduce by rule 399
-+ 	WILD	reduce by rule 399
-+ 	HANDLE	reduce by rule 399
-+ 	LET	reduce by rule 399
-+ 	STRUCTURE	reduce by rule 399
-+ 	FUNCTOR	reduce by rule 399
-+ 	SIGNATURE	reduce by rule 399
-+ 	WHERE	reduce by rule 399
-+ 	SHARING	reduce by rule 399
-+ 	INSTRUCTION	reduce by rule 399
-+ 	VLIW	reduce by rule 399
-+ 	SUPERSCALAR	reduce by rule 399
-+ 	WITHTYPE	reduce by rule 399
-+ 	FUN	reduce by rule 399
-+ 	VAL	reduce by rule 399
-+ 	INCLUDE	reduce by rule 399
-+ 	OPEN	reduce by rule 399
-+ 	OP	reduce by rule 399
-+ 	LITTLE	reduce by rule 399
-+ 	BIG	reduce by rule 399
-+ 	PIPELINE	reduce by rule 399
-+ 	LOWERCASE	reduce by rule 399
-+ 	UPPERCASE	reduce by rule 399
-+ 	VERBATIM	reduce by rule 399
-+ 	RTL	reduce by rule 399
-+ 	SPAN	reduce by rule 399
-+ 	DELAYSLOT	reduce by rule 399
-+ 	ALWAYS	reduce by rule 399
-+ 	NEVER	reduce by rule 399
-+ 	NONFIX	reduce by rule 399
-+ 	INFIX	reduce by rule 399
-+ 	INFIXR	reduce by rule 399
-+ 	DEBUG	reduce by rule 399
-+ 	ASM_COLON	reduce by rule 399
-+ 	MC_COLON	reduce by rule 399
-+ 	RTL_COLON	reduce by rule 399
-+ 	DELAYSLOT_COLON	reduce by rule 399
-+ 	NULLIFIED_COLON	reduce by rule 399
-+ 	PADDING_COLON	reduce by rule 399
-+ 	RESOURCE	reduce by rule 399
-+ 	CPU	reduce by rule 399
-+ 	LATENCY	reduce by rule 399
-+ 	EXCEPTION	reduce by rule 399
-+ 	ID	reduce by rule 399
-+ 	SYMBOL	reduce by rule 399
-+ 	WORD	reduce by rule 399
-+ 	INT	reduce by rule 399
-+ 	INTINF	reduce by rule 399
-+ 	REAL	reduce by rule 399
-+ 	STRING	reduce by rule 399
-+ 	CHAR	reduce by rule 399
-+ 	EOF	reduce by rule 399
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 93:
-+ 
-+ 	intinf : INTINF .  (reduce by rule 398)
-+ 
-+ 	ARCHITECTURE	reduce by rule 398
-+ 	END	reduce by rule 398
-+ 	LOCAL	reduce by rule 398
-+ 	IN	reduce by rule 398
-+ 	OF	reduce by rule 398
-+ 	DATATYPE	reduce by rule 398
-+ 	TYPE	reduce by rule 398
-+ 	EQ	reduce by rule 398
-+ 	DOLLAR	reduce by rule 398
-+ 	TIMES	reduce by rule 398
-+ 	AND	reduce by rule 398
-+ 	DEREF	reduce by rule 398
-+ 	NOT	reduce by rule 398
-+ 	LLBRACKET	reduce by rule 398
-+ 	LHASHBRACKET	reduce by rule 398
-+ 	LPAREN	reduce by rule 398
-+ 	RPAREN	reduce by rule 398
-+ 	LBRACKET	reduce by rule 398
-+ 	RBRACKET	reduce by rule 398
-+ 	LBRACE	reduce by rule 398
-+ 	RBRACE	reduce by rule 398
-+ 	SEMICOLON	reduce by rule 398
-+ 	LDQUOTE	reduce by rule 398
-+ 	RMETA	reduce by rule 398
-+ 	CELLSET	reduce by rule 398
-+ 	STORAGE	reduce by rule 398
-+ 	LOCATIONS	reduce by rule 398
-+ 	HASH	reduce by rule 398
-+ 	COMMA	reduce by rule 398
-+ 	COLON	reduce by rule 398
-+ 	AT	reduce by rule 398
-+ 	BAR	reduce by rule 398
-+ 	DARROW	reduce by rule 398
-+ 	THEN	reduce by rule 398
-+ 	ELSE	reduce by rule 398
-+ 	TRUE	reduce by rule 398
-+ 	FALSE	reduce by rule 398
-+ 	WILD	reduce by rule 398
-+ 	HANDLE	reduce by rule 398
-+ 	LET	reduce by rule 398
-+ 	STRUCTURE	reduce by rule 398
-+ 	FUNCTOR	reduce by rule 398
-+ 	SIGNATURE	reduce by rule 398
-+ 	WHERE	reduce by rule 398
-+ 	SHARING	reduce by rule 398
-+ 	INSTRUCTION	reduce by rule 398
-+ 	VLIW	reduce by rule 398
-+ 	SUPERSCALAR	reduce by rule 398
-+ 	WITHTYPE	reduce by rule 398
-+ 	FUN	reduce by rule 398
-+ 	VAL	reduce by rule 398
-+ 	INCLUDE	reduce by rule 398
-+ 	OPEN	reduce by rule 398
-+ 	OP	reduce by rule 398
-+ 	LITTLE	reduce by rule 398
-+ 	BIG	reduce by rule 398
-+ 	PIPELINE	reduce by rule 398
-+ 	LOWERCASE	reduce by rule 398
-+ 	UPPERCASE	reduce by rule 398
-+ 	VERBATIM	reduce by rule 398
-+ 	RTL	reduce by rule 398
-+ 	SPAN	reduce by rule 398
-+ 	DELAYSLOT	reduce by rule 398
-+ 	ALWAYS	reduce by rule 398
-+ 	NEVER	reduce by rule 398
-+ 	NONFIX	reduce by rule 398
-+ 	INFIX	reduce by rule 398
-+ 	INFIXR	reduce by rule 398
-+ 	DEBUG	reduce by rule 398
-+ 	ASM_COLON	reduce by rule 398
-+ 	MC_COLON	reduce by rule 398
-+ 	RTL_COLON	reduce by rule 398
-+ 	DELAYSLOT_COLON	reduce by rule 398
-+ 	NULLIFIED_COLON	reduce by rule 398
-+ 	PADDING_COLON	reduce by rule 398
-+ 	RESOURCE	reduce by rule 398
-+ 	CPU	reduce by rule 398
-+ 	LATENCY	reduce by rule 398
-+ 	EXCEPTION	reduce by rule 398
-+ 	ID	reduce by rule 398
-+ 	SYMBOL	reduce by rule 398
-+ 	WORD	reduce by rule 398
-+ 	INT	reduce by rule 398
-+ 	INTINF	reduce by rule 398
-+ 	REAL	reduce by rule 398
-+ 	STRING	reduce by rule 398
-+ 	CHAR	reduce by rule 398
-+ 	EOF	reduce by rule 398
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 94:
-+ 
-+ 	word : WORD .  (reduce by rule 394)
-+ 
-+ 	ARCHITECTURE	reduce by rule 394
-+ 	END	reduce by rule 394
-+ 	LOCAL	reduce by rule 394
-+ 	IN	reduce by rule 394
-+ 	OF	reduce by rule 394
-+ 	DATATYPE	reduce by rule 394
-+ 	TYPE	reduce by rule 394
-+ 	EQ	reduce by rule 394
-+ 	DOLLAR	reduce by rule 394
-+ 	TIMES	reduce by rule 394
-+ 	AND	reduce by rule 394
-+ 	DEREF	reduce by rule 394
-+ 	NOT	reduce by rule 394
-+ 	LLBRACKET	reduce by rule 394
-+ 	LHASHBRACKET	reduce by rule 394
-+ 	LPAREN	reduce by rule 394
-+ 	RPAREN	reduce by rule 394
-+ 	LBRACKET	reduce by rule 394
-+ 	RBRACKET	reduce by rule 394
-+ 	LBRACE	reduce by rule 394
-+ 	RBRACE	reduce by rule 394
-+ 	SEMICOLON	reduce by rule 394
-+ 	LDQUOTE	reduce by rule 394
-+ 	RMETA	reduce by rule 394
-+ 	CELLSET	reduce by rule 394
-+ 	STORAGE	reduce by rule 394
-+ 	LOCATIONS	reduce by rule 394
-+ 	HASH	reduce by rule 394
-+ 	COMMA	reduce by rule 394
-+ 	COLON	reduce by rule 394
-+ 	AT	reduce by rule 394
-+ 	BAR	reduce by rule 394
-+ 	DARROW	reduce by rule 394
-+ 	THEN	reduce by rule 394
-+ 	ELSE	reduce by rule 394
-+ 	TRUE	reduce by rule 394
-+ 	FALSE	reduce by rule 394
-+ 	WILD	reduce by rule 394
-+ 	HANDLE	reduce by rule 394
-+ 	LET	reduce by rule 394
-+ 	STRUCTURE	reduce by rule 394
-+ 	FUNCTOR	reduce by rule 394
-+ 	SIGNATURE	reduce by rule 394
-+ 	WHERE	reduce by rule 394
-+ 	SHARING	reduce by rule 394
-+ 	INSTRUCTION	reduce by rule 394
-+ 	VLIW	reduce by rule 394
-+ 	SUPERSCALAR	reduce by rule 394
-+ 	WITHTYPE	reduce by rule 394
-+ 	FUN	reduce by rule 394
-+ 	VAL	reduce by rule 394
-+ 	INCLUDE	reduce by rule 394
-+ 	OPEN	reduce by rule 394
-+ 	OP	reduce by rule 394
-+ 	LITTLE	reduce by rule 394
-+ 	BIG	reduce by rule 394
-+ 	PIPELINE	reduce by rule 394
-+ 	LOWERCASE	reduce by rule 394
-+ 	UPPERCASE	reduce by rule 394
-+ 	VERBATIM	reduce by rule 394
-+ 	RTL	reduce by rule 394
-+ 	SPAN	reduce by rule 394
-+ 	DELAYSLOT	reduce by rule 394
-+ 	ALWAYS	reduce by rule 394
-+ 	NEVER	reduce by rule 394
-+ 	NONFIX	reduce by rule 394
-+ 	INFIX	reduce by rule 394
-+ 	INFIXR	reduce by rule 394
-+ 	DEBUG	reduce by rule 394
-+ 	ASM_COLON	reduce by rule 394
-+ 	MC_COLON	reduce by rule 394
-+ 	RTL_COLON	reduce by rule 394
-+ 	DELAYSLOT_COLON	reduce by rule 394
-+ 	NULLIFIED_COLON	reduce by rule 394
-+ 	PADDING_COLON	reduce by rule 394
-+ 	RESOURCE	reduce by rule 394
-+ 	CPU	reduce by rule 394
-+ 	LATENCY	reduce by rule 394
-+ 	EXCEPTION	reduce by rule 394
-+ 	ID	reduce by rule 394
-+ 	SYMBOL	reduce by rule 394
-+ 	WORD	reduce by rule 394
-+ 	INT	reduce by rule 394
-+ 	INTINF	reduce by rule 394
-+ 	REAL	reduce by rule 394
-+ 	STRING	reduce by rule 394
-+ 	CHAR	reduce by rule 394
-+ 	EOF	reduce by rule 394
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 95:
-+ 
-+ 	False : NEVER .  (reduce by rule 160)
-+ 
-+ 	ARCHITECTURE	reduce by rule 160
-+ 	END	reduce by rule 160
-+ 	LOCAL	reduce by rule 160
-+ 	IN	reduce by rule 160
-+ 	OF	reduce by rule 160
-+ 	DATATYPE	reduce by rule 160
-+ 	TYPE	reduce by rule 160
-+ 	EQ	reduce by rule 160
-+ 	DOLLAR	reduce by rule 160
-+ 	TIMES	reduce by rule 160
-+ 	AND	reduce by rule 160
-+ 	DEREF	reduce by rule 160
-+ 	NOT	reduce by rule 160
-+ 	LLBRACKET	reduce by rule 160
-+ 	LHASHBRACKET	reduce by rule 160
-+ 	LPAREN	reduce by rule 160
-+ 	RPAREN	reduce by rule 160
-+ 	LBRACKET	reduce by rule 160
-+ 	RBRACKET	reduce by rule 160
-+ 	LBRACE	reduce by rule 160
-+ 	RBRACE	reduce by rule 160
-+ 	SEMICOLON	reduce by rule 160
-+ 	LDQUOTE	reduce by rule 160
-+ 	RMETA	reduce by rule 160
-+ 	CELLSET	reduce by rule 160
-+ 	STORAGE	reduce by rule 160
-+ 	LOCATIONS	reduce by rule 160
-+ 	HASH	reduce by rule 160
-+ 	COMMA	reduce by rule 160
-+ 	COLON	reduce by rule 160
-+ 	AT	reduce by rule 160
-+ 	BAR	reduce by rule 160
-+ 	DARROW	reduce by rule 160
-+ 	THEN	reduce by rule 160
-+ 	ELSE	reduce by rule 160
-+ 	TRUE	reduce by rule 160
-+ 	FALSE	reduce by rule 160
-+ 	WILD	reduce by rule 160
-+ 	HANDLE	reduce by rule 160
-+ 	LET	reduce by rule 160
-+ 	STRUCTURE	reduce by rule 160
-+ 	FUNCTOR	reduce by rule 160
-+ 	SIGNATURE	reduce by rule 160
-+ 	WHERE	reduce by rule 160
-+ 	SHARING	reduce by rule 160
-+ 	INSTRUCTION	reduce by rule 160
-+ 	VLIW	reduce by rule 160
-+ 	SUPERSCALAR	reduce by rule 160
-+ 	WITHTYPE	reduce by rule 160
-+ 	FUN	reduce by rule 160
-+ 	VAL	reduce by rule 160
-+ 	INCLUDE	reduce by rule 160
-+ 	OPEN	reduce by rule 160
-+ 	OP	reduce by rule 160
-+ 	LITTLE	reduce by rule 160
-+ 	BIG	reduce by rule 160
-+ 	PIPELINE	reduce by rule 160
-+ 	LOWERCASE	reduce by rule 160
-+ 	UPPERCASE	reduce by rule 160
-+ 	VERBATIM	reduce by rule 160
-+ 	RTL	reduce by rule 160
-+ 	SPAN	reduce by rule 160
-+ 	DELAYSLOT	reduce by rule 160
-+ 	ALWAYS	reduce by rule 160
-+ 	NEVER	reduce by rule 160
-+ 	NONFIX	reduce by rule 160
-+ 	INFIX	reduce by rule 160
-+ 	INFIXR	reduce by rule 160
-+ 	DEBUG	reduce by rule 160
-+ 	ASM_COLON	reduce by rule 160
-+ 	MC_COLON	reduce by rule 160
-+ 	RTL_COLON	reduce by rule 160
-+ 	DELAYSLOT_COLON	reduce by rule 160
-+ 	NULLIFIED_COLON	reduce by rule 160
-+ 	PADDING_COLON	reduce by rule 160
-+ 	RESOURCE	reduce by rule 160
-+ 	CPU	reduce by rule 160
-+ 	LATENCY	reduce by rule 160
-+ 	EXCEPTION	reduce by rule 160
-+ 	ID	reduce by rule 160
-+ 	SYMBOL	reduce by rule 160
-+ 	WORD	reduce by rule 160
-+ 	INT	reduce by rule 160
-+ 	INTINF	reduce by rule 160
-+ 	REAL	reduce by rule 160
-+ 	STRING	reduce by rule 160
-+ 	CHAR	reduce by rule 160
-+ 	EOF	reduce by rule 160
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 96:
-+ 
-+ 	True : ALWAYS .  (reduce by rule 158)
-+ 
-+ 	ARCHITECTURE	reduce by rule 158
-+ 	END	reduce by rule 158
-+ 	LOCAL	reduce by rule 158
-+ 	IN	reduce by rule 158
-+ 	OF	reduce by rule 158
-+ 	DATATYPE	reduce by rule 158
-+ 	TYPE	reduce by rule 158
-+ 	EQ	reduce by rule 158
-+ 	DOLLAR	reduce by rule 158
-+ 	TIMES	reduce by rule 158
-+ 	AND	reduce by rule 158
-+ 	DEREF	reduce by rule 158
-+ 	NOT	reduce by rule 158
-+ 	LLBRACKET	reduce by rule 158
-+ 	LHASHBRACKET	reduce by rule 158
-+ 	LPAREN	reduce by rule 158
-+ 	RPAREN	reduce by rule 158
-+ 	LBRACKET	reduce by rule 158
-+ 	RBRACKET	reduce by rule 158
-+ 	LBRACE	reduce by rule 158
-+ 	RBRACE	reduce by rule 158
-+ 	SEMICOLON	reduce by rule 158
-+ 	LDQUOTE	reduce by rule 158
-+ 	RMETA	reduce by rule 158
-+ 	CELLSET	reduce by rule 158
-+ 	STORAGE	reduce by rule 158
-+ 	LOCATIONS	reduce by rule 158
-+ 	HASH	reduce by rule 158
-+ 	COMMA	reduce by rule 158
-+ 	COLON	reduce by rule 158
-+ 	AT	reduce by rule 158
-+ 	BAR	reduce by rule 158
-+ 	DARROW	reduce by rule 158
-+ 	THEN	reduce by rule 158
-+ 	ELSE	reduce by rule 158
-+ 	TRUE	reduce by rule 158
-+ 	FALSE	reduce by rule 158
-+ 	WILD	reduce by rule 158
-+ 	HANDLE	reduce by rule 158
-+ 	LET	reduce by rule 158
-+ 	STRUCTURE	reduce by rule 158
-+ 	FUNCTOR	reduce by rule 158
-+ 	SIGNATURE	reduce by rule 158
-+ 	WHERE	reduce by rule 158
-+ 	SHARING	reduce by rule 158
-+ 	INSTRUCTION	reduce by rule 158
-+ 	VLIW	reduce by rule 158
-+ 	SUPERSCALAR	reduce by rule 158
-+ 	WITHTYPE	reduce by rule 158
-+ 	FUN	reduce by rule 158
-+ 	VAL	reduce by rule 158
-+ 	INCLUDE	reduce by rule 158
-+ 	OPEN	reduce by rule 158
-+ 	OP	reduce by rule 158
-+ 	LITTLE	reduce by rule 158
-+ 	BIG	reduce by rule 158
-+ 	PIPELINE	reduce by rule 158
-+ 	LOWERCASE	reduce by rule 158
-+ 	UPPERCASE	reduce by rule 158
-+ 	VERBATIM	reduce by rule 158
-+ 	RTL	reduce by rule 158
-+ 	SPAN	reduce by rule 158
-+ 	DELAYSLOT	reduce by rule 158
-+ 	ALWAYS	reduce by rule 158
-+ 	NEVER	reduce by rule 158
-+ 	NONFIX	reduce by rule 158
-+ 	INFIX	reduce by rule 158
-+ 	INFIXR	reduce by rule 158
-+ 	DEBUG	reduce by rule 158
-+ 	ASM_COLON	reduce by rule 158
-+ 	MC_COLON	reduce by rule 158
-+ 	RTL_COLON	reduce by rule 158
-+ 	DELAYSLOT_COLON	reduce by rule 158
-+ 	NULLIFIED_COLON	reduce by rule 158
-+ 	PADDING_COLON	reduce by rule 158
-+ 	RESOURCE	reduce by rule 158
-+ 	CPU	reduce by rule 158
-+ 	LATENCY	reduce by rule 158
-+ 	EXCEPTION	reduce by rule 158
-+ 	ID	reduce by rule 158
-+ 	SYMBOL	reduce by rule 158
-+ 	WORD	reduce by rule 158
-+ 	INT	reduce by rule 158
-+ 	INTINF	reduce by rule 158
-+ 	REAL	reduce by rule 158
-+ 	STRING	reduce by rule 158
-+ 	CHAR	reduce by rule 158
-+ 	EOF	reduce by rule 158
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 97:
-+ 
-+ 	apat : WILD .  (reduce by rule 292)
-+ 
-+ 	EQ	reduce by rule 292
-+ 	TIMES	reduce by rule 292
-+ 	AND	reduce by rule 292
-+ 	DEREF	reduce by rule 292
-+ 	NOT	reduce by rule 292
-+ 	LHASHBRACKET	reduce by rule 292
-+ 	LPAREN	reduce by rule 292
-+ 	RPAREN	reduce by rule 292
-+ 	LBRACKET	reduce by rule 292
-+ 	RBRACKET	reduce by rule 292
-+ 	LBRACE	reduce by rule 292
-+ 	RBRACE	reduce by rule 292
-+ 	CELLSET	reduce by rule 292
-+ 	COMMA	reduce by rule 292
-+ 	COLON	reduce by rule 292
-+ 	BAR	reduce by rule 292
-+ 	DARROW	reduce by rule 292
-+ 	TRUE	reduce by rule 292
-+ 	FALSE	reduce by rule 292
-+ 	WILD	reduce by rule 292
-+ 	WHERE	reduce by rule 292
-+ 	OP	reduce by rule 292
-+ 	ALWAYS	reduce by rule 292
-+ 	NEVER	reduce by rule 292
-+ 	EXCEPTION	reduce by rule 292
-+ 	ID	reduce by rule 292
-+ 	SYMBOL	reduce by rule 292
-+ 	WORD	reduce by rule 292
-+ 	INT	reduce by rule 292
-+ 	INTINF	reduce by rule 292
-+ 	REAL	reduce by rule 292
-+ 	STRING	reduce by rule 292
-+ 	CHAR	reduce by rule 292
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 98:
-+ 
-+ 	False : FALSE .  (reduce by rule 159)
-+ 
-+ 	ARCHITECTURE	reduce by rule 159
-+ 	END	reduce by rule 159
-+ 	LOCAL	reduce by rule 159
-+ 	IN	reduce by rule 159
-+ 	OF	reduce by rule 159
-+ 	DATATYPE	reduce by rule 159
-+ 	TYPE	reduce by rule 159
-+ 	EQ	reduce by rule 159
-+ 	DOLLAR	reduce by rule 159
-+ 	TIMES	reduce by rule 159
-+ 	AND	reduce by rule 159
-+ 	DEREF	reduce by rule 159
-+ 	NOT	reduce by rule 159
-+ 	LLBRACKET	reduce by rule 159
-+ 	LHASHBRACKET	reduce by rule 159
-+ 	LPAREN	reduce by rule 159
-+ 	RPAREN	reduce by rule 159
-+ 	LBRACKET	reduce by rule 159
-+ 	RBRACKET	reduce by rule 159
-+ 	LBRACE	reduce by rule 159
-+ 	RBRACE	reduce by rule 159
-+ 	SEMICOLON	reduce by rule 159
-+ 	LDQUOTE	reduce by rule 159
-+ 	RMETA	reduce by rule 159
-+ 	CELLSET	reduce by rule 159
-+ 	STORAGE	reduce by rule 159
-+ 	LOCATIONS	reduce by rule 159
-+ 	HASH	reduce by rule 159
-+ 	COMMA	reduce by rule 159
-+ 	COLON	reduce by rule 159
-+ 	AT	reduce by rule 159
-+ 	BAR	reduce by rule 159
-+ 	DARROW	reduce by rule 159
-+ 	THEN	reduce by rule 159
-+ 	ELSE	reduce by rule 159
-+ 	TRUE	reduce by rule 159
-+ 	FALSE	reduce by rule 159
-+ 	WILD	reduce by rule 159
-+ 	HANDLE	reduce by rule 159
-+ 	LET	reduce by rule 159
-+ 	STRUCTURE	reduce by rule 159
-+ 	FUNCTOR	reduce by rule 159
-+ 	SIGNATURE	reduce by rule 159
-+ 	WHERE	reduce by rule 159
-+ 	SHARING	reduce by rule 159
-+ 	INSTRUCTION	reduce by rule 159
-+ 	VLIW	reduce by rule 159
-+ 	SUPERSCALAR	reduce by rule 159
-+ 	WITHTYPE	reduce by rule 159
-+ 	FUN	reduce by rule 159
-+ 	VAL	reduce by rule 159
-+ 	INCLUDE	reduce by rule 159
-+ 	OPEN	reduce by rule 159
-+ 	OP	reduce by rule 159
-+ 	LITTLE	reduce by rule 159
-+ 	BIG	reduce by rule 159
-+ 	PIPELINE	reduce by rule 159
-+ 	LOWERCASE	reduce by rule 159
-+ 	UPPERCASE	reduce by rule 159
-+ 	VERBATIM	reduce by rule 159
-+ 	RTL	reduce by rule 159
-+ 	SPAN	reduce by rule 159
-+ 	DELAYSLOT	reduce by rule 159
-+ 	ALWAYS	reduce by rule 159
-+ 	NEVER	reduce by rule 159
-+ 	NONFIX	reduce by rule 159
-+ 	INFIX	reduce by rule 159
-+ 	INFIXR	reduce by rule 159
-+ 	DEBUG	reduce by rule 159
-+ 	ASM_COLON	reduce by rule 159
-+ 	MC_COLON	reduce by rule 159
-+ 	RTL_COLON	reduce by rule 159
-+ 	DELAYSLOT_COLON	reduce by rule 159
-+ 	NULLIFIED_COLON	reduce by rule 159
-+ 	PADDING_COLON	reduce by rule 159
-+ 	RESOURCE	reduce by rule 159
-+ 	CPU	reduce by rule 159
-+ 	LATENCY	reduce by rule 159
-+ 	EXCEPTION	reduce by rule 159
-+ 	ID	reduce by rule 159
-+ 	SYMBOL	reduce by rule 159
-+ 	WORD	reduce by rule 159
-+ 	INT	reduce by rule 159
-+ 	INTINF	reduce by rule 159
-+ 	REAL	reduce by rule 159
-+ 	STRING	reduce by rule 159
-+ 	CHAR	reduce by rule 159
-+ 	EOF	reduce by rule 159
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 99:
-+ 
-+ 	True : TRUE .  (reduce by rule 157)
-+ 
-+ 	ARCHITECTURE	reduce by rule 157
-+ 	END	reduce by rule 157
-+ 	LOCAL	reduce by rule 157
-+ 	IN	reduce by rule 157
-+ 	OF	reduce by rule 157
-+ 	DATATYPE	reduce by rule 157
-+ 	TYPE	reduce by rule 157
-+ 	EQ	reduce by rule 157
-+ 	DOLLAR	reduce by rule 157
-+ 	TIMES	reduce by rule 157
-+ 	AND	reduce by rule 157
-+ 	DEREF	reduce by rule 157
-+ 	NOT	reduce by rule 157
-+ 	LLBRACKET	reduce by rule 157
-+ 	LHASHBRACKET	reduce by rule 157
-+ 	LPAREN	reduce by rule 157
-+ 	RPAREN	reduce by rule 157
-+ 	LBRACKET	reduce by rule 157
-+ 	RBRACKET	reduce by rule 157
-+ 	LBRACE	reduce by rule 157
-+ 	RBRACE	reduce by rule 157
-+ 	SEMICOLON	reduce by rule 157
-+ 	LDQUOTE	reduce by rule 157
-+ 	RMETA	reduce by rule 157
-+ 	CELLSET	reduce by rule 157
-+ 	STORAGE	reduce by rule 157
-+ 	LOCATIONS	reduce by rule 157
-+ 	HASH	reduce by rule 157
-+ 	COMMA	reduce by rule 157
-+ 	COLON	reduce by rule 157
-+ 	AT	reduce by rule 157
-+ 	BAR	reduce by rule 157
-+ 	DARROW	reduce by rule 157
-+ 	THEN	reduce by rule 157
-+ 	ELSE	reduce by rule 157
-+ 	TRUE	reduce by rule 157
-+ 	FALSE	reduce by rule 157
-+ 	WILD	reduce by rule 157
-+ 	HANDLE	reduce by rule 157
-+ 	LET	reduce by rule 157
-+ 	STRUCTURE	reduce by rule 157
-+ 	FUNCTOR	reduce by rule 157
-+ 	SIGNATURE	reduce by rule 157
-+ 	WHERE	reduce by rule 157
-+ 	SHARING	reduce by rule 157
-+ 	INSTRUCTION	reduce by rule 157
-+ 	VLIW	reduce by rule 157
-+ 	SUPERSCALAR	reduce by rule 157
-+ 	WITHTYPE	reduce by rule 157
-+ 	FUN	reduce by rule 157
-+ 	VAL	reduce by rule 157
-+ 	INCLUDE	reduce by rule 157
-+ 	OPEN	reduce by rule 157
-+ 	OP	reduce by rule 157
-+ 	LITTLE	reduce by rule 157
-+ 	BIG	reduce by rule 157
-+ 	PIPELINE	reduce by rule 157
-+ 	LOWERCASE	reduce by rule 157
-+ 	UPPERCASE	reduce by rule 157
-+ 	VERBATIM	reduce by rule 157
-+ 	RTL	reduce by rule 157
-+ 	SPAN	reduce by rule 157
-+ 	DELAYSLOT	reduce by rule 157
-+ 	ALWAYS	reduce by rule 157
-+ 	NEVER	reduce by rule 157
-+ 	NONFIX	reduce by rule 157
-+ 	INFIX	reduce by rule 157
-+ 	INFIXR	reduce by rule 157
-+ 	DEBUG	reduce by rule 157
-+ 	ASM_COLON	reduce by rule 157
-+ 	MC_COLON	reduce by rule 157
-+ 	RTL_COLON	reduce by rule 157
-+ 	DELAYSLOT_COLON	reduce by rule 157
-+ 	NULLIFIED_COLON	reduce by rule 157
-+ 	PADDING_COLON	reduce by rule 157
-+ 	RESOURCE	reduce by rule 157
-+ 	CPU	reduce by rule 157
-+ 	LATENCY	reduce by rule 157
-+ 	EXCEPTION	reduce by rule 157
-+ 	ID	reduce by rule 157
-+ 	SYMBOL	reduce by rule 157
-+ 	WORD	reduce by rule 157
-+ 	INT	reduce by rule 157
-+ 	INTINF	reduce by rule 157
-+ 	REAL	reduce by rule 157
-+ 	STRING	reduce by rule 157
-+ 	CHAR	reduce by rule 157
-+ 	EOF	reduce by rule 157
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 100:
-+ 
-+ 	apat : LBRACE . labpats0 RBRACE 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	RBRACE	reduce by rule 326
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 191
-+ 	symb	goto 67
-+ 	labpat	goto 190
-+ 	labpats0	goto 189
-+ 	labpats	goto 188
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 101:
-+ 
-+ 	apat : LBRACKET . pats RBRACKET 
-+ 	apat : LBRACKET . pats RBRACKET CONCAT sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	RBRACKET	reduce by rule 321
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 194
-+ 	pats	goto 193
-+ 	pats1	goto 192
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 102:
-+ 
-+ 	apat : LPAREN . RPAREN 
-+ 	apat : LPAREN . pats2 RPAREN 
-+ 	apat : LPAREN . orpats2 RPAREN 
-+ 	apat : LPAREN . andpats2 RPAREN 
-+ 	apat : LPAREN . typedpat RPAREN 
-+ 	apat : LPAREN . typedpat WHERE typedexp RPAREN 
-+ 	apat : LPAREN . typedpat WHERE typedexp IN typedpat RPAREN 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	RPAREN	shift 200
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 199
-+ 	pats2	goto 198
-+ 	orpats2	goto 197
-+ 	andpats2	goto 196
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 103:
-+ 
-+ 	apat : LHASHBRACKET . pats RBRACKET 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	RBRACKET	reduce by rule 321
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 194
-+ 	pats	goto 201
-+ 	pats1	goto 192
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 104:
-+ 
-+ 	pipelineclauses : pipelineclause .  (reduce by rule 42)
-+ 	pipelineclauses : pipelineclause . BAR pipelineclauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 42
-+ 	END	reduce by rule 42
-+ 	LOCAL	reduce by rule 42
-+ 	IN	reduce by rule 42
-+ 	DATATYPE	reduce by rule 42
-+ 	TYPE	reduce by rule 42
-+ 	AND	reduce by rule 42
-+ 	RPAREN	reduce by rule 42
-+ 	SEMICOLON	reduce by rule 42
-+ 	STORAGE	reduce by rule 42
-+ 	LOCATIONS	reduce by rule 42
-+ 	BAR	shift 202
-+ 	STRUCTURE	reduce by rule 42
-+ 	FUNCTOR	reduce by rule 42
-+ 	SIGNATURE	reduce by rule 42
-+ 	SHARING	reduce by rule 42
-+ 	INSTRUCTION	reduce by rule 42
-+ 	VLIW	reduce by rule 42
-+ 	SUPERSCALAR	reduce by rule 42
-+ 	FUN	reduce by rule 42
-+ 	VAL	reduce by rule 42
-+ 	INCLUDE	reduce by rule 42
-+ 	OPEN	reduce by rule 42
-+ 	LITTLE	reduce by rule 42
-+ 	BIG	reduce by rule 42
-+ 	PIPELINE	reduce by rule 42
-+ 	LOWERCASE	reduce by rule 42
-+ 	UPPERCASE	reduce by rule 42
-+ 	VERBATIM	reduce by rule 42
-+ 	RTL	reduce by rule 42
-+ 	NONFIX	reduce by rule 42
-+ 	INFIX	reduce by rule 42
-+ 	INFIXR	reduce by rule 42
-+ 	DEBUG	reduce by rule 42
-+ 	RESOURCE	reduce by rule 42
-+ 	CPU	reduce by rule 42
-+ 	LATENCY	reduce by rule 42
-+ 	EXCEPTION	reduce by rule 42
-+ 	EOF	reduce by rule 42
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 105:
-+ 
-+ 	pipelinebind : pipelineclauses .  (reduce by rule 41)
-+ 
-+ 	ARCHITECTURE	reduce by rule 41
-+ 	END	reduce by rule 41
-+ 	LOCAL	reduce by rule 41
-+ 	IN	reduce by rule 41
-+ 	DATATYPE	reduce by rule 41
-+ 	TYPE	reduce by rule 41
-+ 	AND	reduce by rule 41
-+ 	RPAREN	reduce by rule 41
-+ 	SEMICOLON	reduce by rule 41
-+ 	STORAGE	reduce by rule 41
-+ 	LOCATIONS	reduce by rule 41
-+ 	STRUCTURE	reduce by rule 41
-+ 	FUNCTOR	reduce by rule 41
-+ 	SIGNATURE	reduce by rule 41
-+ 	SHARING	reduce by rule 41
-+ 	INSTRUCTION	reduce by rule 41
-+ 	VLIW	reduce by rule 41
-+ 	SUPERSCALAR	reduce by rule 41
-+ 	FUN	reduce by rule 41
-+ 	VAL	reduce by rule 41
-+ 	INCLUDE	reduce by rule 41
-+ 	OPEN	reduce by rule 41
-+ 	LITTLE	reduce by rule 41
-+ 	BIG	reduce by rule 41
-+ 	PIPELINE	reduce by rule 41
-+ 	LOWERCASE	reduce by rule 41
-+ 	UPPERCASE	reduce by rule 41
-+ 	VERBATIM	reduce by rule 41
-+ 	RTL	reduce by rule 41
-+ 	NONFIX	reduce by rule 41
-+ 	INFIX	reduce by rule 41
-+ 	INFIXR	reduce by rule 41
-+ 	DEBUG	reduce by rule 41
-+ 	RESOURCE	reduce by rule 41
-+ 	CPU	reduce by rule 41
-+ 	LATENCY	reduce by rule 41
-+ 	EXCEPTION	reduce by rule 41
-+ 	EOF	reduce by rule 41
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 106:
-+ 
-+ 	pipelinebinds : pipelinebind .  (reduce by rule 39)
-+ 	pipelinebinds : pipelinebind . AND pipelinebinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 39
-+ 	END	reduce by rule 39
-+ 	LOCAL	reduce by rule 39
-+ 	IN	reduce by rule 39
-+ 	DATATYPE	reduce by rule 39
-+ 	TYPE	reduce by rule 39
-+ 	AND	shift 203
-+ 	RPAREN	reduce by rule 39
-+ 	SEMICOLON	reduce by rule 39
-+ 	STORAGE	reduce by rule 39
-+ 	LOCATIONS	reduce by rule 39
-+ 	STRUCTURE	reduce by rule 39
-+ 	FUNCTOR	reduce by rule 39
-+ 	SIGNATURE	reduce by rule 39
-+ 	SHARING	reduce by rule 39
-+ 	INSTRUCTION	reduce by rule 39
-+ 	VLIW	reduce by rule 39
-+ 	SUPERSCALAR	reduce by rule 39
-+ 	FUN	reduce by rule 39
-+ 	VAL	reduce by rule 39
-+ 	INCLUDE	reduce by rule 39
-+ 	OPEN	reduce by rule 39
-+ 	LITTLE	reduce by rule 39
-+ 	BIG	reduce by rule 39
-+ 	PIPELINE	reduce by rule 39
-+ 	LOWERCASE	reduce by rule 39
-+ 	UPPERCASE	reduce by rule 39
-+ 	VERBATIM	reduce by rule 39
-+ 	RTL	reduce by rule 39
-+ 	NONFIX	reduce by rule 39
-+ 	INFIX	reduce by rule 39
-+ 	INFIXR	reduce by rule 39
-+ 	DEBUG	reduce by rule 39
-+ 	RESOURCE	reduce by rule 39
-+ 	CPU	reduce by rule 39
-+ 	LATENCY	reduce by rule 39
-+ 	EXCEPTION	reduce by rule 39
-+ 	EOF	reduce by rule 39
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 107:
-+ 
-+ 	mymddecl : PIPELINE pipelinebinds .  (reduce by rule 26)
-+ 
-+ 	ARCHITECTURE	reduce by rule 26
-+ 	END	reduce by rule 26
-+ 	LOCAL	reduce by rule 26
-+ 	IN	reduce by rule 26
-+ 	DATATYPE	reduce by rule 26
-+ 	TYPE	reduce by rule 26
-+ 	RPAREN	reduce by rule 26
-+ 	SEMICOLON	reduce by rule 26
-+ 	STORAGE	reduce by rule 26
-+ 	LOCATIONS	reduce by rule 26
-+ 	STRUCTURE	reduce by rule 26
-+ 	FUNCTOR	reduce by rule 26
-+ 	SIGNATURE	reduce by rule 26
-+ 	SHARING	reduce by rule 26
-+ 	INSTRUCTION	reduce by rule 26
-+ 	VLIW	reduce by rule 26
-+ 	SUPERSCALAR	reduce by rule 26
-+ 	FUN	reduce by rule 26
-+ 	VAL	reduce by rule 26
-+ 	INCLUDE	reduce by rule 26
-+ 	OPEN	reduce by rule 26
-+ 	LITTLE	reduce by rule 26
-+ 	BIG	reduce by rule 26
-+ 	PIPELINE	reduce by rule 26
-+ 	LOWERCASE	reduce by rule 26
-+ 	UPPERCASE	reduce by rule 26
-+ 	VERBATIM	reduce by rule 26
-+ 	RTL	reduce by rule 26
-+ 	NONFIX	reduce by rule 26
-+ 	INFIX	reduce by rule 26
-+ 	INFIXR	reduce by rule 26
-+ 	DEBUG	reduce by rule 26
-+ 	RESOURCE	reduce by rule 26
-+ 	CPU	reduce by rule 26
-+ 	LATENCY	reduce by rule 26
-+ 	EXCEPTION	reduce by rule 26
-+ 	EOF	reduce by rule 26
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 108:
-+ 
-+ 	pipelineclause : id . pat EQ LBRACKET cycles0 RBRACKET 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 204
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 109:
-+ 
-+ 	mymddecl : BIG ENDIAN .  (reduce by rule 14)
-+ 
-+ 	ARCHITECTURE	reduce by rule 14
-+ 	END	reduce by rule 14
-+ 	LOCAL	reduce by rule 14
-+ 	IN	reduce by rule 14
-+ 	DATATYPE	reduce by rule 14
-+ 	TYPE	reduce by rule 14
-+ 	RPAREN	reduce by rule 14
-+ 	SEMICOLON	reduce by rule 14
-+ 	STORAGE	reduce by rule 14
-+ 	LOCATIONS	reduce by rule 14
-+ 	STRUCTURE	reduce by rule 14
-+ 	FUNCTOR	reduce by rule 14
-+ 	SIGNATURE	reduce by rule 14
-+ 	SHARING	reduce by rule 14
-+ 	INSTRUCTION	reduce by rule 14
-+ 	VLIW	reduce by rule 14
-+ 	SUPERSCALAR	reduce by rule 14
-+ 	FUN	reduce by rule 14
-+ 	VAL	reduce by rule 14
-+ 	INCLUDE	reduce by rule 14
-+ 	OPEN	reduce by rule 14
-+ 	LITTLE	reduce by rule 14
-+ 	BIG	reduce by rule 14
-+ 	PIPELINE	reduce by rule 14
-+ 	LOWERCASE	reduce by rule 14
-+ 	UPPERCASE	reduce by rule 14
-+ 	VERBATIM	reduce by rule 14
-+ 	RTL	reduce by rule 14
-+ 	NONFIX	reduce by rule 14
-+ 	INFIX	reduce by rule 14
-+ 	INFIXR	reduce by rule 14
-+ 	DEBUG	reduce by rule 14
-+ 	RESOURCE	reduce by rule 14
-+ 	CPU	reduce by rule 14
-+ 	LATENCY	reduce by rule 14
-+ 	EXCEPTION	reduce by rule 14
-+ 	EOF	reduce by rule 14
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 110:
-+ 
-+ 	mymddecl : LITTLE ENDIAN .  (reduce by rule 13)
-+ 
-+ 	ARCHITECTURE	reduce by rule 13
-+ 	END	reduce by rule 13
-+ 	LOCAL	reduce by rule 13
-+ 	IN	reduce by rule 13
-+ 	DATATYPE	reduce by rule 13
-+ 	TYPE	reduce by rule 13
-+ 	RPAREN	reduce by rule 13
-+ 	SEMICOLON	reduce by rule 13
-+ 	STORAGE	reduce by rule 13
-+ 	LOCATIONS	reduce by rule 13
-+ 	STRUCTURE	reduce by rule 13
-+ 	FUNCTOR	reduce by rule 13
-+ 	SIGNATURE	reduce by rule 13
-+ 	SHARING	reduce by rule 13
-+ 	INSTRUCTION	reduce by rule 13
-+ 	VLIW	reduce by rule 13
-+ 	SUPERSCALAR	reduce by rule 13
-+ 	FUN	reduce by rule 13
-+ 	VAL	reduce by rule 13
-+ 	INCLUDE	reduce by rule 13
-+ 	OPEN	reduce by rule 13
-+ 	LITTLE	reduce by rule 13
-+ 	BIG	reduce by rule 13
-+ 	PIPELINE	reduce by rule 13
-+ 	LOWERCASE	reduce by rule 13
-+ 	UPPERCASE	reduce by rule 13
-+ 	VERBATIM	reduce by rule 13
-+ 	RTL	reduce by rule 13
-+ 	NONFIX	reduce by rule 13
-+ 	INFIX	reduce by rule 13
-+ 	INFIXR	reduce by rule 13
-+ 	DEBUG	reduce by rule 13
-+ 	RESOURCE	reduce by rule 13
-+ 	CPU	reduce by rule 13
-+ 	LATENCY	reduce by rule 13
-+ 	EXCEPTION	reduce by rule 13
-+ 	EOF	reduce by rule 13
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 111:
-+ 
-+ 	mymldecl : OPEN idents .  (reduce by rule 80)
-+ 
-+ 	ARCHITECTURE	reduce by rule 80
-+ 	END	reduce by rule 80
-+ 	LOCAL	reduce by rule 80
-+ 	IN	reduce by rule 80
-+ 	DATATYPE	reduce by rule 80
-+ 	TYPE	reduce by rule 80
-+ 	RPAREN	reduce by rule 80
-+ 	SEMICOLON	reduce by rule 80
-+ 	STORAGE	reduce by rule 80
-+ 	LOCATIONS	reduce by rule 80
-+ 	STRUCTURE	reduce by rule 80
-+ 	FUNCTOR	reduce by rule 80
-+ 	SIGNATURE	reduce by rule 80
-+ 	SHARING	reduce by rule 80
-+ 	INSTRUCTION	reduce by rule 80
-+ 	VLIW	reduce by rule 80
-+ 	SUPERSCALAR	reduce by rule 80
-+ 	FUN	reduce by rule 80
-+ 	VAL	reduce by rule 80
-+ 	INCLUDE	reduce by rule 80
-+ 	OPEN	reduce by rule 80
-+ 	LITTLE	reduce by rule 80
-+ 	BIG	reduce by rule 80
-+ 	PIPELINE	reduce by rule 80
-+ 	LOWERCASE	reduce by rule 80
-+ 	UPPERCASE	reduce by rule 80
-+ 	VERBATIM	reduce by rule 80
-+ 	RTL	reduce by rule 80
-+ 	NONFIX	reduce by rule 80
-+ 	INFIX	reduce by rule 80
-+ 	INFIXR	reduce by rule 80
-+ 	DEBUG	reduce by rule 80
-+ 	RESOURCE	reduce by rule 80
-+ 	CPU	reduce by rule 80
-+ 	LATENCY	reduce by rule 80
-+ 	EXCEPTION	reduce by rule 80
-+ 	EOF	reduce by rule 80
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 112:
-+ 
-+ 	ident : ident2 .  (reduce by rule 422)
-+ 
-+ 	ARCHITECTURE	reduce by rule 422
-+ 	END	reduce by rule 422
-+ 	LOCAL	reduce by rule 422
-+ 	IN	reduce by rule 422
-+ 	DATATYPE	reduce by rule 422
-+ 	TYPE	reduce by rule 422
-+ 	EQ	reduce by rule 422
-+ 	AND	reduce by rule 422
-+ 	LPAREN	reduce by rule 422
-+ 	RPAREN	reduce by rule 422
-+ 	SEMICOLON	reduce by rule 422
-+ 	CELLSET	reduce by rule 422
-+ 	STORAGE	reduce by rule 422
-+ 	LOCATIONS	reduce by rule 422
-+ 	STRUCTURE	reduce by rule 422
-+ 	FUNCTOR	reduce by rule 422
-+ 	SIGNATURE	reduce by rule 422
-+ 	WHERE	reduce by rule 422
-+ 	SHARING	reduce by rule 422
-+ 	INSTRUCTION	reduce by rule 422
-+ 	VLIW	reduce by rule 422
-+ 	SUPERSCALAR	reduce by rule 422
-+ 	FUN	reduce by rule 422
-+ 	VAL	reduce by rule 422
-+ 	INCLUDE	reduce by rule 422
-+ 	OPEN	reduce by rule 422
-+ 	LITTLE	reduce by rule 422
-+ 	BIG	reduce by rule 422
-+ 	PIPELINE	reduce by rule 422
-+ 	LOWERCASE	reduce by rule 422
-+ 	UPPERCASE	reduce by rule 422
-+ 	VERBATIM	reduce by rule 422
-+ 	RTL	reduce by rule 422
-+ 	NONFIX	reduce by rule 422
-+ 	INFIX	reduce by rule 422
-+ 	INFIXR	reduce by rule 422
-+ 	DEBUG	reduce by rule 422
-+ 	RESOURCE	reduce by rule 422
-+ 	CPU	reduce by rule 422
-+ 	LATENCY	reduce by rule 422
-+ 	EXCEPTION	reduce by rule 422
-+ 	ID	reduce by rule 422
-+ 	SYMBOL	reduce by rule 422
-+ 	EOF	reduce by rule 422
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 113:
-+ 
-+ 	idents : ident .  (reduce by rule 111)
-+ 	idents : ident . idents 
-+ 
-+ 	ARCHITECTURE	reduce by rule 111
-+ 	END	reduce by rule 111
-+ 	LOCAL	reduce by rule 111
-+ 	IN	reduce by rule 111
-+ 	DATATYPE	reduce by rule 111
-+ 	TYPE	reduce by rule 111
-+ 	RPAREN	reduce by rule 111
-+ 	SEMICOLON	reduce by rule 111
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 111
-+ 	LOCATIONS	reduce by rule 111
-+ 	STRUCTURE	reduce by rule 111
-+ 	FUNCTOR	reduce by rule 111
-+ 	SIGNATURE	reduce by rule 111
-+ 	SHARING	reduce by rule 111
-+ 	INSTRUCTION	reduce by rule 111
-+ 	VLIW	reduce by rule 111
-+ 	SUPERSCALAR	reduce by rule 111
-+ 	FUN	reduce by rule 111
-+ 	VAL	reduce by rule 111
-+ 	INCLUDE	reduce by rule 111
-+ 	OPEN	reduce by rule 111
-+ 	LITTLE	reduce by rule 111
-+ 	BIG	reduce by rule 111
-+ 	PIPELINE	reduce by rule 111
-+ 	LOWERCASE	reduce by rule 111
-+ 	UPPERCASE	reduce by rule 111
-+ 	VERBATIM	reduce by rule 111
-+ 	RTL	reduce by rule 111
-+ 	NONFIX	reduce by rule 111
-+ 	INFIX	reduce by rule 111
-+ 	INFIXR	reduce by rule 111
-+ 	DEBUG	reduce by rule 111
-+ 	RESOURCE	reduce by rule 111
-+ 	CPU	reduce by rule 111
-+ 	LATENCY	reduce by rule 111
-+ 	EXCEPTION	reduce by rule 111
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	EOF	reduce by rule 111
-+ 
-+ 	id	goto 114
-+ 	ident	goto 113
-+ 	ident2	goto 112
-+ 	idents	goto 205
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 114:
-+ 
-+ 	ident : id .  (reduce by rule 421)
-+ 	path : id . DOT sym 
-+ 
-+ 	ARCHITECTURE	reduce by rule 421
-+ 	END	reduce by rule 421
-+ 	LOCAL	reduce by rule 421
-+ 	IN	reduce by rule 421
-+ 	DATATYPE	reduce by rule 421
-+ 	TYPE	reduce by rule 421
-+ 	EQ	reduce by rule 421
-+ 	AND	reduce by rule 421
-+ 	LPAREN	reduce by rule 421
-+ 	RPAREN	reduce by rule 421
-+ 	SEMICOLON	reduce by rule 421
-+ 	CELLSET	reduce by rule 421
-+ 	STORAGE	reduce by rule 421
-+ 	LOCATIONS	reduce by rule 421
-+ 	DOT	shift 186
-+ 	STRUCTURE	reduce by rule 421
-+ 	FUNCTOR	reduce by rule 421
-+ 	SIGNATURE	reduce by rule 421
-+ 	WHERE	reduce by rule 421
-+ 	SHARING	reduce by rule 421
-+ 	INSTRUCTION	reduce by rule 421
-+ 	VLIW	reduce by rule 421
-+ 	SUPERSCALAR	reduce by rule 421
-+ 	FUN	reduce by rule 421
-+ 	VAL	reduce by rule 421
-+ 	INCLUDE	reduce by rule 421
-+ 	OPEN	reduce by rule 421
-+ 	LITTLE	reduce by rule 421
-+ 	BIG	reduce by rule 421
-+ 	PIPELINE	reduce by rule 421
-+ 	LOWERCASE	reduce by rule 421
-+ 	UPPERCASE	reduce by rule 421
-+ 	VERBATIM	reduce by rule 421
-+ 	RTL	reduce by rule 421
-+ 	NONFIX	reduce by rule 421
-+ 	INFIX	reduce by rule 421
-+ 	INFIXR	reduce by rule 421
-+ 	DEBUG	reduce by rule 421
-+ 	RESOURCE	reduce by rule 421
-+ 	CPU	reduce by rule 421
-+ 	LATENCY	reduce by rule 421
-+ 	EXCEPTION	reduce by rule 421
-+ 	ID	reduce by rule 421
-+ 	SYMBOL	reduce by rule 421
-+ 	EOF	reduce by rule 421
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 115:
-+ 
-+ 	mymldecl : INCLUDE sigexp .  (reduce by rule 81)
-+ 	sigexp : sigexp . WHERE sigsubs 
-+ 
-+ 	ARCHITECTURE	reduce by rule 81
-+ 	END	reduce by rule 81
-+ 	LOCAL	reduce by rule 81
-+ 	IN	reduce by rule 81
-+ 	DATATYPE	reduce by rule 81
-+ 	TYPE	reduce by rule 81
-+ 	RPAREN	reduce by rule 81
-+ 	SEMICOLON	reduce by rule 81
-+ 	STORAGE	reduce by rule 81
-+ 	LOCATIONS	reduce by rule 81
-+ 	STRUCTURE	reduce by rule 81
-+ 	FUNCTOR	reduce by rule 81
-+ 	SIGNATURE	reduce by rule 81
-+ 	WHERE	shift 206
-+ 	SHARING	reduce by rule 81
-+ 	INSTRUCTION	reduce by rule 81
-+ 	VLIW	reduce by rule 81
-+ 	SUPERSCALAR	reduce by rule 81
-+ 	FUN	reduce by rule 81
-+ 	VAL	reduce by rule 81
-+ 	INCLUDE	reduce by rule 81
-+ 	OPEN	reduce by rule 81
-+ 	LITTLE	reduce by rule 81
-+ 	BIG	reduce by rule 81
-+ 	PIPELINE	reduce by rule 81
-+ 	LOWERCASE	reduce by rule 81
-+ 	UPPERCASE	reduce by rule 81
-+ 	VERBATIM	reduce by rule 81
-+ 	RTL	reduce by rule 81
-+ 	NONFIX	reduce by rule 81
-+ 	INFIX	reduce by rule 81
-+ 	INFIXR	reduce by rule 81
-+ 	DEBUG	reduce by rule 81
-+ 	RESOURCE	reduce by rule 81
-+ 	CPU	reduce by rule 81
-+ 	LATENCY	reduce by rule 81
-+ 	EXCEPTION	reduce by rule 81
-+ 	EOF	reduce by rule 81
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 116:
-+ 
-+ 	decl : INCLUDE string . optsemi 
-+ 
-+ 	ARCHITECTURE	reduce by rule 5
-+ 	END	reduce by rule 5
-+ 	LOCAL	reduce by rule 5
-+ 	IN	reduce by rule 5
-+ 	DATATYPE	reduce by rule 5
-+ 	TYPE	reduce by rule 5
-+ 	RPAREN	reduce by rule 5
-+ 	SEMICOLON	shift 42
-+ 	STORAGE	reduce by rule 5
-+ 	LOCATIONS	reduce by rule 5
-+ 	STRUCTURE	reduce by rule 5
-+ 	FUNCTOR	reduce by rule 5
-+ 	SIGNATURE	reduce by rule 5
-+ 	SHARING	reduce by rule 5
-+ 	INSTRUCTION	reduce by rule 5
-+ 	VLIW	reduce by rule 5
-+ 	SUPERSCALAR	reduce by rule 5
-+ 	FUN	reduce by rule 5
-+ 	VAL	reduce by rule 5
-+ 	INCLUDE	reduce by rule 5
-+ 	OPEN	reduce by rule 5
-+ 	LITTLE	reduce by rule 5
-+ 	BIG	reduce by rule 5
-+ 	PIPELINE	reduce by rule 5
-+ 	LOWERCASE	reduce by rule 5
-+ 	UPPERCASE	reduce by rule 5
-+ 	VERBATIM	reduce by rule 5
-+ 	RTL	reduce by rule 5
-+ 	NONFIX	reduce by rule 5
-+ 	INFIX	reduce by rule 5
-+ 	INFIXR	reduce by rule 5
-+ 	DEBUG	reduce by rule 5
-+ 	RESOURCE	reduce by rule 5
-+ 	CPU	reduce by rule 5
-+ 	LATENCY	reduce by rule 5
-+ 	EXCEPTION	reduce by rule 5
-+ 	EOF	reduce by rule 5
-+ 
-+ 	optsemi	goto 207
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 117:
-+ 
-+ 	sigexp : ident .  (reduce by rule 90)
-+ 
-+ 	ARCHITECTURE	reduce by rule 90
-+ 	END	reduce by rule 90
-+ 	LOCAL	reduce by rule 90
-+ 	IN	reduce by rule 90
-+ 	DATATYPE	reduce by rule 90
-+ 	TYPE	reduce by rule 90
-+ 	EQ	reduce by rule 90
-+ 	RPAREN	reduce by rule 90
-+ 	SEMICOLON	reduce by rule 90
-+ 	STORAGE	reduce by rule 90
-+ 	LOCATIONS	reduce by rule 90
-+ 	STRUCTURE	reduce by rule 90
-+ 	FUNCTOR	reduce by rule 90
-+ 	SIGNATURE	reduce by rule 90
-+ 	WHERE	reduce by rule 90
-+ 	SHARING	reduce by rule 90
-+ 	INSTRUCTION	reduce by rule 90
-+ 	VLIW	reduce by rule 90
-+ 	SUPERSCALAR	reduce by rule 90
-+ 	FUN	reduce by rule 90
-+ 	VAL	reduce by rule 90
-+ 	INCLUDE	reduce by rule 90
-+ 	OPEN	reduce by rule 90
-+ 	LITTLE	reduce by rule 90
-+ 	BIG	reduce by rule 90
-+ 	PIPELINE	reduce by rule 90
-+ 	LOWERCASE	reduce by rule 90
-+ 	UPPERCASE	reduce by rule 90
-+ 	VERBATIM	reduce by rule 90
-+ 	RTL	reduce by rule 90
-+ 	NONFIX	reduce by rule 90
-+ 	INFIX	reduce by rule 90
-+ 	INFIXR	reduce by rule 90
-+ 	DEBUG	reduce by rule 90
-+ 	RESOURCE	reduce by rule 90
-+ 	CPU	reduce by rule 90
-+ 	LATENCY	reduce by rule 90
-+ 	EXCEPTION	reduce by rule 90
-+ 	EOF	reduce by rule 90
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 118:
-+ 
-+ 	sigexp : SIG . decls END 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	END	reduce by rule 1
-+ 	LOCAL	shift 38
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 
-+ 	decls	goto 208
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 119:
-+ 
-+ 	mymldecl : VAL valbinds .  (reduce by rule 65)
-+ 
-+ 	ARCHITECTURE	reduce by rule 65
-+ 	END	reduce by rule 65
-+ 	LOCAL	reduce by rule 65
-+ 	IN	reduce by rule 65
-+ 	DATATYPE	reduce by rule 65
-+ 	TYPE	reduce by rule 65
-+ 	RPAREN	reduce by rule 65
-+ 	SEMICOLON	reduce by rule 65
-+ 	STORAGE	reduce by rule 65
-+ 	LOCATIONS	reduce by rule 65
-+ 	STRUCTURE	reduce by rule 65
-+ 	FUNCTOR	reduce by rule 65
-+ 	SIGNATURE	reduce by rule 65
-+ 	SHARING	reduce by rule 65
-+ 	INSTRUCTION	reduce by rule 65
-+ 	VLIW	reduce by rule 65
-+ 	SUPERSCALAR	reduce by rule 65
-+ 	FUN	reduce by rule 65
-+ 	VAL	reduce by rule 65
-+ 	INCLUDE	reduce by rule 65
-+ 	OPEN	reduce by rule 65
-+ 	LITTLE	reduce by rule 65
-+ 	BIG	reduce by rule 65
-+ 	PIPELINE	reduce by rule 65
-+ 	LOWERCASE	reduce by rule 65
-+ 	UPPERCASE	reduce by rule 65
-+ 	VERBATIM	reduce by rule 65
-+ 	RTL	reduce by rule 65
-+ 	NONFIX	reduce by rule 65
-+ 	INFIX	reduce by rule 65
-+ 	INFIXR	reduce by rule 65
-+ 	DEBUG	reduce by rule 65
-+ 	RESOURCE	reduce by rule 65
-+ 	CPU	reduce by rule 65
-+ 	LATENCY	reduce by rule 65
-+ 	EXCEPTION	reduce by rule 65
-+ 	EOF	reduce by rule 65
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 120:
-+ 
-+ 	valbinds : valbind .  (reduce by rule 231)
-+ 	valbinds : valbind . AND valbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 231
-+ 	END	reduce by rule 231
-+ 	LOCAL	reduce by rule 231
-+ 	IN	reduce by rule 231
-+ 	DATATYPE	reduce by rule 231
-+ 	TYPE	reduce by rule 231
-+ 	AND	shift 209
-+ 	RPAREN	reduce by rule 231
-+ 	SEMICOLON	reduce by rule 231
-+ 	STORAGE	reduce by rule 231
-+ 	LOCATIONS	reduce by rule 231
-+ 	STRUCTURE	reduce by rule 231
-+ 	FUNCTOR	reduce by rule 231
-+ 	SIGNATURE	reduce by rule 231
-+ 	SHARING	reduce by rule 231
-+ 	INSTRUCTION	reduce by rule 231
-+ 	VLIW	reduce by rule 231
-+ 	SUPERSCALAR	reduce by rule 231
-+ 	FUN	reduce by rule 231
-+ 	VAL	reduce by rule 231
-+ 	INCLUDE	reduce by rule 231
-+ 	OPEN	reduce by rule 231
-+ 	LITTLE	reduce by rule 231
-+ 	BIG	reduce by rule 231
-+ 	PIPELINE	reduce by rule 231
-+ 	LOWERCASE	reduce by rule 231
-+ 	UPPERCASE	reduce by rule 231
-+ 	VERBATIM	reduce by rule 231
-+ 	RTL	reduce by rule 231
-+ 	NONFIX	reduce by rule 231
-+ 	INFIX	reduce by rule 231
-+ 	INFIXR	reduce by rule 231
-+ 	DEBUG	reduce by rule 231
-+ 	RESOURCE	reduce by rule 231
-+ 	CPU	reduce by rule 231
-+ 	LATENCY	reduce by rule 231
-+ 	EXCEPTION	reduce by rule 231
-+ 	EOF	reduce by rule 231
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 121:
-+ 
-+ 	valbind : pat . EQ typedexp 
-+ 
-+ 	EQ	shift 210
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 122:
-+ 
-+ 	apppat : apppat . apat2 
-+ 	pat : apppat .  (reduce by rule 315)
-+ 
-+ 	EQ	reduce by rule 315
-+ 	TIMES	shift 72
-+ 	AND	reduce by rule 315
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	RPAREN	reduce by rule 315
-+ 	LBRACKET	shift 101
-+ 	RBRACKET	reduce by rule 315
-+ 	LBRACE	shift 100
-+ 	RBRACE	reduce by rule 315
-+ 	CELLSET	shift 50
-+ 	COMMA	reduce by rule 315
-+ 	COLON	reduce by rule 315
-+ 	BAR	reduce by rule 315
-+ 	DARROW	reduce by rule 315
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	WHERE	reduce by rule 315
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	EXCEPTION	reduce by rule 315
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 211
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 123:
-+ 
-+ 	apppat : apat2 .  (reduce by rule 313)
-+ 
-+ 	EQ	reduce by rule 313
-+ 	TIMES	reduce by rule 313
-+ 	AND	reduce by rule 313
-+ 	DEREF	reduce by rule 313
-+ 	NOT	reduce by rule 313
-+ 	LHASHBRACKET	reduce by rule 313
-+ 	LPAREN	reduce by rule 313
-+ 	RPAREN	reduce by rule 313
-+ 	LBRACKET	reduce by rule 313
-+ 	RBRACKET	reduce by rule 313
-+ 	LBRACE	reduce by rule 313
-+ 	RBRACE	reduce by rule 313
-+ 	CELLSET	reduce by rule 313
-+ 	COMMA	reduce by rule 313
-+ 	COLON	reduce by rule 313
-+ 	BAR	reduce by rule 313
-+ 	DARROW	reduce by rule 313
-+ 	TRUE	reduce by rule 313
-+ 	FALSE	reduce by rule 313
-+ 	WILD	reduce by rule 313
-+ 	WHERE	reduce by rule 313
-+ 	OP	reduce by rule 313
-+ 	ALWAYS	reduce by rule 313
-+ 	NEVER	reduce by rule 313
-+ 	EXCEPTION	reduce by rule 313
-+ 	ID	reduce by rule 313
-+ 	SYMBOL	reduce by rule 313
-+ 	WORD	reduce by rule 313
-+ 	INT	reduce by rule 313
-+ 	INTINF	reduce by rule 313
-+ 	REAL	reduce by rule 313
-+ 	STRING	reduce by rule 313
-+ 	CHAR	reduce by rule 313
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 124:
-+ 
-+ 	apat2 : apat .  (reduce by rule 310)
-+ 
-+ 	EQ	reduce by rule 310
-+ 	TIMES	reduce by rule 310
-+ 	AND	reduce by rule 310
-+ 	DEREF	reduce by rule 310
-+ 	NOT	reduce by rule 310
-+ 	LHASHBRACKET	reduce by rule 310
-+ 	LPAREN	reduce by rule 310
-+ 	RPAREN	reduce by rule 310
-+ 	LBRACKET	reduce by rule 310
-+ 	RBRACKET	reduce by rule 310
-+ 	LBRACE	reduce by rule 310
-+ 	RBRACE	reduce by rule 310
-+ 	CELLSET	reduce by rule 310
-+ 	COMMA	reduce by rule 310
-+ 	COLON	reduce by rule 310
-+ 	BAR	reduce by rule 310
-+ 	DARROW	reduce by rule 310
-+ 	TRUE	reduce by rule 310
-+ 	FALSE	reduce by rule 310
-+ 	WILD	reduce by rule 310
-+ 	WHERE	reduce by rule 310
-+ 	OP	reduce by rule 310
-+ 	ALWAYS	reduce by rule 310
-+ 	NEVER	reduce by rule 310
-+ 	EXCEPTION	reduce by rule 310
-+ 	ID	reduce by rule 310
-+ 	SYMBOL	reduce by rule 310
-+ 	WORD	reduce by rule 310
-+ 	INT	reduce by rule 310
-+ 	INTINF	reduce by rule 310
-+ 	REAL	reduce by rule 310
-+ 	STRING	reduce by rule 310
-+ 	CHAR	reduce by rule 310
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 125:
-+ 
-+ 	mymldecl : VAL syms . COLON ty 
-+ 
-+ 	COLON	shift 212
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 126: shift/reduce conflict (shift SYMBOL, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift ID, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift CELLSET, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift NOT, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift DEREF, reduce by rule 311)
-+ error:  state 126: shift/reduce conflict (shift TIMES, reduce by rule 311)
-+ 
-+ state 126:
-+ 
-+ 	syms : sym .  (reduce by rule 109)
-+ 	syms : sym . syms 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET CONCAT sym 
-+ 	apat2 : sym .  (reduce by rule 311)
-+ 
-+ 	EQ	reduce by rule 311
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CONCAT	shift 184
-+ 	LHASHBRACKET	reduce by rule 311
-+ 	LPAREN	reduce by rule 311
-+ 	LBRACKET	reduce by rule 311
-+ 	LBRACE	reduce by rule 311
-+ 	CELLSET	shift 50
-+ 	COLON	reduce by rule 109
-+ 	TRUE	reduce by rule 311
-+ 	FALSE	reduce by rule 311
-+ 	WILD	reduce by rule 311
-+ 	OP	reduce by rule 311
-+ 	ALWAYS	reduce by rule 311
-+ 	NEVER	reduce by rule 311
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	reduce by rule 311
-+ 	INT	reduce by rule 311
-+ 	INTINF	reduce by rule 311
-+ 	REAL	reduce by rule 311
-+ 	STRING	reduce by rule 311
-+ 	CHAR	reduce by rule 311
-+ 
-+ 	id	goto 69
-+ 	sym	goto 68
-+ 	symb	goto 67
-+ 	syms	goto 180
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 127:
-+ 
-+ 	sym : id .  (reduce by rule 416)
-+ 	path : id . DOT sym 
-+ 	pat : id . AS pat 
-+ 
-+ 	EQ	reduce by rule 416
-+ 	TIMES	reduce by rule 416
-+ 	AND	reduce by rule 416
-+ 	DEREF	reduce by rule 416
-+ 	NOT	reduce by rule 416
-+ 	CONCAT	reduce by rule 416
-+ 	LHASHBRACKET	reduce by rule 416
-+ 	LPAREN	reduce by rule 416
-+ 	RPAREN	reduce by rule 416
-+ 	LBRACKET	reduce by rule 416
-+ 	RBRACKET	reduce by rule 416
-+ 	LBRACE	reduce by rule 416
-+ 	RBRACE	reduce by rule 416
-+ 	CELLSET	reduce by rule 416
-+ 	COMMA	reduce by rule 416
-+ 	COLON	reduce by rule 416
-+ 	DOT	shift 186
-+ 	BAR	reduce by rule 416
-+ 	DARROW	reduce by rule 416
-+ 	TRUE	reduce by rule 416
-+ 	FALSE	reduce by rule 416
-+ 	WILD	reduce by rule 416
-+ 	WHERE	reduce by rule 416
-+ 	AS	shift 213
-+ 	OP	reduce by rule 416
-+ 	ALWAYS	reduce by rule 416
-+ 	NEVER	reduce by rule 416
-+ 	EXCEPTION	reduce by rule 416
-+ 	ID	reduce by rule 416
-+ 	SYMBOL	reduce by rule 416
-+ 	WORD	reduce by rule 416
-+ 	INT	reduce by rule 416
-+ 	INTINF	reduce by rule 416
-+ 	REAL	reduce by rule 416
-+ 	STRING	reduce by rule 416
-+ 	CHAR	reduce by rule 416
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 128:
-+ 
-+ 	apat2 : OP . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 214
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 129:
-+ 
-+ 	mymldecl : FUN funbinds .  (reduce by rule 61)
-+ 
-+ 	ARCHITECTURE	reduce by rule 61
-+ 	END	reduce by rule 61
-+ 	LOCAL	reduce by rule 61
-+ 	IN	reduce by rule 61
-+ 	DATATYPE	reduce by rule 61
-+ 	TYPE	reduce by rule 61
-+ 	RPAREN	reduce by rule 61
-+ 	SEMICOLON	reduce by rule 61
-+ 	STORAGE	reduce by rule 61
-+ 	LOCATIONS	reduce by rule 61
-+ 	STRUCTURE	reduce by rule 61
-+ 	FUNCTOR	reduce by rule 61
-+ 	SIGNATURE	reduce by rule 61
-+ 	SHARING	reduce by rule 61
-+ 	INSTRUCTION	reduce by rule 61
-+ 	VLIW	reduce by rule 61
-+ 	SUPERSCALAR	reduce by rule 61
-+ 	FUN	reduce by rule 61
-+ 	VAL	reduce by rule 61
-+ 	INCLUDE	reduce by rule 61
-+ 	OPEN	reduce by rule 61
-+ 	LITTLE	reduce by rule 61
-+ 	BIG	reduce by rule 61
-+ 	PIPELINE	reduce by rule 61
-+ 	LOWERCASE	reduce by rule 61
-+ 	UPPERCASE	reduce by rule 61
-+ 	VERBATIM	reduce by rule 61
-+ 	RTL	reduce by rule 61
-+ 	NONFIX	reduce by rule 61
-+ 	INFIX	reduce by rule 61
-+ 	INFIXR	reduce by rule 61
-+ 	DEBUG	reduce by rule 61
-+ 	RESOURCE	reduce by rule 61
-+ 	CPU	reduce by rule 61
-+ 	LATENCY	reduce by rule 61
-+ 	EXCEPTION	reduce by rule 61
-+ 	EOF	reduce by rule 61
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 130:
-+ 
-+ 	funbinds : funbind .  (reduce by rule 228)
-+ 	funbinds : funbind . AND funbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 228
-+ 	END	reduce by rule 228
-+ 	LOCAL	reduce by rule 228
-+ 	IN	reduce by rule 228
-+ 	DATATYPE	reduce by rule 228
-+ 	TYPE	reduce by rule 228
-+ 	AND	shift 215
-+ 	RPAREN	reduce by rule 228
-+ 	SEMICOLON	reduce by rule 228
-+ 	STORAGE	reduce by rule 228
-+ 	LOCATIONS	reduce by rule 228
-+ 	STRUCTURE	reduce by rule 228
-+ 	FUNCTOR	reduce by rule 228
-+ 	SIGNATURE	reduce by rule 228
-+ 	SHARING	reduce by rule 228
-+ 	INSTRUCTION	reduce by rule 228
-+ 	VLIW	reduce by rule 228
-+ 	SUPERSCALAR	reduce by rule 228
-+ 	FUN	reduce by rule 228
-+ 	VAL	reduce by rule 228
-+ 	INCLUDE	reduce by rule 228
-+ 	OPEN	reduce by rule 228
-+ 	LITTLE	reduce by rule 228
-+ 	BIG	reduce by rule 228
-+ 	PIPELINE	reduce by rule 228
-+ 	LOWERCASE	reduce by rule 228
-+ 	UPPERCASE	reduce by rule 228
-+ 	VERBATIM	reduce by rule 228
-+ 	RTL	reduce by rule 228
-+ 	NONFIX	reduce by rule 228
-+ 	INFIX	reduce by rule 228
-+ 	INFIXR	reduce by rule 228
-+ 	DEBUG	reduce by rule 228
-+ 	RESOURCE	reduce by rule 228
-+ 	CPU	reduce by rule 228
-+ 	LATENCY	reduce by rule 228
-+ 	EXCEPTION	reduce by rule 228
-+ 	EOF	reduce by rule 228
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 131:
-+ 
-+ 	funbind : funclauses .  (reduce by rule 230)
-+ 
-+ 	ARCHITECTURE	reduce by rule 230
-+ 	END	reduce by rule 230
-+ 	LOCAL	reduce by rule 230
-+ 	IN	reduce by rule 230
-+ 	DATATYPE	reduce by rule 230
-+ 	TYPE	reduce by rule 230
-+ 	AND	reduce by rule 230
-+ 	RPAREN	reduce by rule 230
-+ 	SEMICOLON	reduce by rule 230
-+ 	STORAGE	reduce by rule 230
-+ 	LOCATIONS	reduce by rule 230
-+ 	STRUCTURE	reduce by rule 230
-+ 	FUNCTOR	reduce by rule 230
-+ 	SIGNATURE	reduce by rule 230
-+ 	SHARING	reduce by rule 230
-+ 	INSTRUCTION	reduce by rule 230
-+ 	VLIW	reduce by rule 230
-+ 	SUPERSCALAR	reduce by rule 230
-+ 	FUN	reduce by rule 230
-+ 	VAL	reduce by rule 230
-+ 	INCLUDE	reduce by rule 230
-+ 	OPEN	reduce by rule 230
-+ 	LITTLE	reduce by rule 230
-+ 	BIG	reduce by rule 230
-+ 	PIPELINE	reduce by rule 230
-+ 	LOWERCASE	reduce by rule 230
-+ 	UPPERCASE	reduce by rule 230
-+ 	VERBATIM	reduce by rule 230
-+ 	RTL	reduce by rule 230
-+ 	NONFIX	reduce by rule 230
-+ 	INFIX	reduce by rule 230
-+ 	INFIXR	reduce by rule 230
-+ 	DEBUG	reduce by rule 230
-+ 	RESOURCE	reduce by rule 230
-+ 	CPU	reduce by rule 230
-+ 	LATENCY	reduce by rule 230
-+ 	EXCEPTION	reduce by rule 230
-+ 	EOF	reduce by rule 230
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 132:
-+ 
-+ 	funclauses : funclause .  (reduce by rule 348)
-+ 	funclauses : funclause . BAR funclauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 348
-+ 	END	reduce by rule 348
-+ 	LOCAL	reduce by rule 348
-+ 	IN	reduce by rule 348
-+ 	DATATYPE	reduce by rule 348
-+ 	TYPE	reduce by rule 348
-+ 	AND	reduce by rule 348
-+ 	RPAREN	reduce by rule 348
-+ 	SEMICOLON	reduce by rule 348
-+ 	STORAGE	reduce by rule 348
-+ 	LOCATIONS	reduce by rule 348
-+ 	BAR	shift 216
-+ 	STRUCTURE	reduce by rule 348
-+ 	FUNCTOR	reduce by rule 348
-+ 	SIGNATURE	reduce by rule 348
-+ 	SHARING	reduce by rule 348
-+ 	INSTRUCTION	reduce by rule 348
-+ 	VLIW	reduce by rule 348
-+ 	SUPERSCALAR	reduce by rule 348
-+ 	FUN	reduce by rule 348
-+ 	VAL	reduce by rule 348
-+ 	INCLUDE	reduce by rule 348
-+ 	OPEN	reduce by rule 348
-+ 	LITTLE	reduce by rule 348
-+ 	BIG	reduce by rule 348
-+ 	PIPELINE	reduce by rule 348
-+ 	LOWERCASE	reduce by rule 348
-+ 	UPPERCASE	reduce by rule 348
-+ 	VERBATIM	reduce by rule 348
-+ 	RTL	reduce by rule 348
-+ 	NONFIX	reduce by rule 348
-+ 	INFIX	reduce by rule 348
-+ 	INFIXR	reduce by rule 348
-+ 	DEBUG	reduce by rule 348
-+ 	RESOURCE	reduce by rule 348
-+ 	CPU	reduce by rule 348
-+ 	LATENCY	reduce by rule 348
-+ 	EXCEPTION	reduce by rule 348
-+ 	EOF	reduce by rule 348
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 133:
-+ 
-+ 	apppat : apppat . apat2 
-+ 	funclause : apppat . funguard return_ty cont EQ typedexp 
-+ 
-+ 	EQ	reduce by rule 346
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	COLON	reduce by rule 346
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	WHERE	shift 218
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	EXCEPTION	reduce by rule 346
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	funguard	goto 217
-+ 	apat	goto 124
-+ 	apat2	goto 211
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 134:
-+ 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET CONCAT sym 
-+ 	apat2 : sym .  (reduce by rule 311)
-+ 
-+ 	EQ	reduce by rule 311
-+ 	TIMES	reduce by rule 311
-+ 	AND	reduce by rule 311
-+ 	DEREF	reduce by rule 311
-+ 	NOT	reduce by rule 311
-+ 	CONCAT	shift 184
-+ 	LHASHBRACKET	reduce by rule 311
-+ 	LPAREN	reduce by rule 311
-+ 	RPAREN	reduce by rule 311
-+ 	LBRACKET	reduce by rule 311
-+ 	RBRACKET	reduce by rule 311
-+ 	LBRACE	reduce by rule 311
-+ 	RBRACE	reduce by rule 311
-+ 	CELLSET	reduce by rule 311
-+ 	COMMA	reduce by rule 311
-+ 	COLON	reduce by rule 311
-+ 	BAR	reduce by rule 311
-+ 	DARROW	reduce by rule 311
-+ 	TRUE	reduce by rule 311
-+ 	FALSE	reduce by rule 311
-+ 	WILD	reduce by rule 311
-+ 	WHERE	reduce by rule 311
-+ 	OP	reduce by rule 311
-+ 	ALWAYS	reduce by rule 311
-+ 	NEVER	reduce by rule 311
-+ 	EXCEPTION	reduce by rule 311
-+ 	ID	reduce by rule 311
-+ 	SYMBOL	reduce by rule 311
-+ 	WORD	reduce by rule 311
-+ 	INT	reduce by rule 311
-+ 	INTINF	reduce by rule 311
-+ 	REAL	reduce by rule 311
-+ 	STRING	reduce by rule 311
-+ 	CHAR	reduce by rule 311
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 135:
-+ 
-+ 	sym : id .  (reduce by rule 416)
-+ 	path : id . DOT sym 
-+ 
-+ 	ARCHITECTURE	reduce by rule 416
-+ 	END	reduce by rule 416
-+ 	LOCAL	reduce by rule 416
-+ 	IN	reduce by rule 416
-+ 	OF	reduce by rule 416
-+ 	DATATYPE	reduce by rule 416
-+ 	TYPE	reduce by rule 416
-+ 	EQ	reduce by rule 416
-+ 	DOLLAR	reduce by rule 416
-+ 	TIMES	reduce by rule 416
-+ 	AND	reduce by rule 416
-+ 	DEREF	reduce by rule 416
-+ 	NOT	reduce by rule 416
-+ 	CONCAT	reduce by rule 416
-+ 	LLBRACKET	reduce by rule 416
-+ 	LHASHBRACKET	reduce by rule 416
-+ 	LPAREN	reduce by rule 416
-+ 	RPAREN	reduce by rule 416
-+ 	LBRACKET	reduce by rule 416
-+ 	RBRACKET	reduce by rule 416
-+ 	LBRACE	reduce by rule 416
-+ 	RBRACE	reduce by rule 416
-+ 	SEMICOLON	reduce by rule 416
-+ 	LDQUOTE	reduce by rule 416
-+ 	RMETA	reduce by rule 416
-+ 	CELLSET	reduce by rule 416
-+ 	STORAGE	reduce by rule 416
-+ 	LOCATIONS	reduce by rule 416
-+ 	HASH	reduce by rule 416
-+ 	COMMA	reduce by rule 416
-+ 	COLON	reduce by rule 416
-+ 	DOT	shift 186
-+ 	AT	reduce by rule 416
-+ 	BAR	reduce by rule 416
-+ 	DARROW	reduce by rule 416
-+ 	THEN	reduce by rule 416
-+ 	ELSE	reduce by rule 416
-+ 	TRUE	reduce by rule 416
-+ 	FALSE	reduce by rule 416
-+ 	WILD	reduce by rule 416
-+ 	HANDLE	reduce by rule 416
-+ 	LET	reduce by rule 416
-+ 	STRUCTURE	reduce by rule 416
-+ 	FUNCTOR	reduce by rule 416
-+ 	SIGNATURE	reduce by rule 416
-+ 	WHERE	reduce by rule 416
-+ 	SHARING	reduce by rule 416
-+ 	INSTRUCTION	reduce by rule 416
-+ 	VLIW	reduce by rule 416
-+ 	SUPERSCALAR	reduce by rule 416
-+ 	WITHTYPE	reduce by rule 416
-+ 	FUN	reduce by rule 416
-+ 	VAL	reduce by rule 416
-+ 	INCLUDE	reduce by rule 416
-+ 	OPEN	reduce by rule 416
-+ 	OP	reduce by rule 416
-+ 	LITTLE	reduce by rule 416
-+ 	BIG	reduce by rule 416
-+ 	PIPELINE	reduce by rule 416
-+ 	LOWERCASE	reduce by rule 416
-+ 	UPPERCASE	reduce by rule 416
-+ 	VERBATIM	reduce by rule 416
-+ 	RTL	reduce by rule 416
-+ 	SPAN	reduce by rule 416
-+ 	DELAYSLOT	reduce by rule 416
-+ 	ALWAYS	reduce by rule 416
-+ 	NEVER	reduce by rule 416
-+ 	NONFIX	reduce by rule 416
-+ 	INFIX	reduce by rule 416
-+ 	INFIXR	reduce by rule 416
-+ 	DEBUG	reduce by rule 416
-+ 	ASM_COLON	reduce by rule 416
-+ 	MC_COLON	reduce by rule 416
-+ 	RTL_COLON	reduce by rule 416
-+ 	DELAYSLOT_COLON	reduce by rule 416
-+ 	NULLIFIED_COLON	reduce by rule 416
-+ 	PADDING_COLON	reduce by rule 416
-+ 	RESOURCE	reduce by rule 416
-+ 	CPU	reduce by rule 416
-+ 	LATENCY	reduce by rule 416
-+ 	EXCEPTION	reduce by rule 416
-+ 	ID	reduce by rule 416
-+ 	SYMBOL	reduce by rule 416
-+ 	WORD	reduce by rule 416
-+ 	INT	reduce by rule 416
-+ 	INTINF	reduce by rule 416
-+ 	REAL	reduce by rule 416
-+ 	STRING	reduce by rule 416
-+ 	CHAR	reduce by rule 416
-+ 	EOF	reduce by rule 416
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 136:
-+ 
-+ 	consbinds : consbind .  (reduce by rule 142)
-+ 	consbinds : consbind . BAR consbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 142
-+ 	END	reduce by rule 142
-+ 	LOCAL	reduce by rule 142
-+ 	IN	reduce by rule 142
-+ 	DATATYPE	reduce by rule 142
-+ 	TYPE	reduce by rule 142
-+ 	AND	reduce by rule 142
-+ 	RPAREN	reduce by rule 142
-+ 	SEMICOLON	reduce by rule 142
-+ 	STORAGE	reduce by rule 142
-+ 	LOCATIONS	reduce by rule 142
-+ 	BAR	shift 219
-+ 	STRUCTURE	reduce by rule 142
-+ 	FUNCTOR	reduce by rule 142
-+ 	SIGNATURE	reduce by rule 142
-+ 	SHARING	reduce by rule 142
-+ 	INSTRUCTION	reduce by rule 142
-+ 	VLIW	reduce by rule 142
-+ 	SUPERSCALAR	reduce by rule 142
-+ 	WITHTYPE	reduce by rule 142
-+ 	FUN	reduce by rule 142
-+ 	VAL	reduce by rule 142
-+ 	INCLUDE	reduce by rule 142
-+ 	OPEN	reduce by rule 142
-+ 	LITTLE	reduce by rule 142
-+ 	BIG	reduce by rule 142
-+ 	PIPELINE	reduce by rule 142
-+ 	LOWERCASE	reduce by rule 142
-+ 	UPPERCASE	reduce by rule 142
-+ 	VERBATIM	reduce by rule 142
-+ 	RTL	reduce by rule 142
-+ 	NONFIX	reduce by rule 142
-+ 	INFIX	reduce by rule 142
-+ 	INFIXR	reduce by rule 142
-+ 	DEBUG	reduce by rule 142
-+ 	RESOURCE	reduce by rule 142
-+ 	CPU	reduce by rule 142
-+ 	LATENCY	reduce by rule 142
-+ 	EXCEPTION	reduce by rule 142
-+ 	EOF	reduce by rule 142
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 137:
-+ 
-+ 	mymddecl : INSTRUCTION consbinds .  (reduce by rule 22)
-+ 
-+ 	ARCHITECTURE	reduce by rule 22
-+ 	END	reduce by rule 22
-+ 	LOCAL	reduce by rule 22
-+ 	IN	reduce by rule 22
-+ 	DATATYPE	reduce by rule 22
-+ 	TYPE	reduce by rule 22
-+ 	RPAREN	reduce by rule 22
-+ 	SEMICOLON	reduce by rule 22
-+ 	STORAGE	reduce by rule 22
-+ 	LOCATIONS	reduce by rule 22
-+ 	STRUCTURE	reduce by rule 22
-+ 	FUNCTOR	reduce by rule 22
-+ 	SIGNATURE	reduce by rule 22
-+ 	SHARING	reduce by rule 22
-+ 	INSTRUCTION	reduce by rule 22
-+ 	VLIW	reduce by rule 22
-+ 	SUPERSCALAR	reduce by rule 22
-+ 	FUN	reduce by rule 22
-+ 	VAL	reduce by rule 22
-+ 	INCLUDE	reduce by rule 22
-+ 	OPEN	reduce by rule 22
-+ 	LITTLE	reduce by rule 22
-+ 	BIG	reduce by rule 22
-+ 	PIPELINE	reduce by rule 22
-+ 	LOWERCASE	reduce by rule 22
-+ 	UPPERCASE	reduce by rule 22
-+ 	VERBATIM	reduce by rule 22
-+ 	RTL	reduce by rule 22
-+ 	NONFIX	reduce by rule 22
-+ 	INFIX	reduce by rule 22
-+ 	INFIXR	reduce by rule 22
-+ 	DEBUG	reduce by rule 22
-+ 	RESOURCE	reduce by rule 22
-+ 	CPU	reduce by rule 22
-+ 	LATENCY	reduce by rule 22
-+ 	EXCEPTION	reduce by rule 22
-+ 	EOF	reduce by rule 22
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 138:
-+ 
-+ 	consbind : sym . of_ty consassembly consencoding rtl nop nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 151
-+ 	END	reduce by rule 151
-+ 	LOCAL	reduce by rule 151
-+ 	IN	reduce by rule 151
-+ 	OF	shift 221
-+ 	DATATYPE	reduce by rule 151
-+ 	TYPE	reduce by rule 151
-+ 	AND	reduce by rule 151
-+ 	LPAREN	reduce by rule 151
-+ 	RPAREN	reduce by rule 151
-+ 	SEMICOLON	reduce by rule 151
-+ 	LDQUOTE	reduce by rule 151
-+ 	CELLSET	reduce by rule 151
-+ 	STORAGE	reduce by rule 151
-+ 	LOCATIONS	reduce by rule 151
-+ 	BAR	reduce by rule 151
-+ 	STRUCTURE	reduce by rule 151
-+ 	FUNCTOR	reduce by rule 151
-+ 	SIGNATURE	reduce by rule 151
-+ 	SHARING	reduce by rule 151
-+ 	INSTRUCTION	reduce by rule 151
-+ 	VLIW	reduce by rule 151
-+ 	SUPERSCALAR	reduce by rule 151
-+ 	WITHTYPE	reduce by rule 151
-+ 	FUN	reduce by rule 151
-+ 	VAL	reduce by rule 151
-+ 	INCLUDE	reduce by rule 151
-+ 	OPEN	reduce by rule 151
-+ 	LITTLE	reduce by rule 151
-+ 	BIG	reduce by rule 151
-+ 	PIPELINE	reduce by rule 151
-+ 	LOWERCASE	reduce by rule 151
-+ 	UPPERCASE	reduce by rule 151
-+ 	VERBATIM	reduce by rule 151
-+ 	RTL	reduce by rule 151
-+ 	SPAN	reduce by rule 151
-+ 	DELAYSLOT	reduce by rule 151
-+ 	NONFIX	reduce by rule 151
-+ 	INFIX	reduce by rule 151
-+ 	INFIXR	reduce by rule 151
-+ 	DEBUG	reduce by rule 151
-+ 	ASM_COLON	reduce by rule 151
-+ 	MC_COLON	reduce by rule 151
-+ 	RTL_COLON	reduce by rule 151
-+ 	DELAYSLOT_COLON	reduce by rule 151
-+ 	NULLIFIED_COLON	reduce by rule 151
-+ 	PADDING_COLON	reduce by rule 151
-+ 	RESOURCE	reduce by rule 151
-+ 	CPU	reduce by rule 151
-+ 	LATENCY	reduce by rule 151
-+ 	EXCEPTION	reduce by rule 151
-+ 	ID	reduce by rule 151
-+ 	SYMBOL	reduce by rule 151
-+ 	WORD	reduce by rule 151
-+ 	INT	reduce by rule 151
-+ 	STRING	reduce by rule 151
-+ 	EOF	reduce by rule 151
-+ 
-+ 	of_ty	goto 220
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 139:
-+ 
-+ 	mymddecl : INSTRUCTION FORMATS . int BITS formatbinds 
-+ 	mymddecl : INSTRUCTION FORMATS . formatbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	INT	shift 64
-+ 
-+ 	id	goto 225
-+ 	int	goto 224
-+ 	formatbind	goto 223
-+ 	formatbinds	goto 222
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 140:
-+ 
-+ 	sharingdecl : sharelist .  (reduce by rule 102)
-+ 
-+ 	ARCHITECTURE	reduce by rule 102
-+ 	END	reduce by rule 102
-+ 	LOCAL	reduce by rule 102
-+ 	IN	reduce by rule 102
-+ 	DATATYPE	reduce by rule 102
-+ 	TYPE	reduce by rule 102
-+ 	AND	reduce by rule 102
-+ 	RPAREN	reduce by rule 102
-+ 	SEMICOLON	reduce by rule 102
-+ 	STORAGE	reduce by rule 102
-+ 	LOCATIONS	reduce by rule 102
-+ 	STRUCTURE	reduce by rule 102
-+ 	FUNCTOR	reduce by rule 102
-+ 	SIGNATURE	reduce by rule 102
-+ 	SHARING	reduce by rule 102
-+ 	INSTRUCTION	reduce by rule 102
-+ 	VLIW	reduce by rule 102
-+ 	SUPERSCALAR	reduce by rule 102
-+ 	FUN	reduce by rule 102
-+ 	VAL	reduce by rule 102
-+ 	INCLUDE	reduce by rule 102
-+ 	OPEN	reduce by rule 102
-+ 	LITTLE	reduce by rule 102
-+ 	BIG	reduce by rule 102
-+ 	PIPELINE	reduce by rule 102
-+ 	LOWERCASE	reduce by rule 102
-+ 	UPPERCASE	reduce by rule 102
-+ 	VERBATIM	reduce by rule 102
-+ 	RTL	reduce by rule 102
-+ 	NONFIX	reduce by rule 102
-+ 	INFIX	reduce by rule 102
-+ 	INFIXR	reduce by rule 102
-+ 	DEBUG	reduce by rule 102
-+ 	RESOURCE	reduce by rule 102
-+ 	CPU	reduce by rule 102
-+ 	LATENCY	reduce by rule 102
-+ 	EXCEPTION	reduce by rule 102
-+ 	EOF	reduce by rule 102
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 141:
-+ 
-+ 	mymldecl : SHARING sharingdecls .  (reduce by rule 76)
-+ 
-+ 	ARCHITECTURE	reduce by rule 76
-+ 	END	reduce by rule 76
-+ 	LOCAL	reduce by rule 76
-+ 	IN	reduce by rule 76
-+ 	DATATYPE	reduce by rule 76
-+ 	TYPE	reduce by rule 76
-+ 	RPAREN	reduce by rule 76
-+ 	SEMICOLON	reduce by rule 76
-+ 	STORAGE	reduce by rule 76
-+ 	LOCATIONS	reduce by rule 76
-+ 	STRUCTURE	reduce by rule 76
-+ 	FUNCTOR	reduce by rule 76
-+ 	SIGNATURE	reduce by rule 76
-+ 	SHARING	reduce by rule 76
-+ 	INSTRUCTION	reduce by rule 76
-+ 	VLIW	reduce by rule 76
-+ 	SUPERSCALAR	reduce by rule 76
-+ 	FUN	reduce by rule 76
-+ 	VAL	reduce by rule 76
-+ 	INCLUDE	reduce by rule 76
-+ 	OPEN	reduce by rule 76
-+ 	LITTLE	reduce by rule 76
-+ 	BIG	reduce by rule 76
-+ 	PIPELINE	reduce by rule 76
-+ 	LOWERCASE	reduce by rule 76
-+ 	UPPERCASE	reduce by rule 76
-+ 	VERBATIM	reduce by rule 76
-+ 	RTL	reduce by rule 76
-+ 	NONFIX	reduce by rule 76
-+ 	INFIX	reduce by rule 76
-+ 	INFIXR	reduce by rule 76
-+ 	DEBUG	reduce by rule 76
-+ 	RESOURCE	reduce by rule 76
-+ 	CPU	reduce by rule 76
-+ 	LATENCY	reduce by rule 76
-+ 	EXCEPTION	reduce by rule 76
-+ 	EOF	reduce by rule 76
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 142:
-+ 
-+ 	sharingdecls : sharingdecl .  (reduce by rule 99)
-+ 	sharingdecls : sharingdecl . AND sharingdecls 
-+ 
-+ 	ARCHITECTURE	reduce by rule 99
-+ 	END	reduce by rule 99
-+ 	LOCAL	reduce by rule 99
-+ 	IN	reduce by rule 99
-+ 	DATATYPE	reduce by rule 99
-+ 	TYPE	reduce by rule 99
-+ 	AND	shift 226
-+ 	RPAREN	reduce by rule 99
-+ 	SEMICOLON	reduce by rule 99
-+ 	STORAGE	reduce by rule 99
-+ 	LOCATIONS	reduce by rule 99
-+ 	STRUCTURE	reduce by rule 99
-+ 	FUNCTOR	reduce by rule 99
-+ 	SIGNATURE	reduce by rule 99
-+ 	SHARING	reduce by rule 99
-+ 	INSTRUCTION	reduce by rule 99
-+ 	VLIW	reduce by rule 99
-+ 	SUPERSCALAR	reduce by rule 99
-+ 	FUN	reduce by rule 99
-+ 	VAL	reduce by rule 99
-+ 	INCLUDE	reduce by rule 99
-+ 	OPEN	reduce by rule 99
-+ 	LITTLE	reduce by rule 99
-+ 	BIG	reduce by rule 99
-+ 	PIPELINE	reduce by rule 99
-+ 	LOWERCASE	reduce by rule 99
-+ 	UPPERCASE	reduce by rule 99
-+ 	VERBATIM	reduce by rule 99
-+ 	RTL	reduce by rule 99
-+ 	NONFIX	reduce by rule 99
-+ 	INFIX	reduce by rule 99
-+ 	INFIXR	reduce by rule 99
-+ 	DEBUG	reduce by rule 99
-+ 	RESOURCE	reduce by rule 99
-+ 	CPU	reduce by rule 99
-+ 	LATENCY	reduce by rule 99
-+ 	EXCEPTION	reduce by rule 99
-+ 	EOF	reduce by rule 99
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 143:
-+ 
-+ 	sharelist : ident . EQ ident 
-+ 	sharelist : ident . EQ sharelist 
-+ 
-+ 	EQ	shift 227
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 144:
-+ 
-+ 	sharingdecl : TYPE . sharelist 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 143
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sharelist	goto 228
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 145:
-+ 
-+ 	mymldecl : SIGNATURE id . EQ sigexp 
-+ 
-+ 	EQ	shift 229
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 146:
-+ 
-+ 	mymldecl : FUNCTOR id . LPAREN functorarg RPAREN EQ structexp 
-+ 	mymldecl : FUNCTOR id . LPAREN functorarg RPAREN sigcon EQ structexp 
-+ 	mymldecl : FUNCTOR id . EQ structexp 
-+ 
-+ 	EQ	shift 231
-+ 	LPAREN	shift 230
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 147:
-+ 
-+ 	mymldecl : STRUCTURE id . EQ structexp 
-+ 	mymldecl : STRUCTURE id . sigcon EQ structexp 
-+ 	mymldecl : STRUCTURE id . COLON sigexp 
-+ 
-+ 	EQ	shift 235
-+ 	COLON	shift 234
-+ 	COLONGREATER	shift 233
-+ 
-+ 	sigcon	goto 232
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 148:
-+ 
-+ 	mymddecl : LOCATIONS locbinds .  (reduce by rule 21)
-+ 
-+ 	ARCHITECTURE	reduce by rule 21
-+ 	END	reduce by rule 21
-+ 	LOCAL	reduce by rule 21
-+ 	IN	reduce by rule 21
-+ 	DATATYPE	reduce by rule 21
-+ 	TYPE	reduce by rule 21
-+ 	RPAREN	reduce by rule 21
-+ 	SEMICOLON	reduce by rule 21
-+ 	STORAGE	reduce by rule 21
-+ 	LOCATIONS	reduce by rule 21
-+ 	STRUCTURE	reduce by rule 21
-+ 	FUNCTOR	reduce by rule 21
-+ 	SIGNATURE	reduce by rule 21
-+ 	SHARING	reduce by rule 21
-+ 	INSTRUCTION	reduce by rule 21
-+ 	VLIW	reduce by rule 21
-+ 	SUPERSCALAR	reduce by rule 21
-+ 	FUN	reduce by rule 21
-+ 	VAL	reduce by rule 21
-+ 	INCLUDE	reduce by rule 21
-+ 	OPEN	reduce by rule 21
-+ 	LITTLE	reduce by rule 21
-+ 	BIG	reduce by rule 21
-+ 	PIPELINE	reduce by rule 21
-+ 	LOWERCASE	reduce by rule 21
-+ 	UPPERCASE	reduce by rule 21
-+ 	VERBATIM	reduce by rule 21
-+ 	RTL	reduce by rule 21
-+ 	NONFIX	reduce by rule 21
-+ 	INFIX	reduce by rule 21
-+ 	INFIXR	reduce by rule 21
-+ 	DEBUG	reduce by rule 21
-+ 	RESOURCE	reduce by rule 21
-+ 	CPU	reduce by rule 21
-+ 	LATENCY	reduce by rule 21
-+ 	EXCEPTION	reduce by rule 21
-+ 	EOF	reduce by rule 21
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 149:
-+ 
-+ 	locbinds : locbind .  (reduce by rule 392)
-+ 	locbinds : locbind . AND locbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 392
-+ 	END	reduce by rule 392
-+ 	LOCAL	reduce by rule 392
-+ 	IN	reduce by rule 392
-+ 	DATATYPE	reduce by rule 392
-+ 	TYPE	reduce by rule 392
-+ 	AND	shift 236
-+ 	RPAREN	reduce by rule 392
-+ 	SEMICOLON	reduce by rule 392
-+ 	STORAGE	reduce by rule 392
-+ 	LOCATIONS	reduce by rule 392
-+ 	STRUCTURE	reduce by rule 392
-+ 	FUNCTOR	reduce by rule 392
-+ 	SIGNATURE	reduce by rule 392
-+ 	SHARING	reduce by rule 392
-+ 	INSTRUCTION	reduce by rule 392
-+ 	VLIW	reduce by rule 392
-+ 	SUPERSCALAR	reduce by rule 392
-+ 	FUN	reduce by rule 392
-+ 	VAL	reduce by rule 392
-+ 	INCLUDE	reduce by rule 392
-+ 	OPEN	reduce by rule 392
-+ 	LITTLE	reduce by rule 392
-+ 	BIG	reduce by rule 392
-+ 	PIPELINE	reduce by rule 392
-+ 	LOWERCASE	reduce by rule 392
-+ 	UPPERCASE	reduce by rule 392
-+ 	VERBATIM	reduce by rule 392
-+ 	RTL	reduce by rule 392
-+ 	NONFIX	reduce by rule 392
-+ 	INFIX	reduce by rule 392
-+ 	INFIXR	reduce by rule 392
-+ 	DEBUG	reduce by rule 392
-+ 	RESOURCE	reduce by rule 392
-+ 	CPU	reduce by rule 392
-+ 	LATENCY	reduce by rule 392
-+ 	EXCEPTION	reduce by rule 392
-+ 	EOF	reduce by rule 392
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 150:
-+ 
-+ 	locbind : id . EQ exp 
-+ 	locbind : id . pat EQ exp 
-+ 
-+ 	EQ	shift 238
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 237
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 151:
-+ 
-+ 	mymddecl : STORAGE storagedecls .  (reduce by rule 20)
-+ 
-+ 	ARCHITECTURE	reduce by rule 20
-+ 	END	reduce by rule 20
-+ 	LOCAL	reduce by rule 20
-+ 	IN	reduce by rule 20
-+ 	DATATYPE	reduce by rule 20
-+ 	TYPE	reduce by rule 20
-+ 	RPAREN	reduce by rule 20
-+ 	SEMICOLON	reduce by rule 20
-+ 	STORAGE	reduce by rule 20
-+ 	LOCATIONS	reduce by rule 20
-+ 	STRUCTURE	reduce by rule 20
-+ 	FUNCTOR	reduce by rule 20
-+ 	SIGNATURE	reduce by rule 20
-+ 	SHARING	reduce by rule 20
-+ 	INSTRUCTION	reduce by rule 20
-+ 	VLIW	reduce by rule 20
-+ 	SUPERSCALAR	reduce by rule 20
-+ 	FUN	reduce by rule 20
-+ 	VAL	reduce by rule 20
-+ 	INCLUDE	reduce by rule 20
-+ 	OPEN	reduce by rule 20
-+ 	LITTLE	reduce by rule 20
-+ 	BIG	reduce by rule 20
-+ 	PIPELINE	reduce by rule 20
-+ 	LOWERCASE	reduce by rule 20
-+ 	UPPERCASE	reduce by rule 20
-+ 	VERBATIM	reduce by rule 20
-+ 	RTL	reduce by rule 20
-+ 	NONFIX	reduce by rule 20
-+ 	INFIX	reduce by rule 20
-+ 	INFIXR	reduce by rule 20
-+ 	DEBUG	reduce by rule 20
-+ 	RESOURCE	reduce by rule 20
-+ 	CPU	reduce by rule 20
-+ 	LATENCY	reduce by rule 20
-+ 	EXCEPTION	reduce by rule 20
-+ 	EOF	reduce by rule 20
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 152:
-+ 
-+ 	storagedecls : storagedecl .  (reduce by rule 381)
-+ 	storagedecls : storagedecl . BAR storagedecls 
-+ 
-+ 	ARCHITECTURE	reduce by rule 381
-+ 	END	reduce by rule 381
-+ 	LOCAL	reduce by rule 381
-+ 	IN	reduce by rule 381
-+ 	DATATYPE	reduce by rule 381
-+ 	TYPE	reduce by rule 381
-+ 	RPAREN	reduce by rule 381
-+ 	SEMICOLON	reduce by rule 381
-+ 	STORAGE	reduce by rule 381
-+ 	LOCATIONS	reduce by rule 381
-+ 	BAR	shift 239
-+ 	STRUCTURE	reduce by rule 381
-+ 	FUNCTOR	reduce by rule 381
-+ 	SIGNATURE	reduce by rule 381
-+ 	SHARING	reduce by rule 381
-+ 	INSTRUCTION	reduce by rule 381
-+ 	VLIW	reduce by rule 381
-+ 	SUPERSCALAR	reduce by rule 381
-+ 	FUN	reduce by rule 381
-+ 	VAL	reduce by rule 381
-+ 	INCLUDE	reduce by rule 381
-+ 	OPEN	reduce by rule 381
-+ 	LITTLE	reduce by rule 381
-+ 	BIG	reduce by rule 381
-+ 	PIPELINE	reduce by rule 381
-+ 	LOWERCASE	reduce by rule 381
-+ 	UPPERCASE	reduce by rule 381
-+ 	VERBATIM	reduce by rule 381
-+ 	RTL	reduce by rule 381
-+ 	NONFIX	reduce by rule 381
-+ 	INFIX	reduce by rule 381
-+ 	INFIXR	reduce by rule 381
-+ 	DEBUG	reduce by rule 381
-+ 	RESOURCE	reduce by rule 381
-+ 	CPU	reduce by rule 381
-+ 	LATENCY	reduce by rule 381
-+ 	EXCEPTION	reduce by rule 381
-+ 	EOF	reduce by rule 381
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 153:
-+ 
-+ 	storagedecl : id . EQ DOLLAR id LBRACKET cellcount RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	EQ	shift 240
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 154:
-+ 
-+ 	mymldecl : TYPE tyvarseq . tid 
-+ 	typebind : tyvarseq . tid EQ ty 
-+ 
-+ 	CELLSET	shift 50
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 243
-+ 	tid	goto 242
-+ 	tid2	goto 241
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 155:
-+ 
-+ 	tyvarseq : tyvar .  (reduce by rule 200)
-+ 
-+ 	CELLSET	reduce by rule 200
-+ 	BITS	reduce by rule 200
-+ 	INSTRUCTION	reduce by rule 200
-+ 	CELL	reduce by rule 200
-+ 	ID	reduce by rule 200
-+ 	SYMBOL	reduce by rule 200
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 156:
-+ 
-+ 	typebinds : typebind .  (reduce by rule 196)
-+ 	typebinds : typebind . AND typebinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 196
-+ 	END	reduce by rule 196
-+ 	LOCAL	reduce by rule 196
-+ 	IN	reduce by rule 196
-+ 	DATATYPE	reduce by rule 196
-+ 	TYPE	reduce by rule 196
-+ 	AND	shift 247
-+ 	RPAREN	reduce by rule 196
-+ 	SEMICOLON	reduce by rule 196
-+ 	STORAGE	reduce by rule 196
-+ 	LOCATIONS	reduce by rule 196
-+ 	STRUCTURE	reduce by rule 196
-+ 	FUNCTOR	reduce by rule 196
-+ 	SIGNATURE	reduce by rule 196
-+ 	SHARING	reduce by rule 196
-+ 	INSTRUCTION	reduce by rule 196
-+ 	VLIW	reduce by rule 196
-+ 	SUPERSCALAR	reduce by rule 196
-+ 	FUN	reduce by rule 196
-+ 	VAL	reduce by rule 196
-+ 	INCLUDE	reduce by rule 196
-+ 	OPEN	reduce by rule 196
-+ 	LITTLE	reduce by rule 196
-+ 	BIG	reduce by rule 196
-+ 	PIPELINE	reduce by rule 196
-+ 	LOWERCASE	reduce by rule 196
-+ 	UPPERCASE	reduce by rule 196
-+ 	VERBATIM	reduce by rule 196
-+ 	RTL	reduce by rule 196
-+ 	NONFIX	reduce by rule 196
-+ 	INFIX	reduce by rule 196
-+ 	INFIXR	reduce by rule 196
-+ 	DEBUG	reduce by rule 196
-+ 	RESOURCE	reduce by rule 196
-+ 	CPU	reduce by rule 196
-+ 	LATENCY	reduce by rule 196
-+ 	EXCEPTION	reduce by rule 196
-+ 	EOF	reduce by rule 196
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 157:
-+ 
-+ 	mymldecl : TYPE typebinds .  (reduce by rule 60)
-+ 
-+ 	ARCHITECTURE	reduce by rule 60
-+ 	END	reduce by rule 60
-+ 	LOCAL	reduce by rule 60
-+ 	IN	reduce by rule 60
-+ 	DATATYPE	reduce by rule 60
-+ 	TYPE	reduce by rule 60
-+ 	RPAREN	reduce by rule 60
-+ 	SEMICOLON	reduce by rule 60
-+ 	STORAGE	reduce by rule 60
-+ 	LOCATIONS	reduce by rule 60
-+ 	STRUCTURE	reduce by rule 60
-+ 	FUNCTOR	reduce by rule 60
-+ 	SIGNATURE	reduce by rule 60
-+ 	SHARING	reduce by rule 60
-+ 	INSTRUCTION	reduce by rule 60
-+ 	VLIW	reduce by rule 60
-+ 	SUPERSCALAR	reduce by rule 60
-+ 	FUN	reduce by rule 60
-+ 	VAL	reduce by rule 60
-+ 	INCLUDE	reduce by rule 60
-+ 	OPEN	reduce by rule 60
-+ 	LITTLE	reduce by rule 60
-+ 	BIG	reduce by rule 60
-+ 	PIPELINE	reduce by rule 60
-+ 	LOWERCASE	reduce by rule 60
-+ 	UPPERCASE	reduce by rule 60
-+ 	VERBATIM	reduce by rule 60
-+ 	RTL	reduce by rule 60
-+ 	NONFIX	reduce by rule 60
-+ 	INFIX	reduce by rule 60
-+ 	INFIXR	reduce by rule 60
-+ 	DEBUG	reduce by rule 60
-+ 	RESOURCE	reduce by rule 60
-+ 	CPU	reduce by rule 60
-+ 	LATENCY	reduce by rule 60
-+ 	EXCEPTION	reduce by rule 60
-+ 	EOF	reduce by rule 60
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 158:
-+ 
-+ 	tyvar : TYVAR .  (reduce by rule 426)
-+ 
-+ 	ARCHITECTURE	reduce by rule 426
-+ 	END	reduce by rule 426
-+ 	LOCAL	reduce by rule 426
-+ 	IN	reduce by rule 426
-+ 	OF	reduce by rule 426
-+ 	DATATYPE	reduce by rule 426
-+ 	TYPE	reduce by rule 426
-+ 	EQ	reduce by rule 426
-+ 	TIMES	reduce by rule 426
-+ 	AND	reduce by rule 426
-+ 	LPAREN	reduce by rule 426
-+ 	RPAREN	reduce by rule 426
-+ 	RBRACKET	reduce by rule 426
-+ 	RBRACE	reduce by rule 426
-+ 	SEMICOLON	reduce by rule 426
-+ 	LDQUOTE	reduce by rule 426
-+ 	CELLSET	reduce by rule 426
-+ 	STORAGE	reduce by rule 426
-+ 	LOCATIONS	reduce by rule 426
-+ 	COMMA	reduce by rule 426
-+ 	COLON	reduce by rule 426
-+ 	BAR	reduce by rule 426
-+ 	ARROW	reduce by rule 426
-+ 	DARROW	reduce by rule 426
-+ 	BITS	reduce by rule 426
-+ 	THEN	reduce by rule 426
-+ 	ELSE	reduce by rule 426
-+ 	STRUCTURE	reduce by rule 426
-+ 	FUNCTOR	reduce by rule 426
-+ 	SIGNATURE	reduce by rule 426
-+ 	WHERE	reduce by rule 426
-+ 	SHARING	reduce by rule 426
-+ 	INSTRUCTION	reduce by rule 426
-+ 	CELL	reduce by rule 426
-+ 	VLIW	reduce by rule 426
-+ 	SUPERSCALAR	reduce by rule 426
-+ 	WITHTYPE	reduce by rule 426
-+ 	FUN	reduce by rule 426
-+ 	VAL	reduce by rule 426
-+ 	INCLUDE	reduce by rule 426
-+ 	OPEN	reduce by rule 426
-+ 	LITTLE	reduce by rule 426
-+ 	BIG	reduce by rule 426
-+ 	PIPELINE	reduce by rule 426
-+ 	LOWERCASE	reduce by rule 426
-+ 	UPPERCASE	reduce by rule 426
-+ 	VERBATIM	reduce by rule 426
-+ 	RTL	reduce by rule 426
-+ 	SPAN	reduce by rule 426
-+ 	DELAYSLOT	reduce by rule 426
-+ 	NONFIX	reduce by rule 426
-+ 	INFIX	reduce by rule 426
-+ 	INFIXR	reduce by rule 426
-+ 	DEBUG	reduce by rule 426
-+ 	ASM_COLON	reduce by rule 426
-+ 	MC_COLON	reduce by rule 426
-+ 	RTL_COLON	reduce by rule 426
-+ 	DELAYSLOT_COLON	reduce by rule 426
-+ 	NULLIFIED_COLON	reduce by rule 426
-+ 	PADDING_COLON	reduce by rule 426
-+ 	RESOURCE	reduce by rule 426
-+ 	CPU	reduce by rule 426
-+ 	LATENCY	reduce by rule 426
-+ 	EXCEPTION	reduce by rule 426
-+ 	ID	reduce by rule 426
-+ 	SYMBOL	reduce by rule 426
-+ 	WORD	reduce by rule 426
-+ 	INT	reduce by rule 426
-+ 	STRING	reduce by rule 426
-+ 	EOF	reduce by rule 426
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 159:
-+ 
-+ 	tyvar : HASH . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 248
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 160:
-+ 
-+ 	tyvarseq : LPAREN . tyvars RPAREN 
-+ 
-+ 	HASH	shift 159
-+ 	TYVAR	shift 158
-+ 
-+ 	tyvar	goto 250
-+ 	tyvars	goto 249
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 161:
-+ 
-+ 	datatypebind : tyvarseq . id opcodeencoding fieldty hasasm EQ consbinds 
-+ 	datatypebind : tyvarseq . id opcodeencoding fieldty hasasm EQ DATATYPE ty 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 251
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 162:
-+ 
-+ 	datatypebinds : datatypebind .  (reduce by rule 127)
-+ 	datatypebinds : datatypebind . AND datatypebinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 127
-+ 	END	reduce by rule 127
-+ 	LOCAL	reduce by rule 127
-+ 	IN	reduce by rule 127
-+ 	DATATYPE	reduce by rule 127
-+ 	TYPE	reduce by rule 127
-+ 	AND	shift 252
-+ 	RPAREN	reduce by rule 127
-+ 	SEMICOLON	reduce by rule 127
-+ 	STORAGE	reduce by rule 127
-+ 	LOCATIONS	reduce by rule 127
-+ 	STRUCTURE	reduce by rule 127
-+ 	FUNCTOR	reduce by rule 127
-+ 	SIGNATURE	reduce by rule 127
-+ 	SHARING	reduce by rule 127
-+ 	INSTRUCTION	reduce by rule 127
-+ 	VLIW	reduce by rule 127
-+ 	SUPERSCALAR	reduce by rule 127
-+ 	WITHTYPE	reduce by rule 127
-+ 	FUN	reduce by rule 127
-+ 	VAL	reduce by rule 127
-+ 	INCLUDE	reduce by rule 127
-+ 	OPEN	reduce by rule 127
-+ 	LITTLE	reduce by rule 127
-+ 	BIG	reduce by rule 127
-+ 	PIPELINE	reduce by rule 127
-+ 	LOWERCASE	reduce by rule 127
-+ 	UPPERCASE	reduce by rule 127
-+ 	VERBATIM	reduce by rule 127
-+ 	RTL	reduce by rule 127
-+ 	NONFIX	reduce by rule 127
-+ 	INFIX	reduce by rule 127
-+ 	INFIXR	reduce by rule 127
-+ 	DEBUG	reduce by rule 127
-+ 	RESOURCE	reduce by rule 127
-+ 	CPU	reduce by rule 127
-+ 	LATENCY	reduce by rule 127
-+ 	EXCEPTION	reduce by rule 127
-+ 	EOF	reduce by rule 127
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 163:
-+ 
-+ 	mymldecl : DATATYPE datatypebinds . withtypeclause 
-+ 
-+ 	ARCHITECTURE	reduce by rule 194
-+ 	END	reduce by rule 194
-+ 	LOCAL	reduce by rule 194
-+ 	IN	reduce by rule 194
-+ 	DATATYPE	reduce by rule 194
-+ 	TYPE	reduce by rule 194
-+ 	RPAREN	reduce by rule 194
-+ 	SEMICOLON	reduce by rule 194
-+ 	STORAGE	reduce by rule 194
-+ 	LOCATIONS	reduce by rule 194
-+ 	STRUCTURE	reduce by rule 194
-+ 	FUNCTOR	reduce by rule 194
-+ 	SIGNATURE	reduce by rule 194
-+ 	SHARING	reduce by rule 194
-+ 	INSTRUCTION	reduce by rule 194
-+ 	VLIW	reduce by rule 194
-+ 	SUPERSCALAR	reduce by rule 194
-+ 	WITHTYPE	shift 254
-+ 	FUN	reduce by rule 194
-+ 	VAL	reduce by rule 194
-+ 	INCLUDE	reduce by rule 194
-+ 	OPEN	reduce by rule 194
-+ 	LITTLE	reduce by rule 194
-+ 	BIG	reduce by rule 194
-+ 	PIPELINE	reduce by rule 194
-+ 	LOWERCASE	reduce by rule 194
-+ 	UPPERCASE	reduce by rule 194
-+ 	VERBATIM	reduce by rule 194
-+ 	RTL	reduce by rule 194
-+ 	NONFIX	reduce by rule 194
-+ 	INFIX	reduce by rule 194
-+ 	INFIXR	reduce by rule 194
-+ 	DEBUG	reduce by rule 194
-+ 	RESOURCE	reduce by rule 194
-+ 	CPU	reduce by rule 194
-+ 	LATENCY	reduce by rule 194
-+ 	EXCEPTION	reduce by rule 194
-+ 	EOF	reduce by rule 194
-+ 
-+ 	withtypeclause	goto 253
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 164:
-+ 
-+ 	scopeddecls : newScope . decls oldScope 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	END	reduce by rule 1
-+ 	LOCAL	shift 38
-+ 	IN	reduce by rule 1
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	RPAREN	reduce by rule 1
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 
-+ 	decls	goto 255
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 165:
-+ 
-+ 	mymldecl : LOCAL scopeddecls . IN scopeddecls END 
-+ 
-+ 	IN	shift 256
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 166:
-+ 
-+ 	mymddecl : ARCHITECTURE id . EQ STRUCT decls END 
-+ 
-+ 	EQ	shift 257
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 167:
-+ 
-+ 	optsemi : SEMICOLON optsemi .  (reduce by rule 6)
-+ 
-+ 	ARCHITECTURE	reduce by rule 6
-+ 	END	reduce by rule 6
-+ 	LOCAL	reduce by rule 6
-+ 	IN	reduce by rule 6
-+ 	DATATYPE	reduce by rule 6
-+ 	TYPE	reduce by rule 6
-+ 	RPAREN	reduce by rule 6
-+ 	STORAGE	reduce by rule 6
-+ 	LOCATIONS	reduce by rule 6
-+ 	STRUCTURE	reduce by rule 6
-+ 	FUNCTOR	reduce by rule 6
-+ 	SIGNATURE	reduce by rule 6
-+ 	SHARING	reduce by rule 6
-+ 	INSTRUCTION	reduce by rule 6
-+ 	VLIW	reduce by rule 6
-+ 	SUPERSCALAR	reduce by rule 6
-+ 	FUN	reduce by rule 6
-+ 	VAL	reduce by rule 6
-+ 	INCLUDE	reduce by rule 6
-+ 	OPEN	reduce by rule 6
-+ 	LITTLE	reduce by rule 6
-+ 	BIG	reduce by rule 6
-+ 	PIPELINE	reduce by rule 6
-+ 	LOWERCASE	reduce by rule 6
-+ 	UPPERCASE	reduce by rule 6
-+ 	VERBATIM	reduce by rule 6
-+ 	RTL	reduce by rule 6
-+ 	NONFIX	reduce by rule 6
-+ 	INFIX	reduce by rule 6
-+ 	INFIXR	reduce by rule 6
-+ 	DEBUG	reduce by rule 6
-+ 	RESOURCE	reduce by rule 6
-+ 	CPU	reduce by rule 6
-+ 	LATENCY	reduce by rule 6
-+ 	EXCEPTION	reduce by rule 6
-+ 	EOF	reduce by rule 6
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 168:
-+ 
-+ 	exceptionbinds : exceptionbind AND . exceptionbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 47
-+ 	exceptionbind	goto 46
-+ 	exceptionbinds	goto 258
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 169:
-+ 
-+ 	exceptionbind : id EQ . ident 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 259
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 170:
-+ 
-+ 	exceptionbind : id OF . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 264
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 171:
-+ 
-+ 	latencyclauses : latencyclause BAR . latencyclauses 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 55
-+ 	latencyclauses	goto 272
-+ 	latencyclause	goto 51
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 172:
-+ 
-+ 	latencybinds : latencybind AND . latencybinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 55
-+ 	latencybinds	goto 273
-+ 	latencybind	goto 53
-+ 	latencyclauses	goto 52
-+ 	latencyclause	goto 51
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 173:
-+ 
-+ 	latencyclause : id pat . EQ exp 
-+ 
-+ 	EQ	shift 274
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 174:
-+ 
-+ 	cpubinds : cpubind AND . cpubinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 58
-+ 	cpubinds	goto 275
-+ 	cpubind	goto 56
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 175:
-+ 
-+ 	cpubind : id aliases . int LBRACKET resources RBRACKET 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 276
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 176:
-+ 
-+ 	aliases : string . aliases 
-+ 
-+ 	INT	reduce by rule 33
-+ 	STRING	shift 91
-+ 
-+ 	string	goto 176
-+ 	aliases	goto 277
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 177:
-+ 
-+ 	resourcebinds : id AND . resourcebinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 60
-+ 	resourcebinds	goto 278
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 178:
-+ 
-+ 	mymldecl : INFIXR intopt syms .  (reduce by rule 78)
-+ 
-+ 	ARCHITECTURE	reduce by rule 78
-+ 	END	reduce by rule 78
-+ 	LOCAL	reduce by rule 78
-+ 	IN	reduce by rule 78
-+ 	DATATYPE	reduce by rule 78
-+ 	TYPE	reduce by rule 78
-+ 	RPAREN	reduce by rule 78
-+ 	SEMICOLON	reduce by rule 78
-+ 	STORAGE	reduce by rule 78
-+ 	LOCATIONS	reduce by rule 78
-+ 	STRUCTURE	reduce by rule 78
-+ 	FUNCTOR	reduce by rule 78
-+ 	SIGNATURE	reduce by rule 78
-+ 	SHARING	reduce by rule 78
-+ 	INSTRUCTION	reduce by rule 78
-+ 	VLIW	reduce by rule 78
-+ 	SUPERSCALAR	reduce by rule 78
-+ 	FUN	reduce by rule 78
-+ 	VAL	reduce by rule 78
-+ 	INCLUDE	reduce by rule 78
-+ 	OPEN	reduce by rule 78
-+ 	LITTLE	reduce by rule 78
-+ 	BIG	reduce by rule 78
-+ 	PIPELINE	reduce by rule 78
-+ 	LOWERCASE	reduce by rule 78
-+ 	UPPERCASE	reduce by rule 78
-+ 	VERBATIM	reduce by rule 78
-+ 	RTL	reduce by rule 78
-+ 	NONFIX	reduce by rule 78
-+ 	INFIX	reduce by rule 78
-+ 	INFIXR	reduce by rule 78
-+ 	DEBUG	reduce by rule 78
-+ 	RESOURCE	reduce by rule 78
-+ 	CPU	reduce by rule 78
-+ 	LATENCY	reduce by rule 78
-+ 	EXCEPTION	reduce by rule 78
-+ 	EOF	reduce by rule 78
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 179:
-+ 
-+ 	mymldecl : INFIX intopt syms .  (reduce by rule 77)
-+ 
-+ 	ARCHITECTURE	reduce by rule 77
-+ 	END	reduce by rule 77
-+ 	LOCAL	reduce by rule 77
-+ 	IN	reduce by rule 77
-+ 	DATATYPE	reduce by rule 77
-+ 	TYPE	reduce by rule 77
-+ 	RPAREN	reduce by rule 77
-+ 	SEMICOLON	reduce by rule 77
-+ 	STORAGE	reduce by rule 77
-+ 	LOCATIONS	reduce by rule 77
-+ 	STRUCTURE	reduce by rule 77
-+ 	FUNCTOR	reduce by rule 77
-+ 	SIGNATURE	reduce by rule 77
-+ 	SHARING	reduce by rule 77
-+ 	INSTRUCTION	reduce by rule 77
-+ 	VLIW	reduce by rule 77
-+ 	SUPERSCALAR	reduce by rule 77
-+ 	FUN	reduce by rule 77
-+ 	VAL	reduce by rule 77
-+ 	INCLUDE	reduce by rule 77
-+ 	OPEN	reduce by rule 77
-+ 	LITTLE	reduce by rule 77
-+ 	BIG	reduce by rule 77
-+ 	PIPELINE	reduce by rule 77
-+ 	LOWERCASE	reduce by rule 77
-+ 	UPPERCASE	reduce by rule 77
-+ 	VERBATIM	reduce by rule 77
-+ 	RTL	reduce by rule 77
-+ 	NONFIX	reduce by rule 77
-+ 	INFIX	reduce by rule 77
-+ 	INFIXR	reduce by rule 77
-+ 	DEBUG	reduce by rule 77
-+ 	RESOURCE	reduce by rule 77
-+ 	CPU	reduce by rule 77
-+ 	LATENCY	reduce by rule 77
-+ 	EXCEPTION	reduce by rule 77
-+ 	EOF	reduce by rule 77
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 180:
-+ 
-+ 	syms : sym syms .  (reduce by rule 110)
-+ 
-+ 	ARCHITECTURE	reduce by rule 110
-+ 	END	reduce by rule 110
-+ 	LOCAL	reduce by rule 110
-+ 	IN	reduce by rule 110
-+ 	DATATYPE	reduce by rule 110
-+ 	TYPE	reduce by rule 110
-+ 	RPAREN	reduce by rule 110
-+ 	SEMICOLON	reduce by rule 110
-+ 	STORAGE	reduce by rule 110
-+ 	LOCATIONS	reduce by rule 110
-+ 	COLON	reduce by rule 110
-+ 	STRUCTURE	reduce by rule 110
-+ 	FUNCTOR	reduce by rule 110
-+ 	SIGNATURE	reduce by rule 110
-+ 	SHARING	reduce by rule 110
-+ 	INSTRUCTION	reduce by rule 110
-+ 	VLIW	reduce by rule 110
-+ 	SUPERSCALAR	reduce by rule 110
-+ 	FUN	reduce by rule 110
-+ 	VAL	reduce by rule 110
-+ 	INCLUDE	reduce by rule 110
-+ 	OPEN	reduce by rule 110
-+ 	LITTLE	reduce by rule 110
-+ 	BIG	reduce by rule 110
-+ 	PIPELINE	reduce by rule 110
-+ 	LOWERCASE	reduce by rule 110
-+ 	UPPERCASE	reduce by rule 110
-+ 	VERBATIM	reduce by rule 110
-+ 	RTL	reduce by rule 110
-+ 	NONFIX	reduce by rule 110
-+ 	INFIX	reduce by rule 110
-+ 	INFIXR	reduce by rule 110
-+ 	DEBUG	reduce by rule 110
-+ 	RESOURCE	reduce by rule 110
-+ 	CPU	reduce by rule 110
-+ 	LATENCY	reduce by rule 110
-+ 	EXCEPTION	reduce by rule 110
-+ 	EOF	reduce by rule 110
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 181:
-+ 
-+ 	mymldecl : RTL asapat EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 281
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 182:
-+ 
-+ 	path : path DOT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 302
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 183:
-+ 
-+ 	mymldecl : RTL syms COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 303
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 184:
-+ 
-+ 	apat : sym CONCAT . LBRACKET pats RBRACKET 
-+ 	apat : sym CONCAT . LBRACKET pats RBRACKET CONCAT sym 
-+ 
-+ 	LBRACKET	shift 304
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 185:
-+ 
-+ 	asapat : id AS . asapat 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 307
-+ 	sym	goto 306
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 84
-+ 	asapat	goto 305
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 186:
-+ 
-+ 	path : id DOT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 308
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 187:
-+ 
-+ 	mymldecl : RTL id LBRACE . labpats0 RBRACE EQ exp 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	RBRACE	reduce by rule 326
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 191
-+ 	symb	goto 67
-+ 	labpat	goto 190
-+ 	labpats0	goto 309
-+ 	labpats	goto 188
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 188:
-+ 
-+ 	labpats0 : labpats .  (reduce by rule 327)
-+ 
-+ 	RBRACE	reduce by rule 327
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 189:
-+ 
-+ 	apat : LBRACE labpats0 . RBRACE 
-+ 
-+ 	RBRACE	shift 310
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 190:
-+ 
-+ 	labpats : labpat .  (reduce by rule 328)
-+ 	labpats : labpat . COMMA DOTDOT 
-+ 	labpats : labpat . COMMA labpats 
-+ 
-+ 	RBRACE	reduce by rule 328
-+ 	COMMA	shift 311
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 191:
-+ 
-+ 	labpat : sym .  (reduce by rule 331)
-+ 	labpat : sym . EQ typedpat 
-+ 	labpat : sym . AS typedpat 
-+ 	labpat : sym . WHERE typedexp 
-+ 	labpat : sym . WHERE typedexp IN typedpat 
-+ 
-+ 	EQ	shift 314
-+ 	RBRACE	reduce by rule 331
-+ 	COMMA	reduce by rule 331
-+ 	WHERE	shift 313
-+ 	AS	shift 312
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 192:
-+ 
-+ 	pats : pats1 .  (reduce by rule 322)
-+ 
-+ 	RBRACKET	reduce by rule 322
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 193:
-+ 
-+ 	apat : LBRACKET pats . RBRACKET 
-+ 	apat : LBRACKET pats . RBRACKET CONCAT sym 
-+ 
-+ 	RBRACKET	shift 315
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 194:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	pats1 : typedpat .  (reduce by rule 323)
-+ 	pats1 : typedpat . COMMA pats1 
-+ 
-+ 	RPAREN	reduce by rule 323
-+ 	RBRACKET	reduce by rule 323
-+ 	COMMA	shift 317
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 195:
-+ 
-+ 	typedpat : pat .  (reduce by rule 317)
-+ 
-+ 	AND	reduce by rule 317
-+ 	RPAREN	reduce by rule 317
-+ 	RBRACKET	reduce by rule 317
-+ 	RBRACE	reduce by rule 317
-+ 	COMMA	reduce by rule 317
-+ 	COLON	reduce by rule 317
-+ 	BAR	reduce by rule 317
-+ 	DARROW	reduce by rule 317
-+ 	WHERE	reduce by rule 317
-+ 	EXCEPTION	reduce by rule 317
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 196:
-+ 
-+ 	apat : LPAREN andpats2 . RPAREN 
-+ 
-+ 	RPAREN	shift 318
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 197:
-+ 
-+ 	apat : LPAREN orpats2 . RPAREN 
-+ 
-+ 	RPAREN	shift 319
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 198:
-+ 
-+ 	apat : LPAREN pats2 . RPAREN 
-+ 
-+ 	RPAREN	shift 320
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 199:
-+ 
-+ 	apat : LPAREN typedpat . RPAREN 
-+ 	apat : LPAREN typedpat . WHERE typedexp RPAREN 
-+ 	apat : LPAREN typedpat . WHERE typedexp IN typedpat RPAREN 
-+ 	typedpat : typedpat . COLON ty 
-+ 	pats2 : typedpat . COMMA pats1 
-+ 	orpats2 : typedpat . BAR typedpat 
-+ 	orpats2 : typedpat . BAR orpats2 
-+ 	andpats2 : typedpat . AND typedpat 
-+ 	andpats2 : typedpat . AND andpats2 
-+ 
-+ 	AND	shift 325
-+ 	RPAREN	shift 324
-+ 	COMMA	shift 323
-+ 	COLON	shift 316
-+ 	BAR	shift 322
-+ 	WHERE	shift 321
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 200:
-+ 
-+ 	apat : LPAREN RPAREN .  (reduce by rule 293)
-+ 
-+ 	EQ	reduce by rule 293
-+ 	TIMES	reduce by rule 293
-+ 	AND	reduce by rule 293
-+ 	DEREF	reduce by rule 293
-+ 	NOT	reduce by rule 293
-+ 	LHASHBRACKET	reduce by rule 293
-+ 	LPAREN	reduce by rule 293
-+ 	RPAREN	reduce by rule 293
-+ 	LBRACKET	reduce by rule 293
-+ 	RBRACKET	reduce by rule 293
-+ 	LBRACE	reduce by rule 293
-+ 	RBRACE	reduce by rule 293
-+ 	CELLSET	reduce by rule 293
-+ 	COMMA	reduce by rule 293
-+ 	COLON	reduce by rule 293
-+ 	BAR	reduce by rule 293
-+ 	DARROW	reduce by rule 293
-+ 	TRUE	reduce by rule 293
-+ 	FALSE	reduce by rule 293
-+ 	WILD	reduce by rule 293
-+ 	WHERE	reduce by rule 293
-+ 	OP	reduce by rule 293
-+ 	ALWAYS	reduce by rule 293
-+ 	NEVER	reduce by rule 293
-+ 	EXCEPTION	reduce by rule 293
-+ 	ID	reduce by rule 293
-+ 	SYMBOL	reduce by rule 293
-+ 	WORD	reduce by rule 293
-+ 	INT	reduce by rule 293
-+ 	INTINF	reduce by rule 293
-+ 	REAL	reduce by rule 293
-+ 	STRING	reduce by rule 293
-+ 	CHAR	reduce by rule 293
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 201:
-+ 
-+ 	apat : LHASHBRACKET pats . RBRACKET 
-+ 
-+ 	RBRACKET	shift 326
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 202:
-+ 
-+ 	pipelineclauses : pipelineclause BAR . pipelineclauses 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 108
-+ 	pipelineclauses	goto 327
-+ 	pipelineclause	goto 104
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 203:
-+ 
-+ 	pipelinebinds : pipelinebind AND . pipelinebinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 108
-+ 	pipelinebinds	goto 328
-+ 	pipelinebind	goto 106
-+ 	pipelineclauses	goto 105
-+ 	pipelineclause	goto 104
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 204:
-+ 
-+ 	pipelineclause : id pat . EQ LBRACKET cycles0 RBRACKET 
-+ 
-+ 	EQ	shift 329
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 205:
-+ 
-+ 	idents : ident idents .  (reduce by rule 112)
-+ 
-+ 	ARCHITECTURE	reduce by rule 112
-+ 	END	reduce by rule 112
-+ 	LOCAL	reduce by rule 112
-+ 	IN	reduce by rule 112
-+ 	DATATYPE	reduce by rule 112
-+ 	TYPE	reduce by rule 112
-+ 	RPAREN	reduce by rule 112
-+ 	SEMICOLON	reduce by rule 112
-+ 	STORAGE	reduce by rule 112
-+ 	LOCATIONS	reduce by rule 112
-+ 	STRUCTURE	reduce by rule 112
-+ 	FUNCTOR	reduce by rule 112
-+ 	SIGNATURE	reduce by rule 112
-+ 	SHARING	reduce by rule 112
-+ 	INSTRUCTION	reduce by rule 112
-+ 	VLIW	reduce by rule 112
-+ 	SUPERSCALAR	reduce by rule 112
-+ 	FUN	reduce by rule 112
-+ 	VAL	reduce by rule 112
-+ 	INCLUDE	reduce by rule 112
-+ 	OPEN	reduce by rule 112
-+ 	LITTLE	reduce by rule 112
-+ 	BIG	reduce by rule 112
-+ 	PIPELINE	reduce by rule 112
-+ 	LOWERCASE	reduce by rule 112
-+ 	UPPERCASE	reduce by rule 112
-+ 	VERBATIM	reduce by rule 112
-+ 	RTL	reduce by rule 112
-+ 	NONFIX	reduce by rule 112
-+ 	INFIX	reduce by rule 112
-+ 	INFIXR	reduce by rule 112
-+ 	DEBUG	reduce by rule 112
-+ 	RESOURCE	reduce by rule 112
-+ 	CPU	reduce by rule 112
-+ 	LATENCY	reduce by rule 112
-+ 	EXCEPTION	reduce by rule 112
-+ 	EOF	reduce by rule 112
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 206:
-+ 
-+ 	sigexp : sigexp WHERE . sigsubs 
-+ 
-+ 	TYPE	shift 333
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 332
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigsub	goto 331
-+ 	sigsubs	goto 330
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 207:
-+ 
-+ 	decl : INCLUDE string optsemi .  (reduce by rule 9)
-+ 
-+ 	ARCHITECTURE	reduce by rule 9
-+ 	END	reduce by rule 9
-+ 	LOCAL	reduce by rule 9
-+ 	IN	reduce by rule 9
-+ 	DATATYPE	reduce by rule 9
-+ 	TYPE	reduce by rule 9
-+ 	RPAREN	reduce by rule 9
-+ 	STORAGE	reduce by rule 9
-+ 	LOCATIONS	reduce by rule 9
-+ 	STRUCTURE	reduce by rule 9
-+ 	FUNCTOR	reduce by rule 9
-+ 	SIGNATURE	reduce by rule 9
-+ 	SHARING	reduce by rule 9
-+ 	INSTRUCTION	reduce by rule 9
-+ 	VLIW	reduce by rule 9
-+ 	SUPERSCALAR	reduce by rule 9
-+ 	FUN	reduce by rule 9
-+ 	VAL	reduce by rule 9
-+ 	INCLUDE	reduce by rule 9
-+ 	OPEN	reduce by rule 9
-+ 	LITTLE	reduce by rule 9
-+ 	BIG	reduce by rule 9
-+ 	PIPELINE	reduce by rule 9
-+ 	LOWERCASE	reduce by rule 9
-+ 	UPPERCASE	reduce by rule 9
-+ 	VERBATIM	reduce by rule 9
-+ 	RTL	reduce by rule 9
-+ 	NONFIX	reduce by rule 9
-+ 	INFIX	reduce by rule 9
-+ 	INFIXR	reduce by rule 9
-+ 	DEBUG	reduce by rule 9
-+ 	RESOURCE	reduce by rule 9
-+ 	CPU	reduce by rule 9
-+ 	LATENCY	reduce by rule 9
-+ 	EXCEPTION	reduce by rule 9
-+ 	EOF	reduce by rule 9
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 208:
-+ 
-+ 	sigexp : SIG decls . END 
-+ 
-+ 	END	shift 334
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 209:
-+ 
-+ 	valbinds : valbind AND . valbinds 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 121
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	valbind	goto 120
-+ 	valbinds	goto 335
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 210:
-+ 
-+ 	valbind : pat EQ . typedexp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 336
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 211:
-+ 
-+ 	apppat : apppat apat2 .  (reduce by rule 314)
-+ 
-+ 	EQ	reduce by rule 314
-+ 	TIMES	reduce by rule 314
-+ 	AND	reduce by rule 314
-+ 	DEREF	reduce by rule 314
-+ 	NOT	reduce by rule 314
-+ 	LHASHBRACKET	reduce by rule 314
-+ 	LPAREN	reduce by rule 314
-+ 	RPAREN	reduce by rule 314
-+ 	LBRACKET	reduce by rule 314
-+ 	RBRACKET	reduce by rule 314
-+ 	LBRACE	reduce by rule 314
-+ 	RBRACE	reduce by rule 314
-+ 	CELLSET	reduce by rule 314
-+ 	COMMA	reduce by rule 314
-+ 	COLON	reduce by rule 314
-+ 	BAR	reduce by rule 314
-+ 	DARROW	reduce by rule 314
-+ 	TRUE	reduce by rule 314
-+ 	FALSE	reduce by rule 314
-+ 	WILD	reduce by rule 314
-+ 	WHERE	reduce by rule 314
-+ 	OP	reduce by rule 314
-+ 	ALWAYS	reduce by rule 314
-+ 	NEVER	reduce by rule 314
-+ 	EXCEPTION	reduce by rule 314
-+ 	ID	reduce by rule 314
-+ 	SYMBOL	reduce by rule 314
-+ 	WORD	reduce by rule 314
-+ 	INT	reduce by rule 314
-+ 	INTINF	reduce by rule 314
-+ 	REAL	reduce by rule 314
-+ 	STRING	reduce by rule 314
-+ 	CHAR	reduce by rule 314
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 212:
-+ 
-+ 	mymldecl : VAL syms COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 338
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 213:
-+ 
-+ 	pat : id AS . pat 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 339
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 214:
-+ 
-+ 	apat2 : OP sym .  (reduce by rule 312)
-+ 
-+ 	EQ	reduce by rule 312
-+ 	TIMES	reduce by rule 312
-+ 	AND	reduce by rule 312
-+ 	DEREF	reduce by rule 312
-+ 	NOT	reduce by rule 312
-+ 	LHASHBRACKET	reduce by rule 312
-+ 	LPAREN	reduce by rule 312
-+ 	RPAREN	reduce by rule 312
-+ 	LBRACKET	reduce by rule 312
-+ 	RBRACKET	reduce by rule 312
-+ 	LBRACE	reduce by rule 312
-+ 	RBRACE	reduce by rule 312
-+ 	CELLSET	reduce by rule 312
-+ 	COMMA	reduce by rule 312
-+ 	COLON	reduce by rule 312
-+ 	BAR	reduce by rule 312
-+ 	DARROW	reduce by rule 312
-+ 	TRUE	reduce by rule 312
-+ 	FALSE	reduce by rule 312
-+ 	WILD	reduce by rule 312
-+ 	WHERE	reduce by rule 312
-+ 	OP	reduce by rule 312
-+ 	ALWAYS	reduce by rule 312
-+ 	NEVER	reduce by rule 312
-+ 	EXCEPTION	reduce by rule 312
-+ 	ID	reduce by rule 312
-+ 	SYMBOL	reduce by rule 312
-+ 	WORD	reduce by rule 312
-+ 	INT	reduce by rule 312
-+ 	INTINF	reduce by rule 312
-+ 	REAL	reduce by rule 312
-+ 	STRING	reduce by rule 312
-+ 	CHAR	reduce by rule 312
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 215:
-+ 
-+ 	funbinds : funbind AND . funbinds 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 133
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	funclause	goto 132
-+ 	funclauses	goto 131
-+ 	funbind	goto 130
-+ 	funbinds	goto 340
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 216:
-+ 
-+ 	funclauses : funclause BAR . funclauses 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 133
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	funclause	goto 132
-+ 	funclauses	goto 341
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 217:
-+ 
-+ 	funclause : apppat funguard . return_ty cont EQ typedexp 
-+ 
-+ 	EQ	reduce by rule 344
-+ 	COLON	shift 343
-+ 	EXCEPTION	reduce by rule 344
-+ 
-+ 	return_ty	goto 342
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 218:
-+ 
-+ 	funguard : WHERE . LPAREN typedexp RPAREN 
-+ 
-+ 	LPAREN	shift 344
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 219:
-+ 
-+ 	consbinds : consbind BAR . consbinds 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 138
-+ 	symb	goto 67
-+ 	consbinds	goto 345
-+ 	consbind	goto 136
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 220:
-+ 
-+ 	consbind : sym of_ty . consassembly consencoding rtl nop nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 182
-+ 	END	reduce by rule 182
-+ 	LOCAL	reduce by rule 182
-+ 	IN	reduce by rule 182
-+ 	DATATYPE	reduce by rule 182
-+ 	TYPE	reduce by rule 182
-+ 	AND	reduce by rule 182
-+ 	LPAREN	reduce by rule 182
-+ 	RPAREN	reduce by rule 182
-+ 	SEMICOLON	reduce by rule 182
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	reduce by rule 182
-+ 	STORAGE	reduce by rule 182
-+ 	LOCATIONS	reduce by rule 182
-+ 	BAR	reduce by rule 182
-+ 	STRUCTURE	reduce by rule 182
-+ 	FUNCTOR	reduce by rule 182
-+ 	SIGNATURE	reduce by rule 182
-+ 	SHARING	reduce by rule 182
-+ 	INSTRUCTION	reduce by rule 182
-+ 	VLIW	reduce by rule 182
-+ 	SUPERSCALAR	reduce by rule 182
-+ 	WITHTYPE	reduce by rule 182
-+ 	FUN	reduce by rule 182
-+ 	VAL	reduce by rule 182
-+ 	INCLUDE	reduce by rule 182
-+ 	OPEN	reduce by rule 182
-+ 	LITTLE	reduce by rule 182
-+ 	BIG	reduce by rule 182
-+ 	PIPELINE	reduce by rule 182
-+ 	LOWERCASE	reduce by rule 182
-+ 	UPPERCASE	reduce by rule 182
-+ 	VERBATIM	reduce by rule 182
-+ 	RTL	reduce by rule 182
-+ 	SPAN	reduce by rule 182
-+ 	DELAYSLOT	reduce by rule 182
-+ 	NONFIX	reduce by rule 182
-+ 	INFIX	reduce by rule 182
-+ 	INFIXR	reduce by rule 182
-+ 	DEBUG	reduce by rule 182
-+ 	ASM_COLON	shift 349
-+ 	MC_COLON	reduce by rule 182
-+ 	RTL_COLON	reduce by rule 182
-+ 	DELAYSLOT_COLON	reduce by rule 182
-+ 	NULLIFIED_COLON	reduce by rule 182
-+ 	PADDING_COLON	reduce by rule 182
-+ 	RESOURCE	reduce by rule 182
-+ 	CPU	reduce by rule 182
-+ 	LATENCY	reduce by rule 182
-+ 	EXCEPTION	reduce by rule 182
-+ 	ID	reduce by rule 182
-+ 	SYMBOL	reduce by rule 182
-+ 	WORD	reduce by rule 182
-+ 	INT	reduce by rule 182
-+ 	STRING	shift 91
-+ 	EOF	reduce by rule 182
-+ 
-+ 	string	goto 348
-+ 	consassembly	goto 347
-+ 	asm_strings	goto 346
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 221:
-+ 
-+ 	of_ty : OF . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 350
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 222:
-+ 
-+ 	mymddecl : INSTRUCTION FORMATS formatbinds .  (reduce by rule 19)
-+ 
-+ 	ARCHITECTURE	reduce by rule 19
-+ 	END	reduce by rule 19
-+ 	LOCAL	reduce by rule 19
-+ 	IN	reduce by rule 19
-+ 	DATATYPE	reduce by rule 19
-+ 	TYPE	reduce by rule 19
-+ 	RPAREN	reduce by rule 19
-+ 	SEMICOLON	reduce by rule 19
-+ 	STORAGE	reduce by rule 19
-+ 	LOCATIONS	reduce by rule 19
-+ 	STRUCTURE	reduce by rule 19
-+ 	FUNCTOR	reduce by rule 19
-+ 	SIGNATURE	reduce by rule 19
-+ 	SHARING	reduce by rule 19
-+ 	INSTRUCTION	reduce by rule 19
-+ 	VLIW	reduce by rule 19
-+ 	SUPERSCALAR	reduce by rule 19
-+ 	FUN	reduce by rule 19
-+ 	VAL	reduce by rule 19
-+ 	INCLUDE	reduce by rule 19
-+ 	OPEN	reduce by rule 19
-+ 	LITTLE	reduce by rule 19
-+ 	BIG	reduce by rule 19
-+ 	PIPELINE	reduce by rule 19
-+ 	LOWERCASE	reduce by rule 19
-+ 	UPPERCASE	reduce by rule 19
-+ 	VERBATIM	reduce by rule 19
-+ 	RTL	reduce by rule 19
-+ 	NONFIX	reduce by rule 19
-+ 	INFIX	reduce by rule 19
-+ 	INFIXR	reduce by rule 19
-+ 	DEBUG	reduce by rule 19
-+ 	RESOURCE	reduce by rule 19
-+ 	CPU	reduce by rule 19
-+ 	LATENCY	reduce by rule 19
-+ 	EXCEPTION	reduce by rule 19
-+ 	EOF	reduce by rule 19
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 223:
-+ 
-+ 	formatbinds : formatbind .  (reduce by rule 204)
-+ 	formatbinds : formatbind . BAR formatbinds 
-+ 
-+ 	ARCHITECTURE	reduce by rule 204
-+ 	END	reduce by rule 204
-+ 	LOCAL	reduce by rule 204
-+ 	IN	reduce by rule 204
-+ 	DATATYPE	reduce by rule 204
-+ 	TYPE	reduce by rule 204
-+ 	RPAREN	reduce by rule 204
-+ 	SEMICOLON	reduce by rule 204
-+ 	STORAGE	reduce by rule 204
-+ 	LOCATIONS	reduce by rule 204
-+ 	BAR	shift 351
-+ 	STRUCTURE	reduce by rule 204
-+ 	FUNCTOR	reduce by rule 204
-+ 	SIGNATURE	reduce by rule 204
-+ 	SHARING	reduce by rule 204
-+ 	INSTRUCTION	reduce by rule 204
-+ 	VLIW	reduce by rule 204
-+ 	SUPERSCALAR	reduce by rule 204
-+ 	FUN	reduce by rule 204
-+ 	VAL	reduce by rule 204
-+ 	INCLUDE	reduce by rule 204
-+ 	OPEN	reduce by rule 204
-+ 	LITTLE	reduce by rule 204
-+ 	BIG	reduce by rule 204
-+ 	PIPELINE	reduce by rule 204
-+ 	LOWERCASE	reduce by rule 204
-+ 	UPPERCASE	reduce by rule 204
-+ 	VERBATIM	reduce by rule 204
-+ 	RTL	reduce by rule 204
-+ 	NONFIX	reduce by rule 204
-+ 	INFIX	reduce by rule 204
-+ 	INFIXR	reduce by rule 204
-+ 	DEBUG	reduce by rule 204
-+ 	RESOURCE	reduce by rule 204
-+ 	CPU	reduce by rule 204
-+ 	LATENCY	reduce by rule 204
-+ 	EXCEPTION	reduce by rule 204
-+ 	EOF	reduce by rule 204
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 224:
-+ 
-+ 	mymddecl : INSTRUCTION FORMATS int . BITS formatbinds 
-+ 
-+ 	BITS	shift 352
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 225:
-+ 
-+ 	formatbind : id . opt_of LBRACE fields RBRACE opt_exp 
-+ 
-+ 	OF	shift 354
-+ 	LBRACE	reduce by rule 192
-+ 
-+ 	opt_of	goto 353
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 226:
-+ 
-+ 	sharingdecls : sharingdecl AND . sharingdecls 
-+ 
-+ 	TYPE	shift 144
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 143
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sharingdecl	goto 142
-+ 	sharingdecls	goto 355
-+ 	sharelist	goto 140
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 227:
-+ 
-+ 	sharelist : ident EQ . ident 
-+ 	sharelist : ident EQ . sharelist 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 357
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sharelist	goto 356
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 228:
-+ 
-+ 	sharingdecl : TYPE sharelist .  (reduce by rule 101)
-+ 
-+ 	ARCHITECTURE	reduce by rule 101
-+ 	END	reduce by rule 101
-+ 	LOCAL	reduce by rule 101
-+ 	IN	reduce by rule 101
-+ 	DATATYPE	reduce by rule 101
-+ 	TYPE	reduce by rule 101
-+ 	AND	reduce by rule 101
-+ 	RPAREN	reduce by rule 101
-+ 	SEMICOLON	reduce by rule 101
-+ 	STORAGE	reduce by rule 101
-+ 	LOCATIONS	reduce by rule 101
-+ 	STRUCTURE	reduce by rule 101
-+ 	FUNCTOR	reduce by rule 101
-+ 	SIGNATURE	reduce by rule 101
-+ 	SHARING	reduce by rule 101
-+ 	INSTRUCTION	reduce by rule 101
-+ 	VLIW	reduce by rule 101
-+ 	SUPERSCALAR	reduce by rule 101
-+ 	FUN	reduce by rule 101
-+ 	VAL	reduce by rule 101
-+ 	INCLUDE	reduce by rule 101
-+ 	OPEN	reduce by rule 101
-+ 	LITTLE	reduce by rule 101
-+ 	BIG	reduce by rule 101
-+ 	PIPELINE	reduce by rule 101
-+ 	LOWERCASE	reduce by rule 101
-+ 	UPPERCASE	reduce by rule 101
-+ 	VERBATIM	reduce by rule 101
-+ 	RTL	reduce by rule 101
-+ 	NONFIX	reduce by rule 101
-+ 	INFIX	reduce by rule 101
-+ 	INFIXR	reduce by rule 101
-+ 	DEBUG	reduce by rule 101
-+ 	RESOURCE	reduce by rule 101
-+ 	CPU	reduce by rule 101
-+ 	LATENCY	reduce by rule 101
-+ 	EXCEPTION	reduce by rule 101
-+ 	EOF	reduce by rule 101
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 229:
-+ 
-+ 	mymldecl : SIGNATURE id EQ . sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	SIG	shift 118
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 117
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigexp	goto 358
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 230:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN . functorarg RPAREN EQ structexp 
-+ 	mymldecl : FUNCTOR id LPAREN . functorarg RPAREN sigcon EQ structexp 
-+ 
-+ 	ARCHITECTURE	reduce by rule 107
-+ 	LOCAL	reduce by rule 107
-+ 	DATATYPE	reduce by rule 107
-+ 	TYPE	reduce by rule 107
-+ 	RPAREN	reduce by rule 107
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 107
-+ 	LOCATIONS	reduce by rule 107
-+ 	STRUCTURE	reduce by rule 107
-+ 	FUNCTOR	reduce by rule 107
-+ 	SIGNATURE	reduce by rule 107
-+ 	SHARING	reduce by rule 107
-+ 	INSTRUCTION	reduce by rule 107
-+ 	VLIW	reduce by rule 107
-+ 	SUPERSCALAR	reduce by rule 107
-+ 	FUN	reduce by rule 107
-+ 	VAL	reduce by rule 107
-+ 	INCLUDE	reduce by rule 107
-+ 	OPEN	reduce by rule 107
-+ 	LITTLE	reduce by rule 107
-+ 	BIG	reduce by rule 107
-+ 	PIPELINE	reduce by rule 107
-+ 	LOWERCASE	reduce by rule 107
-+ 	UPPERCASE	reduce by rule 107
-+ 	VERBATIM	reduce by rule 107
-+ 	RTL	reduce by rule 107
-+ 	NONFIX	reduce by rule 107
-+ 	INFIX	reduce by rule 107
-+ 	INFIXR	reduce by rule 107
-+ 	DEBUG	reduce by rule 107
-+ 	RESOURCE	reduce by rule 107
-+ 	CPU	reduce by rule 107
-+ 	LATENCY	reduce by rule 107
-+ 	EXCEPTION	reduce by rule 107
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 361
-+ 	scopeddecls	goto 360
-+ 	functorarg	goto 359
-+ 	newScope	goto 164
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 231:
-+ 
-+ 	mymldecl : FUNCTOR id EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 363
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 232:
-+ 
-+ 	mymldecl : STRUCTURE id sigcon . EQ structexp 
-+ 
-+ 	EQ	shift 365
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 233:
-+ 
-+ 	sigcon : COLONGREATER . sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	SIG	shift 118
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 117
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigexp	goto 366
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 234:
-+ 
-+ 	sigcon : COLON . sigexp 
-+ 	mymldecl : STRUCTURE id COLON . sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	SIG	shift 118
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 117
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigexp	goto 367
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 235:
-+ 
-+ 	mymldecl : STRUCTURE id EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 368
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 236:
-+ 
-+ 	locbinds : locbind AND . locbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 150
-+ 	locbind	goto 149
-+ 	locbinds	goto 369
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 237:
-+ 
-+ 	locbind : id pat . EQ exp 
-+ 
-+ 	EQ	shift 370
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 238:
-+ 
-+ 	locbind : id EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 371
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 239:
-+ 
-+ 	storagedecls : storagedecl BAR . storagedecls 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 153
-+ 	storagedecl	goto 152
-+ 	storagedecls	goto 372
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 240:
-+ 
-+ 	storagedecl : id EQ . DOLLAR id LBRACKET cellcount RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	DOLLAR	shift 373
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 241:
-+ 
-+ 	tid : tid2 .  (reduce by rule 361)
-+ 
-+ 	ARCHITECTURE	reduce by rule 361
-+ 	END	reduce by rule 361
-+ 	LOCAL	reduce by rule 361
-+ 	IN	reduce by rule 361
-+ 	OF	reduce by rule 361
-+ 	DATATYPE	reduce by rule 361
-+ 	TYPE	reduce by rule 361
-+ 	EQ	reduce by rule 361
-+ 	TIMES	reduce by rule 361
-+ 	AND	reduce by rule 361
-+ 	LPAREN	reduce by rule 361
-+ 	RPAREN	reduce by rule 361
-+ 	RBRACKET	reduce by rule 361
-+ 	RBRACE	reduce by rule 361
-+ 	SEMICOLON	reduce by rule 361
-+ 	LDQUOTE	reduce by rule 361
-+ 	CELLSET	reduce by rule 361
-+ 	STORAGE	reduce by rule 361
-+ 	LOCATIONS	reduce by rule 361
-+ 	COMMA	reduce by rule 361
-+ 	COLON	reduce by rule 361
-+ 	DOT	reduce by rule 361
-+ 	BAR	reduce by rule 361
-+ 	ARROW	reduce by rule 361
-+ 	DARROW	reduce by rule 361
-+ 	BITS	reduce by rule 361
-+ 	THEN	reduce by rule 361
-+ 	ELSE	reduce by rule 361
-+ 	STRUCTURE	reduce by rule 361
-+ 	FUNCTOR	reduce by rule 361
-+ 	SIGNATURE	reduce by rule 361
-+ 	WHERE	reduce by rule 361
-+ 	SHARING	reduce by rule 361
-+ 	INSTRUCTION	reduce by rule 361
-+ 	CELL	reduce by rule 361
-+ 	VLIW	reduce by rule 361
-+ 	SUPERSCALAR	reduce by rule 361
-+ 	WITHTYPE	reduce by rule 361
-+ 	FUN	reduce by rule 361
-+ 	VAL	reduce by rule 361
-+ 	INCLUDE	reduce by rule 361
-+ 	OPEN	reduce by rule 361
-+ 	LITTLE	reduce by rule 361
-+ 	BIG	reduce by rule 361
-+ 	PIPELINE	reduce by rule 361
-+ 	LOWERCASE	reduce by rule 361
-+ 	UPPERCASE	reduce by rule 361
-+ 	VERBATIM	reduce by rule 361
-+ 	RTL	reduce by rule 361
-+ 	SPAN	reduce by rule 361
-+ 	DELAYSLOT	reduce by rule 361
-+ 	NONFIX	reduce by rule 361
-+ 	INFIX	reduce by rule 361
-+ 	INFIXR	reduce by rule 361
-+ 	DEBUG	reduce by rule 361
-+ 	ASM_COLON	reduce by rule 361
-+ 	MC_COLON	reduce by rule 361
-+ 	RTL_COLON	reduce by rule 361
-+ 	DELAYSLOT_COLON	reduce by rule 361
-+ 	NULLIFIED_COLON	reduce by rule 361
-+ 	PADDING_COLON	reduce by rule 361
-+ 	RESOURCE	reduce by rule 361
-+ 	CPU	reduce by rule 361
-+ 	LATENCY	reduce by rule 361
-+ 	EXCEPTION	reduce by rule 361
-+ 	ID	reduce by rule 361
-+ 	SYMBOL	reduce by rule 361
-+ 	WORD	reduce by rule 361
-+ 	INT	reduce by rule 361
-+ 	STRING	reduce by rule 361
-+ 	EOF	reduce by rule 361
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 242:
-+ 
-+ 	mymldecl : TYPE tyvarseq tid .  (reduce by rule 67)
-+ 	typebind : tyvarseq tid . EQ ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 67
-+ 	END	reduce by rule 67
-+ 	LOCAL	reduce by rule 67
-+ 	IN	reduce by rule 67
-+ 	DATATYPE	reduce by rule 67
-+ 	TYPE	reduce by rule 67
-+ 	EQ	shift 374
-+ 	RPAREN	reduce by rule 67
-+ 	SEMICOLON	reduce by rule 67
-+ 	STORAGE	reduce by rule 67
-+ 	LOCATIONS	reduce by rule 67
-+ 	STRUCTURE	reduce by rule 67
-+ 	FUNCTOR	reduce by rule 67
-+ 	SIGNATURE	reduce by rule 67
-+ 	SHARING	reduce by rule 67
-+ 	INSTRUCTION	reduce by rule 67
-+ 	VLIW	reduce by rule 67
-+ 	SUPERSCALAR	reduce by rule 67
-+ 	FUN	reduce by rule 67
-+ 	VAL	reduce by rule 67
-+ 	INCLUDE	reduce by rule 67
-+ 	OPEN	reduce by rule 67
-+ 	LITTLE	reduce by rule 67
-+ 	BIG	reduce by rule 67
-+ 	PIPELINE	reduce by rule 67
-+ 	LOWERCASE	reduce by rule 67
-+ 	UPPERCASE	reduce by rule 67
-+ 	VERBATIM	reduce by rule 67
-+ 	RTL	reduce by rule 67
-+ 	NONFIX	reduce by rule 67
-+ 	INFIX	reduce by rule 67
-+ 	INFIXR	reduce by rule 67
-+ 	DEBUG	reduce by rule 67
-+ 	RESOURCE	reduce by rule 67
-+ 	CPU	reduce by rule 67
-+ 	LATENCY	reduce by rule 67
-+ 	EXCEPTION	reduce by rule 67
-+ 	EOF	reduce by rule 67
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 243:
-+ 
-+ 	tid : id .  (reduce by rule 360)
-+ 
-+ 	ARCHITECTURE	reduce by rule 360
-+ 	END	reduce by rule 360
-+ 	LOCAL	reduce by rule 360
-+ 	IN	reduce by rule 360
-+ 	OF	reduce by rule 360
-+ 	DATATYPE	reduce by rule 360
-+ 	TYPE	reduce by rule 360
-+ 	EQ	reduce by rule 360
-+ 	TIMES	reduce by rule 360
-+ 	AND	reduce by rule 360
-+ 	LPAREN	reduce by rule 360
-+ 	RPAREN	reduce by rule 360
-+ 	RBRACKET	reduce by rule 360
-+ 	RBRACE	reduce by rule 360
-+ 	SEMICOLON	reduce by rule 360
-+ 	LDQUOTE	reduce by rule 360
-+ 	CELLSET	reduce by rule 360
-+ 	STORAGE	reduce by rule 360
-+ 	LOCATIONS	reduce by rule 360
-+ 	COMMA	reduce by rule 360
-+ 	COLON	reduce by rule 360
-+ 	DOT	reduce by rule 360
-+ 	BAR	reduce by rule 360
-+ 	ARROW	reduce by rule 360
-+ 	DARROW	reduce by rule 360
-+ 	BITS	reduce by rule 360
-+ 	THEN	reduce by rule 360
-+ 	ELSE	reduce by rule 360
-+ 	STRUCTURE	reduce by rule 360
-+ 	FUNCTOR	reduce by rule 360
-+ 	SIGNATURE	reduce by rule 360
-+ 	WHERE	reduce by rule 360
-+ 	SHARING	reduce by rule 360
-+ 	INSTRUCTION	reduce by rule 360
-+ 	CELL	reduce by rule 360
-+ 	VLIW	reduce by rule 360
-+ 	SUPERSCALAR	reduce by rule 360
-+ 	WITHTYPE	reduce by rule 360
-+ 	FUN	reduce by rule 360
-+ 	VAL	reduce by rule 360
-+ 	INCLUDE	reduce by rule 360
-+ 	OPEN	reduce by rule 360
-+ 	LITTLE	reduce by rule 360
-+ 	BIG	reduce by rule 360
-+ 	PIPELINE	reduce by rule 360
-+ 	LOWERCASE	reduce by rule 360
-+ 	UPPERCASE	reduce by rule 360
-+ 	VERBATIM	reduce by rule 360
-+ 	RTL	reduce by rule 360
-+ 	SPAN	reduce by rule 360
-+ 	DELAYSLOT	reduce by rule 360
-+ 	NONFIX	reduce by rule 360
-+ 	INFIX	reduce by rule 360
-+ 	INFIXR	reduce by rule 360
-+ 	DEBUG	reduce by rule 360
-+ 	ASM_COLON	reduce by rule 360
-+ 	MC_COLON	reduce by rule 360
-+ 	RTL_COLON	reduce by rule 360
-+ 	DELAYSLOT_COLON	reduce by rule 360
-+ 	NULLIFIED_COLON	reduce by rule 360
-+ 	PADDING_COLON	reduce by rule 360
-+ 	RESOURCE	reduce by rule 360
-+ 	CPU	reduce by rule 360
-+ 	LATENCY	reduce by rule 360
-+ 	EXCEPTION	reduce by rule 360
-+ 	ID	reduce by rule 360
-+ 	SYMBOL	reduce by rule 360
-+ 	WORD	reduce by rule 360
-+ 	INT	reduce by rule 360
-+ 	STRING	reduce by rule 360
-+ 	EOF	reduce by rule 360
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 244:
-+ 
-+ 	tid2 : CELL .  (reduce by rule 363)
-+ 
-+ 	ARCHITECTURE	reduce by rule 363
-+ 	END	reduce by rule 363
-+ 	LOCAL	reduce by rule 363
-+ 	IN	reduce by rule 363
-+ 	OF	reduce by rule 363
-+ 	DATATYPE	reduce by rule 363
-+ 	TYPE	reduce by rule 363
-+ 	EQ	reduce by rule 363
-+ 	TIMES	reduce by rule 363
-+ 	AND	reduce by rule 363
-+ 	LPAREN	reduce by rule 363
-+ 	RPAREN	reduce by rule 363
-+ 	RBRACKET	reduce by rule 363
-+ 	RBRACE	reduce by rule 363
-+ 	SEMICOLON	reduce by rule 363
-+ 	LDQUOTE	reduce by rule 363
-+ 	CELLSET	reduce by rule 363
-+ 	STORAGE	reduce by rule 363
-+ 	LOCATIONS	reduce by rule 363
-+ 	COMMA	reduce by rule 363
-+ 	COLON	reduce by rule 363
-+ 	DOT	reduce by rule 363
-+ 	BAR	reduce by rule 363
-+ 	ARROW	reduce by rule 363
-+ 	DARROW	reduce by rule 363
-+ 	BITS	reduce by rule 363
-+ 	THEN	reduce by rule 363
-+ 	ELSE	reduce by rule 363
-+ 	STRUCTURE	reduce by rule 363
-+ 	FUNCTOR	reduce by rule 363
-+ 	SIGNATURE	reduce by rule 363
-+ 	WHERE	reduce by rule 363
-+ 	SHARING	reduce by rule 363
-+ 	INSTRUCTION	reduce by rule 363
-+ 	CELL	reduce by rule 363
-+ 	VLIW	reduce by rule 363
-+ 	SUPERSCALAR	reduce by rule 363
-+ 	WITHTYPE	reduce by rule 363
-+ 	FUN	reduce by rule 363
-+ 	VAL	reduce by rule 363
-+ 	INCLUDE	reduce by rule 363
-+ 	OPEN	reduce by rule 363
-+ 	LITTLE	reduce by rule 363
-+ 	BIG	reduce by rule 363
-+ 	PIPELINE	reduce by rule 363
-+ 	LOWERCASE	reduce by rule 363
-+ 	UPPERCASE	reduce by rule 363
-+ 	VERBATIM	reduce by rule 363
-+ 	RTL	reduce by rule 363
-+ 	SPAN	reduce by rule 363
-+ 	DELAYSLOT	reduce by rule 363
-+ 	NONFIX	reduce by rule 363
-+ 	INFIX	reduce by rule 363
-+ 	INFIXR	reduce by rule 363
-+ 	DEBUG	reduce by rule 363
-+ 	ASM_COLON	reduce by rule 363
-+ 	MC_COLON	reduce by rule 363
-+ 	RTL_COLON	reduce by rule 363
-+ 	DELAYSLOT_COLON	reduce by rule 363
-+ 	NULLIFIED_COLON	reduce by rule 363
-+ 	PADDING_COLON	reduce by rule 363
-+ 	RESOURCE	reduce by rule 363
-+ 	CPU	reduce by rule 363
-+ 	LATENCY	reduce by rule 363
-+ 	EXCEPTION	reduce by rule 363
-+ 	ID	reduce by rule 363
-+ 	SYMBOL	reduce by rule 363
-+ 	WORD	reduce by rule 363
-+ 	INT	reduce by rule 363
-+ 	STRING	reduce by rule 363
-+ 	EOF	reduce by rule 363
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 245:
-+ 
-+ 	tid2 : INSTRUCTION .  (reduce by rule 364)
-+ 
-+ 	ARCHITECTURE	reduce by rule 364
-+ 	END	reduce by rule 364
-+ 	LOCAL	reduce by rule 364
-+ 	IN	reduce by rule 364
-+ 	OF	reduce by rule 364
-+ 	DATATYPE	reduce by rule 364
-+ 	TYPE	reduce by rule 364
-+ 	EQ	reduce by rule 364
-+ 	TIMES	reduce by rule 364
-+ 	AND	reduce by rule 364
-+ 	LPAREN	reduce by rule 364
-+ 	RPAREN	reduce by rule 364
-+ 	RBRACKET	reduce by rule 364
-+ 	RBRACE	reduce by rule 364
-+ 	SEMICOLON	reduce by rule 364
-+ 	LDQUOTE	reduce by rule 364
-+ 	CELLSET	reduce by rule 364
-+ 	STORAGE	reduce by rule 364
-+ 	LOCATIONS	reduce by rule 364
-+ 	COMMA	reduce by rule 364
-+ 	COLON	reduce by rule 364
-+ 	DOT	reduce by rule 364
-+ 	BAR	reduce by rule 364
-+ 	ARROW	reduce by rule 364
-+ 	DARROW	reduce by rule 364
-+ 	BITS	reduce by rule 364
-+ 	THEN	reduce by rule 364
-+ 	ELSE	reduce by rule 364
-+ 	STRUCTURE	reduce by rule 364
-+ 	FUNCTOR	reduce by rule 364
-+ 	SIGNATURE	reduce by rule 364
-+ 	WHERE	reduce by rule 364
-+ 	SHARING	reduce by rule 364
-+ 	INSTRUCTION	reduce by rule 364
-+ 	CELL	reduce by rule 364
-+ 	VLIW	reduce by rule 364
-+ 	SUPERSCALAR	reduce by rule 364
-+ 	WITHTYPE	reduce by rule 364
-+ 	FUN	reduce by rule 364
-+ 	VAL	reduce by rule 364
-+ 	INCLUDE	reduce by rule 364
-+ 	OPEN	reduce by rule 364
-+ 	LITTLE	reduce by rule 364
-+ 	BIG	reduce by rule 364
-+ 	PIPELINE	reduce by rule 364
-+ 	LOWERCASE	reduce by rule 364
-+ 	UPPERCASE	reduce by rule 364
-+ 	VERBATIM	reduce by rule 364
-+ 	RTL	reduce by rule 364
-+ 	SPAN	reduce by rule 364
-+ 	DELAYSLOT	reduce by rule 364
-+ 	NONFIX	reduce by rule 364
-+ 	INFIX	reduce by rule 364
-+ 	INFIXR	reduce by rule 364
-+ 	DEBUG	reduce by rule 364
-+ 	ASM_COLON	reduce by rule 364
-+ 	MC_COLON	reduce by rule 364
-+ 	RTL_COLON	reduce by rule 364
-+ 	DELAYSLOT_COLON	reduce by rule 364
-+ 	NULLIFIED_COLON	reduce by rule 364
-+ 	PADDING_COLON	reduce by rule 364
-+ 	RESOURCE	reduce by rule 364
-+ 	CPU	reduce by rule 364
-+ 	LATENCY	reduce by rule 364
-+ 	EXCEPTION	reduce by rule 364
-+ 	ID	reduce by rule 364
-+ 	SYMBOL	reduce by rule 364
-+ 	WORD	reduce by rule 364
-+ 	INT	reduce by rule 364
-+ 	STRING	reduce by rule 364
-+ 	EOF	reduce by rule 364
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 246:
-+ 
-+ 	tid2 : BITS .  (reduce by rule 362)
-+ 
-+ 	ARCHITECTURE	reduce by rule 362
-+ 	END	reduce by rule 362
-+ 	LOCAL	reduce by rule 362
-+ 	IN	reduce by rule 362
-+ 	OF	reduce by rule 362
-+ 	DATATYPE	reduce by rule 362
-+ 	TYPE	reduce by rule 362
-+ 	EQ	reduce by rule 362
-+ 	TIMES	reduce by rule 362
-+ 	AND	reduce by rule 362
-+ 	LPAREN	reduce by rule 362
-+ 	RPAREN	reduce by rule 362
-+ 	RBRACKET	reduce by rule 362
-+ 	RBRACE	reduce by rule 362
-+ 	SEMICOLON	reduce by rule 362
-+ 	LDQUOTE	reduce by rule 362
-+ 	CELLSET	reduce by rule 362
-+ 	STORAGE	reduce by rule 362
-+ 	LOCATIONS	reduce by rule 362
-+ 	COMMA	reduce by rule 362
-+ 	COLON	reduce by rule 362
-+ 	DOT	reduce by rule 362
-+ 	BAR	reduce by rule 362
-+ 	ARROW	reduce by rule 362
-+ 	DARROW	reduce by rule 362
-+ 	BITS	reduce by rule 362
-+ 	THEN	reduce by rule 362
-+ 	ELSE	reduce by rule 362
-+ 	STRUCTURE	reduce by rule 362
-+ 	FUNCTOR	reduce by rule 362
-+ 	SIGNATURE	reduce by rule 362
-+ 	WHERE	reduce by rule 362
-+ 	SHARING	reduce by rule 362
-+ 	INSTRUCTION	reduce by rule 362
-+ 	CELL	reduce by rule 362
-+ 	VLIW	reduce by rule 362
-+ 	SUPERSCALAR	reduce by rule 362
-+ 	WITHTYPE	reduce by rule 362
-+ 	FUN	reduce by rule 362
-+ 	VAL	reduce by rule 362
-+ 	INCLUDE	reduce by rule 362
-+ 	OPEN	reduce by rule 362
-+ 	LITTLE	reduce by rule 362
-+ 	BIG	reduce by rule 362
-+ 	PIPELINE	reduce by rule 362
-+ 	LOWERCASE	reduce by rule 362
-+ 	UPPERCASE	reduce by rule 362
-+ 	VERBATIM	reduce by rule 362
-+ 	RTL	reduce by rule 362
-+ 	SPAN	reduce by rule 362
-+ 	DELAYSLOT	reduce by rule 362
-+ 	NONFIX	reduce by rule 362
-+ 	INFIX	reduce by rule 362
-+ 	INFIXR	reduce by rule 362
-+ 	DEBUG	reduce by rule 362
-+ 	ASM_COLON	reduce by rule 362
-+ 	MC_COLON	reduce by rule 362
-+ 	RTL_COLON	reduce by rule 362
-+ 	DELAYSLOT_COLON	reduce by rule 362
-+ 	NULLIFIED_COLON	reduce by rule 362
-+ 	PADDING_COLON	reduce by rule 362
-+ 	RESOURCE	reduce by rule 362
-+ 	CPU	reduce by rule 362
-+ 	LATENCY	reduce by rule 362
-+ 	EXCEPTION	reduce by rule 362
-+ 	ID	reduce by rule 362
-+ 	SYMBOL	reduce by rule 362
-+ 	WORD	reduce by rule 362
-+ 	INT	reduce by rule 362
-+ 	STRING	reduce by rule 362
-+ 	EOF	reduce by rule 362
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 247:
-+ 
-+ 	typebinds : typebind AND . typebinds 
-+ 
-+ 	LPAREN	shift 160
-+ 	CELLSET	reduce by rule 199
-+ 	HASH	shift 159
-+ 	BITS	reduce by rule 199
-+ 	INSTRUCTION	reduce by rule 199
-+ 	CELL	reduce by rule 199
-+ 	ID	reduce by rule 199
-+ 	SYMBOL	reduce by rule 199
-+ 	TYVAR	shift 158
-+ 
-+ 	typebinds	goto 376
-+ 	typebind	goto 156
-+ 	tyvar	goto 155
-+ 	tyvarseq	goto 375
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 248:
-+ 
-+ 	tyvar : HASH id .  (reduce by rule 427)
-+ 
-+ 	ARCHITECTURE	reduce by rule 427
-+ 	END	reduce by rule 427
-+ 	LOCAL	reduce by rule 427
-+ 	IN	reduce by rule 427
-+ 	OF	reduce by rule 427
-+ 	DATATYPE	reduce by rule 427
-+ 	TYPE	reduce by rule 427
-+ 	EQ	reduce by rule 427
-+ 	TIMES	reduce by rule 427
-+ 	AND	reduce by rule 427
-+ 	LPAREN	reduce by rule 427
-+ 	RPAREN	reduce by rule 427
-+ 	RBRACKET	reduce by rule 427
-+ 	RBRACE	reduce by rule 427
-+ 	SEMICOLON	reduce by rule 427
-+ 	LDQUOTE	reduce by rule 427
-+ 	CELLSET	reduce by rule 427
-+ 	STORAGE	reduce by rule 427
-+ 	LOCATIONS	reduce by rule 427
-+ 	COMMA	reduce by rule 427
-+ 	COLON	reduce by rule 427
-+ 	BAR	reduce by rule 427
-+ 	ARROW	reduce by rule 427
-+ 	DARROW	reduce by rule 427
-+ 	BITS	reduce by rule 427
-+ 	THEN	reduce by rule 427
-+ 	ELSE	reduce by rule 427
-+ 	STRUCTURE	reduce by rule 427
-+ 	FUNCTOR	reduce by rule 427
-+ 	SIGNATURE	reduce by rule 427
-+ 	WHERE	reduce by rule 427
-+ 	SHARING	reduce by rule 427
-+ 	INSTRUCTION	reduce by rule 427
-+ 	CELL	reduce by rule 427
-+ 	VLIW	reduce by rule 427
-+ 	SUPERSCALAR	reduce by rule 427
-+ 	WITHTYPE	reduce by rule 427
-+ 	FUN	reduce by rule 427
-+ 	VAL	reduce by rule 427
-+ 	INCLUDE	reduce by rule 427
-+ 	OPEN	reduce by rule 427
-+ 	LITTLE	reduce by rule 427
-+ 	BIG	reduce by rule 427
-+ 	PIPELINE	reduce by rule 427
-+ 	LOWERCASE	reduce by rule 427
-+ 	UPPERCASE	reduce by rule 427
-+ 	VERBATIM	reduce by rule 427
-+ 	RTL	reduce by rule 427
-+ 	SPAN	reduce by rule 427
-+ 	DELAYSLOT	reduce by rule 427
-+ 	NONFIX	reduce by rule 427
-+ 	INFIX	reduce by rule 427
-+ 	INFIXR	reduce by rule 427
-+ 	DEBUG	reduce by rule 427
-+ 	ASM_COLON	reduce by rule 427
-+ 	MC_COLON	reduce by rule 427
-+ 	RTL_COLON	reduce by rule 427
-+ 	DELAYSLOT_COLON	reduce by rule 427
-+ 	NULLIFIED_COLON	reduce by rule 427
-+ 	PADDING_COLON	reduce by rule 427
-+ 	RESOURCE	reduce by rule 427
-+ 	CPU	reduce by rule 427
-+ 	LATENCY	reduce by rule 427
-+ 	EXCEPTION	reduce by rule 427
-+ 	ID	reduce by rule 427
-+ 	SYMBOL	reduce by rule 427
-+ 	WORD	reduce by rule 427
-+ 	INT	reduce by rule 427
-+ 	STRING	reduce by rule 427
-+ 	EOF	reduce by rule 427
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 249:
-+ 
-+ 	tyvarseq : LPAREN tyvars . RPAREN 
-+ 
-+ 	RPAREN	shift 377
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 250:
-+ 
-+ 	tyvars : tyvar .  (reduce by rule 202)
-+ 	tyvars : tyvar . COMMA tyvars 
-+ 
-+ 	RPAREN	reduce by rule 202
-+ 	COMMA	shift 378
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 251:
-+ 
-+ 	datatypebind : tyvarseq id . opcodeencoding fieldty hasasm EQ consbinds 
-+ 	datatypebind : tyvarseq id . opcodeencoding fieldty hasasm EQ DATATYPE ty 
-+ 
-+ 	EQ	reduce by rule 135
-+ 	DEREF	reduce by rule 135
-+ 	LBRACKET	shift 380
-+ 	COLON	reduce by rule 135
-+ 
-+ 	opcodeencoding	goto 379
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 252:
-+ 
-+ 	datatypebinds : datatypebind AND . datatypebinds 
-+ 
-+ 	LPAREN	shift 160
-+ 	CELLSET	reduce by rule 199
-+ 	HASH	shift 159
-+ 	ID	reduce by rule 199
-+ 	SYMBOL	reduce by rule 199
-+ 	TYVAR	shift 158
-+ 
-+ 	datatypebinds	goto 381
-+ 	datatypebind	goto 162
-+ 	tyvar	goto 155
-+ 	tyvarseq	goto 161
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 253:
-+ 
-+ 	mymldecl : DATATYPE datatypebinds withtypeclause .  (reduce by rule 59)
-+ 
-+ 	ARCHITECTURE	reduce by rule 59
-+ 	END	reduce by rule 59
-+ 	LOCAL	reduce by rule 59
-+ 	IN	reduce by rule 59
-+ 	DATATYPE	reduce by rule 59
-+ 	TYPE	reduce by rule 59
-+ 	RPAREN	reduce by rule 59
-+ 	SEMICOLON	reduce by rule 59
-+ 	STORAGE	reduce by rule 59
-+ 	LOCATIONS	reduce by rule 59
-+ 	STRUCTURE	reduce by rule 59
-+ 	FUNCTOR	reduce by rule 59
-+ 	SIGNATURE	reduce by rule 59
-+ 	SHARING	reduce by rule 59
-+ 	INSTRUCTION	reduce by rule 59
-+ 	VLIW	reduce by rule 59
-+ 	SUPERSCALAR	reduce by rule 59
-+ 	FUN	reduce by rule 59
-+ 	VAL	reduce by rule 59
-+ 	INCLUDE	reduce by rule 59
-+ 	OPEN	reduce by rule 59
-+ 	LITTLE	reduce by rule 59
-+ 	BIG	reduce by rule 59
-+ 	PIPELINE	reduce by rule 59
-+ 	LOWERCASE	reduce by rule 59
-+ 	UPPERCASE	reduce by rule 59
-+ 	VERBATIM	reduce by rule 59
-+ 	RTL	reduce by rule 59
-+ 	NONFIX	reduce by rule 59
-+ 	INFIX	reduce by rule 59
-+ 	INFIXR	reduce by rule 59
-+ 	DEBUG	reduce by rule 59
-+ 	RESOURCE	reduce by rule 59
-+ 	CPU	reduce by rule 59
-+ 	LATENCY	reduce by rule 59
-+ 	EXCEPTION	reduce by rule 59
-+ 	EOF	reduce by rule 59
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 254:
-+ 
-+ 	withtypeclause : WITHTYPE . typebinds 
-+ 
-+ 	LPAREN	shift 160
-+ 	CELLSET	reduce by rule 199
-+ 	HASH	shift 159
-+ 	BITS	reduce by rule 199
-+ 	INSTRUCTION	reduce by rule 199
-+ 	CELL	reduce by rule 199
-+ 	ID	reduce by rule 199
-+ 	SYMBOL	reduce by rule 199
-+ 	TYVAR	shift 158
-+ 
-+ 	typebinds	goto 382
-+ 	typebind	goto 156
-+ 	tyvar	goto 155
-+ 	tyvarseq	goto 375
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 255:
-+ 
-+ 	scopeddecls : newScope decls . oldScope 
-+ 
-+ 	END	reduce by rule 108
-+ 	IN	reduce by rule 108
-+ 	RPAREN	reduce by rule 108
-+ 
-+ 	oldScope	goto 383
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 256:
-+ 
-+ 	mymldecl : LOCAL scopeddecls IN . scopeddecls END 
-+ 
-+ 	ARCHITECTURE	reduce by rule 107
-+ 	END	reduce by rule 107
-+ 	LOCAL	reduce by rule 107
-+ 	DATATYPE	reduce by rule 107
-+ 	TYPE	reduce by rule 107
-+ 	STORAGE	reduce by rule 107
-+ 	LOCATIONS	reduce by rule 107
-+ 	STRUCTURE	reduce by rule 107
-+ 	FUNCTOR	reduce by rule 107
-+ 	SIGNATURE	reduce by rule 107
-+ 	SHARING	reduce by rule 107
-+ 	INSTRUCTION	reduce by rule 107
-+ 	VLIW	reduce by rule 107
-+ 	SUPERSCALAR	reduce by rule 107
-+ 	FUN	reduce by rule 107
-+ 	VAL	reduce by rule 107
-+ 	INCLUDE	reduce by rule 107
-+ 	OPEN	reduce by rule 107
-+ 	LITTLE	reduce by rule 107
-+ 	BIG	reduce by rule 107
-+ 	PIPELINE	reduce by rule 107
-+ 	LOWERCASE	reduce by rule 107
-+ 	UPPERCASE	reduce by rule 107
-+ 	VERBATIM	reduce by rule 107
-+ 	RTL	reduce by rule 107
-+ 	NONFIX	reduce by rule 107
-+ 	INFIX	reduce by rule 107
-+ 	INFIXR	reduce by rule 107
-+ 	DEBUG	reduce by rule 107
-+ 	RESOURCE	reduce by rule 107
-+ 	CPU	reduce by rule 107
-+ 	LATENCY	reduce by rule 107
-+ 	EXCEPTION	reduce by rule 107
-+ 
-+ 	scopeddecls	goto 384
-+ 	newScope	goto 164
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 257:
-+ 
-+ 	mymddecl : ARCHITECTURE id EQ . STRUCT decls END 
-+ 
-+ 	STRUCT	shift 385
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 258:
-+ 
-+ 	exceptionbinds : exceptionbind AND exceptionbinds .  (reduce by rule 84)
-+ 
-+ 	ARCHITECTURE	reduce by rule 84
-+ 	END	reduce by rule 84
-+ 	LOCAL	reduce by rule 84
-+ 	IN	reduce by rule 84
-+ 	DATATYPE	reduce by rule 84
-+ 	TYPE	reduce by rule 84
-+ 	RPAREN	reduce by rule 84
-+ 	SEMICOLON	reduce by rule 84
-+ 	STORAGE	reduce by rule 84
-+ 	LOCATIONS	reduce by rule 84
-+ 	STRUCTURE	reduce by rule 84
-+ 	FUNCTOR	reduce by rule 84
-+ 	SIGNATURE	reduce by rule 84
-+ 	SHARING	reduce by rule 84
-+ 	INSTRUCTION	reduce by rule 84
-+ 	VLIW	reduce by rule 84
-+ 	SUPERSCALAR	reduce by rule 84
-+ 	FUN	reduce by rule 84
-+ 	VAL	reduce by rule 84
-+ 	INCLUDE	reduce by rule 84
-+ 	OPEN	reduce by rule 84
-+ 	LITTLE	reduce by rule 84
-+ 	BIG	reduce by rule 84
-+ 	PIPELINE	reduce by rule 84
-+ 	LOWERCASE	reduce by rule 84
-+ 	UPPERCASE	reduce by rule 84
-+ 	VERBATIM	reduce by rule 84
-+ 	RTL	reduce by rule 84
-+ 	NONFIX	reduce by rule 84
-+ 	INFIX	reduce by rule 84
-+ 	INFIXR	reduce by rule 84
-+ 	DEBUG	reduce by rule 84
-+ 	RESOURCE	reduce by rule 84
-+ 	CPU	reduce by rule 84
-+ 	LATENCY	reduce by rule 84
-+ 	EXCEPTION	reduce by rule 84
-+ 	EOF	reduce by rule 84
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 259:
-+ 
-+ 	exceptionbind : id EQ ident .  (reduce by rule 87)
-+ 
-+ 	ARCHITECTURE	reduce by rule 87
-+ 	END	reduce by rule 87
-+ 	LOCAL	reduce by rule 87
-+ 	IN	reduce by rule 87
-+ 	DATATYPE	reduce by rule 87
-+ 	TYPE	reduce by rule 87
-+ 	AND	reduce by rule 87
-+ 	RPAREN	reduce by rule 87
-+ 	SEMICOLON	reduce by rule 87
-+ 	STORAGE	reduce by rule 87
-+ 	LOCATIONS	reduce by rule 87
-+ 	STRUCTURE	reduce by rule 87
-+ 	FUNCTOR	reduce by rule 87
-+ 	SIGNATURE	reduce by rule 87
-+ 	SHARING	reduce by rule 87
-+ 	INSTRUCTION	reduce by rule 87
-+ 	VLIW	reduce by rule 87
-+ 	SUPERSCALAR	reduce by rule 87
-+ 	FUN	reduce by rule 87
-+ 	VAL	reduce by rule 87
-+ 	INCLUDE	reduce by rule 87
-+ 	OPEN	reduce by rule 87
-+ 	LITTLE	reduce by rule 87
-+ 	BIG	reduce by rule 87
-+ 	PIPELINE	reduce by rule 87
-+ 	LOWERCASE	reduce by rule 87
-+ 	UPPERCASE	reduce by rule 87
-+ 	VERBATIM	reduce by rule 87
-+ 	RTL	reduce by rule 87
-+ 	NONFIX	reduce by rule 87
-+ 	INFIX	reduce by rule 87
-+ 	INFIXR	reduce by rule 87
-+ 	DEBUG	reduce by rule 87
-+ 	RESOURCE	reduce by rule 87
-+ 	CPU	reduce by rule 87
-+ 	LATENCY	reduce by rule 87
-+ 	EXCEPTION	reduce by rule 87
-+ 	EOF	reduce by rule 87
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 260:
-+ 
-+ 	aty : tyvar .  (reduce by rule 352)
-+ 
-+ 	ARCHITECTURE	reduce by rule 352
-+ 	END	reduce by rule 352
-+ 	LOCAL	reduce by rule 352
-+ 	IN	reduce by rule 352
-+ 	OF	reduce by rule 352
-+ 	DATATYPE	reduce by rule 352
-+ 	TYPE	reduce by rule 352
-+ 	EQ	reduce by rule 352
-+ 	TIMES	reduce by rule 352
-+ 	AND	reduce by rule 352
-+ 	LPAREN	reduce by rule 352
-+ 	RPAREN	reduce by rule 352
-+ 	RBRACKET	reduce by rule 352
-+ 	RBRACE	reduce by rule 352
-+ 	SEMICOLON	reduce by rule 352
-+ 	LDQUOTE	reduce by rule 352
-+ 	CELLSET	reduce by rule 352
-+ 	STORAGE	reduce by rule 352
-+ 	LOCATIONS	reduce by rule 352
-+ 	COMMA	reduce by rule 352
-+ 	COLON	reduce by rule 352
-+ 	BAR	reduce by rule 352
-+ 	ARROW	reduce by rule 352
-+ 	DARROW	reduce by rule 352
-+ 	BITS	reduce by rule 352
-+ 	THEN	reduce by rule 352
-+ 	ELSE	reduce by rule 352
-+ 	STRUCTURE	reduce by rule 352
-+ 	FUNCTOR	reduce by rule 352
-+ 	SIGNATURE	reduce by rule 352
-+ 	WHERE	reduce by rule 352
-+ 	SHARING	reduce by rule 352
-+ 	INSTRUCTION	reduce by rule 352
-+ 	CELL	reduce by rule 352
-+ 	VLIW	reduce by rule 352
-+ 	SUPERSCALAR	reduce by rule 352
-+ 	WITHTYPE	reduce by rule 352
-+ 	FUN	reduce by rule 352
-+ 	VAL	reduce by rule 352
-+ 	INCLUDE	reduce by rule 352
-+ 	OPEN	reduce by rule 352
-+ 	LITTLE	reduce by rule 352
-+ 	BIG	reduce by rule 352
-+ 	PIPELINE	reduce by rule 352
-+ 	LOWERCASE	reduce by rule 352
-+ 	UPPERCASE	reduce by rule 352
-+ 	VERBATIM	reduce by rule 352
-+ 	RTL	reduce by rule 352
-+ 	SPAN	reduce by rule 352
-+ 	DELAYSLOT	reduce by rule 352
-+ 	NONFIX	reduce by rule 352
-+ 	INFIX	reduce by rule 352
-+ 	INFIXR	reduce by rule 352
-+ 	DEBUG	reduce by rule 352
-+ 	ASM_COLON	reduce by rule 352
-+ 	MC_COLON	reduce by rule 352
-+ 	RTL_COLON	reduce by rule 352
-+ 	DELAYSLOT_COLON	reduce by rule 352
-+ 	NULLIFIED_COLON	reduce by rule 352
-+ 	PADDING_COLON	reduce by rule 352
-+ 	RESOURCE	reduce by rule 352
-+ 	CPU	reduce by rule 352
-+ 	LATENCY	reduce by rule 352
-+ 	EXCEPTION	reduce by rule 352
-+ 	ID	reduce by rule 352
-+ 	SYMBOL	reduce by rule 352
-+ 	WORD	reduce by rule 352
-+ 	INT	reduce by rule 352
-+ 	STRING	reduce by rule 352
-+ 	EOF	reduce by rule 352
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 261:
-+ 
-+ 	ty : tuplety .  (reduce by rule 372)
-+ 
-+ 	ARCHITECTURE	reduce by rule 372
-+ 	END	reduce by rule 372
-+ 	LOCAL	reduce by rule 372
-+ 	IN	reduce by rule 372
-+ 	OF	reduce by rule 372
-+ 	DATATYPE	reduce by rule 372
-+ 	TYPE	reduce by rule 372
-+ 	EQ	reduce by rule 372
-+ 	AND	reduce by rule 372
-+ 	LPAREN	reduce by rule 372
-+ 	RPAREN	reduce by rule 372
-+ 	RBRACKET	reduce by rule 372
-+ 	RBRACE	reduce by rule 372
-+ 	SEMICOLON	reduce by rule 372
-+ 	LDQUOTE	reduce by rule 372
-+ 	CELLSET	reduce by rule 372
-+ 	STORAGE	reduce by rule 372
-+ 	LOCATIONS	reduce by rule 372
-+ 	COMMA	reduce by rule 372
-+ 	COLON	reduce by rule 372
-+ 	BAR	reduce by rule 372
-+ 	ARROW	reduce by rule 372
-+ 	DARROW	reduce by rule 372
-+ 	THEN	reduce by rule 372
-+ 	ELSE	reduce by rule 372
-+ 	STRUCTURE	reduce by rule 372
-+ 	FUNCTOR	reduce by rule 372
-+ 	SIGNATURE	reduce by rule 372
-+ 	WHERE	reduce by rule 372
-+ 	SHARING	reduce by rule 372
-+ 	INSTRUCTION	reduce by rule 372
-+ 	VLIW	reduce by rule 372
-+ 	SUPERSCALAR	reduce by rule 372
-+ 	WITHTYPE	reduce by rule 372
-+ 	FUN	reduce by rule 372
-+ 	VAL	reduce by rule 372
-+ 	INCLUDE	reduce by rule 372
-+ 	OPEN	reduce by rule 372
-+ 	LITTLE	reduce by rule 372
-+ 	BIG	reduce by rule 372
-+ 	PIPELINE	reduce by rule 372
-+ 	LOWERCASE	reduce by rule 372
-+ 	UPPERCASE	reduce by rule 372
-+ 	VERBATIM	reduce by rule 372
-+ 	RTL	reduce by rule 372
-+ 	SPAN	reduce by rule 372
-+ 	DELAYSLOT	reduce by rule 372
-+ 	NONFIX	reduce by rule 372
-+ 	INFIX	reduce by rule 372
-+ 	INFIXR	reduce by rule 372
-+ 	DEBUG	reduce by rule 372
-+ 	ASM_COLON	reduce by rule 372
-+ 	MC_COLON	reduce by rule 372
-+ 	RTL_COLON	reduce by rule 372
-+ 	DELAYSLOT_COLON	reduce by rule 372
-+ 	NULLIFIED_COLON	reduce by rule 372
-+ 	PADDING_COLON	reduce by rule 372
-+ 	RESOURCE	reduce by rule 372
-+ 	CPU	reduce by rule 372
-+ 	LATENCY	reduce by rule 372
-+ 	EXCEPTION	reduce by rule 372
-+ 	ID	reduce by rule 372
-+ 	SYMBOL	reduce by rule 372
-+ 	WORD	reduce by rule 372
-+ 	INT	reduce by rule 372
-+ 	STRING	reduce by rule 372
-+ 	EOF	reduce by rule 372
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 262: shift/reduce conflict (shift SYMBOL, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift ID, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift INSTRUCTION, reduce by rule 373)
-+ error:  state 262: shift/reduce conflict (shift CELLSET, reduce by rule 373)
-+ 
-+ state 262:
-+ 
-+ 	ty : appty .  (reduce by rule 373)
-+ 	appty : appty . tident 
-+ 	tuplety : appty . TIMES appty 
-+ 	tuplety : appty . TIMES tuplety 
-+ 
-+ 	ARCHITECTURE	reduce by rule 373
-+ 	END	reduce by rule 373
-+ 	LOCAL	reduce by rule 373
-+ 	IN	reduce by rule 373
-+ 	OF	reduce by rule 373
-+ 	DATATYPE	reduce by rule 373
-+ 	TYPE	reduce by rule 373
-+ 	EQ	reduce by rule 373
-+ 	TIMES	shift 387
-+ 	AND	reduce by rule 373
-+ 	LPAREN	reduce by rule 373
-+ 	RPAREN	reduce by rule 373
-+ 	RBRACKET	reduce by rule 373
-+ 	RBRACE	reduce by rule 373
-+ 	SEMICOLON	reduce by rule 373
-+ 	LDQUOTE	reduce by rule 373
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 373
-+ 	LOCATIONS	reduce by rule 373
-+ 	COMMA	reduce by rule 373
-+ 	COLON	reduce by rule 373
-+ 	BAR	reduce by rule 373
-+ 	ARROW	reduce by rule 373
-+ 	DARROW	reduce by rule 373
-+ 	BITS	shift 246
-+ 	THEN	reduce by rule 373
-+ 	ELSE	reduce by rule 373
-+ 	STRUCTURE	reduce by rule 373
-+ 	FUNCTOR	reduce by rule 373
-+ 	SIGNATURE	reduce by rule 373
-+ 	WHERE	reduce by rule 373
-+ 	SHARING	reduce by rule 373
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	VLIW	reduce by rule 373
-+ 	SUPERSCALAR	reduce by rule 373
-+ 	WITHTYPE	reduce by rule 373
-+ 	FUN	reduce by rule 373
-+ 	VAL	reduce by rule 373
-+ 	INCLUDE	reduce by rule 373
-+ 	OPEN	reduce by rule 373
-+ 	LITTLE	reduce by rule 373
-+ 	BIG	reduce by rule 373
-+ 	PIPELINE	reduce by rule 373
-+ 	LOWERCASE	reduce by rule 373
-+ 	UPPERCASE	reduce by rule 373
-+ 	VERBATIM	reduce by rule 373
-+ 	RTL	reduce by rule 373
-+ 	SPAN	reduce by rule 373
-+ 	DELAYSLOT	reduce by rule 373
-+ 	NONFIX	reduce by rule 373
-+ 	INFIX	reduce by rule 373
-+ 	INFIXR	reduce by rule 373
-+ 	DEBUG	reduce by rule 373
-+ 	ASM_COLON	reduce by rule 373
-+ 	MC_COLON	reduce by rule 373
-+ 	RTL_COLON	reduce by rule 373
-+ 	DELAYSLOT_COLON	reduce by rule 373
-+ 	NULLIFIED_COLON	reduce by rule 373
-+ 	PADDING_COLON	reduce by rule 373
-+ 	RESOURCE	reduce by rule 373
-+ 	CPU	reduce by rule 373
-+ 	LATENCY	reduce by rule 373
-+ 	EXCEPTION	reduce by rule 373
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	reduce by rule 373
-+ 	INT	reduce by rule 373
-+ 	STRING	reduce by rule 373
-+ 	EOF	reduce by rule 373
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 386
-+ 	tpath	goto 265
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 263:
-+ 
-+ 	appty : aty .  (reduce by rule 357)
-+ 
-+ 	ARCHITECTURE	reduce by rule 357
-+ 	END	reduce by rule 357
-+ 	LOCAL	reduce by rule 357
-+ 	IN	reduce by rule 357
-+ 	OF	reduce by rule 357
-+ 	DATATYPE	reduce by rule 357
-+ 	TYPE	reduce by rule 357
-+ 	EQ	reduce by rule 357
-+ 	TIMES	reduce by rule 357
-+ 	AND	reduce by rule 357
-+ 	LPAREN	reduce by rule 357
-+ 	RPAREN	reduce by rule 357
-+ 	RBRACKET	reduce by rule 357
-+ 	RBRACE	reduce by rule 357
-+ 	SEMICOLON	reduce by rule 357
-+ 	LDQUOTE	reduce by rule 357
-+ 	CELLSET	reduce by rule 357
-+ 	STORAGE	reduce by rule 357
-+ 	LOCATIONS	reduce by rule 357
-+ 	COMMA	reduce by rule 357
-+ 	COLON	reduce by rule 357
-+ 	BAR	reduce by rule 357
-+ 	ARROW	reduce by rule 357
-+ 	DARROW	reduce by rule 357
-+ 	BITS	reduce by rule 357
-+ 	THEN	reduce by rule 357
-+ 	ELSE	reduce by rule 357
-+ 	STRUCTURE	reduce by rule 357
-+ 	FUNCTOR	reduce by rule 357
-+ 	SIGNATURE	reduce by rule 357
-+ 	WHERE	reduce by rule 357
-+ 	SHARING	reduce by rule 357
-+ 	INSTRUCTION	reduce by rule 357
-+ 	CELL	reduce by rule 357
-+ 	VLIW	reduce by rule 357
-+ 	SUPERSCALAR	reduce by rule 357
-+ 	WITHTYPE	reduce by rule 357
-+ 	FUN	reduce by rule 357
-+ 	VAL	reduce by rule 357
-+ 	INCLUDE	reduce by rule 357
-+ 	OPEN	reduce by rule 357
-+ 	LITTLE	reduce by rule 357
-+ 	BIG	reduce by rule 357
-+ 	PIPELINE	reduce by rule 357
-+ 	LOWERCASE	reduce by rule 357
-+ 	UPPERCASE	reduce by rule 357
-+ 	VERBATIM	reduce by rule 357
-+ 	RTL	reduce by rule 357
-+ 	SPAN	reduce by rule 357
-+ 	DELAYSLOT	reduce by rule 357
-+ 	NONFIX	reduce by rule 357
-+ 	INFIX	reduce by rule 357
-+ 	INFIXR	reduce by rule 357
-+ 	DEBUG	reduce by rule 357
-+ 	ASM_COLON	reduce by rule 357
-+ 	MC_COLON	reduce by rule 357
-+ 	RTL_COLON	reduce by rule 357
-+ 	DELAYSLOT_COLON	reduce by rule 357
-+ 	NULLIFIED_COLON	reduce by rule 357
-+ 	PADDING_COLON	reduce by rule 357
-+ 	RESOURCE	reduce by rule 357
-+ 	CPU	reduce by rule 357
-+ 	LATENCY	reduce by rule 357
-+ 	EXCEPTION	reduce by rule 357
-+ 	ID	reduce by rule 357
-+ 	SYMBOL	reduce by rule 357
-+ 	WORD	reduce by rule 357
-+ 	INT	reduce by rule 357
-+ 	STRING	reduce by rule 357
-+ 	EOF	reduce by rule 357
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 264:
-+ 
-+ 	exceptionbind : id OF ty .  (reduce by rule 86)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 86
-+ 	END	reduce by rule 86
-+ 	LOCAL	reduce by rule 86
-+ 	IN	reduce by rule 86
-+ 	DATATYPE	reduce by rule 86
-+ 	TYPE	reduce by rule 86
-+ 	AND	reduce by rule 86
-+ 	RPAREN	reduce by rule 86
-+ 	SEMICOLON	reduce by rule 86
-+ 	STORAGE	reduce by rule 86
-+ 	LOCATIONS	reduce by rule 86
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 86
-+ 	FUNCTOR	reduce by rule 86
-+ 	SIGNATURE	reduce by rule 86
-+ 	SHARING	reduce by rule 86
-+ 	INSTRUCTION	reduce by rule 86
-+ 	VLIW	reduce by rule 86
-+ 	SUPERSCALAR	reduce by rule 86
-+ 	FUN	reduce by rule 86
-+ 	VAL	reduce by rule 86
-+ 	INCLUDE	reduce by rule 86
-+ 	OPEN	reduce by rule 86
-+ 	LITTLE	reduce by rule 86
-+ 	BIG	reduce by rule 86
-+ 	PIPELINE	reduce by rule 86
-+ 	LOWERCASE	reduce by rule 86
-+ 	UPPERCASE	reduce by rule 86
-+ 	VERBATIM	reduce by rule 86
-+ 	RTL	reduce by rule 86
-+ 	NONFIX	reduce by rule 86
-+ 	INFIX	reduce by rule 86
-+ 	INFIXR	reduce by rule 86
-+ 	DEBUG	reduce by rule 86
-+ 	RESOURCE	reduce by rule 86
-+ 	CPU	reduce by rule 86
-+ 	LATENCY	reduce by rule 86
-+ 	EXCEPTION	reduce by rule 86
-+ 	EOF	reduce by rule 86
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 265:
-+ 
-+ 	tident : tpath .  (reduce by rule 366)
-+ 	tpath : tpath . DOT tid 
-+ 
-+ 	ARCHITECTURE	reduce by rule 366
-+ 	END	reduce by rule 366
-+ 	LOCAL	reduce by rule 366
-+ 	IN	reduce by rule 366
-+ 	OF	reduce by rule 366
-+ 	DATATYPE	reduce by rule 366
-+ 	TYPE	reduce by rule 366
-+ 	EQ	reduce by rule 366
-+ 	TIMES	reduce by rule 366
-+ 	AND	reduce by rule 366
-+ 	LPAREN	reduce by rule 366
-+ 	RPAREN	reduce by rule 366
-+ 	RBRACKET	reduce by rule 366
-+ 	RBRACE	reduce by rule 366
-+ 	SEMICOLON	reduce by rule 366
-+ 	LDQUOTE	reduce by rule 366
-+ 	CELLSET	reduce by rule 366
-+ 	STORAGE	reduce by rule 366
-+ 	LOCATIONS	reduce by rule 366
-+ 	COMMA	reduce by rule 366
-+ 	COLON	reduce by rule 366
-+ 	DOT	shift 389
-+ 	BAR	reduce by rule 366
-+ 	ARROW	reduce by rule 366
-+ 	DARROW	reduce by rule 366
-+ 	BITS	reduce by rule 366
-+ 	THEN	reduce by rule 366
-+ 	ELSE	reduce by rule 366
-+ 	STRUCTURE	reduce by rule 366
-+ 	FUNCTOR	reduce by rule 366
-+ 	SIGNATURE	reduce by rule 366
-+ 	WHERE	reduce by rule 366
-+ 	SHARING	reduce by rule 366
-+ 	INSTRUCTION	reduce by rule 366
-+ 	CELL	reduce by rule 366
-+ 	VLIW	reduce by rule 366
-+ 	SUPERSCALAR	reduce by rule 366
-+ 	WITHTYPE	reduce by rule 366
-+ 	FUN	reduce by rule 366
-+ 	VAL	reduce by rule 366
-+ 	INCLUDE	reduce by rule 366
-+ 	OPEN	reduce by rule 366
-+ 	LITTLE	reduce by rule 366
-+ 	BIG	reduce by rule 366
-+ 	PIPELINE	reduce by rule 366
-+ 	LOWERCASE	reduce by rule 366
-+ 	UPPERCASE	reduce by rule 366
-+ 	VERBATIM	reduce by rule 366
-+ 	RTL	reduce by rule 366
-+ 	SPAN	reduce by rule 366
-+ 	DELAYSLOT	reduce by rule 366
-+ 	NONFIX	reduce by rule 366
-+ 	INFIX	reduce by rule 366
-+ 	INFIXR	reduce by rule 366
-+ 	DEBUG	reduce by rule 366
-+ 	ASM_COLON	reduce by rule 366
-+ 	MC_COLON	reduce by rule 366
-+ 	RTL_COLON	reduce by rule 366
-+ 	DELAYSLOT_COLON	reduce by rule 366
-+ 	NULLIFIED_COLON	reduce by rule 366
-+ 	PADDING_COLON	reduce by rule 366
-+ 	RESOURCE	reduce by rule 366
-+ 	CPU	reduce by rule 366
-+ 	LATENCY	reduce by rule 366
-+ 	EXCEPTION	reduce by rule 366
-+ 	ID	reduce by rule 366
-+ 	SYMBOL	reduce by rule 366
-+ 	WORD	reduce by rule 366
-+ 	INT	reduce by rule 366
-+ 	STRING	reduce by rule 366
-+ 	EOF	reduce by rule 366
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 266:
-+ 
-+ 	aty : tident .  (reduce by rule 350)
-+ 
-+ 	ARCHITECTURE	reduce by rule 350
-+ 	END	reduce by rule 350
-+ 	LOCAL	reduce by rule 350
-+ 	IN	reduce by rule 350
-+ 	OF	reduce by rule 350
-+ 	DATATYPE	reduce by rule 350
-+ 	TYPE	reduce by rule 350
-+ 	EQ	reduce by rule 350
-+ 	TIMES	reduce by rule 350
-+ 	AND	reduce by rule 350
-+ 	LPAREN	reduce by rule 350
-+ 	RPAREN	reduce by rule 350
-+ 	RBRACKET	reduce by rule 350
-+ 	RBRACE	reduce by rule 350
-+ 	SEMICOLON	reduce by rule 350
-+ 	LDQUOTE	reduce by rule 350
-+ 	CELLSET	reduce by rule 350
-+ 	STORAGE	reduce by rule 350
-+ 	LOCATIONS	reduce by rule 350
-+ 	COMMA	reduce by rule 350
-+ 	COLON	reduce by rule 350
-+ 	BAR	reduce by rule 350
-+ 	ARROW	reduce by rule 350
-+ 	DARROW	reduce by rule 350
-+ 	BITS	reduce by rule 350
-+ 	THEN	reduce by rule 350
-+ 	ELSE	reduce by rule 350
-+ 	STRUCTURE	reduce by rule 350
-+ 	FUNCTOR	reduce by rule 350
-+ 	SIGNATURE	reduce by rule 350
-+ 	WHERE	reduce by rule 350
-+ 	SHARING	reduce by rule 350
-+ 	INSTRUCTION	reduce by rule 350
-+ 	CELL	reduce by rule 350
-+ 	VLIW	reduce by rule 350
-+ 	SUPERSCALAR	reduce by rule 350
-+ 	WITHTYPE	reduce by rule 350
-+ 	FUN	reduce by rule 350
-+ 	VAL	reduce by rule 350
-+ 	INCLUDE	reduce by rule 350
-+ 	OPEN	reduce by rule 350
-+ 	LITTLE	reduce by rule 350
-+ 	BIG	reduce by rule 350
-+ 	PIPELINE	reduce by rule 350
-+ 	LOWERCASE	reduce by rule 350
-+ 	UPPERCASE	reduce by rule 350
-+ 	VERBATIM	reduce by rule 350
-+ 	RTL	reduce by rule 350
-+ 	SPAN	reduce by rule 350
-+ 	DELAYSLOT	reduce by rule 350
-+ 	NONFIX	reduce by rule 350
-+ 	INFIX	reduce by rule 350
-+ 	INFIXR	reduce by rule 350
-+ 	DEBUG	reduce by rule 350
-+ 	ASM_COLON	reduce by rule 350
-+ 	MC_COLON	reduce by rule 350
-+ 	RTL_COLON	reduce by rule 350
-+ 	DELAYSLOT_COLON	reduce by rule 350
-+ 	NULLIFIED_COLON	reduce by rule 350
-+ 	PADDING_COLON	reduce by rule 350
-+ 	RESOURCE	reduce by rule 350
-+ 	CPU	reduce by rule 350
-+ 	LATENCY	reduce by rule 350
-+ 	EXCEPTION	reduce by rule 350
-+ 	ID	reduce by rule 350
-+ 	SYMBOL	reduce by rule 350
-+ 	WORD	reduce by rule 350
-+ 	INT	reduce by rule 350
-+ 	STRING	reduce by rule 350
-+ 	EOF	reduce by rule 350
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 267:
-+ 
-+ 	tident : tid .  (reduce by rule 365)
-+ 	tpath : tid . DOT tid 
-+ 
-+ 	ARCHITECTURE	reduce by rule 365
-+ 	END	reduce by rule 365
-+ 	LOCAL	reduce by rule 365
-+ 	IN	reduce by rule 365
-+ 	OF	reduce by rule 365
-+ 	DATATYPE	reduce by rule 365
-+ 	TYPE	reduce by rule 365
-+ 	EQ	reduce by rule 365
-+ 	TIMES	reduce by rule 365
-+ 	AND	reduce by rule 365
-+ 	LPAREN	reduce by rule 365
-+ 	RPAREN	reduce by rule 365
-+ 	RBRACKET	reduce by rule 365
-+ 	RBRACE	reduce by rule 365
-+ 	SEMICOLON	reduce by rule 365
-+ 	LDQUOTE	reduce by rule 365
-+ 	CELLSET	reduce by rule 365
-+ 	STORAGE	reduce by rule 365
-+ 	LOCATIONS	reduce by rule 365
-+ 	COMMA	reduce by rule 365
-+ 	COLON	reduce by rule 365
-+ 	DOT	shift 390
-+ 	BAR	reduce by rule 365
-+ 	ARROW	reduce by rule 365
-+ 	DARROW	reduce by rule 365
-+ 	BITS	reduce by rule 365
-+ 	THEN	reduce by rule 365
-+ 	ELSE	reduce by rule 365
-+ 	STRUCTURE	reduce by rule 365
-+ 	FUNCTOR	reduce by rule 365
-+ 	SIGNATURE	reduce by rule 365
-+ 	WHERE	reduce by rule 365
-+ 	SHARING	reduce by rule 365
-+ 	INSTRUCTION	reduce by rule 365
-+ 	CELL	reduce by rule 365
-+ 	VLIW	reduce by rule 365
-+ 	SUPERSCALAR	reduce by rule 365
-+ 	WITHTYPE	reduce by rule 365
-+ 	FUN	reduce by rule 365
-+ 	VAL	reduce by rule 365
-+ 	INCLUDE	reduce by rule 365
-+ 	OPEN	reduce by rule 365
-+ 	LITTLE	reduce by rule 365
-+ 	BIG	reduce by rule 365
-+ 	PIPELINE	reduce by rule 365
-+ 	LOWERCASE	reduce by rule 365
-+ 	UPPERCASE	reduce by rule 365
-+ 	VERBATIM	reduce by rule 365
-+ 	RTL	reduce by rule 365
-+ 	SPAN	reduce by rule 365
-+ 	DELAYSLOT	reduce by rule 365
-+ 	NONFIX	reduce by rule 365
-+ 	INFIX	reduce by rule 365
-+ 	INFIXR	reduce by rule 365
-+ 	DEBUG	reduce by rule 365
-+ 	ASM_COLON	reduce by rule 365
-+ 	MC_COLON	reduce by rule 365
-+ 	RTL_COLON	reduce by rule 365
-+ 	DELAYSLOT_COLON	reduce by rule 365
-+ 	NULLIFIED_COLON	reduce by rule 365
-+ 	PADDING_COLON	reduce by rule 365
-+ 	RESOURCE	reduce by rule 365
-+ 	CPU	reduce by rule 365
-+ 	LATENCY	reduce by rule 365
-+ 	EXCEPTION	reduce by rule 365
-+ 	ID	reduce by rule 365
-+ 	SYMBOL	reduce by rule 365
-+ 	WORD	reduce by rule 365
-+ 	INT	reduce by rule 365
-+ 	STRING	reduce by rule 365
-+ 	EOF	reduce by rule 365
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 268:
-+ 
-+ 	aty : HASH . int 
-+ 	tyvar : HASH . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	INT	shift 64
-+ 
-+ 	id	goto 248
-+ 	int	goto 391
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 269:
-+ 
-+ 	aty : LBRACE . labtys RBRACE 
-+ 
-+ 	RBRACE	reduce by rule 374
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 395
-+ 	labty	goto 394
-+ 	labtys	goto 393
-+ 	labtys1	goto 392
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 270:
-+ 
-+ 	aty : LPAREN . RPAREN 
-+ 	aty : LPAREN . ty RPAREN 
-+ 	appty : LPAREN . tys2 RPAREN tident 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	RPAREN	shift 398
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 397
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tys2	goto 396
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 271:
-+ 
-+ 	aty : DOLLAR . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 399
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 272:
-+ 
-+ 	latencyclauses : latencyclause BAR latencyclauses .  (reduce by rule 57)
-+ 
-+ 	ARCHITECTURE	reduce by rule 57
-+ 	END	reduce by rule 57
-+ 	LOCAL	reduce by rule 57
-+ 	IN	reduce by rule 57
-+ 	DATATYPE	reduce by rule 57
-+ 	TYPE	reduce by rule 57
-+ 	AND	reduce by rule 57
-+ 	RPAREN	reduce by rule 57
-+ 	SEMICOLON	reduce by rule 57
-+ 	STORAGE	reduce by rule 57
-+ 	LOCATIONS	reduce by rule 57
-+ 	STRUCTURE	reduce by rule 57
-+ 	FUNCTOR	reduce by rule 57
-+ 	SIGNATURE	reduce by rule 57
-+ 	SHARING	reduce by rule 57
-+ 	INSTRUCTION	reduce by rule 57
-+ 	VLIW	reduce by rule 57
-+ 	SUPERSCALAR	reduce by rule 57
-+ 	FUN	reduce by rule 57
-+ 	VAL	reduce by rule 57
-+ 	INCLUDE	reduce by rule 57
-+ 	OPEN	reduce by rule 57
-+ 	LITTLE	reduce by rule 57
-+ 	BIG	reduce by rule 57
-+ 	PIPELINE	reduce by rule 57
-+ 	LOWERCASE	reduce by rule 57
-+ 	UPPERCASE	reduce by rule 57
-+ 	VERBATIM	reduce by rule 57
-+ 	RTL	reduce by rule 57
-+ 	NONFIX	reduce by rule 57
-+ 	INFIX	reduce by rule 57
-+ 	INFIXR	reduce by rule 57
-+ 	DEBUG	reduce by rule 57
-+ 	RESOURCE	reduce by rule 57
-+ 	CPU	reduce by rule 57
-+ 	LATENCY	reduce by rule 57
-+ 	EXCEPTION	reduce by rule 57
-+ 	EOF	reduce by rule 57
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 273:
-+ 
-+ 	latencybinds : latencybind AND latencybinds .  (reduce by rule 54)
-+ 
-+ 	ARCHITECTURE	reduce by rule 54
-+ 	END	reduce by rule 54
-+ 	LOCAL	reduce by rule 54
-+ 	IN	reduce by rule 54
-+ 	DATATYPE	reduce by rule 54
-+ 	TYPE	reduce by rule 54
-+ 	RPAREN	reduce by rule 54
-+ 	SEMICOLON	reduce by rule 54
-+ 	STORAGE	reduce by rule 54
-+ 	LOCATIONS	reduce by rule 54
-+ 	STRUCTURE	reduce by rule 54
-+ 	FUNCTOR	reduce by rule 54
-+ 	SIGNATURE	reduce by rule 54
-+ 	SHARING	reduce by rule 54
-+ 	INSTRUCTION	reduce by rule 54
-+ 	VLIW	reduce by rule 54
-+ 	SUPERSCALAR	reduce by rule 54
-+ 	FUN	reduce by rule 54
-+ 	VAL	reduce by rule 54
-+ 	INCLUDE	reduce by rule 54
-+ 	OPEN	reduce by rule 54
-+ 	LITTLE	reduce by rule 54
-+ 	BIG	reduce by rule 54
-+ 	PIPELINE	reduce by rule 54
-+ 	LOWERCASE	reduce by rule 54
-+ 	UPPERCASE	reduce by rule 54
-+ 	VERBATIM	reduce by rule 54
-+ 	RTL	reduce by rule 54
-+ 	NONFIX	reduce by rule 54
-+ 	INFIX	reduce by rule 54
-+ 	INFIXR	reduce by rule 54
-+ 	DEBUG	reduce by rule 54
-+ 	RESOURCE	reduce by rule 54
-+ 	CPU	reduce by rule 54
-+ 	LATENCY	reduce by rule 54
-+ 	EXCEPTION	reduce by rule 54
-+ 	EOF	reduce by rule 54
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 274:
-+ 
-+ 	latencyclause : id pat EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 400
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 275:
-+ 
-+ 	cpubinds : cpubind AND cpubinds .  (reduce by rule 31)
-+ 
-+ 	ARCHITECTURE	reduce by rule 31
-+ 	END	reduce by rule 31
-+ 	LOCAL	reduce by rule 31
-+ 	IN	reduce by rule 31
-+ 	DATATYPE	reduce by rule 31
-+ 	TYPE	reduce by rule 31
-+ 	RPAREN	reduce by rule 31
-+ 	SEMICOLON	reduce by rule 31
-+ 	STORAGE	reduce by rule 31
-+ 	LOCATIONS	reduce by rule 31
-+ 	STRUCTURE	reduce by rule 31
-+ 	FUNCTOR	reduce by rule 31
-+ 	SIGNATURE	reduce by rule 31
-+ 	SHARING	reduce by rule 31
-+ 	INSTRUCTION	reduce by rule 31
-+ 	VLIW	reduce by rule 31
-+ 	SUPERSCALAR	reduce by rule 31
-+ 	FUN	reduce by rule 31
-+ 	VAL	reduce by rule 31
-+ 	INCLUDE	reduce by rule 31
-+ 	OPEN	reduce by rule 31
-+ 	LITTLE	reduce by rule 31
-+ 	BIG	reduce by rule 31
-+ 	PIPELINE	reduce by rule 31
-+ 	LOWERCASE	reduce by rule 31
-+ 	UPPERCASE	reduce by rule 31
-+ 	VERBATIM	reduce by rule 31
-+ 	RTL	reduce by rule 31
-+ 	NONFIX	reduce by rule 31
-+ 	INFIX	reduce by rule 31
-+ 	INFIXR	reduce by rule 31
-+ 	DEBUG	reduce by rule 31
-+ 	RESOURCE	reduce by rule 31
-+ 	CPU	reduce by rule 31
-+ 	LATENCY	reduce by rule 31
-+ 	EXCEPTION	reduce by rule 31
-+ 	EOF	reduce by rule 31
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 276:
-+ 
-+ 	cpubind : id aliases int . LBRACKET resources RBRACKET 
-+ 
-+ 	LBRACKET	shift 401
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 277:
-+ 
-+ 	aliases : string aliases .  (reduce by rule 34)
-+ 
-+ 	INT	reduce by rule 34
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 278:
-+ 
-+ 	resourcebinds : id AND resourcebinds .  (reduce by rule 29)
-+ 
-+ 	ARCHITECTURE	reduce by rule 29
-+ 	END	reduce by rule 29
-+ 	LOCAL	reduce by rule 29
-+ 	IN	reduce by rule 29
-+ 	DATATYPE	reduce by rule 29
-+ 	TYPE	reduce by rule 29
-+ 	RPAREN	reduce by rule 29
-+ 	SEMICOLON	reduce by rule 29
-+ 	STORAGE	reduce by rule 29
-+ 	LOCATIONS	reduce by rule 29
-+ 	STRUCTURE	reduce by rule 29
-+ 	FUNCTOR	reduce by rule 29
-+ 	SIGNATURE	reduce by rule 29
-+ 	SHARING	reduce by rule 29
-+ 	INSTRUCTION	reduce by rule 29
-+ 	VLIW	reduce by rule 29
-+ 	SUPERSCALAR	reduce by rule 29
-+ 	FUN	reduce by rule 29
-+ 	VAL	reduce by rule 29
-+ 	INCLUDE	reduce by rule 29
-+ 	OPEN	reduce by rule 29
-+ 	LITTLE	reduce by rule 29
-+ 	BIG	reduce by rule 29
-+ 	PIPELINE	reduce by rule 29
-+ 	LOWERCASE	reduce by rule 29
-+ 	UPPERCASE	reduce by rule 29
-+ 	VERBATIM	reduce by rule 29
-+ 	RTL	reduce by rule 29
-+ 	NONFIX	reduce by rule 29
-+ 	INFIX	reduce by rule 29
-+ 	INFIXR	reduce by rule 29
-+ 	DEBUG	reduce by rule 29
-+ 	RESOURCE	reduce by rule 29
-+ 	CPU	reduce by rule 29
-+ 	LATENCY	reduce by rule 29
-+ 	EXCEPTION	reduce by rule 29
-+ 	EOF	reduce by rule 29
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 279:
-+ 
-+ 	aexp : asm_strings .  (reduce by rule 246)
-+ 
-+ 	ARCHITECTURE	reduce by rule 246
-+ 	END	reduce by rule 246
-+ 	LOCAL	reduce by rule 246
-+ 	IN	reduce by rule 246
-+ 	OF	reduce by rule 246
-+ 	DATATYPE	reduce by rule 246
-+ 	TYPE	reduce by rule 246
-+ 	EQ	reduce by rule 246
-+ 	DOLLAR	reduce by rule 246
-+ 	TIMES	reduce by rule 246
-+ 	AND	reduce by rule 246
-+ 	DEREF	reduce by rule 246
-+ 	NOT	reduce by rule 246
-+ 	LLBRACKET	reduce by rule 246
-+ 	LHASHBRACKET	reduce by rule 246
-+ 	LPAREN	reduce by rule 246
-+ 	RPAREN	reduce by rule 246
-+ 	LBRACKET	reduce by rule 246
-+ 	RBRACKET	reduce by rule 246
-+ 	LBRACE	reduce by rule 246
-+ 	RBRACE	reduce by rule 246
-+ 	SEMICOLON	reduce by rule 246
-+ 	LDQUOTE	reduce by rule 246
-+ 	RMETA	reduce by rule 246
-+ 	CELLSET	reduce by rule 246
-+ 	STORAGE	reduce by rule 246
-+ 	LOCATIONS	reduce by rule 246
-+ 	HASH	reduce by rule 246
-+ 	COMMA	reduce by rule 246
-+ 	COLON	reduce by rule 246
-+ 	AT	reduce by rule 246
-+ 	BAR	reduce by rule 246
-+ 	DARROW	reduce by rule 246
-+ 	THEN	reduce by rule 246
-+ 	ELSE	reduce by rule 246
-+ 	TRUE	reduce by rule 246
-+ 	FALSE	reduce by rule 246
-+ 	HANDLE	reduce by rule 246
-+ 	LET	reduce by rule 246
-+ 	STRUCTURE	reduce by rule 246
-+ 	FUNCTOR	reduce by rule 246
-+ 	SIGNATURE	reduce by rule 246
-+ 	SHARING	reduce by rule 246
-+ 	INSTRUCTION	reduce by rule 246
-+ 	VLIW	reduce by rule 246
-+ 	SUPERSCALAR	reduce by rule 246
-+ 	WITHTYPE	reduce by rule 246
-+ 	FUN	reduce by rule 246
-+ 	VAL	reduce by rule 246
-+ 	INCLUDE	reduce by rule 246
-+ 	OPEN	reduce by rule 246
-+ 	OP	reduce by rule 246
-+ 	LITTLE	reduce by rule 246
-+ 	BIG	reduce by rule 246
-+ 	PIPELINE	reduce by rule 246
-+ 	LOWERCASE	reduce by rule 246
-+ 	UPPERCASE	reduce by rule 246
-+ 	VERBATIM	reduce by rule 246
-+ 	RTL	reduce by rule 246
-+ 	SPAN	reduce by rule 246
-+ 	DELAYSLOT	reduce by rule 246
-+ 	ALWAYS	reduce by rule 246
-+ 	NEVER	reduce by rule 246
-+ 	NONFIX	reduce by rule 246
-+ 	INFIX	reduce by rule 246
-+ 	INFIXR	reduce by rule 246
-+ 	DEBUG	reduce by rule 246
-+ 	ASM_COLON	reduce by rule 246
-+ 	MC_COLON	reduce by rule 246
-+ 	RTL_COLON	reduce by rule 246
-+ 	DELAYSLOT_COLON	reduce by rule 246
-+ 	NULLIFIED_COLON	reduce by rule 246
-+ 	PADDING_COLON	reduce by rule 246
-+ 	RESOURCE	reduce by rule 246
-+ 	CPU	reduce by rule 246
-+ 	LATENCY	reduce by rule 246
-+ 	EXCEPTION	reduce by rule 246
-+ 	ID	reduce by rule 246
-+ 	SYMBOL	reduce by rule 246
-+ 	WORD	reduce by rule 246
-+ 	INT	reduce by rule 246
-+ 	INTINF	reduce by rule 246
-+ 	REAL	reduce by rule 246
-+ 	STRING	reduce by rule 246
-+ 	CHAR	reduce by rule 246
-+ 	EOF	reduce by rule 246
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 280:
-+ 
-+ 	aexp : literal .  (reduce by rule 241)
-+ 
-+ 	ARCHITECTURE	reduce by rule 241
-+ 	END	reduce by rule 241
-+ 	LOCAL	reduce by rule 241
-+ 	IN	reduce by rule 241
-+ 	OF	reduce by rule 241
-+ 	DATATYPE	reduce by rule 241
-+ 	TYPE	reduce by rule 241
-+ 	EQ	reduce by rule 241
-+ 	DOLLAR	reduce by rule 241
-+ 	TIMES	reduce by rule 241
-+ 	AND	reduce by rule 241
-+ 	DEREF	reduce by rule 241
-+ 	NOT	reduce by rule 241
-+ 	LLBRACKET	reduce by rule 241
-+ 	LHASHBRACKET	reduce by rule 241
-+ 	LPAREN	reduce by rule 241
-+ 	RPAREN	reduce by rule 241
-+ 	LBRACKET	reduce by rule 241
-+ 	RBRACKET	reduce by rule 241
-+ 	LBRACE	reduce by rule 241
-+ 	RBRACE	reduce by rule 241
-+ 	SEMICOLON	reduce by rule 241
-+ 	LDQUOTE	reduce by rule 241
-+ 	RMETA	reduce by rule 241
-+ 	CELLSET	reduce by rule 241
-+ 	STORAGE	reduce by rule 241
-+ 	LOCATIONS	reduce by rule 241
-+ 	HASH	reduce by rule 241
-+ 	COMMA	reduce by rule 241
-+ 	COLON	reduce by rule 241
-+ 	AT	reduce by rule 241
-+ 	BAR	reduce by rule 241
-+ 	DARROW	reduce by rule 241
-+ 	THEN	reduce by rule 241
-+ 	ELSE	reduce by rule 241
-+ 	TRUE	reduce by rule 241
-+ 	FALSE	reduce by rule 241
-+ 	HANDLE	reduce by rule 241
-+ 	LET	reduce by rule 241
-+ 	STRUCTURE	reduce by rule 241
-+ 	FUNCTOR	reduce by rule 241
-+ 	SIGNATURE	reduce by rule 241
-+ 	SHARING	reduce by rule 241
-+ 	INSTRUCTION	reduce by rule 241
-+ 	VLIW	reduce by rule 241
-+ 	SUPERSCALAR	reduce by rule 241
-+ 	WITHTYPE	reduce by rule 241
-+ 	FUN	reduce by rule 241
-+ 	VAL	reduce by rule 241
-+ 	INCLUDE	reduce by rule 241
-+ 	OPEN	reduce by rule 241
-+ 	OP	reduce by rule 241
-+ 	LITTLE	reduce by rule 241
-+ 	BIG	reduce by rule 241
-+ 	PIPELINE	reduce by rule 241
-+ 	LOWERCASE	reduce by rule 241
-+ 	UPPERCASE	reduce by rule 241
-+ 	VERBATIM	reduce by rule 241
-+ 	RTL	reduce by rule 241
-+ 	SPAN	reduce by rule 241
-+ 	DELAYSLOT	reduce by rule 241
-+ 	ALWAYS	reduce by rule 241
-+ 	NEVER	reduce by rule 241
-+ 	NONFIX	reduce by rule 241
-+ 	INFIX	reduce by rule 241
-+ 	INFIXR	reduce by rule 241
-+ 	DEBUG	reduce by rule 241
-+ 	ASM_COLON	reduce by rule 241
-+ 	MC_COLON	reduce by rule 241
-+ 	RTL_COLON	reduce by rule 241
-+ 	DELAYSLOT_COLON	reduce by rule 241
-+ 	NULLIFIED_COLON	reduce by rule 241
-+ 	PADDING_COLON	reduce by rule 241
-+ 	RESOURCE	reduce by rule 241
-+ 	CPU	reduce by rule 241
-+ 	LATENCY	reduce by rule 241
-+ 	EXCEPTION	reduce by rule 241
-+ 	ID	reduce by rule 241
-+ 	SYMBOL	reduce by rule 241
-+ 	WORD	reduce by rule 241
-+ 	INT	reduce by rule 241
-+ 	INTINF	reduce by rule 241
-+ 	REAL	reduce by rule 241
-+ 	STRING	reduce by rule 241
-+ 	CHAR	reduce by rule 241
-+ 	EOF	reduce by rule 241
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 281:
-+ 
-+ 	mymldecl : RTL asapat EQ exp .  (reduce by rule 63)
-+ 	exp : exp . HANDLE clauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 63
-+ 	END	reduce by rule 63
-+ 	LOCAL	reduce by rule 63
-+ 	IN	reduce by rule 63
-+ 	DATATYPE	reduce by rule 63
-+ 	TYPE	reduce by rule 63
-+ 	RPAREN	reduce by rule 63
-+ 	SEMICOLON	reduce by rule 63
-+ 	STORAGE	reduce by rule 63
-+ 	LOCATIONS	reduce by rule 63
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 63
-+ 	FUNCTOR	reduce by rule 63
-+ 	SIGNATURE	reduce by rule 63
-+ 	SHARING	reduce by rule 63
-+ 	INSTRUCTION	reduce by rule 63
-+ 	VLIW	reduce by rule 63
-+ 	SUPERSCALAR	reduce by rule 63
-+ 	FUN	reduce by rule 63
-+ 	VAL	reduce by rule 63
-+ 	INCLUDE	reduce by rule 63
-+ 	OPEN	reduce by rule 63
-+ 	LITTLE	reduce by rule 63
-+ 	BIG	reduce by rule 63
-+ 	PIPELINE	reduce by rule 63
-+ 	LOWERCASE	reduce by rule 63
-+ 	UPPERCASE	reduce by rule 63
-+ 	VERBATIM	reduce by rule 63
-+ 	RTL	reduce by rule 63
-+ 	NONFIX	reduce by rule 63
-+ 	INFIX	reduce by rule 63
-+ 	INFIXR	reduce by rule 63
-+ 	DEBUG	reduce by rule 63
-+ 	RESOURCE	reduce by rule 63
-+ 	CPU	reduce by rule 63
-+ 	LATENCY	reduce by rule 63
-+ 	EXCEPTION	reduce by rule 63
-+ 	EOF	reduce by rule 63
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 282: shift/reduce conflict (shift INT, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift WORD, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift SYMBOL, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift ID, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift CELLSET, reduce by rule 274)
-+ error:  state 282: shift/reduce conflict (shift LPAREN, reduce by rule 274)
-+ 
-+ state 282:
-+ 
-+ 	appexp : appexp . aexp2 
-+ 	exp : appexp .  (reduce by rule 274)
-+ 
-+ 	ARCHITECTURE	reduce by rule 274
-+ 	END	reduce by rule 274
-+ 	LOCAL	reduce by rule 274
-+ 	IN	reduce by rule 274
-+ 	OF	reduce by rule 274
-+ 	DATATYPE	reduce by rule 274
-+ 	TYPE	reduce by rule 274
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	AND	reduce by rule 274
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	RPAREN	reduce by rule 274
-+ 	LBRACKET	shift 295
-+ 	RBRACKET	reduce by rule 274
-+ 	LBRACE	shift 294
-+ 	RBRACE	reduce by rule 274
-+ 	SEMICOLON	reduce by rule 274
-+ 	LDQUOTE	shift 293
-+ 	RMETA	reduce by rule 274
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 274
-+ 	LOCATIONS	reduce by rule 274
-+ 	HASH	shift 291
-+ 	COMMA	reduce by rule 274
-+ 	COLON	reduce by rule 274
-+ 	BAR	reduce by rule 274
-+ 	DARROW	reduce by rule 274
-+ 	THEN	reduce by rule 274
-+ 	ELSE	reduce by rule 274
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	HANDLE	reduce by rule 274
-+ 	LET	shift 288
-+ 	STRUCTURE	reduce by rule 274
-+ 	FUNCTOR	reduce by rule 274
-+ 	SIGNATURE	reduce by rule 274
-+ 	SHARING	reduce by rule 274
-+ 	INSTRUCTION	reduce by rule 274
-+ 	VLIW	reduce by rule 274
-+ 	SUPERSCALAR	reduce by rule 274
-+ 	WITHTYPE	reduce by rule 274
-+ 	FUN	reduce by rule 274
-+ 	VAL	reduce by rule 274
-+ 	INCLUDE	reduce by rule 274
-+ 	OPEN	reduce by rule 274
-+ 	OP	shift 287
-+ 	LITTLE	reduce by rule 274
-+ 	BIG	reduce by rule 274
-+ 	PIPELINE	reduce by rule 274
-+ 	LOWERCASE	reduce by rule 274
-+ 	UPPERCASE	reduce by rule 274
-+ 	VERBATIM	reduce by rule 274
-+ 	RTL	reduce by rule 274
-+ 	SPAN	reduce by rule 274
-+ 	DELAYSLOT	reduce by rule 274
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	NONFIX	reduce by rule 274
-+ 	INFIX	reduce by rule 274
-+ 	INFIXR	reduce by rule 274
-+ 	DEBUG	reduce by rule 274
-+ 	ASM_COLON	reduce by rule 274
-+ 	MC_COLON	reduce by rule 274
-+ 	RTL_COLON	reduce by rule 274
-+ 	DELAYSLOT_COLON	reduce by rule 274
-+ 	NULLIFIED_COLON	reduce by rule 274
-+ 	PADDING_COLON	reduce by rule 274
-+ 	RESOURCE	reduce by rule 274
-+ 	CPU	reduce by rule 274
-+ 	LATENCY	reduce by rule 274
-+ 	EXCEPTION	reduce by rule 274
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 	EOF	reduce by rule 274
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 403
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 283:
-+ 
-+ 	aexp2 : aexp2 . AT LBRACKET slices RBRACKET 
-+ 	appexp : aexp2 .  (reduce by rule 272)
-+ 
-+ 	ARCHITECTURE	reduce by rule 272
-+ 	END	reduce by rule 272
-+ 	LOCAL	reduce by rule 272
-+ 	IN	reduce by rule 272
-+ 	OF	reduce by rule 272
-+ 	DATATYPE	reduce by rule 272
-+ 	TYPE	reduce by rule 272
-+ 	EQ	reduce by rule 272
-+ 	DOLLAR	reduce by rule 272
-+ 	TIMES	reduce by rule 272
-+ 	AND	reduce by rule 272
-+ 	DEREF	reduce by rule 272
-+ 	NOT	reduce by rule 272
-+ 	LLBRACKET	reduce by rule 272
-+ 	LHASHBRACKET	reduce by rule 272
-+ 	LPAREN	reduce by rule 272
-+ 	RPAREN	reduce by rule 272
-+ 	LBRACKET	reduce by rule 272
-+ 	RBRACKET	reduce by rule 272
-+ 	LBRACE	reduce by rule 272
-+ 	RBRACE	reduce by rule 272
-+ 	SEMICOLON	reduce by rule 272
-+ 	LDQUOTE	reduce by rule 272
-+ 	RMETA	reduce by rule 272
-+ 	CELLSET	reduce by rule 272
-+ 	STORAGE	reduce by rule 272
-+ 	LOCATIONS	reduce by rule 272
-+ 	HASH	reduce by rule 272
-+ 	COMMA	reduce by rule 272
-+ 	COLON	reduce by rule 272
-+ 	AT	shift 404
-+ 	BAR	reduce by rule 272
-+ 	DARROW	reduce by rule 272
-+ 	THEN	reduce by rule 272
-+ 	ELSE	reduce by rule 272
-+ 	TRUE	reduce by rule 272
-+ 	FALSE	reduce by rule 272
-+ 	HANDLE	reduce by rule 272
-+ 	LET	reduce by rule 272
-+ 	STRUCTURE	reduce by rule 272
-+ 	FUNCTOR	reduce by rule 272
-+ 	SIGNATURE	reduce by rule 272
-+ 	SHARING	reduce by rule 272
-+ 	INSTRUCTION	reduce by rule 272
-+ 	VLIW	reduce by rule 272
-+ 	SUPERSCALAR	reduce by rule 272
-+ 	WITHTYPE	reduce by rule 272
-+ 	FUN	reduce by rule 272
-+ 	VAL	reduce by rule 272
-+ 	INCLUDE	reduce by rule 272
-+ 	OPEN	reduce by rule 272
-+ 	OP	reduce by rule 272
-+ 	LITTLE	reduce by rule 272
-+ 	BIG	reduce by rule 272
-+ 	PIPELINE	reduce by rule 272
-+ 	LOWERCASE	reduce by rule 272
-+ 	UPPERCASE	reduce by rule 272
-+ 	VERBATIM	reduce by rule 272
-+ 	RTL	reduce by rule 272
-+ 	SPAN	reduce by rule 272
-+ 	DELAYSLOT	reduce by rule 272
-+ 	ALWAYS	reduce by rule 272
-+ 	NEVER	reduce by rule 272
-+ 	NONFIX	reduce by rule 272
-+ 	INFIX	reduce by rule 272
-+ 	INFIXR	reduce by rule 272
-+ 	DEBUG	reduce by rule 272
-+ 	ASM_COLON	reduce by rule 272
-+ 	MC_COLON	reduce by rule 272
-+ 	RTL_COLON	reduce by rule 272
-+ 	DELAYSLOT_COLON	reduce by rule 272
-+ 	NULLIFIED_COLON	reduce by rule 272
-+ 	PADDING_COLON	reduce by rule 272
-+ 	RESOURCE	reduce by rule 272
-+ 	CPU	reduce by rule 272
-+ 	LATENCY	reduce by rule 272
-+ 	EXCEPTION	reduce by rule 272
-+ 	ID	reduce by rule 272
-+ 	SYMBOL	reduce by rule 272
-+ 	WORD	reduce by rule 272
-+ 	INT	reduce by rule 272
-+ 	INTINF	reduce by rule 272
-+ 	REAL	reduce by rule 272
-+ 	STRING	reduce by rule 272
-+ 	CHAR	reduce by rule 272
-+ 	EOF	reduce by rule 272
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 284:
-+ 
-+ 	aexp2 : aexp .  (reduce by rule 262)
-+ 
-+ 	ARCHITECTURE	reduce by rule 262
-+ 	END	reduce by rule 262
-+ 	LOCAL	reduce by rule 262
-+ 	IN	reduce by rule 262
-+ 	OF	reduce by rule 262
-+ 	DATATYPE	reduce by rule 262
-+ 	TYPE	reduce by rule 262
-+ 	EQ	reduce by rule 262
-+ 	DOLLAR	reduce by rule 262
-+ 	TIMES	reduce by rule 262
-+ 	AND	reduce by rule 262
-+ 	DEREF	reduce by rule 262
-+ 	NOT	reduce by rule 262
-+ 	LLBRACKET	reduce by rule 262
-+ 	LHASHBRACKET	reduce by rule 262
-+ 	LPAREN	reduce by rule 262
-+ 	RPAREN	reduce by rule 262
-+ 	LBRACKET	reduce by rule 262
-+ 	RBRACKET	reduce by rule 262
-+ 	LBRACE	reduce by rule 262
-+ 	RBRACE	reduce by rule 262
-+ 	SEMICOLON	reduce by rule 262
-+ 	LDQUOTE	reduce by rule 262
-+ 	RMETA	reduce by rule 262
-+ 	CELLSET	reduce by rule 262
-+ 	STORAGE	reduce by rule 262
-+ 	LOCATIONS	reduce by rule 262
-+ 	HASH	reduce by rule 262
-+ 	COMMA	reduce by rule 262
-+ 	COLON	reduce by rule 262
-+ 	AT	reduce by rule 262
-+ 	BAR	reduce by rule 262
-+ 	DARROW	reduce by rule 262
-+ 	THEN	reduce by rule 262
-+ 	ELSE	reduce by rule 262
-+ 	TRUE	reduce by rule 262
-+ 	FALSE	reduce by rule 262
-+ 	HANDLE	reduce by rule 262
-+ 	LET	reduce by rule 262
-+ 	STRUCTURE	reduce by rule 262
-+ 	FUNCTOR	reduce by rule 262
-+ 	SIGNATURE	reduce by rule 262
-+ 	SHARING	reduce by rule 262
-+ 	INSTRUCTION	reduce by rule 262
-+ 	VLIW	reduce by rule 262
-+ 	SUPERSCALAR	reduce by rule 262
-+ 	WITHTYPE	reduce by rule 262
-+ 	FUN	reduce by rule 262
-+ 	VAL	reduce by rule 262
-+ 	INCLUDE	reduce by rule 262
-+ 	OPEN	reduce by rule 262
-+ 	OP	reduce by rule 262
-+ 	LITTLE	reduce by rule 262
-+ 	BIG	reduce by rule 262
-+ 	PIPELINE	reduce by rule 262
-+ 	LOWERCASE	reduce by rule 262
-+ 	UPPERCASE	reduce by rule 262
-+ 	VERBATIM	reduce by rule 262
-+ 	RTL	reduce by rule 262
-+ 	SPAN	reduce by rule 262
-+ 	DELAYSLOT	reduce by rule 262
-+ 	ALWAYS	reduce by rule 262
-+ 	NEVER	reduce by rule 262
-+ 	NONFIX	reduce by rule 262
-+ 	INFIX	reduce by rule 262
-+ 	INFIXR	reduce by rule 262
-+ 	DEBUG	reduce by rule 262
-+ 	ASM_COLON	reduce by rule 262
-+ 	MC_COLON	reduce by rule 262
-+ 	RTL_COLON	reduce by rule 262
-+ 	DELAYSLOT_COLON	reduce by rule 262
-+ 	NULLIFIED_COLON	reduce by rule 262
-+ 	PADDING_COLON	reduce by rule 262
-+ 	RESOURCE	reduce by rule 262
-+ 	CPU	reduce by rule 262
-+ 	LATENCY	reduce by rule 262
-+ 	EXCEPTION	reduce by rule 262
-+ 	ID	reduce by rule 262
-+ 	SYMBOL	reduce by rule 262
-+ 	WORD	reduce by rule 262
-+ 	INT	reduce by rule 262
-+ 	INTINF	reduce by rule 262
-+ 	REAL	reduce by rule 262
-+ 	STRING	reduce by rule 262
-+ 	CHAR	reduce by rule 262
-+ 	EOF	reduce by rule 262
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 285:
-+ 
-+ 	aexp : ident2 .  (reduce by rule 242)
-+ 
-+ 	ARCHITECTURE	reduce by rule 242
-+ 	END	reduce by rule 242
-+ 	LOCAL	reduce by rule 242
-+ 	IN	reduce by rule 242
-+ 	OF	reduce by rule 242
-+ 	DATATYPE	reduce by rule 242
-+ 	TYPE	reduce by rule 242
-+ 	EQ	reduce by rule 242
-+ 	DOLLAR	reduce by rule 242
-+ 	TIMES	reduce by rule 242
-+ 	AND	reduce by rule 242
-+ 	DEREF	reduce by rule 242
-+ 	NOT	reduce by rule 242
-+ 	LLBRACKET	reduce by rule 242
-+ 	LHASHBRACKET	reduce by rule 242
-+ 	LPAREN	reduce by rule 242
-+ 	RPAREN	reduce by rule 242
-+ 	LBRACKET	reduce by rule 242
-+ 	RBRACKET	reduce by rule 242
-+ 	LBRACE	reduce by rule 242
-+ 	RBRACE	reduce by rule 242
-+ 	SEMICOLON	reduce by rule 242
-+ 	LDQUOTE	reduce by rule 242
-+ 	RMETA	reduce by rule 242
-+ 	CELLSET	reduce by rule 242
-+ 	STORAGE	reduce by rule 242
-+ 	LOCATIONS	reduce by rule 242
-+ 	HASH	reduce by rule 242
-+ 	COMMA	reduce by rule 242
-+ 	COLON	reduce by rule 242
-+ 	AT	reduce by rule 242
-+ 	BAR	reduce by rule 242
-+ 	DARROW	reduce by rule 242
-+ 	THEN	reduce by rule 242
-+ 	ELSE	reduce by rule 242
-+ 	TRUE	reduce by rule 242
-+ 	FALSE	reduce by rule 242
-+ 	HANDLE	reduce by rule 242
-+ 	LET	reduce by rule 242
-+ 	STRUCTURE	reduce by rule 242
-+ 	FUNCTOR	reduce by rule 242
-+ 	SIGNATURE	reduce by rule 242
-+ 	SHARING	reduce by rule 242
-+ 	INSTRUCTION	reduce by rule 242
-+ 	VLIW	reduce by rule 242
-+ 	SUPERSCALAR	reduce by rule 242
-+ 	WITHTYPE	reduce by rule 242
-+ 	FUN	reduce by rule 242
-+ 	VAL	reduce by rule 242
-+ 	INCLUDE	reduce by rule 242
-+ 	OPEN	reduce by rule 242
-+ 	OP	reduce by rule 242
-+ 	LITTLE	reduce by rule 242
-+ 	BIG	reduce by rule 242
-+ 	PIPELINE	reduce by rule 242
-+ 	LOWERCASE	reduce by rule 242
-+ 	UPPERCASE	reduce by rule 242
-+ 	VERBATIM	reduce by rule 242
-+ 	RTL	reduce by rule 242
-+ 	SPAN	reduce by rule 242
-+ 	DELAYSLOT	reduce by rule 242
-+ 	ALWAYS	reduce by rule 242
-+ 	NEVER	reduce by rule 242
-+ 	NONFIX	reduce by rule 242
-+ 	INFIX	reduce by rule 242
-+ 	INFIXR	reduce by rule 242
-+ 	DEBUG	reduce by rule 242
-+ 	ASM_COLON	reduce by rule 242
-+ 	MC_COLON	reduce by rule 242
-+ 	RTL_COLON	reduce by rule 242
-+ 	DELAYSLOT_COLON	reduce by rule 242
-+ 	NULLIFIED_COLON	reduce by rule 242
-+ 	PADDING_COLON	reduce by rule 242
-+ 	RESOURCE	reduce by rule 242
-+ 	CPU	reduce by rule 242
-+ 	LATENCY	reduce by rule 242
-+ 	EXCEPTION	reduce by rule 242
-+ 	ID	reduce by rule 242
-+ 	SYMBOL	reduce by rule 242
-+ 	WORD	reduce by rule 242
-+ 	INT	reduce by rule 242
-+ 	INTINF	reduce by rule 242
-+ 	REAL	reduce by rule 242
-+ 	STRING	reduce by rule 242
-+ 	CHAR	reduce by rule 242
-+ 	EOF	reduce by rule 242
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 286:
-+ 
-+ 	aexp : sym . CONCAT LBRACKET exps RBRACKET 
-+ 	aexp : sym . CONCAT LBRACKET exps RBRACKET CONCAT sym 
-+ 	aexp2 : sym .  (reduce by rule 263)
-+ 
-+ 	ARCHITECTURE	reduce by rule 263
-+ 	END	reduce by rule 263
-+ 	LOCAL	reduce by rule 263
-+ 	IN	reduce by rule 263
-+ 	OF	reduce by rule 263
-+ 	DATATYPE	reduce by rule 263
-+ 	TYPE	reduce by rule 263
-+ 	EQ	reduce by rule 263
-+ 	DOLLAR	reduce by rule 263
-+ 	TIMES	reduce by rule 263
-+ 	AND	reduce by rule 263
-+ 	DEREF	reduce by rule 263
-+ 	NOT	reduce by rule 263
-+ 	CONCAT	shift 405
-+ 	LLBRACKET	reduce by rule 263
-+ 	LHASHBRACKET	reduce by rule 263
-+ 	LPAREN	reduce by rule 263
-+ 	RPAREN	reduce by rule 263
-+ 	LBRACKET	reduce by rule 263
-+ 	RBRACKET	reduce by rule 263
-+ 	LBRACE	reduce by rule 263
-+ 	RBRACE	reduce by rule 263
-+ 	SEMICOLON	reduce by rule 263
-+ 	LDQUOTE	reduce by rule 263
-+ 	RMETA	reduce by rule 263
-+ 	CELLSET	reduce by rule 263
-+ 	STORAGE	reduce by rule 263
-+ 	LOCATIONS	reduce by rule 263
-+ 	HASH	reduce by rule 263
-+ 	COMMA	reduce by rule 263
-+ 	COLON	reduce by rule 263
-+ 	AT	reduce by rule 263
-+ 	BAR	reduce by rule 263
-+ 	DARROW	reduce by rule 263
-+ 	THEN	reduce by rule 263
-+ 	ELSE	reduce by rule 263
-+ 	TRUE	reduce by rule 263
-+ 	FALSE	reduce by rule 263
-+ 	HANDLE	reduce by rule 263
-+ 	LET	reduce by rule 263
-+ 	STRUCTURE	reduce by rule 263
-+ 	FUNCTOR	reduce by rule 263
-+ 	SIGNATURE	reduce by rule 263
-+ 	SHARING	reduce by rule 263
-+ 	INSTRUCTION	reduce by rule 263
-+ 	VLIW	reduce by rule 263
-+ 	SUPERSCALAR	reduce by rule 263
-+ 	WITHTYPE	reduce by rule 263
-+ 	FUN	reduce by rule 263
-+ 	VAL	reduce by rule 263
-+ 	INCLUDE	reduce by rule 263
-+ 	OPEN	reduce by rule 263
-+ 	OP	reduce by rule 263
-+ 	LITTLE	reduce by rule 263
-+ 	BIG	reduce by rule 263
-+ 	PIPELINE	reduce by rule 263
-+ 	LOWERCASE	reduce by rule 263
-+ 	UPPERCASE	reduce by rule 263
-+ 	VERBATIM	reduce by rule 263
-+ 	RTL	reduce by rule 263
-+ 	SPAN	reduce by rule 263
-+ 	DELAYSLOT	reduce by rule 263
-+ 	ALWAYS	reduce by rule 263
-+ 	NEVER	reduce by rule 263
-+ 	NONFIX	reduce by rule 263
-+ 	INFIX	reduce by rule 263
-+ 	INFIXR	reduce by rule 263
-+ 	DEBUG	reduce by rule 263
-+ 	ASM_COLON	reduce by rule 263
-+ 	MC_COLON	reduce by rule 263
-+ 	RTL_COLON	reduce by rule 263
-+ 	DELAYSLOT_COLON	reduce by rule 263
-+ 	NULLIFIED_COLON	reduce by rule 263
-+ 	PADDING_COLON	reduce by rule 263
-+ 	RESOURCE	reduce by rule 263
-+ 	CPU	reduce by rule 263
-+ 	LATENCY	reduce by rule 263
-+ 	EXCEPTION	reduce by rule 263
-+ 	ID	reduce by rule 263
-+ 	SYMBOL	reduce by rule 263
-+ 	WORD	reduce by rule 263
-+ 	INT	reduce by rule 263
-+ 	INTINF	reduce by rule 263
-+ 	REAL	reduce by rule 263
-+ 	STRING	reduce by rule 263
-+ 	CHAR	reduce by rule 263
-+ 	EOF	reduce by rule 263
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 287:
-+ 
-+ 	aexp : OP . symb 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 
-+ 	symb	goto 406
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 288:
-+ 
-+ 	aexp : LET . decls IN expseq END 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	LOCAL	shift 38
-+ 	IN	reduce by rule 1
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 
-+ 	decls	goto 407
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 289:
-+ 
-+ 	exp : RAISE . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 408
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 290:
-+ 
-+ 	exp : IF . typedexp THEN typedexp ELSE exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 409
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 291:
-+ 
-+ 	aexp : HASH . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 410
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 292:
-+ 
-+ 	exp : FN . clauses 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 413
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	clause	goto 412
-+ 	clauses	goto 411
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 293:
-+ 
-+ 	asm_strings : LDQUOTE . asms RDQUOTE 
-+ 	asm_strings : LDQUOTE . asms RDQUOTE asm_strings 
-+ 
-+ 	LMETA	shift 417
-+ 	ASMTEXT	shift 416
-+ 
-+ 	asms	goto 415
-+ 	asm	goto 414
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 294:
-+ 
-+ 	aexp : LBRACE . labexps0 RBRACE 
-+ 
-+ 	RBRACE	reduce by rule 266
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 421
-+ 	labexps0	goto 420
-+ 	labexps	goto 419
-+ 	labexp	goto 418
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 295:
-+ 
-+ 	aexp : LBRACKET . exps RBRACKET 
-+ 	aexp : LBRACKET . exps RBRACKET CONCAT sym 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	RBRACKET	reduce by rule 288
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 424
-+ 	exps	goto 423
-+ 	exps1	goto 422
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 296:
-+ 
-+ 	aexp : LPAREN . symb RPAREN 
-+ 	aexp : LPAREN . RPAREN 
-+ 	aexp : LPAREN . typedexp RPAREN 
-+ 	aexp : LPAREN . exps2 RPAREN 
-+ 	aexp : LPAREN . expseq2 RPAREN 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	RPAREN	shift 429
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 428
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 427
-+ 	exps2	goto 426
-+ 	expseq2	goto 425
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 297:
-+ 
-+ 	aexp : LHASHBRACKET . exps RBRACKET 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	RBRACKET	reduce by rule 288
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 424
-+ 	exps	goto 430
-+ 	exps1	goto 422
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 298:
-+ 
-+ 	aexp : LLBRACKET . rtlterms RRBRACKET 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	HASH	shift 435
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	STRING	shift 91
-+ 
-+ 	id	goto 69
-+ 	sym	goto 434
-+ 	symb	goto 67
-+ 	string	goto 433
-+ 	rtlterm	goto 432
-+ 	rtlterms	goto 431
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 299:
-+ 
-+ 	aexp : DOLLAR . id LBRACKET exp region RBRACKET 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 436
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 300:
-+ 
-+ 	aexp2 : EQ .  (reduce by rule 264)
-+ 
-+ 	ARCHITECTURE	reduce by rule 264
-+ 	END	reduce by rule 264
-+ 	LOCAL	reduce by rule 264
-+ 	IN	reduce by rule 264
-+ 	OF	reduce by rule 264
-+ 	DATATYPE	reduce by rule 264
-+ 	TYPE	reduce by rule 264
-+ 	EQ	reduce by rule 264
-+ 	DOLLAR	reduce by rule 264
-+ 	TIMES	reduce by rule 264
-+ 	AND	reduce by rule 264
-+ 	DEREF	reduce by rule 264
-+ 	NOT	reduce by rule 264
-+ 	LLBRACKET	reduce by rule 264
-+ 	LHASHBRACKET	reduce by rule 264
-+ 	LPAREN	reduce by rule 264
-+ 	RPAREN	reduce by rule 264
-+ 	LBRACKET	reduce by rule 264
-+ 	RBRACKET	reduce by rule 264
-+ 	LBRACE	reduce by rule 264
-+ 	RBRACE	reduce by rule 264
-+ 	SEMICOLON	reduce by rule 264
-+ 	LDQUOTE	reduce by rule 264
-+ 	RMETA	reduce by rule 264
-+ 	CELLSET	reduce by rule 264
-+ 	STORAGE	reduce by rule 264
-+ 	LOCATIONS	reduce by rule 264
-+ 	HASH	reduce by rule 264
-+ 	COMMA	reduce by rule 264
-+ 	COLON	reduce by rule 264
-+ 	AT	reduce by rule 264
-+ 	BAR	reduce by rule 264
-+ 	DARROW	reduce by rule 264
-+ 	THEN	reduce by rule 264
-+ 	ELSE	reduce by rule 264
-+ 	TRUE	reduce by rule 264
-+ 	FALSE	reduce by rule 264
-+ 	HANDLE	reduce by rule 264
-+ 	LET	reduce by rule 264
-+ 	STRUCTURE	reduce by rule 264
-+ 	FUNCTOR	reduce by rule 264
-+ 	SIGNATURE	reduce by rule 264
-+ 	SHARING	reduce by rule 264
-+ 	INSTRUCTION	reduce by rule 264
-+ 	VLIW	reduce by rule 264
-+ 	SUPERSCALAR	reduce by rule 264
-+ 	WITHTYPE	reduce by rule 264
-+ 	FUN	reduce by rule 264
-+ 	VAL	reduce by rule 264
-+ 	INCLUDE	reduce by rule 264
-+ 	OPEN	reduce by rule 264
-+ 	OP	reduce by rule 264
-+ 	LITTLE	reduce by rule 264
-+ 	BIG	reduce by rule 264
-+ 	PIPELINE	reduce by rule 264
-+ 	LOWERCASE	reduce by rule 264
-+ 	UPPERCASE	reduce by rule 264
-+ 	VERBATIM	reduce by rule 264
-+ 	RTL	reduce by rule 264
-+ 	SPAN	reduce by rule 264
-+ 	DELAYSLOT	reduce by rule 264
-+ 	ALWAYS	reduce by rule 264
-+ 	NEVER	reduce by rule 264
-+ 	NONFIX	reduce by rule 264
-+ 	INFIX	reduce by rule 264
-+ 	INFIXR	reduce by rule 264
-+ 	DEBUG	reduce by rule 264
-+ 	ASM_COLON	reduce by rule 264
-+ 	MC_COLON	reduce by rule 264
-+ 	RTL_COLON	reduce by rule 264
-+ 	DELAYSLOT_COLON	reduce by rule 264
-+ 	NULLIFIED_COLON	reduce by rule 264
-+ 	PADDING_COLON	reduce by rule 264
-+ 	RESOURCE	reduce by rule 264
-+ 	CPU	reduce by rule 264
-+ 	LATENCY	reduce by rule 264
-+ 	EXCEPTION	reduce by rule 264
-+ 	ID	reduce by rule 264
-+ 	SYMBOL	reduce by rule 264
-+ 	WORD	reduce by rule 264
-+ 	INT	reduce by rule 264
-+ 	INTINF	reduce by rule 264
-+ 	REAL	reduce by rule 264
-+ 	STRING	reduce by rule 264
-+ 	CHAR	reduce by rule 264
-+ 	EOF	reduce by rule 264
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 301:
-+ 
-+ 	exp : CASE . typedexp OF clauses 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 437
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 302:
-+ 
-+ 	path : path DOT sym .  (reduce by rule 425)
-+ 
-+ 	ARCHITECTURE	reduce by rule 425
-+ 	END	reduce by rule 425
-+ 	LOCAL	reduce by rule 425
-+ 	IN	reduce by rule 425
-+ 	OF	reduce by rule 425
-+ 	DATATYPE	reduce by rule 425
-+ 	TYPE	reduce by rule 425
-+ 	EQ	reduce by rule 425
-+ 	DOLLAR	reduce by rule 425
-+ 	TIMES	reduce by rule 425
-+ 	AND	reduce by rule 425
-+ 	DEREF	reduce by rule 425
-+ 	NOT	reduce by rule 425
-+ 	LLBRACKET	reduce by rule 425
-+ 	LHASHBRACKET	reduce by rule 425
-+ 	LPAREN	reduce by rule 425
-+ 	RPAREN	reduce by rule 425
-+ 	LBRACKET	reduce by rule 425
-+ 	RBRACKET	reduce by rule 425
-+ 	LBRACE	reduce by rule 425
-+ 	RBRACE	reduce by rule 425
-+ 	SEMICOLON	reduce by rule 425
-+ 	LDQUOTE	reduce by rule 425
-+ 	RMETA	reduce by rule 425
-+ 	CELLSET	reduce by rule 425
-+ 	STORAGE	reduce by rule 425
-+ 	LOCATIONS	reduce by rule 425
-+ 	HASH	reduce by rule 425
-+ 	COMMA	reduce by rule 425
-+ 	COLON	reduce by rule 425
-+ 	DOT	reduce by rule 425
-+ 	AT	reduce by rule 425
-+ 	BAR	reduce by rule 425
-+ 	DARROW	reduce by rule 425
-+ 	THEN	reduce by rule 425
-+ 	ELSE	reduce by rule 425
-+ 	TRUE	reduce by rule 425
-+ 	FALSE	reduce by rule 425
-+ 	WILD	reduce by rule 425
-+ 	HANDLE	reduce by rule 425
-+ 	LET	reduce by rule 425
-+ 	STRUCTURE	reduce by rule 425
-+ 	FUNCTOR	reduce by rule 425
-+ 	SIGNATURE	reduce by rule 425
-+ 	WHERE	reduce by rule 425
-+ 	SHARING	reduce by rule 425
-+ 	INSTRUCTION	reduce by rule 425
-+ 	VLIW	reduce by rule 425
-+ 	SUPERSCALAR	reduce by rule 425
-+ 	WITHTYPE	reduce by rule 425
-+ 	FUN	reduce by rule 425
-+ 	VAL	reduce by rule 425
-+ 	INCLUDE	reduce by rule 425
-+ 	OPEN	reduce by rule 425
-+ 	OP	reduce by rule 425
-+ 	LITTLE	reduce by rule 425
-+ 	BIG	reduce by rule 425
-+ 	PIPELINE	reduce by rule 425
-+ 	LOWERCASE	reduce by rule 425
-+ 	UPPERCASE	reduce by rule 425
-+ 	VERBATIM	reduce by rule 425
-+ 	RTL	reduce by rule 425
-+ 	SPAN	reduce by rule 425
-+ 	DELAYSLOT	reduce by rule 425
-+ 	ALWAYS	reduce by rule 425
-+ 	NEVER	reduce by rule 425
-+ 	NONFIX	reduce by rule 425
-+ 	INFIX	reduce by rule 425
-+ 	INFIXR	reduce by rule 425
-+ 	DEBUG	reduce by rule 425
-+ 	ASM_COLON	reduce by rule 425
-+ 	MC_COLON	reduce by rule 425
-+ 	RTL_COLON	reduce by rule 425
-+ 	DELAYSLOT_COLON	reduce by rule 425
-+ 	NULLIFIED_COLON	reduce by rule 425
-+ 	PADDING_COLON	reduce by rule 425
-+ 	RESOURCE	reduce by rule 425
-+ 	CPU	reduce by rule 425
-+ 	LATENCY	reduce by rule 425
-+ 	EXCEPTION	reduce by rule 425
-+ 	ID	reduce by rule 425
-+ 	SYMBOL	reduce by rule 425
-+ 	WORD	reduce by rule 425
-+ 	INT	reduce by rule 425
-+ 	INTINF	reduce by rule 425
-+ 	REAL	reduce by rule 425
-+ 	STRING	reduce by rule 425
-+ 	CHAR	reduce by rule 425
-+ 	EOF	reduce by rule 425
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 303:
-+ 
-+ 	mymldecl : RTL syms COLON ty .  (reduce by rule 64)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 64
-+ 	END	reduce by rule 64
-+ 	LOCAL	reduce by rule 64
-+ 	IN	reduce by rule 64
-+ 	DATATYPE	reduce by rule 64
-+ 	TYPE	reduce by rule 64
-+ 	RPAREN	reduce by rule 64
-+ 	SEMICOLON	reduce by rule 64
-+ 	STORAGE	reduce by rule 64
-+ 	LOCATIONS	reduce by rule 64
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 64
-+ 	FUNCTOR	reduce by rule 64
-+ 	SIGNATURE	reduce by rule 64
-+ 	SHARING	reduce by rule 64
-+ 	INSTRUCTION	reduce by rule 64
-+ 	VLIW	reduce by rule 64
-+ 	SUPERSCALAR	reduce by rule 64
-+ 	FUN	reduce by rule 64
-+ 	VAL	reduce by rule 64
-+ 	INCLUDE	reduce by rule 64
-+ 	OPEN	reduce by rule 64
-+ 	LITTLE	reduce by rule 64
-+ 	BIG	reduce by rule 64
-+ 	PIPELINE	reduce by rule 64
-+ 	LOWERCASE	reduce by rule 64
-+ 	UPPERCASE	reduce by rule 64
-+ 	VERBATIM	reduce by rule 64
-+ 	RTL	reduce by rule 64
-+ 	NONFIX	reduce by rule 64
-+ 	INFIX	reduce by rule 64
-+ 	INFIXR	reduce by rule 64
-+ 	DEBUG	reduce by rule 64
-+ 	RESOURCE	reduce by rule 64
-+ 	CPU	reduce by rule 64
-+ 	LATENCY	reduce by rule 64
-+ 	EXCEPTION	reduce by rule 64
-+ 	EOF	reduce by rule 64
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 304:
-+ 
-+ 	apat : sym CONCAT LBRACKET . pats RBRACKET 
-+ 	apat : sym CONCAT LBRACKET . pats RBRACKET CONCAT sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	RBRACKET	reduce by rule 321
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 194
-+ 	pats	goto 438
-+ 	pats1	goto 192
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 305:
-+ 
-+ 	asapat : id AS asapat .  (reduce by rule 320)
-+ 
-+ 	EQ	reduce by rule 320
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 306:
-+ 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET 
-+ 	apat : sym . CONCAT LBRACKET pats RBRACKET CONCAT sym 
-+ 
-+ 	CONCAT	shift 184
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 307:
-+ 
-+ 	sym : id .  (reduce by rule 416)
-+ 	path : id . DOT sym 
-+ 	asapat : id . AS asapat 
-+ 
-+ 	CONCAT	reduce by rule 416
-+ 	DOT	shift 186
-+ 	AS	shift 185
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 308:
-+ 
-+ 	path : id DOT sym .  (reduce by rule 424)
-+ 
-+ 	ARCHITECTURE	reduce by rule 424
-+ 	END	reduce by rule 424
-+ 	LOCAL	reduce by rule 424
-+ 	IN	reduce by rule 424
-+ 	OF	reduce by rule 424
-+ 	DATATYPE	reduce by rule 424
-+ 	TYPE	reduce by rule 424
-+ 	EQ	reduce by rule 424
-+ 	DOLLAR	reduce by rule 424
-+ 	TIMES	reduce by rule 424
-+ 	AND	reduce by rule 424
-+ 	DEREF	reduce by rule 424
-+ 	NOT	reduce by rule 424
-+ 	LLBRACKET	reduce by rule 424
-+ 	LHASHBRACKET	reduce by rule 424
-+ 	LPAREN	reduce by rule 424
-+ 	RPAREN	reduce by rule 424
-+ 	LBRACKET	reduce by rule 424
-+ 	RBRACKET	reduce by rule 424
-+ 	LBRACE	reduce by rule 424
-+ 	RBRACE	reduce by rule 424
-+ 	SEMICOLON	reduce by rule 424
-+ 	LDQUOTE	reduce by rule 424
-+ 	RMETA	reduce by rule 424
-+ 	CELLSET	reduce by rule 424
-+ 	STORAGE	reduce by rule 424
-+ 	LOCATIONS	reduce by rule 424
-+ 	HASH	reduce by rule 424
-+ 	COMMA	reduce by rule 424
-+ 	COLON	reduce by rule 424
-+ 	DOT	reduce by rule 424
-+ 	AT	reduce by rule 424
-+ 	BAR	reduce by rule 424
-+ 	DARROW	reduce by rule 424
-+ 	THEN	reduce by rule 424
-+ 	ELSE	reduce by rule 424
-+ 	TRUE	reduce by rule 424
-+ 	FALSE	reduce by rule 424
-+ 	WILD	reduce by rule 424
-+ 	HANDLE	reduce by rule 424
-+ 	LET	reduce by rule 424
-+ 	STRUCTURE	reduce by rule 424
-+ 	FUNCTOR	reduce by rule 424
-+ 	SIGNATURE	reduce by rule 424
-+ 	WHERE	reduce by rule 424
-+ 	SHARING	reduce by rule 424
-+ 	INSTRUCTION	reduce by rule 424
-+ 	VLIW	reduce by rule 424
-+ 	SUPERSCALAR	reduce by rule 424
-+ 	WITHTYPE	reduce by rule 424
-+ 	FUN	reduce by rule 424
-+ 	VAL	reduce by rule 424
-+ 	INCLUDE	reduce by rule 424
-+ 	OPEN	reduce by rule 424
-+ 	OP	reduce by rule 424
-+ 	LITTLE	reduce by rule 424
-+ 	BIG	reduce by rule 424
-+ 	PIPELINE	reduce by rule 424
-+ 	LOWERCASE	reduce by rule 424
-+ 	UPPERCASE	reduce by rule 424
-+ 	VERBATIM	reduce by rule 424
-+ 	RTL	reduce by rule 424
-+ 	SPAN	reduce by rule 424
-+ 	DELAYSLOT	reduce by rule 424
-+ 	ALWAYS	reduce by rule 424
-+ 	NEVER	reduce by rule 424
-+ 	NONFIX	reduce by rule 424
-+ 	INFIX	reduce by rule 424
-+ 	INFIXR	reduce by rule 424
-+ 	DEBUG	reduce by rule 424
-+ 	ASM_COLON	reduce by rule 424
-+ 	MC_COLON	reduce by rule 424
-+ 	RTL_COLON	reduce by rule 424
-+ 	DELAYSLOT_COLON	reduce by rule 424
-+ 	NULLIFIED_COLON	reduce by rule 424
-+ 	PADDING_COLON	reduce by rule 424
-+ 	RESOURCE	reduce by rule 424
-+ 	CPU	reduce by rule 424
-+ 	LATENCY	reduce by rule 424
-+ 	EXCEPTION	reduce by rule 424
-+ 	ID	reduce by rule 424
-+ 	SYMBOL	reduce by rule 424
-+ 	WORD	reduce by rule 424
-+ 	INT	reduce by rule 424
-+ 	INTINF	reduce by rule 424
-+ 	REAL	reduce by rule 424
-+ 	STRING	reduce by rule 424
-+ 	CHAR	reduce by rule 424
-+ 	EOF	reduce by rule 424
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 309:
-+ 
-+ 	mymldecl : RTL id LBRACE labpats0 . RBRACE EQ exp 
-+ 
-+ 	RBRACE	shift 439
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 310:
-+ 
-+ 	apat : LBRACE labpats0 RBRACE .  (reduce by rule 302)
-+ 
-+ 	EQ	reduce by rule 302
-+ 	TIMES	reduce by rule 302
-+ 	AND	reduce by rule 302
-+ 	DEREF	reduce by rule 302
-+ 	NOT	reduce by rule 302
-+ 	LHASHBRACKET	reduce by rule 302
-+ 	LPAREN	reduce by rule 302
-+ 	RPAREN	reduce by rule 302
-+ 	LBRACKET	reduce by rule 302
-+ 	RBRACKET	reduce by rule 302
-+ 	LBRACE	reduce by rule 302
-+ 	RBRACE	reduce by rule 302
-+ 	CELLSET	reduce by rule 302
-+ 	COMMA	reduce by rule 302
-+ 	COLON	reduce by rule 302
-+ 	BAR	reduce by rule 302
-+ 	DARROW	reduce by rule 302
-+ 	TRUE	reduce by rule 302
-+ 	FALSE	reduce by rule 302
-+ 	WILD	reduce by rule 302
-+ 	WHERE	reduce by rule 302
-+ 	OP	reduce by rule 302
-+ 	ALWAYS	reduce by rule 302
-+ 	NEVER	reduce by rule 302
-+ 	EXCEPTION	reduce by rule 302
-+ 	ID	reduce by rule 302
-+ 	SYMBOL	reduce by rule 302
-+ 	WORD	reduce by rule 302
-+ 	INT	reduce by rule 302
-+ 	INTINF	reduce by rule 302
-+ 	REAL	reduce by rule 302
-+ 	STRING	reduce by rule 302
-+ 	CHAR	reduce by rule 302
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 311:
-+ 
-+ 	labpats : labpat COMMA . DOTDOT 
-+ 	labpats : labpat COMMA . labpats 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	DOTDOT	shift 441
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 191
-+ 	symb	goto 67
-+ 	labpat	goto 190
-+ 	labpats	goto 440
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 312:
-+ 
-+ 	labpat : sym AS . typedpat 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 442
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 313:
-+ 
-+ 	labpat : sym WHERE . typedexp 
-+ 	labpat : sym WHERE . typedexp IN typedpat 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 443
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 314:
-+ 
-+ 	labpat : sym EQ . typedpat 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 444
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 315:
-+ 
-+ 	apat : LBRACKET pats RBRACKET .  (reduce by rule 294)
-+ 	apat : LBRACKET pats RBRACKET . CONCAT sym 
-+ 
-+ 	EQ	reduce by rule 294
-+ 	TIMES	reduce by rule 294
-+ 	AND	reduce by rule 294
-+ 	DEREF	reduce by rule 294
-+ 	NOT	reduce by rule 294
-+ 	CONCAT	shift 445
-+ 	LHASHBRACKET	reduce by rule 294
-+ 	LPAREN	reduce by rule 294
-+ 	RPAREN	reduce by rule 294
-+ 	LBRACKET	reduce by rule 294
-+ 	RBRACKET	reduce by rule 294
-+ 	LBRACE	reduce by rule 294
-+ 	RBRACE	reduce by rule 294
-+ 	CELLSET	reduce by rule 294
-+ 	COMMA	reduce by rule 294
-+ 	COLON	reduce by rule 294
-+ 	BAR	reduce by rule 294
-+ 	DARROW	reduce by rule 294
-+ 	TRUE	reduce by rule 294
-+ 	FALSE	reduce by rule 294
-+ 	WILD	reduce by rule 294
-+ 	WHERE	reduce by rule 294
-+ 	OP	reduce by rule 294
-+ 	ALWAYS	reduce by rule 294
-+ 	NEVER	reduce by rule 294
-+ 	EXCEPTION	reduce by rule 294
-+ 	ID	reduce by rule 294
-+ 	SYMBOL	reduce by rule 294
-+ 	WORD	reduce by rule 294
-+ 	INT	reduce by rule 294
-+ 	INTINF	reduce by rule 294
-+ 	REAL	reduce by rule 294
-+ 	STRING	reduce by rule 294
-+ 	CHAR	reduce by rule 294
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 316:
-+ 
-+ 	typedpat : typedpat COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 446
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 317:
-+ 
-+ 	pats1 : typedpat COMMA . pats1 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 194
-+ 	pats1	goto 447
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 318:
-+ 
-+ 	apat : LPAREN andpats2 RPAREN .  (reduce by rule 298)
-+ 
-+ 	EQ	reduce by rule 298
-+ 	TIMES	reduce by rule 298
-+ 	AND	reduce by rule 298
-+ 	DEREF	reduce by rule 298
-+ 	NOT	reduce by rule 298
-+ 	LHASHBRACKET	reduce by rule 298
-+ 	LPAREN	reduce by rule 298
-+ 	RPAREN	reduce by rule 298
-+ 	LBRACKET	reduce by rule 298
-+ 	RBRACKET	reduce by rule 298
-+ 	LBRACE	reduce by rule 298
-+ 	RBRACE	reduce by rule 298
-+ 	CELLSET	reduce by rule 298
-+ 	COMMA	reduce by rule 298
-+ 	COLON	reduce by rule 298
-+ 	BAR	reduce by rule 298
-+ 	DARROW	reduce by rule 298
-+ 	TRUE	reduce by rule 298
-+ 	FALSE	reduce by rule 298
-+ 	WILD	reduce by rule 298
-+ 	WHERE	reduce by rule 298
-+ 	OP	reduce by rule 298
-+ 	ALWAYS	reduce by rule 298
-+ 	NEVER	reduce by rule 298
-+ 	EXCEPTION	reduce by rule 298
-+ 	ID	reduce by rule 298
-+ 	SYMBOL	reduce by rule 298
-+ 	WORD	reduce by rule 298
-+ 	INT	reduce by rule 298
-+ 	INTINF	reduce by rule 298
-+ 	REAL	reduce by rule 298
-+ 	STRING	reduce by rule 298
-+ 	CHAR	reduce by rule 298
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 319:
-+ 
-+ 	apat : LPAREN orpats2 RPAREN .  (reduce by rule 297)
-+ 
-+ 	EQ	reduce by rule 297
-+ 	TIMES	reduce by rule 297
-+ 	AND	reduce by rule 297
-+ 	DEREF	reduce by rule 297
-+ 	NOT	reduce by rule 297
-+ 	LHASHBRACKET	reduce by rule 297
-+ 	LPAREN	reduce by rule 297
-+ 	RPAREN	reduce by rule 297
-+ 	LBRACKET	reduce by rule 297
-+ 	RBRACKET	reduce by rule 297
-+ 	LBRACE	reduce by rule 297
-+ 	RBRACE	reduce by rule 297
-+ 	CELLSET	reduce by rule 297
-+ 	COMMA	reduce by rule 297
-+ 	COLON	reduce by rule 297
-+ 	BAR	reduce by rule 297
-+ 	DARROW	reduce by rule 297
-+ 	TRUE	reduce by rule 297
-+ 	FALSE	reduce by rule 297
-+ 	WILD	reduce by rule 297
-+ 	WHERE	reduce by rule 297
-+ 	OP	reduce by rule 297
-+ 	ALWAYS	reduce by rule 297
-+ 	NEVER	reduce by rule 297
-+ 	EXCEPTION	reduce by rule 297
-+ 	ID	reduce by rule 297
-+ 	SYMBOL	reduce by rule 297
-+ 	WORD	reduce by rule 297
-+ 	INT	reduce by rule 297
-+ 	INTINF	reduce by rule 297
-+ 	REAL	reduce by rule 297
-+ 	STRING	reduce by rule 297
-+ 	CHAR	reduce by rule 297
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 320:
-+ 
-+ 	apat : LPAREN pats2 RPAREN .  (reduce by rule 296)
-+ 
-+ 	EQ	reduce by rule 296
-+ 	TIMES	reduce by rule 296
-+ 	AND	reduce by rule 296
-+ 	DEREF	reduce by rule 296
-+ 	NOT	reduce by rule 296
-+ 	LHASHBRACKET	reduce by rule 296
-+ 	LPAREN	reduce by rule 296
-+ 	RPAREN	reduce by rule 296
-+ 	LBRACKET	reduce by rule 296
-+ 	RBRACKET	reduce by rule 296
-+ 	LBRACE	reduce by rule 296
-+ 	RBRACE	reduce by rule 296
-+ 	CELLSET	reduce by rule 296
-+ 	COMMA	reduce by rule 296
-+ 	COLON	reduce by rule 296
-+ 	BAR	reduce by rule 296
-+ 	DARROW	reduce by rule 296
-+ 	TRUE	reduce by rule 296
-+ 	FALSE	reduce by rule 296
-+ 	WILD	reduce by rule 296
-+ 	WHERE	reduce by rule 296
-+ 	OP	reduce by rule 296
-+ 	ALWAYS	reduce by rule 296
-+ 	NEVER	reduce by rule 296
-+ 	EXCEPTION	reduce by rule 296
-+ 	ID	reduce by rule 296
-+ 	SYMBOL	reduce by rule 296
-+ 	WORD	reduce by rule 296
-+ 	INT	reduce by rule 296
-+ 	INTINF	reduce by rule 296
-+ 	REAL	reduce by rule 296
-+ 	STRING	reduce by rule 296
-+ 	CHAR	reduce by rule 296
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 321:
-+ 
-+ 	apat : LPAREN typedpat WHERE . typedexp RPAREN 
-+ 	apat : LPAREN typedpat WHERE . typedexp IN typedpat RPAREN 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 448
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 322:
-+ 
-+ 	orpats2 : typedpat BAR . typedpat 
-+ 	orpats2 : typedpat BAR . orpats2 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 450
-+ 	orpats2	goto 449
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 323:
-+ 
-+ 	pats2 : typedpat COMMA . pats1 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 194
-+ 	pats1	goto 451
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 324:
-+ 
-+ 	apat : LPAREN typedpat RPAREN .  (reduce by rule 299)
-+ 
-+ 	EQ	reduce by rule 299
-+ 	TIMES	reduce by rule 299
-+ 	AND	reduce by rule 299
-+ 	DEREF	reduce by rule 299
-+ 	NOT	reduce by rule 299
-+ 	LHASHBRACKET	reduce by rule 299
-+ 	LPAREN	reduce by rule 299
-+ 	RPAREN	reduce by rule 299
-+ 	LBRACKET	reduce by rule 299
-+ 	RBRACKET	reduce by rule 299
-+ 	LBRACE	reduce by rule 299
-+ 	RBRACE	reduce by rule 299
-+ 	CELLSET	reduce by rule 299
-+ 	COMMA	reduce by rule 299
-+ 	COLON	reduce by rule 299
-+ 	BAR	reduce by rule 299
-+ 	DARROW	reduce by rule 299
-+ 	TRUE	reduce by rule 299
-+ 	FALSE	reduce by rule 299
-+ 	WILD	reduce by rule 299
-+ 	WHERE	reduce by rule 299
-+ 	OP	reduce by rule 299
-+ 	ALWAYS	reduce by rule 299
-+ 	NEVER	reduce by rule 299
-+ 	EXCEPTION	reduce by rule 299
-+ 	ID	reduce by rule 299
-+ 	SYMBOL	reduce by rule 299
-+ 	WORD	reduce by rule 299
-+ 	INT	reduce by rule 299
-+ 	INTINF	reduce by rule 299
-+ 	REAL	reduce by rule 299
-+ 	STRING	reduce by rule 299
-+ 	CHAR	reduce by rule 299
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 325:
-+ 
-+ 	andpats2 : typedpat AND . typedpat 
-+ 	andpats2 : typedpat AND . andpats2 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 453
-+ 	andpats2	goto 452
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 326:
-+ 
-+ 	apat : LHASHBRACKET pats RBRACKET .  (reduce by rule 295)
-+ 
-+ 	EQ	reduce by rule 295
-+ 	TIMES	reduce by rule 295
-+ 	AND	reduce by rule 295
-+ 	DEREF	reduce by rule 295
-+ 	NOT	reduce by rule 295
-+ 	LHASHBRACKET	reduce by rule 295
-+ 	LPAREN	reduce by rule 295
-+ 	RPAREN	reduce by rule 295
-+ 	LBRACKET	reduce by rule 295
-+ 	RBRACKET	reduce by rule 295
-+ 	LBRACE	reduce by rule 295
-+ 	RBRACE	reduce by rule 295
-+ 	CELLSET	reduce by rule 295
-+ 	COMMA	reduce by rule 295
-+ 	COLON	reduce by rule 295
-+ 	BAR	reduce by rule 295
-+ 	DARROW	reduce by rule 295
-+ 	TRUE	reduce by rule 295
-+ 	FALSE	reduce by rule 295
-+ 	WILD	reduce by rule 295
-+ 	WHERE	reduce by rule 295
-+ 	OP	reduce by rule 295
-+ 	ALWAYS	reduce by rule 295
-+ 	NEVER	reduce by rule 295
-+ 	EXCEPTION	reduce by rule 295
-+ 	ID	reduce by rule 295
-+ 	SYMBOL	reduce by rule 295
-+ 	WORD	reduce by rule 295
-+ 	INT	reduce by rule 295
-+ 	INTINF	reduce by rule 295
-+ 	REAL	reduce by rule 295
-+ 	STRING	reduce by rule 295
-+ 	CHAR	reduce by rule 295
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 327:
-+ 
-+ 	pipelineclauses : pipelineclause BAR pipelineclauses .  (reduce by rule 43)
-+ 
-+ 	ARCHITECTURE	reduce by rule 43
-+ 	END	reduce by rule 43
-+ 	LOCAL	reduce by rule 43
-+ 	IN	reduce by rule 43
-+ 	DATATYPE	reduce by rule 43
-+ 	TYPE	reduce by rule 43
-+ 	AND	reduce by rule 43
-+ 	RPAREN	reduce by rule 43
-+ 	SEMICOLON	reduce by rule 43
-+ 	STORAGE	reduce by rule 43
-+ 	LOCATIONS	reduce by rule 43
-+ 	STRUCTURE	reduce by rule 43
-+ 	FUNCTOR	reduce by rule 43
-+ 	SIGNATURE	reduce by rule 43
-+ 	SHARING	reduce by rule 43
-+ 	INSTRUCTION	reduce by rule 43
-+ 	VLIW	reduce by rule 43
-+ 	SUPERSCALAR	reduce by rule 43
-+ 	FUN	reduce by rule 43
-+ 	VAL	reduce by rule 43
-+ 	INCLUDE	reduce by rule 43
-+ 	OPEN	reduce by rule 43
-+ 	LITTLE	reduce by rule 43
-+ 	BIG	reduce by rule 43
-+ 	PIPELINE	reduce by rule 43
-+ 	LOWERCASE	reduce by rule 43
-+ 	UPPERCASE	reduce by rule 43
-+ 	VERBATIM	reduce by rule 43
-+ 	RTL	reduce by rule 43
-+ 	NONFIX	reduce by rule 43
-+ 	INFIX	reduce by rule 43
-+ 	INFIXR	reduce by rule 43
-+ 	DEBUG	reduce by rule 43
-+ 	RESOURCE	reduce by rule 43
-+ 	CPU	reduce by rule 43
-+ 	LATENCY	reduce by rule 43
-+ 	EXCEPTION	reduce by rule 43
-+ 	EOF	reduce by rule 43
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 328:
-+ 
-+ 	pipelinebinds : pipelinebind AND pipelinebinds .  (reduce by rule 40)
-+ 
-+ 	ARCHITECTURE	reduce by rule 40
-+ 	END	reduce by rule 40
-+ 	LOCAL	reduce by rule 40
-+ 	IN	reduce by rule 40
-+ 	DATATYPE	reduce by rule 40
-+ 	TYPE	reduce by rule 40
-+ 	RPAREN	reduce by rule 40
-+ 	SEMICOLON	reduce by rule 40
-+ 	STORAGE	reduce by rule 40
-+ 	LOCATIONS	reduce by rule 40
-+ 	STRUCTURE	reduce by rule 40
-+ 	FUNCTOR	reduce by rule 40
-+ 	SIGNATURE	reduce by rule 40
-+ 	SHARING	reduce by rule 40
-+ 	INSTRUCTION	reduce by rule 40
-+ 	VLIW	reduce by rule 40
-+ 	SUPERSCALAR	reduce by rule 40
-+ 	FUN	reduce by rule 40
-+ 	VAL	reduce by rule 40
-+ 	INCLUDE	reduce by rule 40
-+ 	OPEN	reduce by rule 40
-+ 	LITTLE	reduce by rule 40
-+ 	BIG	reduce by rule 40
-+ 	PIPELINE	reduce by rule 40
-+ 	LOWERCASE	reduce by rule 40
-+ 	UPPERCASE	reduce by rule 40
-+ 	VERBATIM	reduce by rule 40
-+ 	RTL	reduce by rule 40
-+ 	NONFIX	reduce by rule 40
-+ 	INFIX	reduce by rule 40
-+ 	INFIXR	reduce by rule 40
-+ 	DEBUG	reduce by rule 40
-+ 	RESOURCE	reduce by rule 40
-+ 	CPU	reduce by rule 40
-+ 	LATENCY	reduce by rule 40
-+ 	EXCEPTION	reduce by rule 40
-+ 	EOF	reduce by rule 40
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 329:
-+ 
-+ 	pipelineclause : id pat EQ . LBRACKET cycles0 RBRACKET 
-+ 
-+ 	LBRACKET	shift 454
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 330:
-+ 
-+ 	sigexp : sigexp WHERE sigsubs .  (reduce by rule 92)
-+ 
-+ 	ARCHITECTURE	reduce by rule 92
-+ 	END	reduce by rule 92
-+ 	LOCAL	reduce by rule 92
-+ 	IN	reduce by rule 92
-+ 	DATATYPE	reduce by rule 92
-+ 	TYPE	reduce by rule 92
-+ 	EQ	reduce by rule 92
-+ 	RPAREN	reduce by rule 92
-+ 	SEMICOLON	reduce by rule 92
-+ 	STORAGE	reduce by rule 92
-+ 	LOCATIONS	reduce by rule 92
-+ 	STRUCTURE	reduce by rule 92
-+ 	FUNCTOR	reduce by rule 92
-+ 	SIGNATURE	reduce by rule 92
-+ 	WHERE	reduce by rule 92
-+ 	SHARING	reduce by rule 92
-+ 	INSTRUCTION	reduce by rule 92
-+ 	VLIW	reduce by rule 92
-+ 	SUPERSCALAR	reduce by rule 92
-+ 	FUN	reduce by rule 92
-+ 	VAL	reduce by rule 92
-+ 	INCLUDE	reduce by rule 92
-+ 	OPEN	reduce by rule 92
-+ 	LITTLE	reduce by rule 92
-+ 	BIG	reduce by rule 92
-+ 	PIPELINE	reduce by rule 92
-+ 	LOWERCASE	reduce by rule 92
-+ 	UPPERCASE	reduce by rule 92
-+ 	VERBATIM	reduce by rule 92
-+ 	RTL	reduce by rule 92
-+ 	NONFIX	reduce by rule 92
-+ 	INFIX	reduce by rule 92
-+ 	INFIXR	reduce by rule 92
-+ 	DEBUG	reduce by rule 92
-+ 	RESOURCE	reduce by rule 92
-+ 	CPU	reduce by rule 92
-+ 	LATENCY	reduce by rule 92
-+ 	EXCEPTION	reduce by rule 92
-+ 	EOF	reduce by rule 92
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 331:
-+ 
-+ 	sigsubs : sigsub .  (reduce by rule 95)
-+ 	sigsubs : sigsub . AND sigsubs 
-+ 
-+ 	ARCHITECTURE	reduce by rule 95
-+ 	END	reduce by rule 95
-+ 	LOCAL	reduce by rule 95
-+ 	IN	reduce by rule 95
-+ 	DATATYPE	reduce by rule 95
-+ 	TYPE	reduce by rule 95
-+ 	EQ	reduce by rule 95
-+ 	AND	shift 455
-+ 	RPAREN	reduce by rule 95
-+ 	SEMICOLON	reduce by rule 95
-+ 	STORAGE	reduce by rule 95
-+ 	LOCATIONS	reduce by rule 95
-+ 	STRUCTURE	reduce by rule 95
-+ 	FUNCTOR	reduce by rule 95
-+ 	SIGNATURE	reduce by rule 95
-+ 	WHERE	reduce by rule 95
-+ 	SHARING	reduce by rule 95
-+ 	INSTRUCTION	reduce by rule 95
-+ 	VLIW	reduce by rule 95
-+ 	SUPERSCALAR	reduce by rule 95
-+ 	FUN	reduce by rule 95
-+ 	VAL	reduce by rule 95
-+ 	INCLUDE	reduce by rule 95
-+ 	OPEN	reduce by rule 95
-+ 	LITTLE	reduce by rule 95
-+ 	BIG	reduce by rule 95
-+ 	PIPELINE	reduce by rule 95
-+ 	LOWERCASE	reduce by rule 95
-+ 	UPPERCASE	reduce by rule 95
-+ 	VERBATIM	reduce by rule 95
-+ 	RTL	reduce by rule 95
-+ 	NONFIX	reduce by rule 95
-+ 	INFIX	reduce by rule 95
-+ 	INFIXR	reduce by rule 95
-+ 	DEBUG	reduce by rule 95
-+ 	RESOURCE	reduce by rule 95
-+ 	CPU	reduce by rule 95
-+ 	LATENCY	reduce by rule 95
-+ 	EXCEPTION	reduce by rule 95
-+ 	EOF	reduce by rule 95
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 332:
-+ 
-+ 	sigsub : ident . EQ structexp 
-+ 
-+ 	EQ	shift 456
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 333:
-+ 
-+ 	sigsub : TYPE . ident EQ ty 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 457
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 334:
-+ 
-+ 	sigexp : SIG decls END .  (reduce by rule 91)
-+ 
-+ 	ARCHITECTURE	reduce by rule 91
-+ 	END	reduce by rule 91
-+ 	LOCAL	reduce by rule 91
-+ 	IN	reduce by rule 91
-+ 	DATATYPE	reduce by rule 91
-+ 	TYPE	reduce by rule 91
-+ 	EQ	reduce by rule 91
-+ 	RPAREN	reduce by rule 91
-+ 	SEMICOLON	reduce by rule 91
-+ 	STORAGE	reduce by rule 91
-+ 	LOCATIONS	reduce by rule 91
-+ 	STRUCTURE	reduce by rule 91
-+ 	FUNCTOR	reduce by rule 91
-+ 	SIGNATURE	reduce by rule 91
-+ 	WHERE	reduce by rule 91
-+ 	SHARING	reduce by rule 91
-+ 	INSTRUCTION	reduce by rule 91
-+ 	VLIW	reduce by rule 91
-+ 	SUPERSCALAR	reduce by rule 91
-+ 	FUN	reduce by rule 91
-+ 	VAL	reduce by rule 91
-+ 	INCLUDE	reduce by rule 91
-+ 	OPEN	reduce by rule 91
-+ 	LITTLE	reduce by rule 91
-+ 	BIG	reduce by rule 91
-+ 	PIPELINE	reduce by rule 91
-+ 	LOWERCASE	reduce by rule 91
-+ 	UPPERCASE	reduce by rule 91
-+ 	VERBATIM	reduce by rule 91
-+ 	RTL	reduce by rule 91
-+ 	NONFIX	reduce by rule 91
-+ 	INFIX	reduce by rule 91
-+ 	INFIXR	reduce by rule 91
-+ 	DEBUG	reduce by rule 91
-+ 	RESOURCE	reduce by rule 91
-+ 	CPU	reduce by rule 91
-+ 	LATENCY	reduce by rule 91
-+ 	EXCEPTION	reduce by rule 91
-+ 	EOF	reduce by rule 91
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 335:
-+ 
-+ 	valbinds : valbind AND valbinds .  (reduce by rule 232)
-+ 
-+ 	ARCHITECTURE	reduce by rule 232
-+ 	END	reduce by rule 232
-+ 	LOCAL	reduce by rule 232
-+ 	IN	reduce by rule 232
-+ 	DATATYPE	reduce by rule 232
-+ 	TYPE	reduce by rule 232
-+ 	RPAREN	reduce by rule 232
-+ 	SEMICOLON	reduce by rule 232
-+ 	STORAGE	reduce by rule 232
-+ 	LOCATIONS	reduce by rule 232
-+ 	STRUCTURE	reduce by rule 232
-+ 	FUNCTOR	reduce by rule 232
-+ 	SIGNATURE	reduce by rule 232
-+ 	SHARING	reduce by rule 232
-+ 	INSTRUCTION	reduce by rule 232
-+ 	VLIW	reduce by rule 232
-+ 	SUPERSCALAR	reduce by rule 232
-+ 	FUN	reduce by rule 232
-+ 	VAL	reduce by rule 232
-+ 	INCLUDE	reduce by rule 232
-+ 	OPEN	reduce by rule 232
-+ 	LITTLE	reduce by rule 232
-+ 	BIG	reduce by rule 232
-+ 	PIPELINE	reduce by rule 232
-+ 	LOWERCASE	reduce by rule 232
-+ 	UPPERCASE	reduce by rule 232
-+ 	VERBATIM	reduce by rule 232
-+ 	RTL	reduce by rule 232
-+ 	NONFIX	reduce by rule 232
-+ 	INFIX	reduce by rule 232
-+ 	INFIXR	reduce by rule 232
-+ 	DEBUG	reduce by rule 232
-+ 	RESOURCE	reduce by rule 232
-+ 	CPU	reduce by rule 232
-+ 	LATENCY	reduce by rule 232
-+ 	EXCEPTION	reduce by rule 232
-+ 	EOF	reduce by rule 232
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 336:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	valbind : pat EQ typedexp .  (reduce by rule 233)
-+ 
-+ 	ARCHITECTURE	reduce by rule 233
-+ 	END	reduce by rule 233
-+ 	LOCAL	reduce by rule 233
-+ 	IN	reduce by rule 233
-+ 	DATATYPE	reduce by rule 233
-+ 	TYPE	reduce by rule 233
-+ 	AND	reduce by rule 233
-+ 	RPAREN	reduce by rule 233
-+ 	SEMICOLON	reduce by rule 233
-+ 	STORAGE	reduce by rule 233
-+ 	LOCATIONS	reduce by rule 233
-+ 	COLON	shift 458
-+ 	STRUCTURE	reduce by rule 233
-+ 	FUNCTOR	reduce by rule 233
-+ 	SIGNATURE	reduce by rule 233
-+ 	SHARING	reduce by rule 233
-+ 	INSTRUCTION	reduce by rule 233
-+ 	VLIW	reduce by rule 233
-+ 	SUPERSCALAR	reduce by rule 233
-+ 	FUN	reduce by rule 233
-+ 	VAL	reduce by rule 233
-+ 	INCLUDE	reduce by rule 233
-+ 	OPEN	reduce by rule 233
-+ 	LITTLE	reduce by rule 233
-+ 	BIG	reduce by rule 233
-+ 	PIPELINE	reduce by rule 233
-+ 	LOWERCASE	reduce by rule 233
-+ 	UPPERCASE	reduce by rule 233
-+ 	VERBATIM	reduce by rule 233
-+ 	RTL	reduce by rule 233
-+ 	NONFIX	reduce by rule 233
-+ 	INFIX	reduce by rule 233
-+ 	INFIXR	reduce by rule 233
-+ 	DEBUG	reduce by rule 233
-+ 	RESOURCE	reduce by rule 233
-+ 	CPU	reduce by rule 233
-+ 	LATENCY	reduce by rule 233
-+ 	EXCEPTION	reduce by rule 233
-+ 	EOF	reduce by rule 233
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 337:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	typedexp : exp .  (reduce by rule 280)
-+ 
-+ 	ARCHITECTURE	reduce by rule 280
-+ 	END	reduce by rule 280
-+ 	LOCAL	reduce by rule 280
-+ 	IN	reduce by rule 280
-+ 	OF	reduce by rule 280
-+ 	DATATYPE	reduce by rule 280
-+ 	TYPE	reduce by rule 280
-+ 	AND	reduce by rule 280
-+ 	RPAREN	reduce by rule 280
-+ 	RBRACKET	reduce by rule 280
-+ 	RBRACE	reduce by rule 280
-+ 	SEMICOLON	reduce by rule 280
-+ 	STORAGE	reduce by rule 280
-+ 	LOCATIONS	reduce by rule 280
-+ 	COMMA	reduce by rule 280
-+ 	COLON	reduce by rule 280
-+ 	BAR	reduce by rule 280
-+ 	DARROW	reduce by rule 280
-+ 	THEN	reduce by rule 280
-+ 	ELSE	reduce by rule 280
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 280
-+ 	FUNCTOR	reduce by rule 280
-+ 	SIGNATURE	reduce by rule 280
-+ 	SHARING	reduce by rule 280
-+ 	INSTRUCTION	reduce by rule 280
-+ 	VLIW	reduce by rule 280
-+ 	SUPERSCALAR	reduce by rule 280
-+ 	FUN	reduce by rule 280
-+ 	VAL	reduce by rule 280
-+ 	INCLUDE	reduce by rule 280
-+ 	OPEN	reduce by rule 280
-+ 	LITTLE	reduce by rule 280
-+ 	BIG	reduce by rule 280
-+ 	PIPELINE	reduce by rule 280
-+ 	LOWERCASE	reduce by rule 280
-+ 	UPPERCASE	reduce by rule 280
-+ 	VERBATIM	reduce by rule 280
-+ 	RTL	reduce by rule 280
-+ 	NONFIX	reduce by rule 280
-+ 	INFIX	reduce by rule 280
-+ 	INFIXR	reduce by rule 280
-+ 	DEBUG	reduce by rule 280
-+ 	RESOURCE	reduce by rule 280
-+ 	CPU	reduce by rule 280
-+ 	LATENCY	reduce by rule 280
-+ 	EXCEPTION	reduce by rule 280
-+ 	EOF	reduce by rule 280
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 338:
-+ 
-+ 	mymldecl : VAL syms COLON ty .  (reduce by rule 66)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 66
-+ 	END	reduce by rule 66
-+ 	LOCAL	reduce by rule 66
-+ 	IN	reduce by rule 66
-+ 	DATATYPE	reduce by rule 66
-+ 	TYPE	reduce by rule 66
-+ 	RPAREN	reduce by rule 66
-+ 	SEMICOLON	reduce by rule 66
-+ 	STORAGE	reduce by rule 66
-+ 	LOCATIONS	reduce by rule 66
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 66
-+ 	FUNCTOR	reduce by rule 66
-+ 	SIGNATURE	reduce by rule 66
-+ 	SHARING	reduce by rule 66
-+ 	INSTRUCTION	reduce by rule 66
-+ 	VLIW	reduce by rule 66
-+ 	SUPERSCALAR	reduce by rule 66
-+ 	FUN	reduce by rule 66
-+ 	VAL	reduce by rule 66
-+ 	INCLUDE	reduce by rule 66
-+ 	OPEN	reduce by rule 66
-+ 	LITTLE	reduce by rule 66
-+ 	BIG	reduce by rule 66
-+ 	PIPELINE	reduce by rule 66
-+ 	LOWERCASE	reduce by rule 66
-+ 	UPPERCASE	reduce by rule 66
-+ 	VERBATIM	reduce by rule 66
-+ 	RTL	reduce by rule 66
-+ 	NONFIX	reduce by rule 66
-+ 	INFIX	reduce by rule 66
-+ 	INFIXR	reduce by rule 66
-+ 	DEBUG	reduce by rule 66
-+ 	RESOURCE	reduce by rule 66
-+ 	CPU	reduce by rule 66
-+ 	LATENCY	reduce by rule 66
-+ 	EXCEPTION	reduce by rule 66
-+ 	EOF	reduce by rule 66
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 339:
-+ 
-+ 	pat : id AS pat .  (reduce by rule 316)
-+ 
-+ 	EQ	reduce by rule 316
-+ 	AND	reduce by rule 316
-+ 	RPAREN	reduce by rule 316
-+ 	RBRACKET	reduce by rule 316
-+ 	RBRACE	reduce by rule 316
-+ 	COMMA	reduce by rule 316
-+ 	COLON	reduce by rule 316
-+ 	BAR	reduce by rule 316
-+ 	DARROW	reduce by rule 316
-+ 	WHERE	reduce by rule 316
-+ 	EXCEPTION	reduce by rule 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 340:
-+ 
-+ 	funbinds : funbind AND funbinds .  (reduce by rule 229)
-+ 
-+ 	ARCHITECTURE	reduce by rule 229
-+ 	END	reduce by rule 229
-+ 	LOCAL	reduce by rule 229
-+ 	IN	reduce by rule 229
-+ 	DATATYPE	reduce by rule 229
-+ 	TYPE	reduce by rule 229
-+ 	RPAREN	reduce by rule 229
-+ 	SEMICOLON	reduce by rule 229
-+ 	STORAGE	reduce by rule 229
-+ 	LOCATIONS	reduce by rule 229
-+ 	STRUCTURE	reduce by rule 229
-+ 	FUNCTOR	reduce by rule 229
-+ 	SIGNATURE	reduce by rule 229
-+ 	SHARING	reduce by rule 229
-+ 	INSTRUCTION	reduce by rule 229
-+ 	VLIW	reduce by rule 229
-+ 	SUPERSCALAR	reduce by rule 229
-+ 	FUN	reduce by rule 229
-+ 	VAL	reduce by rule 229
-+ 	INCLUDE	reduce by rule 229
-+ 	OPEN	reduce by rule 229
-+ 	LITTLE	reduce by rule 229
-+ 	BIG	reduce by rule 229
-+ 	PIPELINE	reduce by rule 229
-+ 	LOWERCASE	reduce by rule 229
-+ 	UPPERCASE	reduce by rule 229
-+ 	VERBATIM	reduce by rule 229
-+ 	RTL	reduce by rule 229
-+ 	NONFIX	reduce by rule 229
-+ 	INFIX	reduce by rule 229
-+ 	INFIXR	reduce by rule 229
-+ 	DEBUG	reduce by rule 229
-+ 	RESOURCE	reduce by rule 229
-+ 	CPU	reduce by rule 229
-+ 	LATENCY	reduce by rule 229
-+ 	EXCEPTION	reduce by rule 229
-+ 	EOF	reduce by rule 229
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 341:
-+ 
-+ 	funclauses : funclause BAR funclauses .  (reduce by rule 349)
-+ 
-+ 	ARCHITECTURE	reduce by rule 349
-+ 	END	reduce by rule 349
-+ 	LOCAL	reduce by rule 349
-+ 	IN	reduce by rule 349
-+ 	DATATYPE	reduce by rule 349
-+ 	TYPE	reduce by rule 349
-+ 	AND	reduce by rule 349
-+ 	RPAREN	reduce by rule 349
-+ 	SEMICOLON	reduce by rule 349
-+ 	STORAGE	reduce by rule 349
-+ 	LOCATIONS	reduce by rule 349
-+ 	STRUCTURE	reduce by rule 349
-+ 	FUNCTOR	reduce by rule 349
-+ 	SIGNATURE	reduce by rule 349
-+ 	SHARING	reduce by rule 349
-+ 	INSTRUCTION	reduce by rule 349
-+ 	VLIW	reduce by rule 349
-+ 	SUPERSCALAR	reduce by rule 349
-+ 	FUN	reduce by rule 349
-+ 	VAL	reduce by rule 349
-+ 	INCLUDE	reduce by rule 349
-+ 	OPEN	reduce by rule 349
-+ 	LITTLE	reduce by rule 349
-+ 	BIG	reduce by rule 349
-+ 	PIPELINE	reduce by rule 349
-+ 	LOWERCASE	reduce by rule 349
-+ 	UPPERCASE	reduce by rule 349
-+ 	VERBATIM	reduce by rule 349
-+ 	RTL	reduce by rule 349
-+ 	NONFIX	reduce by rule 349
-+ 	INFIX	reduce by rule 349
-+ 	INFIXR	reduce by rule 349
-+ 	DEBUG	reduce by rule 349
-+ 	RESOURCE	reduce by rule 349
-+ 	CPU	reduce by rule 349
-+ 	LATENCY	reduce by rule 349
-+ 	EXCEPTION	reduce by rule 349
-+ 	EOF	reduce by rule 349
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 342:
-+ 
-+ 	funclause : apppat funguard return_ty . cont EQ typedexp 
-+ 
-+ 	EQ	reduce by rule 337
-+ 	EXCEPTION	shift 460
-+ 
-+ 	cont	goto 459
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 343:
-+ 
-+ 	return_ty : COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 461
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 344:
-+ 
-+ 	funguard : WHERE LPAREN . typedexp RPAREN 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 462
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 345:
-+ 
-+ 	consbinds : consbind BAR consbinds .  (reduce by rule 143)
-+ 
-+ 	ARCHITECTURE	reduce by rule 143
-+ 	END	reduce by rule 143
-+ 	LOCAL	reduce by rule 143
-+ 	IN	reduce by rule 143
-+ 	DATATYPE	reduce by rule 143
-+ 	TYPE	reduce by rule 143
-+ 	AND	reduce by rule 143
-+ 	RPAREN	reduce by rule 143
-+ 	SEMICOLON	reduce by rule 143
-+ 	STORAGE	reduce by rule 143
-+ 	LOCATIONS	reduce by rule 143
-+ 	STRUCTURE	reduce by rule 143
-+ 	FUNCTOR	reduce by rule 143
-+ 	SIGNATURE	reduce by rule 143
-+ 	SHARING	reduce by rule 143
-+ 	INSTRUCTION	reduce by rule 143
-+ 	VLIW	reduce by rule 143
-+ 	SUPERSCALAR	reduce by rule 143
-+ 	WITHTYPE	reduce by rule 143
-+ 	FUN	reduce by rule 143
-+ 	VAL	reduce by rule 143
-+ 	INCLUDE	reduce by rule 143
-+ 	OPEN	reduce by rule 143
-+ 	LITTLE	reduce by rule 143
-+ 	BIG	reduce by rule 143
-+ 	PIPELINE	reduce by rule 143
-+ 	LOWERCASE	reduce by rule 143
-+ 	UPPERCASE	reduce by rule 143
-+ 	VERBATIM	reduce by rule 143
-+ 	RTL	reduce by rule 143
-+ 	NONFIX	reduce by rule 143
-+ 	INFIX	reduce by rule 143
-+ 	INFIXR	reduce by rule 143
-+ 	DEBUG	reduce by rule 143
-+ 	RESOURCE	reduce by rule 143
-+ 	CPU	reduce by rule 143
-+ 	LATENCY	reduce by rule 143
-+ 	EXCEPTION	reduce by rule 143
-+ 	EOF	reduce by rule 143
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 346:
-+ 
-+ 	consassembly : asm_strings .  (reduce by rule 184)
-+ 
-+ 	ARCHITECTURE	reduce by rule 184
-+ 	END	reduce by rule 184
-+ 	LOCAL	reduce by rule 184
-+ 	IN	reduce by rule 184
-+ 	DATATYPE	reduce by rule 184
-+ 	TYPE	reduce by rule 184
-+ 	AND	reduce by rule 184
-+ 	LPAREN	reduce by rule 184
-+ 	RPAREN	reduce by rule 184
-+ 	SEMICOLON	reduce by rule 184
-+ 	CELLSET	reduce by rule 184
-+ 	STORAGE	reduce by rule 184
-+ 	LOCATIONS	reduce by rule 184
-+ 	BAR	reduce by rule 184
-+ 	STRUCTURE	reduce by rule 184
-+ 	FUNCTOR	reduce by rule 184
-+ 	SIGNATURE	reduce by rule 184
-+ 	SHARING	reduce by rule 184
-+ 	INSTRUCTION	reduce by rule 184
-+ 	VLIW	reduce by rule 184
-+ 	SUPERSCALAR	reduce by rule 184
-+ 	WITHTYPE	reduce by rule 184
-+ 	FUN	reduce by rule 184
-+ 	VAL	reduce by rule 184
-+ 	INCLUDE	reduce by rule 184
-+ 	OPEN	reduce by rule 184
-+ 	LITTLE	reduce by rule 184
-+ 	BIG	reduce by rule 184
-+ 	PIPELINE	reduce by rule 184
-+ 	LOWERCASE	reduce by rule 184
-+ 	UPPERCASE	reduce by rule 184
-+ 	VERBATIM	reduce by rule 184
-+ 	RTL	reduce by rule 184
-+ 	SPAN	reduce by rule 184
-+ 	DELAYSLOT	reduce by rule 184
-+ 	NONFIX	reduce by rule 184
-+ 	INFIX	reduce by rule 184
-+ 	INFIXR	reduce by rule 184
-+ 	DEBUG	reduce by rule 184
-+ 	MC_COLON	reduce by rule 184
-+ 	RTL_COLON	reduce by rule 184
-+ 	DELAYSLOT_COLON	reduce by rule 184
-+ 	NULLIFIED_COLON	reduce by rule 184
-+ 	PADDING_COLON	reduce by rule 184
-+ 	RESOURCE	reduce by rule 184
-+ 	CPU	reduce by rule 184
-+ 	LATENCY	reduce by rule 184
-+ 	EXCEPTION	reduce by rule 184
-+ 	ID	reduce by rule 184
-+ 	SYMBOL	reduce by rule 184
-+ 	WORD	reduce by rule 184
-+ 	INT	reduce by rule 184
-+ 	EOF	reduce by rule 184
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 347:
-+ 
-+ 	consbind : sym of_ty consassembly . consencoding rtl nop nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 176
-+ 	END	reduce by rule 176
-+ 	LOCAL	reduce by rule 176
-+ 	IN	reduce by rule 176
-+ 	DATATYPE	reduce by rule 176
-+ 	TYPE	reduce by rule 176
-+ 	AND	reduce by rule 176
-+ 	LPAREN	shift 469
-+ 	RPAREN	reduce by rule 176
-+ 	SEMICOLON	reduce by rule 176
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 176
-+ 	LOCATIONS	reduce by rule 176
-+ 	BAR	reduce by rule 176
-+ 	STRUCTURE	reduce by rule 176
-+ 	FUNCTOR	reduce by rule 176
-+ 	SIGNATURE	reduce by rule 176
-+ 	SHARING	reduce by rule 176
-+ 	INSTRUCTION	reduce by rule 176
-+ 	VLIW	reduce by rule 176
-+ 	SUPERSCALAR	reduce by rule 176
-+ 	WITHTYPE	reduce by rule 176
-+ 	FUN	reduce by rule 176
-+ 	VAL	reduce by rule 176
-+ 	INCLUDE	reduce by rule 176
-+ 	OPEN	reduce by rule 176
-+ 	LITTLE	reduce by rule 176
-+ 	BIG	reduce by rule 176
-+ 	PIPELINE	reduce by rule 176
-+ 	LOWERCASE	reduce by rule 176
-+ 	UPPERCASE	reduce by rule 176
-+ 	VERBATIM	reduce by rule 176
-+ 	RTL	reduce by rule 176
-+ 	SPAN	reduce by rule 176
-+ 	DELAYSLOT	reduce by rule 176
-+ 	NONFIX	reduce by rule 176
-+ 	INFIX	reduce by rule 176
-+ 	INFIXR	reduce by rule 176
-+ 	DEBUG	reduce by rule 176
-+ 	MC_COLON	shift 468
-+ 	RTL_COLON	reduce by rule 176
-+ 	DELAYSLOT_COLON	reduce by rule 176
-+ 	NULLIFIED_COLON	reduce by rule 176
-+ 	PADDING_COLON	reduce by rule 176
-+ 	RESOURCE	reduce by rule 176
-+ 	CPU	reduce by rule 176
-+ 	LATENCY	reduce by rule 176
-+ 	EXCEPTION	reduce by rule 176
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	EOF	reduce by rule 176
-+ 
-+ 	id	goto 467
-+ 	word	goto 466
-+ 	unsignedint	goto 465
-+ 	int	goto 464
-+ 	consencoding	goto 463
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 348:
-+ 
-+ 	consassembly : string .  (reduce by rule 183)
-+ 
-+ 	ARCHITECTURE	reduce by rule 183
-+ 	END	reduce by rule 183
-+ 	LOCAL	reduce by rule 183
-+ 	IN	reduce by rule 183
-+ 	DATATYPE	reduce by rule 183
-+ 	TYPE	reduce by rule 183
-+ 	AND	reduce by rule 183
-+ 	LPAREN	reduce by rule 183
-+ 	RPAREN	reduce by rule 183
-+ 	SEMICOLON	reduce by rule 183
-+ 	CELLSET	reduce by rule 183
-+ 	STORAGE	reduce by rule 183
-+ 	LOCATIONS	reduce by rule 183
-+ 	BAR	reduce by rule 183
-+ 	STRUCTURE	reduce by rule 183
-+ 	FUNCTOR	reduce by rule 183
-+ 	SIGNATURE	reduce by rule 183
-+ 	SHARING	reduce by rule 183
-+ 	INSTRUCTION	reduce by rule 183
-+ 	VLIW	reduce by rule 183
-+ 	SUPERSCALAR	reduce by rule 183
-+ 	WITHTYPE	reduce by rule 183
-+ 	FUN	reduce by rule 183
-+ 	VAL	reduce by rule 183
-+ 	INCLUDE	reduce by rule 183
-+ 	OPEN	reduce by rule 183
-+ 	LITTLE	reduce by rule 183
-+ 	BIG	reduce by rule 183
-+ 	PIPELINE	reduce by rule 183
-+ 	LOWERCASE	reduce by rule 183
-+ 	UPPERCASE	reduce by rule 183
-+ 	VERBATIM	reduce by rule 183
-+ 	RTL	reduce by rule 183
-+ 	SPAN	reduce by rule 183
-+ 	DELAYSLOT	reduce by rule 183
-+ 	NONFIX	reduce by rule 183
-+ 	INFIX	reduce by rule 183
-+ 	INFIXR	reduce by rule 183
-+ 	DEBUG	reduce by rule 183
-+ 	MC_COLON	reduce by rule 183
-+ 	RTL_COLON	reduce by rule 183
-+ 	DELAYSLOT_COLON	reduce by rule 183
-+ 	NULLIFIED_COLON	reduce by rule 183
-+ 	PADDING_COLON	reduce by rule 183
-+ 	RESOURCE	reduce by rule 183
-+ 	CPU	reduce by rule 183
-+ 	LATENCY	reduce by rule 183
-+ 	EXCEPTION	reduce by rule 183
-+ 	ID	reduce by rule 183
-+ 	SYMBOL	reduce by rule 183
-+ 	WORD	reduce by rule 183
-+ 	INT	reduce by rule 183
-+ 	EOF	reduce by rule 183
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 349:
-+ 
-+ 	consassembly : ASM_COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 470
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 350:
-+ 
-+ 	of_ty : OF ty .  (reduce by rule 152)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 152
-+ 	END	reduce by rule 152
-+ 	LOCAL	reduce by rule 152
-+ 	IN	reduce by rule 152
-+ 	DATATYPE	reduce by rule 152
-+ 	TYPE	reduce by rule 152
-+ 	AND	reduce by rule 152
-+ 	LPAREN	reduce by rule 152
-+ 	RPAREN	reduce by rule 152
-+ 	SEMICOLON	reduce by rule 152
-+ 	LDQUOTE	reduce by rule 152
-+ 	CELLSET	reduce by rule 152
-+ 	STORAGE	reduce by rule 152
-+ 	LOCATIONS	reduce by rule 152
-+ 	BAR	reduce by rule 152
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 152
-+ 	FUNCTOR	reduce by rule 152
-+ 	SIGNATURE	reduce by rule 152
-+ 	SHARING	reduce by rule 152
-+ 	INSTRUCTION	reduce by rule 152
-+ 	VLIW	reduce by rule 152
-+ 	SUPERSCALAR	reduce by rule 152
-+ 	WITHTYPE	reduce by rule 152
-+ 	FUN	reduce by rule 152
-+ 	VAL	reduce by rule 152
-+ 	INCLUDE	reduce by rule 152
-+ 	OPEN	reduce by rule 152
-+ 	LITTLE	reduce by rule 152
-+ 	BIG	reduce by rule 152
-+ 	PIPELINE	reduce by rule 152
-+ 	LOWERCASE	reduce by rule 152
-+ 	UPPERCASE	reduce by rule 152
-+ 	VERBATIM	reduce by rule 152
-+ 	RTL	reduce by rule 152
-+ 	SPAN	reduce by rule 152
-+ 	DELAYSLOT	reduce by rule 152
-+ 	NONFIX	reduce by rule 152
-+ 	INFIX	reduce by rule 152
-+ 	INFIXR	reduce by rule 152
-+ 	DEBUG	reduce by rule 152
-+ 	ASM_COLON	reduce by rule 152
-+ 	MC_COLON	reduce by rule 152
-+ 	RTL_COLON	reduce by rule 152
-+ 	DELAYSLOT_COLON	reduce by rule 152
-+ 	NULLIFIED_COLON	reduce by rule 152
-+ 	PADDING_COLON	reduce by rule 152
-+ 	RESOURCE	reduce by rule 152
-+ 	CPU	reduce by rule 152
-+ 	LATENCY	reduce by rule 152
-+ 	EXCEPTION	reduce by rule 152
-+ 	ID	reduce by rule 152
-+ 	SYMBOL	reduce by rule 152
-+ 	WORD	reduce by rule 152
-+ 	INT	reduce by rule 152
-+ 	STRING	reduce by rule 152
-+ 	EOF	reduce by rule 152
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 351:
-+ 
-+ 	formatbinds : formatbind BAR . formatbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 225
-+ 	formatbind	goto 223
-+ 	formatbinds	goto 471
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 352:
-+ 
-+ 	mymddecl : INSTRUCTION FORMATS int BITS . formatbinds 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 225
-+ 	formatbind	goto 223
-+ 	formatbinds	goto 472
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 353:
-+ 
-+ 	formatbind : id opt_of . LBRACE fields RBRACE opt_exp 
-+ 
-+ 	LBRACE	shift 473
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 354:
-+ 
-+ 	opt_of : OF .  (reduce by rule 193)
-+ 
-+ 	LBRACE	reduce by rule 193
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 355:
-+ 
-+ 	sharingdecls : sharingdecl AND sharingdecls .  (reduce by rule 100)
-+ 
-+ 	ARCHITECTURE	reduce by rule 100
-+ 	END	reduce by rule 100
-+ 	LOCAL	reduce by rule 100
-+ 	IN	reduce by rule 100
-+ 	DATATYPE	reduce by rule 100
-+ 	TYPE	reduce by rule 100
-+ 	RPAREN	reduce by rule 100
-+ 	SEMICOLON	reduce by rule 100
-+ 	STORAGE	reduce by rule 100
-+ 	LOCATIONS	reduce by rule 100
-+ 	STRUCTURE	reduce by rule 100
-+ 	FUNCTOR	reduce by rule 100
-+ 	SIGNATURE	reduce by rule 100
-+ 	SHARING	reduce by rule 100
-+ 	INSTRUCTION	reduce by rule 100
-+ 	VLIW	reduce by rule 100
-+ 	SUPERSCALAR	reduce by rule 100
-+ 	FUN	reduce by rule 100
-+ 	VAL	reduce by rule 100
-+ 	INCLUDE	reduce by rule 100
-+ 	OPEN	reduce by rule 100
-+ 	LITTLE	reduce by rule 100
-+ 	BIG	reduce by rule 100
-+ 	PIPELINE	reduce by rule 100
-+ 	LOWERCASE	reduce by rule 100
-+ 	UPPERCASE	reduce by rule 100
-+ 	VERBATIM	reduce by rule 100
-+ 	RTL	reduce by rule 100
-+ 	NONFIX	reduce by rule 100
-+ 	INFIX	reduce by rule 100
-+ 	INFIXR	reduce by rule 100
-+ 	DEBUG	reduce by rule 100
-+ 	RESOURCE	reduce by rule 100
-+ 	CPU	reduce by rule 100
-+ 	LATENCY	reduce by rule 100
-+ 	EXCEPTION	reduce by rule 100
-+ 	EOF	reduce by rule 100
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 356:
-+ 
-+ 	sharelist : ident EQ sharelist .  (reduce by rule 104)
-+ 
-+ 	ARCHITECTURE	reduce by rule 104
-+ 	END	reduce by rule 104
-+ 	LOCAL	reduce by rule 104
-+ 	IN	reduce by rule 104
-+ 	DATATYPE	reduce by rule 104
-+ 	TYPE	reduce by rule 104
-+ 	AND	reduce by rule 104
-+ 	RPAREN	reduce by rule 104
-+ 	SEMICOLON	reduce by rule 104
-+ 	STORAGE	reduce by rule 104
-+ 	LOCATIONS	reduce by rule 104
-+ 	STRUCTURE	reduce by rule 104
-+ 	FUNCTOR	reduce by rule 104
-+ 	SIGNATURE	reduce by rule 104
-+ 	SHARING	reduce by rule 104
-+ 	INSTRUCTION	reduce by rule 104
-+ 	VLIW	reduce by rule 104
-+ 	SUPERSCALAR	reduce by rule 104
-+ 	FUN	reduce by rule 104
-+ 	VAL	reduce by rule 104
-+ 	INCLUDE	reduce by rule 104
-+ 	OPEN	reduce by rule 104
-+ 	LITTLE	reduce by rule 104
-+ 	BIG	reduce by rule 104
-+ 	PIPELINE	reduce by rule 104
-+ 	LOWERCASE	reduce by rule 104
-+ 	UPPERCASE	reduce by rule 104
-+ 	VERBATIM	reduce by rule 104
-+ 	RTL	reduce by rule 104
-+ 	NONFIX	reduce by rule 104
-+ 	INFIX	reduce by rule 104
-+ 	INFIXR	reduce by rule 104
-+ 	DEBUG	reduce by rule 104
-+ 	RESOURCE	reduce by rule 104
-+ 	CPU	reduce by rule 104
-+ 	LATENCY	reduce by rule 104
-+ 	EXCEPTION	reduce by rule 104
-+ 	EOF	reduce by rule 104
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 357:
-+ 
-+ 	sharelist : ident . EQ ident 
-+ 	sharelist : ident EQ ident .  (reduce by rule 103)
-+ 	sharelist : ident . EQ sharelist 
-+ 
-+ 	ARCHITECTURE	reduce by rule 103
-+ 	END	reduce by rule 103
-+ 	LOCAL	reduce by rule 103
-+ 	IN	reduce by rule 103
-+ 	DATATYPE	reduce by rule 103
-+ 	TYPE	reduce by rule 103
-+ 	EQ	shift 227
-+ 	AND	reduce by rule 103
-+ 	RPAREN	reduce by rule 103
-+ 	SEMICOLON	reduce by rule 103
-+ 	STORAGE	reduce by rule 103
-+ 	LOCATIONS	reduce by rule 103
-+ 	STRUCTURE	reduce by rule 103
-+ 	FUNCTOR	reduce by rule 103
-+ 	SIGNATURE	reduce by rule 103
-+ 	SHARING	reduce by rule 103
-+ 	INSTRUCTION	reduce by rule 103
-+ 	VLIW	reduce by rule 103
-+ 	SUPERSCALAR	reduce by rule 103
-+ 	FUN	reduce by rule 103
-+ 	VAL	reduce by rule 103
-+ 	INCLUDE	reduce by rule 103
-+ 	OPEN	reduce by rule 103
-+ 	LITTLE	reduce by rule 103
-+ 	BIG	reduce by rule 103
-+ 	PIPELINE	reduce by rule 103
-+ 	LOWERCASE	reduce by rule 103
-+ 	UPPERCASE	reduce by rule 103
-+ 	VERBATIM	reduce by rule 103
-+ 	RTL	reduce by rule 103
-+ 	NONFIX	reduce by rule 103
-+ 	INFIX	reduce by rule 103
-+ 	INFIXR	reduce by rule 103
-+ 	DEBUG	reduce by rule 103
-+ 	RESOURCE	reduce by rule 103
-+ 	CPU	reduce by rule 103
-+ 	LATENCY	reduce by rule 103
-+ 	EXCEPTION	reduce by rule 103
-+ 	EOF	reduce by rule 103
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 358:
-+ 
-+ 	mymldecl : SIGNATURE id EQ sigexp .  (reduce by rule 72)
-+ 	sigexp : sigexp . WHERE sigsubs 
-+ 
-+ 	ARCHITECTURE	reduce by rule 72
-+ 	END	reduce by rule 72
-+ 	LOCAL	reduce by rule 72
-+ 	IN	reduce by rule 72
-+ 	DATATYPE	reduce by rule 72
-+ 	TYPE	reduce by rule 72
-+ 	RPAREN	reduce by rule 72
-+ 	SEMICOLON	reduce by rule 72
-+ 	STORAGE	reduce by rule 72
-+ 	LOCATIONS	reduce by rule 72
-+ 	STRUCTURE	reduce by rule 72
-+ 	FUNCTOR	reduce by rule 72
-+ 	SIGNATURE	reduce by rule 72
-+ 	WHERE	shift 206
-+ 	SHARING	reduce by rule 72
-+ 	INSTRUCTION	reduce by rule 72
-+ 	VLIW	reduce by rule 72
-+ 	SUPERSCALAR	reduce by rule 72
-+ 	FUN	reduce by rule 72
-+ 	VAL	reduce by rule 72
-+ 	INCLUDE	reduce by rule 72
-+ 	OPEN	reduce by rule 72
-+ 	LITTLE	reduce by rule 72
-+ 	BIG	reduce by rule 72
-+ 	PIPELINE	reduce by rule 72
-+ 	LOWERCASE	reduce by rule 72
-+ 	UPPERCASE	reduce by rule 72
-+ 	VERBATIM	reduce by rule 72
-+ 	RTL	reduce by rule 72
-+ 	NONFIX	reduce by rule 72
-+ 	INFIX	reduce by rule 72
-+ 	INFIXR	reduce by rule 72
-+ 	DEBUG	reduce by rule 72
-+ 	RESOURCE	reduce by rule 72
-+ 	CPU	reduce by rule 72
-+ 	LATENCY	reduce by rule 72
-+ 	EXCEPTION	reduce by rule 72
-+ 	EOF	reduce by rule 72
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 359:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg . RPAREN EQ structexp 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg . RPAREN sigcon EQ structexp 
-+ 
-+ 	RPAREN	shift 474
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 360:
-+ 
-+ 	functorarg : scopeddecls .  (reduce by rule 88)
-+ 
-+ 	RPAREN	reduce by rule 88
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 361:
-+ 
-+ 	functorarg : id . sigcon 
-+ 
-+ 	COLON	shift 476
-+ 	COLONGREATER	shift 233
-+ 
-+ 	sigcon	goto 475
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 362:
-+ 
-+ 	structexp : ident .  (reduce by rule 123)
-+ 
-+ 	ARCHITECTURE	reduce by rule 123
-+ 	END	reduce by rule 123
-+ 	LOCAL	reduce by rule 123
-+ 	IN	reduce by rule 123
-+ 	DATATYPE	reduce by rule 123
-+ 	TYPE	reduce by rule 123
-+ 	EQ	reduce by rule 123
-+ 	AND	reduce by rule 123
-+ 	LPAREN	reduce by rule 123
-+ 	RPAREN	reduce by rule 123
-+ 	SEMICOLON	reduce by rule 123
-+ 	STORAGE	reduce by rule 123
-+ 	LOCATIONS	reduce by rule 123
-+ 	STRUCTURE	reduce by rule 123
-+ 	FUNCTOR	reduce by rule 123
-+ 	SIGNATURE	reduce by rule 123
-+ 	WHERE	reduce by rule 123
-+ 	SHARING	reduce by rule 123
-+ 	INSTRUCTION	reduce by rule 123
-+ 	VLIW	reduce by rule 123
-+ 	SUPERSCALAR	reduce by rule 123
-+ 	FUN	reduce by rule 123
-+ 	VAL	reduce by rule 123
-+ 	INCLUDE	reduce by rule 123
-+ 	OPEN	reduce by rule 123
-+ 	LITTLE	reduce by rule 123
-+ 	BIG	reduce by rule 123
-+ 	PIPELINE	reduce by rule 123
-+ 	LOWERCASE	reduce by rule 123
-+ 	UPPERCASE	reduce by rule 123
-+ 	VERBATIM	reduce by rule 123
-+ 	RTL	reduce by rule 123
-+ 	NONFIX	reduce by rule 123
-+ 	INFIX	reduce by rule 123
-+ 	INFIXR	reduce by rule 123
-+ 	DEBUG	reduce by rule 123
-+ 	RESOURCE	reduce by rule 123
-+ 	CPU	reduce by rule 123
-+ 	LATENCY	reduce by rule 123
-+ 	EXCEPTION	reduce by rule 123
-+ 	EOF	reduce by rule 123
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 363:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	mymldecl : FUNCTOR id EQ structexp .  (reduce by rule 75)
-+ 
-+ 	ARCHITECTURE	reduce by rule 75
-+ 	END	reduce by rule 75
-+ 	LOCAL	reduce by rule 75
-+ 	IN	reduce by rule 75
-+ 	DATATYPE	reduce by rule 75
-+ 	TYPE	reduce by rule 75
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 75
-+ 	SEMICOLON	reduce by rule 75
-+ 	STORAGE	reduce by rule 75
-+ 	LOCATIONS	reduce by rule 75
-+ 	STRUCTURE	reduce by rule 75
-+ 	FUNCTOR	reduce by rule 75
-+ 	SIGNATURE	reduce by rule 75
-+ 	SHARING	reduce by rule 75
-+ 	INSTRUCTION	reduce by rule 75
-+ 	VLIW	reduce by rule 75
-+ 	SUPERSCALAR	reduce by rule 75
-+ 	FUN	reduce by rule 75
-+ 	VAL	reduce by rule 75
-+ 	INCLUDE	reduce by rule 75
-+ 	OPEN	reduce by rule 75
-+ 	LITTLE	reduce by rule 75
-+ 	BIG	reduce by rule 75
-+ 	PIPELINE	reduce by rule 75
-+ 	LOWERCASE	reduce by rule 75
-+ 	UPPERCASE	reduce by rule 75
-+ 	VERBATIM	reduce by rule 75
-+ 	RTL	reduce by rule 75
-+ 	NONFIX	reduce by rule 75
-+ 	INFIX	reduce by rule 75
-+ 	INFIXR	reduce by rule 75
-+ 	DEBUG	reduce by rule 75
-+ 	RESOURCE	reduce by rule 75
-+ 	CPU	reduce by rule 75
-+ 	LATENCY	reduce by rule 75
-+ 	EXCEPTION	reduce by rule 75
-+ 	EOF	reduce by rule 75
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 364:
-+ 
-+ 	structexp : STRUCT . scopeddecls END 
-+ 
-+ 	ARCHITECTURE	reduce by rule 107
-+ 	END	reduce by rule 107
-+ 	LOCAL	reduce by rule 107
-+ 	DATATYPE	reduce by rule 107
-+ 	TYPE	reduce by rule 107
-+ 	STORAGE	reduce by rule 107
-+ 	LOCATIONS	reduce by rule 107
-+ 	STRUCTURE	reduce by rule 107
-+ 	FUNCTOR	reduce by rule 107
-+ 	SIGNATURE	reduce by rule 107
-+ 	SHARING	reduce by rule 107
-+ 	INSTRUCTION	reduce by rule 107
-+ 	VLIW	reduce by rule 107
-+ 	SUPERSCALAR	reduce by rule 107
-+ 	FUN	reduce by rule 107
-+ 	VAL	reduce by rule 107
-+ 	INCLUDE	reduce by rule 107
-+ 	OPEN	reduce by rule 107
-+ 	LITTLE	reduce by rule 107
-+ 	BIG	reduce by rule 107
-+ 	PIPELINE	reduce by rule 107
-+ 	LOWERCASE	reduce by rule 107
-+ 	UPPERCASE	reduce by rule 107
-+ 	VERBATIM	reduce by rule 107
-+ 	RTL	reduce by rule 107
-+ 	NONFIX	reduce by rule 107
-+ 	INFIX	reduce by rule 107
-+ 	INFIXR	reduce by rule 107
-+ 	DEBUG	reduce by rule 107
-+ 	RESOURCE	reduce by rule 107
-+ 	CPU	reduce by rule 107
-+ 	LATENCY	reduce by rule 107
-+ 	EXCEPTION	reduce by rule 107
-+ 
-+ 	scopeddecls	goto 478
-+ 	newScope	goto 164
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 365:
-+ 
-+ 	mymldecl : STRUCTURE id sigcon EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 479
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 366:
-+ 
-+ 	sigcon : COLONGREATER sigexp .  (reduce by rule 94)
-+ 	sigexp : sigexp . WHERE sigsubs 
-+ 
-+ 	EQ	reduce by rule 94
-+ 	RPAREN	reduce by rule 94
-+ 	WHERE	shift 206
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 367:
-+ 
-+ 	sigcon : COLON sigexp .  (reduce by rule 93)
-+ 	mymldecl : STRUCTURE id COLON sigexp .  (reduce by rule 71)
-+ 	sigexp : sigexp . WHERE sigsubs 
-+ 
-+ 	ARCHITECTURE	reduce by rule 71
-+ 	END	reduce by rule 71
-+ 	LOCAL	reduce by rule 71
-+ 	IN	reduce by rule 71
-+ 	DATATYPE	reduce by rule 71
-+ 	TYPE	reduce by rule 71
-+ 	EQ	reduce by rule 93
-+ 	RPAREN	reduce by rule 71
-+ 	SEMICOLON	reduce by rule 71
-+ 	STORAGE	reduce by rule 71
-+ 	LOCATIONS	reduce by rule 71
-+ 	STRUCTURE	reduce by rule 71
-+ 	FUNCTOR	reduce by rule 71
-+ 	SIGNATURE	reduce by rule 71
-+ 	WHERE	shift 206
-+ 	SHARING	reduce by rule 71
-+ 	INSTRUCTION	reduce by rule 71
-+ 	VLIW	reduce by rule 71
-+ 	SUPERSCALAR	reduce by rule 71
-+ 	FUN	reduce by rule 71
-+ 	VAL	reduce by rule 71
-+ 	INCLUDE	reduce by rule 71
-+ 	OPEN	reduce by rule 71
-+ 	LITTLE	reduce by rule 71
-+ 	BIG	reduce by rule 71
-+ 	PIPELINE	reduce by rule 71
-+ 	LOWERCASE	reduce by rule 71
-+ 	UPPERCASE	reduce by rule 71
-+ 	VERBATIM	reduce by rule 71
-+ 	RTL	reduce by rule 71
-+ 	NONFIX	reduce by rule 71
-+ 	INFIX	reduce by rule 71
-+ 	INFIXR	reduce by rule 71
-+ 	DEBUG	reduce by rule 71
-+ 	RESOURCE	reduce by rule 71
-+ 	CPU	reduce by rule 71
-+ 	LATENCY	reduce by rule 71
-+ 	EXCEPTION	reduce by rule 71
-+ 	EOF	reduce by rule 71
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 368:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	mymldecl : STRUCTURE id EQ structexp .  (reduce by rule 69)
-+ 
-+ 	ARCHITECTURE	reduce by rule 69
-+ 	END	reduce by rule 69
-+ 	LOCAL	reduce by rule 69
-+ 	IN	reduce by rule 69
-+ 	DATATYPE	reduce by rule 69
-+ 	TYPE	reduce by rule 69
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 69
-+ 	SEMICOLON	reduce by rule 69
-+ 	STORAGE	reduce by rule 69
-+ 	LOCATIONS	reduce by rule 69
-+ 	STRUCTURE	reduce by rule 69
-+ 	FUNCTOR	reduce by rule 69
-+ 	SIGNATURE	reduce by rule 69
-+ 	SHARING	reduce by rule 69
-+ 	INSTRUCTION	reduce by rule 69
-+ 	VLIW	reduce by rule 69
-+ 	SUPERSCALAR	reduce by rule 69
-+ 	FUN	reduce by rule 69
-+ 	VAL	reduce by rule 69
-+ 	INCLUDE	reduce by rule 69
-+ 	OPEN	reduce by rule 69
-+ 	LITTLE	reduce by rule 69
-+ 	BIG	reduce by rule 69
-+ 	PIPELINE	reduce by rule 69
-+ 	LOWERCASE	reduce by rule 69
-+ 	UPPERCASE	reduce by rule 69
-+ 	VERBATIM	reduce by rule 69
-+ 	RTL	reduce by rule 69
-+ 	NONFIX	reduce by rule 69
-+ 	INFIX	reduce by rule 69
-+ 	INFIXR	reduce by rule 69
-+ 	DEBUG	reduce by rule 69
-+ 	RESOURCE	reduce by rule 69
-+ 	CPU	reduce by rule 69
-+ 	LATENCY	reduce by rule 69
-+ 	EXCEPTION	reduce by rule 69
-+ 	EOF	reduce by rule 69
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 369:
-+ 
-+ 	locbinds : locbind AND locbinds .  (reduce by rule 393)
-+ 
-+ 	ARCHITECTURE	reduce by rule 393
-+ 	END	reduce by rule 393
-+ 	LOCAL	reduce by rule 393
-+ 	IN	reduce by rule 393
-+ 	DATATYPE	reduce by rule 393
-+ 	TYPE	reduce by rule 393
-+ 	RPAREN	reduce by rule 393
-+ 	SEMICOLON	reduce by rule 393
-+ 	STORAGE	reduce by rule 393
-+ 	LOCATIONS	reduce by rule 393
-+ 	STRUCTURE	reduce by rule 393
-+ 	FUNCTOR	reduce by rule 393
-+ 	SIGNATURE	reduce by rule 393
-+ 	SHARING	reduce by rule 393
-+ 	INSTRUCTION	reduce by rule 393
-+ 	VLIW	reduce by rule 393
-+ 	SUPERSCALAR	reduce by rule 393
-+ 	FUN	reduce by rule 393
-+ 	VAL	reduce by rule 393
-+ 	INCLUDE	reduce by rule 393
-+ 	OPEN	reduce by rule 393
-+ 	LITTLE	reduce by rule 393
-+ 	BIG	reduce by rule 393
-+ 	PIPELINE	reduce by rule 393
-+ 	LOWERCASE	reduce by rule 393
-+ 	UPPERCASE	reduce by rule 393
-+ 	VERBATIM	reduce by rule 393
-+ 	RTL	reduce by rule 393
-+ 	NONFIX	reduce by rule 393
-+ 	INFIX	reduce by rule 393
-+ 	INFIXR	reduce by rule 393
-+ 	DEBUG	reduce by rule 393
-+ 	RESOURCE	reduce by rule 393
-+ 	CPU	reduce by rule 393
-+ 	LATENCY	reduce by rule 393
-+ 	EXCEPTION	reduce by rule 393
-+ 	EOF	reduce by rule 393
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 370:
-+ 
-+ 	locbind : id pat EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 480
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 371:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	locbind : id EQ exp .  (reduce by rule 390)
-+ 
-+ 	ARCHITECTURE	reduce by rule 390
-+ 	END	reduce by rule 390
-+ 	LOCAL	reduce by rule 390
-+ 	IN	reduce by rule 390
-+ 	DATATYPE	reduce by rule 390
-+ 	TYPE	reduce by rule 390
-+ 	AND	reduce by rule 390
-+ 	RPAREN	reduce by rule 390
-+ 	SEMICOLON	reduce by rule 390
-+ 	STORAGE	reduce by rule 390
-+ 	LOCATIONS	reduce by rule 390
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 390
-+ 	FUNCTOR	reduce by rule 390
-+ 	SIGNATURE	reduce by rule 390
-+ 	SHARING	reduce by rule 390
-+ 	INSTRUCTION	reduce by rule 390
-+ 	VLIW	reduce by rule 390
-+ 	SUPERSCALAR	reduce by rule 390
-+ 	FUN	reduce by rule 390
-+ 	VAL	reduce by rule 390
-+ 	INCLUDE	reduce by rule 390
-+ 	OPEN	reduce by rule 390
-+ 	LITTLE	reduce by rule 390
-+ 	BIG	reduce by rule 390
-+ 	PIPELINE	reduce by rule 390
-+ 	LOWERCASE	reduce by rule 390
-+ 	UPPERCASE	reduce by rule 390
-+ 	VERBATIM	reduce by rule 390
-+ 	RTL	reduce by rule 390
-+ 	NONFIX	reduce by rule 390
-+ 	INFIX	reduce by rule 390
-+ 	INFIXR	reduce by rule 390
-+ 	DEBUG	reduce by rule 390
-+ 	RESOURCE	reduce by rule 390
-+ 	CPU	reduce by rule 390
-+ 	LATENCY	reduce by rule 390
-+ 	EXCEPTION	reduce by rule 390
-+ 	EOF	reduce by rule 390
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 372:
-+ 
-+ 	storagedecls : storagedecl BAR storagedecls .  (reduce by rule 382)
-+ 
-+ 	ARCHITECTURE	reduce by rule 382
-+ 	END	reduce by rule 382
-+ 	LOCAL	reduce by rule 382
-+ 	IN	reduce by rule 382
-+ 	DATATYPE	reduce by rule 382
-+ 	TYPE	reduce by rule 382
-+ 	RPAREN	reduce by rule 382
-+ 	SEMICOLON	reduce by rule 382
-+ 	STORAGE	reduce by rule 382
-+ 	LOCATIONS	reduce by rule 382
-+ 	STRUCTURE	reduce by rule 382
-+ 	FUNCTOR	reduce by rule 382
-+ 	SIGNATURE	reduce by rule 382
-+ 	SHARING	reduce by rule 382
-+ 	INSTRUCTION	reduce by rule 382
-+ 	VLIW	reduce by rule 382
-+ 	SUPERSCALAR	reduce by rule 382
-+ 	FUN	reduce by rule 382
-+ 	VAL	reduce by rule 382
-+ 	INCLUDE	reduce by rule 382
-+ 	OPEN	reduce by rule 382
-+ 	LITTLE	reduce by rule 382
-+ 	BIG	reduce by rule 382
-+ 	PIPELINE	reduce by rule 382
-+ 	LOWERCASE	reduce by rule 382
-+ 	UPPERCASE	reduce by rule 382
-+ 	VERBATIM	reduce by rule 382
-+ 	RTL	reduce by rule 382
-+ 	NONFIX	reduce by rule 382
-+ 	INFIX	reduce by rule 382
-+ 	INFIXR	reduce by rule 382
-+ 	DEBUG	reduce by rule 382
-+ 	RESOURCE	reduce by rule 382
-+ 	CPU	reduce by rule 382
-+ 	LATENCY	reduce by rule 382
-+ 	EXCEPTION	reduce by rule 382
-+ 	EOF	reduce by rule 382
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 373:
-+ 
-+ 	storagedecl : id EQ DOLLAR . id LBRACKET cellcount RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 481
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 374:
-+ 
-+ 	typebind : tyvarseq tid EQ . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 482
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 375:
-+ 
-+ 	typebind : tyvarseq . tid EQ ty 
-+ 
-+ 	CELLSET	shift 50
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 243
-+ 	tid	goto 483
-+ 	tid2	goto 241
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 376:
-+ 
-+ 	typebinds : typebind AND typebinds .  (reduce by rule 197)
-+ 
-+ 	ARCHITECTURE	reduce by rule 197
-+ 	END	reduce by rule 197
-+ 	LOCAL	reduce by rule 197
-+ 	IN	reduce by rule 197
-+ 	DATATYPE	reduce by rule 197
-+ 	TYPE	reduce by rule 197
-+ 	RPAREN	reduce by rule 197
-+ 	SEMICOLON	reduce by rule 197
-+ 	STORAGE	reduce by rule 197
-+ 	LOCATIONS	reduce by rule 197
-+ 	STRUCTURE	reduce by rule 197
-+ 	FUNCTOR	reduce by rule 197
-+ 	SIGNATURE	reduce by rule 197
-+ 	SHARING	reduce by rule 197
-+ 	INSTRUCTION	reduce by rule 197
-+ 	VLIW	reduce by rule 197
-+ 	SUPERSCALAR	reduce by rule 197
-+ 	FUN	reduce by rule 197
-+ 	VAL	reduce by rule 197
-+ 	INCLUDE	reduce by rule 197
-+ 	OPEN	reduce by rule 197
-+ 	LITTLE	reduce by rule 197
-+ 	BIG	reduce by rule 197
-+ 	PIPELINE	reduce by rule 197
-+ 	LOWERCASE	reduce by rule 197
-+ 	UPPERCASE	reduce by rule 197
-+ 	VERBATIM	reduce by rule 197
-+ 	RTL	reduce by rule 197
-+ 	NONFIX	reduce by rule 197
-+ 	INFIX	reduce by rule 197
-+ 	INFIXR	reduce by rule 197
-+ 	DEBUG	reduce by rule 197
-+ 	RESOURCE	reduce by rule 197
-+ 	CPU	reduce by rule 197
-+ 	LATENCY	reduce by rule 197
-+ 	EXCEPTION	reduce by rule 197
-+ 	EOF	reduce by rule 197
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 377:
-+ 
-+ 	tyvarseq : LPAREN tyvars RPAREN .  (reduce by rule 201)
-+ 
-+ 	CELLSET	reduce by rule 201
-+ 	BITS	reduce by rule 201
-+ 	INSTRUCTION	reduce by rule 201
-+ 	CELL	reduce by rule 201
-+ 	ID	reduce by rule 201
-+ 	SYMBOL	reduce by rule 201
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 378:
-+ 
-+ 	tyvars : tyvar COMMA . tyvars 
-+ 
-+ 	HASH	shift 159
-+ 	TYVAR	shift 158
-+ 
-+ 	tyvar	goto 250
-+ 	tyvars	goto 484
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 379:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding . fieldty hasasm EQ consbinds 
-+ 	datatypebind : tyvarseq id opcodeencoding . fieldty hasasm EQ DATATYPE ty 
-+ 
-+ 	EQ	reduce by rule 133
-+ 	DEREF	reduce by rule 133
-+ 	COLON	shift 486
-+ 
-+ 	fieldty	goto 485
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 380:
-+ 
-+ 	opcodeencoding : LBRACKET . encodingexps RBRACKET 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 489
-+ 	encodingexp	goto 488
-+ 	encodingexps	goto 487
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 381:
-+ 
-+ 	datatypebinds : datatypebind AND datatypebinds .  (reduce by rule 128)
-+ 
-+ 	ARCHITECTURE	reduce by rule 128
-+ 	END	reduce by rule 128
-+ 	LOCAL	reduce by rule 128
-+ 	IN	reduce by rule 128
-+ 	DATATYPE	reduce by rule 128
-+ 	TYPE	reduce by rule 128
-+ 	RPAREN	reduce by rule 128
-+ 	SEMICOLON	reduce by rule 128
-+ 	STORAGE	reduce by rule 128
-+ 	LOCATIONS	reduce by rule 128
-+ 	STRUCTURE	reduce by rule 128
-+ 	FUNCTOR	reduce by rule 128
-+ 	SIGNATURE	reduce by rule 128
-+ 	SHARING	reduce by rule 128
-+ 	INSTRUCTION	reduce by rule 128
-+ 	VLIW	reduce by rule 128
-+ 	SUPERSCALAR	reduce by rule 128
-+ 	WITHTYPE	reduce by rule 128
-+ 	FUN	reduce by rule 128
-+ 	VAL	reduce by rule 128
-+ 	INCLUDE	reduce by rule 128
-+ 	OPEN	reduce by rule 128
-+ 	LITTLE	reduce by rule 128
-+ 	BIG	reduce by rule 128
-+ 	PIPELINE	reduce by rule 128
-+ 	LOWERCASE	reduce by rule 128
-+ 	UPPERCASE	reduce by rule 128
-+ 	VERBATIM	reduce by rule 128
-+ 	RTL	reduce by rule 128
-+ 	NONFIX	reduce by rule 128
-+ 	INFIX	reduce by rule 128
-+ 	INFIXR	reduce by rule 128
-+ 	DEBUG	reduce by rule 128
-+ 	RESOURCE	reduce by rule 128
-+ 	CPU	reduce by rule 128
-+ 	LATENCY	reduce by rule 128
-+ 	EXCEPTION	reduce by rule 128
-+ 	EOF	reduce by rule 128
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 382:
-+ 
-+ 	withtypeclause : WITHTYPE typebinds .  (reduce by rule 195)
-+ 
-+ 	ARCHITECTURE	reduce by rule 195
-+ 	END	reduce by rule 195
-+ 	LOCAL	reduce by rule 195
-+ 	IN	reduce by rule 195
-+ 	DATATYPE	reduce by rule 195
-+ 	TYPE	reduce by rule 195
-+ 	RPAREN	reduce by rule 195
-+ 	SEMICOLON	reduce by rule 195
-+ 	STORAGE	reduce by rule 195
-+ 	LOCATIONS	reduce by rule 195
-+ 	STRUCTURE	reduce by rule 195
-+ 	FUNCTOR	reduce by rule 195
-+ 	SIGNATURE	reduce by rule 195
-+ 	SHARING	reduce by rule 195
-+ 	INSTRUCTION	reduce by rule 195
-+ 	VLIW	reduce by rule 195
-+ 	SUPERSCALAR	reduce by rule 195
-+ 	FUN	reduce by rule 195
-+ 	VAL	reduce by rule 195
-+ 	INCLUDE	reduce by rule 195
-+ 	OPEN	reduce by rule 195
-+ 	LITTLE	reduce by rule 195
-+ 	BIG	reduce by rule 195
-+ 	PIPELINE	reduce by rule 195
-+ 	LOWERCASE	reduce by rule 195
-+ 	UPPERCASE	reduce by rule 195
-+ 	VERBATIM	reduce by rule 195
-+ 	RTL	reduce by rule 195
-+ 	NONFIX	reduce by rule 195
-+ 	INFIX	reduce by rule 195
-+ 	INFIXR	reduce by rule 195
-+ 	DEBUG	reduce by rule 195
-+ 	RESOURCE	reduce by rule 195
-+ 	CPU	reduce by rule 195
-+ 	LATENCY	reduce by rule 195
-+ 	EXCEPTION	reduce by rule 195
-+ 	EOF	reduce by rule 195
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 383:
-+ 
-+ 	scopeddecls : newScope decls oldScope .  (reduce by rule 106)
-+ 
-+ 	END	reduce by rule 106
-+ 	IN	reduce by rule 106
-+ 	RPAREN	reduce by rule 106
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 384:
-+ 
-+ 	mymldecl : LOCAL scopeddecls IN scopeddecls . END 
-+ 
-+ 	END	shift 490
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 385:
-+ 
-+ 	mymddecl : ARCHITECTURE id EQ STRUCT . decls END 
-+ 
-+ 	ARCHITECTURE	shift 39
-+ 	END	reduce by rule 1
-+ 	LOCAL	shift 38
-+ 	DATATYPE	shift 37
-+ 	TYPE	shift 36
-+ 	STORAGE	shift 35
-+ 	LOCATIONS	shift 34
-+ 	STRUCTURE	shift 33
-+ 	FUNCTOR	shift 32
-+ 	SIGNATURE	shift 31
-+ 	SHARING	shift 30
-+ 	INSTRUCTION	shift 29
-+ 	VLIW	shift 28
-+ 	SUPERSCALAR	shift 27
-+ 	FUN	shift 26
-+ 	VAL	shift 25
-+ 	INCLUDE	shift 24
-+ 	OPEN	shift 23
-+ 	LITTLE	shift 22
-+ 	BIG	shift 21
-+ 	PIPELINE	shift 20
-+ 	LOWERCASE	shift 19
-+ 	UPPERCASE	shift 18
-+ 	VERBATIM	shift 17
-+ 	RTL	shift 16
-+ 	NONFIX	shift 15
-+ 	INFIX	shift 14
-+ 	INFIXR	shift 13
-+ 	DEBUG	shift 12
-+ 	RESOURCE	shift 11
-+ 	CPU	shift 10
-+ 	LATENCY	shift 9
-+ 	EXCEPTION	shift 8
-+ 
-+ 	decls	goto 491
-+ 	decl	goto 6
-+ 	mldecl	goto 5
-+ 	mymldecl	goto 4
-+ 	mddecl	goto 3
-+ 	mymddecl	goto 2
-+ 	assemblycase	goto 1
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 386:
-+ 
-+ 	appty : appty tident .  (reduce by rule 358)
-+ 
-+ 	ARCHITECTURE	reduce by rule 358
-+ 	END	reduce by rule 358
-+ 	LOCAL	reduce by rule 358
-+ 	IN	reduce by rule 358
-+ 	OF	reduce by rule 358
-+ 	DATATYPE	reduce by rule 358
-+ 	TYPE	reduce by rule 358
-+ 	EQ	reduce by rule 358
-+ 	TIMES	reduce by rule 358
-+ 	AND	reduce by rule 358
-+ 	LPAREN	reduce by rule 358
-+ 	RPAREN	reduce by rule 358
-+ 	RBRACKET	reduce by rule 358
-+ 	RBRACE	reduce by rule 358
-+ 	SEMICOLON	reduce by rule 358
-+ 	LDQUOTE	reduce by rule 358
-+ 	CELLSET	reduce by rule 358
-+ 	STORAGE	reduce by rule 358
-+ 	LOCATIONS	reduce by rule 358
-+ 	COMMA	reduce by rule 358
-+ 	COLON	reduce by rule 358
-+ 	BAR	reduce by rule 358
-+ 	ARROW	reduce by rule 358
-+ 	DARROW	reduce by rule 358
-+ 	BITS	reduce by rule 358
-+ 	THEN	reduce by rule 358
-+ 	ELSE	reduce by rule 358
-+ 	STRUCTURE	reduce by rule 358
-+ 	FUNCTOR	reduce by rule 358
-+ 	SIGNATURE	reduce by rule 358
-+ 	WHERE	reduce by rule 358
-+ 	SHARING	reduce by rule 358
-+ 	INSTRUCTION	reduce by rule 358
-+ 	CELL	reduce by rule 358
-+ 	VLIW	reduce by rule 358
-+ 	SUPERSCALAR	reduce by rule 358
-+ 	WITHTYPE	reduce by rule 358
-+ 	FUN	reduce by rule 358
-+ 	VAL	reduce by rule 358
-+ 	INCLUDE	reduce by rule 358
-+ 	OPEN	reduce by rule 358
-+ 	LITTLE	reduce by rule 358
-+ 	BIG	reduce by rule 358
-+ 	PIPELINE	reduce by rule 358
-+ 	LOWERCASE	reduce by rule 358
-+ 	UPPERCASE	reduce by rule 358
-+ 	VERBATIM	reduce by rule 358
-+ 	RTL	reduce by rule 358
-+ 	SPAN	reduce by rule 358
-+ 	DELAYSLOT	reduce by rule 358
-+ 	NONFIX	reduce by rule 358
-+ 	INFIX	reduce by rule 358
-+ 	INFIXR	reduce by rule 358
-+ 	DEBUG	reduce by rule 358
-+ 	ASM_COLON	reduce by rule 358
-+ 	MC_COLON	reduce by rule 358
-+ 	RTL_COLON	reduce by rule 358
-+ 	DELAYSLOT_COLON	reduce by rule 358
-+ 	NULLIFIED_COLON	reduce by rule 358
-+ 	PADDING_COLON	reduce by rule 358
-+ 	RESOURCE	reduce by rule 358
-+ 	CPU	reduce by rule 358
-+ 	LATENCY	reduce by rule 358
-+ 	EXCEPTION	reduce by rule 358
-+ 	ID	reduce by rule 358
-+ 	SYMBOL	reduce by rule 358
-+ 	WORD	reduce by rule 358
-+ 	INT	reduce by rule 358
-+ 	STRING	reduce by rule 358
-+ 	EOF	reduce by rule 358
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 387:
-+ 
-+ 	tuplety : appty TIMES . appty 
-+ 	tuplety : appty TIMES . tuplety 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	aty	goto 263
-+ 	appty	goto 493
-+ 	tuplety	goto 492
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 388:
-+ 
-+ 	ty : ty ARROW . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 494
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 389:
-+ 
-+ 	tpath : tpath DOT . tid 
-+ 
-+ 	CELLSET	shift 50
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 243
-+ 	tid	goto 495
-+ 	tid2	goto 241
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 390:
-+ 
-+ 	tpath : tid DOT . tid 
-+ 
-+ 	CELLSET	shift 50
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 243
-+ 	tid	goto 496
-+ 	tid2	goto 241
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 391:
-+ 
-+ 	aty : HASH int .  (reduce by rule 351)
-+ 
-+ 	ARCHITECTURE	reduce by rule 351
-+ 	END	reduce by rule 351
-+ 	LOCAL	reduce by rule 351
-+ 	IN	reduce by rule 351
-+ 	OF	reduce by rule 351
-+ 	DATATYPE	reduce by rule 351
-+ 	TYPE	reduce by rule 351
-+ 	EQ	reduce by rule 351
-+ 	TIMES	reduce by rule 351
-+ 	AND	reduce by rule 351
-+ 	LPAREN	reduce by rule 351
-+ 	RPAREN	reduce by rule 351
-+ 	RBRACKET	reduce by rule 351
-+ 	RBRACE	reduce by rule 351
-+ 	SEMICOLON	reduce by rule 351
-+ 	LDQUOTE	reduce by rule 351
-+ 	CELLSET	reduce by rule 351
-+ 	STORAGE	reduce by rule 351
-+ 	LOCATIONS	reduce by rule 351
-+ 	COMMA	reduce by rule 351
-+ 	COLON	reduce by rule 351
-+ 	BAR	reduce by rule 351
-+ 	ARROW	reduce by rule 351
-+ 	DARROW	reduce by rule 351
-+ 	BITS	reduce by rule 351
-+ 	THEN	reduce by rule 351
-+ 	ELSE	reduce by rule 351
-+ 	STRUCTURE	reduce by rule 351
-+ 	FUNCTOR	reduce by rule 351
-+ 	SIGNATURE	reduce by rule 351
-+ 	WHERE	reduce by rule 351
-+ 	SHARING	reduce by rule 351
-+ 	INSTRUCTION	reduce by rule 351
-+ 	CELL	reduce by rule 351
-+ 	VLIW	reduce by rule 351
-+ 	SUPERSCALAR	reduce by rule 351
-+ 	WITHTYPE	reduce by rule 351
-+ 	FUN	reduce by rule 351
-+ 	VAL	reduce by rule 351
-+ 	INCLUDE	reduce by rule 351
-+ 	OPEN	reduce by rule 351
-+ 	LITTLE	reduce by rule 351
-+ 	BIG	reduce by rule 351
-+ 	PIPELINE	reduce by rule 351
-+ 	LOWERCASE	reduce by rule 351
-+ 	UPPERCASE	reduce by rule 351
-+ 	VERBATIM	reduce by rule 351
-+ 	RTL	reduce by rule 351
-+ 	SPAN	reduce by rule 351
-+ 	DELAYSLOT	reduce by rule 351
-+ 	NONFIX	reduce by rule 351
-+ 	INFIX	reduce by rule 351
-+ 	INFIXR	reduce by rule 351
-+ 	DEBUG	reduce by rule 351
-+ 	ASM_COLON	reduce by rule 351
-+ 	MC_COLON	reduce by rule 351
-+ 	RTL_COLON	reduce by rule 351
-+ 	DELAYSLOT_COLON	reduce by rule 351
-+ 	NULLIFIED_COLON	reduce by rule 351
-+ 	PADDING_COLON	reduce by rule 351
-+ 	RESOURCE	reduce by rule 351
-+ 	CPU	reduce by rule 351
-+ 	LATENCY	reduce by rule 351
-+ 	EXCEPTION	reduce by rule 351
-+ 	ID	reduce by rule 351
-+ 	SYMBOL	reduce by rule 351
-+ 	WORD	reduce by rule 351
-+ 	INT	reduce by rule 351
-+ 	STRING	reduce by rule 351
-+ 	EOF	reduce by rule 351
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 392:
-+ 
-+ 	labtys : labtys1 .  (reduce by rule 375)
-+ 
-+ 	RBRACE	reduce by rule 375
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 393:
-+ 
-+ 	aty : LBRACE labtys . RBRACE 
-+ 
-+ 	RBRACE	shift 497
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 394:
-+ 
-+ 	labtys1 : labty .  (reduce by rule 376)
-+ 	labtys1 : labty . COMMA labtys1 
-+ 
-+ 	RBRACE	reduce by rule 376
-+ 	COMMA	shift 498
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 395:
-+ 
-+ 	labty : id . COLON ty 
-+ 
-+ 	COLON	shift 499
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 396:
-+ 
-+ 	appty : LPAREN tys2 . RPAREN tident 
-+ 
-+ 	RPAREN	shift 500
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 397:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	aty : LPAREN ty . RPAREN 
-+ 	tys2 : ty . COMMA ty 
-+ 	tys2 : ty . COMMA tys2 
-+ 
-+ 	RPAREN	shift 502
-+ 	COMMA	shift 501
-+ 	ARROW	shift 388
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 398:
-+ 
-+ 	aty : LPAREN RPAREN .  (reduce by rule 354)
-+ 
-+ 	ARCHITECTURE	reduce by rule 354
-+ 	END	reduce by rule 354
-+ 	LOCAL	reduce by rule 354
-+ 	IN	reduce by rule 354
-+ 	OF	reduce by rule 354
-+ 	DATATYPE	reduce by rule 354
-+ 	TYPE	reduce by rule 354
-+ 	EQ	reduce by rule 354
-+ 	TIMES	reduce by rule 354
-+ 	AND	reduce by rule 354
-+ 	LPAREN	reduce by rule 354
-+ 	RPAREN	reduce by rule 354
-+ 	RBRACKET	reduce by rule 354
-+ 	RBRACE	reduce by rule 354
-+ 	SEMICOLON	reduce by rule 354
-+ 	LDQUOTE	reduce by rule 354
-+ 	CELLSET	reduce by rule 354
-+ 	STORAGE	reduce by rule 354
-+ 	LOCATIONS	reduce by rule 354
-+ 	COMMA	reduce by rule 354
-+ 	COLON	reduce by rule 354
-+ 	BAR	reduce by rule 354
-+ 	ARROW	reduce by rule 354
-+ 	DARROW	reduce by rule 354
-+ 	BITS	reduce by rule 354
-+ 	THEN	reduce by rule 354
-+ 	ELSE	reduce by rule 354
-+ 	STRUCTURE	reduce by rule 354
-+ 	FUNCTOR	reduce by rule 354
-+ 	SIGNATURE	reduce by rule 354
-+ 	WHERE	reduce by rule 354
-+ 	SHARING	reduce by rule 354
-+ 	INSTRUCTION	reduce by rule 354
-+ 	CELL	reduce by rule 354
-+ 	VLIW	reduce by rule 354
-+ 	SUPERSCALAR	reduce by rule 354
-+ 	WITHTYPE	reduce by rule 354
-+ 	FUN	reduce by rule 354
-+ 	VAL	reduce by rule 354
-+ 	INCLUDE	reduce by rule 354
-+ 	OPEN	reduce by rule 354
-+ 	LITTLE	reduce by rule 354
-+ 	BIG	reduce by rule 354
-+ 	PIPELINE	reduce by rule 354
-+ 	LOWERCASE	reduce by rule 354
-+ 	UPPERCASE	reduce by rule 354
-+ 	VERBATIM	reduce by rule 354
-+ 	RTL	reduce by rule 354
-+ 	SPAN	reduce by rule 354
-+ 	DELAYSLOT	reduce by rule 354
-+ 	NONFIX	reduce by rule 354
-+ 	INFIX	reduce by rule 354
-+ 	INFIXR	reduce by rule 354
-+ 	DEBUG	reduce by rule 354
-+ 	ASM_COLON	reduce by rule 354
-+ 	MC_COLON	reduce by rule 354
-+ 	RTL_COLON	reduce by rule 354
-+ 	DELAYSLOT_COLON	reduce by rule 354
-+ 	NULLIFIED_COLON	reduce by rule 354
-+ 	PADDING_COLON	reduce by rule 354
-+ 	RESOURCE	reduce by rule 354
-+ 	CPU	reduce by rule 354
-+ 	LATENCY	reduce by rule 354
-+ 	EXCEPTION	reduce by rule 354
-+ 	ID	reduce by rule 354
-+ 	SYMBOL	reduce by rule 354
-+ 	WORD	reduce by rule 354
-+ 	INT	reduce by rule 354
-+ 	STRING	reduce by rule 354
-+ 	EOF	reduce by rule 354
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 399:
-+ 
-+ 	aty : DOLLAR id .  (reduce by rule 353)
-+ 
-+ 	ARCHITECTURE	reduce by rule 353
-+ 	END	reduce by rule 353
-+ 	LOCAL	reduce by rule 353
-+ 	IN	reduce by rule 353
-+ 	OF	reduce by rule 353
-+ 	DATATYPE	reduce by rule 353
-+ 	TYPE	reduce by rule 353
-+ 	EQ	reduce by rule 353
-+ 	TIMES	reduce by rule 353
-+ 	AND	reduce by rule 353
-+ 	LPAREN	reduce by rule 353
-+ 	RPAREN	reduce by rule 353
-+ 	RBRACKET	reduce by rule 353
-+ 	RBRACE	reduce by rule 353
-+ 	SEMICOLON	reduce by rule 353
-+ 	LDQUOTE	reduce by rule 353
-+ 	CELLSET	reduce by rule 353
-+ 	STORAGE	reduce by rule 353
-+ 	LOCATIONS	reduce by rule 353
-+ 	COMMA	reduce by rule 353
-+ 	COLON	reduce by rule 353
-+ 	BAR	reduce by rule 353
-+ 	ARROW	reduce by rule 353
-+ 	DARROW	reduce by rule 353
-+ 	BITS	reduce by rule 353
-+ 	THEN	reduce by rule 353
-+ 	ELSE	reduce by rule 353
-+ 	STRUCTURE	reduce by rule 353
-+ 	FUNCTOR	reduce by rule 353
-+ 	SIGNATURE	reduce by rule 353
-+ 	WHERE	reduce by rule 353
-+ 	SHARING	reduce by rule 353
-+ 	INSTRUCTION	reduce by rule 353
-+ 	CELL	reduce by rule 353
-+ 	VLIW	reduce by rule 353
-+ 	SUPERSCALAR	reduce by rule 353
-+ 	WITHTYPE	reduce by rule 353
-+ 	FUN	reduce by rule 353
-+ 	VAL	reduce by rule 353
-+ 	INCLUDE	reduce by rule 353
-+ 	OPEN	reduce by rule 353
-+ 	LITTLE	reduce by rule 353
-+ 	BIG	reduce by rule 353
-+ 	PIPELINE	reduce by rule 353
-+ 	LOWERCASE	reduce by rule 353
-+ 	UPPERCASE	reduce by rule 353
-+ 	VERBATIM	reduce by rule 353
-+ 	RTL	reduce by rule 353
-+ 	SPAN	reduce by rule 353
-+ 	DELAYSLOT	reduce by rule 353
-+ 	NONFIX	reduce by rule 353
-+ 	INFIX	reduce by rule 353
-+ 	INFIXR	reduce by rule 353
-+ 	DEBUG	reduce by rule 353
-+ 	ASM_COLON	reduce by rule 353
-+ 	MC_COLON	reduce by rule 353
-+ 	RTL_COLON	reduce by rule 353
-+ 	DELAYSLOT_COLON	reduce by rule 353
-+ 	NULLIFIED_COLON	reduce by rule 353
-+ 	PADDING_COLON	reduce by rule 353
-+ 	RESOURCE	reduce by rule 353
-+ 	CPU	reduce by rule 353
-+ 	LATENCY	reduce by rule 353
-+ 	EXCEPTION	reduce by rule 353
-+ 	ID	reduce by rule 353
-+ 	SYMBOL	reduce by rule 353
-+ 	WORD	reduce by rule 353
-+ 	INT	reduce by rule 353
-+ 	STRING	reduce by rule 353
-+ 	EOF	reduce by rule 353
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 400:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	latencyclause : id pat EQ exp .  (reduce by rule 58)
-+ 
-+ 	ARCHITECTURE	reduce by rule 58
-+ 	END	reduce by rule 58
-+ 	LOCAL	reduce by rule 58
-+ 	IN	reduce by rule 58
-+ 	DATATYPE	reduce by rule 58
-+ 	TYPE	reduce by rule 58
-+ 	AND	reduce by rule 58
-+ 	RPAREN	reduce by rule 58
-+ 	SEMICOLON	reduce by rule 58
-+ 	STORAGE	reduce by rule 58
-+ 	LOCATIONS	reduce by rule 58
-+ 	BAR	reduce by rule 58
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 58
-+ 	FUNCTOR	reduce by rule 58
-+ 	SIGNATURE	reduce by rule 58
-+ 	SHARING	reduce by rule 58
-+ 	INSTRUCTION	reduce by rule 58
-+ 	VLIW	reduce by rule 58
-+ 	SUPERSCALAR	reduce by rule 58
-+ 	FUN	reduce by rule 58
-+ 	VAL	reduce by rule 58
-+ 	INCLUDE	reduce by rule 58
-+ 	OPEN	reduce by rule 58
-+ 	LITTLE	reduce by rule 58
-+ 	BIG	reduce by rule 58
-+ 	PIPELINE	reduce by rule 58
-+ 	LOWERCASE	reduce by rule 58
-+ 	UPPERCASE	reduce by rule 58
-+ 	VERBATIM	reduce by rule 58
-+ 	RTL	reduce by rule 58
-+ 	NONFIX	reduce by rule 58
-+ 	INFIX	reduce by rule 58
-+ 	INFIXR	reduce by rule 58
-+ 	DEBUG	reduce by rule 58
-+ 	RESOURCE	reduce by rule 58
-+ 	CPU	reduce by rule 58
-+ 	LATENCY	reduce by rule 58
-+ 	EXCEPTION	reduce by rule 58
-+ 	EOF	reduce by rule 58
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 401:
-+ 
-+ 	cpubind : id aliases int LBRACKET . resources RBRACKET 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	INT	shift 64
-+ 
-+ 	id	goto 506
-+ 	int	goto 505
-+ 	resources	goto 504
-+ 	resource	goto 503
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 402:
-+ 
-+ 	exp : exp HANDLE . clauses 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 413
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	clause	goto 412
-+ 	clauses	goto 507
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 403:
-+ 
-+ 	aexp2 : aexp2 . AT LBRACKET slices RBRACKET 
-+ 	appexp : appexp aexp2 .  (reduce by rule 273)
-+ 
-+ 	ARCHITECTURE	reduce by rule 273
-+ 	END	reduce by rule 273
-+ 	LOCAL	reduce by rule 273
-+ 	IN	reduce by rule 273
-+ 	OF	reduce by rule 273
-+ 	DATATYPE	reduce by rule 273
-+ 	TYPE	reduce by rule 273
-+ 	EQ	reduce by rule 273
-+ 	DOLLAR	reduce by rule 273
-+ 	TIMES	reduce by rule 273
-+ 	AND	reduce by rule 273
-+ 	DEREF	reduce by rule 273
-+ 	NOT	reduce by rule 273
-+ 	LLBRACKET	reduce by rule 273
-+ 	LHASHBRACKET	reduce by rule 273
-+ 	LPAREN	reduce by rule 273
-+ 	RPAREN	reduce by rule 273
-+ 	LBRACKET	reduce by rule 273
-+ 	RBRACKET	reduce by rule 273
-+ 	LBRACE	reduce by rule 273
-+ 	RBRACE	reduce by rule 273
-+ 	SEMICOLON	reduce by rule 273
-+ 	LDQUOTE	reduce by rule 273
-+ 	RMETA	reduce by rule 273
-+ 	CELLSET	reduce by rule 273
-+ 	STORAGE	reduce by rule 273
-+ 	LOCATIONS	reduce by rule 273
-+ 	HASH	reduce by rule 273
-+ 	COMMA	reduce by rule 273
-+ 	COLON	reduce by rule 273
-+ 	AT	shift 404
-+ 	BAR	reduce by rule 273
-+ 	DARROW	reduce by rule 273
-+ 	THEN	reduce by rule 273
-+ 	ELSE	reduce by rule 273
-+ 	TRUE	reduce by rule 273
-+ 	FALSE	reduce by rule 273
-+ 	HANDLE	reduce by rule 273
-+ 	LET	reduce by rule 273
-+ 	STRUCTURE	reduce by rule 273
-+ 	FUNCTOR	reduce by rule 273
-+ 	SIGNATURE	reduce by rule 273
-+ 	SHARING	reduce by rule 273
-+ 	INSTRUCTION	reduce by rule 273
-+ 	VLIW	reduce by rule 273
-+ 	SUPERSCALAR	reduce by rule 273
-+ 	WITHTYPE	reduce by rule 273
-+ 	FUN	reduce by rule 273
-+ 	VAL	reduce by rule 273
-+ 	INCLUDE	reduce by rule 273
-+ 	OPEN	reduce by rule 273
-+ 	OP	reduce by rule 273
-+ 	LITTLE	reduce by rule 273
-+ 	BIG	reduce by rule 273
-+ 	PIPELINE	reduce by rule 273
-+ 	LOWERCASE	reduce by rule 273
-+ 	UPPERCASE	reduce by rule 273
-+ 	VERBATIM	reduce by rule 273
-+ 	RTL	reduce by rule 273
-+ 	SPAN	reduce by rule 273
-+ 	DELAYSLOT	reduce by rule 273
-+ 	ALWAYS	reduce by rule 273
-+ 	NEVER	reduce by rule 273
-+ 	NONFIX	reduce by rule 273
-+ 	INFIX	reduce by rule 273
-+ 	INFIXR	reduce by rule 273
-+ 	DEBUG	reduce by rule 273
-+ 	ASM_COLON	reduce by rule 273
-+ 	MC_COLON	reduce by rule 273
-+ 	RTL_COLON	reduce by rule 273
-+ 	DELAYSLOT_COLON	reduce by rule 273
-+ 	NULLIFIED_COLON	reduce by rule 273
-+ 	PADDING_COLON	reduce by rule 273
-+ 	RESOURCE	reduce by rule 273
-+ 	CPU	reduce by rule 273
-+ 	LATENCY	reduce by rule 273
-+ 	EXCEPTION	reduce by rule 273
-+ 	ID	reduce by rule 273
-+ 	SYMBOL	reduce by rule 273
-+ 	WORD	reduce by rule 273
-+ 	INT	reduce by rule 273
-+ 	INTINF	reduce by rule 273
-+ 	REAL	reduce by rule 273
-+ 	STRING	reduce by rule 273
-+ 	CHAR	reduce by rule 273
-+ 	EOF	reduce by rule 273
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 404:
-+ 
-+ 	aexp2 : aexp2 AT . LBRACKET slices RBRACKET 
-+ 
-+ 	LBRACKET	shift 508
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 405:
-+ 
-+ 	aexp : sym CONCAT . LBRACKET exps RBRACKET 
-+ 	aexp : sym CONCAT . LBRACKET exps RBRACKET CONCAT sym 
-+ 
-+ 	LBRACKET	shift 509
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 406:
-+ 
-+ 	aexp : OP symb .  (reduce by rule 244)
-+ 
-+ 	ARCHITECTURE	reduce by rule 244
-+ 	END	reduce by rule 244
-+ 	LOCAL	reduce by rule 244
-+ 	IN	reduce by rule 244
-+ 	OF	reduce by rule 244
-+ 	DATATYPE	reduce by rule 244
-+ 	TYPE	reduce by rule 244
-+ 	EQ	reduce by rule 244
-+ 	DOLLAR	reduce by rule 244
-+ 	TIMES	reduce by rule 244
-+ 	AND	reduce by rule 244
-+ 	DEREF	reduce by rule 244
-+ 	NOT	reduce by rule 244
-+ 	LLBRACKET	reduce by rule 244
-+ 	LHASHBRACKET	reduce by rule 244
-+ 	LPAREN	reduce by rule 244
-+ 	RPAREN	reduce by rule 244
-+ 	LBRACKET	reduce by rule 244
-+ 	RBRACKET	reduce by rule 244
-+ 	LBRACE	reduce by rule 244
-+ 	RBRACE	reduce by rule 244
-+ 	SEMICOLON	reduce by rule 244
-+ 	LDQUOTE	reduce by rule 244
-+ 	RMETA	reduce by rule 244
-+ 	CELLSET	reduce by rule 244
-+ 	STORAGE	reduce by rule 244
-+ 	LOCATIONS	reduce by rule 244
-+ 	HASH	reduce by rule 244
-+ 	COMMA	reduce by rule 244
-+ 	COLON	reduce by rule 244
-+ 	AT	reduce by rule 244
-+ 	BAR	reduce by rule 244
-+ 	DARROW	reduce by rule 244
-+ 	THEN	reduce by rule 244
-+ 	ELSE	reduce by rule 244
-+ 	TRUE	reduce by rule 244
-+ 	FALSE	reduce by rule 244
-+ 	HANDLE	reduce by rule 244
-+ 	LET	reduce by rule 244
-+ 	STRUCTURE	reduce by rule 244
-+ 	FUNCTOR	reduce by rule 244
-+ 	SIGNATURE	reduce by rule 244
-+ 	SHARING	reduce by rule 244
-+ 	INSTRUCTION	reduce by rule 244
-+ 	VLIW	reduce by rule 244
-+ 	SUPERSCALAR	reduce by rule 244
-+ 	WITHTYPE	reduce by rule 244
-+ 	FUN	reduce by rule 244
-+ 	VAL	reduce by rule 244
-+ 	INCLUDE	reduce by rule 244
-+ 	OPEN	reduce by rule 244
-+ 	OP	reduce by rule 244
-+ 	LITTLE	reduce by rule 244
-+ 	BIG	reduce by rule 244
-+ 	PIPELINE	reduce by rule 244
-+ 	LOWERCASE	reduce by rule 244
-+ 	UPPERCASE	reduce by rule 244
-+ 	VERBATIM	reduce by rule 244
-+ 	RTL	reduce by rule 244
-+ 	SPAN	reduce by rule 244
-+ 	DELAYSLOT	reduce by rule 244
-+ 	ALWAYS	reduce by rule 244
-+ 	NEVER	reduce by rule 244
-+ 	NONFIX	reduce by rule 244
-+ 	INFIX	reduce by rule 244
-+ 	INFIXR	reduce by rule 244
-+ 	DEBUG	reduce by rule 244
-+ 	ASM_COLON	reduce by rule 244
-+ 	MC_COLON	reduce by rule 244
-+ 	RTL_COLON	reduce by rule 244
-+ 	DELAYSLOT_COLON	reduce by rule 244
-+ 	NULLIFIED_COLON	reduce by rule 244
-+ 	PADDING_COLON	reduce by rule 244
-+ 	RESOURCE	reduce by rule 244
-+ 	CPU	reduce by rule 244
-+ 	LATENCY	reduce by rule 244
-+ 	EXCEPTION	reduce by rule 244
-+ 	ID	reduce by rule 244
-+ 	SYMBOL	reduce by rule 244
-+ 	WORD	reduce by rule 244
-+ 	INT	reduce by rule 244
-+ 	INTINF	reduce by rule 244
-+ 	REAL	reduce by rule 244
-+ 	STRING	reduce by rule 244
-+ 	CHAR	reduce by rule 244
-+ 	EOF	reduce by rule 244
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 407:
-+ 
-+ 	aexp : LET decls . IN expseq END 
-+ 
-+ 	IN	shift 510
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 408:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	exp : RAISE exp .  (reduce by rule 279)
-+ 
-+ 	ARCHITECTURE	reduce by rule 279
-+ 	END	reduce by rule 279
-+ 	LOCAL	reduce by rule 279
-+ 	IN	reduce by rule 279
-+ 	OF	reduce by rule 279
-+ 	DATATYPE	reduce by rule 279
-+ 	TYPE	reduce by rule 279
-+ 	AND	reduce by rule 279
-+ 	LPAREN	reduce by rule 279
-+ 	RPAREN	reduce by rule 279
-+ 	RBRACKET	reduce by rule 279
-+ 	RBRACE	reduce by rule 279
-+ 	SEMICOLON	reduce by rule 279
-+ 	RMETA	reduce by rule 279
-+ 	CELLSET	reduce by rule 279
-+ 	STORAGE	reduce by rule 279
-+ 	LOCATIONS	reduce by rule 279
-+ 	COMMA	reduce by rule 279
-+ 	COLON	reduce by rule 279
-+ 	BAR	reduce by rule 279
-+ 	DARROW	reduce by rule 279
-+ 	THEN	reduce by rule 279
-+ 	ELSE	reduce by rule 279
-+ 	HANDLE	reduce by rule 279
-+ 	STRUCTURE	reduce by rule 279
-+ 	FUNCTOR	reduce by rule 279
-+ 	SIGNATURE	reduce by rule 279
-+ 	SHARING	reduce by rule 279
-+ 	INSTRUCTION	reduce by rule 279
-+ 	VLIW	reduce by rule 279
-+ 	SUPERSCALAR	reduce by rule 279
-+ 	WITHTYPE	reduce by rule 279
-+ 	FUN	reduce by rule 279
-+ 	VAL	reduce by rule 279
-+ 	INCLUDE	reduce by rule 279
-+ 	OPEN	reduce by rule 279
-+ 	LITTLE	reduce by rule 279
-+ 	BIG	reduce by rule 279
-+ 	PIPELINE	reduce by rule 279
-+ 	LOWERCASE	reduce by rule 279
-+ 	UPPERCASE	reduce by rule 279
-+ 	VERBATIM	reduce by rule 279
-+ 	RTL	reduce by rule 279
-+ 	SPAN	reduce by rule 279
-+ 	DELAYSLOT	reduce by rule 279
-+ 	NONFIX	reduce by rule 279
-+ 	INFIX	reduce by rule 279
-+ 	INFIXR	reduce by rule 279
-+ 	DEBUG	reduce by rule 279
-+ 	ASM_COLON	reduce by rule 279
-+ 	MC_COLON	reduce by rule 279
-+ 	RTL_COLON	reduce by rule 279
-+ 	DELAYSLOT_COLON	reduce by rule 279
-+ 	NULLIFIED_COLON	reduce by rule 279
-+ 	PADDING_COLON	reduce by rule 279
-+ 	RESOURCE	reduce by rule 279
-+ 	CPU	reduce by rule 279
-+ 	LATENCY	reduce by rule 279
-+ 	EXCEPTION	reduce by rule 279
-+ 	ID	reduce by rule 279
-+ 	SYMBOL	reduce by rule 279
-+ 	WORD	reduce by rule 279
-+ 	INT	reduce by rule 279
-+ 	EOF	reduce by rule 279
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 409:
-+ 
-+ 	exp : IF typedexp . THEN typedexp ELSE exp 
-+ 	typedexp : typedexp . COLON ty 
-+ 
-+ 	COLON	shift 458
-+ 	THEN	shift 511
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 410:
-+ 
-+ 	aexp : HASH id .  (reduce by rule 243)
-+ 
-+ 	ARCHITECTURE	reduce by rule 243
-+ 	END	reduce by rule 243
-+ 	LOCAL	reduce by rule 243
-+ 	IN	reduce by rule 243
-+ 	OF	reduce by rule 243
-+ 	DATATYPE	reduce by rule 243
-+ 	TYPE	reduce by rule 243
-+ 	EQ	reduce by rule 243
-+ 	DOLLAR	reduce by rule 243
-+ 	TIMES	reduce by rule 243
-+ 	AND	reduce by rule 243
-+ 	DEREF	reduce by rule 243
-+ 	NOT	reduce by rule 243
-+ 	LLBRACKET	reduce by rule 243
-+ 	LHASHBRACKET	reduce by rule 243
-+ 	LPAREN	reduce by rule 243
-+ 	RPAREN	reduce by rule 243
-+ 	LBRACKET	reduce by rule 243
-+ 	RBRACKET	reduce by rule 243
-+ 	LBRACE	reduce by rule 243
-+ 	RBRACE	reduce by rule 243
-+ 	SEMICOLON	reduce by rule 243
-+ 	LDQUOTE	reduce by rule 243
-+ 	RMETA	reduce by rule 243
-+ 	CELLSET	reduce by rule 243
-+ 	STORAGE	reduce by rule 243
-+ 	LOCATIONS	reduce by rule 243
-+ 	HASH	reduce by rule 243
-+ 	COMMA	reduce by rule 243
-+ 	COLON	reduce by rule 243
-+ 	AT	reduce by rule 243
-+ 	BAR	reduce by rule 243
-+ 	DARROW	reduce by rule 243
-+ 	THEN	reduce by rule 243
-+ 	ELSE	reduce by rule 243
-+ 	TRUE	reduce by rule 243
-+ 	FALSE	reduce by rule 243
-+ 	HANDLE	reduce by rule 243
-+ 	LET	reduce by rule 243
-+ 	STRUCTURE	reduce by rule 243
-+ 	FUNCTOR	reduce by rule 243
-+ 	SIGNATURE	reduce by rule 243
-+ 	SHARING	reduce by rule 243
-+ 	INSTRUCTION	reduce by rule 243
-+ 	VLIW	reduce by rule 243
-+ 	SUPERSCALAR	reduce by rule 243
-+ 	WITHTYPE	reduce by rule 243
-+ 	FUN	reduce by rule 243
-+ 	VAL	reduce by rule 243
-+ 	INCLUDE	reduce by rule 243
-+ 	OPEN	reduce by rule 243
-+ 	OP	reduce by rule 243
-+ 	LITTLE	reduce by rule 243
-+ 	BIG	reduce by rule 243
-+ 	PIPELINE	reduce by rule 243
-+ 	LOWERCASE	reduce by rule 243
-+ 	UPPERCASE	reduce by rule 243
-+ 	VERBATIM	reduce by rule 243
-+ 	RTL	reduce by rule 243
-+ 	SPAN	reduce by rule 243
-+ 	DELAYSLOT	reduce by rule 243
-+ 	ALWAYS	reduce by rule 243
-+ 	NEVER	reduce by rule 243
-+ 	NONFIX	reduce by rule 243
-+ 	INFIX	reduce by rule 243
-+ 	INFIXR	reduce by rule 243
-+ 	DEBUG	reduce by rule 243
-+ 	ASM_COLON	reduce by rule 243
-+ 	MC_COLON	reduce by rule 243
-+ 	RTL_COLON	reduce by rule 243
-+ 	DELAYSLOT_COLON	reduce by rule 243
-+ 	NULLIFIED_COLON	reduce by rule 243
-+ 	PADDING_COLON	reduce by rule 243
-+ 	RESOURCE	reduce by rule 243
-+ 	CPU	reduce by rule 243
-+ 	LATENCY	reduce by rule 243
-+ 	EXCEPTION	reduce by rule 243
-+ 	ID	reduce by rule 243
-+ 	SYMBOL	reduce by rule 243
-+ 	WORD	reduce by rule 243
-+ 	INT	reduce by rule 243
-+ 	INTINF	reduce by rule 243
-+ 	REAL	reduce by rule 243
-+ 	STRING	reduce by rule 243
-+ 	CHAR	reduce by rule 243
-+ 	EOF	reduce by rule 243
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 411:
-+ 
-+ 	exp : FN clauses .  (reduce by rule 277)
-+ 
-+ 	ARCHITECTURE	reduce by rule 277
-+ 	END	reduce by rule 277
-+ 	LOCAL	reduce by rule 277
-+ 	IN	reduce by rule 277
-+ 	OF	reduce by rule 277
-+ 	DATATYPE	reduce by rule 277
-+ 	TYPE	reduce by rule 277
-+ 	AND	reduce by rule 277
-+ 	LPAREN	reduce by rule 277
-+ 	RPAREN	reduce by rule 277
-+ 	RBRACKET	reduce by rule 277
-+ 	RBRACE	reduce by rule 277
-+ 	SEMICOLON	reduce by rule 277
-+ 	RMETA	reduce by rule 277
-+ 	CELLSET	reduce by rule 277
-+ 	STORAGE	reduce by rule 277
-+ 	LOCATIONS	reduce by rule 277
-+ 	COMMA	reduce by rule 277
-+ 	COLON	reduce by rule 277
-+ 	BAR	reduce by rule 277
-+ 	DARROW	reduce by rule 277
-+ 	THEN	reduce by rule 277
-+ 	ELSE	reduce by rule 277
-+ 	HANDLE	reduce by rule 277
-+ 	STRUCTURE	reduce by rule 277
-+ 	FUNCTOR	reduce by rule 277
-+ 	SIGNATURE	reduce by rule 277
-+ 	SHARING	reduce by rule 277
-+ 	INSTRUCTION	reduce by rule 277
-+ 	VLIW	reduce by rule 277
-+ 	SUPERSCALAR	reduce by rule 277
-+ 	WITHTYPE	reduce by rule 277
-+ 	FUN	reduce by rule 277
-+ 	VAL	reduce by rule 277
-+ 	INCLUDE	reduce by rule 277
-+ 	OPEN	reduce by rule 277
-+ 	LITTLE	reduce by rule 277
-+ 	BIG	reduce by rule 277
-+ 	PIPELINE	reduce by rule 277
-+ 	LOWERCASE	reduce by rule 277
-+ 	UPPERCASE	reduce by rule 277
-+ 	VERBATIM	reduce by rule 277
-+ 	RTL	reduce by rule 277
-+ 	SPAN	reduce by rule 277
-+ 	DELAYSLOT	reduce by rule 277
-+ 	NONFIX	reduce by rule 277
-+ 	INFIX	reduce by rule 277
-+ 	INFIXR	reduce by rule 277
-+ 	DEBUG	reduce by rule 277
-+ 	ASM_COLON	reduce by rule 277
-+ 	MC_COLON	reduce by rule 277
-+ 	RTL_COLON	reduce by rule 277
-+ 	DELAYSLOT_COLON	reduce by rule 277
-+ 	NULLIFIED_COLON	reduce by rule 277
-+ 	PADDING_COLON	reduce by rule 277
-+ 	RESOURCE	reduce by rule 277
-+ 	CPU	reduce by rule 277
-+ 	LATENCY	reduce by rule 277
-+ 	EXCEPTION	reduce by rule 277
-+ 	ID	reduce by rule 277
-+ 	SYMBOL	reduce by rule 277
-+ 	WORD	reduce by rule 277
-+ 	INT	reduce by rule 277
-+ 	EOF	reduce by rule 277
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 412: shift/reduce conflict (shift BAR, reduce by rule 341)
-+ 
-+ state 412:
-+ 
-+ 	clauses : clause .  (reduce by rule 341)
-+ 	clauses : clause . BAR clauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 341
-+ 	END	reduce by rule 341
-+ 	LOCAL	reduce by rule 341
-+ 	IN	reduce by rule 341
-+ 	OF	reduce by rule 341
-+ 	DATATYPE	reduce by rule 341
-+ 	TYPE	reduce by rule 341
-+ 	AND	reduce by rule 341
-+ 	LPAREN	reduce by rule 341
-+ 	RPAREN	reduce by rule 341
-+ 	RBRACKET	reduce by rule 341
-+ 	RBRACE	reduce by rule 341
-+ 	SEMICOLON	reduce by rule 341
-+ 	RMETA	reduce by rule 341
-+ 	CELLSET	reduce by rule 341
-+ 	STORAGE	reduce by rule 341
-+ 	LOCATIONS	reduce by rule 341
-+ 	COMMA	reduce by rule 341
-+ 	COLON	reduce by rule 341
-+ 	BAR	shift 512
-+ 	DARROW	reduce by rule 341
-+ 	THEN	reduce by rule 341
-+ 	ELSE	reduce by rule 341
-+ 	HANDLE	reduce by rule 341
-+ 	STRUCTURE	reduce by rule 341
-+ 	FUNCTOR	reduce by rule 341
-+ 	SIGNATURE	reduce by rule 341
-+ 	SHARING	reduce by rule 341
-+ 	INSTRUCTION	reduce by rule 341
-+ 	VLIW	reduce by rule 341
-+ 	SUPERSCALAR	reduce by rule 341
-+ 	WITHTYPE	reduce by rule 341
-+ 	FUN	reduce by rule 341
-+ 	VAL	reduce by rule 341
-+ 	INCLUDE	reduce by rule 341
-+ 	OPEN	reduce by rule 341
-+ 	LITTLE	reduce by rule 341
-+ 	BIG	reduce by rule 341
-+ 	PIPELINE	reduce by rule 341
-+ 	LOWERCASE	reduce by rule 341
-+ 	UPPERCASE	reduce by rule 341
-+ 	VERBATIM	reduce by rule 341
-+ 	RTL	reduce by rule 341
-+ 	SPAN	reduce by rule 341
-+ 	DELAYSLOT	reduce by rule 341
-+ 	NONFIX	reduce by rule 341
-+ 	INFIX	reduce by rule 341
-+ 	INFIXR	reduce by rule 341
-+ 	DEBUG	reduce by rule 341
-+ 	ASM_COLON	reduce by rule 341
-+ 	MC_COLON	reduce by rule 341
-+ 	RTL_COLON	reduce by rule 341
-+ 	DELAYSLOT_COLON	reduce by rule 341
-+ 	NULLIFIED_COLON	reduce by rule 341
-+ 	PADDING_COLON	reduce by rule 341
-+ 	RESOURCE	reduce by rule 341
-+ 	CPU	reduce by rule 341
-+ 	LATENCY	reduce by rule 341
-+ 	EXCEPTION	reduce by rule 341
-+ 	ID	reduce by rule 341
-+ 	SYMBOL	reduce by rule 341
-+ 	WORD	reduce by rule 341
-+ 	INT	reduce by rule 341
-+ 	EOF	reduce by rule 341
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 413:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	clause : typedpat . guard cont DARROW exp 
-+ 
-+ 	COLON	shift 316
-+ 	DARROW	reduce by rule 339
-+ 	WHERE	shift 514
-+ 	EXCEPTION	reduce by rule 339
-+ 
-+ 	guard	goto 513
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 414:
-+ 
-+ 	asms : asm .  (reduce by rule 188)
-+ 	asms : asm . asms 
-+ 
-+ 	RDQUOTE	reduce by rule 188
-+ 	LMETA	shift 417
-+ 	ASMTEXT	shift 416
-+ 
-+ 	asms	goto 515
-+ 	asm	goto 414
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 415:
-+ 
-+ 	asm_strings : LDQUOTE asms . RDQUOTE 
-+ 	asm_strings : LDQUOTE asms . RDQUOTE asm_strings 
-+ 
-+ 	RDQUOTE	shift 516
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 416:
-+ 
-+ 	asm : ASMTEXT .  (reduce by rule 191)
-+ 
-+ 	RDQUOTE	reduce by rule 191
-+ 	LMETA	reduce by rule 191
-+ 	ASMTEXT	reduce by rule 191
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 417:
-+ 
-+ 	asm : LMETA . exp RMETA 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 517
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 418:
-+ 
-+ 	labexps : labexp .  (reduce by rule 268)
-+ 	labexps : labexp . COMMA labexps 
-+ 
-+ 	RBRACE	reduce by rule 268
-+ 	COMMA	shift 518
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 419:
-+ 
-+ 	labexps0 : labexps .  (reduce by rule 267)
-+ 
-+ 	RBRACE	reduce by rule 267
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 420:
-+ 
-+ 	aexp : LBRACE labexps0 . RBRACE 
-+ 
-+ 	RBRACE	shift 519
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 421:
-+ 
-+ 	labexp : id . EQ typedexp 
-+ 	labexp : id .  (reduce by rule 271)
-+ 
-+ 	EQ	shift 520
-+ 	RBRACE	reduce by rule 271
-+ 	COMMA	reduce by rule 271
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 422:
-+ 
-+ 	exps : exps1 .  (reduce by rule 289)
-+ 
-+ 	RBRACKET	reduce by rule 289
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 423:
-+ 
-+ 	aexp : LBRACKET exps . RBRACKET 
-+ 	aexp : LBRACKET exps . RBRACKET CONCAT sym 
-+ 
-+ 	RBRACKET	shift 521
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 424:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	exps1 : typedexp .  (reduce by rule 285)
-+ 	exps1 : typedexp . COMMA exps1 
-+ 
-+ 	RPAREN	reduce by rule 285
-+ 	RBRACKET	reduce by rule 285
-+ 	COMMA	shift 522
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 425:
-+ 
-+ 	aexp : LPAREN expseq2 . RPAREN 
-+ 
-+ 	RPAREN	shift 523
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 426:
-+ 
-+ 	aexp : LPAREN exps2 . RPAREN 
-+ 
-+ 	RPAREN	shift 524
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 427:
-+ 
-+ 	aexp : LPAREN typedexp . RPAREN 
-+ 	typedexp : typedexp . COLON ty 
-+ 	exps2 : typedexp . COMMA exps1 
-+ 	expseq2 : typedexp . SEMICOLON expseq 
-+ 
-+ 	RPAREN	shift 527
-+ 	SEMICOLON	shift 526
-+ 	COMMA	shift 525
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 428: shift/reduce conflict (shift RPAREN, reduce by rule 417)
-+ 
-+ state 428:
-+ 
-+ 	sym : symb .  (reduce by rule 417)
-+ 	aexp : LPAREN symb . RPAREN 
-+ 
-+ 	EQ	reduce by rule 417
-+ 	DOLLAR	reduce by rule 417
-+ 	TIMES	reduce by rule 417
-+ 	DEREF	reduce by rule 417
-+ 	NOT	reduce by rule 417
-+ 	CONCAT	reduce by rule 417
-+ 	LLBRACKET	reduce by rule 417
-+ 	LHASHBRACKET	reduce by rule 417
-+ 	LPAREN	reduce by rule 417
-+ 	RPAREN	shift 528
-+ 	LBRACKET	reduce by rule 417
-+ 	LBRACE	reduce by rule 417
-+ 	SEMICOLON	reduce by rule 417
-+ 	LDQUOTE	reduce by rule 417
-+ 	CELLSET	reduce by rule 417
-+ 	HASH	reduce by rule 417
-+ 	COMMA	reduce by rule 417
-+ 	COLON	reduce by rule 417
-+ 	AT	reduce by rule 417
-+ 	TRUE	reduce by rule 417
-+ 	FALSE	reduce by rule 417
-+ 	HANDLE	reduce by rule 417
-+ 	LET	reduce by rule 417
-+ 	OP	reduce by rule 417
-+ 	ALWAYS	reduce by rule 417
-+ 	NEVER	reduce by rule 417
-+ 	ID	reduce by rule 417
-+ 	SYMBOL	reduce by rule 417
-+ 	WORD	reduce by rule 417
-+ 	INT	reduce by rule 417
-+ 	INTINF	reduce by rule 417
-+ 	REAL	reduce by rule 417
-+ 	STRING	reduce by rule 417
-+ 	CHAR	reduce by rule 417
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 429:
-+ 
-+ 	aexp : LPAREN RPAREN .  (reduce by rule 247)
-+ 
-+ 	ARCHITECTURE	reduce by rule 247
-+ 	END	reduce by rule 247
-+ 	LOCAL	reduce by rule 247
-+ 	IN	reduce by rule 247
-+ 	OF	reduce by rule 247
-+ 	DATATYPE	reduce by rule 247
-+ 	TYPE	reduce by rule 247
-+ 	EQ	reduce by rule 247
-+ 	DOLLAR	reduce by rule 247
-+ 	TIMES	reduce by rule 247
-+ 	AND	reduce by rule 247
-+ 	DEREF	reduce by rule 247
-+ 	NOT	reduce by rule 247
-+ 	LLBRACKET	reduce by rule 247
-+ 	LHASHBRACKET	reduce by rule 247
-+ 	LPAREN	reduce by rule 247
-+ 	RPAREN	reduce by rule 247
-+ 	LBRACKET	reduce by rule 247
-+ 	RBRACKET	reduce by rule 247
-+ 	LBRACE	reduce by rule 247
-+ 	RBRACE	reduce by rule 247
-+ 	SEMICOLON	reduce by rule 247
-+ 	LDQUOTE	reduce by rule 247
-+ 	RMETA	reduce by rule 247
-+ 	CELLSET	reduce by rule 247
-+ 	STORAGE	reduce by rule 247
-+ 	LOCATIONS	reduce by rule 247
-+ 	HASH	reduce by rule 247
-+ 	COMMA	reduce by rule 247
-+ 	COLON	reduce by rule 247
-+ 	AT	reduce by rule 247
-+ 	BAR	reduce by rule 247
-+ 	DARROW	reduce by rule 247
-+ 	THEN	reduce by rule 247
-+ 	ELSE	reduce by rule 247
-+ 	TRUE	reduce by rule 247
-+ 	FALSE	reduce by rule 247
-+ 	HANDLE	reduce by rule 247
-+ 	LET	reduce by rule 247
-+ 	STRUCTURE	reduce by rule 247
-+ 	FUNCTOR	reduce by rule 247
-+ 	SIGNATURE	reduce by rule 247
-+ 	SHARING	reduce by rule 247
-+ 	INSTRUCTION	reduce by rule 247
-+ 	VLIW	reduce by rule 247
-+ 	SUPERSCALAR	reduce by rule 247
-+ 	WITHTYPE	reduce by rule 247
-+ 	FUN	reduce by rule 247
-+ 	VAL	reduce by rule 247
-+ 	INCLUDE	reduce by rule 247
-+ 	OPEN	reduce by rule 247
-+ 	OP	reduce by rule 247
-+ 	LITTLE	reduce by rule 247
-+ 	BIG	reduce by rule 247
-+ 	PIPELINE	reduce by rule 247
-+ 	LOWERCASE	reduce by rule 247
-+ 	UPPERCASE	reduce by rule 247
-+ 	VERBATIM	reduce by rule 247
-+ 	RTL	reduce by rule 247
-+ 	SPAN	reduce by rule 247
-+ 	DELAYSLOT	reduce by rule 247
-+ 	ALWAYS	reduce by rule 247
-+ 	NEVER	reduce by rule 247
-+ 	NONFIX	reduce by rule 247
-+ 	INFIX	reduce by rule 247
-+ 	INFIXR	reduce by rule 247
-+ 	DEBUG	reduce by rule 247
-+ 	ASM_COLON	reduce by rule 247
-+ 	MC_COLON	reduce by rule 247
-+ 	RTL_COLON	reduce by rule 247
-+ 	DELAYSLOT_COLON	reduce by rule 247
-+ 	NULLIFIED_COLON	reduce by rule 247
-+ 	PADDING_COLON	reduce by rule 247
-+ 	RESOURCE	reduce by rule 247
-+ 	CPU	reduce by rule 247
-+ 	LATENCY	reduce by rule 247
-+ 	EXCEPTION	reduce by rule 247
-+ 	ID	reduce by rule 247
-+ 	SYMBOL	reduce by rule 247
-+ 	WORD	reduce by rule 247
-+ 	INT	reduce by rule 247
-+ 	INTINF	reduce by rule 247
-+ 	REAL	reduce by rule 247
-+ 	STRING	reduce by rule 247
-+ 	CHAR	reduce by rule 247
-+ 	EOF	reduce by rule 247
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 430:
-+ 
-+ 	aexp : LHASHBRACKET exps . RBRACKET 
-+ 
-+ 	RBRACKET	shift 529
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 431:
-+ 
-+ 	aexp : LLBRACKET rtlterms . RRBRACKET 
-+ 
-+ 	RRBRACKET	shift 530
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 432:
-+ 
-+ 	rtlterms : rtlterm .  (reduce by rule 118)
-+ 	rtlterms : rtlterm . rtlterms 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	RRBRACKET	reduce by rule 118
-+ 	CELLSET	shift 50
-+ 	HASH	shift 435
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	STRING	shift 91
-+ 
-+ 	id	goto 69
-+ 	sym	goto 434
-+ 	symb	goto 67
-+ 	string	goto 433
-+ 	rtlterm	goto 432
-+ 	rtlterms	goto 531
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 433:
-+ 
-+ 	rtlterm : string .  (reduce by rule 120)
-+ 
-+ 	TIMES	reduce by rule 120
-+ 	DEREF	reduce by rule 120
-+ 	NOT	reduce by rule 120
-+ 	RRBRACKET	reduce by rule 120
-+ 	CELLSET	reduce by rule 120
-+ 	HASH	reduce by rule 120
-+ 	ID	reduce by rule 120
-+ 	SYMBOL	reduce by rule 120
-+ 	STRING	reduce by rule 120
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 434:
-+ 
-+ 	rtlterm : sym .  (reduce by rule 121)
-+ 
-+ 	TIMES	reduce by rule 121
-+ 	DEREF	reduce by rule 121
-+ 	NOT	reduce by rule 121
-+ 	RRBRACKET	reduce by rule 121
-+ 	CELLSET	reduce by rule 121
-+ 	HASH	reduce by rule 121
-+ 	ID	reduce by rule 121
-+ 	SYMBOL	reduce by rule 121
-+ 	STRING	reduce by rule 121
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 435:
-+ 
-+ 	rtlterm : HASH . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 532
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 436:
-+ 
-+ 	aexp : DOLLAR id . LBRACKET exp region RBRACKET 
-+ 
-+ 	LBRACKET	shift 533
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 437:
-+ 
-+ 	exp : CASE typedexp . OF clauses 
-+ 	typedexp : typedexp . COLON ty 
-+ 
-+ 	OF	shift 534
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 438:
-+ 
-+ 	apat : sym CONCAT LBRACKET pats . RBRACKET 
-+ 	apat : sym CONCAT LBRACKET pats . RBRACKET CONCAT sym 
-+ 
-+ 	RBRACKET	shift 535
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 439:
-+ 
-+ 	mymldecl : RTL id LBRACE labpats0 RBRACE . EQ exp 
-+ 
-+ 	EQ	shift 536
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 440:
-+ 
-+ 	labpats : labpat COMMA labpats .  (reduce by rule 330)
-+ 
-+ 	RBRACE	reduce by rule 330
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 441:
-+ 
-+ 	labpats : labpat COMMA DOTDOT .  (reduce by rule 329)
-+ 
-+ 	RBRACE	reduce by rule 329
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 442:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	labpat : sym AS typedpat .  (reduce by rule 333)
-+ 
-+ 	RBRACE	reduce by rule 333
-+ 	COMMA	reduce by rule 333
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 443:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	labpat : sym WHERE typedexp .  (reduce by rule 334)
-+ 	labpat : sym WHERE typedexp . IN typedpat 
-+ 
-+ 	IN	shift 537
-+ 	RBRACE	reduce by rule 334
-+ 	COMMA	reduce by rule 334
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 444:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	labpat : sym EQ typedpat .  (reduce by rule 332)
-+ 
-+ 	RBRACE	reduce by rule 332
-+ 	COMMA	reduce by rule 332
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 445:
-+ 
-+ 	apat : LBRACKET pats RBRACKET CONCAT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 538
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 446:
-+ 
-+ 	typedpat : typedpat COLON ty .  (reduce by rule 318)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	AND	reduce by rule 318
-+ 	RPAREN	reduce by rule 318
-+ 	RBRACKET	reduce by rule 318
-+ 	RBRACE	reduce by rule 318
-+ 	COMMA	reduce by rule 318
-+ 	COLON	reduce by rule 318
-+ 	BAR	reduce by rule 318
-+ 	ARROW	shift 388
-+ 	DARROW	reduce by rule 318
-+ 	WHERE	reduce by rule 318
-+ 	EXCEPTION	reduce by rule 318
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 447:
-+ 
-+ 	pats1 : typedpat COMMA pats1 .  (reduce by rule 324)
-+ 
-+ 	RPAREN	reduce by rule 324
-+ 	RBRACKET	reduce by rule 324
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 448:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	apat : LPAREN typedpat WHERE typedexp . RPAREN 
-+ 	apat : LPAREN typedpat WHERE typedexp . IN typedpat RPAREN 
-+ 
-+ 	IN	shift 540
-+ 	RPAREN	shift 539
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 449:
-+ 
-+ 	orpats2 : typedpat BAR orpats2 .  (reduce by rule 307)
-+ 
-+ 	RPAREN	reduce by rule 307
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 450:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	orpats2 : typedpat . BAR typedpat 
-+ 	orpats2 : typedpat BAR typedpat .  (reduce by rule 306)
-+ 	orpats2 : typedpat . BAR orpats2 
-+ 
-+ 	RPAREN	reduce by rule 306
-+ 	COLON	shift 316
-+ 	BAR	shift 322
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 451:
-+ 
-+ 	pats2 : typedpat COMMA pats1 .  (reduce by rule 325)
-+ 
-+ 	RPAREN	reduce by rule 325
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 452:
-+ 
-+ 	andpats2 : typedpat AND andpats2 .  (reduce by rule 309)
-+ 
-+ 	RPAREN	reduce by rule 309
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 453:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	andpats2 : typedpat . AND typedpat 
-+ 	andpats2 : typedpat AND typedpat .  (reduce by rule 308)
-+ 	andpats2 : typedpat . AND andpats2 
-+ 
-+ 	AND	shift 325
-+ 	RPAREN	reduce by rule 308
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 454:
-+ 
-+ 	pipelineclause : id pat EQ LBRACKET . cycles0 RBRACKET 
-+ 
-+ 	LPAREN	shift 545
-+ 	RBRACKET	reduce by rule 45
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 544
-+ 	cycles0	goto 543
-+ 	cycles	goto 542
-+ 	cycle	goto 541
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 455:
-+ 
-+ 	sigsubs : sigsub AND . sigsubs 
-+ 
-+ 	TYPE	shift 333
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 332
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigsub	goto 331
-+ 	sigsubs	goto 546
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 456:
-+ 
-+ 	sigsub : ident EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 547
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 457:
-+ 
-+ 	sigsub : TYPE ident . EQ ty 
-+ 
-+ 	EQ	shift 548
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 458:
-+ 
-+ 	typedexp : typedexp COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 549
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 459:
-+ 
-+ 	funclause : apppat funguard return_ty cont . EQ typedexp 
-+ 
-+ 	EQ	shift 550
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 460:
-+ 
-+ 	cont : EXCEPTION . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 551
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 461:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	return_ty : COLON ty .  (reduce by rule 345)
-+ 
-+ 	EQ	reduce by rule 345
-+ 	ARROW	shift 388
-+ 	EXCEPTION	reduce by rule 345
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 462:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	funguard : WHERE LPAREN typedexp . RPAREN 
-+ 
-+ 	RPAREN	shift 552
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 463:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding . rtl nop nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 117
-+ 	END	reduce by rule 117
-+ 	LOCAL	reduce by rule 117
-+ 	IN	reduce by rule 117
-+ 	DATATYPE	reduce by rule 117
-+ 	TYPE	reduce by rule 117
-+ 	AND	reduce by rule 117
-+ 	RPAREN	reduce by rule 117
-+ 	SEMICOLON	reduce by rule 117
-+ 	STORAGE	reduce by rule 117
-+ 	LOCATIONS	reduce by rule 117
-+ 	BAR	reduce by rule 117
-+ 	STRUCTURE	reduce by rule 117
-+ 	FUNCTOR	reduce by rule 117
-+ 	SIGNATURE	reduce by rule 117
-+ 	SHARING	reduce by rule 117
-+ 	INSTRUCTION	reduce by rule 117
-+ 	VLIW	reduce by rule 117
-+ 	SUPERSCALAR	reduce by rule 117
-+ 	WITHTYPE	reduce by rule 117
-+ 	FUN	reduce by rule 117
-+ 	VAL	reduce by rule 117
-+ 	INCLUDE	reduce by rule 117
-+ 	OPEN	reduce by rule 117
-+ 	LITTLE	reduce by rule 117
-+ 	BIG	reduce by rule 117
-+ 	PIPELINE	reduce by rule 117
-+ 	LOWERCASE	reduce by rule 117
-+ 	UPPERCASE	reduce by rule 117
-+ 	VERBATIM	reduce by rule 117
-+ 	RTL	reduce by rule 117
-+ 	SPAN	reduce by rule 117
-+ 	DELAYSLOT	reduce by rule 117
-+ 	NONFIX	reduce by rule 117
-+ 	INFIX	reduce by rule 117
-+ 	INFIXR	reduce by rule 117
-+ 	DEBUG	reduce by rule 117
-+ 	RTL_COLON	shift 554
-+ 	DELAYSLOT_COLON	reduce by rule 117
-+ 	NULLIFIED_COLON	reduce by rule 117
-+ 	PADDING_COLON	reduce by rule 117
-+ 	RESOURCE	reduce by rule 117
-+ 	CPU	reduce by rule 117
-+ 	LATENCY	reduce by rule 117
-+ 	EXCEPTION	reduce by rule 117
-+ 	EOF	reduce by rule 117
-+ 
-+ 	rtl	goto 553
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 464:
-+ 
-+ 	unsignedint : int .  (reduce by rule 221)
-+ 
-+ 	ARCHITECTURE	reduce by rule 221
-+ 	END	reduce by rule 221
-+ 	LOCAL	reduce by rule 221
-+ 	IN	reduce by rule 221
-+ 	DATATYPE	reduce by rule 221
-+ 	TYPE	reduce by rule 221
-+ 	AND	reduce by rule 221
-+ 	RPAREN	reduce by rule 221
-+ 	RBRACE	reduce by rule 221
-+ 	SEMICOLON	reduce by rule 221
-+ 	STORAGE	reduce by rule 221
-+ 	LOCATIONS	reduce by rule 221
-+ 	COMMA	reduce by rule 221
-+ 	BAR	reduce by rule 221
-+ 	STRUCTURE	reduce by rule 221
-+ 	FUNCTOR	reduce by rule 221
-+ 	SIGNATURE	reduce by rule 221
-+ 	SHARING	reduce by rule 221
-+ 	INSTRUCTION	reduce by rule 221
-+ 	VLIW	reduce by rule 221
-+ 	SUPERSCALAR	reduce by rule 221
-+ 	WITHTYPE	reduce by rule 221
-+ 	FUN	reduce by rule 221
-+ 	VAL	reduce by rule 221
-+ 	INCLUDE	reduce by rule 221
-+ 	OPEN	reduce by rule 221
-+ 	LITTLE	reduce by rule 221
-+ 	BIG	reduce by rule 221
-+ 	PIPELINE	reduce by rule 221
-+ 	LOWERCASE	reduce by rule 221
-+ 	UPPERCASE	reduce by rule 221
-+ 	VERBATIM	reduce by rule 221
-+ 	RTL	reduce by rule 221
-+ 	SPAN	reduce by rule 221
-+ 	DELAYSLOT	reduce by rule 221
-+ 	NONFIX	reduce by rule 221
-+ 	INFIX	reduce by rule 221
-+ 	INFIXR	reduce by rule 221
-+ 	DEBUG	reduce by rule 221
-+ 	RTL_COLON	reduce by rule 221
-+ 	DELAYSLOT_COLON	reduce by rule 221
-+ 	NULLIFIED_COLON	reduce by rule 221
-+ 	PADDING_COLON	reduce by rule 221
-+ 	RESOURCE	reduce by rule 221
-+ 	CPU	reduce by rule 221
-+ 	LATENCY	reduce by rule 221
-+ 	EXCEPTION	reduce by rule 221
-+ 	EOF	reduce by rule 221
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 465:
-+ 
-+ 	consencoding : unsignedint .  (reduce by rule 177)
-+ 
-+ 	ARCHITECTURE	reduce by rule 177
-+ 	END	reduce by rule 177
-+ 	LOCAL	reduce by rule 177
-+ 	IN	reduce by rule 177
-+ 	DATATYPE	reduce by rule 177
-+ 	TYPE	reduce by rule 177
-+ 	AND	reduce by rule 177
-+ 	RPAREN	reduce by rule 177
-+ 	SEMICOLON	reduce by rule 177
-+ 	STORAGE	reduce by rule 177
-+ 	LOCATIONS	reduce by rule 177
-+ 	BAR	reduce by rule 177
-+ 	STRUCTURE	reduce by rule 177
-+ 	FUNCTOR	reduce by rule 177
-+ 	SIGNATURE	reduce by rule 177
-+ 	SHARING	reduce by rule 177
-+ 	INSTRUCTION	reduce by rule 177
-+ 	VLIW	reduce by rule 177
-+ 	SUPERSCALAR	reduce by rule 177
-+ 	WITHTYPE	reduce by rule 177
-+ 	FUN	reduce by rule 177
-+ 	VAL	reduce by rule 177
-+ 	INCLUDE	reduce by rule 177
-+ 	OPEN	reduce by rule 177
-+ 	LITTLE	reduce by rule 177
-+ 	BIG	reduce by rule 177
-+ 	PIPELINE	reduce by rule 177
-+ 	LOWERCASE	reduce by rule 177
-+ 	UPPERCASE	reduce by rule 177
-+ 	VERBATIM	reduce by rule 177
-+ 	RTL	reduce by rule 177
-+ 	SPAN	reduce by rule 177
-+ 	DELAYSLOT	reduce by rule 177
-+ 	NONFIX	reduce by rule 177
-+ 	INFIX	reduce by rule 177
-+ 	INFIXR	reduce by rule 177
-+ 	DEBUG	reduce by rule 177
-+ 	RTL_COLON	reduce by rule 177
-+ 	DELAYSLOT_COLON	reduce by rule 177
-+ 	NULLIFIED_COLON	reduce by rule 177
-+ 	PADDING_COLON	reduce by rule 177
-+ 	RESOURCE	reduce by rule 177
-+ 	CPU	reduce by rule 177
-+ 	LATENCY	reduce by rule 177
-+ 	EXCEPTION	reduce by rule 177
-+ 	EOF	reduce by rule 177
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 466:
-+ 
-+ 	unsignedint : word .  (reduce by rule 222)
-+ 
-+ 	ARCHITECTURE	reduce by rule 222
-+ 	END	reduce by rule 222
-+ 	LOCAL	reduce by rule 222
-+ 	IN	reduce by rule 222
-+ 	DATATYPE	reduce by rule 222
-+ 	TYPE	reduce by rule 222
-+ 	AND	reduce by rule 222
-+ 	RPAREN	reduce by rule 222
-+ 	RBRACE	reduce by rule 222
-+ 	SEMICOLON	reduce by rule 222
-+ 	STORAGE	reduce by rule 222
-+ 	LOCATIONS	reduce by rule 222
-+ 	COMMA	reduce by rule 222
-+ 	BAR	reduce by rule 222
-+ 	STRUCTURE	reduce by rule 222
-+ 	FUNCTOR	reduce by rule 222
-+ 	SIGNATURE	reduce by rule 222
-+ 	SHARING	reduce by rule 222
-+ 	INSTRUCTION	reduce by rule 222
-+ 	VLIW	reduce by rule 222
-+ 	SUPERSCALAR	reduce by rule 222
-+ 	WITHTYPE	reduce by rule 222
-+ 	FUN	reduce by rule 222
-+ 	VAL	reduce by rule 222
-+ 	INCLUDE	reduce by rule 222
-+ 	OPEN	reduce by rule 222
-+ 	LITTLE	reduce by rule 222
-+ 	BIG	reduce by rule 222
-+ 	PIPELINE	reduce by rule 222
-+ 	LOWERCASE	reduce by rule 222
-+ 	UPPERCASE	reduce by rule 222
-+ 	VERBATIM	reduce by rule 222
-+ 	RTL	reduce by rule 222
-+ 	SPAN	reduce by rule 222
-+ 	DELAYSLOT	reduce by rule 222
-+ 	NONFIX	reduce by rule 222
-+ 	INFIX	reduce by rule 222
-+ 	INFIXR	reduce by rule 222
-+ 	DEBUG	reduce by rule 222
-+ 	RTL_COLON	reduce by rule 222
-+ 	DELAYSLOT_COLON	reduce by rule 222
-+ 	NULLIFIED_COLON	reduce by rule 222
-+ 	PADDING_COLON	reduce by rule 222
-+ 	RESOURCE	reduce by rule 222
-+ 	CPU	reduce by rule 222
-+ 	LATENCY	reduce by rule 222
-+ 	EXCEPTION	reduce by rule 222
-+ 	EOF	reduce by rule 222
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 467:
-+ 
-+ 	consencoding : id . LBRACE labexps0 RBRACE 
-+ 
-+ 	LBRACE	shift 555
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 468:
-+ 
-+ 	consencoding : MC_COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 556
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 469:
-+ 
-+ 	consencoding : LPAREN . expseq RPAREN 
-+ 	consencoding : LPAREN . exps2 RPAREN 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 559
-+ 	exps2	goto 558
-+ 	expseq	goto 557
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 470:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	consassembly : ASM_COLON exp .  (reduce by rule 185)
-+ 
-+ 	ARCHITECTURE	reduce by rule 185
-+ 	END	reduce by rule 185
-+ 	LOCAL	reduce by rule 185
-+ 	IN	reduce by rule 185
-+ 	DATATYPE	reduce by rule 185
-+ 	TYPE	reduce by rule 185
-+ 	AND	reduce by rule 185
-+ 	LPAREN	reduce by rule 185
-+ 	RPAREN	reduce by rule 185
-+ 	SEMICOLON	reduce by rule 185
-+ 	CELLSET	reduce by rule 185
-+ 	STORAGE	reduce by rule 185
-+ 	LOCATIONS	reduce by rule 185
-+ 	BAR	reduce by rule 185
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 185
-+ 	FUNCTOR	reduce by rule 185
-+ 	SIGNATURE	reduce by rule 185
-+ 	SHARING	reduce by rule 185
-+ 	INSTRUCTION	reduce by rule 185
-+ 	VLIW	reduce by rule 185
-+ 	SUPERSCALAR	reduce by rule 185
-+ 	WITHTYPE	reduce by rule 185
-+ 	FUN	reduce by rule 185
-+ 	VAL	reduce by rule 185
-+ 	INCLUDE	reduce by rule 185
-+ 	OPEN	reduce by rule 185
-+ 	LITTLE	reduce by rule 185
-+ 	BIG	reduce by rule 185
-+ 	PIPELINE	reduce by rule 185
-+ 	LOWERCASE	reduce by rule 185
-+ 	UPPERCASE	reduce by rule 185
-+ 	VERBATIM	reduce by rule 185
-+ 	RTL	reduce by rule 185
-+ 	SPAN	reduce by rule 185
-+ 	DELAYSLOT	reduce by rule 185
-+ 	NONFIX	reduce by rule 185
-+ 	INFIX	reduce by rule 185
-+ 	INFIXR	reduce by rule 185
-+ 	DEBUG	reduce by rule 185
-+ 	MC_COLON	reduce by rule 185
-+ 	RTL_COLON	reduce by rule 185
-+ 	DELAYSLOT_COLON	reduce by rule 185
-+ 	NULLIFIED_COLON	reduce by rule 185
-+ 	PADDING_COLON	reduce by rule 185
-+ 	RESOURCE	reduce by rule 185
-+ 	CPU	reduce by rule 185
-+ 	LATENCY	reduce by rule 185
-+ 	EXCEPTION	reduce by rule 185
-+ 	ID	reduce by rule 185
-+ 	SYMBOL	reduce by rule 185
-+ 	WORD	reduce by rule 185
-+ 	INT	reduce by rule 185
-+ 	EOF	reduce by rule 185
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 471:
-+ 
-+ 	formatbinds : formatbind BAR formatbinds .  (reduce by rule 205)
-+ 
-+ 	ARCHITECTURE	reduce by rule 205
-+ 	END	reduce by rule 205
-+ 	LOCAL	reduce by rule 205
-+ 	IN	reduce by rule 205
-+ 	DATATYPE	reduce by rule 205
-+ 	TYPE	reduce by rule 205
-+ 	RPAREN	reduce by rule 205
-+ 	SEMICOLON	reduce by rule 205
-+ 	STORAGE	reduce by rule 205
-+ 	LOCATIONS	reduce by rule 205
-+ 	STRUCTURE	reduce by rule 205
-+ 	FUNCTOR	reduce by rule 205
-+ 	SIGNATURE	reduce by rule 205
-+ 	SHARING	reduce by rule 205
-+ 	INSTRUCTION	reduce by rule 205
-+ 	VLIW	reduce by rule 205
-+ 	SUPERSCALAR	reduce by rule 205
-+ 	FUN	reduce by rule 205
-+ 	VAL	reduce by rule 205
-+ 	INCLUDE	reduce by rule 205
-+ 	OPEN	reduce by rule 205
-+ 	LITTLE	reduce by rule 205
-+ 	BIG	reduce by rule 205
-+ 	PIPELINE	reduce by rule 205
-+ 	LOWERCASE	reduce by rule 205
-+ 	UPPERCASE	reduce by rule 205
-+ 	VERBATIM	reduce by rule 205
-+ 	RTL	reduce by rule 205
-+ 	NONFIX	reduce by rule 205
-+ 	INFIX	reduce by rule 205
-+ 	INFIXR	reduce by rule 205
-+ 	DEBUG	reduce by rule 205
-+ 	RESOURCE	reduce by rule 205
-+ 	CPU	reduce by rule 205
-+ 	LATENCY	reduce by rule 205
-+ 	EXCEPTION	reduce by rule 205
-+ 	EOF	reduce by rule 205
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 472:
-+ 
-+ 	mymddecl : INSTRUCTION FORMATS int BITS formatbinds .  (reduce by rule 18)
-+ 
-+ 	ARCHITECTURE	reduce by rule 18
-+ 	END	reduce by rule 18
-+ 	LOCAL	reduce by rule 18
-+ 	IN	reduce by rule 18
-+ 	DATATYPE	reduce by rule 18
-+ 	TYPE	reduce by rule 18
-+ 	RPAREN	reduce by rule 18
-+ 	SEMICOLON	reduce by rule 18
-+ 	STORAGE	reduce by rule 18
-+ 	LOCATIONS	reduce by rule 18
-+ 	STRUCTURE	reduce by rule 18
-+ 	FUNCTOR	reduce by rule 18
-+ 	SIGNATURE	reduce by rule 18
-+ 	SHARING	reduce by rule 18
-+ 	INSTRUCTION	reduce by rule 18
-+ 	VLIW	reduce by rule 18
-+ 	SUPERSCALAR	reduce by rule 18
-+ 	FUN	reduce by rule 18
-+ 	VAL	reduce by rule 18
-+ 	INCLUDE	reduce by rule 18
-+ 	OPEN	reduce by rule 18
-+ 	LITTLE	reduce by rule 18
-+ 	BIG	reduce by rule 18
-+ 	PIPELINE	reduce by rule 18
-+ 	LOWERCASE	reduce by rule 18
-+ 	UPPERCASE	reduce by rule 18
-+ 	VERBATIM	reduce by rule 18
-+ 	RTL	reduce by rule 18
-+ 	NONFIX	reduce by rule 18
-+ 	INFIX	reduce by rule 18
-+ 	INFIXR	reduce by rule 18
-+ 	DEBUG	reduce by rule 18
-+ 	RESOURCE	reduce by rule 18
-+ 	CPU	reduce by rule 18
-+ 	LATENCY	reduce by rule 18
-+ 	EXCEPTION	reduce by rule 18
-+ 	EOF	reduce by rule 18
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 473:
-+ 
-+ 	formatbind : id opt_of LBRACE . fields RBRACE opt_exp 
-+ 
-+ 	CELLSET	shift 50
-+ 	WILD	shift 564
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 563
-+ 	field	goto 562
-+ 	fieldid	goto 561
-+ 	fields	goto 560
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 474:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN . EQ structexp 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN . sigcon EQ structexp 
-+ 
-+ 	EQ	shift 566
-+ 	COLON	shift 476
-+ 	COLONGREATER	shift 233
-+ 
-+ 	sigcon	goto 565
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 475:
-+ 
-+ 	functorarg : id sigcon .  (reduce by rule 89)
-+ 
-+ 	RPAREN	reduce by rule 89
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 476:
-+ 
-+ 	sigcon : COLON . sigexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	SIG	shift 118
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 117
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	sigexp	goto 567
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 477:
-+ 
-+ 	structexp : structexp LPAREN . scopeddecls RPAREN 
-+ 	structexp : structexp LPAREN . ident RPAREN 
-+ 
-+ 	ARCHITECTURE	reduce by rule 107
-+ 	LOCAL	reduce by rule 107
-+ 	DATATYPE	reduce by rule 107
-+ 	TYPE	reduce by rule 107
-+ 	RPAREN	reduce by rule 107
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 107
-+ 	LOCATIONS	reduce by rule 107
-+ 	STRUCTURE	reduce by rule 107
-+ 	FUNCTOR	reduce by rule 107
-+ 	SIGNATURE	reduce by rule 107
-+ 	SHARING	reduce by rule 107
-+ 	INSTRUCTION	reduce by rule 107
-+ 	VLIW	reduce by rule 107
-+ 	SUPERSCALAR	reduce by rule 107
-+ 	FUN	reduce by rule 107
-+ 	VAL	reduce by rule 107
-+ 	INCLUDE	reduce by rule 107
-+ 	OPEN	reduce by rule 107
-+ 	LITTLE	reduce by rule 107
-+ 	BIG	reduce by rule 107
-+ 	PIPELINE	reduce by rule 107
-+ 	LOWERCASE	reduce by rule 107
-+ 	UPPERCASE	reduce by rule 107
-+ 	VERBATIM	reduce by rule 107
-+ 	RTL	reduce by rule 107
-+ 	NONFIX	reduce by rule 107
-+ 	INFIX	reduce by rule 107
-+ 	INFIXR	reduce by rule 107
-+ 	DEBUG	reduce by rule 107
-+ 	RESOURCE	reduce by rule 107
-+ 	CPU	reduce by rule 107
-+ 	LATENCY	reduce by rule 107
-+ 	EXCEPTION	reduce by rule 107
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 114
-+ 	ident	goto 569
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 	scopeddecls	goto 568
-+ 	newScope	goto 164
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 478:
-+ 
-+ 	structexp : STRUCT scopeddecls . END 
-+ 
-+ 	END	shift 570
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 479:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	mymldecl : STRUCTURE id sigcon EQ structexp .  (reduce by rule 70)
-+ 
-+ 	ARCHITECTURE	reduce by rule 70
-+ 	END	reduce by rule 70
-+ 	LOCAL	reduce by rule 70
-+ 	IN	reduce by rule 70
-+ 	DATATYPE	reduce by rule 70
-+ 	TYPE	reduce by rule 70
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 70
-+ 	SEMICOLON	reduce by rule 70
-+ 	STORAGE	reduce by rule 70
-+ 	LOCATIONS	reduce by rule 70
-+ 	STRUCTURE	reduce by rule 70
-+ 	FUNCTOR	reduce by rule 70
-+ 	SIGNATURE	reduce by rule 70
-+ 	SHARING	reduce by rule 70
-+ 	INSTRUCTION	reduce by rule 70
-+ 	VLIW	reduce by rule 70
-+ 	SUPERSCALAR	reduce by rule 70
-+ 	FUN	reduce by rule 70
-+ 	VAL	reduce by rule 70
-+ 	INCLUDE	reduce by rule 70
-+ 	OPEN	reduce by rule 70
-+ 	LITTLE	reduce by rule 70
-+ 	BIG	reduce by rule 70
-+ 	PIPELINE	reduce by rule 70
-+ 	LOWERCASE	reduce by rule 70
-+ 	UPPERCASE	reduce by rule 70
-+ 	VERBATIM	reduce by rule 70
-+ 	RTL	reduce by rule 70
-+ 	NONFIX	reduce by rule 70
-+ 	INFIX	reduce by rule 70
-+ 	INFIXR	reduce by rule 70
-+ 	DEBUG	reduce by rule 70
-+ 	RESOURCE	reduce by rule 70
-+ 	CPU	reduce by rule 70
-+ 	LATENCY	reduce by rule 70
-+ 	EXCEPTION	reduce by rule 70
-+ 	EOF	reduce by rule 70
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 480:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	locbind : id pat EQ exp .  (reduce by rule 391)
-+ 
-+ 	ARCHITECTURE	reduce by rule 391
-+ 	END	reduce by rule 391
-+ 	LOCAL	reduce by rule 391
-+ 	IN	reduce by rule 391
-+ 	DATATYPE	reduce by rule 391
-+ 	TYPE	reduce by rule 391
-+ 	AND	reduce by rule 391
-+ 	RPAREN	reduce by rule 391
-+ 	SEMICOLON	reduce by rule 391
-+ 	STORAGE	reduce by rule 391
-+ 	LOCATIONS	reduce by rule 391
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 391
-+ 	FUNCTOR	reduce by rule 391
-+ 	SIGNATURE	reduce by rule 391
-+ 	SHARING	reduce by rule 391
-+ 	INSTRUCTION	reduce by rule 391
-+ 	VLIW	reduce by rule 391
-+ 	SUPERSCALAR	reduce by rule 391
-+ 	FUN	reduce by rule 391
-+ 	VAL	reduce by rule 391
-+ 	INCLUDE	reduce by rule 391
-+ 	OPEN	reduce by rule 391
-+ 	LITTLE	reduce by rule 391
-+ 	BIG	reduce by rule 391
-+ 	PIPELINE	reduce by rule 391
-+ 	LOWERCASE	reduce by rule 391
-+ 	UPPERCASE	reduce by rule 391
-+ 	VERBATIM	reduce by rule 391
-+ 	RTL	reduce by rule 391
-+ 	NONFIX	reduce by rule 391
-+ 	INFIX	reduce by rule 391
-+ 	INFIXR	reduce by rule 391
-+ 	DEBUG	reduce by rule 391
-+ 	RESOURCE	reduce by rule 391
-+ 	CPU	reduce by rule 391
-+ 	LATENCY	reduce by rule 391
-+ 	EXCEPTION	reduce by rule 391
-+ 	EOF	reduce by rule 391
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 481:
-+ 
-+ 	storagedecl : id EQ DOLLAR id . LBRACKET cellcount RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	LBRACKET	shift 571
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 482:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	typebind : tyvarseq tid EQ ty .  (reduce by rule 198)
-+ 
-+ 	ARCHITECTURE	reduce by rule 198
-+ 	END	reduce by rule 198
-+ 	LOCAL	reduce by rule 198
-+ 	IN	reduce by rule 198
-+ 	DATATYPE	reduce by rule 198
-+ 	TYPE	reduce by rule 198
-+ 	AND	reduce by rule 198
-+ 	RPAREN	reduce by rule 198
-+ 	SEMICOLON	reduce by rule 198
-+ 	STORAGE	reduce by rule 198
-+ 	LOCATIONS	reduce by rule 198
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 198
-+ 	FUNCTOR	reduce by rule 198
-+ 	SIGNATURE	reduce by rule 198
-+ 	SHARING	reduce by rule 198
-+ 	INSTRUCTION	reduce by rule 198
-+ 	VLIW	reduce by rule 198
-+ 	SUPERSCALAR	reduce by rule 198
-+ 	FUN	reduce by rule 198
-+ 	VAL	reduce by rule 198
-+ 	INCLUDE	reduce by rule 198
-+ 	OPEN	reduce by rule 198
-+ 	LITTLE	reduce by rule 198
-+ 	BIG	reduce by rule 198
-+ 	PIPELINE	reduce by rule 198
-+ 	LOWERCASE	reduce by rule 198
-+ 	UPPERCASE	reduce by rule 198
-+ 	VERBATIM	reduce by rule 198
-+ 	RTL	reduce by rule 198
-+ 	NONFIX	reduce by rule 198
-+ 	INFIX	reduce by rule 198
-+ 	INFIXR	reduce by rule 198
-+ 	DEBUG	reduce by rule 198
-+ 	RESOURCE	reduce by rule 198
-+ 	CPU	reduce by rule 198
-+ 	LATENCY	reduce by rule 198
-+ 	EXCEPTION	reduce by rule 198
-+ 	EOF	reduce by rule 198
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 483:
-+ 
-+ 	typebind : tyvarseq tid . EQ ty 
-+ 
-+ 	EQ	shift 374
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 484:
-+ 
-+ 	tyvars : tyvar COMMA tyvars .  (reduce by rule 203)
-+ 
-+ 	RPAREN	reduce by rule 203
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 485:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty . hasasm EQ consbinds 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty . hasasm EQ DATATYPE ty 
-+ 
-+ 	EQ	reduce by rule 132
-+ 	DEREF	shift 573
-+ 
-+ 	hasasm	goto 572
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 486:
-+ 
-+ 	fieldty : COLON . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 574
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 487:
-+ 
-+ 	opcodeencoding : LBRACKET encodingexps . RBRACKET 
-+ 
-+ 	RBRACKET	shift 575
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 488:
-+ 
-+ 	encodingexps : encodingexp .  (reduce by rule 137)
-+ 	encodingexps : encodingexp . COMMA encodingexps 
-+ 
-+ 	RBRACKET	reduce by rule 137
-+ 	COMMA	shift 576
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 489:
-+ 
-+ 	encodingexp : int .  (reduce by rule 139)
-+ 	encodingexp : int . DOTDOT int 
-+ 	encodingexp : int . int DOTDOT int 
-+ 
-+ 	RBRACKET	reduce by rule 139
-+ 	COMMA	reduce by rule 139
-+ 	DOTDOT	shift 578
-+ 	INT	shift 64
-+ 
-+ 	int	goto 577
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 490:
-+ 
-+ 	mymldecl : LOCAL scopeddecls IN scopeddecls END .  (reduce by rule 68)
-+ 
-+ 	ARCHITECTURE	reduce by rule 68
-+ 	END	reduce by rule 68
-+ 	LOCAL	reduce by rule 68
-+ 	IN	reduce by rule 68
-+ 	DATATYPE	reduce by rule 68
-+ 	TYPE	reduce by rule 68
-+ 	RPAREN	reduce by rule 68
-+ 	SEMICOLON	reduce by rule 68
-+ 	STORAGE	reduce by rule 68
-+ 	LOCATIONS	reduce by rule 68
-+ 	STRUCTURE	reduce by rule 68
-+ 	FUNCTOR	reduce by rule 68
-+ 	SIGNATURE	reduce by rule 68
-+ 	SHARING	reduce by rule 68
-+ 	INSTRUCTION	reduce by rule 68
-+ 	VLIW	reduce by rule 68
-+ 	SUPERSCALAR	reduce by rule 68
-+ 	FUN	reduce by rule 68
-+ 	VAL	reduce by rule 68
-+ 	INCLUDE	reduce by rule 68
-+ 	OPEN	reduce by rule 68
-+ 	LITTLE	reduce by rule 68
-+ 	BIG	reduce by rule 68
-+ 	PIPELINE	reduce by rule 68
-+ 	LOWERCASE	reduce by rule 68
-+ 	UPPERCASE	reduce by rule 68
-+ 	VERBATIM	reduce by rule 68
-+ 	RTL	reduce by rule 68
-+ 	NONFIX	reduce by rule 68
-+ 	INFIX	reduce by rule 68
-+ 	INFIXR	reduce by rule 68
-+ 	DEBUG	reduce by rule 68
-+ 	RESOURCE	reduce by rule 68
-+ 	CPU	reduce by rule 68
-+ 	LATENCY	reduce by rule 68
-+ 	EXCEPTION	reduce by rule 68
-+ 	EOF	reduce by rule 68
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 491:
-+ 
-+ 	mymddecl : ARCHITECTURE id EQ STRUCT decls . END 
-+ 
-+ 	END	shift 579
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 492:
-+ 
-+ 	tuplety : appty TIMES tuplety .  (reduce by rule 380)
-+ 
-+ 	ARCHITECTURE	reduce by rule 380
-+ 	END	reduce by rule 380
-+ 	LOCAL	reduce by rule 380
-+ 	IN	reduce by rule 380
-+ 	OF	reduce by rule 380
-+ 	DATATYPE	reduce by rule 380
-+ 	TYPE	reduce by rule 380
-+ 	EQ	reduce by rule 380
-+ 	AND	reduce by rule 380
-+ 	LPAREN	reduce by rule 380
-+ 	RPAREN	reduce by rule 380
-+ 	RBRACKET	reduce by rule 380
-+ 	RBRACE	reduce by rule 380
-+ 	SEMICOLON	reduce by rule 380
-+ 	LDQUOTE	reduce by rule 380
-+ 	CELLSET	reduce by rule 380
-+ 	STORAGE	reduce by rule 380
-+ 	LOCATIONS	reduce by rule 380
-+ 	COMMA	reduce by rule 380
-+ 	COLON	reduce by rule 380
-+ 	BAR	reduce by rule 380
-+ 	ARROW	reduce by rule 380
-+ 	DARROW	reduce by rule 380
-+ 	THEN	reduce by rule 380
-+ 	ELSE	reduce by rule 380
-+ 	STRUCTURE	reduce by rule 380
-+ 	FUNCTOR	reduce by rule 380
-+ 	SIGNATURE	reduce by rule 380
-+ 	WHERE	reduce by rule 380
-+ 	SHARING	reduce by rule 380
-+ 	INSTRUCTION	reduce by rule 380
-+ 	VLIW	reduce by rule 380
-+ 	SUPERSCALAR	reduce by rule 380
-+ 	WITHTYPE	reduce by rule 380
-+ 	FUN	reduce by rule 380
-+ 	VAL	reduce by rule 380
-+ 	INCLUDE	reduce by rule 380
-+ 	OPEN	reduce by rule 380
-+ 	LITTLE	reduce by rule 380
-+ 	BIG	reduce by rule 380
-+ 	PIPELINE	reduce by rule 380
-+ 	LOWERCASE	reduce by rule 380
-+ 	UPPERCASE	reduce by rule 380
-+ 	VERBATIM	reduce by rule 380
-+ 	RTL	reduce by rule 380
-+ 	SPAN	reduce by rule 380
-+ 	DELAYSLOT	reduce by rule 380
-+ 	NONFIX	reduce by rule 380
-+ 	INFIX	reduce by rule 380
-+ 	INFIXR	reduce by rule 380
-+ 	DEBUG	reduce by rule 380
-+ 	ASM_COLON	reduce by rule 380
-+ 	MC_COLON	reduce by rule 380
-+ 	RTL_COLON	reduce by rule 380
-+ 	DELAYSLOT_COLON	reduce by rule 380
-+ 	NULLIFIED_COLON	reduce by rule 380
-+ 	PADDING_COLON	reduce by rule 380
-+ 	RESOURCE	reduce by rule 380
-+ 	CPU	reduce by rule 380
-+ 	LATENCY	reduce by rule 380
-+ 	EXCEPTION	reduce by rule 380
-+ 	ID	reduce by rule 380
-+ 	SYMBOL	reduce by rule 380
-+ 	WORD	reduce by rule 380
-+ 	INT	reduce by rule 380
-+ 	STRING	reduce by rule 380
-+ 	EOF	reduce by rule 380
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 493: shift/reduce conflict (shift SYMBOL, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift ID, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift INSTRUCTION, reduce by rule 379)
-+ error:  state 493: shift/reduce conflict (shift CELLSET, reduce by rule 379)
-+ 
-+ state 493:
-+ 
-+ 	appty : appty . tident 
-+ 	tuplety : appty . TIMES appty 
-+ 	tuplety : appty TIMES appty .  (reduce by rule 379)
-+ 	tuplety : appty . TIMES tuplety 
-+ 
-+ 	ARCHITECTURE	reduce by rule 379
-+ 	END	reduce by rule 379
-+ 	LOCAL	reduce by rule 379
-+ 	IN	reduce by rule 379
-+ 	OF	reduce by rule 379
-+ 	DATATYPE	reduce by rule 379
-+ 	TYPE	reduce by rule 379
-+ 	EQ	reduce by rule 379
-+ 	TIMES	shift 387
-+ 	AND	reduce by rule 379
-+ 	LPAREN	reduce by rule 379
-+ 	RPAREN	reduce by rule 379
-+ 	RBRACKET	reduce by rule 379
-+ 	RBRACE	reduce by rule 379
-+ 	SEMICOLON	reduce by rule 379
-+ 	LDQUOTE	reduce by rule 379
-+ 	CELLSET	shift 50
-+ 	STORAGE	reduce by rule 379
-+ 	LOCATIONS	reduce by rule 379
-+ 	COMMA	reduce by rule 379
-+ 	COLON	reduce by rule 379
-+ 	BAR	reduce by rule 379
-+ 	ARROW	reduce by rule 379
-+ 	DARROW	reduce by rule 379
-+ 	BITS	shift 246
-+ 	THEN	reduce by rule 379
-+ 	ELSE	reduce by rule 379
-+ 	STRUCTURE	reduce by rule 379
-+ 	FUNCTOR	reduce by rule 379
-+ 	SIGNATURE	reduce by rule 379
-+ 	WHERE	reduce by rule 379
-+ 	SHARING	reduce by rule 379
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	VLIW	reduce by rule 379
-+ 	SUPERSCALAR	reduce by rule 379
-+ 	WITHTYPE	reduce by rule 379
-+ 	FUN	reduce by rule 379
-+ 	VAL	reduce by rule 379
-+ 	INCLUDE	reduce by rule 379
-+ 	OPEN	reduce by rule 379
-+ 	LITTLE	reduce by rule 379
-+ 	BIG	reduce by rule 379
-+ 	PIPELINE	reduce by rule 379
-+ 	LOWERCASE	reduce by rule 379
-+ 	UPPERCASE	reduce by rule 379
-+ 	VERBATIM	reduce by rule 379
-+ 	RTL	reduce by rule 379
-+ 	SPAN	reduce by rule 379
-+ 	DELAYSLOT	reduce by rule 379
-+ 	NONFIX	reduce by rule 379
-+ 	INFIX	reduce by rule 379
-+ 	INFIXR	reduce by rule 379
-+ 	DEBUG	reduce by rule 379
-+ 	ASM_COLON	reduce by rule 379
-+ 	MC_COLON	reduce by rule 379
-+ 	RTL_COLON	reduce by rule 379
-+ 	DELAYSLOT_COLON	reduce by rule 379
-+ 	NULLIFIED_COLON	reduce by rule 379
-+ 	PADDING_COLON	reduce by rule 379
-+ 	RESOURCE	reduce by rule 379
-+ 	CPU	reduce by rule 379
-+ 	LATENCY	reduce by rule 379
-+ 	EXCEPTION	reduce by rule 379
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	reduce by rule 379
-+ 	INT	reduce by rule 379
-+ 	STRING	reduce by rule 379
-+ 	EOF	reduce by rule 379
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 386
-+ 	tpath	goto 265
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 494:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	ty : ty ARROW ty .  (reduce by rule 371)
-+ 
-+ 	ARCHITECTURE	reduce by rule 371
-+ 	END	reduce by rule 371
-+ 	LOCAL	reduce by rule 371
-+ 	IN	reduce by rule 371
-+ 	OF	reduce by rule 371
-+ 	DATATYPE	reduce by rule 371
-+ 	TYPE	reduce by rule 371
-+ 	EQ	reduce by rule 371
-+ 	AND	reduce by rule 371
-+ 	LPAREN	reduce by rule 371
-+ 	RPAREN	reduce by rule 371
-+ 	RBRACKET	reduce by rule 371
-+ 	RBRACE	reduce by rule 371
-+ 	SEMICOLON	reduce by rule 371
-+ 	LDQUOTE	reduce by rule 371
-+ 	CELLSET	reduce by rule 371
-+ 	STORAGE	reduce by rule 371
-+ 	LOCATIONS	reduce by rule 371
-+ 	COMMA	reduce by rule 371
-+ 	COLON	reduce by rule 371
-+ 	BAR	reduce by rule 371
-+ 	ARROW	shift 388
-+ 	DARROW	reduce by rule 371
-+ 	THEN	reduce by rule 371
-+ 	ELSE	reduce by rule 371
-+ 	STRUCTURE	reduce by rule 371
-+ 	FUNCTOR	reduce by rule 371
-+ 	SIGNATURE	reduce by rule 371
-+ 	WHERE	reduce by rule 371
-+ 	SHARING	reduce by rule 371
-+ 	INSTRUCTION	reduce by rule 371
-+ 	VLIW	reduce by rule 371
-+ 	SUPERSCALAR	reduce by rule 371
-+ 	WITHTYPE	reduce by rule 371
-+ 	FUN	reduce by rule 371
-+ 	VAL	reduce by rule 371
-+ 	INCLUDE	reduce by rule 371
-+ 	OPEN	reduce by rule 371
-+ 	LITTLE	reduce by rule 371
-+ 	BIG	reduce by rule 371
-+ 	PIPELINE	reduce by rule 371
-+ 	LOWERCASE	reduce by rule 371
-+ 	UPPERCASE	reduce by rule 371
-+ 	VERBATIM	reduce by rule 371
-+ 	RTL	reduce by rule 371
-+ 	SPAN	reduce by rule 371
-+ 	DELAYSLOT	reduce by rule 371
-+ 	NONFIX	reduce by rule 371
-+ 	INFIX	reduce by rule 371
-+ 	INFIXR	reduce by rule 371
-+ 	DEBUG	reduce by rule 371
-+ 	ASM_COLON	reduce by rule 371
-+ 	MC_COLON	reduce by rule 371
-+ 	RTL_COLON	reduce by rule 371
-+ 	DELAYSLOT_COLON	reduce by rule 371
-+ 	NULLIFIED_COLON	reduce by rule 371
-+ 	PADDING_COLON	reduce by rule 371
-+ 	RESOURCE	reduce by rule 371
-+ 	CPU	reduce by rule 371
-+ 	LATENCY	reduce by rule 371
-+ 	EXCEPTION	reduce by rule 371
-+ 	ID	reduce by rule 371
-+ 	SYMBOL	reduce by rule 371
-+ 	WORD	reduce by rule 371
-+ 	INT	reduce by rule 371
-+ 	STRING	reduce by rule 371
-+ 	EOF	reduce by rule 371
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 495:
-+ 
-+ 	tpath : tpath DOT tid .  (reduce by rule 368)
-+ 
-+ 	ARCHITECTURE	reduce by rule 368
-+ 	END	reduce by rule 368
-+ 	LOCAL	reduce by rule 368
-+ 	IN	reduce by rule 368
-+ 	OF	reduce by rule 368
-+ 	DATATYPE	reduce by rule 368
-+ 	TYPE	reduce by rule 368
-+ 	EQ	reduce by rule 368
-+ 	TIMES	reduce by rule 368
-+ 	AND	reduce by rule 368
-+ 	LPAREN	reduce by rule 368
-+ 	RPAREN	reduce by rule 368
-+ 	RBRACKET	reduce by rule 368
-+ 	RBRACE	reduce by rule 368
-+ 	SEMICOLON	reduce by rule 368
-+ 	LDQUOTE	reduce by rule 368
-+ 	CELLSET	reduce by rule 368
-+ 	STORAGE	reduce by rule 368
-+ 	LOCATIONS	reduce by rule 368
-+ 	COMMA	reduce by rule 368
-+ 	COLON	reduce by rule 368
-+ 	DOT	reduce by rule 368
-+ 	BAR	reduce by rule 368
-+ 	ARROW	reduce by rule 368
-+ 	DARROW	reduce by rule 368
-+ 	BITS	reduce by rule 368
-+ 	THEN	reduce by rule 368
-+ 	ELSE	reduce by rule 368
-+ 	STRUCTURE	reduce by rule 368
-+ 	FUNCTOR	reduce by rule 368
-+ 	SIGNATURE	reduce by rule 368
-+ 	WHERE	reduce by rule 368
-+ 	SHARING	reduce by rule 368
-+ 	INSTRUCTION	reduce by rule 368
-+ 	CELL	reduce by rule 368
-+ 	VLIW	reduce by rule 368
-+ 	SUPERSCALAR	reduce by rule 368
-+ 	WITHTYPE	reduce by rule 368
-+ 	FUN	reduce by rule 368
-+ 	VAL	reduce by rule 368
-+ 	INCLUDE	reduce by rule 368
-+ 	OPEN	reduce by rule 368
-+ 	LITTLE	reduce by rule 368
-+ 	BIG	reduce by rule 368
-+ 	PIPELINE	reduce by rule 368
-+ 	LOWERCASE	reduce by rule 368
-+ 	UPPERCASE	reduce by rule 368
-+ 	VERBATIM	reduce by rule 368
-+ 	RTL	reduce by rule 368
-+ 	SPAN	reduce by rule 368
-+ 	DELAYSLOT	reduce by rule 368
-+ 	NONFIX	reduce by rule 368
-+ 	INFIX	reduce by rule 368
-+ 	INFIXR	reduce by rule 368
-+ 	DEBUG	reduce by rule 368
-+ 	ASM_COLON	reduce by rule 368
-+ 	MC_COLON	reduce by rule 368
-+ 	RTL_COLON	reduce by rule 368
-+ 	DELAYSLOT_COLON	reduce by rule 368
-+ 	NULLIFIED_COLON	reduce by rule 368
-+ 	PADDING_COLON	reduce by rule 368
-+ 	RESOURCE	reduce by rule 368
-+ 	CPU	reduce by rule 368
-+ 	LATENCY	reduce by rule 368
-+ 	EXCEPTION	reduce by rule 368
-+ 	ID	reduce by rule 368
-+ 	SYMBOL	reduce by rule 368
-+ 	WORD	reduce by rule 368
-+ 	INT	reduce by rule 368
-+ 	STRING	reduce by rule 368
-+ 	EOF	reduce by rule 368
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 496:
-+ 
-+ 	tpath : tid DOT tid .  (reduce by rule 367)
-+ 
-+ 	ARCHITECTURE	reduce by rule 367
-+ 	END	reduce by rule 367
-+ 	LOCAL	reduce by rule 367
-+ 	IN	reduce by rule 367
-+ 	OF	reduce by rule 367
-+ 	DATATYPE	reduce by rule 367
-+ 	TYPE	reduce by rule 367
-+ 	EQ	reduce by rule 367
-+ 	TIMES	reduce by rule 367
-+ 	AND	reduce by rule 367
-+ 	LPAREN	reduce by rule 367
-+ 	RPAREN	reduce by rule 367
-+ 	RBRACKET	reduce by rule 367
-+ 	RBRACE	reduce by rule 367
-+ 	SEMICOLON	reduce by rule 367
-+ 	LDQUOTE	reduce by rule 367
-+ 	CELLSET	reduce by rule 367
-+ 	STORAGE	reduce by rule 367
-+ 	LOCATIONS	reduce by rule 367
-+ 	COMMA	reduce by rule 367
-+ 	COLON	reduce by rule 367
-+ 	DOT	reduce by rule 367
-+ 	BAR	reduce by rule 367
-+ 	ARROW	reduce by rule 367
-+ 	DARROW	reduce by rule 367
-+ 	BITS	reduce by rule 367
-+ 	THEN	reduce by rule 367
-+ 	ELSE	reduce by rule 367
-+ 	STRUCTURE	reduce by rule 367
-+ 	FUNCTOR	reduce by rule 367
-+ 	SIGNATURE	reduce by rule 367
-+ 	WHERE	reduce by rule 367
-+ 	SHARING	reduce by rule 367
-+ 	INSTRUCTION	reduce by rule 367
-+ 	CELL	reduce by rule 367
-+ 	VLIW	reduce by rule 367
-+ 	SUPERSCALAR	reduce by rule 367
-+ 	WITHTYPE	reduce by rule 367
-+ 	FUN	reduce by rule 367
-+ 	VAL	reduce by rule 367
-+ 	INCLUDE	reduce by rule 367
-+ 	OPEN	reduce by rule 367
-+ 	LITTLE	reduce by rule 367
-+ 	BIG	reduce by rule 367
-+ 	PIPELINE	reduce by rule 367
-+ 	LOWERCASE	reduce by rule 367
-+ 	UPPERCASE	reduce by rule 367
-+ 	VERBATIM	reduce by rule 367
-+ 	RTL	reduce by rule 367
-+ 	SPAN	reduce by rule 367
-+ 	DELAYSLOT	reduce by rule 367
-+ 	NONFIX	reduce by rule 367
-+ 	INFIX	reduce by rule 367
-+ 	INFIXR	reduce by rule 367
-+ 	DEBUG	reduce by rule 367
-+ 	ASM_COLON	reduce by rule 367
-+ 	MC_COLON	reduce by rule 367
-+ 	RTL_COLON	reduce by rule 367
-+ 	DELAYSLOT_COLON	reduce by rule 367
-+ 	NULLIFIED_COLON	reduce by rule 367
-+ 	PADDING_COLON	reduce by rule 367
-+ 	RESOURCE	reduce by rule 367
-+ 	CPU	reduce by rule 367
-+ 	LATENCY	reduce by rule 367
-+ 	EXCEPTION	reduce by rule 367
-+ 	ID	reduce by rule 367
-+ 	SYMBOL	reduce by rule 367
-+ 	WORD	reduce by rule 367
-+ 	INT	reduce by rule 367
-+ 	STRING	reduce by rule 367
-+ 	EOF	reduce by rule 367
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 497:
-+ 
-+ 	aty : LBRACE labtys RBRACE .  (reduce by rule 356)
-+ 
-+ 	ARCHITECTURE	reduce by rule 356
-+ 	END	reduce by rule 356
-+ 	LOCAL	reduce by rule 356
-+ 	IN	reduce by rule 356
-+ 	OF	reduce by rule 356
-+ 	DATATYPE	reduce by rule 356
-+ 	TYPE	reduce by rule 356
-+ 	EQ	reduce by rule 356
-+ 	TIMES	reduce by rule 356
-+ 	AND	reduce by rule 356
-+ 	LPAREN	reduce by rule 356
-+ 	RPAREN	reduce by rule 356
-+ 	RBRACKET	reduce by rule 356
-+ 	RBRACE	reduce by rule 356
-+ 	SEMICOLON	reduce by rule 356
-+ 	LDQUOTE	reduce by rule 356
-+ 	CELLSET	reduce by rule 356
-+ 	STORAGE	reduce by rule 356
-+ 	LOCATIONS	reduce by rule 356
-+ 	COMMA	reduce by rule 356
-+ 	COLON	reduce by rule 356
-+ 	BAR	reduce by rule 356
-+ 	ARROW	reduce by rule 356
-+ 	DARROW	reduce by rule 356
-+ 	BITS	reduce by rule 356
-+ 	THEN	reduce by rule 356
-+ 	ELSE	reduce by rule 356
-+ 	STRUCTURE	reduce by rule 356
-+ 	FUNCTOR	reduce by rule 356
-+ 	SIGNATURE	reduce by rule 356
-+ 	WHERE	reduce by rule 356
-+ 	SHARING	reduce by rule 356
-+ 	INSTRUCTION	reduce by rule 356
-+ 	CELL	reduce by rule 356
-+ 	VLIW	reduce by rule 356
-+ 	SUPERSCALAR	reduce by rule 356
-+ 	WITHTYPE	reduce by rule 356
-+ 	FUN	reduce by rule 356
-+ 	VAL	reduce by rule 356
-+ 	INCLUDE	reduce by rule 356
-+ 	OPEN	reduce by rule 356
-+ 	LITTLE	reduce by rule 356
-+ 	BIG	reduce by rule 356
-+ 	PIPELINE	reduce by rule 356
-+ 	LOWERCASE	reduce by rule 356
-+ 	UPPERCASE	reduce by rule 356
-+ 	VERBATIM	reduce by rule 356
-+ 	RTL	reduce by rule 356
-+ 	SPAN	reduce by rule 356
-+ 	DELAYSLOT	reduce by rule 356
-+ 	NONFIX	reduce by rule 356
-+ 	INFIX	reduce by rule 356
-+ 	INFIXR	reduce by rule 356
-+ 	DEBUG	reduce by rule 356
-+ 	ASM_COLON	reduce by rule 356
-+ 	MC_COLON	reduce by rule 356
-+ 	RTL_COLON	reduce by rule 356
-+ 	DELAYSLOT_COLON	reduce by rule 356
-+ 	NULLIFIED_COLON	reduce by rule 356
-+ 	PADDING_COLON	reduce by rule 356
-+ 	RESOURCE	reduce by rule 356
-+ 	CPU	reduce by rule 356
-+ 	LATENCY	reduce by rule 356
-+ 	EXCEPTION	reduce by rule 356
-+ 	ID	reduce by rule 356
-+ 	SYMBOL	reduce by rule 356
-+ 	WORD	reduce by rule 356
-+ 	INT	reduce by rule 356
-+ 	STRING	reduce by rule 356
-+ 	EOF	reduce by rule 356
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 498:
-+ 
-+ 	labtys1 : labty COMMA . labtys1 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 395
-+ 	labty	goto 394
-+ 	labtys1	goto 580
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 499:
-+ 
-+ 	labty : id COLON . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 581
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 500:
-+ 
-+ 	appty : LPAREN tys2 RPAREN . tident 
-+ 
-+ 	CELLSET	shift 50
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 582
-+ 	tpath	goto 265
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 501:
-+ 
-+ 	tys2 : ty COMMA . ty 
-+ 	tys2 : ty COMMA . tys2 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 584
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tys2	goto 583
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 502:
-+ 
-+ 	aty : LPAREN ty RPAREN .  (reduce by rule 355)
-+ 
-+ 	ARCHITECTURE	reduce by rule 355
-+ 	END	reduce by rule 355
-+ 	LOCAL	reduce by rule 355
-+ 	IN	reduce by rule 355
-+ 	OF	reduce by rule 355
-+ 	DATATYPE	reduce by rule 355
-+ 	TYPE	reduce by rule 355
-+ 	EQ	reduce by rule 355
-+ 	TIMES	reduce by rule 355
-+ 	AND	reduce by rule 355
-+ 	LPAREN	reduce by rule 355
-+ 	RPAREN	reduce by rule 355
-+ 	RBRACKET	reduce by rule 355
-+ 	RBRACE	reduce by rule 355
-+ 	SEMICOLON	reduce by rule 355
-+ 	LDQUOTE	reduce by rule 355
-+ 	CELLSET	reduce by rule 355
-+ 	STORAGE	reduce by rule 355
-+ 	LOCATIONS	reduce by rule 355
-+ 	COMMA	reduce by rule 355
-+ 	COLON	reduce by rule 355
-+ 	BAR	reduce by rule 355
-+ 	ARROW	reduce by rule 355
-+ 	DARROW	reduce by rule 355
-+ 	BITS	reduce by rule 355
-+ 	THEN	reduce by rule 355
-+ 	ELSE	reduce by rule 355
-+ 	STRUCTURE	reduce by rule 355
-+ 	FUNCTOR	reduce by rule 355
-+ 	SIGNATURE	reduce by rule 355
-+ 	WHERE	reduce by rule 355
-+ 	SHARING	reduce by rule 355
-+ 	INSTRUCTION	reduce by rule 355
-+ 	CELL	reduce by rule 355
-+ 	VLIW	reduce by rule 355
-+ 	SUPERSCALAR	reduce by rule 355
-+ 	WITHTYPE	reduce by rule 355
-+ 	FUN	reduce by rule 355
-+ 	VAL	reduce by rule 355
-+ 	INCLUDE	reduce by rule 355
-+ 	OPEN	reduce by rule 355
-+ 	LITTLE	reduce by rule 355
-+ 	BIG	reduce by rule 355
-+ 	PIPELINE	reduce by rule 355
-+ 	LOWERCASE	reduce by rule 355
-+ 	UPPERCASE	reduce by rule 355
-+ 	VERBATIM	reduce by rule 355
-+ 	RTL	reduce by rule 355
-+ 	SPAN	reduce by rule 355
-+ 	DELAYSLOT	reduce by rule 355
-+ 	NONFIX	reduce by rule 355
-+ 	INFIX	reduce by rule 355
-+ 	INFIXR	reduce by rule 355
-+ 	DEBUG	reduce by rule 355
-+ 	ASM_COLON	reduce by rule 355
-+ 	MC_COLON	reduce by rule 355
-+ 	RTL_COLON	reduce by rule 355
-+ 	DELAYSLOT_COLON	reduce by rule 355
-+ 	NULLIFIED_COLON	reduce by rule 355
-+ 	PADDING_COLON	reduce by rule 355
-+ 	RESOURCE	reduce by rule 355
-+ 	CPU	reduce by rule 355
-+ 	LATENCY	reduce by rule 355
-+ 	EXCEPTION	reduce by rule 355
-+ 	ID	reduce by rule 355
-+ 	SYMBOL	reduce by rule 355
-+ 	WORD	reduce by rule 355
-+ 	INT	reduce by rule 355
-+ 	STRING	reduce by rule 355
-+ 	EOF	reduce by rule 355
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 503:
-+ 
-+ 	resources : resource .  (reduce by rule 35)
-+ 	resources : resource . COMMA resources 
-+ 
-+ 	RBRACKET	reduce by rule 35
-+ 	COMMA	shift 585
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 504:
-+ 
-+ 	cpubind : id aliases int LBRACKET resources . RBRACKET 
-+ 
-+ 	RBRACKET	shift 586
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 505:
-+ 
-+ 	resource : int . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 587
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 506:
-+ 
-+ 	resource : id .  (reduce by rule 38)
-+ 
-+ 	RBRACKET	reduce by rule 38
-+ 	COMMA	reduce by rule 38
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 507:
-+ 
-+ 	exp : exp HANDLE clauses .  (reduce by rule 278)
-+ 
-+ 	ARCHITECTURE	reduce by rule 278
-+ 	END	reduce by rule 278
-+ 	LOCAL	reduce by rule 278
-+ 	IN	reduce by rule 278
-+ 	OF	reduce by rule 278
-+ 	DATATYPE	reduce by rule 278
-+ 	TYPE	reduce by rule 278
-+ 	AND	reduce by rule 278
-+ 	LPAREN	reduce by rule 278
-+ 	RPAREN	reduce by rule 278
-+ 	RBRACKET	reduce by rule 278
-+ 	RBRACE	reduce by rule 278
-+ 	SEMICOLON	reduce by rule 278
-+ 	RMETA	reduce by rule 278
-+ 	CELLSET	reduce by rule 278
-+ 	STORAGE	reduce by rule 278
-+ 	LOCATIONS	reduce by rule 278
-+ 	COMMA	reduce by rule 278
-+ 	COLON	reduce by rule 278
-+ 	BAR	reduce by rule 278
-+ 	DARROW	reduce by rule 278
-+ 	THEN	reduce by rule 278
-+ 	ELSE	reduce by rule 278
-+ 	HANDLE	reduce by rule 278
-+ 	STRUCTURE	reduce by rule 278
-+ 	FUNCTOR	reduce by rule 278
-+ 	SIGNATURE	reduce by rule 278
-+ 	SHARING	reduce by rule 278
-+ 	INSTRUCTION	reduce by rule 278
-+ 	VLIW	reduce by rule 278
-+ 	SUPERSCALAR	reduce by rule 278
-+ 	WITHTYPE	reduce by rule 278
-+ 	FUN	reduce by rule 278
-+ 	VAL	reduce by rule 278
-+ 	INCLUDE	reduce by rule 278
-+ 	OPEN	reduce by rule 278
-+ 	LITTLE	reduce by rule 278
-+ 	BIG	reduce by rule 278
-+ 	PIPELINE	reduce by rule 278
-+ 	LOWERCASE	reduce by rule 278
-+ 	UPPERCASE	reduce by rule 278
-+ 	VERBATIM	reduce by rule 278
-+ 	RTL	reduce by rule 278
-+ 	SPAN	reduce by rule 278
-+ 	DELAYSLOT	reduce by rule 278
-+ 	NONFIX	reduce by rule 278
-+ 	INFIX	reduce by rule 278
-+ 	INFIXR	reduce by rule 278
-+ 	DEBUG	reduce by rule 278
-+ 	ASM_COLON	reduce by rule 278
-+ 	MC_COLON	reduce by rule 278
-+ 	RTL_COLON	reduce by rule 278
-+ 	DELAYSLOT_COLON	reduce by rule 278
-+ 	NULLIFIED_COLON	reduce by rule 278
-+ 	PADDING_COLON	reduce by rule 278
-+ 	RESOURCE	reduce by rule 278
-+ 	CPU	reduce by rule 278
-+ 	LATENCY	reduce by rule 278
-+ 	EXCEPTION	reduce by rule 278
-+ 	ID	reduce by rule 278
-+ 	SYMBOL	reduce by rule 278
-+ 	WORD	reduce by rule 278
-+ 	INT	reduce by rule 278
-+ 	EOF	reduce by rule 278
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 508:
-+ 
-+ 	aexp2 : aexp2 AT LBRACKET . slices RBRACKET 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 590
-+ 	slice	goto 589
-+ 	slices	goto 588
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 509:
-+ 
-+ 	aexp : sym CONCAT LBRACKET . exps RBRACKET 
-+ 	aexp : sym CONCAT LBRACKET . exps RBRACKET CONCAT sym 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	RBRACKET	reduce by rule 288
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 424
-+ 	exps	goto 591
-+ 	exps1	goto 422
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 510:
-+ 
-+ 	aexp : LET decls IN . expseq END 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 593
-+ 	expseq	goto 592
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 511:
-+ 
-+ 	exp : IF typedexp THEN . typedexp ELSE exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 594
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 512:
-+ 
-+ 	clauses : clause BAR . clauses 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 413
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	clause	goto 412
-+ 	clauses	goto 595
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 513:
-+ 
-+ 	clause : typedpat guard . cont DARROW exp 
-+ 
-+ 	DARROW	reduce by rule 337
-+ 	EXCEPTION	shift 460
-+ 
-+ 	cont	goto 596
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 514:
-+ 
-+ 	guard : WHERE . typedexp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 597
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 515:
-+ 
-+ 	asms : asm asms .  (reduce by rule 189)
-+ 
-+ 	RDQUOTE	reduce by rule 189
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 516: shift/reduce conflict (shift LDQUOTE, reduce by rule 186)
-+ 
-+ state 516:
-+ 
-+ 	asm_strings : LDQUOTE asms RDQUOTE .  (reduce by rule 186)
-+ 	asm_strings : LDQUOTE asms RDQUOTE . asm_strings 
-+ 
-+ 	ARCHITECTURE	reduce by rule 186
-+ 	END	reduce by rule 186
-+ 	LOCAL	reduce by rule 186
-+ 	IN	reduce by rule 186
-+ 	OF	reduce by rule 186
-+ 	DATATYPE	reduce by rule 186
-+ 	TYPE	reduce by rule 186
-+ 	EQ	reduce by rule 186
-+ 	DOLLAR	reduce by rule 186
-+ 	TIMES	reduce by rule 186
-+ 	AND	reduce by rule 186
-+ 	DEREF	reduce by rule 186
-+ 	NOT	reduce by rule 186
-+ 	LLBRACKET	reduce by rule 186
-+ 	LHASHBRACKET	reduce by rule 186
-+ 	LPAREN	reduce by rule 186
-+ 	RPAREN	reduce by rule 186
-+ 	LBRACKET	reduce by rule 186
-+ 	RBRACKET	reduce by rule 186
-+ 	LBRACE	reduce by rule 186
-+ 	RBRACE	reduce by rule 186
-+ 	SEMICOLON	reduce by rule 186
-+ 	LDQUOTE	shift 293
-+ 	RMETA	reduce by rule 186
-+ 	CELLSET	reduce by rule 186
-+ 	STORAGE	reduce by rule 186
-+ 	LOCATIONS	reduce by rule 186
-+ 	HASH	reduce by rule 186
-+ 	COMMA	reduce by rule 186
-+ 	COLON	reduce by rule 186
-+ 	AT	reduce by rule 186
-+ 	BAR	reduce by rule 186
-+ 	DARROW	reduce by rule 186
-+ 	THEN	reduce by rule 186
-+ 	ELSE	reduce by rule 186
-+ 	TRUE	reduce by rule 186
-+ 	FALSE	reduce by rule 186
-+ 	HANDLE	reduce by rule 186
-+ 	LET	reduce by rule 186
-+ 	STRUCTURE	reduce by rule 186
-+ 	FUNCTOR	reduce by rule 186
-+ 	SIGNATURE	reduce by rule 186
-+ 	SHARING	reduce by rule 186
-+ 	INSTRUCTION	reduce by rule 186
-+ 	VLIW	reduce by rule 186
-+ 	SUPERSCALAR	reduce by rule 186
-+ 	WITHTYPE	reduce by rule 186
-+ 	FUN	reduce by rule 186
-+ 	VAL	reduce by rule 186
-+ 	INCLUDE	reduce by rule 186
-+ 	OPEN	reduce by rule 186
-+ 	OP	reduce by rule 186
-+ 	LITTLE	reduce by rule 186
-+ 	BIG	reduce by rule 186
-+ 	PIPELINE	reduce by rule 186
-+ 	LOWERCASE	reduce by rule 186
-+ 	UPPERCASE	reduce by rule 186
-+ 	VERBATIM	reduce by rule 186
-+ 	RTL	reduce by rule 186
-+ 	SPAN	reduce by rule 186
-+ 	DELAYSLOT	reduce by rule 186
-+ 	ALWAYS	reduce by rule 186
-+ 	NEVER	reduce by rule 186
-+ 	NONFIX	reduce by rule 186
-+ 	INFIX	reduce by rule 186
-+ 	INFIXR	reduce by rule 186
-+ 	DEBUG	reduce by rule 186
-+ 	ASM_COLON	reduce by rule 186
-+ 	MC_COLON	reduce by rule 186
-+ 	RTL_COLON	reduce by rule 186
-+ 	DELAYSLOT_COLON	reduce by rule 186
-+ 	NULLIFIED_COLON	reduce by rule 186
-+ 	PADDING_COLON	reduce by rule 186
-+ 	RESOURCE	reduce by rule 186
-+ 	CPU	reduce by rule 186
-+ 	LATENCY	reduce by rule 186
-+ 	EXCEPTION	reduce by rule 186
-+ 	ID	reduce by rule 186
-+ 	SYMBOL	reduce by rule 186
-+ 	WORD	reduce by rule 186
-+ 	INT	reduce by rule 186
-+ 	INTINF	reduce by rule 186
-+ 	REAL	reduce by rule 186
-+ 	STRING	reduce by rule 186
-+ 	CHAR	reduce by rule 186
-+ 	EOF	reduce by rule 186
-+ 
-+ 	asm_strings	goto 598
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 517:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	asm : LMETA exp . RMETA 
-+ 
-+ 	RMETA	shift 599
-+ 	HANDLE	shift 402
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 518:
-+ 
-+ 	labexps : labexp COMMA . labexps 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 421
-+ 	labexps	goto 600
-+ 	labexp	goto 418
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 519:
-+ 
-+ 	aexp : LBRACE labexps0 RBRACE .  (reduce by rule 253)
-+ 
-+ 	ARCHITECTURE	reduce by rule 253
-+ 	END	reduce by rule 253
-+ 	LOCAL	reduce by rule 253
-+ 	IN	reduce by rule 253
-+ 	OF	reduce by rule 253
-+ 	DATATYPE	reduce by rule 253
-+ 	TYPE	reduce by rule 253
-+ 	EQ	reduce by rule 253
-+ 	DOLLAR	reduce by rule 253
-+ 	TIMES	reduce by rule 253
-+ 	AND	reduce by rule 253
-+ 	DEREF	reduce by rule 253
-+ 	NOT	reduce by rule 253
-+ 	LLBRACKET	reduce by rule 253
-+ 	LHASHBRACKET	reduce by rule 253
-+ 	LPAREN	reduce by rule 253
-+ 	RPAREN	reduce by rule 253
-+ 	LBRACKET	reduce by rule 253
-+ 	RBRACKET	reduce by rule 253
-+ 	LBRACE	reduce by rule 253
-+ 	RBRACE	reduce by rule 253
-+ 	SEMICOLON	reduce by rule 253
-+ 	LDQUOTE	reduce by rule 253
-+ 	RMETA	reduce by rule 253
-+ 	CELLSET	reduce by rule 253
-+ 	STORAGE	reduce by rule 253
-+ 	LOCATIONS	reduce by rule 253
-+ 	HASH	reduce by rule 253
-+ 	COMMA	reduce by rule 253
-+ 	COLON	reduce by rule 253
-+ 	AT	reduce by rule 253
-+ 	BAR	reduce by rule 253
-+ 	DARROW	reduce by rule 253
-+ 	THEN	reduce by rule 253
-+ 	ELSE	reduce by rule 253
-+ 	TRUE	reduce by rule 253
-+ 	FALSE	reduce by rule 253
-+ 	HANDLE	reduce by rule 253
-+ 	LET	reduce by rule 253
-+ 	STRUCTURE	reduce by rule 253
-+ 	FUNCTOR	reduce by rule 253
-+ 	SIGNATURE	reduce by rule 253
-+ 	SHARING	reduce by rule 253
-+ 	INSTRUCTION	reduce by rule 253
-+ 	VLIW	reduce by rule 253
-+ 	SUPERSCALAR	reduce by rule 253
-+ 	WITHTYPE	reduce by rule 253
-+ 	FUN	reduce by rule 253
-+ 	VAL	reduce by rule 253
-+ 	INCLUDE	reduce by rule 253
-+ 	OPEN	reduce by rule 253
-+ 	OP	reduce by rule 253
-+ 	LITTLE	reduce by rule 253
-+ 	BIG	reduce by rule 253
-+ 	PIPELINE	reduce by rule 253
-+ 	LOWERCASE	reduce by rule 253
-+ 	UPPERCASE	reduce by rule 253
-+ 	VERBATIM	reduce by rule 253
-+ 	RTL	reduce by rule 253
-+ 	SPAN	reduce by rule 253
-+ 	DELAYSLOT	reduce by rule 253
-+ 	ALWAYS	reduce by rule 253
-+ 	NEVER	reduce by rule 253
-+ 	NONFIX	reduce by rule 253
-+ 	INFIX	reduce by rule 253
-+ 	INFIXR	reduce by rule 253
-+ 	DEBUG	reduce by rule 253
-+ 	ASM_COLON	reduce by rule 253
-+ 	MC_COLON	reduce by rule 253
-+ 	RTL_COLON	reduce by rule 253
-+ 	DELAYSLOT_COLON	reduce by rule 253
-+ 	NULLIFIED_COLON	reduce by rule 253
-+ 	PADDING_COLON	reduce by rule 253
-+ 	RESOURCE	reduce by rule 253
-+ 	CPU	reduce by rule 253
-+ 	LATENCY	reduce by rule 253
-+ 	EXCEPTION	reduce by rule 253
-+ 	ID	reduce by rule 253
-+ 	SYMBOL	reduce by rule 253
-+ 	WORD	reduce by rule 253
-+ 	INT	reduce by rule 253
-+ 	INTINF	reduce by rule 253
-+ 	REAL	reduce by rule 253
-+ 	STRING	reduce by rule 253
-+ 	CHAR	reduce by rule 253
-+ 	EOF	reduce by rule 253
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 520:
-+ 
-+ 	labexp : id EQ . typedexp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 601
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 521:
-+ 
-+ 	aexp : LBRACKET exps RBRACKET .  (reduce by rule 251)
-+ 	aexp : LBRACKET exps RBRACKET . CONCAT sym 
-+ 
-+ 	ARCHITECTURE	reduce by rule 251
-+ 	END	reduce by rule 251
-+ 	LOCAL	reduce by rule 251
-+ 	IN	reduce by rule 251
-+ 	OF	reduce by rule 251
-+ 	DATATYPE	reduce by rule 251
-+ 	TYPE	reduce by rule 251
-+ 	EQ	reduce by rule 251
-+ 	DOLLAR	reduce by rule 251
-+ 	TIMES	reduce by rule 251
-+ 	AND	reduce by rule 251
-+ 	DEREF	reduce by rule 251
-+ 	NOT	reduce by rule 251
-+ 	CONCAT	shift 602
-+ 	LLBRACKET	reduce by rule 251
-+ 	LHASHBRACKET	reduce by rule 251
-+ 	LPAREN	reduce by rule 251
-+ 	RPAREN	reduce by rule 251
-+ 	LBRACKET	reduce by rule 251
-+ 	RBRACKET	reduce by rule 251
-+ 	LBRACE	reduce by rule 251
-+ 	RBRACE	reduce by rule 251
-+ 	SEMICOLON	reduce by rule 251
-+ 	LDQUOTE	reduce by rule 251
-+ 	RMETA	reduce by rule 251
-+ 	CELLSET	reduce by rule 251
-+ 	STORAGE	reduce by rule 251
-+ 	LOCATIONS	reduce by rule 251
-+ 	HASH	reduce by rule 251
-+ 	COMMA	reduce by rule 251
-+ 	COLON	reduce by rule 251
-+ 	AT	reduce by rule 251
-+ 	BAR	reduce by rule 251
-+ 	DARROW	reduce by rule 251
-+ 	THEN	reduce by rule 251
-+ 	ELSE	reduce by rule 251
-+ 	TRUE	reduce by rule 251
-+ 	FALSE	reduce by rule 251
-+ 	HANDLE	reduce by rule 251
-+ 	LET	reduce by rule 251
-+ 	STRUCTURE	reduce by rule 251
-+ 	FUNCTOR	reduce by rule 251
-+ 	SIGNATURE	reduce by rule 251
-+ 	SHARING	reduce by rule 251
-+ 	INSTRUCTION	reduce by rule 251
-+ 	VLIW	reduce by rule 251
-+ 	SUPERSCALAR	reduce by rule 251
-+ 	WITHTYPE	reduce by rule 251
-+ 	FUN	reduce by rule 251
-+ 	VAL	reduce by rule 251
-+ 	INCLUDE	reduce by rule 251
-+ 	OPEN	reduce by rule 251
-+ 	OP	reduce by rule 251
-+ 	LITTLE	reduce by rule 251
-+ 	BIG	reduce by rule 251
-+ 	PIPELINE	reduce by rule 251
-+ 	LOWERCASE	reduce by rule 251
-+ 	UPPERCASE	reduce by rule 251
-+ 	VERBATIM	reduce by rule 251
-+ 	RTL	reduce by rule 251
-+ 	SPAN	reduce by rule 251
-+ 	DELAYSLOT	reduce by rule 251
-+ 	ALWAYS	reduce by rule 251
-+ 	NEVER	reduce by rule 251
-+ 	NONFIX	reduce by rule 251
-+ 	INFIX	reduce by rule 251
-+ 	INFIXR	reduce by rule 251
-+ 	DEBUG	reduce by rule 251
-+ 	ASM_COLON	reduce by rule 251
-+ 	MC_COLON	reduce by rule 251
-+ 	RTL_COLON	reduce by rule 251
-+ 	DELAYSLOT_COLON	reduce by rule 251
-+ 	NULLIFIED_COLON	reduce by rule 251
-+ 	PADDING_COLON	reduce by rule 251
-+ 	RESOURCE	reduce by rule 251
-+ 	CPU	reduce by rule 251
-+ 	LATENCY	reduce by rule 251
-+ 	EXCEPTION	reduce by rule 251
-+ 	ID	reduce by rule 251
-+ 	SYMBOL	reduce by rule 251
-+ 	WORD	reduce by rule 251
-+ 	INT	reduce by rule 251
-+ 	INTINF	reduce by rule 251
-+ 	REAL	reduce by rule 251
-+ 	STRING	reduce by rule 251
-+ 	CHAR	reduce by rule 251
-+ 	EOF	reduce by rule 251
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 522:
-+ 
-+ 	exps1 : typedexp COMMA . exps1 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 424
-+ 	exps1	goto 603
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 523:
-+ 
-+ 	aexp : LPAREN expseq2 RPAREN .  (reduce by rule 250)
-+ 
-+ 	ARCHITECTURE	reduce by rule 250
-+ 	END	reduce by rule 250
-+ 	LOCAL	reduce by rule 250
-+ 	IN	reduce by rule 250
-+ 	OF	reduce by rule 250
-+ 	DATATYPE	reduce by rule 250
-+ 	TYPE	reduce by rule 250
-+ 	EQ	reduce by rule 250
-+ 	DOLLAR	reduce by rule 250
-+ 	TIMES	reduce by rule 250
-+ 	AND	reduce by rule 250
-+ 	DEREF	reduce by rule 250
-+ 	NOT	reduce by rule 250
-+ 	LLBRACKET	reduce by rule 250
-+ 	LHASHBRACKET	reduce by rule 250
-+ 	LPAREN	reduce by rule 250
-+ 	RPAREN	reduce by rule 250
-+ 	LBRACKET	reduce by rule 250
-+ 	RBRACKET	reduce by rule 250
-+ 	LBRACE	reduce by rule 250
-+ 	RBRACE	reduce by rule 250
-+ 	SEMICOLON	reduce by rule 250
-+ 	LDQUOTE	reduce by rule 250
-+ 	RMETA	reduce by rule 250
-+ 	CELLSET	reduce by rule 250
-+ 	STORAGE	reduce by rule 250
-+ 	LOCATIONS	reduce by rule 250
-+ 	HASH	reduce by rule 250
-+ 	COMMA	reduce by rule 250
-+ 	COLON	reduce by rule 250
-+ 	AT	reduce by rule 250
-+ 	BAR	reduce by rule 250
-+ 	DARROW	reduce by rule 250
-+ 	THEN	reduce by rule 250
-+ 	ELSE	reduce by rule 250
-+ 	TRUE	reduce by rule 250
-+ 	FALSE	reduce by rule 250
-+ 	HANDLE	reduce by rule 250
-+ 	LET	reduce by rule 250
-+ 	STRUCTURE	reduce by rule 250
-+ 	FUNCTOR	reduce by rule 250
-+ 	SIGNATURE	reduce by rule 250
-+ 	SHARING	reduce by rule 250
-+ 	INSTRUCTION	reduce by rule 250
-+ 	VLIW	reduce by rule 250
-+ 	SUPERSCALAR	reduce by rule 250
-+ 	WITHTYPE	reduce by rule 250
-+ 	FUN	reduce by rule 250
-+ 	VAL	reduce by rule 250
-+ 	INCLUDE	reduce by rule 250
-+ 	OPEN	reduce by rule 250
-+ 	OP	reduce by rule 250
-+ 	LITTLE	reduce by rule 250
-+ 	BIG	reduce by rule 250
-+ 	PIPELINE	reduce by rule 250
-+ 	LOWERCASE	reduce by rule 250
-+ 	UPPERCASE	reduce by rule 250
-+ 	VERBATIM	reduce by rule 250
-+ 	RTL	reduce by rule 250
-+ 	SPAN	reduce by rule 250
-+ 	DELAYSLOT	reduce by rule 250
-+ 	ALWAYS	reduce by rule 250
-+ 	NEVER	reduce by rule 250
-+ 	NONFIX	reduce by rule 250
-+ 	INFIX	reduce by rule 250
-+ 	INFIXR	reduce by rule 250
-+ 	DEBUG	reduce by rule 250
-+ 	ASM_COLON	reduce by rule 250
-+ 	MC_COLON	reduce by rule 250
-+ 	RTL_COLON	reduce by rule 250
-+ 	DELAYSLOT_COLON	reduce by rule 250
-+ 	NULLIFIED_COLON	reduce by rule 250
-+ 	PADDING_COLON	reduce by rule 250
-+ 	RESOURCE	reduce by rule 250
-+ 	CPU	reduce by rule 250
-+ 	LATENCY	reduce by rule 250
-+ 	EXCEPTION	reduce by rule 250
-+ 	ID	reduce by rule 250
-+ 	SYMBOL	reduce by rule 250
-+ 	WORD	reduce by rule 250
-+ 	INT	reduce by rule 250
-+ 	INTINF	reduce by rule 250
-+ 	REAL	reduce by rule 250
-+ 	STRING	reduce by rule 250
-+ 	CHAR	reduce by rule 250
-+ 	EOF	reduce by rule 250
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 524:
-+ 
-+ 	aexp : LPAREN exps2 RPAREN .  (reduce by rule 249)
-+ 
-+ 	ARCHITECTURE	reduce by rule 249
-+ 	END	reduce by rule 249
-+ 	LOCAL	reduce by rule 249
-+ 	IN	reduce by rule 249
-+ 	OF	reduce by rule 249
-+ 	DATATYPE	reduce by rule 249
-+ 	TYPE	reduce by rule 249
-+ 	EQ	reduce by rule 249
-+ 	DOLLAR	reduce by rule 249
-+ 	TIMES	reduce by rule 249
-+ 	AND	reduce by rule 249
-+ 	DEREF	reduce by rule 249
-+ 	NOT	reduce by rule 249
-+ 	LLBRACKET	reduce by rule 249
-+ 	LHASHBRACKET	reduce by rule 249
-+ 	LPAREN	reduce by rule 249
-+ 	RPAREN	reduce by rule 249
-+ 	LBRACKET	reduce by rule 249
-+ 	RBRACKET	reduce by rule 249
-+ 	LBRACE	reduce by rule 249
-+ 	RBRACE	reduce by rule 249
-+ 	SEMICOLON	reduce by rule 249
-+ 	LDQUOTE	reduce by rule 249
-+ 	RMETA	reduce by rule 249
-+ 	CELLSET	reduce by rule 249
-+ 	STORAGE	reduce by rule 249
-+ 	LOCATIONS	reduce by rule 249
-+ 	HASH	reduce by rule 249
-+ 	COMMA	reduce by rule 249
-+ 	COLON	reduce by rule 249
-+ 	AT	reduce by rule 249
-+ 	BAR	reduce by rule 249
-+ 	DARROW	reduce by rule 249
-+ 	THEN	reduce by rule 249
-+ 	ELSE	reduce by rule 249
-+ 	TRUE	reduce by rule 249
-+ 	FALSE	reduce by rule 249
-+ 	HANDLE	reduce by rule 249
-+ 	LET	reduce by rule 249
-+ 	STRUCTURE	reduce by rule 249
-+ 	FUNCTOR	reduce by rule 249
-+ 	SIGNATURE	reduce by rule 249
-+ 	SHARING	reduce by rule 249
-+ 	INSTRUCTION	reduce by rule 249
-+ 	VLIW	reduce by rule 249
-+ 	SUPERSCALAR	reduce by rule 249
-+ 	WITHTYPE	reduce by rule 249
-+ 	FUN	reduce by rule 249
-+ 	VAL	reduce by rule 249
-+ 	INCLUDE	reduce by rule 249
-+ 	OPEN	reduce by rule 249
-+ 	OP	reduce by rule 249
-+ 	LITTLE	reduce by rule 249
-+ 	BIG	reduce by rule 249
-+ 	PIPELINE	reduce by rule 249
-+ 	LOWERCASE	reduce by rule 249
-+ 	UPPERCASE	reduce by rule 249
-+ 	VERBATIM	reduce by rule 249
-+ 	RTL	reduce by rule 249
-+ 	SPAN	reduce by rule 249
-+ 	DELAYSLOT	reduce by rule 249
-+ 	ALWAYS	reduce by rule 249
-+ 	NEVER	reduce by rule 249
-+ 	NONFIX	reduce by rule 249
-+ 	INFIX	reduce by rule 249
-+ 	INFIXR	reduce by rule 249
-+ 	DEBUG	reduce by rule 249
-+ 	ASM_COLON	reduce by rule 249
-+ 	MC_COLON	reduce by rule 249
-+ 	RTL_COLON	reduce by rule 249
-+ 	DELAYSLOT_COLON	reduce by rule 249
-+ 	NULLIFIED_COLON	reduce by rule 249
-+ 	PADDING_COLON	reduce by rule 249
-+ 	RESOURCE	reduce by rule 249
-+ 	CPU	reduce by rule 249
-+ 	LATENCY	reduce by rule 249
-+ 	EXCEPTION	reduce by rule 249
-+ 	ID	reduce by rule 249
-+ 	SYMBOL	reduce by rule 249
-+ 	WORD	reduce by rule 249
-+ 	INT	reduce by rule 249
-+ 	INTINF	reduce by rule 249
-+ 	REAL	reduce by rule 249
-+ 	STRING	reduce by rule 249
-+ 	CHAR	reduce by rule 249
-+ 	EOF	reduce by rule 249
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 525:
-+ 
-+ 	exps2 : typedexp COMMA . exps1 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 424
-+ 	exps1	goto 604
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 526:
-+ 
-+ 	expseq2 : typedexp SEMICOLON . expseq 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 593
-+ 	expseq	goto 605
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 527:
-+ 
-+ 	aexp : LPAREN typedexp RPAREN .  (reduce by rule 248)
-+ 
-+ 	ARCHITECTURE	reduce by rule 248
-+ 	END	reduce by rule 248
-+ 	LOCAL	reduce by rule 248
-+ 	IN	reduce by rule 248
-+ 	OF	reduce by rule 248
-+ 	DATATYPE	reduce by rule 248
-+ 	TYPE	reduce by rule 248
-+ 	EQ	reduce by rule 248
-+ 	DOLLAR	reduce by rule 248
-+ 	TIMES	reduce by rule 248
-+ 	AND	reduce by rule 248
-+ 	DEREF	reduce by rule 248
-+ 	NOT	reduce by rule 248
-+ 	LLBRACKET	reduce by rule 248
-+ 	LHASHBRACKET	reduce by rule 248
-+ 	LPAREN	reduce by rule 248
-+ 	RPAREN	reduce by rule 248
-+ 	LBRACKET	reduce by rule 248
-+ 	RBRACKET	reduce by rule 248
-+ 	LBRACE	reduce by rule 248
-+ 	RBRACE	reduce by rule 248
-+ 	SEMICOLON	reduce by rule 248
-+ 	LDQUOTE	reduce by rule 248
-+ 	RMETA	reduce by rule 248
-+ 	CELLSET	reduce by rule 248
-+ 	STORAGE	reduce by rule 248
-+ 	LOCATIONS	reduce by rule 248
-+ 	HASH	reduce by rule 248
-+ 	COMMA	reduce by rule 248
-+ 	COLON	reduce by rule 248
-+ 	AT	reduce by rule 248
-+ 	BAR	reduce by rule 248
-+ 	DARROW	reduce by rule 248
-+ 	THEN	reduce by rule 248
-+ 	ELSE	reduce by rule 248
-+ 	TRUE	reduce by rule 248
-+ 	FALSE	reduce by rule 248
-+ 	HANDLE	reduce by rule 248
-+ 	LET	reduce by rule 248
-+ 	STRUCTURE	reduce by rule 248
-+ 	FUNCTOR	reduce by rule 248
-+ 	SIGNATURE	reduce by rule 248
-+ 	SHARING	reduce by rule 248
-+ 	INSTRUCTION	reduce by rule 248
-+ 	VLIW	reduce by rule 248
-+ 	SUPERSCALAR	reduce by rule 248
-+ 	WITHTYPE	reduce by rule 248
-+ 	FUN	reduce by rule 248
-+ 	VAL	reduce by rule 248
-+ 	INCLUDE	reduce by rule 248
-+ 	OPEN	reduce by rule 248
-+ 	OP	reduce by rule 248
-+ 	LITTLE	reduce by rule 248
-+ 	BIG	reduce by rule 248
-+ 	PIPELINE	reduce by rule 248
-+ 	LOWERCASE	reduce by rule 248
-+ 	UPPERCASE	reduce by rule 248
-+ 	VERBATIM	reduce by rule 248
-+ 	RTL	reduce by rule 248
-+ 	SPAN	reduce by rule 248
-+ 	DELAYSLOT	reduce by rule 248
-+ 	ALWAYS	reduce by rule 248
-+ 	NEVER	reduce by rule 248
-+ 	NONFIX	reduce by rule 248
-+ 	INFIX	reduce by rule 248
-+ 	INFIXR	reduce by rule 248
-+ 	DEBUG	reduce by rule 248
-+ 	ASM_COLON	reduce by rule 248
-+ 	MC_COLON	reduce by rule 248
-+ 	RTL_COLON	reduce by rule 248
-+ 	DELAYSLOT_COLON	reduce by rule 248
-+ 	NULLIFIED_COLON	reduce by rule 248
-+ 	PADDING_COLON	reduce by rule 248
-+ 	RESOURCE	reduce by rule 248
-+ 	CPU	reduce by rule 248
-+ 	LATENCY	reduce by rule 248
-+ 	EXCEPTION	reduce by rule 248
-+ 	ID	reduce by rule 248
-+ 	SYMBOL	reduce by rule 248
-+ 	WORD	reduce by rule 248
-+ 	INT	reduce by rule 248
-+ 	INTINF	reduce by rule 248
-+ 	REAL	reduce by rule 248
-+ 	STRING	reduce by rule 248
-+ 	CHAR	reduce by rule 248
-+ 	EOF	reduce by rule 248
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 528:
-+ 
-+ 	aexp : LPAREN symb RPAREN .  (reduce by rule 245)
-+ 
-+ 	ARCHITECTURE	reduce by rule 245
-+ 	END	reduce by rule 245
-+ 	LOCAL	reduce by rule 245
-+ 	IN	reduce by rule 245
-+ 	OF	reduce by rule 245
-+ 	DATATYPE	reduce by rule 245
-+ 	TYPE	reduce by rule 245
-+ 	EQ	reduce by rule 245
-+ 	DOLLAR	reduce by rule 245
-+ 	TIMES	reduce by rule 245
-+ 	AND	reduce by rule 245
-+ 	DEREF	reduce by rule 245
-+ 	NOT	reduce by rule 245
-+ 	LLBRACKET	reduce by rule 245
-+ 	LHASHBRACKET	reduce by rule 245
-+ 	LPAREN	reduce by rule 245
-+ 	RPAREN	reduce by rule 245
-+ 	LBRACKET	reduce by rule 245
-+ 	RBRACKET	reduce by rule 245
-+ 	LBRACE	reduce by rule 245
-+ 	RBRACE	reduce by rule 245
-+ 	SEMICOLON	reduce by rule 245
-+ 	LDQUOTE	reduce by rule 245
-+ 	RMETA	reduce by rule 245
-+ 	CELLSET	reduce by rule 245
-+ 	STORAGE	reduce by rule 245
-+ 	LOCATIONS	reduce by rule 245
-+ 	HASH	reduce by rule 245
-+ 	COMMA	reduce by rule 245
-+ 	COLON	reduce by rule 245
-+ 	AT	reduce by rule 245
-+ 	BAR	reduce by rule 245
-+ 	DARROW	reduce by rule 245
-+ 	THEN	reduce by rule 245
-+ 	ELSE	reduce by rule 245
-+ 	TRUE	reduce by rule 245
-+ 	FALSE	reduce by rule 245
-+ 	HANDLE	reduce by rule 245
-+ 	LET	reduce by rule 245
-+ 	STRUCTURE	reduce by rule 245
-+ 	FUNCTOR	reduce by rule 245
-+ 	SIGNATURE	reduce by rule 245
-+ 	SHARING	reduce by rule 245
-+ 	INSTRUCTION	reduce by rule 245
-+ 	VLIW	reduce by rule 245
-+ 	SUPERSCALAR	reduce by rule 245
-+ 	WITHTYPE	reduce by rule 245
-+ 	FUN	reduce by rule 245
-+ 	VAL	reduce by rule 245
-+ 	INCLUDE	reduce by rule 245
-+ 	OPEN	reduce by rule 245
-+ 	OP	reduce by rule 245
-+ 	LITTLE	reduce by rule 245
-+ 	BIG	reduce by rule 245
-+ 	PIPELINE	reduce by rule 245
-+ 	LOWERCASE	reduce by rule 245
-+ 	UPPERCASE	reduce by rule 245
-+ 	VERBATIM	reduce by rule 245
-+ 	RTL	reduce by rule 245
-+ 	SPAN	reduce by rule 245
-+ 	DELAYSLOT	reduce by rule 245
-+ 	ALWAYS	reduce by rule 245
-+ 	NEVER	reduce by rule 245
-+ 	NONFIX	reduce by rule 245
-+ 	INFIX	reduce by rule 245
-+ 	INFIXR	reduce by rule 245
-+ 	DEBUG	reduce by rule 245
-+ 	ASM_COLON	reduce by rule 245
-+ 	MC_COLON	reduce by rule 245
-+ 	RTL_COLON	reduce by rule 245
-+ 	DELAYSLOT_COLON	reduce by rule 245
-+ 	NULLIFIED_COLON	reduce by rule 245
-+ 	PADDING_COLON	reduce by rule 245
-+ 	RESOURCE	reduce by rule 245
-+ 	CPU	reduce by rule 245
-+ 	LATENCY	reduce by rule 245
-+ 	EXCEPTION	reduce by rule 245
-+ 	ID	reduce by rule 245
-+ 	SYMBOL	reduce by rule 245
-+ 	WORD	reduce by rule 245
-+ 	INT	reduce by rule 245
-+ 	INTINF	reduce by rule 245
-+ 	REAL	reduce by rule 245
-+ 	STRING	reduce by rule 245
-+ 	CHAR	reduce by rule 245
-+ 	EOF	reduce by rule 245
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 529:
-+ 
-+ 	aexp : LHASHBRACKET exps RBRACKET .  (reduce by rule 252)
-+ 
-+ 	ARCHITECTURE	reduce by rule 252
-+ 	END	reduce by rule 252
-+ 	LOCAL	reduce by rule 252
-+ 	IN	reduce by rule 252
-+ 	OF	reduce by rule 252
-+ 	DATATYPE	reduce by rule 252
-+ 	TYPE	reduce by rule 252
-+ 	EQ	reduce by rule 252
-+ 	DOLLAR	reduce by rule 252
-+ 	TIMES	reduce by rule 252
-+ 	AND	reduce by rule 252
-+ 	DEREF	reduce by rule 252
-+ 	NOT	reduce by rule 252
-+ 	LLBRACKET	reduce by rule 252
-+ 	LHASHBRACKET	reduce by rule 252
-+ 	LPAREN	reduce by rule 252
-+ 	RPAREN	reduce by rule 252
-+ 	LBRACKET	reduce by rule 252
-+ 	RBRACKET	reduce by rule 252
-+ 	LBRACE	reduce by rule 252
-+ 	RBRACE	reduce by rule 252
-+ 	SEMICOLON	reduce by rule 252
-+ 	LDQUOTE	reduce by rule 252
-+ 	RMETA	reduce by rule 252
-+ 	CELLSET	reduce by rule 252
-+ 	STORAGE	reduce by rule 252
-+ 	LOCATIONS	reduce by rule 252
-+ 	HASH	reduce by rule 252
-+ 	COMMA	reduce by rule 252
-+ 	COLON	reduce by rule 252
-+ 	AT	reduce by rule 252
-+ 	BAR	reduce by rule 252
-+ 	DARROW	reduce by rule 252
-+ 	THEN	reduce by rule 252
-+ 	ELSE	reduce by rule 252
-+ 	TRUE	reduce by rule 252
-+ 	FALSE	reduce by rule 252
-+ 	HANDLE	reduce by rule 252
-+ 	LET	reduce by rule 252
-+ 	STRUCTURE	reduce by rule 252
-+ 	FUNCTOR	reduce by rule 252
-+ 	SIGNATURE	reduce by rule 252
-+ 	SHARING	reduce by rule 252
-+ 	INSTRUCTION	reduce by rule 252
-+ 	VLIW	reduce by rule 252
-+ 	SUPERSCALAR	reduce by rule 252
-+ 	WITHTYPE	reduce by rule 252
-+ 	FUN	reduce by rule 252
-+ 	VAL	reduce by rule 252
-+ 	INCLUDE	reduce by rule 252
-+ 	OPEN	reduce by rule 252
-+ 	OP	reduce by rule 252
-+ 	LITTLE	reduce by rule 252
-+ 	BIG	reduce by rule 252
-+ 	PIPELINE	reduce by rule 252
-+ 	LOWERCASE	reduce by rule 252
-+ 	UPPERCASE	reduce by rule 252
-+ 	VERBATIM	reduce by rule 252
-+ 	RTL	reduce by rule 252
-+ 	SPAN	reduce by rule 252
-+ 	DELAYSLOT	reduce by rule 252
-+ 	ALWAYS	reduce by rule 252
-+ 	NEVER	reduce by rule 252
-+ 	NONFIX	reduce by rule 252
-+ 	INFIX	reduce by rule 252
-+ 	INFIXR	reduce by rule 252
-+ 	DEBUG	reduce by rule 252
-+ 	ASM_COLON	reduce by rule 252
-+ 	MC_COLON	reduce by rule 252
-+ 	RTL_COLON	reduce by rule 252
-+ 	DELAYSLOT_COLON	reduce by rule 252
-+ 	NULLIFIED_COLON	reduce by rule 252
-+ 	PADDING_COLON	reduce by rule 252
-+ 	RESOURCE	reduce by rule 252
-+ 	CPU	reduce by rule 252
-+ 	LATENCY	reduce by rule 252
-+ 	EXCEPTION	reduce by rule 252
-+ 	ID	reduce by rule 252
-+ 	SYMBOL	reduce by rule 252
-+ 	WORD	reduce by rule 252
-+ 	INT	reduce by rule 252
-+ 	INTINF	reduce by rule 252
-+ 	REAL	reduce by rule 252
-+ 	STRING	reduce by rule 252
-+ 	CHAR	reduce by rule 252
-+ 	EOF	reduce by rule 252
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 530:
-+ 
-+ 	aexp : LLBRACKET rtlterms RRBRACKET .  (reduce by rule 255)
-+ 
-+ 	ARCHITECTURE	reduce by rule 255
-+ 	END	reduce by rule 255
-+ 	LOCAL	reduce by rule 255
-+ 	IN	reduce by rule 255
-+ 	OF	reduce by rule 255
-+ 	DATATYPE	reduce by rule 255
-+ 	TYPE	reduce by rule 255
-+ 	EQ	reduce by rule 255
-+ 	DOLLAR	reduce by rule 255
-+ 	TIMES	reduce by rule 255
-+ 	AND	reduce by rule 255
-+ 	DEREF	reduce by rule 255
-+ 	NOT	reduce by rule 255
-+ 	LLBRACKET	reduce by rule 255
-+ 	LHASHBRACKET	reduce by rule 255
-+ 	LPAREN	reduce by rule 255
-+ 	RPAREN	reduce by rule 255
-+ 	LBRACKET	reduce by rule 255
-+ 	RBRACKET	reduce by rule 255
-+ 	LBRACE	reduce by rule 255
-+ 	RBRACE	reduce by rule 255
-+ 	SEMICOLON	reduce by rule 255
-+ 	LDQUOTE	reduce by rule 255
-+ 	RMETA	reduce by rule 255
-+ 	CELLSET	reduce by rule 255
-+ 	STORAGE	reduce by rule 255
-+ 	LOCATIONS	reduce by rule 255
-+ 	HASH	reduce by rule 255
-+ 	COMMA	reduce by rule 255
-+ 	COLON	reduce by rule 255
-+ 	AT	reduce by rule 255
-+ 	BAR	reduce by rule 255
-+ 	DARROW	reduce by rule 255
-+ 	THEN	reduce by rule 255
-+ 	ELSE	reduce by rule 255
-+ 	TRUE	reduce by rule 255
-+ 	FALSE	reduce by rule 255
-+ 	HANDLE	reduce by rule 255
-+ 	LET	reduce by rule 255
-+ 	STRUCTURE	reduce by rule 255
-+ 	FUNCTOR	reduce by rule 255
-+ 	SIGNATURE	reduce by rule 255
-+ 	SHARING	reduce by rule 255
-+ 	INSTRUCTION	reduce by rule 255
-+ 	VLIW	reduce by rule 255
-+ 	SUPERSCALAR	reduce by rule 255
-+ 	WITHTYPE	reduce by rule 255
-+ 	FUN	reduce by rule 255
-+ 	VAL	reduce by rule 255
-+ 	INCLUDE	reduce by rule 255
-+ 	OPEN	reduce by rule 255
-+ 	OP	reduce by rule 255
-+ 	LITTLE	reduce by rule 255
-+ 	BIG	reduce by rule 255
-+ 	PIPELINE	reduce by rule 255
-+ 	LOWERCASE	reduce by rule 255
-+ 	UPPERCASE	reduce by rule 255
-+ 	VERBATIM	reduce by rule 255
-+ 	RTL	reduce by rule 255
-+ 	SPAN	reduce by rule 255
-+ 	DELAYSLOT	reduce by rule 255
-+ 	ALWAYS	reduce by rule 255
-+ 	NEVER	reduce by rule 255
-+ 	NONFIX	reduce by rule 255
-+ 	INFIX	reduce by rule 255
-+ 	INFIXR	reduce by rule 255
-+ 	DEBUG	reduce by rule 255
-+ 	ASM_COLON	reduce by rule 255
-+ 	MC_COLON	reduce by rule 255
-+ 	RTL_COLON	reduce by rule 255
-+ 	DELAYSLOT_COLON	reduce by rule 255
-+ 	NULLIFIED_COLON	reduce by rule 255
-+ 	PADDING_COLON	reduce by rule 255
-+ 	RESOURCE	reduce by rule 255
-+ 	CPU	reduce by rule 255
-+ 	LATENCY	reduce by rule 255
-+ 	EXCEPTION	reduce by rule 255
-+ 	ID	reduce by rule 255
-+ 	SYMBOL	reduce by rule 255
-+ 	WORD	reduce by rule 255
-+ 	INT	reduce by rule 255
-+ 	INTINF	reduce by rule 255
-+ 	REAL	reduce by rule 255
-+ 	STRING	reduce by rule 255
-+ 	CHAR	reduce by rule 255
-+ 	EOF	reduce by rule 255
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 531:
-+ 
-+ 	rtlterms : rtlterm rtlterms .  (reduce by rule 119)
-+ 
-+ 	RRBRACKET	reduce by rule 119
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 532:
-+ 
-+ 	rtlterm : HASH id .  (reduce by rule 122)
-+ 
-+ 	TIMES	reduce by rule 122
-+ 	DEREF	reduce by rule 122
-+ 	NOT	reduce by rule 122
-+ 	RRBRACKET	reduce by rule 122
-+ 	CELLSET	reduce by rule 122
-+ 	HASH	reduce by rule 122
-+ 	ID	reduce by rule 122
-+ 	SYMBOL	reduce by rule 122
-+ 	STRING	reduce by rule 122
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 533:
-+ 
-+ 	aexp : DOLLAR id LBRACKET . exp region RBRACKET 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 606
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 534:
-+ 
-+ 	exp : CASE typedexp OF . clauses 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 413
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	clause	goto 412
-+ 	clauses	goto 607
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 535:
-+ 
-+ 	apat : sym CONCAT LBRACKET pats RBRACKET .  (reduce by rule 303)
-+ 	apat : sym CONCAT LBRACKET pats RBRACKET . CONCAT sym 
-+ 
-+ 	EQ	reduce by rule 303
-+ 	TIMES	reduce by rule 303
-+ 	AND	reduce by rule 303
-+ 	DEREF	reduce by rule 303
-+ 	NOT	reduce by rule 303
-+ 	CONCAT	shift 608
-+ 	LHASHBRACKET	reduce by rule 303
-+ 	LPAREN	reduce by rule 303
-+ 	RPAREN	reduce by rule 303
-+ 	LBRACKET	reduce by rule 303
-+ 	RBRACKET	reduce by rule 303
-+ 	LBRACE	reduce by rule 303
-+ 	RBRACE	reduce by rule 303
-+ 	CELLSET	reduce by rule 303
-+ 	COMMA	reduce by rule 303
-+ 	COLON	reduce by rule 303
-+ 	BAR	reduce by rule 303
-+ 	DARROW	reduce by rule 303
-+ 	TRUE	reduce by rule 303
-+ 	FALSE	reduce by rule 303
-+ 	WILD	reduce by rule 303
-+ 	WHERE	reduce by rule 303
-+ 	OP	reduce by rule 303
-+ 	ALWAYS	reduce by rule 303
-+ 	NEVER	reduce by rule 303
-+ 	EXCEPTION	reduce by rule 303
-+ 	ID	reduce by rule 303
-+ 	SYMBOL	reduce by rule 303
-+ 	WORD	reduce by rule 303
-+ 	INT	reduce by rule 303
-+ 	INTINF	reduce by rule 303
-+ 	REAL	reduce by rule 303
-+ 	STRING	reduce by rule 303
-+ 	CHAR	reduce by rule 303
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 536:
-+ 
-+ 	mymldecl : RTL id LBRACE labpats0 RBRACE EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 609
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 537:
-+ 
-+ 	labpat : sym WHERE typedexp IN . typedpat 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 610
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 538:
-+ 
-+ 	apat : LBRACKET pats RBRACKET CONCAT sym .  (reduce by rule 305)
-+ 
-+ 	EQ	reduce by rule 305
-+ 	TIMES	reduce by rule 305
-+ 	AND	reduce by rule 305
-+ 	DEREF	reduce by rule 305
-+ 	NOT	reduce by rule 305
-+ 	LHASHBRACKET	reduce by rule 305
-+ 	LPAREN	reduce by rule 305
-+ 	RPAREN	reduce by rule 305
-+ 	LBRACKET	reduce by rule 305
-+ 	RBRACKET	reduce by rule 305
-+ 	LBRACE	reduce by rule 305
-+ 	RBRACE	reduce by rule 305
-+ 	CELLSET	reduce by rule 305
-+ 	COMMA	reduce by rule 305
-+ 	COLON	reduce by rule 305
-+ 	BAR	reduce by rule 305
-+ 	DARROW	reduce by rule 305
-+ 	TRUE	reduce by rule 305
-+ 	FALSE	reduce by rule 305
-+ 	WILD	reduce by rule 305
-+ 	WHERE	reduce by rule 305
-+ 	OP	reduce by rule 305
-+ 	ALWAYS	reduce by rule 305
-+ 	NEVER	reduce by rule 305
-+ 	EXCEPTION	reduce by rule 305
-+ 	ID	reduce by rule 305
-+ 	SYMBOL	reduce by rule 305
-+ 	WORD	reduce by rule 305
-+ 	INT	reduce by rule 305
-+ 	INTINF	reduce by rule 305
-+ 	REAL	reduce by rule 305
-+ 	STRING	reduce by rule 305
-+ 	CHAR	reduce by rule 305
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 539:
-+ 
-+ 	apat : LPAREN typedpat WHERE typedexp RPAREN .  (reduce by rule 300)
-+ 
-+ 	EQ	reduce by rule 300
-+ 	TIMES	reduce by rule 300
-+ 	AND	reduce by rule 300
-+ 	DEREF	reduce by rule 300
-+ 	NOT	reduce by rule 300
-+ 	LHASHBRACKET	reduce by rule 300
-+ 	LPAREN	reduce by rule 300
-+ 	RPAREN	reduce by rule 300
-+ 	LBRACKET	reduce by rule 300
-+ 	RBRACKET	reduce by rule 300
-+ 	LBRACE	reduce by rule 300
-+ 	RBRACE	reduce by rule 300
-+ 	CELLSET	reduce by rule 300
-+ 	COMMA	reduce by rule 300
-+ 	COLON	reduce by rule 300
-+ 	BAR	reduce by rule 300
-+ 	DARROW	reduce by rule 300
-+ 	TRUE	reduce by rule 300
-+ 	FALSE	reduce by rule 300
-+ 	WILD	reduce by rule 300
-+ 	WHERE	reduce by rule 300
-+ 	OP	reduce by rule 300
-+ 	ALWAYS	reduce by rule 300
-+ 	NEVER	reduce by rule 300
-+ 	EXCEPTION	reduce by rule 300
-+ 	ID	reduce by rule 300
-+ 	SYMBOL	reduce by rule 300
-+ 	WORD	reduce by rule 300
-+ 	INT	reduce by rule 300
-+ 	INTINF	reduce by rule 300
-+ 	REAL	reduce by rule 300
-+ 	STRING	reduce by rule 300
-+ 	CHAR	reduce by rule 300
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 540:
-+ 
-+ 	apat : LPAREN typedpat WHERE typedexp IN . typedpat RPAREN 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LHASHBRACKET	shift 103
-+ 	LPAREN	shift 102
-+ 	LBRACKET	shift 101
-+ 	LBRACE	shift 100
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	WILD	shift 97
-+ 	OP	shift 128
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 127
-+ 	sym	goto 134
-+ 	symb	goto 67
-+ 	ident2	goto 87
-+ 	path	goto 85
-+ 	apat	goto 124
-+ 	apat2	goto 123
-+ 	apppat	goto 122
-+ 	pat	goto 195
-+ 	typedpat	goto 611
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 75
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 541:
-+ 
-+ 	cycles : cycle .  (reduce by rule 47)
-+ 	cycles : cycle . COMMA cycles 
-+ 	cycle : cycle . CONCAT cycle 
-+ 	cycle : cycle . TIMES int 
-+ 
-+ 	TIMES	shift 614
-+ 	CONCAT	shift 613
-+ 	RBRACKET	reduce by rule 47
-+ 	COMMA	shift 612
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 542:
-+ 
-+ 	cycles0 : cycles .  (reduce by rule 46)
-+ 
-+ 	RBRACKET	reduce by rule 46
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 543:
-+ 
-+ 	pipelineclause : id pat EQ LBRACKET cycles0 . RBRACKET 
-+ 
-+ 	RBRACKET	shift 615
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 544:
-+ 
-+ 	cycle : id .  (reduce by rule 49)
-+ 
-+ 	TIMES	reduce by rule 49
-+ 	CONCAT	reduce by rule 49
-+ 	RPAREN	reduce by rule 49
-+ 	RBRACKET	reduce by rule 49
-+ 	COMMA	reduce by rule 49
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 545:
-+ 
-+ 	cycle : LPAREN . cycle RPAREN 
-+ 
-+ 	LPAREN	shift 545
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 544
-+ 	cycle	goto 616
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 546:
-+ 
-+ 	sigsubs : sigsub AND sigsubs .  (reduce by rule 96)
-+ 
-+ 	ARCHITECTURE	reduce by rule 96
-+ 	END	reduce by rule 96
-+ 	LOCAL	reduce by rule 96
-+ 	IN	reduce by rule 96
-+ 	DATATYPE	reduce by rule 96
-+ 	TYPE	reduce by rule 96
-+ 	EQ	reduce by rule 96
-+ 	RPAREN	reduce by rule 96
-+ 	SEMICOLON	reduce by rule 96
-+ 	STORAGE	reduce by rule 96
-+ 	LOCATIONS	reduce by rule 96
-+ 	STRUCTURE	reduce by rule 96
-+ 	FUNCTOR	reduce by rule 96
-+ 	SIGNATURE	reduce by rule 96
-+ 	WHERE	reduce by rule 96
-+ 	SHARING	reduce by rule 96
-+ 	INSTRUCTION	reduce by rule 96
-+ 	VLIW	reduce by rule 96
-+ 	SUPERSCALAR	reduce by rule 96
-+ 	FUN	reduce by rule 96
-+ 	VAL	reduce by rule 96
-+ 	INCLUDE	reduce by rule 96
-+ 	OPEN	reduce by rule 96
-+ 	LITTLE	reduce by rule 96
-+ 	BIG	reduce by rule 96
-+ 	PIPELINE	reduce by rule 96
-+ 	LOWERCASE	reduce by rule 96
-+ 	UPPERCASE	reduce by rule 96
-+ 	VERBATIM	reduce by rule 96
-+ 	RTL	reduce by rule 96
-+ 	NONFIX	reduce by rule 96
-+ 	INFIX	reduce by rule 96
-+ 	INFIXR	reduce by rule 96
-+ 	DEBUG	reduce by rule 96
-+ 	RESOURCE	reduce by rule 96
-+ 	CPU	reduce by rule 96
-+ 	LATENCY	reduce by rule 96
-+ 	EXCEPTION	reduce by rule 96
-+ 	EOF	reduce by rule 96
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 547:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	sigsub : ident EQ structexp .  (reduce by rule 98)
-+ 
-+ 	ARCHITECTURE	reduce by rule 98
-+ 	END	reduce by rule 98
-+ 	LOCAL	reduce by rule 98
-+ 	IN	reduce by rule 98
-+ 	DATATYPE	reduce by rule 98
-+ 	TYPE	reduce by rule 98
-+ 	EQ	reduce by rule 98
-+ 	AND	reduce by rule 98
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 98
-+ 	SEMICOLON	reduce by rule 98
-+ 	STORAGE	reduce by rule 98
-+ 	LOCATIONS	reduce by rule 98
-+ 	STRUCTURE	reduce by rule 98
-+ 	FUNCTOR	reduce by rule 98
-+ 	SIGNATURE	reduce by rule 98
-+ 	WHERE	reduce by rule 98
-+ 	SHARING	reduce by rule 98
-+ 	INSTRUCTION	reduce by rule 98
-+ 	VLIW	reduce by rule 98
-+ 	SUPERSCALAR	reduce by rule 98
-+ 	FUN	reduce by rule 98
-+ 	VAL	reduce by rule 98
-+ 	INCLUDE	reduce by rule 98
-+ 	OPEN	reduce by rule 98
-+ 	LITTLE	reduce by rule 98
-+ 	BIG	reduce by rule 98
-+ 	PIPELINE	reduce by rule 98
-+ 	LOWERCASE	reduce by rule 98
-+ 	UPPERCASE	reduce by rule 98
-+ 	VERBATIM	reduce by rule 98
-+ 	RTL	reduce by rule 98
-+ 	NONFIX	reduce by rule 98
-+ 	INFIX	reduce by rule 98
-+ 	INFIXR	reduce by rule 98
-+ 	DEBUG	reduce by rule 98
-+ 	RESOURCE	reduce by rule 98
-+ 	CPU	reduce by rule 98
-+ 	LATENCY	reduce by rule 98
-+ 	EXCEPTION	reduce by rule 98
-+ 	EOF	reduce by rule 98
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 548:
-+ 
-+ 	sigsub : TYPE ident EQ . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 617
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 549:
-+ 
-+ 	typedexp : typedexp COLON ty .  (reduce by rule 281)
-+ 	ty : ty . ARROW ty 
-+ 
-+ 	ARCHITECTURE	reduce by rule 281
-+ 	END	reduce by rule 281
-+ 	LOCAL	reduce by rule 281
-+ 	IN	reduce by rule 281
-+ 	OF	reduce by rule 281
-+ 	DATATYPE	reduce by rule 281
-+ 	TYPE	reduce by rule 281
-+ 	AND	reduce by rule 281
-+ 	RPAREN	reduce by rule 281
-+ 	RBRACKET	reduce by rule 281
-+ 	RBRACE	reduce by rule 281
-+ 	SEMICOLON	reduce by rule 281
-+ 	STORAGE	reduce by rule 281
-+ 	LOCATIONS	reduce by rule 281
-+ 	COMMA	reduce by rule 281
-+ 	COLON	reduce by rule 281
-+ 	BAR	reduce by rule 281
-+ 	ARROW	shift 388
-+ 	DARROW	reduce by rule 281
-+ 	THEN	reduce by rule 281
-+ 	ELSE	reduce by rule 281
-+ 	STRUCTURE	reduce by rule 281
-+ 	FUNCTOR	reduce by rule 281
-+ 	SIGNATURE	reduce by rule 281
-+ 	SHARING	reduce by rule 281
-+ 	INSTRUCTION	reduce by rule 281
-+ 	VLIW	reduce by rule 281
-+ 	SUPERSCALAR	reduce by rule 281
-+ 	FUN	reduce by rule 281
-+ 	VAL	reduce by rule 281
-+ 	INCLUDE	reduce by rule 281
-+ 	OPEN	reduce by rule 281
-+ 	LITTLE	reduce by rule 281
-+ 	BIG	reduce by rule 281
-+ 	PIPELINE	reduce by rule 281
-+ 	LOWERCASE	reduce by rule 281
-+ 	UPPERCASE	reduce by rule 281
-+ 	VERBATIM	reduce by rule 281
-+ 	RTL	reduce by rule 281
-+ 	NONFIX	reduce by rule 281
-+ 	INFIX	reduce by rule 281
-+ 	INFIXR	reduce by rule 281
-+ 	DEBUG	reduce by rule 281
-+ 	RESOURCE	reduce by rule 281
-+ 	CPU	reduce by rule 281
-+ 	LATENCY	reduce by rule 281
-+ 	EXCEPTION	reduce by rule 281
-+ 	EOF	reduce by rule 281
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 550:
-+ 
-+ 	funclause : apppat funguard return_ty cont EQ . typedexp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 618
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 551:
-+ 
-+ 	cont : EXCEPTION id .  (reduce by rule 338)
-+ 
-+ 	EQ	reduce by rule 338
-+ 	DARROW	reduce by rule 338
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 552:
-+ 
-+ 	funguard : WHERE LPAREN typedexp RPAREN .  (reduce by rule 347)
-+ 
-+ 	EQ	reduce by rule 347
-+ 	COLON	reduce by rule 347
-+ 	EXCEPTION	reduce by rule 347
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 553:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl . nop nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 153
-+ 	END	reduce by rule 153
-+ 	LOCAL	reduce by rule 153
-+ 	IN	reduce by rule 153
-+ 	DATATYPE	reduce by rule 153
-+ 	TYPE	reduce by rule 153
-+ 	AND	reduce by rule 153
-+ 	RPAREN	reduce by rule 153
-+ 	SEMICOLON	reduce by rule 153
-+ 	STORAGE	reduce by rule 153
-+ 	LOCATIONS	reduce by rule 153
-+ 	BAR	reduce by rule 153
-+ 	STRUCTURE	reduce by rule 153
-+ 	FUNCTOR	reduce by rule 153
-+ 	SIGNATURE	reduce by rule 153
-+ 	SHARING	reduce by rule 153
-+ 	INSTRUCTION	reduce by rule 153
-+ 	VLIW	reduce by rule 153
-+ 	SUPERSCALAR	reduce by rule 153
-+ 	WITHTYPE	reduce by rule 153
-+ 	FUN	reduce by rule 153
-+ 	VAL	reduce by rule 153
-+ 	INCLUDE	reduce by rule 153
-+ 	OPEN	reduce by rule 153
-+ 	LITTLE	reduce by rule 153
-+ 	BIG	reduce by rule 153
-+ 	PIPELINE	reduce by rule 153
-+ 	LOWERCASE	reduce by rule 153
-+ 	UPPERCASE	reduce by rule 153
-+ 	VERBATIM	reduce by rule 153
-+ 	RTL	reduce by rule 153
-+ 	SPAN	reduce by rule 153
-+ 	DELAYSLOT	reduce by rule 153
-+ 	NONFIX	reduce by rule 153
-+ 	INFIX	reduce by rule 153
-+ 	INFIXR	reduce by rule 153
-+ 	DEBUG	reduce by rule 153
-+ 	DELAYSLOT_COLON	reduce by rule 153
-+ 	NULLIFIED_COLON	reduce by rule 153
-+ 	PADDING_COLON	shift 620
-+ 	RESOURCE	reduce by rule 153
-+ 	CPU	reduce by rule 153
-+ 	LATENCY	reduce by rule 153
-+ 	EXCEPTION	reduce by rule 153
-+ 	EOF	reduce by rule 153
-+ 
-+ 	nop	goto 619
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 554:
-+ 
-+ 	rtl : RTL_COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 621
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 555:
-+ 
-+ 	consencoding : id LBRACE . labexps0 RBRACE 
-+ 
-+ 	RBRACE	reduce by rule 266
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 421
-+ 	labexps0	goto 622
-+ 	labexps	goto 419
-+ 	labexp	goto 418
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 556:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	consencoding : MC_COLON exp .  (reduce by rule 181)
-+ 
-+ 	ARCHITECTURE	reduce by rule 181
-+ 	END	reduce by rule 181
-+ 	LOCAL	reduce by rule 181
-+ 	IN	reduce by rule 181
-+ 	DATATYPE	reduce by rule 181
-+ 	TYPE	reduce by rule 181
-+ 	AND	reduce by rule 181
-+ 	RPAREN	reduce by rule 181
-+ 	SEMICOLON	reduce by rule 181
-+ 	STORAGE	reduce by rule 181
-+ 	LOCATIONS	reduce by rule 181
-+ 	BAR	reduce by rule 181
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 181
-+ 	FUNCTOR	reduce by rule 181
-+ 	SIGNATURE	reduce by rule 181
-+ 	SHARING	reduce by rule 181
-+ 	INSTRUCTION	reduce by rule 181
-+ 	VLIW	reduce by rule 181
-+ 	SUPERSCALAR	reduce by rule 181
-+ 	WITHTYPE	reduce by rule 181
-+ 	FUN	reduce by rule 181
-+ 	VAL	reduce by rule 181
-+ 	INCLUDE	reduce by rule 181
-+ 	OPEN	reduce by rule 181
-+ 	LITTLE	reduce by rule 181
-+ 	BIG	reduce by rule 181
-+ 	PIPELINE	reduce by rule 181
-+ 	LOWERCASE	reduce by rule 181
-+ 	UPPERCASE	reduce by rule 181
-+ 	VERBATIM	reduce by rule 181
-+ 	RTL	reduce by rule 181
-+ 	SPAN	reduce by rule 181
-+ 	DELAYSLOT	reduce by rule 181
-+ 	NONFIX	reduce by rule 181
-+ 	INFIX	reduce by rule 181
-+ 	INFIXR	reduce by rule 181
-+ 	DEBUG	reduce by rule 181
-+ 	RTL_COLON	reduce by rule 181
-+ 	DELAYSLOT_COLON	reduce by rule 181
-+ 	NULLIFIED_COLON	reduce by rule 181
-+ 	PADDING_COLON	reduce by rule 181
-+ 	RESOURCE	reduce by rule 181
-+ 	CPU	reduce by rule 181
-+ 	LATENCY	reduce by rule 181
-+ 	EXCEPTION	reduce by rule 181
-+ 	EOF	reduce by rule 181
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 557:
-+ 
-+ 	consencoding : LPAREN expseq . RPAREN 
-+ 
-+ 	RPAREN	shift 623
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 558:
-+ 
-+ 	consencoding : LPAREN exps2 . RPAREN 
-+ 
-+ 	RPAREN	shift 624
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 559:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	exps2 : typedexp . COMMA exps1 
-+ 	expseq : typedexp .  (reduce by rule 282)
-+ 	expseq : typedexp . SEMICOLON expseq 
-+ 
-+ 	RPAREN	reduce by rule 282
-+ 	SEMICOLON	shift 625
-+ 	COMMA	shift 525
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 560:
-+ 
-+ 	formatbind : id opt_of LBRACE fields . RBRACE opt_exp 
-+ 
-+ 	RBRACE	shift 626
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 561:
-+ 
-+ 	field : fieldid . COLON cnv signedness width unsignedint_opt 
-+ 
-+ 	COLON	shift 627
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 562:
-+ 
-+ 	fields : field .  (reduce by rule 209)
-+ 	fields : field . COMMA fields 
-+ 
-+ 	RBRACE	reduce by rule 209
-+ 	COMMA	shift 628
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 563:
-+ 
-+ 	field : id .  (reduce by rule 212)
-+ 	fieldid : id .  (reduce by rule 213)
-+ 
-+ 	RBRACE	reduce by rule 212
-+ 	COMMA	reduce by rule 212
-+ 	COLON	reduce by rule 213
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 564:
-+ 
-+ 	fieldid : WILD .  (reduce by rule 214)
-+ 
-+ 	COLON	reduce by rule 214
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 565:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN sigcon . EQ structexp 
-+ 
-+ 	EQ	shift 629
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 566:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 630
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 567:
-+ 
-+ 	sigcon : COLON sigexp .  (reduce by rule 93)
-+ 	sigexp : sigexp . WHERE sigsubs 
-+ 
-+ 	EQ	reduce by rule 93
-+ 	RPAREN	reduce by rule 93
-+ 	WHERE	shift 206
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 568:
-+ 
-+ 	structexp : structexp LPAREN scopeddecls . RPAREN 
-+ 
-+ 	RPAREN	shift 631
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 569:
-+ 
-+ 	structexp : structexp LPAREN ident . RPAREN 
-+ 
-+ 	RPAREN	shift 632
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 570:
-+ 
-+ 	structexp : STRUCT scopeddecls END .  (reduce by rule 124)
-+ 
-+ 	ARCHITECTURE	reduce by rule 124
-+ 	END	reduce by rule 124
-+ 	LOCAL	reduce by rule 124
-+ 	IN	reduce by rule 124
-+ 	DATATYPE	reduce by rule 124
-+ 	TYPE	reduce by rule 124
-+ 	EQ	reduce by rule 124
-+ 	AND	reduce by rule 124
-+ 	LPAREN	reduce by rule 124
-+ 	RPAREN	reduce by rule 124
-+ 	SEMICOLON	reduce by rule 124
-+ 	STORAGE	reduce by rule 124
-+ 	LOCATIONS	reduce by rule 124
-+ 	STRUCTURE	reduce by rule 124
-+ 	FUNCTOR	reduce by rule 124
-+ 	SIGNATURE	reduce by rule 124
-+ 	WHERE	reduce by rule 124
-+ 	SHARING	reduce by rule 124
-+ 	INSTRUCTION	reduce by rule 124
-+ 	VLIW	reduce by rule 124
-+ 	SUPERSCALAR	reduce by rule 124
-+ 	FUN	reduce by rule 124
-+ 	VAL	reduce by rule 124
-+ 	INCLUDE	reduce by rule 124
-+ 	OPEN	reduce by rule 124
-+ 	LITTLE	reduce by rule 124
-+ 	BIG	reduce by rule 124
-+ 	PIPELINE	reduce by rule 124
-+ 	LOWERCASE	reduce by rule 124
-+ 	UPPERCASE	reduce by rule 124
-+ 	VERBATIM	reduce by rule 124
-+ 	RTL	reduce by rule 124
-+ 	NONFIX	reduce by rule 124
-+ 	INFIX	reduce by rule 124
-+ 	INFIXR	reduce by rule 124
-+ 	DEBUG	reduce by rule 124
-+ 	RESOURCE	reduce by rule 124
-+ 	CPU	reduce by rule 124
-+ 	LATENCY	reduce by rule 124
-+ 	EXCEPTION	reduce by rule 124
-+ 	EOF	reduce by rule 124
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 571:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET . cellcount RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	RBRACKET	reduce by rule 389
-+ 	INT	shift 64
-+ 
-+ 	int	goto 634
-+ 	cellcount	goto 633
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 572:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm . EQ consbinds 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm . EQ DATATYPE ty 
-+ 
-+ 	EQ	shift 635
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 573:
-+ 
-+ 	hasasm : DEREF .  (reduce by rule 131)
-+ 
-+ 	EQ	reduce by rule 131
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 574:
-+ 
-+ 	fieldty : COLON id .  (reduce by rule 134)
-+ 
-+ 	EQ	reduce by rule 134
-+ 	DEREF	reduce by rule 134
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 575:
-+ 
-+ 	opcodeencoding : LBRACKET encodingexps RBRACKET .  (reduce by rule 136)
-+ 
-+ 	EQ	reduce by rule 136
-+ 	DEREF	reduce by rule 136
-+ 	COLON	reduce by rule 136
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 576:
-+ 
-+ 	encodingexps : encodingexp COMMA . encodingexps 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 489
-+ 	encodingexp	goto 488
-+ 	encodingexps	goto 636
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 577:
-+ 
-+ 	encodingexp : int int . DOTDOT int 
-+ 
-+ 	DOTDOT	shift 637
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 578:
-+ 
-+ 	encodingexp : int DOTDOT . int 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 638
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 579:
-+ 
-+ 	mymddecl : ARCHITECTURE id EQ STRUCT decls END .  (reduce by rule 12)
-+ 
-+ 	ARCHITECTURE	reduce by rule 12
-+ 	END	reduce by rule 12
-+ 	LOCAL	reduce by rule 12
-+ 	IN	reduce by rule 12
-+ 	DATATYPE	reduce by rule 12
-+ 	TYPE	reduce by rule 12
-+ 	RPAREN	reduce by rule 12
-+ 	SEMICOLON	reduce by rule 12
-+ 	STORAGE	reduce by rule 12
-+ 	LOCATIONS	reduce by rule 12
-+ 	STRUCTURE	reduce by rule 12
-+ 	FUNCTOR	reduce by rule 12
-+ 	SIGNATURE	reduce by rule 12
-+ 	SHARING	reduce by rule 12
-+ 	INSTRUCTION	reduce by rule 12
-+ 	VLIW	reduce by rule 12
-+ 	SUPERSCALAR	reduce by rule 12
-+ 	FUN	reduce by rule 12
-+ 	VAL	reduce by rule 12
-+ 	INCLUDE	reduce by rule 12
-+ 	OPEN	reduce by rule 12
-+ 	LITTLE	reduce by rule 12
-+ 	BIG	reduce by rule 12
-+ 	PIPELINE	reduce by rule 12
-+ 	LOWERCASE	reduce by rule 12
-+ 	UPPERCASE	reduce by rule 12
-+ 	VERBATIM	reduce by rule 12
-+ 	RTL	reduce by rule 12
-+ 	NONFIX	reduce by rule 12
-+ 	INFIX	reduce by rule 12
-+ 	INFIXR	reduce by rule 12
-+ 	DEBUG	reduce by rule 12
-+ 	RESOURCE	reduce by rule 12
-+ 	CPU	reduce by rule 12
-+ 	LATENCY	reduce by rule 12
-+ 	EXCEPTION	reduce by rule 12
-+ 	EOF	reduce by rule 12
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 580:
-+ 
-+ 	labtys1 : labty COMMA labtys1 .  (reduce by rule 377)
-+ 
-+ 	RBRACE	reduce by rule 377
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 581:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	labty : id COLON ty .  (reduce by rule 378)
-+ 
-+ 	RBRACE	reduce by rule 378
-+ 	COMMA	reduce by rule 378
-+ 	ARROW	shift 388
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 582:
-+ 
-+ 	appty : LPAREN tys2 RPAREN tident .  (reduce by rule 359)
-+ 
-+ 	ARCHITECTURE	reduce by rule 359
-+ 	END	reduce by rule 359
-+ 	LOCAL	reduce by rule 359
-+ 	IN	reduce by rule 359
-+ 	OF	reduce by rule 359
-+ 	DATATYPE	reduce by rule 359
-+ 	TYPE	reduce by rule 359
-+ 	EQ	reduce by rule 359
-+ 	TIMES	reduce by rule 359
-+ 	AND	reduce by rule 359
-+ 	LPAREN	reduce by rule 359
-+ 	RPAREN	reduce by rule 359
-+ 	RBRACKET	reduce by rule 359
-+ 	RBRACE	reduce by rule 359
-+ 	SEMICOLON	reduce by rule 359
-+ 	LDQUOTE	reduce by rule 359
-+ 	CELLSET	reduce by rule 359
-+ 	STORAGE	reduce by rule 359
-+ 	LOCATIONS	reduce by rule 359
-+ 	COMMA	reduce by rule 359
-+ 	COLON	reduce by rule 359
-+ 	BAR	reduce by rule 359
-+ 	ARROW	reduce by rule 359
-+ 	DARROW	reduce by rule 359
-+ 	BITS	reduce by rule 359
-+ 	THEN	reduce by rule 359
-+ 	ELSE	reduce by rule 359
-+ 	STRUCTURE	reduce by rule 359
-+ 	FUNCTOR	reduce by rule 359
-+ 	SIGNATURE	reduce by rule 359
-+ 	WHERE	reduce by rule 359
-+ 	SHARING	reduce by rule 359
-+ 	INSTRUCTION	reduce by rule 359
-+ 	CELL	reduce by rule 359
-+ 	VLIW	reduce by rule 359
-+ 	SUPERSCALAR	reduce by rule 359
-+ 	WITHTYPE	reduce by rule 359
-+ 	FUN	reduce by rule 359
-+ 	VAL	reduce by rule 359
-+ 	INCLUDE	reduce by rule 359
-+ 	OPEN	reduce by rule 359
-+ 	LITTLE	reduce by rule 359
-+ 	BIG	reduce by rule 359
-+ 	PIPELINE	reduce by rule 359
-+ 	LOWERCASE	reduce by rule 359
-+ 	UPPERCASE	reduce by rule 359
-+ 	VERBATIM	reduce by rule 359
-+ 	RTL	reduce by rule 359
-+ 	SPAN	reduce by rule 359
-+ 	DELAYSLOT	reduce by rule 359
-+ 	NONFIX	reduce by rule 359
-+ 	INFIX	reduce by rule 359
-+ 	INFIXR	reduce by rule 359
-+ 	DEBUG	reduce by rule 359
-+ 	ASM_COLON	reduce by rule 359
-+ 	MC_COLON	reduce by rule 359
-+ 	RTL_COLON	reduce by rule 359
-+ 	DELAYSLOT_COLON	reduce by rule 359
-+ 	NULLIFIED_COLON	reduce by rule 359
-+ 	PADDING_COLON	reduce by rule 359
-+ 	RESOURCE	reduce by rule 359
-+ 	CPU	reduce by rule 359
-+ 	LATENCY	reduce by rule 359
-+ 	EXCEPTION	reduce by rule 359
-+ 	ID	reduce by rule 359
-+ 	SYMBOL	reduce by rule 359
-+ 	WORD	reduce by rule 359
-+ 	INT	reduce by rule 359
-+ 	STRING	reduce by rule 359
-+ 	EOF	reduce by rule 359
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 583:
-+ 
-+ 	tys2 : ty COMMA tys2 .  (reduce by rule 370)
-+ 
-+ 	RPAREN	reduce by rule 370
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 584:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	tys2 : ty . COMMA ty 
-+ 	tys2 : ty COMMA ty .  (reduce by rule 369)
-+ 	tys2 : ty . COMMA tys2 
-+ 
-+ 	RPAREN	reduce by rule 369
-+ 	COMMA	shift 501
-+ 	ARROW	shift 388
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 585:
-+ 
-+ 	resources : resource COMMA . resources 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	INT	shift 64
-+ 
-+ 	id	goto 506
-+ 	int	goto 505
-+ 	resources	goto 639
-+ 	resource	goto 503
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 586:
-+ 
-+ 	cpubind : id aliases int LBRACKET resources RBRACKET .  (reduce by rule 32)
-+ 
-+ 	ARCHITECTURE	reduce by rule 32
-+ 	END	reduce by rule 32
-+ 	LOCAL	reduce by rule 32
-+ 	IN	reduce by rule 32
-+ 	DATATYPE	reduce by rule 32
-+ 	TYPE	reduce by rule 32
-+ 	AND	reduce by rule 32
-+ 	RPAREN	reduce by rule 32
-+ 	SEMICOLON	reduce by rule 32
-+ 	STORAGE	reduce by rule 32
-+ 	LOCATIONS	reduce by rule 32
-+ 	STRUCTURE	reduce by rule 32
-+ 	FUNCTOR	reduce by rule 32
-+ 	SIGNATURE	reduce by rule 32
-+ 	SHARING	reduce by rule 32
-+ 	INSTRUCTION	reduce by rule 32
-+ 	VLIW	reduce by rule 32
-+ 	SUPERSCALAR	reduce by rule 32
-+ 	FUN	reduce by rule 32
-+ 	VAL	reduce by rule 32
-+ 	INCLUDE	reduce by rule 32
-+ 	OPEN	reduce by rule 32
-+ 	LITTLE	reduce by rule 32
-+ 	BIG	reduce by rule 32
-+ 	PIPELINE	reduce by rule 32
-+ 	LOWERCASE	reduce by rule 32
-+ 	UPPERCASE	reduce by rule 32
-+ 	VERBATIM	reduce by rule 32
-+ 	RTL	reduce by rule 32
-+ 	NONFIX	reduce by rule 32
-+ 	INFIX	reduce by rule 32
-+ 	INFIXR	reduce by rule 32
-+ 	DEBUG	reduce by rule 32
-+ 	RESOURCE	reduce by rule 32
-+ 	CPU	reduce by rule 32
-+ 	LATENCY	reduce by rule 32
-+ 	EXCEPTION	reduce by rule 32
-+ 	EOF	reduce by rule 32
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 587:
-+ 
-+ 	resource : int id .  (reduce by rule 37)
-+ 
-+ 	RBRACKET	reduce by rule 37
-+ 	COMMA	reduce by rule 37
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 588:
-+ 
-+ 	aexp2 : aexp2 AT LBRACKET slices . RBRACKET 
-+ 
-+ 	RBRACKET	shift 640
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 589:
-+ 
-+ 	slices : slice .  (reduce by rule 409)
-+ 	slices : slice . COMMA slices 
-+ 
-+ 	RBRACKET	reduce by rule 409
-+ 	COMMA	shift 641
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 590:
-+ 
-+ 	slice : int . DOTDOT int 
-+ 	slice : int .  (reduce by rule 412)
-+ 
-+ 	RBRACKET	reduce by rule 412
-+ 	COMMA	reduce by rule 412
-+ 	DOTDOT	shift 642
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 591:
-+ 
-+ 	aexp : sym CONCAT LBRACKET exps . RBRACKET 
-+ 	aexp : sym CONCAT LBRACKET exps . RBRACKET CONCAT sym 
-+ 
-+ 	RBRACKET	shift 643
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 592:
-+ 
-+ 	aexp : LET decls IN expseq . END 
-+ 
-+ 	END	shift 644
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 593:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	expseq : typedexp .  (reduce by rule 282)
-+ 	expseq : typedexp . SEMICOLON expseq 
-+ 
-+ 	END	reduce by rule 282
-+ 	RPAREN	reduce by rule 282
-+ 	SEMICOLON	shift 625
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 594:
-+ 
-+ 	exp : IF typedexp THEN typedexp . ELSE exp 
-+ 	typedexp : typedexp . COLON ty 
-+ 
-+ 	COLON	shift 458
-+ 	ELSE	shift 645
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 595:
-+ 
-+ 	clauses : clause BAR clauses .  (reduce by rule 342)
-+ 
-+ 	ARCHITECTURE	reduce by rule 342
-+ 	END	reduce by rule 342
-+ 	LOCAL	reduce by rule 342
-+ 	IN	reduce by rule 342
-+ 	OF	reduce by rule 342
-+ 	DATATYPE	reduce by rule 342
-+ 	TYPE	reduce by rule 342
-+ 	AND	reduce by rule 342
-+ 	LPAREN	reduce by rule 342
-+ 	RPAREN	reduce by rule 342
-+ 	RBRACKET	reduce by rule 342
-+ 	RBRACE	reduce by rule 342
-+ 	SEMICOLON	reduce by rule 342
-+ 	RMETA	reduce by rule 342
-+ 	CELLSET	reduce by rule 342
-+ 	STORAGE	reduce by rule 342
-+ 	LOCATIONS	reduce by rule 342
-+ 	COMMA	reduce by rule 342
-+ 	COLON	reduce by rule 342
-+ 	BAR	reduce by rule 342
-+ 	DARROW	reduce by rule 342
-+ 	THEN	reduce by rule 342
-+ 	ELSE	reduce by rule 342
-+ 	HANDLE	reduce by rule 342
-+ 	STRUCTURE	reduce by rule 342
-+ 	FUNCTOR	reduce by rule 342
-+ 	SIGNATURE	reduce by rule 342
-+ 	SHARING	reduce by rule 342
-+ 	INSTRUCTION	reduce by rule 342
-+ 	VLIW	reduce by rule 342
-+ 	SUPERSCALAR	reduce by rule 342
-+ 	WITHTYPE	reduce by rule 342
-+ 	FUN	reduce by rule 342
-+ 	VAL	reduce by rule 342
-+ 	INCLUDE	reduce by rule 342
-+ 	OPEN	reduce by rule 342
-+ 	LITTLE	reduce by rule 342
-+ 	BIG	reduce by rule 342
-+ 	PIPELINE	reduce by rule 342
-+ 	LOWERCASE	reduce by rule 342
-+ 	UPPERCASE	reduce by rule 342
-+ 	VERBATIM	reduce by rule 342
-+ 	RTL	reduce by rule 342
-+ 	SPAN	reduce by rule 342
-+ 	DELAYSLOT	reduce by rule 342
-+ 	NONFIX	reduce by rule 342
-+ 	INFIX	reduce by rule 342
-+ 	INFIXR	reduce by rule 342
-+ 	DEBUG	reduce by rule 342
-+ 	ASM_COLON	reduce by rule 342
-+ 	MC_COLON	reduce by rule 342
-+ 	RTL_COLON	reduce by rule 342
-+ 	DELAYSLOT_COLON	reduce by rule 342
-+ 	NULLIFIED_COLON	reduce by rule 342
-+ 	PADDING_COLON	reduce by rule 342
-+ 	RESOURCE	reduce by rule 342
-+ 	CPU	reduce by rule 342
-+ 	LATENCY	reduce by rule 342
-+ 	EXCEPTION	reduce by rule 342
-+ 	ID	reduce by rule 342
-+ 	SYMBOL	reduce by rule 342
-+ 	WORD	reduce by rule 342
-+ 	INT	reduce by rule 342
-+ 	EOF	reduce by rule 342
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 596:
-+ 
-+ 	clause : typedpat guard cont . DARROW exp 
-+ 
-+ 	DARROW	shift 646
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 597:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	guard : WHERE typedexp .  (reduce by rule 340)
-+ 
-+ 	COLON	shift 458
-+ 	DARROW	reduce by rule 340
-+ 	EXCEPTION	reduce by rule 340
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 598:
-+ 
-+ 	asm_strings : LDQUOTE asms RDQUOTE asm_strings .  (reduce by rule 187)
-+ 
-+ 	ARCHITECTURE	reduce by rule 187
-+ 	END	reduce by rule 187
-+ 	LOCAL	reduce by rule 187
-+ 	IN	reduce by rule 187
-+ 	OF	reduce by rule 187
-+ 	DATATYPE	reduce by rule 187
-+ 	TYPE	reduce by rule 187
-+ 	EQ	reduce by rule 187
-+ 	DOLLAR	reduce by rule 187
-+ 	TIMES	reduce by rule 187
-+ 	AND	reduce by rule 187
-+ 	DEREF	reduce by rule 187
-+ 	NOT	reduce by rule 187
-+ 	LLBRACKET	reduce by rule 187
-+ 	LHASHBRACKET	reduce by rule 187
-+ 	LPAREN	reduce by rule 187
-+ 	RPAREN	reduce by rule 187
-+ 	LBRACKET	reduce by rule 187
-+ 	RBRACKET	reduce by rule 187
-+ 	LBRACE	reduce by rule 187
-+ 	RBRACE	reduce by rule 187
-+ 	SEMICOLON	reduce by rule 187
-+ 	LDQUOTE	reduce by rule 187
-+ 	RMETA	reduce by rule 187
-+ 	CELLSET	reduce by rule 187
-+ 	STORAGE	reduce by rule 187
-+ 	LOCATIONS	reduce by rule 187
-+ 	HASH	reduce by rule 187
-+ 	COMMA	reduce by rule 187
-+ 	COLON	reduce by rule 187
-+ 	AT	reduce by rule 187
-+ 	BAR	reduce by rule 187
-+ 	DARROW	reduce by rule 187
-+ 	THEN	reduce by rule 187
-+ 	ELSE	reduce by rule 187
-+ 	TRUE	reduce by rule 187
-+ 	FALSE	reduce by rule 187
-+ 	HANDLE	reduce by rule 187
-+ 	LET	reduce by rule 187
-+ 	STRUCTURE	reduce by rule 187
-+ 	FUNCTOR	reduce by rule 187
-+ 	SIGNATURE	reduce by rule 187
-+ 	SHARING	reduce by rule 187
-+ 	INSTRUCTION	reduce by rule 187
-+ 	VLIW	reduce by rule 187
-+ 	SUPERSCALAR	reduce by rule 187
-+ 	WITHTYPE	reduce by rule 187
-+ 	FUN	reduce by rule 187
-+ 	VAL	reduce by rule 187
-+ 	INCLUDE	reduce by rule 187
-+ 	OPEN	reduce by rule 187
-+ 	OP	reduce by rule 187
-+ 	LITTLE	reduce by rule 187
-+ 	BIG	reduce by rule 187
-+ 	PIPELINE	reduce by rule 187
-+ 	LOWERCASE	reduce by rule 187
-+ 	UPPERCASE	reduce by rule 187
-+ 	VERBATIM	reduce by rule 187
-+ 	RTL	reduce by rule 187
-+ 	SPAN	reduce by rule 187
-+ 	DELAYSLOT	reduce by rule 187
-+ 	ALWAYS	reduce by rule 187
-+ 	NEVER	reduce by rule 187
-+ 	NONFIX	reduce by rule 187
-+ 	INFIX	reduce by rule 187
-+ 	INFIXR	reduce by rule 187
-+ 	DEBUG	reduce by rule 187
-+ 	ASM_COLON	reduce by rule 187
-+ 	MC_COLON	reduce by rule 187
-+ 	RTL_COLON	reduce by rule 187
-+ 	DELAYSLOT_COLON	reduce by rule 187
-+ 	NULLIFIED_COLON	reduce by rule 187
-+ 	PADDING_COLON	reduce by rule 187
-+ 	RESOURCE	reduce by rule 187
-+ 	CPU	reduce by rule 187
-+ 	LATENCY	reduce by rule 187
-+ 	EXCEPTION	reduce by rule 187
-+ 	ID	reduce by rule 187
-+ 	SYMBOL	reduce by rule 187
-+ 	WORD	reduce by rule 187
-+ 	INT	reduce by rule 187
-+ 	INTINF	reduce by rule 187
-+ 	REAL	reduce by rule 187
-+ 	STRING	reduce by rule 187
-+ 	CHAR	reduce by rule 187
-+ 	EOF	reduce by rule 187
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 599:
-+ 
-+ 	asm : LMETA exp RMETA .  (reduce by rule 190)
-+ 
-+ 	RDQUOTE	reduce by rule 190
-+ 	LMETA	reduce by rule 190
-+ 	ASMTEXT	reduce by rule 190
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 600:
-+ 
-+ 	labexps : labexp COMMA labexps .  (reduce by rule 269)
-+ 
-+ 	RBRACE	reduce by rule 269
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 601:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	labexp : id EQ typedexp .  (reduce by rule 270)
-+ 
-+ 	RBRACE	reduce by rule 270
-+ 	COMMA	reduce by rule 270
-+ 	COLON	shift 458
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 602:
-+ 
-+ 	aexp : LBRACKET exps RBRACKET CONCAT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 647
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 603:
-+ 
-+ 	exps1 : typedexp COMMA exps1 .  (reduce by rule 286)
-+ 
-+ 	RPAREN	reduce by rule 286
-+ 	RBRACKET	reduce by rule 286
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 604:
-+ 
-+ 	exps2 : typedexp COMMA exps1 .  (reduce by rule 287)
-+ 
-+ 	RPAREN	reduce by rule 287
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 605:
-+ 
-+ 	expseq2 : typedexp SEMICOLON expseq .  (reduce by rule 284)
-+ 
-+ 	RPAREN	reduce by rule 284
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 606:
-+ 
-+ 	aexp : DOLLAR id LBRACKET exp . region RBRACKET 
-+ 	exp : exp . HANDLE clauses 
-+ 
-+ 	RBRACKET	reduce by rule 260
-+ 	COLON	shift 649
-+ 	HANDLE	shift 402
-+ 
-+ 	region	goto 648
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 607:
-+ 
-+ 	exp : CASE typedexp OF clauses .  (reduce by rule 276)
-+ 
-+ 	ARCHITECTURE	reduce by rule 276
-+ 	END	reduce by rule 276
-+ 	LOCAL	reduce by rule 276
-+ 	IN	reduce by rule 276
-+ 	OF	reduce by rule 276
-+ 	DATATYPE	reduce by rule 276
-+ 	TYPE	reduce by rule 276
-+ 	AND	reduce by rule 276
-+ 	LPAREN	reduce by rule 276
-+ 	RPAREN	reduce by rule 276
-+ 	RBRACKET	reduce by rule 276
-+ 	RBRACE	reduce by rule 276
-+ 	SEMICOLON	reduce by rule 276
-+ 	RMETA	reduce by rule 276
-+ 	CELLSET	reduce by rule 276
-+ 	STORAGE	reduce by rule 276
-+ 	LOCATIONS	reduce by rule 276
-+ 	COMMA	reduce by rule 276
-+ 	COLON	reduce by rule 276
-+ 	BAR	reduce by rule 276
-+ 	DARROW	reduce by rule 276
-+ 	THEN	reduce by rule 276
-+ 	ELSE	reduce by rule 276
-+ 	HANDLE	reduce by rule 276
-+ 	STRUCTURE	reduce by rule 276
-+ 	FUNCTOR	reduce by rule 276
-+ 	SIGNATURE	reduce by rule 276
-+ 	SHARING	reduce by rule 276
-+ 	INSTRUCTION	reduce by rule 276
-+ 	VLIW	reduce by rule 276
-+ 	SUPERSCALAR	reduce by rule 276
-+ 	WITHTYPE	reduce by rule 276
-+ 	FUN	reduce by rule 276
-+ 	VAL	reduce by rule 276
-+ 	INCLUDE	reduce by rule 276
-+ 	OPEN	reduce by rule 276
-+ 	LITTLE	reduce by rule 276
-+ 	BIG	reduce by rule 276
-+ 	PIPELINE	reduce by rule 276
-+ 	LOWERCASE	reduce by rule 276
-+ 	UPPERCASE	reduce by rule 276
-+ 	VERBATIM	reduce by rule 276
-+ 	RTL	reduce by rule 276
-+ 	SPAN	reduce by rule 276
-+ 	DELAYSLOT	reduce by rule 276
-+ 	NONFIX	reduce by rule 276
-+ 	INFIX	reduce by rule 276
-+ 	INFIXR	reduce by rule 276
-+ 	DEBUG	reduce by rule 276
-+ 	ASM_COLON	reduce by rule 276
-+ 	MC_COLON	reduce by rule 276
-+ 	RTL_COLON	reduce by rule 276
-+ 	DELAYSLOT_COLON	reduce by rule 276
-+ 	NULLIFIED_COLON	reduce by rule 276
-+ 	PADDING_COLON	reduce by rule 276
-+ 	RESOURCE	reduce by rule 276
-+ 	CPU	reduce by rule 276
-+ 	LATENCY	reduce by rule 276
-+ 	EXCEPTION	reduce by rule 276
-+ 	ID	reduce by rule 276
-+ 	SYMBOL	reduce by rule 276
-+ 	WORD	reduce by rule 276
-+ 	INT	reduce by rule 276
-+ 	EOF	reduce by rule 276
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 608:
-+ 
-+ 	apat : sym CONCAT LBRACKET pats RBRACKET CONCAT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 650
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 609:
-+ 
-+ 	mymldecl : RTL id LBRACE labpats0 RBRACE EQ exp .  (reduce by rule 62)
-+ 	exp : exp . HANDLE clauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 62
-+ 	END	reduce by rule 62
-+ 	LOCAL	reduce by rule 62
-+ 	IN	reduce by rule 62
-+ 	DATATYPE	reduce by rule 62
-+ 	TYPE	reduce by rule 62
-+ 	RPAREN	reduce by rule 62
-+ 	SEMICOLON	reduce by rule 62
-+ 	STORAGE	reduce by rule 62
-+ 	LOCATIONS	reduce by rule 62
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 62
-+ 	FUNCTOR	reduce by rule 62
-+ 	SIGNATURE	reduce by rule 62
-+ 	SHARING	reduce by rule 62
-+ 	INSTRUCTION	reduce by rule 62
-+ 	VLIW	reduce by rule 62
-+ 	SUPERSCALAR	reduce by rule 62
-+ 	FUN	reduce by rule 62
-+ 	VAL	reduce by rule 62
-+ 	INCLUDE	reduce by rule 62
-+ 	OPEN	reduce by rule 62
-+ 	LITTLE	reduce by rule 62
-+ 	BIG	reduce by rule 62
-+ 	PIPELINE	reduce by rule 62
-+ 	LOWERCASE	reduce by rule 62
-+ 	UPPERCASE	reduce by rule 62
-+ 	VERBATIM	reduce by rule 62
-+ 	RTL	reduce by rule 62
-+ 	NONFIX	reduce by rule 62
-+ 	INFIX	reduce by rule 62
-+ 	INFIXR	reduce by rule 62
-+ 	DEBUG	reduce by rule 62
-+ 	RESOURCE	reduce by rule 62
-+ 	CPU	reduce by rule 62
-+ 	LATENCY	reduce by rule 62
-+ 	EXCEPTION	reduce by rule 62
-+ 	EOF	reduce by rule 62
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 610:
-+ 
-+ 	typedpat : typedpat . COLON ty 
-+ 	labpat : sym WHERE typedexp IN typedpat .  (reduce by rule 335)
-+ 
-+ 	RBRACE	reduce by rule 335
-+ 	COMMA	reduce by rule 335
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 611:
-+ 
-+ 	apat : LPAREN typedpat WHERE typedexp IN typedpat . RPAREN 
-+ 	typedpat : typedpat . COLON ty 
-+ 
-+ 	RPAREN	shift 651
-+ 	COLON	shift 316
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 612:
-+ 
-+ 	cycles : cycle COMMA . cycles 
-+ 
-+ 	LPAREN	shift 545
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 544
-+ 	cycles	goto 652
-+ 	cycle	goto 541
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 613:
-+ 
-+ 	cycle : cycle CONCAT . cycle 
-+ 
-+ 	LPAREN	shift 545
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 544
-+ 	cycle	goto 653
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 614:
-+ 
-+ 	cycle : cycle TIMES . int 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 654
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 615:
-+ 
-+ 	pipelineclause : id pat EQ LBRACKET cycles0 RBRACKET .  (reduce by rule 44)
-+ 
-+ 	ARCHITECTURE	reduce by rule 44
-+ 	END	reduce by rule 44
-+ 	LOCAL	reduce by rule 44
-+ 	IN	reduce by rule 44
-+ 	DATATYPE	reduce by rule 44
-+ 	TYPE	reduce by rule 44
-+ 	AND	reduce by rule 44
-+ 	RPAREN	reduce by rule 44
-+ 	SEMICOLON	reduce by rule 44
-+ 	STORAGE	reduce by rule 44
-+ 	LOCATIONS	reduce by rule 44
-+ 	BAR	reduce by rule 44
-+ 	STRUCTURE	reduce by rule 44
-+ 	FUNCTOR	reduce by rule 44
-+ 	SIGNATURE	reduce by rule 44
-+ 	SHARING	reduce by rule 44
-+ 	INSTRUCTION	reduce by rule 44
-+ 	VLIW	reduce by rule 44
-+ 	SUPERSCALAR	reduce by rule 44
-+ 	FUN	reduce by rule 44
-+ 	VAL	reduce by rule 44
-+ 	INCLUDE	reduce by rule 44
-+ 	OPEN	reduce by rule 44
-+ 	LITTLE	reduce by rule 44
-+ 	BIG	reduce by rule 44
-+ 	PIPELINE	reduce by rule 44
-+ 	LOWERCASE	reduce by rule 44
-+ 	UPPERCASE	reduce by rule 44
-+ 	VERBATIM	reduce by rule 44
-+ 	RTL	reduce by rule 44
-+ 	NONFIX	reduce by rule 44
-+ 	INFIX	reduce by rule 44
-+ 	INFIXR	reduce by rule 44
-+ 	DEBUG	reduce by rule 44
-+ 	RESOURCE	reduce by rule 44
-+ 	CPU	reduce by rule 44
-+ 	LATENCY	reduce by rule 44
-+ 	EXCEPTION	reduce by rule 44
-+ 	EOF	reduce by rule 44
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 616:
-+ 
-+ 	cycle : cycle . CONCAT cycle 
-+ 	cycle : cycle . TIMES int 
-+ 	cycle : LPAREN cycle . RPAREN 
-+ 
-+ 	TIMES	shift 614
-+ 	CONCAT	shift 613
-+ 	RPAREN	shift 655
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 617:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	sigsub : TYPE ident EQ ty .  (reduce by rule 97)
-+ 
-+ 	ARCHITECTURE	reduce by rule 97
-+ 	END	reduce by rule 97
-+ 	LOCAL	reduce by rule 97
-+ 	IN	reduce by rule 97
-+ 	DATATYPE	reduce by rule 97
-+ 	TYPE	reduce by rule 97
-+ 	EQ	reduce by rule 97
-+ 	AND	reduce by rule 97
-+ 	RPAREN	reduce by rule 97
-+ 	SEMICOLON	reduce by rule 97
-+ 	STORAGE	reduce by rule 97
-+ 	LOCATIONS	reduce by rule 97
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 97
-+ 	FUNCTOR	reduce by rule 97
-+ 	SIGNATURE	reduce by rule 97
-+ 	WHERE	reduce by rule 97
-+ 	SHARING	reduce by rule 97
-+ 	INSTRUCTION	reduce by rule 97
-+ 	VLIW	reduce by rule 97
-+ 	SUPERSCALAR	reduce by rule 97
-+ 	FUN	reduce by rule 97
-+ 	VAL	reduce by rule 97
-+ 	INCLUDE	reduce by rule 97
-+ 	OPEN	reduce by rule 97
-+ 	LITTLE	reduce by rule 97
-+ 	BIG	reduce by rule 97
-+ 	PIPELINE	reduce by rule 97
-+ 	LOWERCASE	reduce by rule 97
-+ 	UPPERCASE	reduce by rule 97
-+ 	VERBATIM	reduce by rule 97
-+ 	RTL	reduce by rule 97
-+ 	NONFIX	reduce by rule 97
-+ 	INFIX	reduce by rule 97
-+ 	INFIXR	reduce by rule 97
-+ 	DEBUG	reduce by rule 97
-+ 	RESOURCE	reduce by rule 97
-+ 	CPU	reduce by rule 97
-+ 	LATENCY	reduce by rule 97
-+ 	EXCEPTION	reduce by rule 97
-+ 	EOF	reduce by rule 97
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 618:
-+ 
-+ 	typedexp : typedexp . COLON ty 
-+ 	funclause : apppat funguard return_ty cont EQ typedexp .  (reduce by rule 343)
-+ 
-+ 	ARCHITECTURE	reduce by rule 343
-+ 	END	reduce by rule 343
-+ 	LOCAL	reduce by rule 343
-+ 	IN	reduce by rule 343
-+ 	DATATYPE	reduce by rule 343
-+ 	TYPE	reduce by rule 343
-+ 	AND	reduce by rule 343
-+ 	RPAREN	reduce by rule 343
-+ 	SEMICOLON	reduce by rule 343
-+ 	STORAGE	reduce by rule 343
-+ 	LOCATIONS	reduce by rule 343
-+ 	COLON	shift 458
-+ 	BAR	reduce by rule 343
-+ 	STRUCTURE	reduce by rule 343
-+ 	FUNCTOR	reduce by rule 343
-+ 	SIGNATURE	reduce by rule 343
-+ 	SHARING	reduce by rule 343
-+ 	INSTRUCTION	reduce by rule 343
-+ 	VLIW	reduce by rule 343
-+ 	SUPERSCALAR	reduce by rule 343
-+ 	FUN	reduce by rule 343
-+ 	VAL	reduce by rule 343
-+ 	INCLUDE	reduce by rule 343
-+ 	OPEN	reduce by rule 343
-+ 	LITTLE	reduce by rule 343
-+ 	BIG	reduce by rule 343
-+ 	PIPELINE	reduce by rule 343
-+ 	LOWERCASE	reduce by rule 343
-+ 	UPPERCASE	reduce by rule 343
-+ 	VERBATIM	reduce by rule 343
-+ 	RTL	reduce by rule 343
-+ 	NONFIX	reduce by rule 343
-+ 	INFIX	reduce by rule 343
-+ 	INFIXR	reduce by rule 343
-+ 	DEBUG	reduce by rule 343
-+ 	RESOURCE	reduce by rule 343
-+ 	CPU	reduce by rule 343
-+ 	LATENCY	reduce by rule 343
-+ 	EXCEPTION	reduce by rule 343
-+ 	EOF	reduce by rule 343
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 619:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop . nullified delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 167
-+ 	END	reduce by rule 167
-+ 	LOCAL	reduce by rule 167
-+ 	IN	reduce by rule 167
-+ 	DATATYPE	reduce by rule 167
-+ 	TYPE	reduce by rule 167
-+ 	AND	reduce by rule 167
-+ 	RPAREN	reduce by rule 167
-+ 	SEMICOLON	reduce by rule 167
-+ 	STORAGE	reduce by rule 167
-+ 	LOCATIONS	reduce by rule 167
-+ 	BAR	reduce by rule 167
-+ 	STRUCTURE	reduce by rule 167
-+ 	FUNCTOR	reduce by rule 167
-+ 	SIGNATURE	reduce by rule 167
-+ 	SHARING	reduce by rule 167
-+ 	INSTRUCTION	reduce by rule 167
-+ 	VLIW	reduce by rule 167
-+ 	SUPERSCALAR	reduce by rule 167
-+ 	WITHTYPE	reduce by rule 167
-+ 	FUN	reduce by rule 167
-+ 	VAL	reduce by rule 167
-+ 	INCLUDE	reduce by rule 167
-+ 	OPEN	reduce by rule 167
-+ 	LITTLE	reduce by rule 167
-+ 	BIG	reduce by rule 167
-+ 	PIPELINE	reduce by rule 167
-+ 	LOWERCASE	reduce by rule 167
-+ 	UPPERCASE	reduce by rule 167
-+ 	VERBATIM	reduce by rule 167
-+ 	RTL	reduce by rule 167
-+ 	SPAN	reduce by rule 167
-+ 	DELAYSLOT	reduce by rule 167
-+ 	NONFIX	reduce by rule 167
-+ 	INFIX	reduce by rule 167
-+ 	INFIXR	reduce by rule 167
-+ 	DEBUG	reduce by rule 167
-+ 	DELAYSLOT_COLON	reduce by rule 167
-+ 	NULLIFIED_COLON	shift 657
-+ 	RESOURCE	reduce by rule 167
-+ 	CPU	reduce by rule 167
-+ 	LATENCY	reduce by rule 167
-+ 	EXCEPTION	reduce by rule 167
-+ 	EOF	reduce by rule 167
-+ 
-+ 	nullified	goto 656
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 620:
-+ 
-+ 	nop : PADDING_COLON . flag 
-+ 	nop : PADDING_COLON . False 
-+ 	nop : PADDING_COLON . True 
-+ 
-+ 	NOT	shift 662
-+ 	CELLSET	shift 50
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 661
-+ 	flag	goto 660
-+ 	True	goto 659
-+ 	False	goto 658
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 621:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	rtl : RTL_COLON exp .  (reduce by rule 116)
-+ 
-+ 	ARCHITECTURE	reduce by rule 116
-+ 	END	reduce by rule 116
-+ 	LOCAL	reduce by rule 116
-+ 	IN	reduce by rule 116
-+ 	DATATYPE	reduce by rule 116
-+ 	TYPE	reduce by rule 116
-+ 	AND	reduce by rule 116
-+ 	RPAREN	reduce by rule 116
-+ 	SEMICOLON	reduce by rule 116
-+ 	STORAGE	reduce by rule 116
-+ 	LOCATIONS	reduce by rule 116
-+ 	BAR	reduce by rule 116
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 116
-+ 	FUNCTOR	reduce by rule 116
-+ 	SIGNATURE	reduce by rule 116
-+ 	SHARING	reduce by rule 116
-+ 	INSTRUCTION	reduce by rule 116
-+ 	VLIW	reduce by rule 116
-+ 	SUPERSCALAR	reduce by rule 116
-+ 	WITHTYPE	reduce by rule 116
-+ 	FUN	reduce by rule 116
-+ 	VAL	reduce by rule 116
-+ 	INCLUDE	reduce by rule 116
-+ 	OPEN	reduce by rule 116
-+ 	LITTLE	reduce by rule 116
-+ 	BIG	reduce by rule 116
-+ 	PIPELINE	reduce by rule 116
-+ 	LOWERCASE	reduce by rule 116
-+ 	UPPERCASE	reduce by rule 116
-+ 	VERBATIM	reduce by rule 116
-+ 	RTL	reduce by rule 116
-+ 	SPAN	reduce by rule 116
-+ 	DELAYSLOT	reduce by rule 116
-+ 	NONFIX	reduce by rule 116
-+ 	INFIX	reduce by rule 116
-+ 	INFIXR	reduce by rule 116
-+ 	DEBUG	reduce by rule 116
-+ 	DELAYSLOT_COLON	reduce by rule 116
-+ 	NULLIFIED_COLON	reduce by rule 116
-+ 	PADDING_COLON	reduce by rule 116
-+ 	RESOURCE	reduce by rule 116
-+ 	CPU	reduce by rule 116
-+ 	LATENCY	reduce by rule 116
-+ 	EXCEPTION	reduce by rule 116
-+ 	EOF	reduce by rule 116
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 622:
-+ 
-+ 	consencoding : id LBRACE labexps0 . RBRACE 
-+ 
-+ 	RBRACE	shift 663
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 623:
-+ 
-+ 	consencoding : LPAREN expseq RPAREN .  (reduce by rule 178)
-+ 
-+ 	ARCHITECTURE	reduce by rule 178
-+ 	END	reduce by rule 178
-+ 	LOCAL	reduce by rule 178
-+ 	IN	reduce by rule 178
-+ 	DATATYPE	reduce by rule 178
-+ 	TYPE	reduce by rule 178
-+ 	AND	reduce by rule 178
-+ 	RPAREN	reduce by rule 178
-+ 	SEMICOLON	reduce by rule 178
-+ 	STORAGE	reduce by rule 178
-+ 	LOCATIONS	reduce by rule 178
-+ 	BAR	reduce by rule 178
-+ 	STRUCTURE	reduce by rule 178
-+ 	FUNCTOR	reduce by rule 178
-+ 	SIGNATURE	reduce by rule 178
-+ 	SHARING	reduce by rule 178
-+ 	INSTRUCTION	reduce by rule 178
-+ 	VLIW	reduce by rule 178
-+ 	SUPERSCALAR	reduce by rule 178
-+ 	WITHTYPE	reduce by rule 178
-+ 	FUN	reduce by rule 178
-+ 	VAL	reduce by rule 178
-+ 	INCLUDE	reduce by rule 178
-+ 	OPEN	reduce by rule 178
-+ 	LITTLE	reduce by rule 178
-+ 	BIG	reduce by rule 178
-+ 	PIPELINE	reduce by rule 178
-+ 	LOWERCASE	reduce by rule 178
-+ 	UPPERCASE	reduce by rule 178
-+ 	VERBATIM	reduce by rule 178
-+ 	RTL	reduce by rule 178
-+ 	SPAN	reduce by rule 178
-+ 	DELAYSLOT	reduce by rule 178
-+ 	NONFIX	reduce by rule 178
-+ 	INFIX	reduce by rule 178
-+ 	INFIXR	reduce by rule 178
-+ 	DEBUG	reduce by rule 178
-+ 	RTL_COLON	reduce by rule 178
-+ 	DELAYSLOT_COLON	reduce by rule 178
-+ 	NULLIFIED_COLON	reduce by rule 178
-+ 	PADDING_COLON	reduce by rule 178
-+ 	RESOURCE	reduce by rule 178
-+ 	CPU	reduce by rule 178
-+ 	LATENCY	reduce by rule 178
-+ 	EXCEPTION	reduce by rule 178
-+ 	EOF	reduce by rule 178
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 624:
-+ 
-+ 	consencoding : LPAREN exps2 RPAREN .  (reduce by rule 179)
-+ 
-+ 	ARCHITECTURE	reduce by rule 179
-+ 	END	reduce by rule 179
-+ 	LOCAL	reduce by rule 179
-+ 	IN	reduce by rule 179
-+ 	DATATYPE	reduce by rule 179
-+ 	TYPE	reduce by rule 179
-+ 	AND	reduce by rule 179
-+ 	RPAREN	reduce by rule 179
-+ 	SEMICOLON	reduce by rule 179
-+ 	STORAGE	reduce by rule 179
-+ 	LOCATIONS	reduce by rule 179
-+ 	BAR	reduce by rule 179
-+ 	STRUCTURE	reduce by rule 179
-+ 	FUNCTOR	reduce by rule 179
-+ 	SIGNATURE	reduce by rule 179
-+ 	SHARING	reduce by rule 179
-+ 	INSTRUCTION	reduce by rule 179
-+ 	VLIW	reduce by rule 179
-+ 	SUPERSCALAR	reduce by rule 179
-+ 	WITHTYPE	reduce by rule 179
-+ 	FUN	reduce by rule 179
-+ 	VAL	reduce by rule 179
-+ 	INCLUDE	reduce by rule 179
-+ 	OPEN	reduce by rule 179
-+ 	LITTLE	reduce by rule 179
-+ 	BIG	reduce by rule 179
-+ 	PIPELINE	reduce by rule 179
-+ 	LOWERCASE	reduce by rule 179
-+ 	UPPERCASE	reduce by rule 179
-+ 	VERBATIM	reduce by rule 179
-+ 	RTL	reduce by rule 179
-+ 	SPAN	reduce by rule 179
-+ 	DELAYSLOT	reduce by rule 179
-+ 	NONFIX	reduce by rule 179
-+ 	INFIX	reduce by rule 179
-+ 	INFIXR	reduce by rule 179
-+ 	DEBUG	reduce by rule 179
-+ 	RTL_COLON	reduce by rule 179
-+ 	DELAYSLOT_COLON	reduce by rule 179
-+ 	NULLIFIED_COLON	reduce by rule 179
-+ 	PADDING_COLON	reduce by rule 179
-+ 	RESOURCE	reduce by rule 179
-+ 	CPU	reduce by rule 179
-+ 	LATENCY	reduce by rule 179
-+ 	EXCEPTION	reduce by rule 179
-+ 	EOF	reduce by rule 179
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 625:
-+ 
-+ 	expseq : typedexp SEMICOLON . expseq 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 337
-+ 	typedexp	goto 593
-+ 	expseq	goto 664
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 626:
-+ 
-+ 	formatbind : id opt_of LBRACE fields RBRACE . opt_exp 
-+ 
-+ 	ARCHITECTURE	reduce by rule 207
-+ 	END	reduce by rule 207
-+ 	LOCAL	reduce by rule 207
-+ 	IN	reduce by rule 207
-+ 	DATATYPE	reduce by rule 207
-+ 	TYPE	reduce by rule 207
-+ 	EQ	shift 666
-+ 	RPAREN	reduce by rule 207
-+ 	SEMICOLON	reduce by rule 207
-+ 	STORAGE	reduce by rule 207
-+ 	LOCATIONS	reduce by rule 207
-+ 	BAR	reduce by rule 207
-+ 	STRUCTURE	reduce by rule 207
-+ 	FUNCTOR	reduce by rule 207
-+ 	SIGNATURE	reduce by rule 207
-+ 	SHARING	reduce by rule 207
-+ 	INSTRUCTION	reduce by rule 207
-+ 	VLIW	reduce by rule 207
-+ 	SUPERSCALAR	reduce by rule 207
-+ 	FUN	reduce by rule 207
-+ 	VAL	reduce by rule 207
-+ 	INCLUDE	reduce by rule 207
-+ 	OPEN	reduce by rule 207
-+ 	LITTLE	reduce by rule 207
-+ 	BIG	reduce by rule 207
-+ 	PIPELINE	reduce by rule 207
-+ 	LOWERCASE	reduce by rule 207
-+ 	UPPERCASE	reduce by rule 207
-+ 	VERBATIM	reduce by rule 207
-+ 	RTL	reduce by rule 207
-+ 	NONFIX	reduce by rule 207
-+ 	INFIX	reduce by rule 207
-+ 	INFIXR	reduce by rule 207
-+ 	DEBUG	reduce by rule 207
-+ 	RESOURCE	reduce by rule 207
-+ 	CPU	reduce by rule 207
-+ 	LATENCY	reduce by rule 207
-+ 	EXCEPTION	reduce by rule 207
-+ 	EOF	reduce by rule 207
-+ 
-+ 	opt_exp	goto 665
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 627:
-+ 
-+ 	field : fieldid COLON . cnv signedness width unsignedint_opt 
-+ 
-+ 	EQ	reduce by rule 215
-+ 	DOLLAR	shift 669
-+ 	RBRACE	reduce by rule 215
-+ 	CELLSET	shift 50
-+ 	COMMA	reduce by rule 215
-+ 	SIGNED	reduce by rule 215
-+ 	UNSIGNED	reduce by rule 215
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	INT	reduce by rule 215
-+ 
-+ 	id	goto 668
-+ 	cnv	goto 667
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 628:
-+ 
-+ 	fields : field COMMA . fields 
-+ 
-+ 	CELLSET	shift 50
-+ 	WILD	shift 564
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 563
-+ 	field	goto 562
-+ 	fieldid	goto 561
-+ 	fields	goto 670
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 629:
-+ 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN sigcon EQ . structexp 
-+ 
-+ 	CELLSET	shift 50
-+ 	STRUCT	shift 364
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	structexp	goto 671
-+ 	id	goto 114
-+ 	ident	goto 362
-+ 	ident2	goto 112
-+ 	path	goto 85
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 630:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN EQ structexp .  (reduce by rule 73)
-+ 
-+ 	ARCHITECTURE	reduce by rule 73
-+ 	END	reduce by rule 73
-+ 	LOCAL	reduce by rule 73
-+ 	IN	reduce by rule 73
-+ 	DATATYPE	reduce by rule 73
-+ 	TYPE	reduce by rule 73
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 73
-+ 	SEMICOLON	reduce by rule 73
-+ 	STORAGE	reduce by rule 73
-+ 	LOCATIONS	reduce by rule 73
-+ 	STRUCTURE	reduce by rule 73
-+ 	FUNCTOR	reduce by rule 73
-+ 	SIGNATURE	reduce by rule 73
-+ 	SHARING	reduce by rule 73
-+ 	INSTRUCTION	reduce by rule 73
-+ 	VLIW	reduce by rule 73
-+ 	SUPERSCALAR	reduce by rule 73
-+ 	FUN	reduce by rule 73
-+ 	VAL	reduce by rule 73
-+ 	INCLUDE	reduce by rule 73
-+ 	OPEN	reduce by rule 73
-+ 	LITTLE	reduce by rule 73
-+ 	BIG	reduce by rule 73
-+ 	PIPELINE	reduce by rule 73
-+ 	LOWERCASE	reduce by rule 73
-+ 	UPPERCASE	reduce by rule 73
-+ 	VERBATIM	reduce by rule 73
-+ 	RTL	reduce by rule 73
-+ 	NONFIX	reduce by rule 73
-+ 	INFIX	reduce by rule 73
-+ 	INFIXR	reduce by rule 73
-+ 	DEBUG	reduce by rule 73
-+ 	RESOURCE	reduce by rule 73
-+ 	CPU	reduce by rule 73
-+ 	LATENCY	reduce by rule 73
-+ 	EXCEPTION	reduce by rule 73
-+ 	EOF	reduce by rule 73
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 631:
-+ 
-+ 	structexp : structexp LPAREN scopeddecls RPAREN .  (reduce by rule 125)
-+ 
-+ 	ARCHITECTURE	reduce by rule 125
-+ 	END	reduce by rule 125
-+ 	LOCAL	reduce by rule 125
-+ 	IN	reduce by rule 125
-+ 	DATATYPE	reduce by rule 125
-+ 	TYPE	reduce by rule 125
-+ 	EQ	reduce by rule 125
-+ 	AND	reduce by rule 125
-+ 	LPAREN	reduce by rule 125
-+ 	RPAREN	reduce by rule 125
-+ 	SEMICOLON	reduce by rule 125
-+ 	STORAGE	reduce by rule 125
-+ 	LOCATIONS	reduce by rule 125
-+ 	STRUCTURE	reduce by rule 125
-+ 	FUNCTOR	reduce by rule 125
-+ 	SIGNATURE	reduce by rule 125
-+ 	WHERE	reduce by rule 125
-+ 	SHARING	reduce by rule 125
-+ 	INSTRUCTION	reduce by rule 125
-+ 	VLIW	reduce by rule 125
-+ 	SUPERSCALAR	reduce by rule 125
-+ 	FUN	reduce by rule 125
-+ 	VAL	reduce by rule 125
-+ 	INCLUDE	reduce by rule 125
-+ 	OPEN	reduce by rule 125
-+ 	LITTLE	reduce by rule 125
-+ 	BIG	reduce by rule 125
-+ 	PIPELINE	reduce by rule 125
-+ 	LOWERCASE	reduce by rule 125
-+ 	UPPERCASE	reduce by rule 125
-+ 	VERBATIM	reduce by rule 125
-+ 	RTL	reduce by rule 125
-+ 	NONFIX	reduce by rule 125
-+ 	INFIX	reduce by rule 125
-+ 	INFIXR	reduce by rule 125
-+ 	DEBUG	reduce by rule 125
-+ 	RESOURCE	reduce by rule 125
-+ 	CPU	reduce by rule 125
-+ 	LATENCY	reduce by rule 125
-+ 	EXCEPTION	reduce by rule 125
-+ 	EOF	reduce by rule 125
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 632:
-+ 
-+ 	structexp : structexp LPAREN ident RPAREN .  (reduce by rule 126)
-+ 
-+ 	ARCHITECTURE	reduce by rule 126
-+ 	END	reduce by rule 126
-+ 	LOCAL	reduce by rule 126
-+ 	IN	reduce by rule 126
-+ 	DATATYPE	reduce by rule 126
-+ 	TYPE	reduce by rule 126
-+ 	EQ	reduce by rule 126
-+ 	AND	reduce by rule 126
-+ 	LPAREN	reduce by rule 126
-+ 	RPAREN	reduce by rule 126
-+ 	SEMICOLON	reduce by rule 126
-+ 	STORAGE	reduce by rule 126
-+ 	LOCATIONS	reduce by rule 126
-+ 	STRUCTURE	reduce by rule 126
-+ 	FUNCTOR	reduce by rule 126
-+ 	SIGNATURE	reduce by rule 126
-+ 	WHERE	reduce by rule 126
-+ 	SHARING	reduce by rule 126
-+ 	INSTRUCTION	reduce by rule 126
-+ 	VLIW	reduce by rule 126
-+ 	SUPERSCALAR	reduce by rule 126
-+ 	FUN	reduce by rule 126
-+ 	VAL	reduce by rule 126
-+ 	INCLUDE	reduce by rule 126
-+ 	OPEN	reduce by rule 126
-+ 	LITTLE	reduce by rule 126
-+ 	BIG	reduce by rule 126
-+ 	PIPELINE	reduce by rule 126
-+ 	LOWERCASE	reduce by rule 126
-+ 	UPPERCASE	reduce by rule 126
-+ 	VERBATIM	reduce by rule 126
-+ 	RTL	reduce by rule 126
-+ 	NONFIX	reduce by rule 126
-+ 	INFIX	reduce by rule 126
-+ 	INFIXR	reduce by rule 126
-+ 	DEBUG	reduce by rule 126
-+ 	RESOURCE	reduce by rule 126
-+ 	CPU	reduce by rule 126
-+ 	LATENCY	reduce by rule 126
-+ 	EXCEPTION	reduce by rule 126
-+ 	EOF	reduce by rule 126
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 633:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount . RBRACKET bitSize aliasing defaults printcell 
-+ 
-+ 	RBRACKET	shift 672
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 634:
-+ 
-+ 	cellcount : int .  (reduce by rule 388)
-+ 
-+ 	RBRACKET	reduce by rule 388
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 635:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm EQ . consbinds 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm EQ . DATATYPE ty 
-+ 
-+ 	DATATYPE	shift 674
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 138
-+ 	symb	goto 67
-+ 	consbinds	goto 673
-+ 	consbind	goto 136
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 636:
-+ 
-+ 	encodingexps : encodingexp COMMA encodingexps .  (reduce by rule 138)
-+ 
-+ 	RBRACKET	reduce by rule 138
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 637:
-+ 
-+ 	encodingexp : int int DOTDOT . int 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 675
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 638:
-+ 
-+ 	encodingexp : int DOTDOT int .  (reduce by rule 140)
-+ 
-+ 	RBRACKET	reduce by rule 140
-+ 	COMMA	reduce by rule 140
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 639:
-+ 
-+ 	resources : resource COMMA resources .  (reduce by rule 36)
-+ 
-+ 	RBRACKET	reduce by rule 36
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 640:
-+ 
-+ 	aexp2 : aexp2 AT LBRACKET slices RBRACKET .  (reduce by rule 265)
-+ 
-+ 	ARCHITECTURE	reduce by rule 265
-+ 	END	reduce by rule 265
-+ 	LOCAL	reduce by rule 265
-+ 	IN	reduce by rule 265
-+ 	OF	reduce by rule 265
-+ 	DATATYPE	reduce by rule 265
-+ 	TYPE	reduce by rule 265
-+ 	EQ	reduce by rule 265
-+ 	DOLLAR	reduce by rule 265
-+ 	TIMES	reduce by rule 265
-+ 	AND	reduce by rule 265
-+ 	DEREF	reduce by rule 265
-+ 	NOT	reduce by rule 265
-+ 	LLBRACKET	reduce by rule 265
-+ 	LHASHBRACKET	reduce by rule 265
-+ 	LPAREN	reduce by rule 265
-+ 	RPAREN	reduce by rule 265
-+ 	LBRACKET	reduce by rule 265
-+ 	RBRACKET	reduce by rule 265
-+ 	LBRACE	reduce by rule 265
-+ 	RBRACE	reduce by rule 265
-+ 	SEMICOLON	reduce by rule 265
-+ 	LDQUOTE	reduce by rule 265
-+ 	RMETA	reduce by rule 265
-+ 	CELLSET	reduce by rule 265
-+ 	STORAGE	reduce by rule 265
-+ 	LOCATIONS	reduce by rule 265
-+ 	HASH	reduce by rule 265
-+ 	COMMA	reduce by rule 265
-+ 	COLON	reduce by rule 265
-+ 	AT	reduce by rule 265
-+ 	BAR	reduce by rule 265
-+ 	DARROW	reduce by rule 265
-+ 	THEN	reduce by rule 265
-+ 	ELSE	reduce by rule 265
-+ 	TRUE	reduce by rule 265
-+ 	FALSE	reduce by rule 265
-+ 	HANDLE	reduce by rule 265
-+ 	LET	reduce by rule 265
-+ 	STRUCTURE	reduce by rule 265
-+ 	FUNCTOR	reduce by rule 265
-+ 	SIGNATURE	reduce by rule 265
-+ 	SHARING	reduce by rule 265
-+ 	INSTRUCTION	reduce by rule 265
-+ 	VLIW	reduce by rule 265
-+ 	SUPERSCALAR	reduce by rule 265
-+ 	WITHTYPE	reduce by rule 265
-+ 	FUN	reduce by rule 265
-+ 	VAL	reduce by rule 265
-+ 	INCLUDE	reduce by rule 265
-+ 	OPEN	reduce by rule 265
-+ 	OP	reduce by rule 265
-+ 	LITTLE	reduce by rule 265
-+ 	BIG	reduce by rule 265
-+ 	PIPELINE	reduce by rule 265
-+ 	LOWERCASE	reduce by rule 265
-+ 	UPPERCASE	reduce by rule 265
-+ 	VERBATIM	reduce by rule 265
-+ 	RTL	reduce by rule 265
-+ 	SPAN	reduce by rule 265
-+ 	DELAYSLOT	reduce by rule 265
-+ 	ALWAYS	reduce by rule 265
-+ 	NEVER	reduce by rule 265
-+ 	NONFIX	reduce by rule 265
-+ 	INFIX	reduce by rule 265
-+ 	INFIXR	reduce by rule 265
-+ 	DEBUG	reduce by rule 265
-+ 	ASM_COLON	reduce by rule 265
-+ 	MC_COLON	reduce by rule 265
-+ 	RTL_COLON	reduce by rule 265
-+ 	DELAYSLOT_COLON	reduce by rule 265
-+ 	NULLIFIED_COLON	reduce by rule 265
-+ 	PADDING_COLON	reduce by rule 265
-+ 	RESOURCE	reduce by rule 265
-+ 	CPU	reduce by rule 265
-+ 	LATENCY	reduce by rule 265
-+ 	EXCEPTION	reduce by rule 265
-+ 	ID	reduce by rule 265
-+ 	SYMBOL	reduce by rule 265
-+ 	WORD	reduce by rule 265
-+ 	INT	reduce by rule 265
-+ 	INTINF	reduce by rule 265
-+ 	REAL	reduce by rule 265
-+ 	STRING	reduce by rule 265
-+ 	CHAR	reduce by rule 265
-+ 	EOF	reduce by rule 265
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 641:
-+ 
-+ 	slices : slice COMMA . slices 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 590
-+ 	slice	goto 589
-+ 	slices	goto 676
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 642:
-+ 
-+ 	slice : int DOTDOT . int 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 677
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 643:
-+ 
-+ 	aexp : sym CONCAT LBRACKET exps RBRACKET .  (reduce by rule 256)
-+ 	aexp : sym CONCAT LBRACKET exps RBRACKET . CONCAT sym 
-+ 
-+ 	ARCHITECTURE	reduce by rule 256
-+ 	END	reduce by rule 256
-+ 	LOCAL	reduce by rule 256
-+ 	IN	reduce by rule 256
-+ 	OF	reduce by rule 256
-+ 	DATATYPE	reduce by rule 256
-+ 	TYPE	reduce by rule 256
-+ 	EQ	reduce by rule 256
-+ 	DOLLAR	reduce by rule 256
-+ 	TIMES	reduce by rule 256
-+ 	AND	reduce by rule 256
-+ 	DEREF	reduce by rule 256
-+ 	NOT	reduce by rule 256
-+ 	CONCAT	shift 678
-+ 	LLBRACKET	reduce by rule 256
-+ 	LHASHBRACKET	reduce by rule 256
-+ 	LPAREN	reduce by rule 256
-+ 	RPAREN	reduce by rule 256
-+ 	LBRACKET	reduce by rule 256
-+ 	RBRACKET	reduce by rule 256
-+ 	LBRACE	reduce by rule 256
-+ 	RBRACE	reduce by rule 256
-+ 	SEMICOLON	reduce by rule 256
-+ 	LDQUOTE	reduce by rule 256
-+ 	RMETA	reduce by rule 256
-+ 	CELLSET	reduce by rule 256
-+ 	STORAGE	reduce by rule 256
-+ 	LOCATIONS	reduce by rule 256
-+ 	HASH	reduce by rule 256
-+ 	COMMA	reduce by rule 256
-+ 	COLON	reduce by rule 256
-+ 	AT	reduce by rule 256
-+ 	BAR	reduce by rule 256
-+ 	DARROW	reduce by rule 256
-+ 	THEN	reduce by rule 256
-+ 	ELSE	reduce by rule 256
-+ 	TRUE	reduce by rule 256
-+ 	FALSE	reduce by rule 256
-+ 	HANDLE	reduce by rule 256
-+ 	LET	reduce by rule 256
-+ 	STRUCTURE	reduce by rule 256
-+ 	FUNCTOR	reduce by rule 256
-+ 	SIGNATURE	reduce by rule 256
-+ 	SHARING	reduce by rule 256
-+ 	INSTRUCTION	reduce by rule 256
-+ 	VLIW	reduce by rule 256
-+ 	SUPERSCALAR	reduce by rule 256
-+ 	WITHTYPE	reduce by rule 256
-+ 	FUN	reduce by rule 256
-+ 	VAL	reduce by rule 256
-+ 	INCLUDE	reduce by rule 256
-+ 	OPEN	reduce by rule 256
-+ 	OP	reduce by rule 256
-+ 	LITTLE	reduce by rule 256
-+ 	BIG	reduce by rule 256
-+ 	PIPELINE	reduce by rule 256
-+ 	LOWERCASE	reduce by rule 256
-+ 	UPPERCASE	reduce by rule 256
-+ 	VERBATIM	reduce by rule 256
-+ 	RTL	reduce by rule 256
-+ 	SPAN	reduce by rule 256
-+ 	DELAYSLOT	reduce by rule 256
-+ 	ALWAYS	reduce by rule 256
-+ 	NEVER	reduce by rule 256
-+ 	NONFIX	reduce by rule 256
-+ 	INFIX	reduce by rule 256
-+ 	INFIXR	reduce by rule 256
-+ 	DEBUG	reduce by rule 256
-+ 	ASM_COLON	reduce by rule 256
-+ 	MC_COLON	reduce by rule 256
-+ 	RTL_COLON	reduce by rule 256
-+ 	DELAYSLOT_COLON	reduce by rule 256
-+ 	NULLIFIED_COLON	reduce by rule 256
-+ 	PADDING_COLON	reduce by rule 256
-+ 	RESOURCE	reduce by rule 256
-+ 	CPU	reduce by rule 256
-+ 	LATENCY	reduce by rule 256
-+ 	EXCEPTION	reduce by rule 256
-+ 	ID	reduce by rule 256
-+ 	SYMBOL	reduce by rule 256
-+ 	WORD	reduce by rule 256
-+ 	INT	reduce by rule 256
-+ 	INTINF	reduce by rule 256
-+ 	REAL	reduce by rule 256
-+ 	STRING	reduce by rule 256
-+ 	CHAR	reduce by rule 256
-+ 	EOF	reduce by rule 256
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 644:
-+ 
-+ 	aexp : LET decls IN expseq END .  (reduce by rule 259)
-+ 
-+ 	ARCHITECTURE	reduce by rule 259
-+ 	END	reduce by rule 259
-+ 	LOCAL	reduce by rule 259
-+ 	IN	reduce by rule 259
-+ 	OF	reduce by rule 259
-+ 	DATATYPE	reduce by rule 259
-+ 	TYPE	reduce by rule 259
-+ 	EQ	reduce by rule 259
-+ 	DOLLAR	reduce by rule 259
-+ 	TIMES	reduce by rule 259
-+ 	AND	reduce by rule 259
-+ 	DEREF	reduce by rule 259
-+ 	NOT	reduce by rule 259
-+ 	LLBRACKET	reduce by rule 259
-+ 	LHASHBRACKET	reduce by rule 259
-+ 	LPAREN	reduce by rule 259
-+ 	RPAREN	reduce by rule 259
-+ 	LBRACKET	reduce by rule 259
-+ 	RBRACKET	reduce by rule 259
-+ 	LBRACE	reduce by rule 259
-+ 	RBRACE	reduce by rule 259
-+ 	SEMICOLON	reduce by rule 259
-+ 	LDQUOTE	reduce by rule 259
-+ 	RMETA	reduce by rule 259
-+ 	CELLSET	reduce by rule 259
-+ 	STORAGE	reduce by rule 259
-+ 	LOCATIONS	reduce by rule 259
-+ 	HASH	reduce by rule 259
-+ 	COMMA	reduce by rule 259
-+ 	COLON	reduce by rule 259
-+ 	AT	reduce by rule 259
-+ 	BAR	reduce by rule 259
-+ 	DARROW	reduce by rule 259
-+ 	THEN	reduce by rule 259
-+ 	ELSE	reduce by rule 259
-+ 	TRUE	reduce by rule 259
-+ 	FALSE	reduce by rule 259
-+ 	HANDLE	reduce by rule 259
-+ 	LET	reduce by rule 259
-+ 	STRUCTURE	reduce by rule 259
-+ 	FUNCTOR	reduce by rule 259
-+ 	SIGNATURE	reduce by rule 259
-+ 	SHARING	reduce by rule 259
-+ 	INSTRUCTION	reduce by rule 259
-+ 	VLIW	reduce by rule 259
-+ 	SUPERSCALAR	reduce by rule 259
-+ 	WITHTYPE	reduce by rule 259
-+ 	FUN	reduce by rule 259
-+ 	VAL	reduce by rule 259
-+ 	INCLUDE	reduce by rule 259
-+ 	OPEN	reduce by rule 259
-+ 	OP	reduce by rule 259
-+ 	LITTLE	reduce by rule 259
-+ 	BIG	reduce by rule 259
-+ 	PIPELINE	reduce by rule 259
-+ 	LOWERCASE	reduce by rule 259
-+ 	UPPERCASE	reduce by rule 259
-+ 	VERBATIM	reduce by rule 259
-+ 	RTL	reduce by rule 259
-+ 	SPAN	reduce by rule 259
-+ 	DELAYSLOT	reduce by rule 259
-+ 	ALWAYS	reduce by rule 259
-+ 	NEVER	reduce by rule 259
-+ 	NONFIX	reduce by rule 259
-+ 	INFIX	reduce by rule 259
-+ 	INFIXR	reduce by rule 259
-+ 	DEBUG	reduce by rule 259
-+ 	ASM_COLON	reduce by rule 259
-+ 	MC_COLON	reduce by rule 259
-+ 	RTL_COLON	reduce by rule 259
-+ 	DELAYSLOT_COLON	reduce by rule 259
-+ 	NULLIFIED_COLON	reduce by rule 259
-+ 	PADDING_COLON	reduce by rule 259
-+ 	RESOURCE	reduce by rule 259
-+ 	CPU	reduce by rule 259
-+ 	LATENCY	reduce by rule 259
-+ 	EXCEPTION	reduce by rule 259
-+ 	ID	reduce by rule 259
-+ 	SYMBOL	reduce by rule 259
-+ 	WORD	reduce by rule 259
-+ 	INT	reduce by rule 259
-+ 	INTINF	reduce by rule 259
-+ 	REAL	reduce by rule 259
-+ 	STRING	reduce by rule 259
-+ 	CHAR	reduce by rule 259
-+ 	EOF	reduce by rule 259
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 645:
-+ 
-+ 	exp : IF typedexp THEN typedexp ELSE . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 679
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 646:
-+ 
-+ 	clause : typedpat guard cont DARROW . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 680
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 647:
-+ 
-+ 	aexp : LBRACKET exps RBRACKET CONCAT sym .  (reduce by rule 257)
-+ 
-+ 	ARCHITECTURE	reduce by rule 257
-+ 	END	reduce by rule 257
-+ 	LOCAL	reduce by rule 257
-+ 	IN	reduce by rule 257
-+ 	OF	reduce by rule 257
-+ 	DATATYPE	reduce by rule 257
-+ 	TYPE	reduce by rule 257
-+ 	EQ	reduce by rule 257
-+ 	DOLLAR	reduce by rule 257
-+ 	TIMES	reduce by rule 257
-+ 	AND	reduce by rule 257
-+ 	DEREF	reduce by rule 257
-+ 	NOT	reduce by rule 257
-+ 	LLBRACKET	reduce by rule 257
-+ 	LHASHBRACKET	reduce by rule 257
-+ 	LPAREN	reduce by rule 257
-+ 	RPAREN	reduce by rule 257
-+ 	LBRACKET	reduce by rule 257
-+ 	RBRACKET	reduce by rule 257
-+ 	LBRACE	reduce by rule 257
-+ 	RBRACE	reduce by rule 257
-+ 	SEMICOLON	reduce by rule 257
-+ 	LDQUOTE	reduce by rule 257
-+ 	RMETA	reduce by rule 257
-+ 	CELLSET	reduce by rule 257
-+ 	STORAGE	reduce by rule 257
-+ 	LOCATIONS	reduce by rule 257
-+ 	HASH	reduce by rule 257
-+ 	COMMA	reduce by rule 257
-+ 	COLON	reduce by rule 257
-+ 	AT	reduce by rule 257
-+ 	BAR	reduce by rule 257
-+ 	DARROW	reduce by rule 257
-+ 	THEN	reduce by rule 257
-+ 	ELSE	reduce by rule 257
-+ 	TRUE	reduce by rule 257
-+ 	FALSE	reduce by rule 257
-+ 	HANDLE	reduce by rule 257
-+ 	LET	reduce by rule 257
-+ 	STRUCTURE	reduce by rule 257
-+ 	FUNCTOR	reduce by rule 257
-+ 	SIGNATURE	reduce by rule 257
-+ 	SHARING	reduce by rule 257
-+ 	INSTRUCTION	reduce by rule 257
-+ 	VLIW	reduce by rule 257
-+ 	SUPERSCALAR	reduce by rule 257
-+ 	WITHTYPE	reduce by rule 257
-+ 	FUN	reduce by rule 257
-+ 	VAL	reduce by rule 257
-+ 	INCLUDE	reduce by rule 257
-+ 	OPEN	reduce by rule 257
-+ 	OP	reduce by rule 257
-+ 	LITTLE	reduce by rule 257
-+ 	BIG	reduce by rule 257
-+ 	PIPELINE	reduce by rule 257
-+ 	LOWERCASE	reduce by rule 257
-+ 	UPPERCASE	reduce by rule 257
-+ 	VERBATIM	reduce by rule 257
-+ 	RTL	reduce by rule 257
-+ 	SPAN	reduce by rule 257
-+ 	DELAYSLOT	reduce by rule 257
-+ 	ALWAYS	reduce by rule 257
-+ 	NEVER	reduce by rule 257
-+ 	NONFIX	reduce by rule 257
-+ 	INFIX	reduce by rule 257
-+ 	INFIXR	reduce by rule 257
-+ 	DEBUG	reduce by rule 257
-+ 	ASM_COLON	reduce by rule 257
-+ 	MC_COLON	reduce by rule 257
-+ 	RTL_COLON	reduce by rule 257
-+ 	DELAYSLOT_COLON	reduce by rule 257
-+ 	NULLIFIED_COLON	reduce by rule 257
-+ 	PADDING_COLON	reduce by rule 257
-+ 	RESOURCE	reduce by rule 257
-+ 	CPU	reduce by rule 257
-+ 	LATENCY	reduce by rule 257
-+ 	EXCEPTION	reduce by rule 257
-+ 	ID	reduce by rule 257
-+ 	SYMBOL	reduce by rule 257
-+ 	WORD	reduce by rule 257
-+ 	INT	reduce by rule 257
-+ 	INTINF	reduce by rule 257
-+ 	REAL	reduce by rule 257
-+ 	STRING	reduce by rule 257
-+ 	CHAR	reduce by rule 257
-+ 	EOF	reduce by rule 257
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 648:
-+ 
-+ 	aexp : DOLLAR id LBRACKET exp region . RBRACKET 
-+ 
-+ 	RBRACKET	shift 681
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 649:
-+ 
-+ 	region : COLON . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 682
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 650:
-+ 
-+ 	apat : sym CONCAT LBRACKET pats RBRACKET CONCAT sym .  (reduce by rule 304)
-+ 
-+ 	EQ	reduce by rule 304
-+ 	TIMES	reduce by rule 304
-+ 	AND	reduce by rule 304
-+ 	DEREF	reduce by rule 304
-+ 	NOT	reduce by rule 304
-+ 	LHASHBRACKET	reduce by rule 304
-+ 	LPAREN	reduce by rule 304
-+ 	RPAREN	reduce by rule 304
-+ 	LBRACKET	reduce by rule 304
-+ 	RBRACKET	reduce by rule 304
-+ 	LBRACE	reduce by rule 304
-+ 	RBRACE	reduce by rule 304
-+ 	CELLSET	reduce by rule 304
-+ 	COMMA	reduce by rule 304
-+ 	COLON	reduce by rule 304
-+ 	BAR	reduce by rule 304
-+ 	DARROW	reduce by rule 304
-+ 	TRUE	reduce by rule 304
-+ 	FALSE	reduce by rule 304
-+ 	WILD	reduce by rule 304
-+ 	WHERE	reduce by rule 304
-+ 	OP	reduce by rule 304
-+ 	ALWAYS	reduce by rule 304
-+ 	NEVER	reduce by rule 304
-+ 	EXCEPTION	reduce by rule 304
-+ 	ID	reduce by rule 304
-+ 	SYMBOL	reduce by rule 304
-+ 	WORD	reduce by rule 304
-+ 	INT	reduce by rule 304
-+ 	INTINF	reduce by rule 304
-+ 	REAL	reduce by rule 304
-+ 	STRING	reduce by rule 304
-+ 	CHAR	reduce by rule 304
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 651:
-+ 
-+ 	apat : LPAREN typedpat WHERE typedexp IN typedpat RPAREN .  (reduce by rule 301)
-+ 
-+ 	EQ	reduce by rule 301
-+ 	TIMES	reduce by rule 301
-+ 	AND	reduce by rule 301
-+ 	DEREF	reduce by rule 301
-+ 	NOT	reduce by rule 301
-+ 	LHASHBRACKET	reduce by rule 301
-+ 	LPAREN	reduce by rule 301
-+ 	RPAREN	reduce by rule 301
-+ 	LBRACKET	reduce by rule 301
-+ 	RBRACKET	reduce by rule 301
-+ 	LBRACE	reduce by rule 301
-+ 	RBRACE	reduce by rule 301
-+ 	CELLSET	reduce by rule 301
-+ 	COMMA	reduce by rule 301
-+ 	COLON	reduce by rule 301
-+ 	BAR	reduce by rule 301
-+ 	DARROW	reduce by rule 301
-+ 	TRUE	reduce by rule 301
-+ 	FALSE	reduce by rule 301
-+ 	WILD	reduce by rule 301
-+ 	WHERE	reduce by rule 301
-+ 	OP	reduce by rule 301
-+ 	ALWAYS	reduce by rule 301
-+ 	NEVER	reduce by rule 301
-+ 	EXCEPTION	reduce by rule 301
-+ 	ID	reduce by rule 301
-+ 	SYMBOL	reduce by rule 301
-+ 	WORD	reduce by rule 301
-+ 	INT	reduce by rule 301
-+ 	INTINF	reduce by rule 301
-+ 	REAL	reduce by rule 301
-+ 	STRING	reduce by rule 301
-+ 	CHAR	reduce by rule 301
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 652:
-+ 
-+ 	cycles : cycle COMMA cycles .  (reduce by rule 48)
-+ 
-+ 	RBRACKET	reduce by rule 48
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 653: shift/reduce conflict (shift CONCAT, reduce by rule 50)
-+ error:  state 653: shift/reduce conflict (shift TIMES, reduce by rule 50)
-+ 
-+ state 653:
-+ 
-+ 	cycle : cycle . CONCAT cycle 
-+ 	cycle : cycle CONCAT cycle .  (reduce by rule 50)
-+ 	cycle : cycle . TIMES int 
-+ 
-+ 	TIMES	shift 614
-+ 	CONCAT	shift 613
-+ 	RPAREN	reduce by rule 50
-+ 	RBRACKET	reduce by rule 50
-+ 	COMMA	reduce by rule 50
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 654:
-+ 
-+ 	cycle : cycle TIMES int .  (reduce by rule 51)
-+ 
-+ 	TIMES	reduce by rule 51
-+ 	CONCAT	reduce by rule 51
-+ 	RPAREN	reduce by rule 51
-+ 	RBRACKET	reduce by rule 51
-+ 	COMMA	reduce by rule 51
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 655:
-+ 
-+ 	cycle : LPAREN cycle RPAREN .  (reduce by rule 52)
-+ 
-+ 	TIMES	reduce by rule 52
-+ 	CONCAT	reduce by rule 52
-+ 	RPAREN	reduce by rule 52
-+ 	RBRACKET	reduce by rule 52
-+ 	COMMA	reduce by rule 52
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 656:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified . delayslot delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 170
-+ 	END	reduce by rule 170
-+ 	LOCAL	reduce by rule 170
-+ 	IN	reduce by rule 170
-+ 	DATATYPE	reduce by rule 170
-+ 	TYPE	reduce by rule 170
-+ 	AND	reduce by rule 170
-+ 	RPAREN	reduce by rule 170
-+ 	SEMICOLON	reduce by rule 170
-+ 	STORAGE	reduce by rule 170
-+ 	LOCATIONS	reduce by rule 170
-+ 	BAR	reduce by rule 170
-+ 	STRUCTURE	reduce by rule 170
-+ 	FUNCTOR	reduce by rule 170
-+ 	SIGNATURE	reduce by rule 170
-+ 	SHARING	reduce by rule 170
-+ 	INSTRUCTION	reduce by rule 170
-+ 	VLIW	reduce by rule 170
-+ 	SUPERSCALAR	reduce by rule 170
-+ 	WITHTYPE	reduce by rule 170
-+ 	FUN	reduce by rule 170
-+ 	VAL	reduce by rule 170
-+ 	INCLUDE	reduce by rule 170
-+ 	OPEN	reduce by rule 170
-+ 	LITTLE	reduce by rule 170
-+ 	BIG	reduce by rule 170
-+ 	PIPELINE	reduce by rule 170
-+ 	LOWERCASE	reduce by rule 170
-+ 	UPPERCASE	reduce by rule 170
-+ 	VERBATIM	reduce by rule 170
-+ 	RTL	reduce by rule 170
-+ 	SPAN	reduce by rule 170
-+ 	DELAYSLOT	reduce by rule 170
-+ 	NONFIX	reduce by rule 170
-+ 	INFIX	reduce by rule 170
-+ 	INFIXR	reduce by rule 170
-+ 	DEBUG	reduce by rule 170
-+ 	DELAYSLOT_COLON	shift 684
-+ 	RESOURCE	reduce by rule 170
-+ 	CPU	reduce by rule 170
-+ 	LATENCY	reduce by rule 170
-+ 	EXCEPTION	reduce by rule 170
-+ 	EOF	reduce by rule 170
-+ 
-+ 	delayslot	goto 683
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 657:
-+ 
-+ 	nullified : NULLIFIED_COLON . FALSE 
-+ 	nullified : NULLIFIED_COLON . flag 
-+ 
-+ 	NOT	shift 662
-+ 	CELLSET	shift 50
-+ 	FALSE	shift 686
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 661
-+ 	flag	goto 685
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 658:
-+ 
-+ 	nop : PADDING_COLON False .  (reduce by rule 155)
-+ 
-+ 	ARCHITECTURE	reduce by rule 155
-+ 	END	reduce by rule 155
-+ 	LOCAL	reduce by rule 155
-+ 	IN	reduce by rule 155
-+ 	DATATYPE	reduce by rule 155
-+ 	TYPE	reduce by rule 155
-+ 	AND	reduce by rule 155
-+ 	RPAREN	reduce by rule 155
-+ 	SEMICOLON	reduce by rule 155
-+ 	STORAGE	reduce by rule 155
-+ 	LOCATIONS	reduce by rule 155
-+ 	BAR	reduce by rule 155
-+ 	STRUCTURE	reduce by rule 155
-+ 	FUNCTOR	reduce by rule 155
-+ 	SIGNATURE	reduce by rule 155
-+ 	SHARING	reduce by rule 155
-+ 	INSTRUCTION	reduce by rule 155
-+ 	VLIW	reduce by rule 155
-+ 	SUPERSCALAR	reduce by rule 155
-+ 	WITHTYPE	reduce by rule 155
-+ 	FUN	reduce by rule 155
-+ 	VAL	reduce by rule 155
-+ 	INCLUDE	reduce by rule 155
-+ 	OPEN	reduce by rule 155
-+ 	LITTLE	reduce by rule 155
-+ 	BIG	reduce by rule 155
-+ 	PIPELINE	reduce by rule 155
-+ 	LOWERCASE	reduce by rule 155
-+ 	UPPERCASE	reduce by rule 155
-+ 	VERBATIM	reduce by rule 155
-+ 	RTL	reduce by rule 155
-+ 	SPAN	reduce by rule 155
-+ 	DELAYSLOT	reduce by rule 155
-+ 	NONFIX	reduce by rule 155
-+ 	INFIX	reduce by rule 155
-+ 	INFIXR	reduce by rule 155
-+ 	DEBUG	reduce by rule 155
-+ 	DELAYSLOT_COLON	reduce by rule 155
-+ 	NULLIFIED_COLON	reduce by rule 155
-+ 	RESOURCE	reduce by rule 155
-+ 	CPU	reduce by rule 155
-+ 	LATENCY	reduce by rule 155
-+ 	EXCEPTION	reduce by rule 155
-+ 	EOF	reduce by rule 155
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 659:
-+ 
-+ 	nop : PADDING_COLON True .  (reduce by rule 156)
-+ 
-+ 	ARCHITECTURE	reduce by rule 156
-+ 	END	reduce by rule 156
-+ 	LOCAL	reduce by rule 156
-+ 	IN	reduce by rule 156
-+ 	DATATYPE	reduce by rule 156
-+ 	TYPE	reduce by rule 156
-+ 	AND	reduce by rule 156
-+ 	RPAREN	reduce by rule 156
-+ 	SEMICOLON	reduce by rule 156
-+ 	STORAGE	reduce by rule 156
-+ 	LOCATIONS	reduce by rule 156
-+ 	BAR	reduce by rule 156
-+ 	STRUCTURE	reduce by rule 156
-+ 	FUNCTOR	reduce by rule 156
-+ 	SIGNATURE	reduce by rule 156
-+ 	SHARING	reduce by rule 156
-+ 	INSTRUCTION	reduce by rule 156
-+ 	VLIW	reduce by rule 156
-+ 	SUPERSCALAR	reduce by rule 156
-+ 	WITHTYPE	reduce by rule 156
-+ 	FUN	reduce by rule 156
-+ 	VAL	reduce by rule 156
-+ 	INCLUDE	reduce by rule 156
-+ 	OPEN	reduce by rule 156
-+ 	LITTLE	reduce by rule 156
-+ 	BIG	reduce by rule 156
-+ 	PIPELINE	reduce by rule 156
-+ 	LOWERCASE	reduce by rule 156
-+ 	UPPERCASE	reduce by rule 156
-+ 	VERBATIM	reduce by rule 156
-+ 	RTL	reduce by rule 156
-+ 	SPAN	reduce by rule 156
-+ 	DELAYSLOT	reduce by rule 156
-+ 	NONFIX	reduce by rule 156
-+ 	INFIX	reduce by rule 156
-+ 	INFIXR	reduce by rule 156
-+ 	DEBUG	reduce by rule 156
-+ 	DELAYSLOT_COLON	reduce by rule 156
-+ 	NULLIFIED_COLON	reduce by rule 156
-+ 	RESOURCE	reduce by rule 156
-+ 	CPU	reduce by rule 156
-+ 	LATENCY	reduce by rule 156
-+ 	EXCEPTION	reduce by rule 156
-+ 	EOF	reduce by rule 156
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 660:
-+ 
-+ 	nop : PADDING_COLON flag .  (reduce by rule 154)
-+ 
-+ 	ARCHITECTURE	reduce by rule 154
-+ 	END	reduce by rule 154
-+ 	LOCAL	reduce by rule 154
-+ 	IN	reduce by rule 154
-+ 	DATATYPE	reduce by rule 154
-+ 	TYPE	reduce by rule 154
-+ 	AND	reduce by rule 154
-+ 	RPAREN	reduce by rule 154
-+ 	SEMICOLON	reduce by rule 154
-+ 	STORAGE	reduce by rule 154
-+ 	LOCATIONS	reduce by rule 154
-+ 	BAR	reduce by rule 154
-+ 	STRUCTURE	reduce by rule 154
-+ 	FUNCTOR	reduce by rule 154
-+ 	SIGNATURE	reduce by rule 154
-+ 	SHARING	reduce by rule 154
-+ 	INSTRUCTION	reduce by rule 154
-+ 	VLIW	reduce by rule 154
-+ 	SUPERSCALAR	reduce by rule 154
-+ 	WITHTYPE	reduce by rule 154
-+ 	FUN	reduce by rule 154
-+ 	VAL	reduce by rule 154
-+ 	INCLUDE	reduce by rule 154
-+ 	OPEN	reduce by rule 154
-+ 	LITTLE	reduce by rule 154
-+ 	BIG	reduce by rule 154
-+ 	PIPELINE	reduce by rule 154
-+ 	LOWERCASE	reduce by rule 154
-+ 	UPPERCASE	reduce by rule 154
-+ 	VERBATIM	reduce by rule 154
-+ 	RTL	reduce by rule 154
-+ 	SPAN	reduce by rule 154
-+ 	DELAYSLOT	reduce by rule 154
-+ 	NONFIX	reduce by rule 154
-+ 	INFIX	reduce by rule 154
-+ 	INFIXR	reduce by rule 154
-+ 	DEBUG	reduce by rule 154
-+ 	DELAYSLOT_COLON	reduce by rule 154
-+ 	NULLIFIED_COLON	reduce by rule 154
-+ 	RESOURCE	reduce by rule 154
-+ 	CPU	reduce by rule 154
-+ 	LATENCY	reduce by rule 154
-+ 	EXCEPTION	reduce by rule 154
-+ 	EOF	reduce by rule 154
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 661: shift/reduce conflict (shift AND, reduce by rule 165)
-+ 
-+ state 661:
-+ 
-+ 	flag : id . flagguard 
-+ 	flag : id . EQ True flagguard 
-+ 	flag : id . EQ False flagguard 
-+ 
-+ 	ARCHITECTURE	reduce by rule 165
-+ 	END	reduce by rule 165
-+ 	LOCAL	reduce by rule 165
-+ 	IN	reduce by rule 165
-+ 	DATATYPE	reduce by rule 165
-+ 	TYPE	reduce by rule 165
-+ 	EQ	shift 689
-+ 	AND	shift 688
-+ 	RPAREN	reduce by rule 165
-+ 	SEMICOLON	reduce by rule 165
-+ 	STORAGE	reduce by rule 165
-+ 	LOCATIONS	reduce by rule 165
-+ 	BAR	reduce by rule 165
-+ 	STRUCTURE	reduce by rule 165
-+ 	FUNCTOR	reduce by rule 165
-+ 	SIGNATURE	reduce by rule 165
-+ 	SHARING	reduce by rule 165
-+ 	INSTRUCTION	reduce by rule 165
-+ 	VLIW	reduce by rule 165
-+ 	SUPERSCALAR	reduce by rule 165
-+ 	WITHTYPE	reduce by rule 165
-+ 	FUN	reduce by rule 165
-+ 	VAL	reduce by rule 165
-+ 	INCLUDE	reduce by rule 165
-+ 	OPEN	reduce by rule 165
-+ 	LITTLE	reduce by rule 165
-+ 	BIG	reduce by rule 165
-+ 	PIPELINE	reduce by rule 165
-+ 	LOWERCASE	reduce by rule 165
-+ 	UPPERCASE	reduce by rule 165
-+ 	VERBATIM	reduce by rule 165
-+ 	RTL	reduce by rule 165
-+ 	SPAN	reduce by rule 165
-+ 	DELAYSLOT	reduce by rule 165
-+ 	NONFIX	reduce by rule 165
-+ 	INFIX	reduce by rule 165
-+ 	INFIXR	reduce by rule 165
-+ 	DEBUG	reduce by rule 165
-+ 	DELAYSLOT_COLON	reduce by rule 165
-+ 	NULLIFIED_COLON	reduce by rule 165
-+ 	RESOURCE	reduce by rule 165
-+ 	CPU	reduce by rule 165
-+ 	LATENCY	reduce by rule 165
-+ 	EXCEPTION	reduce by rule 165
-+ 	EOF	reduce by rule 165
-+ 
-+ 	flagguard	goto 687
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 662:
-+ 
-+ 	flag : NOT . id flagguard 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 690
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 663:
-+ 
-+ 	consencoding : id LBRACE labexps0 RBRACE .  (reduce by rule 180)
-+ 
-+ 	ARCHITECTURE	reduce by rule 180
-+ 	END	reduce by rule 180
-+ 	LOCAL	reduce by rule 180
-+ 	IN	reduce by rule 180
-+ 	DATATYPE	reduce by rule 180
-+ 	TYPE	reduce by rule 180
-+ 	AND	reduce by rule 180
-+ 	RPAREN	reduce by rule 180
-+ 	SEMICOLON	reduce by rule 180
-+ 	STORAGE	reduce by rule 180
-+ 	LOCATIONS	reduce by rule 180
-+ 	BAR	reduce by rule 180
-+ 	STRUCTURE	reduce by rule 180
-+ 	FUNCTOR	reduce by rule 180
-+ 	SIGNATURE	reduce by rule 180
-+ 	SHARING	reduce by rule 180
-+ 	INSTRUCTION	reduce by rule 180
-+ 	VLIW	reduce by rule 180
-+ 	SUPERSCALAR	reduce by rule 180
-+ 	WITHTYPE	reduce by rule 180
-+ 	FUN	reduce by rule 180
-+ 	VAL	reduce by rule 180
-+ 	INCLUDE	reduce by rule 180
-+ 	OPEN	reduce by rule 180
-+ 	LITTLE	reduce by rule 180
-+ 	BIG	reduce by rule 180
-+ 	PIPELINE	reduce by rule 180
-+ 	LOWERCASE	reduce by rule 180
-+ 	UPPERCASE	reduce by rule 180
-+ 	VERBATIM	reduce by rule 180
-+ 	RTL	reduce by rule 180
-+ 	SPAN	reduce by rule 180
-+ 	DELAYSLOT	reduce by rule 180
-+ 	NONFIX	reduce by rule 180
-+ 	INFIX	reduce by rule 180
-+ 	INFIXR	reduce by rule 180
-+ 	DEBUG	reduce by rule 180
-+ 	RTL_COLON	reduce by rule 180
-+ 	DELAYSLOT_COLON	reduce by rule 180
-+ 	NULLIFIED_COLON	reduce by rule 180
-+ 	PADDING_COLON	reduce by rule 180
-+ 	RESOURCE	reduce by rule 180
-+ 	CPU	reduce by rule 180
-+ 	LATENCY	reduce by rule 180
-+ 	EXCEPTION	reduce by rule 180
-+ 	EOF	reduce by rule 180
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 664:
-+ 
-+ 	expseq : typedexp SEMICOLON expseq .  (reduce by rule 283)
-+ 
-+ 	END	reduce by rule 283
-+ 	RPAREN	reduce by rule 283
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 665:
-+ 
-+ 	formatbind : id opt_of LBRACE fields RBRACE opt_exp .  (reduce by rule 206)
-+ 
-+ 	ARCHITECTURE	reduce by rule 206
-+ 	END	reduce by rule 206
-+ 	LOCAL	reduce by rule 206
-+ 	IN	reduce by rule 206
-+ 	DATATYPE	reduce by rule 206
-+ 	TYPE	reduce by rule 206
-+ 	RPAREN	reduce by rule 206
-+ 	SEMICOLON	reduce by rule 206
-+ 	STORAGE	reduce by rule 206
-+ 	LOCATIONS	reduce by rule 206
-+ 	BAR	reduce by rule 206
-+ 	STRUCTURE	reduce by rule 206
-+ 	FUNCTOR	reduce by rule 206
-+ 	SIGNATURE	reduce by rule 206
-+ 	SHARING	reduce by rule 206
-+ 	INSTRUCTION	reduce by rule 206
-+ 	VLIW	reduce by rule 206
-+ 	SUPERSCALAR	reduce by rule 206
-+ 	FUN	reduce by rule 206
-+ 	VAL	reduce by rule 206
-+ 	INCLUDE	reduce by rule 206
-+ 	OPEN	reduce by rule 206
-+ 	LITTLE	reduce by rule 206
-+ 	BIG	reduce by rule 206
-+ 	PIPELINE	reduce by rule 206
-+ 	LOWERCASE	reduce by rule 206
-+ 	UPPERCASE	reduce by rule 206
-+ 	VERBATIM	reduce by rule 206
-+ 	RTL	reduce by rule 206
-+ 	NONFIX	reduce by rule 206
-+ 	INFIX	reduce by rule 206
-+ 	INFIXR	reduce by rule 206
-+ 	DEBUG	reduce by rule 206
-+ 	RESOURCE	reduce by rule 206
-+ 	CPU	reduce by rule 206
-+ 	LATENCY	reduce by rule 206
-+ 	EXCEPTION	reduce by rule 206
-+ 	EOF	reduce by rule 206
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 666:
-+ 
-+ 	opt_exp : EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 691
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 667:
-+ 
-+ 	field : fieldid COLON cnv . signedness width unsignedint_opt 
-+ 
-+ 	EQ	reduce by rule 227
-+ 	RBRACE	reduce by rule 227
-+ 	COMMA	reduce by rule 227
-+ 	SIGNED	shift 694
-+ 	UNSIGNED	shift 693
-+ 	INT	reduce by rule 227
-+ 
-+ 	signedness	goto 692
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 668:
-+ 
-+ 	cnv : id .  (reduce by rule 216)
-+ 
-+ 	EQ	reduce by rule 216
-+ 	RBRACE	reduce by rule 216
-+ 	COMMA	reduce by rule 216
-+ 	SIGNED	reduce by rule 216
-+ 	UNSIGNED	reduce by rule 216
-+ 	INT	reduce by rule 216
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 669:
-+ 
-+ 	cnv : DOLLAR . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 695
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 670:
-+ 
-+ 	fields : field COMMA fields .  (reduce by rule 210)
-+ 
-+ 	RBRACE	reduce by rule 210
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 671:
-+ 
-+ 	structexp : structexp . LPAREN scopeddecls RPAREN 
-+ 	structexp : structexp . LPAREN ident RPAREN 
-+ 	mymldecl : FUNCTOR id LPAREN functorarg RPAREN sigcon EQ structexp .  (reduce by rule 74)
-+ 
-+ 	ARCHITECTURE	reduce by rule 74
-+ 	END	reduce by rule 74
-+ 	LOCAL	reduce by rule 74
-+ 	IN	reduce by rule 74
-+ 	DATATYPE	reduce by rule 74
-+ 	TYPE	reduce by rule 74
-+ 	LPAREN	shift 477
-+ 	RPAREN	reduce by rule 74
-+ 	SEMICOLON	reduce by rule 74
-+ 	STORAGE	reduce by rule 74
-+ 	LOCATIONS	reduce by rule 74
-+ 	STRUCTURE	reduce by rule 74
-+ 	FUNCTOR	reduce by rule 74
-+ 	SIGNATURE	reduce by rule 74
-+ 	SHARING	reduce by rule 74
-+ 	INSTRUCTION	reduce by rule 74
-+ 	VLIW	reduce by rule 74
-+ 	SUPERSCALAR	reduce by rule 74
-+ 	FUN	reduce by rule 74
-+ 	VAL	reduce by rule 74
-+ 	INCLUDE	reduce by rule 74
-+ 	OPEN	reduce by rule 74
-+ 	LITTLE	reduce by rule 74
-+ 	BIG	reduce by rule 74
-+ 	PIPELINE	reduce by rule 74
-+ 	LOWERCASE	reduce by rule 74
-+ 	UPPERCASE	reduce by rule 74
-+ 	VERBATIM	reduce by rule 74
-+ 	RTL	reduce by rule 74
-+ 	NONFIX	reduce by rule 74
-+ 	INFIX	reduce by rule 74
-+ 	INFIXR	reduce by rule 74
-+ 	DEBUG	reduce by rule 74
-+ 	RESOURCE	reduce by rule 74
-+ 	CPU	reduce by rule 74
-+ 	LATENCY	reduce by rule 74
-+ 	EXCEPTION	reduce by rule 74
-+ 	EOF	reduce by rule 74
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 672:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount RBRACKET . bitSize aliasing defaults printcell 
-+ 
-+ 	OF	shift 697
-+ 	WHERE	reduce by rule 387
-+ 	ASM_COLON	reduce by rule 387
-+ 	ALIASING	reduce by rule 387
-+ 
-+ 	bitSize	goto 696
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 673:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm EQ consbinds .  (reduce by rule 129)
-+ 
-+ 	ARCHITECTURE	reduce by rule 129
-+ 	END	reduce by rule 129
-+ 	LOCAL	reduce by rule 129
-+ 	IN	reduce by rule 129
-+ 	DATATYPE	reduce by rule 129
-+ 	TYPE	reduce by rule 129
-+ 	AND	reduce by rule 129
-+ 	RPAREN	reduce by rule 129
-+ 	SEMICOLON	reduce by rule 129
-+ 	STORAGE	reduce by rule 129
-+ 	LOCATIONS	reduce by rule 129
-+ 	STRUCTURE	reduce by rule 129
-+ 	FUNCTOR	reduce by rule 129
-+ 	SIGNATURE	reduce by rule 129
-+ 	SHARING	reduce by rule 129
-+ 	INSTRUCTION	reduce by rule 129
-+ 	VLIW	reduce by rule 129
-+ 	SUPERSCALAR	reduce by rule 129
-+ 	WITHTYPE	reduce by rule 129
-+ 	FUN	reduce by rule 129
-+ 	VAL	reduce by rule 129
-+ 	INCLUDE	reduce by rule 129
-+ 	OPEN	reduce by rule 129
-+ 	LITTLE	reduce by rule 129
-+ 	BIG	reduce by rule 129
-+ 	PIPELINE	reduce by rule 129
-+ 	LOWERCASE	reduce by rule 129
-+ 	UPPERCASE	reduce by rule 129
-+ 	VERBATIM	reduce by rule 129
-+ 	RTL	reduce by rule 129
-+ 	NONFIX	reduce by rule 129
-+ 	INFIX	reduce by rule 129
-+ 	INFIXR	reduce by rule 129
-+ 	DEBUG	reduce by rule 129
-+ 	RESOURCE	reduce by rule 129
-+ 	CPU	reduce by rule 129
-+ 	LATENCY	reduce by rule 129
-+ 	EXCEPTION	reduce by rule 129
-+ 	EOF	reduce by rule 129
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 674:
-+ 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm EQ DATATYPE . ty 
-+ 
-+ 	DOLLAR	shift 271
-+ 	LPAREN	shift 270
-+ 	LBRACE	shift 269
-+ 	CELLSET	shift 50
-+ 	HASH	shift 268
-+ 	BITS	shift 246
-+ 	INSTRUCTION	shift 245
-+ 	CELL	shift 244
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	TYVAR	shift 158
-+ 
-+ 	id	goto 243
-+ 	tid	goto 267
-+ 	tid2	goto 241
-+ 	tident	goto 266
-+ 	tpath	goto 265
-+ 	ty	goto 698
-+ 	aty	goto 263
-+ 	appty	goto 262
-+ 	tuplety	goto 261
-+ 	tyvar	goto 260
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 675:
-+ 
-+ 	encodingexp : int int DOTDOT int .  (reduce by rule 141)
-+ 
-+ 	RBRACKET	reduce by rule 141
-+ 	COMMA	reduce by rule 141
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 676:
-+ 
-+ 	slices : slice COMMA slices .  (reduce by rule 410)
-+ 
-+ 	RBRACKET	reduce by rule 410
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 677:
-+ 
-+ 	slice : int DOTDOT int .  (reduce by rule 411)
-+ 
-+ 	RBRACKET	reduce by rule 411
-+ 	COMMA	reduce by rule 411
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 678:
-+ 
-+ 	aexp : sym CONCAT LBRACKET exps RBRACKET CONCAT . sym 
-+ 
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 69
-+ 	sym	goto 699
-+ 	symb	goto 67
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 679:
-+ 
-+ 	exp : IF typedexp THEN typedexp ELSE exp .  (reduce by rule 275)
-+ 	exp : exp . HANDLE clauses 
-+ 
-+ 	ARCHITECTURE	reduce by rule 275
-+ 	END	reduce by rule 275
-+ 	LOCAL	reduce by rule 275
-+ 	IN	reduce by rule 275
-+ 	OF	reduce by rule 275
-+ 	DATATYPE	reduce by rule 275
-+ 	TYPE	reduce by rule 275
-+ 	AND	reduce by rule 275
-+ 	LPAREN	reduce by rule 275
-+ 	RPAREN	reduce by rule 275
-+ 	RBRACKET	reduce by rule 275
-+ 	RBRACE	reduce by rule 275
-+ 	SEMICOLON	reduce by rule 275
-+ 	RMETA	reduce by rule 275
-+ 	CELLSET	reduce by rule 275
-+ 	STORAGE	reduce by rule 275
-+ 	LOCATIONS	reduce by rule 275
-+ 	COMMA	reduce by rule 275
-+ 	COLON	reduce by rule 275
-+ 	BAR	reduce by rule 275
-+ 	DARROW	reduce by rule 275
-+ 	THEN	reduce by rule 275
-+ 	ELSE	reduce by rule 275
-+ 	HANDLE	reduce by rule 275
-+ 	STRUCTURE	reduce by rule 275
-+ 	FUNCTOR	reduce by rule 275
-+ 	SIGNATURE	reduce by rule 275
-+ 	SHARING	reduce by rule 275
-+ 	INSTRUCTION	reduce by rule 275
-+ 	VLIW	reduce by rule 275
-+ 	SUPERSCALAR	reduce by rule 275
-+ 	WITHTYPE	reduce by rule 275
-+ 	FUN	reduce by rule 275
-+ 	VAL	reduce by rule 275
-+ 	INCLUDE	reduce by rule 275
-+ 	OPEN	reduce by rule 275
-+ 	LITTLE	reduce by rule 275
-+ 	BIG	reduce by rule 275
-+ 	PIPELINE	reduce by rule 275
-+ 	LOWERCASE	reduce by rule 275
-+ 	UPPERCASE	reduce by rule 275
-+ 	VERBATIM	reduce by rule 275
-+ 	RTL	reduce by rule 275
-+ 	SPAN	reduce by rule 275
-+ 	DELAYSLOT	reduce by rule 275
-+ 	NONFIX	reduce by rule 275
-+ 	INFIX	reduce by rule 275
-+ 	INFIXR	reduce by rule 275
-+ 	DEBUG	reduce by rule 275
-+ 	ASM_COLON	reduce by rule 275
-+ 	MC_COLON	reduce by rule 275
-+ 	RTL_COLON	reduce by rule 275
-+ 	DELAYSLOT_COLON	reduce by rule 275
-+ 	NULLIFIED_COLON	reduce by rule 275
-+ 	PADDING_COLON	reduce by rule 275
-+ 	RESOURCE	reduce by rule 275
-+ 	CPU	reduce by rule 275
-+ 	LATENCY	reduce by rule 275
-+ 	EXCEPTION	reduce by rule 275
-+ 	ID	reduce by rule 275
-+ 	SYMBOL	reduce by rule 275
-+ 	WORD	reduce by rule 275
-+ 	INT	reduce by rule 275
-+ 	EOF	reduce by rule 275
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 680:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	clause : typedpat guard cont DARROW exp .  (reduce by rule 336)
-+ 
-+ 	ARCHITECTURE	reduce by rule 336
-+ 	END	reduce by rule 336
-+ 	LOCAL	reduce by rule 336
-+ 	IN	reduce by rule 336
-+ 	OF	reduce by rule 336
-+ 	DATATYPE	reduce by rule 336
-+ 	TYPE	reduce by rule 336
-+ 	AND	reduce by rule 336
-+ 	LPAREN	reduce by rule 336
-+ 	RPAREN	reduce by rule 336
-+ 	RBRACKET	reduce by rule 336
-+ 	RBRACE	reduce by rule 336
-+ 	SEMICOLON	reduce by rule 336
-+ 	RMETA	reduce by rule 336
-+ 	CELLSET	reduce by rule 336
-+ 	STORAGE	reduce by rule 336
-+ 	LOCATIONS	reduce by rule 336
-+ 	COMMA	reduce by rule 336
-+ 	COLON	reduce by rule 336
-+ 	BAR	reduce by rule 336
-+ 	DARROW	reduce by rule 336
-+ 	THEN	reduce by rule 336
-+ 	ELSE	reduce by rule 336
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 336
-+ 	FUNCTOR	reduce by rule 336
-+ 	SIGNATURE	reduce by rule 336
-+ 	SHARING	reduce by rule 336
-+ 	INSTRUCTION	reduce by rule 336
-+ 	VLIW	reduce by rule 336
-+ 	SUPERSCALAR	reduce by rule 336
-+ 	WITHTYPE	reduce by rule 336
-+ 	FUN	reduce by rule 336
-+ 	VAL	reduce by rule 336
-+ 	INCLUDE	reduce by rule 336
-+ 	OPEN	reduce by rule 336
-+ 	LITTLE	reduce by rule 336
-+ 	BIG	reduce by rule 336
-+ 	PIPELINE	reduce by rule 336
-+ 	LOWERCASE	reduce by rule 336
-+ 	UPPERCASE	reduce by rule 336
-+ 	VERBATIM	reduce by rule 336
-+ 	RTL	reduce by rule 336
-+ 	SPAN	reduce by rule 336
-+ 	DELAYSLOT	reduce by rule 336
-+ 	NONFIX	reduce by rule 336
-+ 	INFIX	reduce by rule 336
-+ 	INFIXR	reduce by rule 336
-+ 	DEBUG	reduce by rule 336
-+ 	ASM_COLON	reduce by rule 336
-+ 	MC_COLON	reduce by rule 336
-+ 	RTL_COLON	reduce by rule 336
-+ 	DELAYSLOT_COLON	reduce by rule 336
-+ 	NULLIFIED_COLON	reduce by rule 336
-+ 	PADDING_COLON	reduce by rule 336
-+ 	RESOURCE	reduce by rule 336
-+ 	CPU	reduce by rule 336
-+ 	LATENCY	reduce by rule 336
-+ 	EXCEPTION	reduce by rule 336
-+ 	ID	reduce by rule 336
-+ 	SYMBOL	reduce by rule 336
-+ 	WORD	reduce by rule 336
-+ 	INT	reduce by rule 336
-+ 	EOF	reduce by rule 336
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 681:
-+ 
-+ 	aexp : DOLLAR id LBRACKET exp region RBRACKET .  (reduce by rule 254)
-+ 
-+ 	ARCHITECTURE	reduce by rule 254
-+ 	END	reduce by rule 254
-+ 	LOCAL	reduce by rule 254
-+ 	IN	reduce by rule 254
-+ 	OF	reduce by rule 254
-+ 	DATATYPE	reduce by rule 254
-+ 	TYPE	reduce by rule 254
-+ 	EQ	reduce by rule 254
-+ 	DOLLAR	reduce by rule 254
-+ 	TIMES	reduce by rule 254
-+ 	AND	reduce by rule 254
-+ 	DEREF	reduce by rule 254
-+ 	NOT	reduce by rule 254
-+ 	LLBRACKET	reduce by rule 254
-+ 	LHASHBRACKET	reduce by rule 254
-+ 	LPAREN	reduce by rule 254
-+ 	RPAREN	reduce by rule 254
-+ 	LBRACKET	reduce by rule 254
-+ 	RBRACKET	reduce by rule 254
-+ 	LBRACE	reduce by rule 254
-+ 	RBRACE	reduce by rule 254
-+ 	SEMICOLON	reduce by rule 254
-+ 	LDQUOTE	reduce by rule 254
-+ 	RMETA	reduce by rule 254
-+ 	CELLSET	reduce by rule 254
-+ 	STORAGE	reduce by rule 254
-+ 	LOCATIONS	reduce by rule 254
-+ 	HASH	reduce by rule 254
-+ 	COMMA	reduce by rule 254
-+ 	COLON	reduce by rule 254
-+ 	AT	reduce by rule 254
-+ 	BAR	reduce by rule 254
-+ 	DARROW	reduce by rule 254
-+ 	THEN	reduce by rule 254
-+ 	ELSE	reduce by rule 254
-+ 	TRUE	reduce by rule 254
-+ 	FALSE	reduce by rule 254
-+ 	HANDLE	reduce by rule 254
-+ 	LET	reduce by rule 254
-+ 	STRUCTURE	reduce by rule 254
-+ 	FUNCTOR	reduce by rule 254
-+ 	SIGNATURE	reduce by rule 254
-+ 	SHARING	reduce by rule 254
-+ 	INSTRUCTION	reduce by rule 254
-+ 	VLIW	reduce by rule 254
-+ 	SUPERSCALAR	reduce by rule 254
-+ 	WITHTYPE	reduce by rule 254
-+ 	FUN	reduce by rule 254
-+ 	VAL	reduce by rule 254
-+ 	INCLUDE	reduce by rule 254
-+ 	OPEN	reduce by rule 254
-+ 	OP	reduce by rule 254
-+ 	LITTLE	reduce by rule 254
-+ 	BIG	reduce by rule 254
-+ 	PIPELINE	reduce by rule 254
-+ 	LOWERCASE	reduce by rule 254
-+ 	UPPERCASE	reduce by rule 254
-+ 	VERBATIM	reduce by rule 254
-+ 	RTL	reduce by rule 254
-+ 	SPAN	reduce by rule 254
-+ 	DELAYSLOT	reduce by rule 254
-+ 	ALWAYS	reduce by rule 254
-+ 	NEVER	reduce by rule 254
-+ 	NONFIX	reduce by rule 254
-+ 	INFIX	reduce by rule 254
-+ 	INFIXR	reduce by rule 254
-+ 	DEBUG	reduce by rule 254
-+ 	ASM_COLON	reduce by rule 254
-+ 	MC_COLON	reduce by rule 254
-+ 	RTL_COLON	reduce by rule 254
-+ 	DELAYSLOT_COLON	reduce by rule 254
-+ 	NULLIFIED_COLON	reduce by rule 254
-+ 	PADDING_COLON	reduce by rule 254
-+ 	RESOURCE	reduce by rule 254
-+ 	CPU	reduce by rule 254
-+ 	LATENCY	reduce by rule 254
-+ 	EXCEPTION	reduce by rule 254
-+ 	ID	reduce by rule 254
-+ 	SYMBOL	reduce by rule 254
-+ 	WORD	reduce by rule 254
-+ 	INT	reduce by rule 254
-+ 	INTINF	reduce by rule 254
-+ 	REAL	reduce by rule 254
-+ 	STRING	reduce by rule 254
-+ 	CHAR	reduce by rule 254
-+ 	EOF	reduce by rule 254
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 682:
-+ 
-+ 	region : COLON id .  (reduce by rule 261)
-+ 
-+ 	RBRACKET	reduce by rule 261
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 683:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified delayslot . delayslotcandidate sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 149
-+ 	END	reduce by rule 149
-+ 	LOCAL	reduce by rule 149
-+ 	IN	reduce by rule 149
-+ 	DATATYPE	reduce by rule 149
-+ 	TYPE	reduce by rule 149
-+ 	AND	reduce by rule 149
-+ 	RPAREN	reduce by rule 149
-+ 	SEMICOLON	reduce by rule 149
-+ 	STORAGE	reduce by rule 149
-+ 	LOCATIONS	reduce by rule 149
-+ 	BAR	reduce by rule 149
-+ 	STRUCTURE	reduce by rule 149
-+ 	FUNCTOR	reduce by rule 149
-+ 	SIGNATURE	reduce by rule 149
-+ 	SHARING	reduce by rule 149
-+ 	INSTRUCTION	reduce by rule 149
-+ 	VLIW	reduce by rule 149
-+ 	SUPERSCALAR	reduce by rule 149
-+ 	WITHTYPE	reduce by rule 149
-+ 	FUN	reduce by rule 149
-+ 	VAL	reduce by rule 149
-+ 	INCLUDE	reduce by rule 149
-+ 	OPEN	reduce by rule 149
-+ 	LITTLE	reduce by rule 149
-+ 	BIG	reduce by rule 149
-+ 	PIPELINE	reduce by rule 149
-+ 	LOWERCASE	reduce by rule 149
-+ 	UPPERCASE	reduce by rule 149
-+ 	VERBATIM	reduce by rule 149
-+ 	RTL	reduce by rule 149
-+ 	SPAN	reduce by rule 149
-+ 	DELAYSLOT	shift 701
-+ 	NONFIX	reduce by rule 149
-+ 	INFIX	reduce by rule 149
-+ 	INFIXR	reduce by rule 149
-+ 	DEBUG	reduce by rule 149
-+ 	RESOURCE	reduce by rule 149
-+ 	CPU	reduce by rule 149
-+ 	LATENCY	reduce by rule 149
-+ 	EXCEPTION	reduce by rule 149
-+ 	EOF	reduce by rule 149
-+ 
-+ 	delayslotcandidate	goto 700
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 684:
-+ 
-+ 	delayslot : DELAYSLOT_COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 702
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 685:
-+ 
-+ 	nullified : NULLIFIED_COLON flag .  (reduce by rule 169)
-+ 
-+ 	ARCHITECTURE	reduce by rule 169
-+ 	END	reduce by rule 169
-+ 	LOCAL	reduce by rule 169
-+ 	IN	reduce by rule 169
-+ 	DATATYPE	reduce by rule 169
-+ 	TYPE	reduce by rule 169
-+ 	AND	reduce by rule 169
-+ 	RPAREN	reduce by rule 169
-+ 	SEMICOLON	reduce by rule 169
-+ 	STORAGE	reduce by rule 169
-+ 	LOCATIONS	reduce by rule 169
-+ 	BAR	reduce by rule 169
-+ 	STRUCTURE	reduce by rule 169
-+ 	FUNCTOR	reduce by rule 169
-+ 	SIGNATURE	reduce by rule 169
-+ 	SHARING	reduce by rule 169
-+ 	INSTRUCTION	reduce by rule 169
-+ 	VLIW	reduce by rule 169
-+ 	SUPERSCALAR	reduce by rule 169
-+ 	WITHTYPE	reduce by rule 169
-+ 	FUN	reduce by rule 169
-+ 	VAL	reduce by rule 169
-+ 	INCLUDE	reduce by rule 169
-+ 	OPEN	reduce by rule 169
-+ 	LITTLE	reduce by rule 169
-+ 	BIG	reduce by rule 169
-+ 	PIPELINE	reduce by rule 169
-+ 	LOWERCASE	reduce by rule 169
-+ 	UPPERCASE	reduce by rule 169
-+ 	VERBATIM	reduce by rule 169
-+ 	RTL	reduce by rule 169
-+ 	SPAN	reduce by rule 169
-+ 	DELAYSLOT	reduce by rule 169
-+ 	NONFIX	reduce by rule 169
-+ 	INFIX	reduce by rule 169
-+ 	INFIXR	reduce by rule 169
-+ 	DEBUG	reduce by rule 169
-+ 	DELAYSLOT_COLON	reduce by rule 169
-+ 	RESOURCE	reduce by rule 169
-+ 	CPU	reduce by rule 169
-+ 	LATENCY	reduce by rule 169
-+ 	EXCEPTION	reduce by rule 169
-+ 	EOF	reduce by rule 169
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 686:
-+ 
-+ 	nullified : NULLIFIED_COLON FALSE .  (reduce by rule 168)
-+ 
-+ 	ARCHITECTURE	reduce by rule 168
-+ 	END	reduce by rule 168
-+ 	LOCAL	reduce by rule 168
-+ 	IN	reduce by rule 168
-+ 	DATATYPE	reduce by rule 168
-+ 	TYPE	reduce by rule 168
-+ 	AND	reduce by rule 168
-+ 	RPAREN	reduce by rule 168
-+ 	SEMICOLON	reduce by rule 168
-+ 	STORAGE	reduce by rule 168
-+ 	LOCATIONS	reduce by rule 168
-+ 	BAR	reduce by rule 168
-+ 	STRUCTURE	reduce by rule 168
-+ 	FUNCTOR	reduce by rule 168
-+ 	SIGNATURE	reduce by rule 168
-+ 	SHARING	reduce by rule 168
-+ 	INSTRUCTION	reduce by rule 168
-+ 	VLIW	reduce by rule 168
-+ 	SUPERSCALAR	reduce by rule 168
-+ 	WITHTYPE	reduce by rule 168
-+ 	FUN	reduce by rule 168
-+ 	VAL	reduce by rule 168
-+ 	INCLUDE	reduce by rule 168
-+ 	OPEN	reduce by rule 168
-+ 	LITTLE	reduce by rule 168
-+ 	BIG	reduce by rule 168
-+ 	PIPELINE	reduce by rule 168
-+ 	LOWERCASE	reduce by rule 168
-+ 	UPPERCASE	reduce by rule 168
-+ 	VERBATIM	reduce by rule 168
-+ 	RTL	reduce by rule 168
-+ 	SPAN	reduce by rule 168
-+ 	DELAYSLOT	reduce by rule 168
-+ 	NONFIX	reduce by rule 168
-+ 	INFIX	reduce by rule 168
-+ 	INFIXR	reduce by rule 168
-+ 	DEBUG	reduce by rule 168
-+ 	DELAYSLOT_COLON	reduce by rule 168
-+ 	RESOURCE	reduce by rule 168
-+ 	CPU	reduce by rule 168
-+ 	LATENCY	reduce by rule 168
-+ 	EXCEPTION	reduce by rule 168
-+ 	EOF	reduce by rule 168
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 687:
-+ 
-+ 	flag : id flagguard .  (reduce by rule 161)
-+ 
-+ 	ARCHITECTURE	reduce by rule 161
-+ 	END	reduce by rule 161
-+ 	LOCAL	reduce by rule 161
-+ 	IN	reduce by rule 161
-+ 	DATATYPE	reduce by rule 161
-+ 	TYPE	reduce by rule 161
-+ 	AND	reduce by rule 161
-+ 	RPAREN	reduce by rule 161
-+ 	SEMICOLON	reduce by rule 161
-+ 	STORAGE	reduce by rule 161
-+ 	LOCATIONS	reduce by rule 161
-+ 	BAR	reduce by rule 161
-+ 	STRUCTURE	reduce by rule 161
-+ 	FUNCTOR	reduce by rule 161
-+ 	SIGNATURE	reduce by rule 161
-+ 	SHARING	reduce by rule 161
-+ 	INSTRUCTION	reduce by rule 161
-+ 	VLIW	reduce by rule 161
-+ 	SUPERSCALAR	reduce by rule 161
-+ 	WITHTYPE	reduce by rule 161
-+ 	FUN	reduce by rule 161
-+ 	VAL	reduce by rule 161
-+ 	INCLUDE	reduce by rule 161
-+ 	OPEN	reduce by rule 161
-+ 	LITTLE	reduce by rule 161
-+ 	BIG	reduce by rule 161
-+ 	PIPELINE	reduce by rule 161
-+ 	LOWERCASE	reduce by rule 161
-+ 	UPPERCASE	reduce by rule 161
-+ 	VERBATIM	reduce by rule 161
-+ 	RTL	reduce by rule 161
-+ 	SPAN	reduce by rule 161
-+ 	DELAYSLOT	reduce by rule 161
-+ 	NONFIX	reduce by rule 161
-+ 	INFIX	reduce by rule 161
-+ 	INFIXR	reduce by rule 161
-+ 	DEBUG	reduce by rule 161
-+ 	DELAYSLOT_COLON	reduce by rule 161
-+ 	NULLIFIED_COLON	reduce by rule 161
-+ 	RESOURCE	reduce by rule 161
-+ 	CPU	reduce by rule 161
-+ 	LATENCY	reduce by rule 161
-+ 	EXCEPTION	reduce by rule 161
-+ 	EOF	reduce by rule 161
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 688:
-+ 
-+ 	flagguard : AND . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 703
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 689:
-+ 
-+ 	flag : id EQ . True flagguard 
-+ 	flag : id EQ . False flagguard 
-+ 
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 
-+ 	True	goto 705
-+ 	False	goto 704
-+ 
-+ 	.	error
-+ 
-+ error:  state 690: shift/reduce conflict (shift AND, reduce by rule 165)
-+ 
-+ state 690:
-+ 
-+ 	flag : NOT id . flagguard 
-+ 
-+ 	ARCHITECTURE	reduce by rule 165
-+ 	END	reduce by rule 165
-+ 	LOCAL	reduce by rule 165
-+ 	IN	reduce by rule 165
-+ 	DATATYPE	reduce by rule 165
-+ 	TYPE	reduce by rule 165
-+ 	AND	shift 688
-+ 	RPAREN	reduce by rule 165
-+ 	SEMICOLON	reduce by rule 165
-+ 	STORAGE	reduce by rule 165
-+ 	LOCATIONS	reduce by rule 165
-+ 	BAR	reduce by rule 165
-+ 	STRUCTURE	reduce by rule 165
-+ 	FUNCTOR	reduce by rule 165
-+ 	SIGNATURE	reduce by rule 165
-+ 	SHARING	reduce by rule 165
-+ 	INSTRUCTION	reduce by rule 165
-+ 	VLIW	reduce by rule 165
-+ 	SUPERSCALAR	reduce by rule 165
-+ 	WITHTYPE	reduce by rule 165
-+ 	FUN	reduce by rule 165
-+ 	VAL	reduce by rule 165
-+ 	INCLUDE	reduce by rule 165
-+ 	OPEN	reduce by rule 165
-+ 	LITTLE	reduce by rule 165
-+ 	BIG	reduce by rule 165
-+ 	PIPELINE	reduce by rule 165
-+ 	LOWERCASE	reduce by rule 165
-+ 	UPPERCASE	reduce by rule 165
-+ 	VERBATIM	reduce by rule 165
-+ 	RTL	reduce by rule 165
-+ 	SPAN	reduce by rule 165
-+ 	DELAYSLOT	reduce by rule 165
-+ 	NONFIX	reduce by rule 165
-+ 	INFIX	reduce by rule 165
-+ 	INFIXR	reduce by rule 165
-+ 	DEBUG	reduce by rule 165
-+ 	DELAYSLOT_COLON	reduce by rule 165
-+ 	NULLIFIED_COLON	reduce by rule 165
-+ 	RESOURCE	reduce by rule 165
-+ 	CPU	reduce by rule 165
-+ 	LATENCY	reduce by rule 165
-+ 	EXCEPTION	reduce by rule 165
-+ 	EOF	reduce by rule 165
-+ 
-+ 	flagguard	goto 706
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 691:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	opt_exp : EQ exp .  (reduce by rule 208)
-+ 
-+ 	ARCHITECTURE	reduce by rule 208
-+ 	END	reduce by rule 208
-+ 	LOCAL	reduce by rule 208
-+ 	IN	reduce by rule 208
-+ 	DATATYPE	reduce by rule 208
-+ 	TYPE	reduce by rule 208
-+ 	RPAREN	reduce by rule 208
-+ 	SEMICOLON	reduce by rule 208
-+ 	STORAGE	reduce by rule 208
-+ 	LOCATIONS	reduce by rule 208
-+ 	BAR	reduce by rule 208
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 208
-+ 	FUNCTOR	reduce by rule 208
-+ 	SIGNATURE	reduce by rule 208
-+ 	SHARING	reduce by rule 208
-+ 	INSTRUCTION	reduce by rule 208
-+ 	VLIW	reduce by rule 208
-+ 	SUPERSCALAR	reduce by rule 208
-+ 	FUN	reduce by rule 208
-+ 	VAL	reduce by rule 208
-+ 	INCLUDE	reduce by rule 208
-+ 	OPEN	reduce by rule 208
-+ 	LITTLE	reduce by rule 208
-+ 	BIG	reduce by rule 208
-+ 	PIPELINE	reduce by rule 208
-+ 	LOWERCASE	reduce by rule 208
-+ 	UPPERCASE	reduce by rule 208
-+ 	VERBATIM	reduce by rule 208
-+ 	RTL	reduce by rule 208
-+ 	NONFIX	reduce by rule 208
-+ 	INFIX	reduce by rule 208
-+ 	INFIXR	reduce by rule 208
-+ 	DEBUG	reduce by rule 208
-+ 	RESOURCE	reduce by rule 208
-+ 	CPU	reduce by rule 208
-+ 	LATENCY	reduce by rule 208
-+ 	EXCEPTION	reduce by rule 208
-+ 	EOF	reduce by rule 208
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 692:
-+ 
-+ 	field : fieldid COLON cnv signedness . width unsignedint_opt 
-+ 
-+ 	EQ	reduce by rule 218
-+ 	RBRACE	reduce by rule 218
-+ 	COMMA	reduce by rule 218
-+ 	INT	shift 64
-+ 
-+ 	width	goto 708
-+ 	int	goto 707
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 693:
-+ 
-+ 	signedness : UNSIGNED .  (reduce by rule 226)
-+ 
-+ 	EQ	reduce by rule 226
-+ 	RBRACE	reduce by rule 226
-+ 	COMMA	reduce by rule 226
-+ 	INT	reduce by rule 226
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 694:
-+ 
-+ 	signedness : SIGNED .  (reduce by rule 225)
-+ 
-+ 	EQ	reduce by rule 225
-+ 	RBRACE	reduce by rule 225
-+ 	COMMA	reduce by rule 225
-+ 	INT	reduce by rule 225
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 695:
-+ 
-+ 	cnv : DOLLAR id .  (reduce by rule 217)
-+ 
-+ 	EQ	reduce by rule 217
-+ 	RBRACE	reduce by rule 217
-+ 	COMMA	reduce by rule 217
-+ 	SIGNED	reduce by rule 217
-+ 	UNSIGNED	reduce by rule 217
-+ 	INT	reduce by rule 217
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 696:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount RBRACKET bitSize . aliasing defaults printcell 
-+ 
-+ 	WHERE	reduce by rule 400
-+ 	ASM_COLON	reduce by rule 400
-+ 	ALIASING	shift 710
-+ 
-+ 	aliasing	goto 709
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 697:
-+ 
-+ 	bitSize : OF . int aggregable BITS 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 711
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 698:
-+ 
-+ 	ty : ty . ARROW ty 
-+ 	datatypebind : tyvarseq id opcodeencoding fieldty hasasm EQ DATATYPE ty .  (reduce by rule 130)
-+ 
-+ 	ARCHITECTURE	reduce by rule 130
-+ 	END	reduce by rule 130
-+ 	LOCAL	reduce by rule 130
-+ 	IN	reduce by rule 130
-+ 	DATATYPE	reduce by rule 130
-+ 	TYPE	reduce by rule 130
-+ 	AND	reduce by rule 130
-+ 	RPAREN	reduce by rule 130
-+ 	SEMICOLON	reduce by rule 130
-+ 	STORAGE	reduce by rule 130
-+ 	LOCATIONS	reduce by rule 130
-+ 	ARROW	shift 388
-+ 	STRUCTURE	reduce by rule 130
-+ 	FUNCTOR	reduce by rule 130
-+ 	SIGNATURE	reduce by rule 130
-+ 	SHARING	reduce by rule 130
-+ 	INSTRUCTION	reduce by rule 130
-+ 	VLIW	reduce by rule 130
-+ 	SUPERSCALAR	reduce by rule 130
-+ 	WITHTYPE	reduce by rule 130
-+ 	FUN	reduce by rule 130
-+ 	VAL	reduce by rule 130
-+ 	INCLUDE	reduce by rule 130
-+ 	OPEN	reduce by rule 130
-+ 	LITTLE	reduce by rule 130
-+ 	BIG	reduce by rule 130
-+ 	PIPELINE	reduce by rule 130
-+ 	LOWERCASE	reduce by rule 130
-+ 	UPPERCASE	reduce by rule 130
-+ 	VERBATIM	reduce by rule 130
-+ 	RTL	reduce by rule 130
-+ 	NONFIX	reduce by rule 130
-+ 	INFIX	reduce by rule 130
-+ 	INFIXR	reduce by rule 130
-+ 	DEBUG	reduce by rule 130
-+ 	RESOURCE	reduce by rule 130
-+ 	CPU	reduce by rule 130
-+ 	LATENCY	reduce by rule 130
-+ 	EXCEPTION	reduce by rule 130
-+ 	EOF	reduce by rule 130
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 699:
-+ 
-+ 	aexp : sym CONCAT LBRACKET exps RBRACKET CONCAT sym .  (reduce by rule 258)
-+ 
-+ 	ARCHITECTURE	reduce by rule 258
-+ 	END	reduce by rule 258
-+ 	LOCAL	reduce by rule 258
-+ 	IN	reduce by rule 258
-+ 	OF	reduce by rule 258
-+ 	DATATYPE	reduce by rule 258
-+ 	TYPE	reduce by rule 258
-+ 	EQ	reduce by rule 258
-+ 	DOLLAR	reduce by rule 258
-+ 	TIMES	reduce by rule 258
-+ 	AND	reduce by rule 258
-+ 	DEREF	reduce by rule 258
-+ 	NOT	reduce by rule 258
-+ 	LLBRACKET	reduce by rule 258
-+ 	LHASHBRACKET	reduce by rule 258
-+ 	LPAREN	reduce by rule 258
-+ 	RPAREN	reduce by rule 258
-+ 	LBRACKET	reduce by rule 258
-+ 	RBRACKET	reduce by rule 258
-+ 	LBRACE	reduce by rule 258
-+ 	RBRACE	reduce by rule 258
-+ 	SEMICOLON	reduce by rule 258
-+ 	LDQUOTE	reduce by rule 258
-+ 	RMETA	reduce by rule 258
-+ 	CELLSET	reduce by rule 258
-+ 	STORAGE	reduce by rule 258
-+ 	LOCATIONS	reduce by rule 258
-+ 	HASH	reduce by rule 258
-+ 	COMMA	reduce by rule 258
-+ 	COLON	reduce by rule 258
-+ 	AT	reduce by rule 258
-+ 	BAR	reduce by rule 258
-+ 	DARROW	reduce by rule 258
-+ 	THEN	reduce by rule 258
-+ 	ELSE	reduce by rule 258
-+ 	TRUE	reduce by rule 258
-+ 	FALSE	reduce by rule 258
-+ 	HANDLE	reduce by rule 258
-+ 	LET	reduce by rule 258
-+ 	STRUCTURE	reduce by rule 258
-+ 	FUNCTOR	reduce by rule 258
-+ 	SIGNATURE	reduce by rule 258
-+ 	SHARING	reduce by rule 258
-+ 	INSTRUCTION	reduce by rule 258
-+ 	VLIW	reduce by rule 258
-+ 	SUPERSCALAR	reduce by rule 258
-+ 	WITHTYPE	reduce by rule 258
-+ 	FUN	reduce by rule 258
-+ 	VAL	reduce by rule 258
-+ 	INCLUDE	reduce by rule 258
-+ 	OPEN	reduce by rule 258
-+ 	OP	reduce by rule 258
-+ 	LITTLE	reduce by rule 258
-+ 	BIG	reduce by rule 258
-+ 	PIPELINE	reduce by rule 258
-+ 	LOWERCASE	reduce by rule 258
-+ 	UPPERCASE	reduce by rule 258
-+ 	VERBATIM	reduce by rule 258
-+ 	RTL	reduce by rule 258
-+ 	SPAN	reduce by rule 258
-+ 	DELAYSLOT	reduce by rule 258
-+ 	ALWAYS	reduce by rule 258
-+ 	NEVER	reduce by rule 258
-+ 	NONFIX	reduce by rule 258
-+ 	INFIX	reduce by rule 258
-+ 	INFIXR	reduce by rule 258
-+ 	DEBUG	reduce by rule 258
-+ 	ASM_COLON	reduce by rule 258
-+ 	MC_COLON	reduce by rule 258
-+ 	RTL_COLON	reduce by rule 258
-+ 	DELAYSLOT_COLON	reduce by rule 258
-+ 	NULLIFIED_COLON	reduce by rule 258
-+ 	PADDING_COLON	reduce by rule 258
-+ 	RESOURCE	reduce by rule 258
-+ 	CPU	reduce by rule 258
-+ 	LATENCY	reduce by rule 258
-+ 	EXCEPTION	reduce by rule 258
-+ 	ID	reduce by rule 258
-+ 	SYMBOL	reduce by rule 258
-+ 	WORD	reduce by rule 258
-+ 	INT	reduce by rule 258
-+ 	INTINF	reduce by rule 258
-+ 	REAL	reduce by rule 258
-+ 	STRING	reduce by rule 258
-+ 	CHAR	reduce by rule 258
-+ 	EOF	reduce by rule 258
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 700:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified delayslot delayslotcandidate . sdi latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 174
-+ 	END	reduce by rule 174
-+ 	LOCAL	reduce by rule 174
-+ 	IN	reduce by rule 174
-+ 	DATATYPE	reduce by rule 174
-+ 	TYPE	reduce by rule 174
-+ 	AND	reduce by rule 174
-+ 	RPAREN	reduce by rule 174
-+ 	SEMICOLON	reduce by rule 174
-+ 	STORAGE	reduce by rule 174
-+ 	LOCATIONS	reduce by rule 174
-+ 	BAR	reduce by rule 174
-+ 	STRUCTURE	reduce by rule 174
-+ 	FUNCTOR	reduce by rule 174
-+ 	SIGNATURE	reduce by rule 174
-+ 	SHARING	reduce by rule 174
-+ 	INSTRUCTION	reduce by rule 174
-+ 	VLIW	reduce by rule 174
-+ 	SUPERSCALAR	reduce by rule 174
-+ 	WITHTYPE	reduce by rule 174
-+ 	FUN	reduce by rule 174
-+ 	VAL	reduce by rule 174
-+ 	INCLUDE	reduce by rule 174
-+ 	OPEN	reduce by rule 174
-+ 	LITTLE	reduce by rule 174
-+ 	BIG	reduce by rule 174
-+ 	PIPELINE	reduce by rule 174
-+ 	LOWERCASE	reduce by rule 174
-+ 	UPPERCASE	reduce by rule 174
-+ 	VERBATIM	reduce by rule 174
-+ 	RTL	reduce by rule 174
-+ 	SPAN	shift 713
-+ 	NONFIX	reduce by rule 174
-+ 	INFIX	reduce by rule 174
-+ 	INFIXR	reduce by rule 174
-+ 	DEBUG	reduce by rule 174
-+ 	RESOURCE	reduce by rule 174
-+ 	CPU	reduce by rule 174
-+ 	LATENCY	reduce by rule 174
-+ 	EXCEPTION	reduce by rule 174
-+ 	EOF	reduce by rule 174
-+ 
-+ 	sdi	goto 712
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 701:
-+ 
-+ 	delayslotcandidate : DELAYSLOT . CANDIDATE_COLON exp 
-+ 
-+ 	CANDIDATE_COLON	shift 714
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 702:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	delayslot : DELAYSLOT_COLON exp .  (reduce by rule 171)
-+ 
-+ 	ARCHITECTURE	reduce by rule 171
-+ 	END	reduce by rule 171
-+ 	LOCAL	reduce by rule 171
-+ 	IN	reduce by rule 171
-+ 	DATATYPE	reduce by rule 171
-+ 	TYPE	reduce by rule 171
-+ 	AND	reduce by rule 171
-+ 	RPAREN	reduce by rule 171
-+ 	SEMICOLON	reduce by rule 171
-+ 	STORAGE	reduce by rule 171
-+ 	LOCATIONS	reduce by rule 171
-+ 	BAR	reduce by rule 171
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 171
-+ 	FUNCTOR	reduce by rule 171
-+ 	SIGNATURE	reduce by rule 171
-+ 	SHARING	reduce by rule 171
-+ 	INSTRUCTION	reduce by rule 171
-+ 	VLIW	reduce by rule 171
-+ 	SUPERSCALAR	reduce by rule 171
-+ 	WITHTYPE	reduce by rule 171
-+ 	FUN	reduce by rule 171
-+ 	VAL	reduce by rule 171
-+ 	INCLUDE	reduce by rule 171
-+ 	OPEN	reduce by rule 171
-+ 	LITTLE	reduce by rule 171
-+ 	BIG	reduce by rule 171
-+ 	PIPELINE	reduce by rule 171
-+ 	LOWERCASE	reduce by rule 171
-+ 	UPPERCASE	reduce by rule 171
-+ 	VERBATIM	reduce by rule 171
-+ 	RTL	reduce by rule 171
-+ 	SPAN	reduce by rule 171
-+ 	DELAYSLOT	reduce by rule 171
-+ 	NONFIX	reduce by rule 171
-+ 	INFIX	reduce by rule 171
-+ 	INFIXR	reduce by rule 171
-+ 	DEBUG	reduce by rule 171
-+ 	RESOURCE	reduce by rule 171
-+ 	CPU	reduce by rule 171
-+ 	LATENCY	reduce by rule 171
-+ 	EXCEPTION	reduce by rule 171
-+ 	EOF	reduce by rule 171
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 703:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	flagguard : AND exp .  (reduce by rule 166)
-+ 
-+ 	ARCHITECTURE	reduce by rule 166
-+ 	END	reduce by rule 166
-+ 	LOCAL	reduce by rule 166
-+ 	IN	reduce by rule 166
-+ 	DATATYPE	reduce by rule 166
-+ 	TYPE	reduce by rule 166
-+ 	AND	reduce by rule 166
-+ 	RPAREN	reduce by rule 166
-+ 	SEMICOLON	reduce by rule 166
-+ 	STORAGE	reduce by rule 166
-+ 	LOCATIONS	reduce by rule 166
-+ 	BAR	reduce by rule 166
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 166
-+ 	FUNCTOR	reduce by rule 166
-+ 	SIGNATURE	reduce by rule 166
-+ 	SHARING	reduce by rule 166
-+ 	INSTRUCTION	reduce by rule 166
-+ 	VLIW	reduce by rule 166
-+ 	SUPERSCALAR	reduce by rule 166
-+ 	WITHTYPE	reduce by rule 166
-+ 	FUN	reduce by rule 166
-+ 	VAL	reduce by rule 166
-+ 	INCLUDE	reduce by rule 166
-+ 	OPEN	reduce by rule 166
-+ 	LITTLE	reduce by rule 166
-+ 	BIG	reduce by rule 166
-+ 	PIPELINE	reduce by rule 166
-+ 	LOWERCASE	reduce by rule 166
-+ 	UPPERCASE	reduce by rule 166
-+ 	VERBATIM	reduce by rule 166
-+ 	RTL	reduce by rule 166
-+ 	SPAN	reduce by rule 166
-+ 	DELAYSLOT	reduce by rule 166
-+ 	NONFIX	reduce by rule 166
-+ 	INFIX	reduce by rule 166
-+ 	INFIXR	reduce by rule 166
-+ 	DEBUG	reduce by rule 166
-+ 	DELAYSLOT_COLON	reduce by rule 166
-+ 	NULLIFIED_COLON	reduce by rule 166
-+ 	RESOURCE	reduce by rule 166
-+ 	CPU	reduce by rule 166
-+ 	LATENCY	reduce by rule 166
-+ 	EXCEPTION	reduce by rule 166
-+ 	EOF	reduce by rule 166
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 704: shift/reduce conflict (shift AND, reduce by rule 165)
-+ 
-+ state 704:
-+ 
-+ 	flag : id EQ False . flagguard 
-+ 
-+ 	ARCHITECTURE	reduce by rule 165
-+ 	END	reduce by rule 165
-+ 	LOCAL	reduce by rule 165
-+ 	IN	reduce by rule 165
-+ 	DATATYPE	reduce by rule 165
-+ 	TYPE	reduce by rule 165
-+ 	AND	shift 688
-+ 	RPAREN	reduce by rule 165
-+ 	SEMICOLON	reduce by rule 165
-+ 	STORAGE	reduce by rule 165
-+ 	LOCATIONS	reduce by rule 165
-+ 	BAR	reduce by rule 165
-+ 	STRUCTURE	reduce by rule 165
-+ 	FUNCTOR	reduce by rule 165
-+ 	SIGNATURE	reduce by rule 165
-+ 	SHARING	reduce by rule 165
-+ 	INSTRUCTION	reduce by rule 165
-+ 	VLIW	reduce by rule 165
-+ 	SUPERSCALAR	reduce by rule 165
-+ 	WITHTYPE	reduce by rule 165
-+ 	FUN	reduce by rule 165
-+ 	VAL	reduce by rule 165
-+ 	INCLUDE	reduce by rule 165
-+ 	OPEN	reduce by rule 165
-+ 	LITTLE	reduce by rule 165
-+ 	BIG	reduce by rule 165
-+ 	PIPELINE	reduce by rule 165
-+ 	LOWERCASE	reduce by rule 165
-+ 	UPPERCASE	reduce by rule 165
-+ 	VERBATIM	reduce by rule 165
-+ 	RTL	reduce by rule 165
-+ 	SPAN	reduce by rule 165
-+ 	DELAYSLOT	reduce by rule 165
-+ 	NONFIX	reduce by rule 165
-+ 	INFIX	reduce by rule 165
-+ 	INFIXR	reduce by rule 165
-+ 	DEBUG	reduce by rule 165
-+ 	DELAYSLOT_COLON	reduce by rule 165
-+ 	NULLIFIED_COLON	reduce by rule 165
-+ 	RESOURCE	reduce by rule 165
-+ 	CPU	reduce by rule 165
-+ 	LATENCY	reduce by rule 165
-+ 	EXCEPTION	reduce by rule 165
-+ 	EOF	reduce by rule 165
-+ 
-+ 	flagguard	goto 715
-+ 
-+ 	.	error
-+ 
-+ error:  state 705: shift/reduce conflict (shift AND, reduce by rule 165)
-+ 
-+ state 705:
-+ 
-+ 	flag : id EQ True . flagguard 
-+ 
-+ 	ARCHITECTURE	reduce by rule 165
-+ 	END	reduce by rule 165
-+ 	LOCAL	reduce by rule 165
-+ 	IN	reduce by rule 165
-+ 	DATATYPE	reduce by rule 165
-+ 	TYPE	reduce by rule 165
-+ 	AND	shift 688
-+ 	RPAREN	reduce by rule 165
-+ 	SEMICOLON	reduce by rule 165
-+ 	STORAGE	reduce by rule 165
-+ 	LOCATIONS	reduce by rule 165
-+ 	BAR	reduce by rule 165
-+ 	STRUCTURE	reduce by rule 165
-+ 	FUNCTOR	reduce by rule 165
-+ 	SIGNATURE	reduce by rule 165
-+ 	SHARING	reduce by rule 165
-+ 	INSTRUCTION	reduce by rule 165
-+ 	VLIW	reduce by rule 165
-+ 	SUPERSCALAR	reduce by rule 165
-+ 	WITHTYPE	reduce by rule 165
-+ 	FUN	reduce by rule 165
-+ 	VAL	reduce by rule 165
-+ 	INCLUDE	reduce by rule 165
-+ 	OPEN	reduce by rule 165
-+ 	LITTLE	reduce by rule 165
-+ 	BIG	reduce by rule 165
-+ 	PIPELINE	reduce by rule 165
-+ 	LOWERCASE	reduce by rule 165
-+ 	UPPERCASE	reduce by rule 165
-+ 	VERBATIM	reduce by rule 165
-+ 	RTL	reduce by rule 165
-+ 	SPAN	reduce by rule 165
-+ 	DELAYSLOT	reduce by rule 165
-+ 	NONFIX	reduce by rule 165
-+ 	INFIX	reduce by rule 165
-+ 	INFIXR	reduce by rule 165
-+ 	DEBUG	reduce by rule 165
-+ 	DELAYSLOT_COLON	reduce by rule 165
-+ 	NULLIFIED_COLON	reduce by rule 165
-+ 	RESOURCE	reduce by rule 165
-+ 	CPU	reduce by rule 165
-+ 	LATENCY	reduce by rule 165
-+ 	EXCEPTION	reduce by rule 165
-+ 	EOF	reduce by rule 165
-+ 
-+ 	flagguard	goto 716
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 706:
-+ 
-+ 	flag : NOT id flagguard .  (reduce by rule 162)
-+ 
-+ 	ARCHITECTURE	reduce by rule 162
-+ 	END	reduce by rule 162
-+ 	LOCAL	reduce by rule 162
-+ 	IN	reduce by rule 162
-+ 	DATATYPE	reduce by rule 162
-+ 	TYPE	reduce by rule 162
-+ 	AND	reduce by rule 162
-+ 	RPAREN	reduce by rule 162
-+ 	SEMICOLON	reduce by rule 162
-+ 	STORAGE	reduce by rule 162
-+ 	LOCATIONS	reduce by rule 162
-+ 	BAR	reduce by rule 162
-+ 	STRUCTURE	reduce by rule 162
-+ 	FUNCTOR	reduce by rule 162
-+ 	SIGNATURE	reduce by rule 162
-+ 	SHARING	reduce by rule 162
-+ 	INSTRUCTION	reduce by rule 162
-+ 	VLIW	reduce by rule 162
-+ 	SUPERSCALAR	reduce by rule 162
-+ 	WITHTYPE	reduce by rule 162
-+ 	FUN	reduce by rule 162
-+ 	VAL	reduce by rule 162
-+ 	INCLUDE	reduce by rule 162
-+ 	OPEN	reduce by rule 162
-+ 	LITTLE	reduce by rule 162
-+ 	BIG	reduce by rule 162
-+ 	PIPELINE	reduce by rule 162
-+ 	LOWERCASE	reduce by rule 162
-+ 	UPPERCASE	reduce by rule 162
-+ 	VERBATIM	reduce by rule 162
-+ 	RTL	reduce by rule 162
-+ 	SPAN	reduce by rule 162
-+ 	DELAYSLOT	reduce by rule 162
-+ 	NONFIX	reduce by rule 162
-+ 	INFIX	reduce by rule 162
-+ 	INFIXR	reduce by rule 162
-+ 	DEBUG	reduce by rule 162
-+ 	DELAYSLOT_COLON	reduce by rule 162
-+ 	NULLIFIED_COLON	reduce by rule 162
-+ 	RESOURCE	reduce by rule 162
-+ 	CPU	reduce by rule 162
-+ 	LATENCY	reduce by rule 162
-+ 	EXCEPTION	reduce by rule 162
-+ 	EOF	reduce by rule 162
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 707:
-+ 
-+ 	width : int .  (reduce by rule 219)
-+ 	width : int . DOTDOT int 
-+ 
-+ 	EQ	reduce by rule 219
-+ 	RBRACE	reduce by rule 219
-+ 	COMMA	reduce by rule 219
-+ 	DOTDOT	shift 717
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 708:
-+ 
-+ 	field : fieldid COLON cnv signedness width . unsignedint_opt 
-+ 
-+ 	EQ	shift 719
-+ 	RBRACE	reduce by rule 223
-+ 	COMMA	reduce by rule 223
-+ 
-+ 	unsignedint_opt	goto 718
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 709:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount RBRACKET bitSize aliasing . defaults printcell 
-+ 
-+ 	WHERE	shift 721
-+ 	ASM_COLON	reduce by rule 404
-+ 
-+ 	defaults	goto 720
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 710:
-+ 
-+ 	aliasing : ALIASING . id 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 722
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 711:
-+ 
-+ 	bitSize : OF int . aggregable BITS 
-+ 
-+ 	BITS	reduce by rule 384
-+ 	AGGREGABLE	shift 724
-+ 
-+ 	aggregable	goto 723
-+ 
-+ 	.	error
-+ 
-+ error:  state 712: shift/reduce conflict (shift LATENCY, reduce by rule 146)
-+ 
-+ state 712:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified delayslot delayslotcandidate sdi . latency pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 146
-+ 	END	reduce by rule 146
-+ 	LOCAL	reduce by rule 146
-+ 	IN	reduce by rule 146
-+ 	DATATYPE	reduce by rule 146
-+ 	TYPE	reduce by rule 146
-+ 	AND	reduce by rule 146
-+ 	RPAREN	reduce by rule 146
-+ 	SEMICOLON	reduce by rule 146
-+ 	STORAGE	reduce by rule 146
-+ 	LOCATIONS	reduce by rule 146
-+ 	BAR	reduce by rule 146
-+ 	STRUCTURE	reduce by rule 146
-+ 	FUNCTOR	reduce by rule 146
-+ 	SIGNATURE	reduce by rule 146
-+ 	SHARING	reduce by rule 146
-+ 	INSTRUCTION	reduce by rule 146
-+ 	VLIW	reduce by rule 146
-+ 	SUPERSCALAR	reduce by rule 146
-+ 	WITHTYPE	reduce by rule 146
-+ 	FUN	reduce by rule 146
-+ 	VAL	reduce by rule 146
-+ 	INCLUDE	reduce by rule 146
-+ 	OPEN	reduce by rule 146
-+ 	LITTLE	reduce by rule 146
-+ 	BIG	reduce by rule 146
-+ 	PIPELINE	reduce by rule 146
-+ 	LOWERCASE	reduce by rule 146
-+ 	UPPERCASE	reduce by rule 146
-+ 	VERBATIM	reduce by rule 146
-+ 	RTL	reduce by rule 146
-+ 	NONFIX	reduce by rule 146
-+ 	INFIX	reduce by rule 146
-+ 	INFIXR	reduce by rule 146
-+ 	DEBUG	reduce by rule 146
-+ 	RESOURCE	reduce by rule 146
-+ 	CPU	reduce by rule 146
-+ 	LATENCY	shift 726
-+ 	EXCEPTION	reduce by rule 146
-+ 	EOF	reduce by rule 146
-+ 
-+ 	latency	goto 725
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 713:
-+ 
-+ 	sdi : SPAN . DEPENDENT exp 
-+ 
-+ 	DEPENDENT	shift 727
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 714:
-+ 
-+ 	delayslotcandidate : DELAYSLOT CANDIDATE_COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 728
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 715:
-+ 
-+ 	flag : id EQ False flagguard .  (reduce by rule 164)
-+ 
-+ 	ARCHITECTURE	reduce by rule 164
-+ 	END	reduce by rule 164
-+ 	LOCAL	reduce by rule 164
-+ 	IN	reduce by rule 164
-+ 	DATATYPE	reduce by rule 164
-+ 	TYPE	reduce by rule 164
-+ 	AND	reduce by rule 164
-+ 	RPAREN	reduce by rule 164
-+ 	SEMICOLON	reduce by rule 164
-+ 	STORAGE	reduce by rule 164
-+ 	LOCATIONS	reduce by rule 164
-+ 	BAR	reduce by rule 164
-+ 	STRUCTURE	reduce by rule 164
-+ 	FUNCTOR	reduce by rule 164
-+ 	SIGNATURE	reduce by rule 164
-+ 	SHARING	reduce by rule 164
-+ 	INSTRUCTION	reduce by rule 164
-+ 	VLIW	reduce by rule 164
-+ 	SUPERSCALAR	reduce by rule 164
-+ 	WITHTYPE	reduce by rule 164
-+ 	FUN	reduce by rule 164
-+ 	VAL	reduce by rule 164
-+ 	INCLUDE	reduce by rule 164
-+ 	OPEN	reduce by rule 164
-+ 	LITTLE	reduce by rule 164
-+ 	BIG	reduce by rule 164
-+ 	PIPELINE	reduce by rule 164
-+ 	LOWERCASE	reduce by rule 164
-+ 	UPPERCASE	reduce by rule 164
-+ 	VERBATIM	reduce by rule 164
-+ 	RTL	reduce by rule 164
-+ 	SPAN	reduce by rule 164
-+ 	DELAYSLOT	reduce by rule 164
-+ 	NONFIX	reduce by rule 164
-+ 	INFIX	reduce by rule 164
-+ 	INFIXR	reduce by rule 164
-+ 	DEBUG	reduce by rule 164
-+ 	DELAYSLOT_COLON	reduce by rule 164
-+ 	NULLIFIED_COLON	reduce by rule 164
-+ 	RESOURCE	reduce by rule 164
-+ 	CPU	reduce by rule 164
-+ 	LATENCY	reduce by rule 164
-+ 	EXCEPTION	reduce by rule 164
-+ 	EOF	reduce by rule 164
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 716:
-+ 
-+ 	flag : id EQ True flagguard .  (reduce by rule 163)
-+ 
-+ 	ARCHITECTURE	reduce by rule 163
-+ 	END	reduce by rule 163
-+ 	LOCAL	reduce by rule 163
-+ 	IN	reduce by rule 163
-+ 	DATATYPE	reduce by rule 163
-+ 	TYPE	reduce by rule 163
-+ 	AND	reduce by rule 163
-+ 	RPAREN	reduce by rule 163
-+ 	SEMICOLON	reduce by rule 163
-+ 	STORAGE	reduce by rule 163
-+ 	LOCATIONS	reduce by rule 163
-+ 	BAR	reduce by rule 163
-+ 	STRUCTURE	reduce by rule 163
-+ 	FUNCTOR	reduce by rule 163
-+ 	SIGNATURE	reduce by rule 163
-+ 	SHARING	reduce by rule 163
-+ 	INSTRUCTION	reduce by rule 163
-+ 	VLIW	reduce by rule 163
-+ 	SUPERSCALAR	reduce by rule 163
-+ 	WITHTYPE	reduce by rule 163
-+ 	FUN	reduce by rule 163
-+ 	VAL	reduce by rule 163
-+ 	INCLUDE	reduce by rule 163
-+ 	OPEN	reduce by rule 163
-+ 	LITTLE	reduce by rule 163
-+ 	BIG	reduce by rule 163
-+ 	PIPELINE	reduce by rule 163
-+ 	LOWERCASE	reduce by rule 163
-+ 	UPPERCASE	reduce by rule 163
-+ 	VERBATIM	reduce by rule 163
-+ 	RTL	reduce by rule 163
-+ 	SPAN	reduce by rule 163
-+ 	DELAYSLOT	reduce by rule 163
-+ 	NONFIX	reduce by rule 163
-+ 	INFIX	reduce by rule 163
-+ 	INFIXR	reduce by rule 163
-+ 	DEBUG	reduce by rule 163
-+ 	DELAYSLOT_COLON	reduce by rule 163
-+ 	NULLIFIED_COLON	reduce by rule 163
-+ 	RESOURCE	reduce by rule 163
-+ 	CPU	reduce by rule 163
-+ 	LATENCY	reduce by rule 163
-+ 	EXCEPTION	reduce by rule 163
-+ 	EOF	reduce by rule 163
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 717:
-+ 
-+ 	width : int DOTDOT . int 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 729
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 718:
-+ 
-+ 	field : fieldid COLON cnv signedness width unsignedint_opt .  (reduce by rule 211)
-+ 
-+ 	RBRACE	reduce by rule 211
-+ 	COMMA	reduce by rule 211
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 719:
-+ 
-+ 	unsignedint_opt : EQ . unsignedint 
-+ 
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 
-+ 	word	goto 466
-+ 	unsignedint	goto 730
-+ 	int	goto 464
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 720:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount RBRACKET bitSize aliasing defaults . printcell 
-+ 
-+ 	ASM_COLON	shift 732
-+ 
-+ 	printcell	goto 731
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 721:
-+ 
-+ 	defaults : WHERE . default_list 
-+ 
-+ 	DOLLAR	shift 735
-+ 
-+ 	default	goto 734
-+ 	default_list	goto 733
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 722:
-+ 
-+ 	aliasing : ALIASING id .  (reduce by rule 401)
-+ 
-+ 	WHERE	reduce by rule 401
-+ 	ASM_COLON	reduce by rule 401
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 723:
-+ 
-+ 	bitSize : OF int aggregable . BITS 
-+ 
-+ 	BITS	shift 736
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 724:
-+ 
-+ 	aggregable : AGGREGABLE .  (reduce by rule 385)
-+ 
-+ 	BITS	reduce by rule 385
-+ 
-+ 
-+ 	.	error
-+ 
-+ error:  state 725: shift/reduce conflict (shift PIPELINE, reduce by rule 148)
-+ 
-+ state 725:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified delayslot delayslotcandidate sdi latency . pipeline 
-+ 
-+ 	ARCHITECTURE	reduce by rule 148
-+ 	END	reduce by rule 148
-+ 	LOCAL	reduce by rule 148
-+ 	IN	reduce by rule 148
-+ 	DATATYPE	reduce by rule 148
-+ 	TYPE	reduce by rule 148
-+ 	AND	reduce by rule 148
-+ 	RPAREN	reduce by rule 148
-+ 	SEMICOLON	reduce by rule 148
-+ 	STORAGE	reduce by rule 148
-+ 	LOCATIONS	reduce by rule 148
-+ 	BAR	reduce by rule 148
-+ 	STRUCTURE	reduce by rule 148
-+ 	FUNCTOR	reduce by rule 148
-+ 	SIGNATURE	reduce by rule 148
-+ 	SHARING	reduce by rule 148
-+ 	INSTRUCTION	reduce by rule 148
-+ 	VLIW	reduce by rule 148
-+ 	SUPERSCALAR	reduce by rule 148
-+ 	WITHTYPE	reduce by rule 148
-+ 	FUN	reduce by rule 148
-+ 	VAL	reduce by rule 148
-+ 	INCLUDE	reduce by rule 148
-+ 	OPEN	reduce by rule 148
-+ 	LITTLE	reduce by rule 148
-+ 	BIG	reduce by rule 148
-+ 	PIPELINE	shift 738
-+ 	LOWERCASE	reduce by rule 148
-+ 	UPPERCASE	reduce by rule 148
-+ 	VERBATIM	reduce by rule 148
-+ 	RTL	reduce by rule 148
-+ 	NONFIX	reduce by rule 148
-+ 	INFIX	reduce by rule 148
-+ 	INFIXR	reduce by rule 148
-+ 	DEBUG	reduce by rule 148
-+ 	RESOURCE	reduce by rule 148
-+ 	CPU	reduce by rule 148
-+ 	LATENCY	reduce by rule 148
-+ 	EXCEPTION	reduce by rule 148
-+ 	EOF	reduce by rule 148
-+ 
-+ 	pipeline	goto 737
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 726:
-+ 
-+ 	latency : LATENCY . COLON exp 
-+ 
-+ 	COLON	shift 739
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 727:
-+ 
-+ 	sdi : SPAN DEPENDENT . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 740
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 728:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	delayslotcandidate : DELAYSLOT CANDIDATE_COLON exp .  (reduce by rule 150)
-+ 
-+ 	ARCHITECTURE	reduce by rule 150
-+ 	END	reduce by rule 150
-+ 	LOCAL	reduce by rule 150
-+ 	IN	reduce by rule 150
-+ 	DATATYPE	reduce by rule 150
-+ 	TYPE	reduce by rule 150
-+ 	AND	reduce by rule 150
-+ 	RPAREN	reduce by rule 150
-+ 	SEMICOLON	reduce by rule 150
-+ 	STORAGE	reduce by rule 150
-+ 	LOCATIONS	reduce by rule 150
-+ 	BAR	reduce by rule 150
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 150
-+ 	FUNCTOR	reduce by rule 150
-+ 	SIGNATURE	reduce by rule 150
-+ 	SHARING	reduce by rule 150
-+ 	INSTRUCTION	reduce by rule 150
-+ 	VLIW	reduce by rule 150
-+ 	SUPERSCALAR	reduce by rule 150
-+ 	WITHTYPE	reduce by rule 150
-+ 	FUN	reduce by rule 150
-+ 	VAL	reduce by rule 150
-+ 	INCLUDE	reduce by rule 150
-+ 	OPEN	reduce by rule 150
-+ 	LITTLE	reduce by rule 150
-+ 	BIG	reduce by rule 150
-+ 	PIPELINE	reduce by rule 150
-+ 	LOWERCASE	reduce by rule 150
-+ 	UPPERCASE	reduce by rule 150
-+ 	VERBATIM	reduce by rule 150
-+ 	RTL	reduce by rule 150
-+ 	SPAN	reduce by rule 150
-+ 	NONFIX	reduce by rule 150
-+ 	INFIX	reduce by rule 150
-+ 	INFIXR	reduce by rule 150
-+ 	DEBUG	reduce by rule 150
-+ 	RESOURCE	reduce by rule 150
-+ 	CPU	reduce by rule 150
-+ 	LATENCY	reduce by rule 150
-+ 	EXCEPTION	reduce by rule 150
-+ 	EOF	reduce by rule 150
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 729:
-+ 
-+ 	width : int DOTDOT int .  (reduce by rule 220)
-+ 
-+ 	EQ	reduce by rule 220
-+ 	RBRACE	reduce by rule 220
-+ 	COMMA	reduce by rule 220
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 730:
-+ 
-+ 	unsignedint_opt : EQ unsignedint .  (reduce by rule 224)
-+ 
-+ 	RBRACE	reduce by rule 224
-+ 	COMMA	reduce by rule 224
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 731:
-+ 
-+ 	storagedecl : id EQ DOLLAR id LBRACKET cellcount RBRACKET bitSize aliasing defaults printcell .  (reduce by rule 383)
-+ 
-+ 	ARCHITECTURE	reduce by rule 383
-+ 	END	reduce by rule 383
-+ 	LOCAL	reduce by rule 383
-+ 	IN	reduce by rule 383
-+ 	DATATYPE	reduce by rule 383
-+ 	TYPE	reduce by rule 383
-+ 	RPAREN	reduce by rule 383
-+ 	SEMICOLON	reduce by rule 383
-+ 	STORAGE	reduce by rule 383
-+ 	LOCATIONS	reduce by rule 383
-+ 	BAR	reduce by rule 383
-+ 	STRUCTURE	reduce by rule 383
-+ 	FUNCTOR	reduce by rule 383
-+ 	SIGNATURE	reduce by rule 383
-+ 	SHARING	reduce by rule 383
-+ 	INSTRUCTION	reduce by rule 383
-+ 	VLIW	reduce by rule 383
-+ 	SUPERSCALAR	reduce by rule 383
-+ 	FUN	reduce by rule 383
-+ 	VAL	reduce by rule 383
-+ 	INCLUDE	reduce by rule 383
-+ 	OPEN	reduce by rule 383
-+ 	LITTLE	reduce by rule 383
-+ 	BIG	reduce by rule 383
-+ 	PIPELINE	reduce by rule 383
-+ 	LOWERCASE	reduce by rule 383
-+ 	UPPERCASE	reduce by rule 383
-+ 	VERBATIM	reduce by rule 383
-+ 	RTL	reduce by rule 383
-+ 	NONFIX	reduce by rule 383
-+ 	INFIX	reduce by rule 383
-+ 	INFIXR	reduce by rule 383
-+ 	DEBUG	reduce by rule 383
-+ 	RESOURCE	reduce by rule 383
-+ 	CPU	reduce by rule 383
-+ 	LATENCY	reduce by rule 383
-+ 	EXCEPTION	reduce by rule 383
-+ 	EOF	reduce by rule 383
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 732:
-+ 
-+ 	printcell : ASM_COLON . string 
-+ 	printcell : ASM_COLON . LPAREN exp RPAREN 
-+ 
-+ 	LPAREN	shift 742
-+ 	STRING	shift 91
-+ 
-+ 	string	goto 741
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 733:
-+ 
-+ 	defaults : WHERE default_list .  (reduce by rule 405)
-+ 
-+ 	ASM_COLON	reduce by rule 405
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 734:
-+ 
-+ 	default_list : default .  (reduce by rule 406)
-+ 	default_list : default . AND default_list 
-+ 
-+ 	AND	shift 743
-+ 	ASM_COLON	reduce by rule 406
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 735:
-+ 
-+ 	default : DOLLAR . id LBRACKET int RBRACKET EQ exp 
-+ 
-+ 	CELLSET	shift 50
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 
-+ 	id	goto 744
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 736:
-+ 
-+ 	bitSize : OF int aggregable BITS .  (reduce by rule 386)
-+ 
-+ 	WHERE	reduce by rule 386
-+ 	ASM_COLON	reduce by rule 386
-+ 	ALIASING	reduce by rule 386
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 737:
-+ 
-+ 	consbind : sym of_ty consassembly consencoding rtl nop nullified delayslot delayslotcandidate sdi latency pipeline .  (reduce by rule 144)
-+ 
-+ 	ARCHITECTURE	reduce by rule 144
-+ 	END	reduce by rule 144
-+ 	LOCAL	reduce by rule 144
-+ 	IN	reduce by rule 144
-+ 	DATATYPE	reduce by rule 144
-+ 	TYPE	reduce by rule 144
-+ 	AND	reduce by rule 144
-+ 	RPAREN	reduce by rule 144
-+ 	SEMICOLON	reduce by rule 144
-+ 	STORAGE	reduce by rule 144
-+ 	LOCATIONS	reduce by rule 144
-+ 	BAR	reduce by rule 144
-+ 	STRUCTURE	reduce by rule 144
-+ 	FUNCTOR	reduce by rule 144
-+ 	SIGNATURE	reduce by rule 144
-+ 	SHARING	reduce by rule 144
-+ 	INSTRUCTION	reduce by rule 144
-+ 	VLIW	reduce by rule 144
-+ 	SUPERSCALAR	reduce by rule 144
-+ 	WITHTYPE	reduce by rule 144
-+ 	FUN	reduce by rule 144
-+ 	VAL	reduce by rule 144
-+ 	INCLUDE	reduce by rule 144
-+ 	OPEN	reduce by rule 144
-+ 	LITTLE	reduce by rule 144
-+ 	BIG	reduce by rule 144
-+ 	PIPELINE	reduce by rule 144
-+ 	LOWERCASE	reduce by rule 144
-+ 	UPPERCASE	reduce by rule 144
-+ 	VERBATIM	reduce by rule 144
-+ 	RTL	reduce by rule 144
-+ 	NONFIX	reduce by rule 144
-+ 	INFIX	reduce by rule 144
-+ 	INFIXR	reduce by rule 144
-+ 	DEBUG	reduce by rule 144
-+ 	RESOURCE	reduce by rule 144
-+ 	CPU	reduce by rule 144
-+ 	LATENCY	reduce by rule 144
-+ 	EXCEPTION	reduce by rule 144
-+ 	EOF	reduce by rule 144
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 738:
-+ 
-+ 	pipeline : PIPELINE . COLON exp 
-+ 
-+ 	COLON	shift 745
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 739:
-+ 
-+ 	latency : LATENCY COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 746
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 740:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	sdi : SPAN DEPENDENT exp .  (reduce by rule 175)
-+ 
-+ 	ARCHITECTURE	reduce by rule 175
-+ 	END	reduce by rule 175
-+ 	LOCAL	reduce by rule 175
-+ 	IN	reduce by rule 175
-+ 	DATATYPE	reduce by rule 175
-+ 	TYPE	reduce by rule 175
-+ 	AND	reduce by rule 175
-+ 	RPAREN	reduce by rule 175
-+ 	SEMICOLON	reduce by rule 175
-+ 	STORAGE	reduce by rule 175
-+ 	LOCATIONS	reduce by rule 175
-+ 	BAR	reduce by rule 175
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 175
-+ 	FUNCTOR	reduce by rule 175
-+ 	SIGNATURE	reduce by rule 175
-+ 	SHARING	reduce by rule 175
-+ 	INSTRUCTION	reduce by rule 175
-+ 	VLIW	reduce by rule 175
-+ 	SUPERSCALAR	reduce by rule 175
-+ 	WITHTYPE	reduce by rule 175
-+ 	FUN	reduce by rule 175
-+ 	VAL	reduce by rule 175
-+ 	INCLUDE	reduce by rule 175
-+ 	OPEN	reduce by rule 175
-+ 	LITTLE	reduce by rule 175
-+ 	BIG	reduce by rule 175
-+ 	PIPELINE	reduce by rule 175
-+ 	LOWERCASE	reduce by rule 175
-+ 	UPPERCASE	reduce by rule 175
-+ 	VERBATIM	reduce by rule 175
-+ 	RTL	reduce by rule 175
-+ 	NONFIX	reduce by rule 175
-+ 	INFIX	reduce by rule 175
-+ 	INFIXR	reduce by rule 175
-+ 	DEBUG	reduce by rule 175
-+ 	RESOURCE	reduce by rule 175
-+ 	CPU	reduce by rule 175
-+ 	LATENCY	reduce by rule 175
-+ 	EXCEPTION	reduce by rule 175
-+ 	EOF	reduce by rule 175
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 741:
-+ 
-+ 	printcell : ASM_COLON string .  (reduce by rule 402)
-+ 
-+ 	ARCHITECTURE	reduce by rule 402
-+ 	END	reduce by rule 402
-+ 	LOCAL	reduce by rule 402
-+ 	IN	reduce by rule 402
-+ 	DATATYPE	reduce by rule 402
-+ 	TYPE	reduce by rule 402
-+ 	RPAREN	reduce by rule 402
-+ 	SEMICOLON	reduce by rule 402
-+ 	STORAGE	reduce by rule 402
-+ 	LOCATIONS	reduce by rule 402
-+ 	BAR	reduce by rule 402
-+ 	STRUCTURE	reduce by rule 402
-+ 	FUNCTOR	reduce by rule 402
-+ 	SIGNATURE	reduce by rule 402
-+ 	SHARING	reduce by rule 402
-+ 	INSTRUCTION	reduce by rule 402
-+ 	VLIW	reduce by rule 402
-+ 	SUPERSCALAR	reduce by rule 402
-+ 	FUN	reduce by rule 402
-+ 	VAL	reduce by rule 402
-+ 	INCLUDE	reduce by rule 402
-+ 	OPEN	reduce by rule 402
-+ 	LITTLE	reduce by rule 402
-+ 	BIG	reduce by rule 402
-+ 	PIPELINE	reduce by rule 402
-+ 	LOWERCASE	reduce by rule 402
-+ 	UPPERCASE	reduce by rule 402
-+ 	VERBATIM	reduce by rule 402
-+ 	RTL	reduce by rule 402
-+ 	NONFIX	reduce by rule 402
-+ 	INFIX	reduce by rule 402
-+ 	INFIXR	reduce by rule 402
-+ 	DEBUG	reduce by rule 402
-+ 	RESOURCE	reduce by rule 402
-+ 	CPU	reduce by rule 402
-+ 	LATENCY	reduce by rule 402
-+ 	EXCEPTION	reduce by rule 402
-+ 	EOF	reduce by rule 402
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 742:
-+ 
-+ 	printcell : ASM_COLON LPAREN . exp RPAREN 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 747
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 743:
-+ 
-+ 	default_list : default AND . default_list 
-+ 
-+ 	DOLLAR	shift 735
-+ 
-+ 	default	goto 734
-+ 	default_list	goto 748
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 744:
-+ 
-+ 	default : DOLLAR id . LBRACKET int RBRACKET EQ exp 
-+ 
-+ 	LBRACKET	shift 749
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 745:
-+ 
-+ 	pipeline : PIPELINE COLON . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 750
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 746:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	latency : LATENCY COLON exp .  (reduce by rule 145)
-+ 
-+ 	ARCHITECTURE	reduce by rule 145
-+ 	END	reduce by rule 145
-+ 	LOCAL	reduce by rule 145
-+ 	IN	reduce by rule 145
-+ 	DATATYPE	reduce by rule 145
-+ 	TYPE	reduce by rule 145
-+ 	AND	reduce by rule 145
-+ 	RPAREN	reduce by rule 145
-+ 	SEMICOLON	reduce by rule 145
-+ 	STORAGE	reduce by rule 145
-+ 	LOCATIONS	reduce by rule 145
-+ 	BAR	reduce by rule 145
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 145
-+ 	FUNCTOR	reduce by rule 145
-+ 	SIGNATURE	reduce by rule 145
-+ 	SHARING	reduce by rule 145
-+ 	INSTRUCTION	reduce by rule 145
-+ 	VLIW	reduce by rule 145
-+ 	SUPERSCALAR	reduce by rule 145
-+ 	WITHTYPE	reduce by rule 145
-+ 	FUN	reduce by rule 145
-+ 	VAL	reduce by rule 145
-+ 	INCLUDE	reduce by rule 145
-+ 	OPEN	reduce by rule 145
-+ 	LITTLE	reduce by rule 145
-+ 	BIG	reduce by rule 145
-+ 	PIPELINE	reduce by rule 145
-+ 	LOWERCASE	reduce by rule 145
-+ 	UPPERCASE	reduce by rule 145
-+ 	VERBATIM	reduce by rule 145
-+ 	RTL	reduce by rule 145
-+ 	NONFIX	reduce by rule 145
-+ 	INFIX	reduce by rule 145
-+ 	INFIXR	reduce by rule 145
-+ 	DEBUG	reduce by rule 145
-+ 	RESOURCE	reduce by rule 145
-+ 	CPU	reduce by rule 145
-+ 	LATENCY	reduce by rule 145
-+ 	EXCEPTION	reduce by rule 145
-+ 	EOF	reduce by rule 145
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 747:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	printcell : ASM_COLON LPAREN exp . RPAREN 
-+ 
-+ 	RPAREN	shift 751
-+ 	HANDLE	shift 402
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 748:
-+ 
-+ 	default_list : default AND default_list .  (reduce by rule 407)
-+ 
-+ 	ASM_COLON	reduce by rule 407
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 749:
-+ 
-+ 	default : DOLLAR id LBRACKET . int RBRACKET EQ exp 
-+ 
-+ 	INT	shift 64
-+ 
-+ 	int	goto 752
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 750:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	pipeline : PIPELINE COLON exp .  (reduce by rule 147)
-+ 
-+ 	ARCHITECTURE	reduce by rule 147
-+ 	END	reduce by rule 147
-+ 	LOCAL	reduce by rule 147
-+ 	IN	reduce by rule 147
-+ 	DATATYPE	reduce by rule 147
-+ 	TYPE	reduce by rule 147
-+ 	AND	reduce by rule 147
-+ 	RPAREN	reduce by rule 147
-+ 	SEMICOLON	reduce by rule 147
-+ 	STORAGE	reduce by rule 147
-+ 	LOCATIONS	reduce by rule 147
-+ 	BAR	reduce by rule 147
-+ 	HANDLE	shift 402
-+ 	STRUCTURE	reduce by rule 147
-+ 	FUNCTOR	reduce by rule 147
-+ 	SIGNATURE	reduce by rule 147
-+ 	SHARING	reduce by rule 147
-+ 	INSTRUCTION	reduce by rule 147
-+ 	VLIW	reduce by rule 147
-+ 	SUPERSCALAR	reduce by rule 147
-+ 	WITHTYPE	reduce by rule 147
-+ 	FUN	reduce by rule 147
-+ 	VAL	reduce by rule 147
-+ 	INCLUDE	reduce by rule 147
-+ 	OPEN	reduce by rule 147
-+ 	LITTLE	reduce by rule 147
-+ 	BIG	reduce by rule 147
-+ 	PIPELINE	reduce by rule 147
-+ 	LOWERCASE	reduce by rule 147
-+ 	UPPERCASE	reduce by rule 147
-+ 	VERBATIM	reduce by rule 147
-+ 	RTL	reduce by rule 147
-+ 	NONFIX	reduce by rule 147
-+ 	INFIX	reduce by rule 147
-+ 	INFIXR	reduce by rule 147
-+ 	DEBUG	reduce by rule 147
-+ 	RESOURCE	reduce by rule 147
-+ 	CPU	reduce by rule 147
-+ 	LATENCY	reduce by rule 147
-+ 	EXCEPTION	reduce by rule 147
-+ 	EOF	reduce by rule 147
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 751:
-+ 
-+ 	printcell : ASM_COLON LPAREN exp RPAREN .  (reduce by rule 403)
-+ 
-+ 	ARCHITECTURE	reduce by rule 403
-+ 	END	reduce by rule 403
-+ 	LOCAL	reduce by rule 403
-+ 	IN	reduce by rule 403
-+ 	DATATYPE	reduce by rule 403
-+ 	TYPE	reduce by rule 403
-+ 	RPAREN	reduce by rule 403
-+ 	SEMICOLON	reduce by rule 403
-+ 	STORAGE	reduce by rule 403
-+ 	LOCATIONS	reduce by rule 403
-+ 	BAR	reduce by rule 403
-+ 	STRUCTURE	reduce by rule 403
-+ 	FUNCTOR	reduce by rule 403
-+ 	SIGNATURE	reduce by rule 403
-+ 	SHARING	reduce by rule 403
-+ 	INSTRUCTION	reduce by rule 403
-+ 	VLIW	reduce by rule 403
-+ 	SUPERSCALAR	reduce by rule 403
-+ 	FUN	reduce by rule 403
-+ 	VAL	reduce by rule 403
-+ 	INCLUDE	reduce by rule 403
-+ 	OPEN	reduce by rule 403
-+ 	LITTLE	reduce by rule 403
-+ 	BIG	reduce by rule 403
-+ 	PIPELINE	reduce by rule 403
-+ 	LOWERCASE	reduce by rule 403
-+ 	UPPERCASE	reduce by rule 403
-+ 	VERBATIM	reduce by rule 403
-+ 	RTL	reduce by rule 403
-+ 	NONFIX	reduce by rule 403
-+ 	INFIX	reduce by rule 403
-+ 	INFIXR	reduce by rule 403
-+ 	DEBUG	reduce by rule 403
-+ 	RESOURCE	reduce by rule 403
-+ 	CPU	reduce by rule 403
-+ 	LATENCY	reduce by rule 403
-+ 	EXCEPTION	reduce by rule 403
-+ 	EOF	reduce by rule 403
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 752:
-+ 
-+ 	default : DOLLAR id LBRACKET int . RBRACKET EQ exp 
-+ 
-+ 	RBRACKET	shift 753
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 753:
-+ 
-+ 	default : DOLLAR id LBRACKET int RBRACKET . EQ exp 
-+ 
-+ 	EQ	shift 754
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 754:
-+ 
-+ 	default : DOLLAR id LBRACKET int RBRACKET EQ . exp 
-+ 
-+ 	CASE	shift 301
-+ 	EQ	shift 300
-+ 	DOLLAR	shift 299
-+ 	TIMES	shift 72
-+ 	DEREF	shift 71
-+ 	NOT	shift 70
-+ 	LLBRACKET	shift 298
-+ 	LHASHBRACKET	shift 297
-+ 	LPAREN	shift 296
-+ 	LBRACKET	shift 295
-+ 	LBRACE	shift 294
-+ 	LDQUOTE	shift 293
-+ 	CELLSET	shift 50
-+ 	FN	shift 292
-+ 	HASH	shift 291
-+ 	IF	shift 290
-+ 	TRUE	shift 99
-+ 	FALSE	shift 98
-+ 	RAISE	shift 289
-+ 	LET	shift 288
-+ 	OP	shift 287
-+ 	ALWAYS	shift 96
-+ 	NEVER	shift 95
-+ 	ID	shift 49
-+ 	SYMBOL	shift 48
-+ 	WORD	shift 94
-+ 	INT	shift 64
-+ 	INTINF	shift 93
-+ 	REAL	shift 92
-+ 	STRING	shift 91
-+ 	CHAR	shift 90
-+ 
-+ 	id	goto 135
-+ 	sym	goto 286
-+ 	symb	goto 67
-+ 	ident2	goto 285
-+ 	path	goto 85
-+ 	aexp	goto 284
-+ 	aexp2	goto 283
-+ 	appexp	goto 282
-+ 	exp	goto 755
-+ 	word	goto 82
-+ 	int	goto 81
-+ 	intinf	goto 80
-+ 	real	goto 79
-+ 	string	goto 78
-+ 	char	goto 77
-+ 	bool	goto 76
-+ 	literal	goto 280
-+ 	asm_strings	goto 279
-+ 	True	goto 74
-+ 	False	goto 73
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 755:
-+ 
-+ 	exp : exp . HANDLE clauses 
-+ 	default : DOLLAR id LBRACKET int RBRACKET EQ exp .  (reduce by rule 408)
-+ 
-+ 	AND	reduce by rule 408
-+ 	HANDLE	shift 402
-+ 	ASM_COLON	reduce by rule 408
-+ 
-+ 
-+ 	.	error
-+ 
-+ 
-+ state 756:
-+ 
-+ 
-+ 	EOF	accept
-+ 
-+ 
-+ 	.	error
-+ 
-+ 16352 of 19587 action table entries left after compaction
-+ 2182 goto table entries
-diff -N -C 2 -r MLRISC/aliasing/pointsTo.sig MLRISC-mlton/aliasing/pointsTo.sig
-*** MLRISC/aliasing/pointsTo.sig	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/aliasing/pointsTo.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,23 ****
-  
-     eqtype edgekind 
-!    structure C : CELLS_BASIS = CellsBasis
-  
-     datatype cell = 
-!      LINK  of region                             
-!    | SREF  of C.cell * edges ref
-!    | WREF  of C.cell * edges ref
-!    | SCELL of C.cell * edges ref
-!    | WCELL of C.cell * edges ref
-     | TOP   of {mutable:bool, id:C.cell, name:string}
-        (* a collapsed node *)
-!    withtype region = cell ref
-!    and      edges  = (edgekind * int * region) list
-  
-     val reset    : (unit -> C.cell) -> unit
---- 8,32 ----
-  
-     eqtype edgekind 
-!    structure C : CELLS_BASIS (* = CellsBasis *)
-!                  where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                    and type cell = CellsBasis.cell
-!                    and type cellColor = CellsBasis.cellColor
-!                    and type cellkind = CellsBasis.cellkind
-!                    and type cellkindDesc = CellsBasis.cellkindDesc
-!                    and type cellkindInfo = CellsBasis.cellkindInfo
-  
-     datatype cell = 
-!      LINK  of cell ref
-!    | SREF  of C.cell * (edgekind * int * cell ref) list ref
-!    | WREF  of C.cell * (edgekind * int * cell ref) list ref
-!    | SCELL of C.cell * (edgekind * int * cell ref) list ref
-!    | WCELL of C.cell * (edgekind * int * cell ref) list ref
-     | TOP   of {mutable:bool, id:C.cell, name:string}
-        (* a collapsed node *)
-!    type region = cell ref
-!    type edges  = (edgekind * int * region) list
-  
-     val reset    : (unit -> C.cell) -> unit
-diff -N -C 2 -r MLRISC/aliasing/pointsTo.sml MLRISC-mlton/aliasing/pointsTo.sml
-*** MLRISC/aliasing/pointsTo.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/aliasing/pointsTo.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 11,24 ****
-  
-     datatype cell = 
-!      LINK  of region
-!    | SREF  of C.cell * edges ref
-!    | WREF  of C.cell * edges ref
-!    | SCELL of C.cell * edges ref
-!    | WCELL of C.cell * edges ref
-     | TOP   of {mutable:bool, id:C.cell, name:string}
-        (* a collapsed node *)
-! 
-!    withtype region = cell ref
-!    and      edges  = (edgekind * int * region) list
-  
-     fun error msg = MLRiscErrorMsg.error("PointsTo",msg)
---- 11,23 ----
-  
-     datatype cell = 
-!      LINK  of cell ref
-!    | SREF  of C.cell * (edgekind * int * cell ref) list ref
-!    | WREF  of C.cell * (edgekind * int * cell ref) list ref
-!    | SCELL of C.cell * (edgekind * int * cell ref) list ref
-!    | WCELL of C.cell * (edgekind * int * cell ref) list ref
-     | TOP   of {mutable:bool, id:C.cell, name:string}
-        (* a collapsed node *)
-!    type region = cell ref
-!    type edges  = (edgekind * int * region) list
-  
-     fun error msg = MLRiscErrorMsg.error("PointsTo",msg)
-***************
-*** 27,33 ****
-     fun greaterKind(PI,_) = false   
-       | greaterKind(DOM,PI) = false
-!      | greaterKind(RAN,(PI | DOM)) = false
-!      | greaterKind(RECORD,(PI | DOM | RAN)) = false
-!      | greaterKind(MARK,(PI | DOM | RAN | RECORD)) = false
-       | greaterKind _ = true
-  
---- 26,38 ----
-     fun greaterKind(PI,_) = false   
-       | greaterKind(DOM,PI) = false
-!      | greaterKind(RAN,PI) = false
-!      | greaterKind(RAN,DOM) = false
-!      | greaterKind(RECORD,PI) = false
-!      | greaterKind(RECORD,DOM) = false
-!      | greaterKind(RECORD,RAN) = false
-!      | greaterKind(MARK,PI) = false
-!      | greaterKind(MARK,DOM) = false
-!      | greaterKind(MARK,RAN) = false
-!      | greaterKind(MARK,RECORD) = false
-       | greaterKind _ = true
-  
-diff -N -C 2 -r MLRISC/alpha/backpatch/alphaJumps.sml MLRISC-mlton/alpha/backpatch/alphaJumps.sml
-*** MLRISC/alpha/backpatch/alphaJumps.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/alpha/backpatch/alphaJumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,13 ****
-  functor AlphaJumps
-    (structure Instr : ALPHAINSTR
-!    structure Shuffle : ALPHASHUFFLE 
-! 			   where I = Instr
-!    structure MLTreeEval : MLTREE_EVAL 
-! 			   where T = Instr.T
-    ) : SDI_JUMPS = 
-  struct
---- 6,70 ----
-  functor AlphaJumps
-    (structure Instr : ALPHAINSTR
-!    structure Shuffle : ALPHASHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          and type I.branch = Instr.branch
-!                          and type I.cmove = Instr.cmove
-!                          and type I.ea = Instr.ea
-!                          and type I.fbranch = Instr.fbranch
-!                          and type I.fcmove = Instr.fcmove
-!                          and type I.fload = Instr.fload
-!                          and type I.foperate = Instr.foperate
-!                          and type I.foperateV = Instr.foperateV
-!                          and type I.fstore = Instr.fstore
-!                          and type I.funary = Instr.funary
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.load = Instr.load
-!                          and type I.operand = Instr.operand
-!                          and type I.operate = Instr.operate
-!                          and type I.operateV = Instr.operateV
-!                          and type I.osf_user_palcode = Instr.osf_user_palcode
-!                          and type I.pseudo_op = Instr.pseudo_op
-!                          and type I.store = Instr.store
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-    ) : SDI_JUMPS = 
-  struct
-diff -N -C 2 -r MLRISC/alpha/emit/alphaAsm.sml MLRISC-mlton/alpha/emit/alphaAsm.sml
-*** MLRISC/alpha/emit/alphaAsm.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/emit/alphaAsm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,16 ****
-  
-  functor AlphaAsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : ALPHAINSTR
-!                            where T = S.P.T
-!                         structure Shuffle : ALPHASHUFFLE
-!                            where I = Instr
-!                         structure MLTreeEval : MLTREE_EVAL
-!                            where T = Instr.T
-                         ) : INSTRUCTION_EMITTER =
-  struct
---- 7,92 ----
-  
-  functor AlphaAsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : ALPHAINSTR (* where T = S.P.T *)
-!                                           where type T.Basis.cond = S.P.T.Basis.cond
-!                                             and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                             and type T.Basis.ext = S.P.T.Basis.ext
-!                                             and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                             and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                             and type T.Constant.const = S.P.T.Constant.const
-!                                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                             and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                             and type T.Region.region = S.P.T.Region.region
-!                                             and type T.ccexp = S.P.T.ccexp
-!                                             and type T.fexp = S.P.T.fexp
-!                                             (* and type T.labexp = S.P.T.labexp *)
-!                                             and type T.mlrisc = S.P.T.mlrisc
-!                                             and type T.oper = S.P.T.oper
-!                                             and type T.rep = S.P.T.rep
-!                                             and type T.rexp = S.P.T.rexp
-!                                             and type T.stm = S.P.T.stm
-!                         structure Shuffle : ALPHASHUFFLE (* where I = Instr *)
-!                                             where type I.Constant.const = Instr.Constant.const
-!                                               and type I.Region.region = Instr.Region.region
-!                                               and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                               and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                               and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                               and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                               and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                               and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                               and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                               and type I.T.ccexp = Instr.T.ccexp
-!                                               and type I.T.fexp = Instr.T.fexp
-!                                               (* and type I.T.labexp = Instr.T.labexp *)
-!                                               and type I.T.mlrisc = Instr.T.mlrisc
-!                                               and type I.T.oper = Instr.T.oper
-!                                               and type I.T.rep = Instr.T.rep
-!                                               and type I.T.rexp = Instr.T.rexp
-!                                               and type I.T.stm = Instr.T.stm
-!                                               and type I.branch = Instr.branch
-!                                               and type I.cmove = Instr.cmove
-!                                               and type I.ea = Instr.ea
-!                                               and type I.fbranch = Instr.fbranch
-!                                               and type I.fcmove = Instr.fcmove
-!                                               and type I.fload = Instr.fload
-!                                               and type I.foperate = Instr.foperate
-!                                               and type I.foperateV = Instr.foperateV
-!                                               and type I.fstore = Instr.fstore
-!                                               and type I.funary = Instr.funary
-!                                               and type I.instr = Instr.instr
-!                                               and type I.instruction = Instr.instruction
-!                                               and type I.load = Instr.load
-!                                               and type I.operand = Instr.operand
-!                                               and type I.operate = Instr.operate
-!                                               and type I.operateV = Instr.operateV
-!                                               and type I.osf_user_palcode = Instr.osf_user_palcode
-!                                               and type I.pseudo_op = Instr.pseudo_op
-!                                               and type I.store = Instr.store
-!                         structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                                where type T.Basis.cond = Instr.T.Basis.cond
-!                                                  and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                  and type T.Basis.ext = Instr.T.Basis.ext
-!                                                  and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                  and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                  and type T.Constant.const = Instr.T.Constant.const
-!                                                  and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                  and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                  and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                  and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                  and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                  and type T.Region.region = Instr.T.Region.region
-!                                                  and type T.ccexp = Instr.T.ccexp
-!                                                  and type T.fexp = Instr.T.fexp
-!                                                  (* and type T.labexp = Instr.T.labexp *)
-!                                                  and type T.mlrisc = Instr.T.mlrisc
-!                                                  and type T.oper = Instr.T.oper
-!                                                  and type T.rep = Instr.T.rep
-!                                                  and type T.rexp = Instr.T.rexp
-!                                                  and type T.stm = Instr.T.stm
-                         ) : INSTRUCTION_EMITTER =
-  struct
-diff -N -C 2 -r MLRISC/alpha/emit/alphaMC.sml MLRISC-mlton/alpha/emit/alphaMC.sml
-*** MLRISC/alpha/emit/alphaMC.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/emit/alphaMC.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,11 ****
-  
-  functor AlphaMCEmitter(structure Instr : ALPHAINSTR
-!                        structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-                         structure Stream : INSTRUCTION_STREAM 
-                         structure CodeString : CODE_STRING
---- 7,31 ----
-  
-  functor AlphaMCEmitter(structure Instr : ALPHAINSTR
-!                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                               where type T.Basis.cond = Instr.T.Basis.cond
-!                                                 and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                 and type T.Basis.ext = Instr.T.Basis.ext
-!                                                 and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                 and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                 and type T.Constant.const = Instr.T.Constant.const
-!                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                 and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                 and type T.Region.region = Instr.T.Region.region
-!                                                 and type T.ccexp = Instr.T.ccexp
-!                                                 and type T.fexp = Instr.T.fexp
-!                                                 (* and type T.labexp = Instr.T.labexp *)
-!                                                 and type T.mlrisc = Instr.T.mlrisc
-!                                                 and type T.oper = Instr.T.oper
-!                                                 and type T.rep = Instr.T.rep
-!                                                 and type T.rexp = Instr.T.rexp
-!                                                 and type T.stm = Instr.T.stm
-                         structure Stream : INSTRUCTION_STREAM 
-                         structure CodeString : CODE_STRING
-***************
-*** 48,51 ****
---- 68,72 ----
-         fun eByteW w =
-         let val i = !loc
-+            val w = W.toLargeWord w
-         in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
-     
-diff -N -C 2 -r MLRISC/alpha/flowgraph/alphaGasPseudoOps.sml MLRISC-mlton/alpha/flowgraph/alphaGasPseudoOps.sml
-*** MLRISC/alpha/flowgraph/alphaGasPseudoOps.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/flowgraph/alphaGasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  functor AlphaGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL  where T = T
-      ) : PSEUDO_OPS_BASIS = 
-  
---- 1,25 ----
-  functor AlphaGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-      ) : PSEUDO_OPS_BASIS = 
-  
-diff -N -C 2 -r MLRISC/alpha/instructions/alphaInstr.sml MLRISC-mlton/alpha/instructions/alphaInstr.sml
-*** MLRISC/alpha/instructions/alphaInstr.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/instructions/alphaInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : ALPHACELLS
-!    structure CB : CELLS_BASIS = CellsBasis
-     structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : ALPHACELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     structure T : MLTREE
-     structure Constant: CONSTANT
-diff -N -C 2 -r MLRISC/alpha/instructions/alphaProps.sml MLRISC-mlton/alpha/instructions/alphaProps.sml
-*** MLRISC/alpha/instructions/alphaProps.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/instructions/alphaProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,12 ****
-  functor AlphaProps
-     (structure Instr : ALPHAINSTR
-!     structure MLTreeHash :  MLTREE_HASH where T = Instr.T
-!     structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-      ):INSN_PROPERTIES =
-  struct
---- 7,52 ----
-  functor AlphaProps
-     (structure Instr : ALPHAINSTR
-!     structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-!     structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-      ):INSN_PROPERTIES =
-  struct
-diff -N -C 2 -r MLRISC/alpha/mltree/alpha.sml MLRISC-mlton/alpha/mltree/alpha.sml
-*** MLRISC/alpha/mltree/alpha.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/mltree/alpha.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 12,20 ****
-  functor Alpha
-     (structure AlphaInstr : ALPHAINSTR 
-!     structure PseudoInstrs : ALPHA_PSEUDO_INSTR
-!     			where I = AlphaInstr
-!     structure ExtensionComp : MLTREE_EXTENSION_COMP
-!     			where I = AlphaInstr
-! 			  and T = AlphaInstr.T
-  
-        (* Cost of multiplication in cycles *)
---- 12,81 ----
-  functor Alpha
-     (structure AlphaInstr : ALPHAINSTR 
-!     structure PseudoInstrs : ALPHA_PSEUDO_INSTR (* where I = AlphaInstr *)
-!                              where type I.Constant.const = AlphaInstr.Constant.const
-!                                and type I.Region.region = AlphaInstr.Region.region
-!                                and type I.T.Basis.cond = AlphaInstr.T.Basis.cond
-!                                and type I.T.Basis.div_rounding_mode = AlphaInstr.T.Basis.div_rounding_mode
-!                                and type I.T.Basis.ext = AlphaInstr.T.Basis.ext
-!                                and type I.T.Basis.fcond = AlphaInstr.T.Basis.fcond
-!                                and type I.T.Basis.rounding_mode = AlphaInstr.T.Basis.rounding_mode
-!                                and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) AlphaInstr.T.Extension.ccx
-!                                and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) AlphaInstr.T.Extension.fx
-!                                and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) AlphaInstr.T.Extension.rx
-!                                and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) AlphaInstr.T.Extension.sx
-!                                and type I.T.I.div_rounding_mode = AlphaInstr.T.I.div_rounding_mode
-!                                and type I.T.ccexp = AlphaInstr.T.ccexp
-!                                and type I.T.fexp = AlphaInstr.T.fexp
-!                                (* and type I.T.labexp = AlphaInstr.T.labexp *)
-!                                and type I.T.mlrisc = AlphaInstr.T.mlrisc
-!                                and type I.T.oper = AlphaInstr.T.oper
-!                                and type I.T.rep = AlphaInstr.T.rep
-!                                and type I.T.rexp = AlphaInstr.T.rexp
-!                                and type I.T.stm = AlphaInstr.T.stm
-!                                and type I.branch = AlphaInstr.branch
-!                                and type I.cmove = AlphaInstr.cmove
-!                                and type I.ea = AlphaInstr.ea
-!                                and type I.fbranch = AlphaInstr.fbranch
-!                                and type I.fcmove = AlphaInstr.fcmove
-!                                and type I.fload = AlphaInstr.fload
-!                                and type I.foperate = AlphaInstr.foperate
-!                                and type I.foperateV = AlphaInstr.foperateV
-!                                and type I.fstore = AlphaInstr.fstore
-!                                and type I.funary = AlphaInstr.funary
-!                                and type I.instr = AlphaInstr.instr
-!                                and type I.instruction = AlphaInstr.instruction
-!                                and type I.load = AlphaInstr.load
-!                                and type I.operand = AlphaInstr.operand
-!                                and type I.operate = AlphaInstr.operate
-!                                and type I.operateV = AlphaInstr.operateV
-!                                and type I.osf_user_palcode = AlphaInstr.osf_user_palcode
-!                                and type I.pseudo_op = AlphaInstr.pseudo_op
-!                                and type I.store = AlphaInstr.store
-!     structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = AlphaInstr and T = AlphaInstr.T *)
-!                               where type I.addressing_mode = AlphaInstr.addressing_mode
-!                                 and type I.ea = AlphaInstr.ea
-!                                 and type I.instr = AlphaInstr.instr
-!                                 and type I.instruction = AlphaInstr.instruction
-!                                 and type I.operand = AlphaInstr.operand
-!                               where type T.Basis.cond = AlphaInstr.T.Basis.cond
-!                                 and type T.Basis.div_rounding_mode = AlphaInstr.T.Basis.div_rounding_mode
-!                                 and type T.Basis.ext = AlphaInstr.T.Basis.ext
-!                                 and type T.Basis.fcond = AlphaInstr.T.Basis.fcond
-!                                 and type T.Basis.rounding_mode = AlphaInstr.T.Basis.rounding_mode
-!                                 and type T.Constant.const = AlphaInstr.T.Constant.const
-!                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) AlphaInstr.T.Extension.ccx
-!                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) AlphaInstr.T.Extension.fx
-!                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) AlphaInstr.T.Extension.rx
-!                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) AlphaInstr.T.Extension.sx
-!                                 and type T.I.div_rounding_mode = AlphaInstr.T.I.div_rounding_mode
-!                                 and type T.Region.region = AlphaInstr.T.Region.region
-!                                 and type T.ccexp = AlphaInstr.T.ccexp
-!                                 and type T.fexp = AlphaInstr.T.fexp
-!                                 (* and type T.labexp = AlphaInstr.T.labexp *)
-!                                 and type T.mlrisc = AlphaInstr.T.mlrisc
-!                                 and type T.oper = AlphaInstr.T.oper
-!                                 and type T.rep = AlphaInstr.T.rep
-!                                 and type T.rexp = AlphaInstr.T.rexp
-!                                 and type T.stm = AlphaInstr.T.stm
-  
-        (* Cost of multiplication in cycles *)
-***************
-*** 216,220 ****
-     * by constant optimizations.
-     *)
-!   functor Multiply32 = MLTreeMult
-      (structure I = I
-       structure T = T
---- 277,283 ----
-     * by constant optimizations.
-     *)
-! 
-!   (* signed, trapping version of multiply and divide *)
-!   structure Mult32 = MLTreeMult
-      (structure I = I
-       structure T = T
-***************
-*** 257,294 ****
-                I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
-           end 
-!     )
-  
-!   functor Multiply64 = MLTreeMult
-      (structure I = I
-       structure T = T
-       structure CB = CellsBasis
--    
--      val intTy = 64
-  
-!      type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
-!      type argi = {r:CB.cell, i:int, d:CB.cell}
-  
-       fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
-!      fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
-!     )
-  
-!   (* signed, trapping version of multiply and divide *)
-!   structure Mult32 = Multiply32
-!     (val trapping = true
-       val multCost = multCost
-!      fun addv{r1,r2,d} = [I.operatev{oper=I.ADDLV,ra=r1,rb=I.REGop r2,rc=d}]
-!      fun subv{r1,r2,d} = [I.operatev{oper=I.SUBLV,ra=r1,rb=I.REGop r2,rc=d}]
-       val sh1addv = NONE
-!      val sh2addv = NONE
-!      val sh3addv = NONE
-!     )
-!     (val signed = true)
-  
-!   (* non-trapping version of multiply and divide *)
-!   functor Mul32 = Multiply32
-!     (val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}]
---- 320,432 ----
-                I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
-           end 
-!      
-!      val trapping = true
-!      val multCost = multCost
-!      fun addv{r1,r2,d} = [I.operatev{oper=I.ADDLV,ra=r1,rb=I.REGop r2,rc=d}]
-!      fun subv{r1,r2,d} = [I.operatev{oper=I.SUBLV,ra=r1,rb=I.REGop r2,rc=d}]
-!      val sh1addv = NONE
-!      val sh2addv = NONE
-!      val sh3addv = NONE
-!      
-!      val signed = true)
-  
-!   (* unsigned, non-trapping version of multiply and divide *)
-!   structure Mulu32 = MLTreeMult
-      (structure I = I
-       structure T = T
-       structure CB = CellsBasis
-  
-!      val intTy = 32
-!    
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-  
-       fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}
-!      (*
-!       * How to left shift by a constant (32bits)
-!       *)
-!      fun slli{r,i=1,d} = [I.operate{oper=I.ADDL,ra=r,rb=I.REGop r,rc=d}]
-!        | slli{r,i=2,d} = [I.operate{oper=I.S4ADDL,ra=r,rb=zeroOpn,rc=d}]
-!        | slli{r,i=3,d} = [I.operate{oper=I.S8ADDL,ra=r,rb=zeroOpn,rc=d}]
-!        | slli{r,i,d}   = 
-!           let val tmp = C.newReg()
-!           in  [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=tmp},
-!                I.operate{oper=I.ADDL,ra=tmp,rb=zeroOpn,rc=d}]
-!           end
-  
-!      (* 
-!       * How to right shift (unsigned) by a constant (32bits)
-!       *)
-!      fun srli{r,i,d} =
-!          let val tmp = C.newReg()
-!          in  [I.operate{oper=I.ZAP,ra=r,rb=I.IMMop 0xf0,rc=tmp},
-!               I.operate{oper=I.SRL,ra=tmp,rb=I.IMMop i,rc=d}]
-!          end
-! 
-!      (* 
-!       * How to right shift (signed) by a constant (32bits)
-!       *)
-!      fun srai{r,i,d} = 
-!          let val tmp = C.newReg()
-!          in  [I.operate{oper=I.ADDL,ra=r,rb=zeroOpn,rc=tmp},
-!               I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
-!          end 
-!      
-!      val trapping = false
-       val multCost = multCost
-!      fun addv{r1,r2,d} = [I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}]
-!      fun subv{r1,r2,d} = [I.operate{oper=I.SUBL,ra=r1,rb=I.REGop r2,rc=d}]
-       val sh1addv = NONE
-!      val sh2addv = SOME(fn {r1,r2,d} => 
-!                     [I.operate{oper=I.S4ADDL,ra=r1,rb=I.REGop r2,rc=d}])
-!      val sh3addv = SOME(fn {r1,r2,d} => 
-!                     [I.operate{oper=I.S8ADDL,ra=r1,rb=I.REGop r2,rc=d}])
-!      
-!      val signed = false)
-!   (* signed, non-trapping version of multiply and divide *)
-!   structure Muls32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-  
-!      val intTy = 32
-!    
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-! 
-!      fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}
-!      (*
-!       * How to left shift by a constant (32bits)
-!       *)
-!      fun slli{r,i=1,d} = [I.operate{oper=I.ADDL,ra=r,rb=I.REGop r,rc=d}]
-!        | slli{r,i=2,d} = [I.operate{oper=I.S4ADDL,ra=r,rb=zeroOpn,rc=d}]
-!        | slli{r,i=3,d} = [I.operate{oper=I.S8ADDL,ra=r,rb=zeroOpn,rc=d}]
-!        | slli{r,i,d}   = 
-!           let val tmp = C.newReg()
-!           in  [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=tmp},
-!                I.operate{oper=I.ADDL,ra=tmp,rb=zeroOpn,rc=d}]
-!           end
-! 
-!      (* 
-!       * How to right shift (unsigned) by a constant (32bits)
-!       *)
-!      fun srli{r,i,d} =
-!          let val tmp = C.newReg()
-!          in  [I.operate{oper=I.ZAP,ra=r,rb=I.IMMop 0xf0,rc=tmp},
-!               I.operate{oper=I.SRL,ra=tmp,rb=I.IMMop i,rc=d}]
-!          end
-! 
-!      (* 
-!       * How to right shift (signed) by a constant (32bits)
-!       *)
-!      fun srai{r,i,d} = 
-!          let val tmp = C.newReg()
-!          in  [I.operate{oper=I.ADDL,ra=r,rb=zeroOpn,rc=tmp},
-!               I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
-!          end 
-!      
-!      val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}]
-***************
-*** 299,309 ****
-       val sh3addv = SOME(fn {r1,r2,d} => 
-                      [I.operate{oper=I.S8ADDL,ra=r1,rb=I.REGop r2,rc=d}])
-!     )
-!   structure Mulu32 = Mul32(val signed = false)
-!   structure Muls32 = Mul32(val signed = true)
-  
-    (* signed, trapping version of multiply and divide *)
-!   structure Mult64 = Multiply64
-!     (val trapping = true
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operatev{oper=I.ADDQV,ra=r1,rb=I.REGop r2,rc=d}]
---- 437,461 ----
-       val sh3addv = SOME(fn {r1,r2,d} => 
-                      [I.operate{oper=I.S8ADDL,ra=r1,rb=I.REGop r2,rc=d}])
-!      
-!      val signed = true)
-  
-    (* signed, trapping version of multiply and divide *)
-!   structure Mult64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!    
-!      val intTy = 64
-! 
-!      type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
-!      type argi = {r:CB.cell, i:int, d:CB.cell}
-! 
-!      fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
-!      fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
-!      
-!      val trapping = true
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operatev{oper=I.ADDQV,ra=r1,rb=I.REGop r2,rc=d}]
-***************
-*** 312,321 ****
-       val sh2addv = NONE
-       val sh3addv = NONE
-!     )
-!     (val signed = true)
-  
-    (* unsigned, non-trapping version of multiply and divide *)
-!   functor Mul64 = Multiply64
-!     (val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}]
---- 464,516 ----
-       val sh2addv = NONE
-       val sh3addv = NONE
-!      
-!      val signed = true)
-  
-    (* unsigned, non-trapping version of multiply and divide *)
-!   structure Mulu64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!    
-!      val intTy = 64
-! 
-!      type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
-!      type argi = {r:CB.cell, i:int, d:CB.cell}
-! 
-!      fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
-!      fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
-!     
-!      val trapping = false
-!      val multCost = multCost
-!      fun addv{r1,r2,d} = [I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}]
-!      fun subv{r1,r2,d} = [I.operate{oper=I.SUBQ,ra=r1,rb=I.REGop r2,rc=d}]
-!      val sh1addv = NONE
-!      val sh2addv = SOME(fn {r1,r2,d} => 
-!                     [I.operate{oper=I.S4ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
-!      val sh3addv = SOME(fn {r1,r2,d} => 
-!                     [I.operate{oper=I.S8ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
-!      
-!      val signed = false)
-!   (* signed, non-trapping version of multiply and divide *)
-!   structure Muls64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!    
-!      val intTy = 64
-! 
-!      type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
-!      type argi = {r:CB.cell, i:int, d:CB.cell}
-! 
-!      fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
-!      fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
-!      fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
-!      
-!      val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d} = [I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}]
-***************
-*** 326,332 ****
-       val sh3addv = SOME(fn {r1,r2,d} => 
-                      [I.operate{oper=I.S8ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
-!     )
-!   structure Mulu64 = Mul64(val signed = false)
-!   structure Muls64 = Mul64(val signed = true)
-  
-    (* 
---- 521,526 ----
-       val sh3addv = SOME(fn {r1,r2,d} => 
-                      [I.operate{oper=I.S8ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
-!      
-!      val signed = true)
-  
-    (* 
-***************
-*** 972,979 ****
-            | T.ADD(64,e,T.LABEXP le) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
-            | T.ADD(64,T.LABEXP le,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
-!           | T.ADD(64,e,x as (T.CONST _ | T.LABEL _))  => 
-!                mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-!           | T.ADD(64,x as (T.CONST _ | T.LABEL _),e)  => 
-!                mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-            | T.ADD(64,e,T.LI i)     => loadImmed(i, expr e, d, an)
-            | T.ADD(64,T.LI i,e)     => loadImmed(i, expr e, d, an)
---- 1166,1173 ----
-            | T.ADD(64,e,T.LABEXP le) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
-            | T.ADD(64,T.LABEXP le,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
-!           | T.ADD(64,e,x as T.CONST _) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-!           | T.ADD(64,e,x as T.LABEL _) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-!           | T.ADD(64,x as T.CONST _,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-!           | T.ADD(64,x as T.LABEL _,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
-            | T.ADD(64,e,T.LI i)     => loadImmed(i, expr e, d, an)
-            | T.ADD(64,T.LI i,e)     => loadImmed(i, expr e, d, an)
-***************
-*** 1068,1073 ****
-            | T.SX(_,_,T.LOAD(16,ea,mem))=> load16s(ea,d,mem,an)
-            | T.SX(_,_,T.LOAD(32,ea,mem))=> load32s(ea,d,mem,an)
-!           | T.ZX((8|16|32|64),_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
-!           | T.ZX((16|32|64),_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
-            | T.ZX(64,_,T.LOAD(64,ea,mem)) => load(I.LDQ,ea,d,mem,an)
-            | T.LOAD(8,ea,mem) => load8(ea,d,mem,an)
---- 1262,1272 ----
-            | T.SX(_,_,T.LOAD(16,ea,mem))=> load16s(ea,d,mem,an)
-            | T.SX(_,_,T.LOAD(32,ea,mem))=> load32s(ea,d,mem,an)
-!           | T.ZX(8,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
-!           | T.ZX(16,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
-!           | T.ZX(32,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
-!           | T.ZX(64,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
-!           | T.ZX(16,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
-!           | T.ZX(32,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
-!           | T.ZX(64,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
-            | T.ZX(64,_,T.LOAD(64,ea,mem)) => load(I.LDQ,ea,d,mem,an)
-            | T.LOAD(8,ea,mem) => load8(ea,d,mem,an)
-***************
-*** 1392,1397 ****
-                  (* move the immed operand to b *)
-                  case a of
-!                   (T.LI _ | T.CONST _ | T.LABEL _ | T.LABEXP _) => 
-!                     (T.Basis.swapCond cond,b,a)
-                  | _ => (cond,a,b)
-  
---- 1591,1598 ----
-                  (* move the immed operand to b *)
-                  case a of
-!                   T.LI _ => (T.Basis.swapCond cond,b,a)
-!                 | T.CONST _ => (T.Basis.swapCond cond,b,a)
-!                 | T.LABEL _ => (T.Basis.swapCond cond,b,a)
-!                 | T.LABEXP _ => (T.Basis.swapCond cond,b,a)
-                  | _ => (cond,a,b)
-  
-***************
-*** 1456,1461 ****
-                val (cond,e1,e2) =
-  		  case e1 of
-!                     (T.LI _ | T.CONST _ | T.LABEL _ | T.LABEXP _) => 
-!                        (T.Basis.swapCond cond,e2,e1)
-                    | _ => (cond,e1,e2)
-            in  case cond of
---- 1657,1664 ----
-                val (cond,e1,e2) =
-  		  case e1 of
-!                     T.LI _ => (T.Basis.swapCond cond,e2,e1)
-!                   | T.CONST _ => (T.Basis.swapCond cond,e2,e1)
-!                   | T.LABEL _ => (T.Basis.swapCond cond,e2,e1)
-!                   | T.LABEXP _ => (T.Basis.swapCond cond,e2,e1)
-                    | _ => (cond,e1,e2)
-            in  case cond of
-diff -N -C 2 -r MLRISC/alpha/mltree/alphaPseudoInstr.sig MLRISC-mlton/alpha/mltree/alphaPseudoInstr.sig
-*** MLRISC/alpha/mltree/alphaPseudoInstr.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/alpha/mltree/alphaPseudoInstr.sig	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 5,12 ****
-     structure I : ALPHAINSTR
-     structure T : MLTREE
-     structure C : ALPHACELLS
-!      sharing C = I.C
-!      sharing I.T = T
-!    structure CB: CELLS_BASIS = CellsBasis
+diff --git a/Doc/html/mltex2html b/Doc/html/mltex2html
+index 24d393f..6e58ea0 100755
+--- a/Doc/html/mltex2html
++++ b/Doc/html/mltex2html
+@@ -1,4 +1,4 @@
+-#!/usr/local/bin/perl
++#!/usr/bin/perl
+ #
+ # This tool generates HTML pages in my own format given a stylized Latex file.
+ #
+diff --git a/README.mlton b/README.mlton
+new file mode 100644
+index 0000000..30a22b4
+--- /dev/null
++++ b/README.mlton
+@@ -0,0 +1,8 @@
++The following changes were made to the MLRISC Library, in addition to
++deriving the {{{.mlb}}} file from the {{{.cm}}} files:
++ * eliminate or-patterns: Duplicate the whole match ({{{p => e}}}) at each of the patterns.
++ * eliminate vector constants: Change {{{#[}}} to {{{Vector.fromList [}}}.
++ * eliminate {{{withtype}}} in signatures.
++ * eliminate sequential {{{withtype}}} expansions: Most could be rewritten as a sequence of type definitions and datatype definitions.
++ * eliminate higher-order functors: Every higher-order functor definition and application could be uncurried in the obvious way.
++ * eliminate {{{where <str> = <str>}}}: Quite painful to expand out all the flexible types in the respective structures.  Furthermore, many of the implied type equalities aren't needed, but it's too hard to pick out the right ones.
+diff --git a/aliasing/pointsTo.sig b/aliasing/pointsTo.sig
+index 9abcd4b..35655ef 100644
+--- a/aliasing/pointsTo.sig
++++ b/aliasing/pointsTo.sig
+@@ -7,18 +7,27 @@ signature POINTS_TO =
+ sig
+ 
+    eqtype edgekind 
+-   structure C : CELLS_BASIS = CellsBasis
++   structure C : CELLS_BASIS (* = CellsBasis *)
++                 where type CellSet.cellset = CellsBasis.CellSet.cellset
++                   and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                   and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                   and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                   and type cell = CellsBasis.cell
++                   and type cellColor = CellsBasis.cellColor
++                   and type cellkind = CellsBasis.cellkind
++                   and type cellkindDesc = CellsBasis.cellkindDesc
++                   and type cellkindInfo = CellsBasis.cellkindInfo
+ 
+    datatype cell = 
+-     LINK  of region                             
+-   | SREF  of C.cell * edges ref
+-   | WREF  of C.cell * edges ref
+-   | SCELL of C.cell * edges ref
+-   | WCELL of C.cell * edges ref
++     LINK  of cell ref
++   | SREF  of C.cell * (edgekind * int * cell ref) list ref
++   | WREF  of C.cell * (edgekind * int * cell ref) list ref
++   | SCELL of C.cell * (edgekind * int * cell ref) list ref
++   | WCELL of C.cell * (edgekind * int * cell ref) list ref
+    | TOP   of {mutable:bool, id:C.cell, name:string}
+       (* a collapsed node *)
+-   withtype region = cell ref
+-   and      edges  = (edgekind * int * region) list
++   type region = cell ref
++   type edges  = (edgekind * int * region) list
+ 
+    val reset    : (unit -> C.cell) -> unit
+ 
+diff --git a/aliasing/pointsTo.sml b/aliasing/pointsTo.sml
+index 5e6c79f..8442b91 100644
+--- a/aliasing/pointsTo.sml
++++ b/aliasing/pointsTo.sml
+@@ -10,25 +10,30 @@ struct
+    structure C = CellsBasis
+ 
+    datatype cell = 
+-     LINK  of region
+-   | SREF  of C.cell * edges ref
+-   | WREF  of C.cell * edges ref
+-   | SCELL of C.cell * edges ref
+-   | WCELL of C.cell * edges ref
++     LINK  of cell ref
++   | SREF  of C.cell * (edgekind * int * cell ref) list ref
++   | WREF  of C.cell * (edgekind * int * cell ref) list ref
++   | SCELL of C.cell * (edgekind * int * cell ref) list ref
++   | WCELL of C.cell * (edgekind * int * cell ref) list ref
+    | TOP   of {mutable:bool, id:C.cell, name:string}
+       (* a collapsed node *)
+-
+-   withtype region = cell ref
+-   and      edges  = (edgekind * int * region) list
++   type region = cell ref
++   type edges  = (edgekind * int * region) list
+ 
+    fun error msg = MLRiscErrorMsg.error("PointsTo",msg)
+ 
+    (* PI > DOM > RAN > RECORD *)
+    fun greaterKind(PI,_) = false   
+      | greaterKind(DOM,PI) = false
+-     | greaterKind(RAN,(PI | DOM)) = false
+-     | greaterKind(RECORD,(PI | DOM | RAN)) = false
+-     | greaterKind(MARK,(PI | DOM | RAN | RECORD)) = false
++     | greaterKind(RAN,PI) = false
++     | greaterKind(RAN,DOM) = false
++     | greaterKind(RECORD,PI) = false
++     | greaterKind(RECORD,DOM) = false
++     | greaterKind(RECORD,RAN) = false
++     | greaterKind(MARK,PI) = false
++     | greaterKind(MARK,DOM) = false
++     | greaterKind(MARK,RAN) = false
++     | greaterKind(MARK,RECORD) = false
+      | greaterKind _ = true
+ 
+    fun less(k,i,k',i') = k=k' andalso i > i' orelse greaterKind(k,k')
+diff --git a/alpha/backpatch/alphaJumps.sml b/alpha/backpatch/alphaJumps.sml
+index df1d5ff..5636e24 100644
+--- a/alpha/backpatch/alphaJumps.sml
++++ b/alpha/backpatch/alphaJumps.sml
+@@ -5,10 +5,67 @@
+  *)
+ functor AlphaJumps
+   (structure Instr : ALPHAINSTR
+-   structure Shuffle : ALPHASHUFFLE 
+-			   where I = Instr
+-   structure MLTreeEval : MLTREE_EVAL 
+-			   where T = Instr.T
++   structure Shuffle : ALPHASHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         and type I.branch = Instr.branch
++                         and type I.cmove = Instr.cmove
++                         and type I.ea = Instr.ea
++                         and type I.fbranch = Instr.fbranch
++                         and type I.fcmove = Instr.fcmove
++                         and type I.fload = Instr.fload
++                         and type I.foperate = Instr.foperate
++                         and type I.foperateV = Instr.foperateV
++                         and type I.fstore = Instr.fstore
++                         and type I.funary = Instr.funary
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.load = Instr.load
++                         and type I.operand = Instr.operand
++                         and type I.operate = Instr.operate
++                         and type I.operateV = Instr.operateV
++                         and type I.osf_user_palcode = Instr.osf_user_palcode
++                         and type I.pseudo_op = Instr.pseudo_op
++                         and type I.store = Instr.store
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
+   ) : SDI_JUMPS = 
+ struct
+   structure I = Instr
+diff --git a/alpha/emit/alphaAsm.sml b/alpha/emit/alphaAsm.sml
+index 293fe84..0cd9fca 100644
+--- a/alpha/emit/alphaAsm.sml
++++ b/alpha/emit/alphaAsm.sml
+@@ -6,12 +6,88 @@
+ 
+ 
+ functor AlphaAsmEmitter(structure S : INSTRUCTION_STREAM
+-                        structure Instr : ALPHAINSTR
+-                           where T = S.P.T
+-                        structure Shuffle : ALPHASHUFFLE
+-                           where I = Instr
+-                        structure MLTreeEval : MLTREE_EVAL
+-                           where T = Instr.T
++                        structure Instr : ALPHAINSTR (* where T = S.P.T *)
++                                          where type T.Basis.cond = S.P.T.Basis.cond
++                                            and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                            and type T.Basis.ext = S.P.T.Basis.ext
++                                            and type T.Basis.fcond = S.P.T.Basis.fcond
++                                            and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                            and type T.Constant.const = S.P.T.Constant.const
++                                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                            and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                            and type T.Region.region = S.P.T.Region.region
++                                            and type T.ccexp = S.P.T.ccexp
++                                            and type T.fexp = S.P.T.fexp
++                                            (* and type T.labexp = S.P.T.labexp *)
++                                            and type T.mlrisc = S.P.T.mlrisc
++                                            and type T.oper = S.P.T.oper
++                                            and type T.rep = S.P.T.rep
++                                            and type T.rexp = S.P.T.rexp
++                                            and type T.stm = S.P.T.stm
++                        structure Shuffle : ALPHASHUFFLE (* where I = Instr *)
++                                            where type I.Constant.const = Instr.Constant.const
++                                              and type I.Region.region = Instr.Region.region
++                                              and type I.T.Basis.cond = Instr.T.Basis.cond
++                                              and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                              and type I.T.Basis.ext = Instr.T.Basis.ext
++                                              and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                              and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                              and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                              and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                              and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                              and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                              and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                              and type I.T.ccexp = Instr.T.ccexp
++                                              and type I.T.fexp = Instr.T.fexp
++                                              (* and type I.T.labexp = Instr.T.labexp *)
++                                              and type I.T.mlrisc = Instr.T.mlrisc
++                                              and type I.T.oper = Instr.T.oper
++                                              and type I.T.rep = Instr.T.rep
++                                              and type I.T.rexp = Instr.T.rexp
++                                              and type I.T.stm = Instr.T.stm
++                                              and type I.branch = Instr.branch
++                                              and type I.cmove = Instr.cmove
++                                              and type I.ea = Instr.ea
++                                              and type I.fbranch = Instr.fbranch
++                                              and type I.fcmove = Instr.fcmove
++                                              and type I.fload = Instr.fload
++                                              and type I.foperate = Instr.foperate
++                                              and type I.foperateV = Instr.foperateV
++                                              and type I.fstore = Instr.fstore
++                                              and type I.funary = Instr.funary
++                                              and type I.instr = Instr.instr
++                                              and type I.instruction = Instr.instruction
++                                              and type I.load = Instr.load
++                                              and type I.operand = Instr.operand
++                                              and type I.operate = Instr.operate
++                                              and type I.operateV = Instr.operateV
++                                              and type I.osf_user_palcode = Instr.osf_user_palcode
++                                              and type I.pseudo_op = Instr.pseudo_op
++                                              and type I.store = Instr.store
++                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                               where type T.Basis.cond = Instr.T.Basis.cond
++                                                 and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                                 and type T.Basis.ext = Instr.T.Basis.ext
++                                                 and type T.Basis.fcond = Instr.T.Basis.fcond
++                                                 and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                                 and type T.Constant.const = Instr.T.Constant.const
++                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                                 and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                                 and type T.Region.region = Instr.T.Region.region
++                                                 and type T.ccexp = Instr.T.ccexp
++                                                 and type T.fexp = Instr.T.fexp
++                                                 (* and type T.labexp = Instr.T.labexp *)
++                                                 and type T.mlrisc = Instr.T.mlrisc
++                                                 and type T.oper = Instr.T.oper
++                                                 and type T.rep = Instr.T.rep
++                                                 and type T.rexp = Instr.T.rexp
++                                                 and type T.stm = Instr.T.stm
+                        ) : INSTRUCTION_EMITTER =
+ struct
+    structure I  = Instr
+diff --git a/alpha/emit/alphaMC.sml b/alpha/emit/alphaMC.sml
+index 8548877..be61bb7 100644
+--- a/alpha/emit/alphaMC.sml
++++ b/alpha/emit/alphaMC.sml
+@@ -6,7 +6,27 @@
+ 
+ 
+ functor AlphaMCEmitter(structure Instr : ALPHAINSTR
+-                       structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                              where type T.Basis.cond = Instr.T.Basis.cond
++                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                                and type T.Basis.ext = Instr.T.Basis.ext
++                                                and type T.Basis.fcond = Instr.T.Basis.fcond
++                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                                and type T.Constant.const = Instr.T.Constant.const
++                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                                and type T.Region.region = Instr.T.Region.region
++                                                and type T.ccexp = Instr.T.ccexp
++                                                and type T.fexp = Instr.T.fexp
++                                                (* and type T.labexp = Instr.T.labexp *)
++                                                and type T.mlrisc = Instr.T.mlrisc
++                                                and type T.oper = Instr.T.oper
++                                                and type T.rep = Instr.T.rep
++                                                and type T.rexp = Instr.T.rexp
++                                                and type T.stm = Instr.T.stm
+                        structure Stream : INSTRUCTION_STREAM 
+                        structure CodeString : CODE_STRING
+                       ) : INSTRUCTION_EMITTER =
+@@ -47,6 +67,7 @@ struct
+        (* note: fromLargeWord strips the high order bits! *)
+        fun eByteW w =
+        let val i = !loc
++           val w = W.toLargeWord w
+        in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
     
-     type reduceOpnd = I.operand -> CB.cell
---- 5,41 ----
-     structure I : ALPHAINSTR
-     structure T : MLTREE
-+                  where type Basis.cond = I.T.Basis.cond
-+                    and type Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-+                    and type Basis.ext = I.T.Basis.ext
-+                    and type Basis.fcond = I.T.Basis.fcond
-+                    and type Basis.rounding_mode = I.T.Basis.rounding_mode
-+                    and type Constant.const = I.T.Constant.const
-+                    and type ('s,'r,'f,'c) Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-+                    and type ('s,'r,'f,'c) Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-+                    and type ('s,'r,'f,'c) Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-+                    and type ('s,'r,'f,'c) Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-+                    and type I.div_rounding_mode = I.T.I.div_rounding_mode
-+                    and type Region.region = I.T.Region.region
-+                    and type ccexp = I.T.ccexp
-+                    and type fexp = I.T.fexp
-+                    (* and type labexp = I.T.labexp *)
-+                    and type mlrisc = I.T.mlrisc
-+                    and type oper = I.T.oper
-+                    and type rep = I.T.rep
-+                    and type rexp = I.T.rexp
-+                    and type stm = I.T.stm
-     structure C : ALPHACELLS
-!      (* sharing C = I.C *)
-!      (* sharing I.T = T *)
-!    structure CB: CELLS_BASIS (* = CellsBasis *)
-!                  where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                    and type cell = CellsBasis.cell
-!                    and type cellColor = CellsBasis.cellColor
-!                    and type cellkind = CellsBasis.cellkind
-!                    and type cellkindDesc = CellsBasis.cellkindDesc
-!                    and type cellkindInfo = CellsBasis.cellkindInfo
-    
-     type reduceOpnd = I.operand -> CB.cell
-diff -N -C 2 -r MLRISC/amd64/amd64.mdl MLRISC-mlton/amd64/amd64.mdl
-*** MLRISC/amd64/amd64.mdl	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/amd64.mdl	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 578,582 ****
-            let val n = size fbinOp
-            in  case Char.toLower(String.sub(fbinOp,n-1)) of
-!                 (#"s" | #"l") => String.substring(fbinOp,0,n-1)
-                | _ => fbinOp
-            end
---- 578,583 ----
-            let val n = size fbinOp
-            in  case Char.toLower(String.sub(fbinOp,n-1)) of
-!                 (#"s") => String.substring(fbinOp,0,n-1)
-!               | (#"l") => String.substring(fbinOp,0,n-1)
-                | _ => fbinOp
-            end
-***************
-*** 710,717 ****
-  	asm: (case (src,binOp) of
-                 (I.Direct _,  (* tricky business here for shifts *)
-!                (I.SARQ | I.SHRQ | I.SHLQ |
-! 		I.SARL | I.SHRL | I.SHLL |
-!                 I.SARW | I.SHRW | I.SHLW |
-!                 I.SARB | I.SHRB | I.SHLB)) => ``<binOp>\t%cl, <dst>''
-               | _ => ``<binOp>\t<src>, <dst>''
-               )
---- 711,737 ----
-  	asm: (case (src,binOp) of
-                 (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARQ) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRQ) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLQ) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARB) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRB) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLB) => ``<binOp>\t%cl, <dst>''
-               | _ => ``<binOp>\t<src>, <dst>''
-               )
-diff -N -C 2 -r MLRISC/amd64/amd64MC.sml MLRISC-mlton/amd64/amd64MC.sml
-*** MLRISC/amd64/amd64MC.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/amd64MC.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 1,7 ****
-  functor AMD64MCEmitter
-    (structure Instr : AMD64INSTR
-!    structure Shuffle : AMD64SHUFFLE where I = Instr
-!    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-!    structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr) : MC_EMIT = 
-  struct
-    structure I = Instr
---- 1,68 ----
-  functor AMD64MCEmitter
-    (structure Instr : AMD64INSTR
-!    structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          (* and type I.addressing_mode = Instr.addressing_mode *)
-!                          and type I.binaryOp = Instr.binaryOp
-!                          and type I.bitOp = Instr.bitOp
-!                          and type I.cond = Instr.cond
-!                          and type I.fbin_op = Instr.fbin_op
-!                          and type I.fcom_op = Instr.fcom_op
-!                          and type I.fmove_op = Instr.fmove_op
-!                          and type I.fsize = Instr.fsize
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.isize = Instr.isize
-!                          and type I.move = Instr.move
-!                          and type I.multDivOp = Instr.multDivOp
-!                          and type I.operand = Instr.operand
-!                          and type I.shiftOp = Instr.shiftOp
-!                          and type I.unaryOp = Instr.unaryOp
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-!    structure AsmEmitter : INSTRUCTION_EMITTER (* where I = Instr *)
-!                           where type I.addressing_mode = Instr.addressing_mode
-!                             and type I.ea = Instr.ea
-!                             and type I.instr = Instr.instr
-!                             and type I.instruction = Instr.instruction
-!                             and type I.operand = Instr.operand) : MC_EMIT = 
-  struct
-    structure I = Instr
-***************
-*** 328,332 ****
-  		     | I.SARQ => shift(64, 7, src)
-  		     | I.SHRQ => shift(64, 5, src)
-! 		     | (I.IMULL | I.MULQ) => 
-  		       let val sz = if binOp = I.IMULQ then 64 else 32
-  		       in (case (src, dst) 
---- 389,407 ----
-  		     | I.SARQ => shift(64, 7, src)
-  		     | I.SHRQ => shift(64, 5, src)
-! 		     | (I.IMULL) => 
-! 		       let val sz = if binOp = I.IMULQ then 64 else 32
-! 		       in (case (src, dst) 
-! 			    of (I.Immed(i), I.Direct (_, dstR)) =>
-! 			       (case size i
-! 				 of Bits32 => 
-! 				    encodeLongImm sz (0wx69, reg (rNum dstR), dst, i)
-! 				  | _ => encodeByteImm sz (0wx6b, reg (rNum dstR), dst, i)
-! 			       (* esac *))
-! 			     | (_, I.Direct (_, dstR)) => 
-! 			       eBytes (encode32' ([0wx0f, 0wxaf], reg (rNum dstR), src))
-! 			     | _ => error "imul"
-! 			  (* esac *))
-! 		       end 
-! 		     | (I.MULQ) => 
-  		       let val sz = if binOp = I.IMULQ then 64 else 32
-  		       in (case (src, dst) 
-***************
-*** 380,396 ****
-  	     | I.CDQ => eByte(0x99)
-  	     | I.SAHF => eByte(0x9e)
-! 	     | ( I.PUSHL (I.Immed i) | I.PUSHQ (I.Immed i) )=> 
-  	       (case size i 
-  		 of Bits32 => eBytes(0wx68 :: eLong(i))
-  		  | _ => eBytes [0wx6a, toWord8 i]
-  	       (* esac *))
-! 	     | ( I.PUSHL (I.Direct (_, r)) |
-! 		 I.PUSHQ (I.Direct (_, r)) ) => eByte (0x50+rNum r)
-! 	     | ( I.PUSHL opnd | I.PUSHQ opnd ) => encode32 (0wxff, opcode 6, opnd)
-  	     | I.POP (I.Direct (_, r)) => eByte (0x58+rNum r)
-  	     | I.POP opnd => encode32 (0wx8f, opcode 0, opnd)		     
-  	     | I.LEAL{r32, addr} => encodeReg32(0wx8d, r32, addr)			  
-  	     | I.LEAQ{r64, addr} => encodeReg64(0wx8d, r64, addr)			  
-! 	     | I.MOVE{mvOp=mvOp as (I.MOVL | I.MOVQ), src, dst} => 
-  	       let val sz = case mvOp of I.MOVL => 32 | I.MOVQ => 64
-  		   fun mv(I.Immed(i), I.Direct (_, r)) =
---- 455,486 ----
-  	     | I.CDQ => eByte(0x99)
-  	     | I.SAHF => eByte(0x9e)
-! 	     | ( I.PUSHL (I.Immed i) )=> 
-  	       (case size i 
-  		 of Bits32 => eBytes(0wx68 :: eLong(i))
-  		  | _ => eBytes [0wx6a, toWord8 i]
-  	       (* esac *))
-! 	     | ( I.PUSHQ (I.Immed i) )=> 
-! 	       (case size i 
-! 		 of Bits32 => eBytes(0wx68 :: eLong(i))
-! 		  | _ => eBytes [0wx6a, toWord8 i]
-! 	       (* esac *))
-! 	     | ( I.PUSHL (I.Direct (_, r)) ) => eByte (0x50+rNum r)
-! 	     | ( I.PUSHQ (I.Direct (_, r)) ) => eByte (0x50+rNum r)
-! 	     | ( I.PUSHL opnd ) => encode32 (0wxff, opcode 6, opnd)
-! 	     | ( I.PUSHQ opnd ) => encode32 (0wxff, opcode 6, opnd)
-  	     | I.POP (I.Direct (_, r)) => eByte (0x58+rNum r)
-  	     | I.POP opnd => encode32 (0wx8f, opcode 0, opnd)		     
-  	     | I.LEAL{r32, addr} => encodeReg32(0wx8d, r32, addr)			  
-  	     | I.LEAQ{r64, addr} => encodeReg64(0wx8d, r64, addr)			  
-! 	     | I.MOVE{mvOp=mvOp as (I.MOVL), src, dst} => 
-! 	       let val sz = case mvOp of I.MOVL => 32 | I.MOVQ => 64
-! 		   fun mv(I.Immed(i), I.Direct (_, r)) =
-!                        eBytes(Word8.+(0wxb8, Word8.fromInt(rNum r))::eLong(i))
-! 		     | mv(I.Immed(i), _) = encodeLongImm sz (0wxc7, opcode 0, dst, i)
-! 		     | mv(I.ImmedLabel le,dst) = mv(I.Immed(lexp le),dst)
-! 		     | mv(I.LabelEA le,dst) = error "MOVL: LabelEA"
-! 		     | mv(src,dst) = arith(sz, 0wx88, opcode 0) (src, dst)
-! 	       in  mv(src,dst) end
-! 	     | I.MOVE{mvOp=mvOp as (I.MOVQ), src, dst} => 
-  	       let val sz = case mvOp of I.MOVL => 32 | I.MOVQ => 64
-  		   fun mv(I.Immed(i), I.Direct (_, r)) =
-***************
-*** 449,453 ****
-  	     | I.CMPL{lsrc, rsrc} => arith(32, 0wx38, opcode 7) (rsrc, lsrc)
-  	     | I.CMPQ{lsrc, rsrc} => arith(64, 0wx38, opcode 7) (rsrc, lsrc)
-! 	     | (I.CMPW _ | I.CMPB _) => error "CMP"
-  	     | I.TESTQ{lsrc, rsrc} => test(64, rsrc, lsrc)
-  	     | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
---- 539,544 ----
-  	     | I.CMPL{lsrc, rsrc} => arith(32, 0wx38, opcode 7) (rsrc, lsrc)
-  	     | I.CMPQ{lsrc, rsrc} => arith(64, 0wx38, opcode 7) (rsrc, lsrc)
-! 	     | (I.CMPW _) => error "CMP"
-! 	     | (I.CMPB _) => error "CMP"
-  	     | I.TESTQ{lsrc, rsrc} => test(64, rsrc, lsrc)
-  	     | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
-diff -N -C 2 -r MLRISC/amd64/amd64MCFn.sml MLRISC-mlton/amd64/amd64MCFn.sml
-*** MLRISC/amd64/amd64MCFn.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/amd64MCFn.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 6,11 ****
-  functor AMD64MCFn(
-      structure Instr : AMD64INSTR
-!     structure Shuffle : AMD64SHUFFLE where I = Instr
-!     structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-  (*    structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr*)
-    ) : MC_EMIT = 
---- 6,64 ----
-  functor AMD64MCFn(
-      structure Instr : AMD64INSTR
-!     structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
-!                         where type I.Constant.const = Instr.Constant.const
-!                           and type I.Region.region = Instr.Region.region
-!                           and type I.T.Basis.cond = Instr.T.Basis.cond
-!                           and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                           and type I.T.Basis.ext = Instr.T.Basis.ext
-!                           and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                           and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                           and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                           and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                           and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                           and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                           and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                           and type I.T.ccexp = Instr.T.ccexp
-!                           and type I.T.fexp = Instr.T.fexp
-!                           (* and type I.T.labexp = Instr.T.labexp *)
-!                           and type I.T.mlrisc = Instr.T.mlrisc
-!                           and type I.T.oper = Instr.T.oper
-!                           and type I.T.rep = Instr.T.rep
-!                           and type I.T.rexp = Instr.T.rexp
-!                           and type I.T.stm = Instr.T.stm
-!                           (* and type I.addressing_mode = Instr.addressing_mode *)
-!                           and type I.binaryOp = Instr.binaryOp
-!                           and type I.bitOp = Instr.bitOp
-!                           and type I.cond = Instr.cond
-!                           and type I.fsize = Instr.fsize
-!                           and type I.instr = Instr.instr
-!                           and type I.instruction = Instr.instruction
-!                           and type I.isize = Instr.isize
-!                           and type I.move = Instr.move
-!                           and type I.multDivOp = Instr.multDivOp
-!                           and type I.operand = Instr.operand
-!                           and type I.shiftOp = Instr.shiftOp
-!                           and type I.unaryOp = Instr.unaryOp
-!     structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-  (*    structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr*)
-    ) : MC_EMIT = 
-diff -N -C 2 -r MLRISC/amd64/backpatch/amd64Jumps.sml MLRISC-mlton/amd64/backpatch/amd64Jumps.sml
-*** MLRISC/amd64/backpatch/amd64Jumps.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/backpatch/amd64Jumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,12 ****
-  functor AMD64Jumps
-    (structure Instr : AMD64INSTR
-!    structure Eval : MLTREE_EVAL where T = Instr.T
-!    structure Shuffle : AMD64SHUFFLE where I = Instr
-!    structure MCEmitter : MC_EMIT where I = Instr) : SDI_JUMPS = 
-  struct
-    structure I = Instr
---- 6,74 ----
-  functor AMD64Jumps
-    (structure Instr : AMD64INSTR
-!    structure Eval : MLTREE_EVAL (* where T = Instr.T *)
-!                     where type T.Basis.cond = Instr.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = Instr.T.Basis.ext
-!                       and type T.Basis.fcond = Instr.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                       and type T.Constant.const = Instr.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                       and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                       and type T.Region.region = Instr.T.Region.region
-!                       and type T.ccexp = Instr.T.ccexp
-!                       and type T.fexp = Instr.T.fexp
-!                       (* and type T.labexp = Instr.T.labexp *)
-!                       and type T.mlrisc = Instr.T.mlrisc
-!                       and type T.oper = Instr.T.oper
-!                       and type T.rep = Instr.T.rep
-!                       and type T.rexp = Instr.T.rexp
-!                       and type T.stm = Instr.T.stm
-!    structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          (* and type I.addressing_mode = Instr.addressing_mode *)
-!                          and type I.binaryOp = Instr.binaryOp
-!                          and type I.bitOp = Instr.bitOp
-!                          and type I.cond = Instr.cond
-!                          and type I.fbin_op = Instr.fbin_op
-!                          and type I.fcom_op = Instr.fcom_op
-!                          and type I.fmove_op = Instr.fmove_op
-!                          and type I.fsize = Instr.fsize
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.isize = Instr.isize
-!                          and type I.move = Instr.move
-!                          and type I.multDivOp = Instr.multDivOp
-!                          and type I.operand = Instr.operand
-!                          and type I.shiftOp = Instr.shiftOp
-!                          and type I.unaryOp = Instr.unaryOp
-!    structure MCEmitter : MC_EMIT (* where I = Instr *)
-!                          where type I.addressing_mode = Instr.addressing_mode
-!                            and type I.ea = Instr.ea
-!                            and type I.instr = Instr.instr
-!                            and type I.instruction = Instr.instruction
-!                            and type I.operand = Instr.operand
-!   ) : SDI_JUMPS = 
-  struct
-    structure I = Instr
-***************
-*** 40,47 ****
-  	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
-  	   | I.LEAL{addr, ...} => operand addr
-! 	   | I.LEAQ{addr, ...} => operand addr
-! 	   | ( I.CMPQ arg | I.CMPL arg | I.CMPW arg | I.CMPB arg 
-! 	     | I.TESTQ arg | I.TESTL arg | I.TESTW arg | I.TESTB arg) => cmptest arg
-! 	   | I.MULTDIV{src, ...} => operand src
-  	   | I.MUL3{src1, ...} => operand src1
-  	   | I.MULQ3{src1, ...} => operand src1
---- 102,115 ----
-  	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
-  	   | I.LEAL{addr, ...} => operand addr
-! 	   | I.LEAQ{addr, ...} => operand addr	
-! 	   | ( I.CMPQ arg ) => cmptest arg
-! 	   | ( I.CMPL arg ) => cmptest arg
-! 	   | ( I.CMPW arg ) => cmptest arg
-! 	   | ( I.CMPB arg ) => cmptest arg
-!            | ( I.TESTQ arg ) => cmptest arg
-!            | ( I.TESTL arg ) => cmptest arg
-!            | ( I.TESTW arg ) => cmptest arg
-!            | ( I.TESTB arg ) => cmptest arg
-!            | I.MULTDIV{src, ...} => operand src
-  	   | I.MUL3{src1, ...} => operand src1
-  	   | I.MULQ3{src1, ...} => operand src1
-***************
-*** 49,53 ****
-  	   | I.SET{opnd, ...} => operand opnd
-  	   | I.CMOV{src, dst, ...} => operand src 
-! 	   | (I.PUSHQ opnd | I.PUSHL opnd | I.PUSHW opnd | I.PUSHB opnd) => operand opnd
-  	   | I.POP opnd =>  operand opnd
-  	   | _ => false
---- 117,124 ----
-  	   | I.SET{opnd, ...} => operand opnd
-  	   | I.CMOV{src, dst, ...} => operand src 
-! 	   | (I.PUSHQ opnd) => operand opnd
-! 	   | (I.PUSHL opnd) => operand opnd
-! 	   | (I.PUSHW opnd) => operand opnd
-! 	   | (I.PUSHB opnd) => operand opnd
-  	   | I.POP opnd =>  operand opnd
-  	   | _ => false
-diff -N -C 2 -r MLRISC/amd64/emit/amd64Asm.sml MLRISC-mlton/amd64/emit/amd64Asm.sml
-*** MLRISC/amd64/emit/amd64Asm.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/emit/amd64Asm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,16 ****
-  
-  functor AMD64AsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : AMD64INSTR
-!                            where T = S.P.T
-!                         structure Shuffle : AMD64SHUFFLE
-!                            where I = Instr
-!                         structure MLTreeEval : MLTREE_EVAL
-!                            where T = Instr.T
-                         ) : INSTRUCTION_EMITTER =
-  struct
---- 7,89 ----
-  
-  functor AMD64AsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : AMD64INSTR (* where T = S.P.T *)
-!                                         where type T.Basis.cond = S.P.T.Basis.cond
-!                                           and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                           and type T.Basis.ext = S.P.T.Basis.ext
-!                                           and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                           and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                           and type T.Constant.const = S.P.T.Constant.const
-!                                           and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                           and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                           and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                           and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                           and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                           and type T.Region.region = S.P.T.Region.region
-!                                           and type T.ccexp = S.P.T.ccexp
-!                                           and type T.fexp = S.P.T.fexp
-!                                           (* and type T.labexp = S.P.T.labexp *)
-!                                           and type T.mlrisc = S.P.T.mlrisc
-!                                           and type T.oper = S.P.T.oper
-!                                           and type T.rep = S.P.T.rep
-!                                           and type T.rexp = S.P.T.rexp
-!                                           and type T.stm = S.P.T.stm
-!                         structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
-!                                           where type I.Constant.const = Instr.Constant.const
-!                                             and type I.Region.region = Instr.Region.region
-!                                             and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                             and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                             and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                             and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                             and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                             and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                             and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                             and type I.T.ccexp = Instr.T.ccexp
-!                                             and type I.T.fexp = Instr.T.fexp
-!                                             (* and type I.T.labexp = Instr.T.labexp *)
-!                                             and type I.T.mlrisc = Instr.T.mlrisc
-!                                             and type I.T.oper = Instr.T.oper
-!                                             and type I.T.rep = Instr.T.rep
-!                                             and type I.T.rexp = Instr.T.rexp
-!                                             and type I.T.stm = Instr.T.stm
-!                                             (* and type I.addressing_mode = Instr.addressing_mode *)
-!                                             and type I.binaryOp = Instr.binaryOp
-!                                             and type I.bitOp = Instr.bitOp
-!                                             and type I.cond = Instr.cond
-!                                             and type I.fbin_op = Instr.fbin_op
-!                                             and type I.fcom_op = Instr.fcom_op
-!                                             and type I.fmove_op = Instr.fmove_op
-!                                             and type I.fsize = Instr.fsize
-!                                             and type I.instr = Instr.instr
-!                                             and type I.instruction = Instr.instruction
-!                                             and type I.isize = Instr.isize
-!                                             and type I.move = Instr.move
-!                                             and type I.multDivOp = Instr.multDivOp
-!                                             and type I.operand = Instr.operand
-!                                             and type I.shiftOp = Instr.shiftOp
-!                                             and type I.unaryOp = Instr.unaryOp
-!                         structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                              where type T.Basis.cond = Instr.T.Basis.cond
-!                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                and type T.Basis.ext = Instr.T.Basis.ext
-!                                                and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                and type T.Constant.const = Instr.T.Constant.const
-!                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                and type T.Region.region = Instr.T.Region.region
-!                                                and type T.ccexp = Instr.T.ccexp
-!                                                and type T.fexp = Instr.T.fexp
-!                                                (* and type T.labexp = Instr.T.labexp *)
-!                                                and type T.mlrisc = Instr.T.mlrisc
-!                                                and type T.oper = Instr.T.oper
-!                                                and type T.rep = Instr.T.rep
-!                                                and type T.rexp = Instr.T.rexp
-!                                                and type T.stm = Instr.T.stm
-                         ) : INSTRUCTION_EMITTER =
-  struct
-***************
-*** 373,377 ****
-         in 
-            (case Char.toLower (String.sub (fbinOp, n - 1)) of
-!             (#"s" | #"l") => String.substring (fbinOp, 0, n - 1)
-            | _ => fbinOp
-            )
---- 446,451 ----
-         in 
-            (case Char.toLower (String.sub (fbinOp, n - 1)) of
-!             (#"s") => String.substring (fbinOp, 0, n - 1)
-!           | (#"l") => String.substring (fbinOp, 0, n - 1)
-            | _ => fbinOp
-            )
-***************
-*** 514,529 ****
-           (case (src, binOp) of
-             (I.Direct _, 
-!            ( I.SARQ |
-!            I.SHRQ |
-!            I.SHLQ |
-!            I.SARL |
-!            I.SHRL |
-!            I.SHLL |
-!            I.SARW |
-!            I.SHRW |
-!            I.SHLW |
-!            I.SARB |
-!            I.SHRB |
-!            I.SHLB )) => 
-             ( emit_binaryOp binOp; 
-               emit "\t%cl, "; 
---- 588,647 ----
-           (case (src, binOp) of
-             (I.Direct _, 
-!            ( I.SARQ )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHRQ )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHLQ )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SARL )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHRL )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHLL )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!         | (I.Direct _, 
-!            ( I.SARW )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHRW )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHLW )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!         | (I.Direct _, 
-!            ( I.SARB )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHRB )) =>
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, 
-!            ( I.SHLB )) =>
-             ( emit_binaryOp binOp; 
-               emit "\t%cl, "; 
-diff -N -C 2 -r MLRISC/amd64/flowgraph/amd64-darwin-pseudo-ops.sml MLRISC-mlton/amd64/flowgraph/amd64-darwin-pseudo-ops.sml
-*** MLRISC/amd64/flowgraph/amd64-darwin-pseudo-ops.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/flowgraph/amd64-darwin-pseudo-ops.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 8,12 ****
-  
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL  where T = T
-  
-    ) : PSEUDO_OPS_BASIS = struct
---- 8,32 ----
-  
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                            where type T.Basis.cond = T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = T.Basis.ext
-!                              and type T.Basis.fcond = T.Basis.fcond
-!                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                              and type T.Constant.const = T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                              and type T.Region.region = T.Region.region
-!                              and type T.ccexp = T.ccexp
-!                              and type T.fexp = T.fexp
-!                              (* and type T.labexp = T.labexp *)
-!                              and type T.mlrisc = T.mlrisc
-!                              and type T.oper = T.oper
-!                              and type T.rep = T.rep
-!                              and type T.rexp = T.rexp
-!                              and type T.stm = T.stm
-  
-    ) : PSEUDO_OPS_BASIS = struct
-diff -N -C 2 -r MLRISC/amd64/flowgraph/amd64GasPseudoOps.sml MLRISC-mlton/amd64/flowgraph/amd64GasPseudoOps.sml
-*** MLRISC/amd64/flowgraph/amd64GasPseudoOps.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/flowgraph/amd64GasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,11 ****
-  functor AMD64GasPseudoOps (
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL  where T = T
-    ) : PSEUDO_OPS_BASIS =  struct
+        fun doNothing _ = ()
+diff --git a/alpha/flowgraph/alphaGasPseudoOps.sml b/alpha/flowgraph/alphaGasPseudoOps.sml
+index e6ba8a1..b616d67 100644
+--- a/alpha/flowgraph/alphaGasPseudoOps.sml
++++ b/alpha/flowgraph/alphaGasPseudoOps.sml
+@@ -1,6 +1,26 @@
+ functor AlphaGasPseudoOps 
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL  where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+     ) : PSEUDO_OPS_BASIS = 
+ 
+ struct
+diff --git a/alpha/instructions/alphaInstr.sml b/alpha/instructions/alphaInstr.sml
+index e1ceb2b..216c8ae 100644
+--- a/alpha/instructions/alphaInstr.sml
++++ b/alpha/instructions/alphaInstr.sml
+@@ -8,7 +8,16 @@
+ signature ALPHAINSTR =
+ sig
+    structure C : ALPHACELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure T : MLTREE
+    structure Constant: CONSTANT
+    structure Region : REGION
+diff --git a/alpha/instructions/alphaProps.sml b/alpha/instructions/alphaProps.sml
+index 8b6771e..6c39fa7 100644
+--- a/alpha/instructions/alphaProps.sml
++++ b/alpha/instructions/alphaProps.sml
+@@ -6,8 +6,48 @@
+ 
+ functor AlphaProps
+    (structure Instr : ALPHAINSTR
+-    structure MLTreeHash :  MLTREE_HASH where T = Instr.T
+-    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++    structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
++    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
+     ):INSN_PROPERTIES =
+ struct
+     structure I = Instr
+diff --git a/alpha/mltree/alpha.sml b/alpha/mltree/alpha.sml
+index c7b22a3..d7375bb 100644
+--- a/alpha/mltree/alpha.sml
++++ b/alpha/mltree/alpha.sml
+@@ -11,11 +11,72 @@
+ 
+ functor Alpha
+    (structure AlphaInstr : ALPHAINSTR 
+-    structure PseudoInstrs : ALPHA_PSEUDO_INSTR
+-    			where I = AlphaInstr
+-    structure ExtensionComp : MLTREE_EXTENSION_COMP
+-    			where I = AlphaInstr
+-			  and T = AlphaInstr.T
++    structure PseudoInstrs : ALPHA_PSEUDO_INSTR (* where I = AlphaInstr *)
++                             where type I.Constant.const = AlphaInstr.Constant.const
++                               and type I.Region.region = AlphaInstr.Region.region
++                               and type I.T.Basis.cond = AlphaInstr.T.Basis.cond
++                               and type I.T.Basis.div_rounding_mode = AlphaInstr.T.Basis.div_rounding_mode
++                               and type I.T.Basis.ext = AlphaInstr.T.Basis.ext
++                               and type I.T.Basis.fcond = AlphaInstr.T.Basis.fcond
++                               and type I.T.Basis.rounding_mode = AlphaInstr.T.Basis.rounding_mode
++                               and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) AlphaInstr.T.Extension.ccx
++                               and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) AlphaInstr.T.Extension.fx
++                               and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) AlphaInstr.T.Extension.rx
++                               and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) AlphaInstr.T.Extension.sx
++                               and type I.T.I.div_rounding_mode = AlphaInstr.T.I.div_rounding_mode
++                               and type I.T.ccexp = AlphaInstr.T.ccexp
++                               and type I.T.fexp = AlphaInstr.T.fexp
++                               (* and type I.T.labexp = AlphaInstr.T.labexp *)
++                               and type I.T.mlrisc = AlphaInstr.T.mlrisc
++                               and type I.T.oper = AlphaInstr.T.oper
++                               and type I.T.rep = AlphaInstr.T.rep
++                               and type I.T.rexp = AlphaInstr.T.rexp
++                               and type I.T.stm = AlphaInstr.T.stm
++                               and type I.branch = AlphaInstr.branch
++                               and type I.cmove = AlphaInstr.cmove
++                               and type I.ea = AlphaInstr.ea
++                               and type I.fbranch = AlphaInstr.fbranch
++                               and type I.fcmove = AlphaInstr.fcmove
++                               and type I.fload = AlphaInstr.fload
++                               and type I.foperate = AlphaInstr.foperate
++                               and type I.foperateV = AlphaInstr.foperateV
++                               and type I.fstore = AlphaInstr.fstore
++                               and type I.funary = AlphaInstr.funary
++                               and type I.instr = AlphaInstr.instr
++                               and type I.instruction = AlphaInstr.instruction
++                               and type I.load = AlphaInstr.load
++                               and type I.operand = AlphaInstr.operand
++                               and type I.operate = AlphaInstr.operate
++                               and type I.operateV = AlphaInstr.operateV
++                               and type I.osf_user_palcode = AlphaInstr.osf_user_palcode
++                               and type I.pseudo_op = AlphaInstr.pseudo_op
++                               and type I.store = AlphaInstr.store
++    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = AlphaInstr and T = AlphaInstr.T *)
++                              where type I.addressing_mode = AlphaInstr.addressing_mode
++                                and type I.ea = AlphaInstr.ea
++                                and type I.instr = AlphaInstr.instr
++                                and type I.instruction = AlphaInstr.instruction
++                                and type I.operand = AlphaInstr.operand
++                              where type T.Basis.cond = AlphaInstr.T.Basis.cond
++                                and type T.Basis.div_rounding_mode = AlphaInstr.T.Basis.div_rounding_mode
++                                and type T.Basis.ext = AlphaInstr.T.Basis.ext
++                                and type T.Basis.fcond = AlphaInstr.T.Basis.fcond
++                                and type T.Basis.rounding_mode = AlphaInstr.T.Basis.rounding_mode
++                                and type T.Constant.const = AlphaInstr.T.Constant.const
++                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) AlphaInstr.T.Extension.ccx
++                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) AlphaInstr.T.Extension.fx
++                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) AlphaInstr.T.Extension.rx
++                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) AlphaInstr.T.Extension.sx
++                                and type T.I.div_rounding_mode = AlphaInstr.T.I.div_rounding_mode
++                                and type T.Region.region = AlphaInstr.T.Region.region
++                                and type T.ccexp = AlphaInstr.T.ccexp
++                                and type T.fexp = AlphaInstr.T.fexp
++                                (* and type T.labexp = AlphaInstr.T.labexp *)
++                                and type T.mlrisc = AlphaInstr.T.mlrisc
++                                and type T.oper = AlphaInstr.T.oper
++                                and type T.rep = AlphaInstr.T.rep
++                                and type T.rexp = AlphaInstr.T.rexp
++                                and type T.stm = AlphaInstr.T.stm
+ 
+       (* Cost of multiplication in cycles *)
+     val multCost : int ref
+@@ -215,7 +276,9 @@ struct
+    * Specialize the modules for multiplication/division 
+    * by constant optimizations.
+    *)
+-  functor Multiply32 = MLTreeMult
++
++  (* signed, trapping version of multiply and divide *)
++  structure Mult32 = MLTreeMult
+     (structure I = I
       structure T = T
---- 7,31 ----
-  functor AMD64GasPseudoOps (
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                            where type T.Basis.cond = T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = T.Basis.ext
-!                              and type T.Basis.fcond = T.Basis.fcond
-!                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                              and type T.Constant.const = T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                              and type T.Region.region = T.Region.region
-!                              and type T.ccexp = T.ccexp
-!                              and type T.fexp = T.fexp
-!                              (* and type T.labexp = T.labexp *)
-!                              and type T.mlrisc = T.mlrisc
-!                              and type T.oper = T.oper
-!                              and type T.rep = T.rep
-!                              and type T.rexp = T.rexp
-!                              and type T.stm = T.stm
-    ) : PSEUDO_OPS_BASIS =  struct
+      structure CB = CellsBasis
+@@ -256,40 +319,115 @@ struct
+          in  [I.operate{oper=I.ADDL,ra=r,rb=zeroOpn,rc=tmp},
+               I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
+          end 
+-    )
+ 
+-  functor Multiply64 = MLTreeMult
++     val trapping = true
++     val multCost = multCost
++     fun addv{r1,r2,d} = [I.operatev{oper=I.ADDLV,ra=r1,rb=I.REGop r2,rc=d}]
++     fun subv{r1,r2,d} = [I.operatev{oper=I.SUBLV,ra=r1,rb=I.REGop r2,rc=d}]
++     val sh1addv = NONE
++     val sh2addv = NONE
++     val sh3addv = NONE
++     
++     val signed = true)
++
++  (* unsigned, non-trapping version of multiply and divide *)
++  structure Mulu32 = MLTreeMult
+     (structure I = I
       structure T = T
-diff -N -C 2 -r MLRISC/amd64/instructions/amd64CompInstrExt.sml MLRISC-mlton/amd64/instructions/amd64CompInstrExt.sml
-*** MLRISC/amd64/instructions/amd64CompInstrExt.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/instructions/amd64CompInstrExt.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 8,16 ****
-  signature AMD64COMP_INSTR_EXT = sig
-    structure I : AMD64INSTR
-!   structure TS : MLTREE_STREAM
-! 		 where T = I.T
-!   structure CFG : CONTROL_FLOW_GRAPH 
-!  	         where I = I
-!                    and P = TS.S.P
-  
-    type reducer = 
---- 8,59 ----
-  signature AMD64COMP_INSTR_EXT = sig
-    structure I : AMD64INSTR
-!   structure TS : MLTREE_STREAM (* where T = I.T *)
-!                  where type T.Basis.cond = I.T.Basis.cond
-!                    and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                    and type T.Basis.ext = I.T.Basis.ext
-!                    and type T.Basis.fcond = I.T.Basis.fcond
-!                    and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                    and type T.Constant.const = I.T.Constant.const
-!                    and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                    and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                    and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                    and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                    and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                    and type T.Region.region = I.T.Region.region
-!                    and type T.ccexp = I.T.ccexp
-!                    and type T.fexp = I.T.fexp
-!                    (* and type T.labexp = I.T.labexp *)
-!                    and type T.mlrisc = I.T.mlrisc
-!                    and type T.oper = I.T.oper
-!                    and type T.rep = I.T.rep
-! 	           and type T.rexp = I.T.rexp
-!                    and type T.stm = I.T.stm
-!   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
-!                   where type I.addressing_mode = I.addressing_mode
-!                     and type I.ea = I.ea
-!                     and type I.instr = I.instr
-!                     and type I.instruction = I.instruction
-!                     and type I.operand = I.operand
-!                   where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                     and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                     and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                     and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                     and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                     and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                     and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                     and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                     and type P.T.Region.region = TS.S.P.T.Region.region
-!                     and type P.T.ccexp = TS.S.P.T.ccexp
-!                     and type P.T.fexp = TS.S.P.T.fexp
-!                     (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                     and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                     and type P.T.oper = TS.S.P.T.oper
-!                     and type P.T.rep = TS.S.P.T.rep
-!                     and type P.T.rexp = TS.S.P.T.rexp
-!                     and type P.T.stm = TS.S.P.T.stm
-  
-    type reducer = 
-***************
-*** 27,35 ****
-  functor AMD64CompInstrExt
-    ( structure I : AMD64INSTR
-!     structure TS  : MLTREE_STREAM
-! 		   where T = I.T
-!     structure CFG : CONTROL_FLOW_GRAPH 
-! 		   where P = TS.S.P
-! 		     and I = I
-     ) : AMD64COMP_INSTR_EXT = 
-  struct
---- 70,121 ----
-  functor AMD64CompInstrExt
-    ( structure I : AMD64INSTR
-!     structure TS  : MLTREE_STREAM (* where T = I.T *)
-!                     where type T.Basis.cond = I.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = I.T.Basis.ext
-!                       and type T.Basis.fcond = I.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                       and type T.Constant.const = I.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                       and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                       and type T.Region.region = I.T.Region.region
-!                       and type T.ccexp = I.T.ccexp
-!                       and type T.fexp = I.T.fexp
-!                       (* and type T.labexp = I.T.labexp *)
-!                       and type T.mlrisc = I.T.mlrisc
-!                       and type T.oper = I.T.oper
-!                       and type T.rep = I.T.rep
-!                       and type T.rexp = I.T.rexp
-!                       and type T.stm = I.T.stm
-!     structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
-!                     where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = TS.S.P.T.Region.region
-!                       and type P.T.ccexp = TS.S.P.T.ccexp
-!                       and type P.T.fexp = TS.S.P.T.fexp
-!                       (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                       and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                       and type P.T.oper = TS.S.P.T.oper
-!                       and type P.T.rep = TS.S.P.T.rep
-!                       and type P.T.rexp = TS.S.P.T.rexp
-!                       and type P.T.stm = TS.S.P.T.stm
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-     ) : AMD64COMP_INSTR_EXT = 
-  struct
-diff -N -C 2 -r MLRISC/amd64/instructions/amd64Instr.sml MLRISC-mlton/amd64/instructions/amd64Instr.sml
-*** MLRISC/amd64/instructions/amd64Instr.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/instructions/amd64Instr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : AMD64CELLS
-!    structure CB : CELLS_BASIS = CellsBasis
+      structure CB = CellsBasis
+    
+-     val intTy = 64
++     val intTy = 32
+ 
+-     type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
+-     type argi = {r:CB.cell, i:int, d:CB.cell}
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
+ 
+      fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
+-     fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
+-     fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
+-     fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
+-     fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
+-    )
++     fun add{r1,r2,d} = I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}
++     (*
++      * How to left shift by a constant (32bits)
++      *)
++     fun slli{r,i=1,d} = [I.operate{oper=I.ADDL,ra=r,rb=I.REGop r,rc=d}]
++       | slli{r,i=2,d} = [I.operate{oper=I.S4ADDL,ra=r,rb=zeroOpn,rc=d}]
++       | slli{r,i=3,d} = [I.operate{oper=I.S8ADDL,ra=r,rb=zeroOpn,rc=d}]
++       | slli{r,i,d}   =
++          let val tmp = C.newReg()
++          in  [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=tmp},
++               I.operate{oper=I.ADDL,ra=tmp,rb=zeroOpn,rc=d}]
++          end
+ 
+-  (* signed, trapping version of multiply and divide *)
+-  structure Mult32 = Multiply32
+-    (val trapping = true
++     (*
++      * How to right shift (unsigned) by a constant (32bits)
++      *)
++     fun srli{r,i,d} =
++         let val tmp = C.newReg()
++         in  [I.operate{oper=I.ZAP,ra=r,rb=I.IMMop 0xf0,rc=tmp},
++              I.operate{oper=I.SRL,ra=tmp,rb=I.IMMop i,rc=d}]
++         end
++
++     (*
++      * How to right shift (signed) by a constant (32bits)
++      *)
++     fun srai{r,i,d} =
++         let val tmp = C.newReg()
++         in  [I.operate{oper=I.ADDL,ra=r,rb=zeroOpn,rc=tmp},
++              I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
++         end
++     
++     val trapping = false
+      val multCost = multCost
+-     fun addv{r1,r2,d} = [I.operatev{oper=I.ADDLV,ra=r1,rb=I.REGop r2,rc=d}]
+-     fun subv{r1,r2,d} = [I.operatev{oper=I.SUBLV,ra=r1,rb=I.REGop r2,rc=d}]
++     fun addv{r1,r2,d} = [I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}]
++     fun subv{r1,r2,d} = [I.operate{oper=I.SUBL,ra=r1,rb=I.REGop r2,rc=d}]
+      val sh1addv = NONE
+-     val sh2addv = NONE
+-     val sh3addv = NONE
+-    )
+-    (val signed = true)
++     val sh2addv = SOME(fn {r1,r2,d} =>
++                    [I.operate{oper=I.S4ADDL,ra=r1,rb=I.REGop r2,rc=d}])
++     val sh3addv = SOME(fn {r1,r2,d} =>
++                    [I.operate{oper=I.S8ADDL,ra=r1,rb=I.REGop r2,rc=d}])
++     
++     val signed = false)
++  (* signed, non-trapping version of multiply and divide *)
++  structure Muls32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++
++     val intTy = 32
++   
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
+ 
+-  (* non-trapping version of multiply and divide *)
+-  functor Mul32 = Multiply32
+-    (val trapping = false
++     fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}
++     (*
++      * How to left shift by a constant (32bits)
++      *)
++     fun slli{r,i=1,d} = [I.operate{oper=I.ADDL,ra=r,rb=I.REGop r,rc=d}]
++       | slli{r,i=2,d} = [I.operate{oper=I.S4ADDL,ra=r,rb=zeroOpn,rc=d}]
++       | slli{r,i=3,d} = [I.operate{oper=I.S8ADDL,ra=r,rb=zeroOpn,rc=d}]
++       | slli{r,i,d}   =
++          let val tmp = C.newReg()
++          in  [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=tmp},
++               I.operate{oper=I.ADDL,ra=tmp,rb=zeroOpn,rc=d}]
++          end
++
++     (*
++      * How to right shift (unsigned) by a constant (32bits)
++      *)
++     fun srli{r,i,d} =
++         let val tmp = C.newReg()
++         in  [I.operate{oper=I.ZAP,ra=r,rb=I.IMMop 0xf0,rc=tmp},
++              I.operate{oper=I.SRL,ra=tmp,rb=I.IMMop i,rc=d}]
++         end
++
++     (*
++      * How to right shift (signed) by a constant (32bits)
++      *)
++     fun srai{r,i,d} =
++         let val tmp = C.newReg()
++         in  [I.operate{oper=I.ADDL,ra=r,rb=zeroOpn,rc=tmp},
++              I.operate{oper=I.SRA,ra=tmp,rb=I.IMMop i,rc=d}]
++         end
++
++     val trapping = false
+      val multCost = multCost
+      fun addv{r1,r2,d} = [I.operate{oper=I.ADDL,ra=r1,rb=I.REGop r2,rc=d}]
+      fun subv{r1,r2,d} = [I.operate{oper=I.SUBL,ra=r1,rb=I.REGop r2,rc=d}]
+@@ -298,25 +436,82 @@ struct
+                     [I.operate{oper=I.S4ADDL,ra=r1,rb=I.REGop r2,rc=d}])
+      val sh3addv = SOME(fn {r1,r2,d} => 
+                     [I.operate{oper=I.S8ADDL,ra=r1,rb=I.REGop r2,rc=d}])
+-    )
+-  structure Mulu32 = Mul32(val signed = false)
+-  structure Muls32 = Mul32(val signed = true)
++     
++     val signed = true)
+ 
+   (* signed, trapping version of multiply and divide *)
+-  structure Mult64 = Multiply64
+-    (val trapping = true
++  structure Mult64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++   
++     val intTy = 64
++
++     type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
++     type argi = {r:CB.cell, i:int, d:CB.cell}
++
++     fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
++     fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
++     
++     val trapping = true
+      val multCost = multCost
+      fun addv{r1,r2,d} = [I.operatev{oper=I.ADDQV,ra=r1,rb=I.REGop r2,rc=d}]
+      fun subv{r1,r2,d} = [I.operatev{oper=I.SUBQV,ra=r1,rb=I.REGop r2,rc=d}]
+      val sh1addv = NONE
+      val sh2addv = NONE
+      val sh3addv = NONE
+-    )
+-    (val signed = true)
++     
++     val signed = true)
+ 
+   (* unsigned, non-trapping version of multiply and divide *)
+-  functor Mul64 = Multiply64
+-    (val trapping = false
++  structure Mulu64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++   
++     val intTy = 64
++
++     type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
++     type argi = {r:CB.cell, i:int, d:CB.cell}
++
++     fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
++     fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
++    
++     val trapping = false
++     val multCost = multCost
++     fun addv{r1,r2,d} = [I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}]
++     fun subv{r1,r2,d} = [I.operate{oper=I.SUBQ,ra=r1,rb=I.REGop r2,rc=d}]
++     val sh1addv = NONE
++     val sh2addv = SOME(fn {r1,r2,d} => 
++                    [I.operate{oper=I.S4ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
++     val sh3addv = SOME(fn {r1,r2,d} => 
++                    [I.operate{oper=I.S8ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
++     
++     val signed = false)
++  (* signed, non-trapping version of multiply and divide *)
++  structure Muls64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++   
++     val intTy = 64
++
++     type arg  = {r1:CB.cell, r2:CB.cell, d:CB.cell}
++     type argi = {r:CB.cell, i:int, d:CB.cell}
++
++     fun mov{r,d}    = I.COPY{k=CB.GP, sz=intTy, dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d}= I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}
++     fun slli{r,i,d} = [I.operate{oper=I.SLL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srli{r,i,d} = [I.operate{oper=I.SRL,ra=r,rb=I.IMMop i,rc=d}]
++     fun srai{r,i,d} = [I.operate{oper=I.SRA,ra=r,rb=I.IMMop i,rc=d}]
++     
++     val trapping = false
+      val multCost = multCost
+      fun addv{r1,r2,d} = [I.operate{oper=I.ADDQ,ra=r1,rb=I.REGop r2,rc=d}]
+      fun subv{r1,r2,d} = [I.operate{oper=I.SUBQ,ra=r1,rb=I.REGop r2,rc=d}]
+@@ -325,9 +520,8 @@ struct
+                     [I.operate{oper=I.S4ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
+      val sh3addv = SOME(fn {r1,r2,d} => 
+                     [I.operate{oper=I.S8ADDQ,ra=r1,rb=I.REGop r2,rc=d}])
+-    )
+-  structure Mulu64 = Mul64(val signed = false)
+-  structure Muls64 = Mul64(val signed = true)
++     
++     val signed = true)
+ 
+   (* 
+    * The main stuff
+@@ -971,10 +1165,10 @@ struct
+              *)
+           | T.ADD(64,e,T.LABEXP le) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
+           | T.ADD(64,T.LABEXP le,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop le},an)
+-          | T.ADD(64,e,x as (T.CONST _ | T.LABEL _))  => 
+-               mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
+-          | T.ADD(64,x as (T.CONST _ | T.LABEL _),e)  => 
+-               mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
++          | T.ADD(64,e,x as T.CONST _) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
++          | T.ADD(64,e,x as T.LABEL _) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
++          | T.ADD(64,x as T.CONST _,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
++          | T.ADD(64,x as T.LABEL _,e) => mark(I.LDA{r=d,b=expr e,d=I.LABop x},an)
+           | T.ADD(64,e,T.LI i)     => loadImmed(i, expr e, d, an)
+           | T.ADD(64,T.LI i,e)     => loadImmed(i, expr e, d, an)
+ 	  | T.SUB(sz, a, b as T.LI z)    =>
+@@ -1067,8 +1261,13 @@ struct
+           | T.SX(_,_,T.LOAD(8,ea,mem)) => load8s(ea,d,mem,an)
+           | T.SX(_,_,T.LOAD(16,ea,mem))=> load16s(ea,d,mem,an)
+           | T.SX(_,_,T.LOAD(32,ea,mem))=> load32s(ea,d,mem,an)
+-          | T.ZX((8|16|32|64),_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
+-          | T.ZX((16|32|64),_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
++          | T.ZX(8,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
++          | T.ZX(16,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
++          | T.ZX(32,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
++          | T.ZX(64,_,T.LOAD(8,ea,mem)) => load8(ea,d,mem,an)
++          | T.ZX(16,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
++          | T.ZX(32,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
++          | T.ZX(64,_,T.LOAD(16,ea,mem))=> load16(ea,d,mem,an)
+           | T.ZX(64,_,T.LOAD(64,ea,mem)) => load(I.LDQ,ea,d,mem,an)
+           | T.LOAD(8,ea,mem) => load8(ea,d,mem,an)
+           | T.LOAD(16,ea,mem) => load16(ea,d,mem,an)
+@@ -1391,8 +1590,10 @@ struct
+               val (cond,a,b) = 
+                 (* move the immed operand to b *)
+                 case a of
+-                  (T.LI _ | T.CONST _ | T.LABEL _ | T.LABEXP _) => 
+-                    (T.Basis.swapCond cond,b,a)
++                  T.LI _ => (T.Basis.swapCond cond,b,a)
++                | T.CONST _ => (T.Basis.swapCond cond,b,a)
++                | T.LABEL _ => (T.Basis.swapCond cond,b,a)
++                | T.LABEXP _ => (T.Basis.swapCond cond,b,a)
+                 | _ => (cond,a,b)
+ 
+               fun sub(a, T.LI z) = 
+@@ -1455,8 +1656,10 @@ struct
+                   end
+               val (cond,e1,e2) =
+ 		  case e1 of
+-                    (T.LI _ | T.CONST _ | T.LABEL _ | T.LABEXP _) => 
+-                       (T.Basis.swapCond cond,e2,e1)
++                    T.LI _ => (T.Basis.swapCond cond,e2,e1)
++                  | T.CONST _ => (T.Basis.swapCond cond,e2,e1)
++                  | T.LABEL _ => (T.Basis.swapCond cond,e2,e1)
++                  | T.LABEXP _ => (T.Basis.swapCond cond,e2,e1)
+                   | _ => (cond,e1,e2)
+           in  case cond of
+                 T.EQ  => eq(e1,e2,d)
+diff --git a/alpha/mltree/alphaPseudoInstr.sig b/alpha/mltree/alphaPseudoInstr.sig
+index a22feeb..f9c584e 100644
+--- a/alpha/mltree/alphaPseudoInstr.sig
++++ b/alpha/mltree/alphaPseudoInstr.sig
+@@ -4,10 +4,39 @@ signature ALPHA_PSEUDO_INSTR =
+ sig
+    structure I : ALPHAINSTR
+    structure T : MLTREE
++                 where type Basis.cond = I.T.Basis.cond
++                   and type Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                   and type Basis.ext = I.T.Basis.ext
++                   and type Basis.fcond = I.T.Basis.fcond
++                   and type Basis.rounding_mode = I.T.Basis.rounding_mode
++                   and type Constant.const = I.T.Constant.const
++                   and type ('s,'r,'f,'c) Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                   and type ('s,'r,'f,'c) Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                   and type ('s,'r,'f,'c) Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                   and type ('s,'r,'f,'c) Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                   and type I.div_rounding_mode = I.T.I.div_rounding_mode
++                   and type Region.region = I.T.Region.region
++                   and type ccexp = I.T.ccexp
++                   and type fexp = I.T.fexp
++                   (* and type labexp = I.T.labexp *)
++                   and type mlrisc = I.T.mlrisc
++                   and type oper = I.T.oper
++                   and type rep = I.T.rep
++                   and type rexp = I.T.rexp
++                   and type stm = I.T.stm
+    structure C : ALPHACELLS
+-     sharing C = I.C
+-     sharing I.T = T
+-   structure CB: CELLS_BASIS = CellsBasis
++     (* sharing C = I.C *)
++     (* sharing I.T = T *)
++   structure CB: CELLS_BASIS (* = CellsBasis *)
++                 where type CellSet.cellset = CellsBasis.CellSet.cellset
++                   and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                   and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                   and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                   and type cell = CellsBasis.cell
++                   and type cellColor = CellsBasis.cellColor
++                   and type cellkind = CellsBasis.cellkind
++                   and type cellkindDesc = CellsBasis.cellkindDesc
++                   and type cellkindInfo = CellsBasis.cellkindInfo
+   
+    type reduceOpnd = I.operand -> CB.cell
+ 
+diff --git a/amd64/amd64.mdl b/amd64/amd64.mdl
+index beef155..1d715eb 100644
+--- a/amd64/amd64.mdl
++++ b/amd64/amd64.mdl
+@@ -577,7 +577,8 @@ architecture AMD64 =
+       fun chop fbinOp =
+           let val n = size fbinOp
+           in  case Char.toLower(String.sub(fbinOp,n-1)) of
+-                (#"s" | #"l") => String.substring(fbinOp,0,n-1)
++                (#"s") => String.substring(fbinOp,0,n-1)
++              | (#"l") => String.substring(fbinOp,0,n-1)
+               | _ => fbinOp
+           end
+ 
+@@ -709,10 +710,29 @@ architecture AMD64 =
+     | BINARY of {binOp:binaryOp, src:operand, dst:operand}
+ 	asm: (case (src,binOp) of
+                (I.Direct _,  (* tricky business here for shifts *)
+-               (I.SARQ | I.SHRQ | I.SHLQ |
+-		I.SARL | I.SHRL | I.SHLL |
+-                I.SARW | I.SHRW | I.SHLW |
+-                I.SARB | I.SHRB | I.SHLB)) => ``<binOp>\t%cl, <dst>''
++                I.SARQ) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRQ) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLQ) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SARL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SARW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SARB) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRB) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLB) => ``<binOp>\t%cl, <dst>''
+              | _ => ``<binOp>\t<src>, <dst>''
+              )
+ 	(*rtl: ``<binOp>''*)
+diff --git a/amd64/amd64MC.sml b/amd64/amd64MC.sml
+index 1e4f1f2..1d094de 100644
+--- a/amd64/amd64MC.sml
++++ b/amd64/amd64MC.sml
+@@ -1,8 +1,69 @@
+ functor AMD64MCEmitter
+   (structure Instr : AMD64INSTR
+-   structure Shuffle : AMD64SHUFFLE where I = Instr
+-   structure MLTreeEval : MLTREE_EVAL where T = Instr.T
+-   structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr) : MC_EMIT = 
++   structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         (* and type I.addressing_mode = Instr.addressing_mode *)
++                         and type I.binaryOp = Instr.binaryOp
++                         and type I.bitOp = Instr.bitOp
++                         and type I.cond = Instr.cond
++                         and type I.fbin_op = Instr.fbin_op
++                         and type I.fcom_op = Instr.fcom_op
++                         and type I.fmove_op = Instr.fmove_op
++                         and type I.fsize = Instr.fsize
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.isize = Instr.isize
++                         and type I.move = Instr.move
++                         and type I.multDivOp = Instr.multDivOp
++                         and type I.operand = Instr.operand
++                         and type I.shiftOp = Instr.shiftOp
++                         and type I.unaryOp = Instr.unaryOp
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
++   structure AsmEmitter : INSTRUCTION_EMITTER (* where I = Instr *)
++                          where type I.addressing_mode = Instr.addressing_mode
++                            and type I.ea = Instr.ea
++                            and type I.instr = Instr.instr
++                            and type I.instruction = Instr.instruction
++                            and type I.operand = Instr.operand) : MC_EMIT =
+ struct
+   structure I = Instr
+   structure C = I.C
+@@ -327,7 +388,21 @@ struct
+ 		     | I.SHLQ => shift(64, 4, src)
+ 		     | I.SARQ => shift(64, 7, src)
+ 		     | I.SHRQ => shift(64, 5, src)
+-		     | (I.IMULL | I.MULQ) => 
++		     | (I.IMULL) =>
++		       let val sz = if binOp = I.IMULQ then 64 else 32
++		       in (case (src, dst)
++			    of (I.Immed(i), I.Direct (_, dstR)) =>
++			       (case size i
++				 of Bits32 =>
++				    encodeLongImm sz (0wx69, reg (rNum dstR), dst, i)
++				  | _ => encodeByteImm sz (0wx6b, reg (rNum dstR), dst, i)
++			       (* esac *))
++			     | (_, I.Direct (_, dstR)) =>
++			       eBytes (encode32' ([0wx0f, 0wxaf], reg (rNum dstR), src))
++			     | _ => error "imul"
++			  (* esac *))
++		       end
++		     | (I.MULQ) =>
+ 		       let val sz = if binOp = I.IMULQ then 64 else 32
+ 		       in (case (src, dst) 
+ 			    of (I.Immed(i), I.Direct (_, dstR)) =>
+@@ -379,19 +454,34 @@ struct
+ 	     | I.INTO => eByte(0xcd+4)
+ 	     | I.CDQ => eByte(0x99)
+ 	     | I.SAHF => eByte(0x9e)
+-	     | ( I.PUSHL (I.Immed i) | I.PUSHQ (I.Immed i) )=> 
++	     | ( I.PUSHL (I.Immed i) )=>
+ 	       (case size i 
+ 		 of Bits32 => eBytes(0wx68 :: eLong(i))
+ 		  | _ => eBytes [0wx6a, toWord8 i]
+ 	       (* esac *))
+-	     | ( I.PUSHL (I.Direct (_, r)) |
+-		 I.PUSHQ (I.Direct (_, r)) ) => eByte (0x50+rNum r)
+-	     | ( I.PUSHL opnd | I.PUSHQ opnd ) => encode32 (0wxff, opcode 6, opnd)
++	     | ( I.PUSHQ (I.Immed i) )=>
++	       (case size i
++		 of Bits32 => eBytes(0wx68 :: eLong(i))
++		  | _ => eBytes [0wx6a, toWord8 i]
++	       (* esac *))
++	     | ( I.PUSHL (I.Direct (_, r)) ) => eByte (0x50+rNum r)
++	     | ( I.PUSHQ (I.Direct (_, r)) ) => eByte (0x50+rNum r)
++	     | ( I.PUSHL opnd ) => encode32 (0wxff, opcode 6, opnd)
++	     | ( I.PUSHQ opnd ) => encode32 (0wxff, opcode 6, opnd)
+ 	     | I.POP (I.Direct (_, r)) => eByte (0x58+rNum r)
+ 	     | I.POP opnd => encode32 (0wx8f, opcode 0, opnd)		     
+ 	     | I.LEAL{r32, addr} => encodeReg32(0wx8d, r32, addr)			  
+ 	     | I.LEAQ{r64, addr} => encodeReg64(0wx8d, r64, addr)			  
+-	     | I.MOVE{mvOp=mvOp as (I.MOVL | I.MOVQ), src, dst} => 
++	     | I.MOVE{mvOp=mvOp as (I.MOVL), src, dst} =>
++	       let val sz = case mvOp of I.MOVL => 32 | I.MOVQ => 64
++		   fun mv(I.Immed(i), I.Direct (_, r)) =
++                       eBytes(Word8.+(0wxb8, Word8.fromInt(rNum r))::eLong(i))
++		     | mv(I.Immed(i), _) = encodeLongImm sz (0wxc7, opcode 0, dst, i)
++		     | mv(I.ImmedLabel le,dst) = mv(I.Immed(lexp le),dst)
++		     | mv(I.LabelEA le,dst) = error "MOVL: LabelEA"
++		     | mv(src,dst) = arith(sz, 0wx88, opcode 0) (src, dst)
++	       in  mv(src,dst) end
++	     | I.MOVE{mvOp=mvOp as (I.MOVQ), src, dst} =>
+ 	       let val sz = case mvOp of I.MOVL => 32 | I.MOVQ => 64
+ 		   fun mv(I.Immed(i), I.Direct (_, r)) =
+                        eBytes(Word8.+(0wxb8, Word8.fromInt(rNum r))::eLong(i))
+@@ -448,7 +538,8 @@ struct
+ 	     | I.CALL{opnd, ...} => encode32 (0wxff, opcode 2, opnd)
+ 	     | I.CMPL{lsrc, rsrc} => arith(32, 0wx38, opcode 7) (rsrc, lsrc)
+ 	     | I.CMPQ{lsrc, rsrc} => arith(64, 0wx38, opcode 7) (rsrc, lsrc)
+-	     | (I.CMPW _ | I.CMPB _) => error "CMP"
++	     | (I.CMPW _) => error "CMP"
++	     | (I.CMPB _) => error "CMP"
+ 	     | I.TESTQ{lsrc, rsrc} => test(64, rsrc, lsrc)
+ 	     | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
+ 	     | I.TESTB{lsrc, rsrc} => test(8, rsrc, lsrc)
+diff --git a/amd64/amd64MCFn.sml b/amd64/amd64MCFn.sml
+index 4499744..a8ba3a2 100644
+--- a/amd64/amd64MCFn.sml
++++ b/amd64/amd64MCFn.sml
+@@ -5,8 +5,61 @@
+ 
+ functor AMD64MCFn(
+     structure Instr : AMD64INSTR
+-    structure Shuffle : AMD64SHUFFLE where I = Instr
+-    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++    structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
++                        where type I.Constant.const = Instr.Constant.const
++                          and type I.Region.region = Instr.Region.region
++                          and type I.T.Basis.cond = Instr.T.Basis.cond
++                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                          and type I.T.Basis.ext = Instr.T.Basis.ext
++                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                          and type I.T.ccexp = Instr.T.ccexp
++                          and type I.T.fexp = Instr.T.fexp
++                          (* and type I.T.labexp = Instr.T.labexp *)
++                          and type I.T.mlrisc = Instr.T.mlrisc
++                          and type I.T.oper = Instr.T.oper
++                          and type I.T.rep = Instr.T.rep
++                          and type I.T.rexp = Instr.T.rexp
++                          and type I.T.stm = Instr.T.stm
++                          (* and type I.addressing_mode = Instr.addressing_mode *)
++                          and type I.binaryOp = Instr.binaryOp
++                          and type I.bitOp = Instr.bitOp
++                          and type I.cond = Instr.cond
++                          and type I.fsize = Instr.fsize
++                          and type I.instr = Instr.instr
++                          and type I.instruction = Instr.instruction
++                          and type I.isize = Instr.isize
++                          and type I.move = Instr.move
++                          and type I.multDivOp = Instr.multDivOp
++                          and type I.operand = Instr.operand
++                          and type I.shiftOp = Instr.shiftOp
++                          and type I.unaryOp = Instr.unaryOp
++    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
+ (*    structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr*)
+   ) : MC_EMIT = 
+   struct
+diff --git a/amd64/backpatch/amd64Jumps.sml b/amd64/backpatch/amd64Jumps.sml
+index 539bf54..16ee3a7 100644
+--- a/amd64/backpatch/amd64Jumps.sml
++++ b/amd64/backpatch/amd64Jumps.sml
+@@ -5,9 +5,71 @@
+ 
+ functor AMD64Jumps
+   (structure Instr : AMD64INSTR
+-   structure Eval : MLTREE_EVAL where T = Instr.T
+-   structure Shuffle : AMD64SHUFFLE where I = Instr
+-   structure MCEmitter : MC_EMIT where I = Instr) : SDI_JUMPS = 
++   structure Eval : MLTREE_EVAL (* where T = Instr.T *)
++                    where type T.Basis.cond = Instr.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = Instr.T.Basis.ext
++                      and type T.Basis.fcond = Instr.T.Basis.fcond
++                      and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                      and type T.Constant.const = Instr.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                      and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                      and type T.Region.region = Instr.T.Region.region
++                      and type T.ccexp = Instr.T.ccexp
++                      and type T.fexp = Instr.T.fexp
++                      (* and type T.labexp = Instr.T.labexp *)
++                      and type T.mlrisc = Instr.T.mlrisc
++                      and type T.oper = Instr.T.oper
++                      and type T.rep = Instr.T.rep
++                      and type T.rexp = Instr.T.rexp
++                      and type T.stm = Instr.T.stm
++   structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         (* and type I.addressing_mode = Instr.addressing_mode *)
++                         and type I.binaryOp = Instr.binaryOp
++                         and type I.bitOp = Instr.bitOp
++                         and type I.cond = Instr.cond
++                         and type I.fbin_op = Instr.fbin_op
++                         and type I.fcom_op = Instr.fcom_op
++                         and type I.fmove_op = Instr.fmove_op
++                         and type I.fsize = Instr.fsize
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.isize = Instr.isize
++                         and type I.move = Instr.move
++                         and type I.multDivOp = Instr.multDivOp
++                         and type I.operand = Instr.operand
++                         and type I.shiftOp = Instr.shiftOp
++                         and type I.unaryOp = Instr.unaryOp
++   structure MCEmitter : MC_EMIT (* where I = Instr *)
++                         where type I.addressing_mode = Instr.addressing_mode
++                           and type I.ea = Instr.ea
++                           and type I.instr = Instr.instr
++                           and type I.instruction = Instr.instruction
++                           and type I.operand = Instr.operand
++  ) : SDI_JUMPS =
+ struct
+   structure I = Instr
+   structure C = I.C
+@@ -40,15 +102,24 @@ struct
+ 	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
+ 	   | I.LEAL{addr, ...} => operand addr
+ 	   | I.LEAQ{addr, ...} => operand addr
+-	   | ( I.CMPQ arg | I.CMPL arg | I.CMPW arg | I.CMPB arg 
+-	     | I.TESTQ arg | I.TESTL arg | I.TESTW arg | I.TESTB arg) => cmptest arg
++	   | ( I.CMPQ arg ) => cmptest arg
++	   | ( I.CMPL arg ) => cmptest arg
++	   | ( I.CMPW arg ) => cmptest arg
++	   | ( I.CMPB arg ) => cmptest arg
++           | ( I.TESTQ arg ) => cmptest arg
++           | ( I.TESTL arg ) => cmptest arg
++           | ( I.TESTW arg ) => cmptest arg
++           | ( I.TESTB arg ) => cmptest arg
+ 	   | I.MULTDIV{src, ...} => operand src
+ 	   | I.MUL3{src1, ...} => operand src1
+ 	   | I.MULQ3{src1, ...} => operand src1
+ 	   | I.UNARY{opnd, ...} => operand opnd
+ 	   | I.SET{opnd, ...} => operand opnd
+ 	   | I.CMOV{src, dst, ...} => operand src 
+-	   | (I.PUSHQ opnd | I.PUSHL opnd | I.PUSHW opnd | I.PUSHB opnd) => operand opnd
++	   | (I.PUSHQ opnd) => operand opnd
++	   | (I.PUSHL opnd) => operand opnd
++	   | (I.PUSHW opnd) => operand opnd
++	   | (I.PUSHB opnd) => operand opnd
+ 	   | I.POP opnd =>  operand opnd
+ 	   | _ => false
+       end
+diff --git a/amd64/emit/amd64Asm.sml b/amd64/emit/amd64Asm.sml
+index e630204..08534e6 100644
+--- a/amd64/emit/amd64Asm.sml
++++ b/amd64/emit/amd64Asm.sml
+@@ -6,12 +6,85 @@
+ 
+ 
+ functor AMD64AsmEmitter(structure S : INSTRUCTION_STREAM
+-                        structure Instr : AMD64INSTR
+-                           where T = S.P.T
+-                        structure Shuffle : AMD64SHUFFLE
+-                           where I = Instr
+-                        structure MLTreeEval : MLTREE_EVAL
+-                           where T = Instr.T
++                        structure Instr : AMD64INSTR (* where T = S.P.T *)
++                                        where type T.Basis.cond = S.P.T.Basis.cond
++                                          and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                          and type T.Basis.ext = S.P.T.Basis.ext
++                                          and type T.Basis.fcond = S.P.T.Basis.fcond
++                                          and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                          and type T.Constant.const = S.P.T.Constant.const
++                                          and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                          and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                          and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                          and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                          and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                          and type T.Region.region = S.P.T.Region.region
++                                          and type T.ccexp = S.P.T.ccexp
++                                          and type T.fexp = S.P.T.fexp
++                                          (* and type T.labexp = S.P.T.labexp *)
++                                          and type T.mlrisc = S.P.T.mlrisc
++                                          and type T.oper = S.P.T.oper
++                                          and type T.rep = S.P.T.rep
++                                          and type T.rexp = S.P.T.rexp
++                                          and type T.stm = S.P.T.stm
++                        structure Shuffle : AMD64SHUFFLE (* where I = Instr *)
++                                          where type I.Constant.const = Instr.Constant.const
++                                            and type I.Region.region = Instr.Region.region
++                                            and type I.T.Basis.cond = Instr.T.Basis.cond
++                                            and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                            and type I.T.Basis.ext = Instr.T.Basis.ext
++                                            and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                            and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                            and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                            and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                            and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                            and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                            and type I.T.ccexp = Instr.T.ccexp
++                                            and type I.T.fexp = Instr.T.fexp
++                                            (* and type I.T.labexp = Instr.T.labexp *)
++                                            and type I.T.mlrisc = Instr.T.mlrisc
++                                            and type I.T.oper = Instr.T.oper
++                                            and type I.T.rep = Instr.T.rep
++                                            and type I.T.rexp = Instr.T.rexp
++                                            and type I.T.stm = Instr.T.stm
++                                            (* and type I.addressing_mode = Instr.addressing_mode *)
++                                            and type I.binaryOp = Instr.binaryOp
++                                            and type I.bitOp = Instr.bitOp
++                                            and type I.cond = Instr.cond
++                                            and type I.fbin_op = Instr.fbin_op
++                                            and type I.fcom_op = Instr.fcom_op
++                                            and type I.fmove_op = Instr.fmove_op
++                                            and type I.fsize = Instr.fsize
++                                            and type I.instr = Instr.instr
++                                            and type I.instruction = Instr.instruction
++                                            and type I.isize = Instr.isize
++                                            and type I.move = Instr.move
++                                            and type I.multDivOp = Instr.multDivOp
++                                            and type I.operand = Instr.operand
++                                            and type I.shiftOp = Instr.shiftOp
++                                            and type I.unaryOp = Instr.unaryOp
++                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                             where type T.Basis.cond = Instr.T.Basis.cond
++                                               and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                               and type T.Basis.ext = Instr.T.Basis.ext
++                                               and type T.Basis.fcond = Instr.T.Basis.fcond
++                                               and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                               and type T.Constant.const = Instr.T.Constant.const
++                                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                               and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                               and type T.Region.region = Instr.T.Region.region
++                                               and type T.ccexp = Instr.T.ccexp
++                                               and type T.fexp = Instr.T.fexp
++                                               (* and type T.labexp = Instr.T.labexp *)
++                                               and type T.mlrisc = Instr.T.mlrisc
++                                               and type T.oper = Instr.T.oper
++                                               and type T.rep = Instr.T.rep
++                                               and type T.rexp = Instr.T.rexp
++                                               and type T.stm = Instr.T.stm
+                        ) : INSTRUCTION_EMITTER =
+ struct
+    structure I  = Instr
+@@ -372,7 +445,8 @@ struct
+            val n = size fbinOp
+        in 
+           (case Char.toLower (String.sub (fbinOp, n - 1)) of
+-            (#"s" | #"l") => String.substring (fbinOp, 0, n - 1)
++            (#"s") => String.substring (fbinOp, 0, n - 1)
++          | (#"l") => String.substring (fbinOp, 0, n - 1)
+           | _ => fbinOp
+           )
+        end
+@@ -513,18 +587,62 @@ struct
+        | I.BINARY{binOp, src, dst} => 
+          (case (src, binOp) of
+            (I.Direct _, 
+-           ( I.SARQ |
+-           I.SHRQ |
+-           I.SHLQ |
+-           I.SARL |
+-           I.SHRL |
+-           I.SHLL |
+-           I.SARW |
+-           I.SHRW |
+-           I.SHLW |
+-           I.SARB |
+-           I.SHRB |
+-           I.SHLB )) => 
++           ( I.SARQ )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHRQ )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHLQ )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SARL )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHRL )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHLL )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++        | (I.Direct _,
++           ( I.SARW )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHRW )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHLW )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++        | (I.Direct _,
++           ( I.SARB )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHRB )) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _,
++           ( I.SHLB )) =>
+            ( emit_binaryOp binOp; 
+              emit "\t%cl, "; 
+              emit_dst dst )
+diff --git a/amd64/flowgraph/amd64-darwin-pseudo-ops.sml b/amd64/flowgraph/amd64-darwin-pseudo-ops.sml
+index 407adee..7067744 100644
+--- a/amd64/flowgraph/amd64-darwin-pseudo-ops.sml
++++ b/amd64/flowgraph/amd64-darwin-pseudo-ops.sml
+@@ -7,7 +7,27 @@
+ functor AMD64DarwinPseudoOps (
+ 
      structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : AMD64CELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
+-    structure MLTreeEval : MLTREE_EVAL  where T = T
++    structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                           where type T.Basis.cond = T.Basis.cond
++                             and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                             and type T.Basis.ext = T.Basis.ext
++                             and type T.Basis.fcond = T.Basis.fcond
++                             and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                             and type T.Constant.const = T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                             and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                             and type T.Region.region = T.Region.region
++                             and type T.ccexp = T.ccexp
++                             and type T.fexp = T.fexp
++                             (* and type T.labexp = T.labexp *)
++                             and type T.mlrisc = T.mlrisc
++                             and type T.oper = T.oper
++                             and type T.rep = T.rep
++                             and type T.rexp = T.rexp
++                             and type T.stm = T.stm
+ 
+   ) : PSEUDO_OPS_BASIS = struct
+ 
+diff --git a/amd64/flowgraph/amd64GasPseudoOps.sml b/amd64/flowgraph/amd64GasPseudoOps.sml
+index 10874fe..80962cb 100644
+--- a/amd64/flowgraph/amd64GasPseudoOps.sml
++++ b/amd64/flowgraph/amd64GasPseudoOps.sml
+@@ -6,7 +6,27 @@
+ 
+ functor AMD64GasPseudoOps (
      structure T : MLTREE
-     structure Constant: CONSTANT
-diff -N -C 2 -r MLRISC/amd64/instructions/amd64Peephole.peep MLRISC-mlton/amd64/instructions/amd64Peephole.peep
-*** MLRISC/amd64/instructions/amd64Peephole.peep	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/instructions/amd64Peephole.peep	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 21,25 ****
-     (structure Instr : AMD64INSTR
-      structure Eval  : MLTREE_EVAL
-!       sharing Instr.T = Eval.T
-     ) : PEEPHOLE =
-  struct
---- 21,45 ----
-     (structure Instr : AMD64INSTR
-      structure Eval  : MLTREE_EVAL
-!       (* sharing Instr.T = Eval.T *)
-!       where type T.Basis.cond = Instr.T.Basis.cond
-!         and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!         and type T.Basis.ext = Instr.T.Basis.ext
-!         and type T.Basis.fcond = Instr.T.Basis.fcond
-!         and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!         and type T.Constant.const = Instr.T.Constant.const
-!         and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!         and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!         and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!         and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!         and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!         and type T.Region.region = Instr.T.Region.region
-!         and type T.ccexp = Instr.T.ccexp
-!         and type T.fexp = Instr.T.fexp
-!         (* and type T.labexp = Instr.T.labexp *)
-!         and type T.mlrisc = Instr.T.mlrisc
-!         and type T.oper = Instr.T.oper
-!         and type T.rep = Instr.T.rep
-!         and type T.rexp = Instr.T.rexp
-!         and type T.stm = Instr.T.stm
-     ) : PEEPHOLE =
-  struct
-diff -N -C 2 -r MLRISC/amd64/instructions/amd64Peephole.sml MLRISC-mlton/amd64/instructions/amd64Peephole.sml
-*** MLRISC/amd64/instructions/amd64Peephole.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/instructions/amd64Peephole.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 13,17 ****
-  
-  (*#line 23.7 "amd64Peephole.peep"*)
-!                       sharing Instr.T = Eval.T
-                       ): PEEPHOLE =
-  struct
---- 13,37 ----
-  
-  (*#line 23.7 "amd64Peephole.peep"*)
-!                       (* sharing Instr.T = Eval.T *)
-!                       where type T.Basis.cond = Instr.T.Basis.cond
-!                        and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                        and type T.Basis.ext = Instr.T.Basis.ext
-!                        and type T.Basis.fcond = Instr.T.Basis.fcond
-!                        and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                        and type T.Constant.const = Instr.T.Constant.const
-!                        and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                        and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                        and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                        and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                        and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                        and type T.Region.region = Instr.T.Region.region
-!                        and type T.ccexp = Instr.T.ccexp
-!                        and type T.fexp = Instr.T.fexp
-!                        (* and type T.labexp = Instr.T.labexp *)
-!                        and type T.mlrisc = Instr.T.mlrisc
-!                        and type T.oper = Instr.T.oper
-!                        and type T.rep = Instr.T.rep
-!                        and type T.rexp = Instr.T.rexp
-!                        and type T.stm = Instr.T.stm
-                       ): PEEPHOLE =
-  struct
-diff -N -C 2 -r MLRISC/amd64/instructions/amd64Props.sml MLRISC-mlton/amd64/instructions/amd64Props.sml
-*** MLRISC/amd64/instructions/amd64Props.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/instructions/amd64Props.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 16,23 ****
-  functor AMD64Props (
-      structure Instr : AMD64INSTR
-!     structure MLTreeHash : MLTREE_HASH 
-!         where T = Instr.T
-!     structure MLTreeEval : MLTREE_EVAL 
-!         where T = Instr.T
-    ) : AMD64INSN_PROPERTIES =
-    struct
---- 16,61 ----
-  functor AMD64Props (
-      structure Instr : AMD64INSTR
-!     structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-!     structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-    ) : AMD64INSN_PROPERTIES =
-    struct
-***************
-*** 40,47 ****
-        | instrKind (I.INSTR instr) = (case instr
-  	of I.NOP => IK_NOP
-! 	 | ( I.CALL {cutsTo=_::_, ...} | I.CALLQ {cutsTo=_::_, ...} ) =>
-  	   IK_CALL_WITH_CUTS
-! 	 | ( I.JMP _ | I.JCC _ | I.RET _ | I.INTO ) => IK_JUMP
-! 	 | ( I.CALL _ | I. CALLQ _ ) => IK_CALL
-  	 | I.PHI {} => IK_PHI
-  	 | I.SOURCE {} => IK_SOURCE
---- 78,91 ----
-        | instrKind (I.INSTR instr) = (case instr
-  	of I.NOP => IK_NOP
-! 	 | ( I.CALL {cutsTo=_::_, ...} ) =>
-  	   IK_CALL_WITH_CUTS
-! 	 | ( I.CALLQ {cutsTo=_::_, ...} ) =>
-! 	   IK_CALL_WITH_CUTS
-! 	 | ( I.JMP _ ) => IK_JUMP
-! 	 | ( I.JCC _ ) => IK_JUMP
-! 	 | ( I.RET _ ) => IK_JUMP
-! 	 | ( I.INTO) => IK_JUMP
-! 	 | ( I.CALL _ ) => IK_CALL
-! 	 | ( I.CALLQ _ ) => IK_CALL
-  	 | I.PHI {} => IK_PHI
-  	 | I.SOURCE {} => IK_SOURCE
-***************
-*** 56,61 ****
-  
-      fun moveTmpR (I.ANNOTATION {i, ...}) = moveTmpR i
-!       | moveTmpR ( I.COPY {k=CB.GP, tmp=SOME (I.Direct (_, r)), ...}
-!                  | I.COPY {k=CB.FP, tmp=SOME (I.FDirect r), ...} ) = 
-  	SOME r
-        | moveTmpR _ = NONE
---- 100,106 ----
-  
-      fun moveTmpR (I.ANNOTATION {i, ...}) = moveTmpR i
-!       | moveTmpR ( I.COPY {k=CB.GP, tmp=SOME (I.Direct (_, r)), ...} ) = 
-! 	SOME r
-!       | moveTmpR ( I.COPY {k=CB.FP, tmp=SOME (I.FDirect r), ...} ) = 
-  	SOME r
-        | moveTmpR _ = NONE
-***************
-*** 177,183 ****
-  	    in
-  	      case multDivOp
-! 	       of (I.IDIVL1 | I.DIVL1 | I.IDIVQ1 | I.DIVQ1) => 
-  	           (raxPair, C.rdx::C.rax::uses)
-! 	        | (I.IMULL1 | I.MULL1 | I.IMULQ1 | I.MULQ1) => 
-  	          (raxPair, C.rax::uses)
-  	      (* end case *)
---- 222,240 ----
-  	    in
-  	      case multDivOp
-! 	       of (I.IDIVL1) => 
-! 	           (raxPair, C.rdx::C.rax::uses)
-!                 | (I.DIVL1) => 
-! 	           (raxPair, C.rdx::C.rax::uses)
-!                 | (I.IDIVQ1) => 
-! 	           (raxPair, C.rdx::C.rax::uses)
-!                 | (I.DIVQ1) => 
-  	           (raxPair, C.rdx::C.rax::uses)
-! 	        | (I.IMULL1) => 
-! 	          (raxPair, C.rax::uses)
-! 	        | (I.MULL1) => 
-! 	          (raxPair, C.rax::uses)
-! 	        | (I.IMULQ1) => 
-! 	          (raxPair, C.rax::uses)
-! 	        | (I.MULQ1) => 
-  	          (raxPair, C.rax::uses)
-  	      (* end case *)
-***************
-*** 186,199 ****
-  	fun push opnd = ([C.stackptrR], operandAcc (opnd, [C.stackptrR]))
-  	fun f i = (case i
-! 	    of ( I.JMP (opnd, _) | I.JCC {opnd, ...} ) => ([], 	operandUse opnd)
-! 	     | ( I.CALL {opnd, defs, uses, ...} |
-! 	         I.CALLQ {opnd, defs, uses, ...} )=>
-   	       (C.getReg defs, operandAcc (opnd, C.getReg uses))
-  	     | I.MOVE {src, dst=I.Direct (_, r), ...} => ([r], operandUse src) 
-  	     | I.MOVE {src, dst, ...} => ([], operandAcc (dst, operandUse src))
-! 	     | ( I.LEAL {r32=r, addr} | I.LEAQ {r64=r, addr} ) =>
-  	       ([r], operandUse addr)
-! 	     | ( I.CMPQ arg | I.CMPL arg | I.CMPW arg | I.CMPB arg
-! 	       | I.TESTQ arg | I.TESTL arg | I.TESTW arg | I.TESTB arg )  =>
-  	       cmpTest arg
-  	     | I.BITOP{lsrc, rsrc, ...} => cmpTest {lsrc=lsrc,rsrc=rsrc}
---- 243,273 ----
-  	fun push opnd = ([C.stackptrR], operandAcc (opnd, [C.stackptrR]))
-  	fun f i = (case i
-! 	    of ( I.JMP (opnd, _) ) => ([], 	operandUse opnd)
-!              | ( I.JCC {opnd, ...} ) => ([], 	operandUse opnd)
-! 	     | ( I.CALL {opnd, defs, uses, ...} )=>
-!  	       (C.getReg defs, operandAcc (opnd, C.getReg uses))
-! 	     | ( I.CALLQ {opnd, defs, uses, ...} )=>
-   	       (C.getReg defs, operandAcc (opnd, C.getReg uses))
-  	     | I.MOVE {src, dst=I.Direct (_, r), ...} => ([r], operandUse src) 
-  	     | I.MOVE {src, dst, ...} => ([], operandAcc (dst, operandUse src))
-! 	     | ( I.LEAL {r32=r, addr} ) =>
-! 	       ([r], operandUse addr)
-! 	     | ( I.LEAQ {r64=r, addr} ) =>
-  	       ([r], operandUse addr)
-! 	     | ( I.CMPQ arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.CMPL arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.CMPW arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.CMPB arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.TESTQ arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.TESTL arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.TESTW arg )  =>
-! 	       cmpTest arg
-! 	     | ( I.TESTB arg )  =>
-  	       cmpTest arg
-  	     | I.BITOP{lsrc, rsrc, ...} => cmpTest {lsrc=lsrc,rsrc=rsrc}
-***************
-*** 215,226 ****
-  	     | I.XCHG {src, dst, ...} =>
-  	       (operandDef dst, operandAcc (src, operandUse dst)) 
-! 	     | ( I.ENTER _ | I.LEAVE ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
-  	     | I.MULTDIV arg => multDiv arg
-! 	     | ( I.MUL3  {src1, dst, ...} | I.MULQ3 {src1, dst, ...} ) => 
-  	       ([dst], operandUse src1)
-! 	     | ( I.UNARY{opnd, ...} | I.SET {opnd, ...} ) => unary opnd
-! 	     | (I.PUSHQ arg | I.PUSHL arg | I.PUSHW arg | I.PUSHB arg ) => push arg
-  	     | I.POP arg => (C.stackptrR::operandDef arg, [C.stackptrR])
-! 	     | ( I.PUSHFD | I.POPFD )=> rspOnly ()
-  	     | I.CDQ => ([C.rdx], [C.rax])
-  	     | I.FMOVE {dst, src, ...} => ([], operandAcc (dst, operandUse src))
---- 289,308 ----
-  	     | I.XCHG {src, dst, ...} =>
-  	       (operandDef dst, operandAcc (src, operandUse dst)) 
-! 	     | ( I.ENTER _ ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
-! 	     | ( I.LEAVE ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
-  	     | I.MULTDIV arg => multDiv arg
-! 	     | ( I.MUL3  {src1, dst, ...} ) => 
-! 	       ([dst], operandUse src1)
-! 	     | ( I.MULQ3 {src1, dst, ...} ) => 
-  	       ([dst], operandUse src1)
-! 	     | ( I.UNARY{opnd, ...} ) => unary opnd
-! 	     | ( I.SET {opnd, ...} ) => unary opnd
-! 	     | ( I.PUSHQ arg ) => push arg
-! 	     | ( I.PUSHL arg ) => push arg
-! 	     | ( I.PUSHW arg ) => push arg
-! 	     | ( I.PUSHB arg ) => push arg
-  	     | I.POP arg => (C.stackptrR::operandDef arg, [C.stackptrR])
-! 	     | ( I.POPFD )=> rspOnly ()
-! 	     | ( I.POPFD )=> rspOnly ()
-  	     | I.CDQ => ([C.rdx], [C.rax])
-  	     | I.FMOVE {dst, src, ...} => ([], operandAcc (dst, operandUse src))
-***************
-*** 258,264 ****
-               | I.FBINOP {dst, src, ...} => ([dst], dst :: operand src)
-               | I.FCOM {dst, src, ...} => ([], operandAcc (src, [dst]))
-!              | ( I.FSQRTS {dst, src} | I.FSQRTD {dst, src} )=> 
-                 (operand dst, operand src)
-!              | ( I.CALL {defs, uses, ...} | I.CALLQ {defs, uses, ...} ) =>
-                 (C.getFreg defs, C.getFreg uses)
-               | _ => ([], [])
---- 340,350 ----
-               | I.FBINOP {dst, src, ...} => ([dst], dst :: operand src)
-               | I.FCOM {dst, src, ...} => ([], operandAcc (src, [dst]))
-!              | ( I.FSQRTS {dst, src} )=> 
-                 (operand dst, operand src)
-!              | ( I.FSQRTD {dst, src} )=> 
-!                (operand dst, operand src)
-!              | ( I.CALL {defs, uses, ...} ) =>
-!                (C.getFreg defs, C.getFreg uses)
-!              | ( I.CALLQ {defs, uses, ...} ) =>
-                 (C.getFreg defs, C.getFreg uses)
-               | _ => ([], [])
-***************
-*** 310,357 ****
-  	 | I.MOVE {mvOp, ...} => 
-  	   (case mvOp
-! 	     of ( I.MOVQ | I.MOVSWQ | I.MOVZWQ | I.MOVSBQ | 
-! 		  I.MOVZBQ | I.MOVSLQ |
-! 		  I.CVTSD2SIQ | I.CVTSS2SIQ
-! 		) => 64
-! 	      | ( I.MOVL | I.MOVSWL | I.MOVZWL | I.MOVSBL | 
-! 		  I.CVTSD2SI | I.CVTSS2SI |
-! 		  I.MOVZBL ) => 32
-  	      | I.MOVW => 16
-  	      | I.MOVB => 8
-  	   (* esac *))
-! 	 | ( I.CALL _ | I.LEAL _ | I.CMPL _ | I.TESTL _ | I.MUL3 _ )
-! 	     => 32
-! 	 | ( I.CALLQ _ | I.LEAQ _ | I.CMPQ _ | I.TESTQ _ | I.MULQ3 _ | I.CMOV _)
-! 	     => 64 
-! 	 | ( I.CMPW _ | I.TESTW _ ) => 16
-! 	 | ( I.CMPB _ | I.TESTB _ ) => 8 
-  	 | I.SHIFT {shiftOp, ...} => (case shiftOp
-! 	   of ( I.SHLDL | I.SHRDL ) => 32
-  	   (* esac *))
-  	 | I.UNARY {unOp, ...} =>
-  	   (case unOp
-! 	     of ( I.DECQ | I.INCQ | I.NEGQ | I.NOTQ | 
-! 		  I.LOCK_DECQ | I.LOCK_INCQ | I.LOCK_NEGQ | I.LOCK_NOTQ ) => 64
-! 	      | ( I.DECL | I.INCL | I.NEGL | I.NOTL ) => 32
-! 	      | ( I.DECW | I.INCW | I.NEGW | I.NOTW ) => 16
-! 	      | ( I.DECB | I.INCB | I.NEGB | I.NOTB ) => 8
-  	   (* esac *))
-  	 | I.MULTDIV {multDivOp, ...} => 
-  	   (case multDivOp
-! 	     of ( I.IMULL1 | I.MULL1 | I.IDIVL1 | I.DIVL1 ) => 32
-! 	      | ( I.IMULQ1 | I.MULQ1 | I.IDIVQ1 | I.DIVQ1 ) => 64
-  	   (* esac *))
-  	 | I.BINARY {binOp, ...} => 
-  	   (case binOp
-! 	     of ( I.ADDQ | I.SUBQ | I.ANDQ | I.ORQ | I.XORQ | I.SHLQ | I.SARQ 
-! 	        | I.SHRQ | I.MULQ | I.IMULQ | I.ADCQ | I.SBBQ ) => 64
-! 	      | ( I.ADDL | I.SUBL | I.ANDL | I.ORL | I.XORL | I.SHLL | I.SARL
-!                 | I.SHRL | I.MULL | I.IMULL | I.ADCL | I.SBBL | I.BTSL | I.BTCL
-!                 | I.BTRL | I.ROLL | I.RORL | I.XCHGL ) => 32
-! 	      | ( I.ADDW | I.SUBW | I.ANDW | I.ORW | I.XORW | I.SHLW | I.SARW 
-!                 | I.SHRW | I.MULW | I.IMULW | I.BTSW | I.BTCW | I.BTRW | I.ROLW 
-!                 | I.RORW | I.XCHGW ) => 16
-! 	      | ( I.ADDB | I.SUBB | I.ANDB | I.ORB | I.XORB | I.SHLB | I.SARB 
-!                 | I.SHRB | I.MULB | I.IMULB | I.XCHGB ) => 8
-  	      | _ => raise Fail "" (* 64*)
-  	   (* esac *))
---- 396,529 ----
-  	 | I.MOVE {mvOp, ...} => 
-  	   (case mvOp
-! 	     of ( I.MOVQ ) => 64
-!               | ( I.MOVSWQ ) => 64
-!               | ( I.MOVZWQ ) => 64
-!               | ( I.MOVSBQ ) => 64
-!               | ( I.MOVZBQ ) => 64
-!               | ( I.MOVSLQ ) => 64
-!               | ( I.CVTSD2SIQ ) => 64
-!               | ( I.CVTSS2SIQ ) => 64
-! 	      | ( I.MOVL ) => 32
-!               | ( I.MOVSWL ) => 32
-!               | ( I.MOVZWL ) => 32 
-!               | ( I.MOVSBL ) => 32
-!               | ( I.CVTSD2SI ) => 32
-!               | ( I.CVTSS2SI ) => 32
-!               | ( I.MOVZBL ) => 32
-  	      | I.MOVW => 16
-  	      | I.MOVB => 8
-  	   (* esac *))
-! 	 | ( I.CALL _ ) => 32
-!          | ( I.LEAL _ ) => 32
-!          | ( I.CMPL _ ) => 32
-!          | ( I.TESTL _ ) => 32
-!          | ( I.MUL3 _ ) => 32
-! 	 | ( I.CALLQ _ ) => 64 
-!          | ( I.LEAQ _ ) => 64 
-!          | ( I.CMPQ _ ) => 64 
-!          | ( I.TESTQ _ ) => 64 
-!          | ( I.MULQ3 _ ) => 64 
-!          | ( I.CMOV _ ) => 64 
-! 	 | ( I.CMPW _ ) => 16
-! 	 | ( I.TESTW _ ) => 16
-! 	 | ( I.CMPB _ ) => 8
-! 	 | ( I.TESTB _ ) => 8
-  	 | I.SHIFT {shiftOp, ...} => (case shiftOp
-! 	   of ( I.SHLDL ) => 32
-!             | ( I.SHRDL ) => 32
-  	   (* esac *))
-  	 | I.UNARY {unOp, ...} =>
-  	   (case unOp
-! 	     of ( I.DECQ ) => 64
-!               | ( I.INCQ ) => 64
-!               | ( I.NEGQ ) => 64
-!               | ( I.NOTQ ) => 64
-!               | ( I.LOCK_DECQ ) => 64
-!               | ( I.LOCK_INCQ ) => 64
-!               | ( I.LOCK_NEGQ ) => 64
-!               | ( I.LOCK_NOTQ ) => 64
-! 	      | ( I.DECL ) => 32
-!               | ( I.INCL ) => 32
-!               | ( I.NEGL ) => 32
-!               | ( I.NOTL ) => 32
-! 	      | ( I.DECW ) => 16
-!               | ( I.INCW ) => 16
-!               | ( I.NEGW ) => 16
-!               | ( I.NOTW ) => 16
-! 	      | ( I.DECB ) => 8
-!               | ( I.INCB ) => 8
-!               | ( I.NEGB ) => 8
-!               | ( I.NOTB ) => 8
-  	   (* esac *))
-  	 | I.MULTDIV {multDivOp, ...} => 
-  	   (case multDivOp
-! 	     of ( I.IMULL1 ) => 32
-!               | ( I.MULL1 ) => 32
-!               | ( I.IDIVL1 ) => 32
-!               | ( I.DIVL1 ) => 32
-! 	      | ( I.IMULQ1 ) => 64 
-!               | ( I.MULQ1 ) => 64
-!               | ( I.IDIVQ1 ) => 64
-!               | ( I.DIVQ1 ) => 64
-  	   (* esac *))
-  	 | I.BINARY {binOp, ...} => 
-  	   (case binOp
-! 	     of ( I.ADDQ ) => 64
-!               | ( I.SUBQ ) => 64
-!               | ( I.ANDQ ) => 64
-!               | ( I.ORQ ) => 64
-!               | ( I.XORQ ) => 64
-!               | ( I.SHLQ ) => 64
-!               | ( I.SARQ ) => 64
-!               | ( I.SHRQ ) => 64
-!               | ( I.MULQ ) => 64
-!               | ( I.IMULQ ) => 64
-!               | ( I.ADCQ ) => 64
-!               | ( I.SBBQ ) => 64
-! 	      | ( I.ADDL ) => 32
-!               | ( I.SUBL ) => 32 
-!               | ( I.ANDL ) => 32 
-!               | ( I.ORL ) => 32 
-!               | ( I.XORL ) => 32 
-!               | ( I.SHLL ) => 32 
-!               | ( I.SARL ) => 32 
-!               | ( I.SHRL ) => 32 
-!               | ( I.MULL ) => 32 
-!               | ( I.IMULL ) => 32 
-!               | ( I.ADCL ) => 32 
-!               | ( I.SBBL ) => 32 
-!               | ( I.BTSL ) => 32 
-!               | ( I.BTCL ) => 32 
-!               | ( I.BTRL ) => 32 
-!               | ( I.ROLL ) => 32 
-!               | ( I.RORL ) => 32 
-!               | ( I.XCHGL ) => 32
-! 	      | ( I.ADDW ) => 16
-!               | ( I.SUBW ) => 16
-!               | ( I.ANDW ) => 16
-!               | ( I.ORW ) => 16
-!               | ( I.XORW ) => 16
-!               | ( I.SHLW ) => 16
-!               | ( I.SARW ) => 16
-!               | ( I.SHRW ) => 16
-!               | ( I.MULW ) => 16
-!               | ( I.IMULW ) => 16
-!               | ( I.BTSW ) => 16
-!               | ( I.BTCW ) => 16
-!               | ( I.BTRW ) => 16
-!               | ( I.ROLW ) => 16
-!               | ( I.RORW ) => 16
-!               | ( I.XCHGW ) => 16
-! 	      | ( I.ADDB ) => 8
-!               | ( I.SUBB ) => 8
-!               | ( I.ANDB ) => 8
-!               | ( I.ORB ) => 8
-!               | ( I.XORB ) => 8
-!               | ( I.SHLB ) => 8
-!               | ( I.SARB ) => 8
-!               | ( I.SHRB ) => 8
-!               | ( I.MULB ) => 8
-!               | ( I.IMULB ) => 8
-!               | ( I.XCHGB ) => 8
-  	      | _ => raise Fail "" (* 64*)
-  	   (* esac *))
-***************
-*** 359,363 ****
-  	 | I.CMPXCHG {sz, ...} => szToInt sz
-  	 | I.PAUSE => 64
-! 	 | (I.MFENCE | I.SFENCE | I.LFENCE) => 64
-  	 | _ => raise Fail "" (*64*)
-        (* esac *))
---- 531,537 ----
-  	 | I.CMPXCHG {sz, ...} => szToInt sz
-  	 | I.PAUSE => 64
-! 	 | (I.MFENCE) => 64
-! 	 | (I.SFENCE) => 64
-! 	 | (I.LFENCE) => 64
-  	 | _ => raise Fail "" (*64*)
-        (* esac *))
-***************
-*** 365,378 ****
-      fun szOfFinstr instr = (case instr
-          of I.FMOVE {fmvOp, ...} => (case fmvOp
-!            of ( I.MOVSS | I.CVTSS2SD | I.CVTSI2SS | I.CVTSI2SSQ ) => 32
-!             | ( I.MOVSD | I.CVTSD2SS | I.CVTSI2SD | I.CVTSI2SDQ ) => 64
+-    structure MLTreeEval : MLTREE_EVAL  where T = T
++    structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                           where type T.Basis.cond = T.Basis.cond
++                             and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                             and type T.Basis.ext = T.Basis.ext
++                             and type T.Basis.fcond = T.Basis.fcond
++                             and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                             and type T.Constant.const = T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                             and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                             and type T.Region.region = T.Region.region
++                             and type T.ccexp = T.ccexp
++                             and type T.fexp = T.fexp
++                             (* and type T.labexp = T.labexp *)
++                             and type T.mlrisc = T.mlrisc
++                             and type T.oper = T.oper
++                             and type T.rep = T.rep
++                             and type T.rexp = T.rexp
++                             and type T.stm = T.stm
+   ) : PSEUDO_OPS_BASIS =  struct
+     structure T = T
+     structure PB = PseudoOpsBasisTyp
+diff --git a/amd64/instructions/amd64CompInstrExt.sml b/amd64/instructions/amd64CompInstrExt.sml
+index 981d4de..9afe8d7 100644
+--- a/amd64/instructions/amd64CompInstrExt.sml
++++ b/amd64/instructions/amd64CompInstrExt.sml
+@@ -7,11 +7,54 @@
+ 
+ signature AMD64COMP_INSTR_EXT = sig
+   structure I : AMD64INSTR
+-  structure TS : MLTREE_STREAM
+-		 where T = I.T
+-  structure CFG : CONTROL_FLOW_GRAPH 
+- 	         where I = I
+-                   and P = TS.S.P
++  structure TS : MLTREE_STREAM (* where T = I.T *)
++                 where type T.Basis.cond = I.T.Basis.cond
++                   and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                   and type T.Basis.ext = I.T.Basis.ext
++                   and type T.Basis.fcond = I.T.Basis.fcond
++                   and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                   and type T.Constant.const = I.T.Constant.const
++                   and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                   and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                   and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                   and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                   and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                   and type T.Region.region = I.T.Region.region
++                   and type T.ccexp = I.T.ccexp
++                   and type T.fexp = I.T.fexp
++                   (* and type T.labexp = I.T.labexp *)
++                   and type T.mlrisc = I.T.mlrisc
++                   and type T.oper = I.T.oper
++                   and type T.rep = I.T.rep
++	           and type T.rexp = I.T.rexp
++                   and type T.stm = I.T.stm
++  structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
++                  where type I.addressing_mode = I.addressing_mode
++                    and type I.ea = I.ea
++                    and type I.instr = I.instr
++                    and type I.instruction = I.instruction
++                    and type I.operand = I.operand
++                  where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                    and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                    and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                    and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                    and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                    and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                    and type P.T.Constant.const = TS.S.P.T.Constant.const
++                    and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                    and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                    and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                    and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                    and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                    and type P.T.Region.region = TS.S.P.T.Region.region
++                    and type P.T.ccexp = TS.S.P.T.ccexp
++                    and type P.T.fexp = TS.S.P.T.fexp
++                    (* and type P.T.labexp = TS.S.P.T.labexp *)
++                    and type P.T.mlrisc = TS.S.P.T.mlrisc
++                    and type P.T.oper = TS.S.P.T.oper
++                    and type P.T.rep = TS.S.P.T.rep
++                    and type P.T.rexp = TS.S.P.T.rexp
++                    and type P.T.stm = TS.S.P.T.stm
+ 
+   type reducer = 
+     (I.instruction, I.C.cellset, I.operand, I.addressing_mode, CFG.cfg) TS.reducer
+@@ -26,11 +69,54 @@ end
+ 
+ functor AMD64CompInstrExt
+   ( structure I : AMD64INSTR
+-    structure TS  : MLTREE_STREAM
+-		   where T = I.T
+-    structure CFG : CONTROL_FLOW_GRAPH 
+-		   where P = TS.S.P
+-		     and I = I
++    structure TS  : MLTREE_STREAM (* where T = I.T *)
++                    where type T.Basis.cond = I.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = I.T.Basis.ext
++                      and type T.Basis.fcond = I.T.Basis.fcond
++                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                      and type T.Constant.const = I.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                      and type T.Region.region = I.T.Region.region
++                      and type T.ccexp = I.T.ccexp
++                      and type T.fexp = I.T.fexp
++                      (* and type T.labexp = I.T.labexp *)
++                      and type T.mlrisc = I.T.mlrisc
++                      and type T.oper = I.T.oper
++                      and type T.rep = I.T.rep
++                      and type T.rexp = I.T.rexp
++                      and type T.stm = I.T.stm
++    structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
++                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = TS.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = TS.S.P.T.Region.region
++                      and type P.T.ccexp = TS.S.P.T.ccexp
++                      and type P.T.fexp = TS.S.P.T.fexp
++                      (* and type P.T.labexp = TS.S.P.T.labexp *)
++                      and type P.T.mlrisc = TS.S.P.T.mlrisc
++                      and type P.T.oper = TS.S.P.T.oper
++                      and type P.T.rep = TS.S.P.T.rep
++                      and type P.T.rexp = TS.S.P.T.rexp
++                      and type P.T.stm = TS.S.P.T.stm
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
+    ) : AMD64COMP_INSTR_EXT = 
+ struct
+   structure CFG = CFG
+diff --git a/amd64/instructions/amd64Instr.sml b/amd64/instructions/amd64Instr.sml
+index 91644dc..b26d66b 100644
+--- a/amd64/instructions/amd64Instr.sml
++++ b/amd64/instructions/amd64Instr.sml
+@@ -8,7 +8,16 @@
+ signature AMD64INSTR =
+ sig
+    structure C : AMD64CELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure T : MLTREE
+    structure Constant: CONSTANT
+    structure Region : REGION
+diff --git a/amd64/instructions/amd64Peephole.peep b/amd64/instructions/amd64Peephole.peep
+index c12b8ad..3a37542 100644
+--- a/amd64/instructions/amd64Peephole.peep
++++ b/amd64/instructions/amd64Peephole.peep
+@@ -20,7 +20,27 @@ in
+ functor AMD64Peephole
+    (structure Instr : AMD64INSTR
+     structure Eval  : MLTREE_EVAL
+-      sharing Instr.T = Eval.T
++      (* sharing Instr.T = Eval.T *)
++      where type T.Basis.cond = Instr.T.Basis.cond
++        and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++        and type T.Basis.ext = Instr.T.Basis.ext
++        and type T.Basis.fcond = Instr.T.Basis.fcond
++        and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++        and type T.Constant.const = Instr.T.Constant.const
++        and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++        and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++        and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++        and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++        and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++        and type T.Region.region = Instr.T.Region.region
++        and type T.ccexp = Instr.T.ccexp
++        and type T.fexp = Instr.T.fexp
++        (* and type T.labexp = Instr.T.labexp *)
++        and type T.mlrisc = Instr.T.mlrisc
++        and type T.oper = Instr.T.oper
++        and type T.rep = Instr.T.rep
++        and type T.rexp = Instr.T.rexp
++        and type T.stm = Instr.T.stm
+    ) : PEEPHOLE =
+ struct
+    structure I = Instr
+diff --git a/amd64/instructions/amd64Peephole.sml b/amd64/instructions/amd64Peephole.sml
+index b561a67..a235b50 100644
+--- a/amd64/instructions/amd64Peephole.sml
++++ b/amd64/instructions/amd64Peephole.sml
+@@ -12,7 +12,27 @@ functor AMD64Peephole(
+                       structure Eval : MLTREE_EVAL
+ 
+ (*#line 23.7 "amd64Peephole.peep"*)
+-                      sharing Instr.T = Eval.T
++                      (* sharing Instr.T = Eval.T *)
++                      where type T.Basis.cond = Instr.T.Basis.cond
++                       and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                       and type T.Basis.ext = Instr.T.Basis.ext
++                       and type T.Basis.fcond = Instr.T.Basis.fcond
++                       and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                       and type T.Constant.const = Instr.T.Constant.const
++                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                       and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                       and type T.Region.region = Instr.T.Region.region
++                       and type T.ccexp = Instr.T.ccexp
++                       and type T.fexp = Instr.T.fexp
++                       (* and type T.labexp = Instr.T.labexp *)
++                       and type T.mlrisc = Instr.T.mlrisc
++                       and type T.oper = Instr.T.oper
++                       and type T.rep = Instr.T.rep
++                       and type T.rexp = Instr.T.rexp
++                       and type T.stm = Instr.T.stm
+                      ): PEEPHOLE =
+ struct
+ 
+diff --git a/amd64/instructions/amd64Props.sml b/amd64/instructions/amd64Props.sml
+index 5ff322a..a0a1c53 100644
+--- a/amd64/instructions/amd64Props.sml
++++ b/amd64/instructions/amd64Props.sml
+@@ -15,10 +15,48 @@ signature AMD64INSN_PROPERTIES =
+ 
+ functor AMD64Props (
+     structure Instr : AMD64INSTR
+-    structure MLTreeHash : MLTREE_HASH 
+-        where T = Instr.T
+-    structure MLTreeEval : MLTREE_EVAL 
+-        where T = Instr.T
++    structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
++    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
+   ) : AMD64INSN_PROPERTIES =
+   struct
+ 
+@@ -39,10 +77,16 @@ functor AMD64Props (
+       | instrKind (I.COPY _) = IK_COPY
+       | instrKind (I.INSTR instr) = (case instr
+ 	of I.NOP => IK_NOP
+-	 | ( I.CALL {cutsTo=_::_, ...} | I.CALLQ {cutsTo=_::_, ...} ) =>
++	 | ( I.CALL {cutsTo=_::_, ...} ) =>
+ 	   IK_CALL_WITH_CUTS
+-	 | ( I.JMP _ | I.JCC _ | I.RET _ | I.INTO ) => IK_JUMP
+-	 | ( I.CALL _ | I. CALLQ _ ) => IK_CALL
++	 | ( I.CALLQ {cutsTo=_::_, ...} ) =>
++	   IK_CALL_WITH_CUTS
++	 | ( I.JMP _ ) => IK_JUMP
++	 | ( I.JCC _ ) => IK_JUMP
++	 | ( I.RET _ ) => IK_JUMP
++	 | ( I.INTO) => IK_JUMP
++	 | ( I.CALL _ ) => IK_CALL
++	 | ( I.CALLQ _ ) => IK_CALL
+ 	 | I.PHI {} => IK_PHI
+ 	 | I.SOURCE {} => IK_SOURCE
+ 	 | I.SINK {} => IK_SINK
+@@ -55,8 +99,9 @@ functor AMD64Props (
+       | moveInstr _ = false
+ 
+     fun moveTmpR (I.ANNOTATION {i, ...}) = moveTmpR i
+-      | moveTmpR ( I.COPY {k=CB.GP, tmp=SOME (I.Direct (_, r)), ...}
+-                 | I.COPY {k=CB.FP, tmp=SOME (I.FDirect r), ...} ) = 
++      | moveTmpR ( I.COPY {k=CB.GP, tmp=SOME (I.Direct (_, r)), ...} ) =
++	SOME r
++      | moveTmpR ( I.COPY {k=CB.FP, tmp=SOME (I.FDirect r), ...} ) =
+ 	SOME r
+       | moveTmpR _ = NONE
+ 
+@@ -176,25 +221,54 @@ functor AMD64Props (
+ 	    val uses = operandUse src
+ 	    in
+ 	      case multDivOp
+-	       of (I.IDIVL1 | I.DIVL1 | I.IDIVQ1 | I.DIVQ1) => 
++	       of (I.IDIVL1) =>
++	           (raxPair, C.rdx::C.rax::uses)
++                | (I.DIVL1) =>
++	           (raxPair, C.rdx::C.rax::uses)
++                | (I.IDIVQ1) =>
++	           (raxPair, C.rdx::C.rax::uses)
++                | (I.DIVQ1) =>
+ 	           (raxPair, C.rdx::C.rax::uses)
+-	        | (I.IMULL1 | I.MULL1 | I.IMULQ1 | I.MULQ1) => 
++	        | (I.IMULL1) =>
++	          (raxPair, C.rax::uses)
++	        | (I.MULL1) =>
++	          (raxPair, C.rax::uses)
++	        | (I.IMULQ1) =>
++	          (raxPair, C.rax::uses)
++	        | (I.MULQ1) =>
+ 	          (raxPair, C.rax::uses)
+ 	      (* end case *)
+ 	    end
+ 	fun rspOnly () = let val s = [C.stackptrR] in (s, s) end
+ 	fun push opnd = ([C.stackptrR], operandAcc (opnd, [C.stackptrR]))
+ 	fun f i = (case i
+-	    of ( I.JMP (opnd, _) | I.JCC {opnd, ...} ) => ([], 	operandUse opnd)
+-	     | ( I.CALL {opnd, defs, uses, ...} |
+-	         I.CALLQ {opnd, defs, uses, ...} )=>
++	    of ( I.JMP (opnd, _) ) => ([], 	operandUse opnd)
++             | ( I.JCC {opnd, ...} ) => ([], 	operandUse opnd)
++	     | ( I.CALL {opnd, defs, uses, ...} )=>
++ 	       (C.getReg defs, operandAcc (opnd, C.getReg uses))
++	     | ( I.CALLQ {opnd, defs, uses, ...} )=>
+  	       (C.getReg defs, operandAcc (opnd, C.getReg uses))
+ 	     | I.MOVE {src, dst=I.Direct (_, r), ...} => ([r], operandUse src) 
+ 	     | I.MOVE {src, dst, ...} => ([], operandAcc (dst, operandUse src))
+-	     | ( I.LEAL {r32=r, addr} | I.LEAQ {r64=r, addr} ) =>
++	     | ( I.LEAL {r32=r, addr} ) =>
++	       ([r], operandUse addr)
++	     | ( I.LEAQ {r64=r, addr} ) =>
+ 	       ([r], operandUse addr)
+-	     | ( I.CMPQ arg | I.CMPL arg | I.CMPW arg | I.CMPB arg
+-	       | I.TESTQ arg | I.TESTL arg | I.TESTW arg | I.TESTB arg )  =>
++	     | ( I.CMPQ arg )  =>
++	       cmpTest arg
++	     | ( I.CMPL arg )  =>
++	       cmpTest arg
++	     | ( I.CMPW arg )  =>
++	       cmpTest arg
++	     | ( I.CMPB arg )  =>
++	       cmpTest arg
++	     | ( I.TESTQ arg )  =>
++	       cmpTest arg
++	     | ( I.TESTL arg )  =>
++	       cmpTest arg
++	     | ( I.TESTW arg )  =>
++	       cmpTest arg
++	     | ( I.TESTB arg )  =>
+ 	       cmpTest arg
+ 	     | I.BITOP{lsrc, rsrc, ...} => cmpTest {lsrc=lsrc,rsrc=rsrc}
+ 	     | I.BINARY{binOp=I.XORL, src=I.Direct (_,rs),
+@@ -214,14 +288,22 @@ functor AMD64Props (
+ 	       (C.rax::operandDef dst, C.rax::operandAcc (src, operandUse dst))
+ 	     | I.XCHG {src, dst, ...} =>
+ 	       (operandDef dst, operandAcc (src, operandUse dst)) 
+-	     | ( I.ENTER _ | I.LEAVE ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
++	     | ( I.ENTER _ ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
++	     | ( I.LEAVE ) => ([C.rsp, C.rbp], [C.rsp, C.rbp])
+ 	     | I.MULTDIV arg => multDiv arg
+-	     | ( I.MUL3  {src1, dst, ...} | I.MULQ3 {src1, dst, ...} ) => 
++	     | ( I.MUL3  {src1, dst, ...} ) =>
++	       ([dst], operandUse src1)
++	     | ( I.MULQ3 {src1, dst, ...} ) =>
+ 	       ([dst], operandUse src1)
+-	     | ( I.UNARY{opnd, ...} | I.SET {opnd, ...} ) => unary opnd
+-	     | (I.PUSHQ arg | I.PUSHL arg | I.PUSHW arg | I.PUSHB arg ) => push arg
++	     | ( I.UNARY{opnd, ...} ) => unary opnd
++	     | ( I.SET {opnd, ...} ) => unary opnd
++	     | ( I.PUSHQ arg ) => push arg
++	     | ( I.PUSHL arg ) => push arg
++	     | ( I.PUSHW arg ) => push arg
++	     | ( I.PUSHB arg ) => push arg
+ 	     | I.POP arg => (C.stackptrR::operandDef arg, [C.stackptrR])
+-	     | ( I.PUSHFD | I.POPFD )=> rspOnly ()
++	     | ( I.POPFD )=> rspOnly ()
++	     | ( I.POPFD )=> rspOnly ()
+ 	     | I.CDQ => ([C.rdx], [C.rax])
+ 	     | I.FMOVE {dst, src, ...} => ([], operandAcc (dst, operandUse src))
+ 	     | I.FCOM {src, ...} => ([], operandUse src)
+@@ -259,9 +341,13 @@ functor AMD64Props (
+             of I.FMOVE {dst, src, ...} => (operand dst, operand src)
+              | I.FBINOP {dst, src, ...} => ([dst], dst :: operand src)
+              | I.FCOM {dst, src, ...} => ([], operandAcc (src, [dst]))
+-             | ( I.FSQRTS {dst, src} | I.FSQRTD {dst, src} )=> 
++             | ( I.FSQRTS {dst, src} )=>
+                (operand dst, operand src)
+-             | ( I.CALL {defs, uses, ...} | I.CALLQ {defs, uses, ...} ) =>
++             | ( I.FSQRTD {dst, src} )=>
++               (operand dst, operand src)
++             | ( I.CALL {defs, uses, ...} ) =>
++               (C.getFreg defs, C.getFreg uses)
++             | ( I.CALLQ {defs, uses, ...} ) =>
+                (C.getFreg defs, C.getFreg uses)
+              | _ => ([], [])
              (* end case *))
-           | I.FCOM {comOp, ...} => (case comOp
-!            of ( I.COMISS | I.UCOMISS ) => 32
-!             | ( I.COMISD | I.UCOMISD ) => 64
-             (* end case *))
-           | I.FBINOP {binOp, ...} => (case binOp
-!            of ( I.ADDSS | I.SUBSS | I.MULSS | I.DIVSS | I.XORPS | I.ANDPS | I.ORPS ) => 32
-!             | ( I.ADDSD | I.SUBSD | I.MULSD | I.DIVSD | I.XORPD | I.ANDPD | I.ORPD ) => 64
-             (* end case *))
-           | I.FSQRTS _ => 32
---- 539,572 ----
-      fun szOfFinstr instr = (case instr
-          of I.FMOVE {fmvOp, ...} => (case fmvOp
-!            of ( I.MOVSS ) => 32
-!             | ( I.CVTSS2SD ) => 32
-!             | ( I.CVTSI2SS ) => 32
-!             | ( I.CVTSI2SSQ ) => 32
-!             | ( I.MOVSD ) => 64
-!             | ( I.CVTSD2SS ) => 64
-!             | ( I.CVTSI2SD ) => 64
-!             | ( I.CVTSI2SDQ ) => 64
-             (* end case *))
-           | I.FCOM {comOp, ...} => (case comOp
-!            of ( I.COMISS ) => 32
-!             | ( I.UCOMISS ) => 32
-!             | ( I.COMISD ) => 64
-!             | ( I.UCOMISD ) => 64
-             (* end case *))
-           | I.FBINOP {binOp, ...} => (case binOp
-!            of ( I.ADDSS ) => 32
-!             | ( I.SUBSS ) => 32
-!             | ( I.MULSS ) => 32
-!             | ( I.DIVSS ) => 32
-!             | ( I.XORPS ) => 32
-!             | ( I.ANDPS ) => 32
-!             | ( I.ORPS ) => 32
-!             | ( I.ADDSD ) => 64
-!             | ( I.SUBSD ) => 64
-!             | ( I.MULSD ) => 64
-!             | ( I.DIVSD ) => 64
-!             | ( I.XORPD ) => 64
-!             | ( I.ANDPD ) => 64
-!             | ( I.ORPD ) => 64
-             (* end case *))
-           | I.FSQRTS _ => 32
-diff -N -C 2 -r MLRISC/amd64/mltree/amd64-gen.sml MLRISC-mlton/amd64/mltree/amd64-gen.sml
-*** MLRISC/amd64/mltree/amd64-gen.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/mltree/amd64-gen.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,13 ****
-  functor AMD64Gen (
-      structure I : AMD64INSTR
-!     structure MLTreeUtils : MLTREE_UTILS
-! 	where T = I.T
-!     structure ExtensionComp : MLTREE_EXTENSION_COMP
-!         where I = I and T = I.T
-  
-      (* Take a number of bits and returns a label that points to a literal with the high bit set.
---- 6,56 ----
-  functor AMD64Gen (
-      structure I : AMD64INSTR
-!     structure MLTreeUtils : MLTREE_UTILS (* where T = I.T *)
-!                             where type T.Basis.cond = I.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = I.T.Basis.ext
-!                               and type T.Basis.fcond = I.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                               and type T.Constant.const = I.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                               and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                                and type T.Region.region = I.T.Region.region
-!                               and type T.ccexp = I.T.ccexp
-!                               and type T.fexp = I.T.fexp
-!                               (* and type T.labexp = I.T.labexp *)
-!                               and type T.mlrisc = I.T.mlrisc
-!                               and type T.oper = I.T.oper
-!                               and type T.rep = I.T.rep
-!                               and type T.rexp = I.T.rexp
-!                               and type T.stm = I.T.stm
-!     structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = I and T = I.T *)
-!                               where type I.addressing_mode = I.addressing_mode
-!                                 and type I.ea = I.ea
-!                                 and type I.instr = I.instr
-!                                 and type I.instruction = I.instruction
-!                                 and type I.operand = I.operand
-!                               where type T.Basis.cond = I.T.Basis.cond
-!                                 and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                                 and type T.Basis.ext = I.T.Basis.ext
-!                                 and type T.Basis.fcond = I.T.Basis.fcond
-!                                 and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                                 and type T.Constant.const = I.T.Constant.const
-!                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                                 and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                                 and type T.Region.region = I.T.Region.region
-!                                 and type T.ccexp = I.T.ccexp
-!                                 and type T.fexp = I.T.fexp
-!                                 (* and type T.labexp = I.T.labexp *)
-!                                 and type T.mlrisc = I.T.mlrisc
-!                                 and type T.oper = I.T.oper
-!                                 and type T.rep = I.T.rep
-!                                 and type T.rexp = I.T.rexp
-!                                 and type T.stm = I.T.stm
-  
-      (* Take a number of bits and returns a label that points to a literal with the high bit set.
-***************
-*** 370,374 ****
-  		   dst
-                 end
-!           | operand _ (x as (T.CONST _ | T.LABEL _)) = loadLabel (I.ImmedLabel x)
-            | operand _ (T.LABEXP le) = loadLabel (I.ImmedLabel le)
-            | operand _ (T.REG(ty,r)) = gpr (ty, r)
---- 413,418 ----
-  		   dst
-                 end
-!           | operand _ (x as (T.CONST _ )) = loadLabel (I.ImmedLabel x)
-!           | operand _ (x as (T.LABEL _)) = loadLabel (I.ImmedLabel x)
-            | operand _ (T.LABEXP le) = loadLabel (I.ImmedLabel le)
-            | operand _ (T.REG(ty,r)) = gpr (ty, r)
-***************
-*** 384,388 ****
-  	  | immedOrReg (ty, opnd)  = opnd
-  
-! 	and regOrMem (ty, opnd as (I.Immed _ | I.ImmedLabel _)) = moveToReg (ty, opnd)
-  	  | regOrMem (ty, opnd) = opnd
-  
---- 428,433 ----
-  	  | immedOrReg (ty, opnd)  = opnd
-  
-! 	and regOrMem (ty, opnd as (I.Immed _)) = moveToReg (ty, opnd)
-! 	  | regOrMem (ty, opnd as (I.ImmedLabel _)) = moveToReg (ty, opnd)
-  	  | regOrMem (ty, opnd) = opnd
-  
-***************
-*** 798,802 ****
-                     then move' (ty, I.Immed (toInt32 z), dstOpnd, an)
-                     else mark' (move64 (I.Immed64(toInt64 z), dstOpnd), an)
-! 		 | (T.CONST _ | T.LABEL _) => 
-                     move' (ty, I.ImmedLabel e, dstOpnd, an)
-  		 | T.LABEXP le => move' (ty, I.ImmedLabel le, dstOpnd, an)
---- 843,849 ----
-                     then move' (ty, I.Immed (toInt32 z), dstOpnd, an)
-                     else mark' (move64 (I.Immed64(toInt64 z), dstOpnd), an)
-! 		 | (T.CONST _) => 
-!                    move' (ty, I.ImmedLabel e, dstOpnd, an)
-! 		 | (T.LABEL _) => 
-                     move' (ty, I.ImmedLabel e, dstOpnd, an)
-  		 | T.LABEXP le => move' (ty, I.ImmedLabel le, dstOpnd, an)
-***************
-*** 937,941 ****
-             (* try to move memory operands to src rather than dst if binOp is commutative *)
-  	    val (a, b) = (case (binOp, a, b)
-!                 of ( (I.ADDSS | I.ADDSD | I.MULSS | I.MULSD | I.XORPS | I.XORPD | I.ANDPS | I.ANDPD | I.ORPS | I.ORPD), 		     
-  		     T.FLOAD _,
-  		     T.FREG _) => (b, a)
---- 984,1015 ----
-             (* try to move memory operands to src rather than dst if binOp is commutative *)
-  	    val (a, b) = (case (binOp, a, b)
-!                 of ( (I.ADDSS), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.ADDSD), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.MULSS), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.MULSD), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.XORPS), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.XORPD), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.ANDPS), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.ANDPD), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.ORPS), 		     
-! 		     T.FLOAD _,
-! 		     T.FREG _) => (b, a)
-!                  | ( (I.ORPD), 		     
-  		     T.FLOAD _,
-  		     T.FREG _) => (b, a)
-***************
-*** 1302,1306 ****
-  	 * since it doesn't need to write out the result in a register.
-  	 *)
-! 	and cmpWithZero(cc as (T.EQ | T.NE), e as T.ANDB(ty, a, b), an) = 
-  		(case ty 
-  		  of 8 => test(ty, I.TESTB, a, b, an)
---- 1376,1388 ----
-  	 * since it doesn't need to write out the result in a register.
-  	 *)
-! 	and cmpWithZero(cc as (T.EQ), e as T.ANDB(ty, a, b), an) = 
-! 		(case ty 
-! 		  of 8 => test(ty, I.TESTB, a, b, an)
-! 		  | 16 => test(ty, I.TESTW, a, b, an)
-! 		  | 32 => test(ty, I.TESTL, a, b, an)
-! 		  | 64 => test(ty, I.TESTQ, a, b, an)
-! 		  | _  => expr (e, newReg(), an); 
-! 		cc)  
-! 	 | cmpWithZero(cc as (T.NE), e as T.ANDB(ty, a, b), an) = 
-  		(case ty 
-  		  of 8 => test(ty, I.TESTB, a, b, an)
-diff -N -C 2 -r MLRISC/amd64/ra/amd64RegAlloc.sml MLRISC-mlton/amd64/ra/amd64RegAlloc.sml
-*** MLRISC/amd64/ra/amd64RegAlloc.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/ra/amd64RegAlloc.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,19 ****
-        structure I : AMD64INSTR
-        structure SpillHeur : RA_SPILL_HEURISTICS 
-!       structure Props : AMD64INSN_PROPERTIES
-!           where I = I
-!       structure CFG : CONTROL_FLOW_GRAPH
-!           where I = I
-!       structure Spill : RA_SPILL
-!           where I = I
-!       structure Asm : INSTRUCTION_EMITTER
-!           where I = I
-!           and   S.P = CFG.P
-  
-        type spill_info
---- 7,55 ----
-        structure I : AMD64INSTR
-        structure SpillHeur : RA_SPILL_HEURISTICS 
-!       structure Props : AMD64INSN_PROPERTIES (* where I = I *)
-!                         where type I.addressing_mode = I.addressing_mode
-!                           and type I.ea = I.ea
-!                           and type I.instr = I.instr
-!                           and type I.instruction = I.instruction
-!                           and type I.operand = I.operand
-!       structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
-!                       where type I.addressing_mode = I.addressing_mode
-!                         and type I.ea = I.ea
-!                         and type I.instr = I.instr
-!                         and type I.instruction = I.instruction
-!                         and type I.operand = I.operand
-!       structure Spill : RA_SPILL (* where I = I *)
-!                       where type I.addressing_mode = I.addressing_mode
-!                         and type I.ea = I.ea
-!                         and type I.instr = I.instr
-!                         and type I.instruction = I.instruction
-!                         and type I.operand = I.operand
-!       structure Asm : INSTRUCTION_EMITTER (* where I = I and S.P = CFG.P *)
-!                            where type I.addressing_mode = I.addressing_mode
-!                              and type I.ea = I.ea
-!                              and type I.instr = I.instr
-!                              and type I.instruction = I.instruction
-!                              and type I.operand = I.operand
-!                            where type S.P.Client.pseudo_op = CFG.P.Client.pseudo_op
-!                              and type S.P.T.Basis.cond = CFG.P.T.Basis.cond
-!                              and type S.P.T.Basis.div_rounding_mode = CFG.P.T.Basis.div_rounding_mode
-!                              and type S.P.T.Basis.ext = CFG.P.T.Basis.ext
-!                              and type S.P.T.Basis.fcond = CFG.P.T.Basis.fcond
-!                              and type S.P.T.Basis.rounding_mode = CFG.P.T.Basis.rounding_mode
-!                              and type S.P.T.Constant.const = CFG.P.T.Constant.const
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) CFG.P.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) CFG.P.T.Extension.fx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) CFG.P.T.Extension.rx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) CFG.P.T.Extension.sx
-!                              and type S.P.T.I.div_rounding_mode = CFG.P.T.I.div_rounding_mode
-!                              and type S.P.T.Region.region = CFG.P.T.Region.region
-!                              and type S.P.T.ccexp = CFG.P.T.ccexp
-!                              and type S.P.T.fexp = CFG.P.T.fexp
-!                              (* and type S.P.T.labexp = CFG.P.T.labexp *)
-!                              and type S.P.T.mlrisc = CFG.P.T.mlrisc
-!                              and type S.P.T.oper = CFG.P.T.oper
-!                              and type S.P.T.rep = CFG.P.T.rep
-!                              and type S.P.T.rexp = CFG.P.T.rexp
-!                              and type S.P.T.stm = CFG.P.T.stm
-  
-        type spill_info
-***************
-*** 139,146 ****
-      structure RA = 
-          RegisterAllocator
-!           (SpillHeur)
-!           (MemoryRA
-               (RADeadCodeElim
-!                 (ClusterRA
-                     (structure Flowgraph = CFG
-                      structure Asm = Asm
---- 175,182 ----
-      structure RA = 
-          RegisterAllocator
-!           (structure SpillHeuristics = SpillHeur
-!            structure Flowgraph = MemoryRA
-               (RADeadCodeElim
-!                 (structure Flowgraph = ClusterRA
-                     (structure Flowgraph = CFG
-                      structure Asm = Asm
-***************
-*** 148,155 ****
-                      structure Spill = Spill
-                     )
-!                  )
-!                 (fun cellkind CB.GP = true
-! 		   | cellkind CB.FP = true
-! 		   | cellkind _ = false 
-                   val deadRegs = deadRegs
-                   val affectedBlocks = affectedBlocks
---- 184,190 ----
-                      structure Spill = Spill
-                     )
-!                  fun cellkind CB.GP = true 
-!                    | cellkind CB.FP = true
-!                    | cellkind _ = false
-                   val deadRegs = deadRegs
-                   val affectedBlocks = affectedBlocks
-diff -N -C 2 -r MLRISC/amd64/ra/amd64SpillInstr.sml MLRISC-mlton/amd64/ra/amd64SpillInstr.sml
-*** MLRISC/amd64/ra/amd64SpillInstr.sml	2010-02-03 11:40:46.000000000 -0500
---- MLRISC-mlton/amd64/ra/amd64SpillInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,12 ****
-  functor AMD64SpillInstr (
-        structure I : AMD64INSTR
-!       structure Props : AMD64INSN_PROPERTIES
-!           where I = I
-  
-     (* guaranteeing that floats are stored at 16-byte aligned addresses reduces the number of instructions *)
---- 7,16 ----
-  functor AMD64SpillInstr (
-        structure I : AMD64INSTR
-!       structure Props : AMD64INSN_PROPERTIES (* where I = I *)
-!                         where type I.addressing_mode = I.addressing_mode
-!                           and type I.ea = I.ea
-!                           and type I.instr = I.instr
-!                           and type I.instruction = I.instruction
-!                           and type I.operand = I.operand
-  
-     (* guaranteeing that floats are stored at 16-byte aligned addresses reduces the number of instructions *)
-***************
-*** 75,79 ****
-          in
-            (case ea
-!             of ( I.Displace _ | I.Indexed _ ) => move ()
-               | _ => error "spillToEA"
+@@ -311,50 +397,136 @@ functor AMD64Props (
+ 	 | I.CMOV {src=I.Direct (sz, _), ...} => sz
+ 	 | I.MOVE {mvOp, ...} => 
+ 	   (case mvOp
+-	     of ( I.MOVQ | I.MOVSWQ | I.MOVZWQ | I.MOVSBQ | 
+-		  I.MOVZBQ | I.MOVSLQ |
+-		  I.CVTSD2SIQ | I.CVTSS2SIQ
+-		) => 64
+-	      | ( I.MOVL | I.MOVSWL | I.MOVZWL | I.MOVSBL | 
+-		  I.CVTSD2SI | I.CVTSS2SI |
+-		  I.MOVZBL ) => 32
++	     of ( I.MOVQ ) => 64
++              | ( I.MOVSWQ ) => 64
++              | ( I.MOVZWQ ) => 64
++              | ( I.MOVSBQ ) => 64
++              | ( I.MOVZBQ ) => 64
++              | ( I.MOVSLQ ) => 64
++              | ( I.CVTSD2SIQ ) => 64
++              | ( I.CVTSS2SIQ ) => 64
++	      | ( I.MOVL ) => 32
++              | ( I.MOVSWL ) => 32
++              | ( I.MOVZWL ) => 32
++              | ( I.MOVSBL ) => 32
++              | ( I.CVTSD2SI ) => 32
++              | ( I.CVTSS2SI ) => 32
++              | ( I.MOVZBL ) => 32
+ 	      | I.MOVW => 16
+ 	      | I.MOVB => 8
+ 	   (* esac *))
+-	 | ( I.CALL _ | I.LEAL _ | I.CMPL _ | I.TESTL _ | I.MUL3 _ )
+-	     => 32
+-	 | ( I.CALLQ _ | I.LEAQ _ | I.CMPQ _ | I.TESTQ _ | I.MULQ3 _ | I.CMOV _)
+-	     => 64 
+-	 | ( I.CMPW _ | I.TESTW _ ) => 16
+-	 | ( I.CMPB _ | I.TESTB _ ) => 8 
++	 | ( I.CALL _ ) => 32
++         | ( I.LEAL _ ) => 32
++         | ( I.CMPL _ ) => 32
++         | ( I.TESTL _ ) => 32
++         | ( I.MUL3 _ ) => 32
++	 | ( I.CALLQ _ ) => 64
++         | ( I.LEAQ _ ) => 64
++         | ( I.CMPQ _ ) => 64
++         | ( I.TESTQ _ ) => 64
++         | ( I.MULQ3 _ ) => 64
++         | ( I.CMOV _ ) => 64
++	 | ( I.CMPW _ ) => 16
++	 | ( I.TESTW _ ) => 16
++	 | ( I.CMPB _ ) => 8
++	 | ( I.TESTB _ ) => 8
+ 	 | I.SHIFT {shiftOp, ...} => (case shiftOp
+-	   of ( I.SHLDL | I.SHRDL ) => 32
++	   of ( I.SHLDL ) => 32
++            | ( I.SHRDL ) => 32
+ 	   (* esac *))
+ 	 | I.UNARY {unOp, ...} =>
+ 	   (case unOp
+-	     of ( I.DECQ | I.INCQ | I.NEGQ | I.NOTQ | 
+-		  I.LOCK_DECQ | I.LOCK_INCQ | I.LOCK_NEGQ | I.LOCK_NOTQ ) => 64
+-	      | ( I.DECL | I.INCL | I.NEGL | I.NOTL ) => 32
+-	      | ( I.DECW | I.INCW | I.NEGW | I.NOTW ) => 16
+-	      | ( I.DECB | I.INCB | I.NEGB | I.NOTB ) => 8
++	     of ( I.DECQ ) => 64
++              | ( I.INCQ ) => 64
++              | ( I.NEGQ ) => 64
++              | ( I.NOTQ ) => 64
++              | ( I.LOCK_DECQ ) => 64
++              | ( I.LOCK_INCQ ) => 64
++              | ( I.LOCK_NEGQ ) => 64
++              | ( I.LOCK_NOTQ ) => 64
++	      | ( I.DECL ) => 32
++              | ( I.INCL ) => 32
++              | ( I.NEGL ) => 32
++              | ( I.NOTL ) => 32
++	      | ( I.DECW ) => 16
++              | ( I.INCW ) => 16
++              | ( I.NEGW ) => 16
++              | ( I.NOTW ) => 16
++	      | ( I.DECB ) => 8
++              | ( I.INCB ) => 8
++              | ( I.NEGB ) => 8
++              | ( I.NOTB ) => 8
+ 	   (* esac *))
+ 	 | I.MULTDIV {multDivOp, ...} => 
+ 	   (case multDivOp
+-	     of ( I.IMULL1 | I.MULL1 | I.IDIVL1 | I.DIVL1 ) => 32
+-	      | ( I.IMULQ1 | I.MULQ1 | I.IDIVQ1 | I.DIVQ1 ) => 64
++	     of ( I.IMULL1 ) => 32
++              | ( I.MULL1 ) => 32
++              | ( I.IDIVL1 ) => 32
++              | ( I.DIVL1 ) => 32
++	      | ( I.IMULQ1 ) => 64
++              | ( I.MULQ1 ) => 64
++              | ( I.IDIVQ1 ) => 64
++              | ( I.DIVQ1 ) => 64
+ 	   (* esac *))
+ 	 | I.BINARY {binOp, ...} => 
+ 	   (case binOp
+-	     of ( I.ADDQ | I.SUBQ | I.ANDQ | I.ORQ | I.XORQ | I.SHLQ | I.SARQ 
+-	        | I.SHRQ | I.MULQ | I.IMULQ | I.ADCQ | I.SBBQ ) => 64
+-	      | ( I.ADDL | I.SUBL | I.ANDL | I.ORL | I.XORL | I.SHLL | I.SARL
+-                | I.SHRL | I.MULL | I.IMULL | I.ADCL | I.SBBL | I.BTSL | I.BTCL
+-                | I.BTRL | I.ROLL | I.RORL | I.XCHGL ) => 32
+-	      | ( I.ADDW | I.SUBW | I.ANDW | I.ORW | I.XORW | I.SHLW | I.SARW 
+-                | I.SHRW | I.MULW | I.IMULW | I.BTSW | I.BTCW | I.BTRW | I.ROLW 
+-                | I.RORW | I.XCHGW ) => 16
+-	      | ( I.ADDB | I.SUBB | I.ANDB | I.ORB | I.XORB | I.SHLB | I.SARB 
+-                | I.SHRB | I.MULB | I.IMULB | I.XCHGB ) => 8
++	     of ( I.ADDQ ) => 64
++              | ( I.SUBQ ) => 64
++              | ( I.ANDQ ) => 64
++              | ( I.ORQ ) => 64
++              | ( I.XORQ ) => 64
++              | ( I.SHLQ ) => 64
++              | ( I.SARQ ) => 64
++              | ( I.SHRQ ) => 64
++              | ( I.MULQ ) => 64
++              | ( I.IMULQ ) => 64
++              | ( I.ADCQ ) => 64
++              | ( I.SBBQ ) => 64
++	      | ( I.ADDL ) => 32
++              | ( I.SUBL ) => 32
++              | ( I.ANDL ) => 32
++              | ( I.ORL ) => 32
++              | ( I.XORL ) => 32
++              | ( I.SHLL ) => 32
++              | ( I.SARL ) => 32
++              | ( I.SHRL ) => 32
++              | ( I.MULL ) => 32
++              | ( I.IMULL ) => 32
++              | ( I.ADCL ) => 32
++              | ( I.SBBL ) => 32
++              | ( I.BTSL ) => 32
++              | ( I.BTCL ) => 32
++              | ( I.BTRL ) => 32
++              | ( I.ROLL ) => 32
++              | ( I.RORL ) => 32
++              | ( I.XCHGL ) => 32
++	      | ( I.ADDW ) => 16
++              | ( I.SUBW ) => 16
++              | ( I.ANDW ) => 16
++              | ( I.ORW ) => 16
++              | ( I.XORW ) => 16
++              | ( I.SHLW ) => 16
++              | ( I.SARW ) => 16
++              | ( I.SHRW ) => 16
++              | ( I.MULW ) => 16
++              | ( I.IMULW ) => 16
++              | ( I.BTSW ) => 16
++              | ( I.BTCW ) => 16
++              | ( I.BTRW ) => 16
++              | ( I.ROLW ) => 16
++              | ( I.RORW ) => 16
++              | ( I.XCHGW ) => 16
++	      | ( I.ADDB ) => 8
++              | ( I.SUBB ) => 8
++              | ( I.ANDB ) => 8
++              | ( I.ORB ) => 8
++              | ( I.XORB ) => 8
++              | ( I.SHLB ) => 8
++              | ( I.SARB ) => 8
++              | ( I.SHRB ) => 8
++              | ( I.MULB ) => 8
++              | ( I.IMULB ) => 8
++              | ( I.XCHGB ) => 8
+ 	      | _ => raise Fail "" (* 64*)
+ 	   (* esac *))
+ 	 | I.XADD {sz, ...} => szToInt sz
+@@ -362,22 +534,44 @@ functor AMD64Props (
+ 	 | I.PAUSE => 64
+ 	 | I.RDTSC => 64
+ 	 | I.RDTSCP => 64
+-	 | (I.MFENCE | I.SFENCE | I.LFENCE) => 64
++	 | (I.MFENCE) => 64
++	 | (I.SFENCE) => 64
++	 | (I.LFENCE) => 64
+ 	 | _ => raise Fail "" (*64*)
+       (* esac *))
+ 
+     fun szOfFinstr instr = (case instr
+         of I.FMOVE {fmvOp, ...} => (case fmvOp
+-           of ( I.MOVSS | I.CVTSS2SD | I.CVTSI2SS | I.CVTSI2SSQ ) => 32
+-            | ( I.MOVSD | I.CVTSD2SS | I.CVTSI2SD | I.CVTSI2SDQ ) => 64
++           of ( I.MOVSS ) => 32
++            | ( I.CVTSS2SD ) => 32
++            | ( I.CVTSI2SS ) => 32
++            | ( I.CVTSI2SSQ ) => 32
++            | ( I.MOVSD ) => 64
++            | ( I.CVTSD2SS ) => 64
++            | ( I.CVTSI2SD ) => 64
++            | ( I.CVTSI2SDQ ) => 64
             (* end case *))
---- 79,84 ----
-          in
-            (case ea
-!             of ( I.Displace _ ) => move ()
-!              | ( I.Indexed _ ) => move ()
-               | _ => error "spillToEA"
+          | I.FCOM {comOp, ...} => (case comOp
+-           of ( I.COMISS | I.UCOMISS ) => 32
+-            | ( I.COMISD | I.UCOMISD ) => 64
++           of ( I.COMISS ) => 32
++            | ( I.UCOMISS ) => 32
++            | ( I.COMISD ) => 64
++            | ( I.UCOMISD ) => 64
             (* end case *))
-***************
-*** 87,91 ****
-          in
-            (case ea
-!             of ( I.Displace _ | I.Indexed _ ) => move ()
-               | _ => error "reloadFromEA"
+          | I.FBINOP {binOp, ...} => (case binOp
+-           of ( I.ADDSS | I.SUBSS | I.MULSS | I.DIVSS | I.XORPS | I.ANDPS | I.ORPS ) => 32
+-            | ( I.ADDSD | I.SUBSD | I.MULSD | I.DIVSD | I.XORPD | I.ANDPD | I.ORPD ) => 64
++           of ( I.ADDSS ) => 32
++            | ( I.SUBSS ) => 32
++            | ( I.MULSS ) => 32
++            | ( I.DIVSS ) => 32
++            | ( I.XORPS ) => 32
++            | ( I.ANDPS ) => 32
++            | ( I.ORPS ) => 32
++            | ( I.ADDSD ) => 64
++            | ( I.SUBSD ) => 64
++            | ( I.MULSD ) => 64
++            | ( I.DIVSD ) => 64
++            | ( I.XORPD ) => 64
++            | ( I.ANDPD ) => 64
++            | ( I.ORPD ) => 64
             (* end case *))
---- 92,97 ----
-          in
-            (case ea
-!             of ( I.Displace _ ) => move ()
-!              | ( I.Indexed _ ) => move ()
-               | _ => error "reloadFromEA"
-            (* end case *))
-***************
-*** 117,123 ****
-  		 (* With sign or zero extended spills we use different operand sizes
-  		  * for copying to the tmp operand and for copying from the tmp operand. *)
-! 		 | I.MOVE {mvOp as (I.MOVZBQ|I.MOVSBQ|I.MOVZWQ|I.MOVSWQ|
-! 		                    I.MOVSLQ|I.MOVZBL|I.MOVSBL|I.MOVZWL|
-! 		                    I.MOVSWL), src, dst} => let
-  		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-  		   in
---- 123,183 ----
-  		 (* With sign or zero extended spills we use different operand sizes
-  		  * for copying to the tmp operand and for copying from the tmp operand. *)
-! 		 | I.MOVE {mvOp as (I.MOVZBQ), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVSBQ), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVZWQ), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVSWQ), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVSLQ), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVZBL), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVSBL), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVZWL), src, dst} => let
-! 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-! 		   in
-! 		     {proh=[tmpR], newReg=SOME tmpR,
-! 		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
-! 		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
-! 		   end
-! 		 | I.MOVE {mvOp as (I.MOVSWL), src, dst} => let
-  		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
-  		   in
-***************
-*** 183,188 ****
-  		 | I.BINARY {binOp, src, dst} => let 
-  		   (* note: dst = r *)
-! 		   fun multBinOp(I.MULQ|I.MULL|I.MULW|I.MULB|
-! 				 I.IMULQ|I.IMULL|I.IMULW|I.IMULB) = true
-  		     | multBinOp _ = false
-  		   in
---- 243,254 ----
-  		 | I.BINARY {binOp, src, dst} => let 
-  		   (* note: dst = r *)
-! 		   fun multBinOp(I.MULQ) = true
-! 		     | multBinOp(I.MULL) = true
-! 		     | multBinOp(I.MULW) = true
-! 		     | multBinOp(I.MULB) = true
-! 		     | multBinOp(I.IMULQ) = true
-! 		     | multBinOp(I.IMULL) = true
-! 		     | multBinOp(I.IMULW) = true
-! 		     | multBinOp(I.IMULB) = true
-  		     | multBinOp _ = false
-  		   in
-***************
-*** 610,614 ****
-                     end
-                  (* treat bitwise operators differently, as they require that their source operand is 16-byte aligned *)
-! 		 | I.FBINOP {binOp=binOp as (I.XORPS | I.XORPD | I.ANDPS | I.ANDPD | I.ORPS | I.ORPD), src, dst} => if CB.sameColor (r, dst)
-                     then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-  			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
---- 676,750 ----
-                     end
-                  (* treat bitwise operators differently, as they require that their source operand is 16-byte aligned *)
-! 		 | I.FBINOP {binOp=binOp as (I.XORPS), src, dst} => if CB.sameColor (r, dst)
-!                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-! 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-! 		         proh=[], newReg=NONE}
-!                    else if floats16ByteAligned
-!                         then let
-!                           val tmpR = newFreg ()
-!                           val tmp = I.FDirect tmpR
-!                           in
-!                               {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
-! 				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)], 
-! 		               proh=[tmpR], newReg=SOME tmpR}
-!                           end
-!                    else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
-! 		 | I.FBINOP {binOp=binOp as (I.XORPD), src, dst} => if CB.sameColor (r, dst)
-!                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-! 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-! 		         proh=[], newReg=NONE}
-!                    else if floats16ByteAligned
-!                         then let
-!                           val tmpR = newFreg ()
-!                           val tmp = I.FDirect tmpR
-!                           in
-!                               {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
-! 				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)], 
-! 		               proh=[tmpR], newReg=SOME tmpR}
-!                           end
-!                    else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
-! 		 | I.FBINOP {binOp=binOp as (I.ANDPS), src, dst} => if CB.sameColor (r, dst)
-!                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-! 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-! 		         proh=[], newReg=NONE}
-!                    else if floats16ByteAligned
-!                         then let
-!                           val tmpR = newFreg ()
-!                           val tmp = I.FDirect tmpR
-!                           in
-!                               {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
-! 				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)], 
-! 		               proh=[tmpR], newReg=SOME tmpR}
-!                           end
-!                    else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
-! 		 | I.FBINOP {binOp=binOp as (I.ANDPD), src, dst} => if CB.sameColor (r, dst)
-!                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-! 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-! 		         proh=[], newReg=NONE}
-!                    else if floats16ByteAligned
-!                         then let
-!                           val tmpR = newFreg ()
-!                           val tmp = I.FDirect tmpR
-!                           in
-!                               {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
-! 				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)], 
-! 		               proh=[tmpR], newReg=SOME tmpR}
-!                           end
-!                    else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
-! 		 | I.FBINOP {binOp=binOp as (I.ORPS), src, dst} => if CB.sameColor (r, dst)
-!                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-! 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-! 		         proh=[], newReg=NONE}
-!                    else if floats16ByteAligned
-!                         then let
-!                           val tmpR = newFreg ()
-!                           val tmp = I.FDirect tmpR
-!                           in
-!                               {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
-! 				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)], 
-! 		               proh=[tmpR], newReg=SOME tmpR}
-!                           end
-!                    else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
-! 		 | I.FBINOP {binOp=binOp as (I.ORPD), src, dst} => if CB.sameColor (r, dst)
-                     then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
-  			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
-diff -N -C 2 -r MLRISC/backpatch/backpatch.sml MLRISC-mlton/backpatch/backpatch.sml
-*** MLRISC/backpatch/backpatch.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/backpatch/backpatch.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 9,19 ****
-  functor BBSched2
-      (structure Emitter : INSTRUCTION_EMITTER
-!      structure CFG     : CONTROL_FLOW_GRAPH
-! 			where I = Emitter.I
-! 		          and P = Emitter.S.P
-!      structure Jumps   : SDI_JUMPS
-!      			where I = CFG.I
-!      structure Props   : INSN_PROPERTIES
-! 			where I = CFG.I
-      ) = 
-  struct
---- 9,51 ----
-  functor BBSched2
-      (structure Emitter : INSTRUCTION_EMITTER
-!      structure CFG     : CONTROL_FLOW_GRAPH (* where I = Emitter.I and P = Emitter.S.P *)
-!                          where type I.addressing_mode = Emitter.I.addressing_mode
-!                            and type I.ea = Emitter.I.ea
-!                            and type I.instr = Emitter.I.instr
-!                            and type I.instruction = Emitter.I.instruction
-!                            and type I.operand = Emitter.I.operand
-!                          where type P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
-!                            and type P.T.Basis.cond = Emitter.S.P.T.Basis.cond
-!                            and type P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
-!                            and type P.T.Basis.ext = Emitter.S.P.T.Basis.ext
-!                            and type P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
-!                            and type P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
-!                            and type P.T.Constant.const = Emitter.S.P.T.Constant.const
-!                            and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
-!                            and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
-!                            and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
-!                            and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
-!                            and type P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
-!                            and type P.T.Region.region = Emitter.S.P.T.Region.region
-!                            and type P.T.ccexp = Emitter.S.P.T.ccexp
-!                            and type P.T.fexp = Emitter.S.P.T.fexp
-!                            (* and type P.T.labexp = Emitter.S.P.T.labexp *)
-!                            and type P.T.mlrisc = Emitter.S.P.T.mlrisc
-!                            and type P.T.oper = Emitter.S.P.T.oper
-!                            and type P.T.rep = Emitter.S.P.T.rep
-!                            and type P.T.rexp = Emitter.S.P.T.rexp
-!                            and type P.T.stm = Emitter.S.P.T.stm
-!      structure Jumps   : SDI_JUMPS (* where I = CFG.I *)
-!                          where type I.addressing_mode = CFG.I.addressing_mode
-!                            and type I.ea = CFG.I.ea
-!                            and type I.instr = CFG.I.instr
-!                            and type I.instruction = CFG.I.instruction
-!                            and type I.operand = CFG.I.operand
-!      structure Props   : INSN_PROPERTIES (* where I = CFG.I *)
-!                          where type I.addressing_mode = CFG.I.addressing_mode
-!                            and type I.ea = CFG.I.ea
-!                            and type I.instr = CFG.I.instr
-!                            and type I.instruction = CFG.I.instruction
-!                            and type I.operand = CFG.I.operand
-      ) = 
-  struct
-diff -N -C 2 -r MLRISC/backpatch/sdi-jumps.sig MLRISC-mlton/backpatch/sdi-jumps.sig
-*** MLRISC/backpatch/sdi-jumps.sig	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/backpatch/sdi-jumps.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,12 ****
-    structure I : INSTRUCTIONS
-    structure C : CELLS
-!     sharing I.C = C
-  
-    val branchDelayedArch : bool
---- 8,12 ----
-    structure I : INSTRUCTIONS
-    structure C : CELLS
-!     (* sharing I.C = C *)
-  
-    val branchDelayedArch : bool
-diff -N -C 2 -r MLRISC/backpatch/spanDep.sml MLRISC-mlton/backpatch/spanDep.sml
-*** MLRISC/backpatch/spanDep.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/backpatch/spanDep.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 10,25 ****
-  functor SpanDependencyResolution
-      (structure Emitter   : INSTRUCTION_EMITTER
-!      structure CFG       : CONTROL_FLOW_GRAPH
-!                              where I = Emitter.I
-!                           and P = Emitter.S.P
-!      structure Jumps     : SDI_JUMPS
-!                              where I = CFG.I
-!      structure DelaySlot : DELAY_SLOT_PROPERTIES
-!                              where I = CFG.I
-!      structure Props     : INSN_PROPERTIES
-!                              where I = CFG.I
-!      structure Asm        : INSTRUCTION_EMITTER
-!                              where I = CFG.I
-!                              and   S = Emitter.S
-       ) : BBSCHED = 
-  struct
---- 10,86 ----
-  functor SpanDependencyResolution
-      (structure Emitter   : INSTRUCTION_EMITTER
-!      structure CFG       : CONTROL_FLOW_GRAPH (* where I = Emitter.I and P = Emitter.S.P *)
-!                            where type I.addressing_mode = Emitter.I.addressing_mode
-!                              and type I.ea = Emitter.I.ea
-!                              and type I.instr = Emitter.I.instr
-!                              and type I.instruction = Emitter.I.instruction
-!                              and type I.operand = Emitter.I.operand
-!                            where type P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
-!                              and type P.T.Basis.cond = Emitter.S.P.T.Basis.cond
-!                              and type P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
-!                              and type P.T.Basis.ext = Emitter.S.P.T.Basis.ext
-!                              and type P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
-!                              and type P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
-!                              and type P.T.Constant.const = Emitter.S.P.T.Constant.const
-!                              and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
-!                              and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
-!                              and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
-!                              and type P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
-!                              and type P.T.Region.region = Emitter.S.P.T.Region.region
-!                              and type P.T.ccexp = Emitter.S.P.T.ccexp
-!                              and type P.T.fexp = Emitter.S.P.T.fexp
-!                              (* and type P.T.labexp = Emitter.S.P.T.labexp *)
-!                              and type P.T.mlrisc = Emitter.S.P.T.mlrisc
-!                              and type P.T.oper = Emitter.S.P.T.oper
-!                              and type P.T.rep = Emitter.S.P.T.rep
-!                              and type P.T.rexp = Emitter.S.P.T.rexp
-!                              and type P.T.stm = Emitter.S.P.T.stm
-!      structure Jumps     : SDI_JUMPS (* where I = CFG.I *)
-!                            where type I.addressing_mode = CFG.I.addressing_mode
-!                              and type I.ea = CFG.I.ea
-!                              and type I.instr = CFG.I.instr
-!                              and type I.instruction = CFG.I.instruction
-!                              and type I.operand = CFG.I.operand
-!      structure DelaySlot : DELAY_SLOT_PROPERTIES (* where I = CFG.I *)
-!                            where type I.addressing_mode = CFG.I.addressing_mode
-!                              and type I.ea = CFG.I.ea
-!                              and type I.instr = CFG.I.instr
-!                              and type I.instruction = CFG.I.instruction
-!                              and type I.operand = CFG.I.operand
-!      structure Props     : INSN_PROPERTIES (* where I = CFG.I *)
-!                            where type I.addressing_mode = CFG.I.addressing_mode
-!                              and type I.ea = CFG.I.ea
-!                              and type I.instr = CFG.I.instr
-!                              and type I.instruction = CFG.I.instruction
-!                              and type I.operand = CFG.I.operand
-!      structure Asm       : INSTRUCTION_EMITTER (* where I = CFG.I and S = Emitter.S *)
-!                            where type I.addressing_mode = CFG.I.addressing_mode
-!                              and type I.ea = CFG.I.ea
-!                              and type I.instr = CFG.I.instr
-!                              and type I.instruction = CFG.I.instruction
-!                              and type I.operand = CFG.I.operand
-!                            where type S.P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
-!                              and type S.P.T.Basis.cond = Emitter.S.P.T.Basis.cond
-!                              and type S.P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
-!                              and type S.P.T.Basis.ext = Emitter.S.P.T.Basis.ext
-!                              and type S.P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
-!                              and type S.P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
-!                              and type S.P.T.Constant.const = Emitter.S.P.T.Constant.const
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
-!                              and type S.P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
-!                              and type S.P.T.Region.region = Emitter.S.P.T.Region.region
-!                              and type S.P.T.ccexp = Emitter.S.P.T.ccexp
-!                              and type S.P.T.fexp = Emitter.S.P.T.fexp
-!                              (* and type S.P.T.labexp = Emitter.S.P.T.labexp *)
-!                              and type S.P.T.mlrisc = Emitter.S.P.T.mlrisc
-!                              and type S.P.T.oper = Emitter.S.P.T.oper
-!                              and type S.P.T.rep = Emitter.S.P.T.rep
-!                              and type S.P.T.rexp = Emitter.S.P.T.rexp
-!                              and type S.P.T.stm = Emitter.S.P.T.stm
-!                              and type ('a,'b,'c,'d) S.stream = ('a,'b,'c,'d) Emitter.S.stream
-       ) : BBSCHED = 
-  struct
-***************
-*** 276,280 ****
-                and eliminateNop(jmp) = 
-                    case (nop,nOn) of
-!                      (true,(D.D_FALLTHRU | D.D_NONE)) =>
-                            D.enableDelaySlot{n=true,nop=false,instr=jmp}
-                    |  _ => jmp
---- 337,343 ----
-                and eliminateNop(jmp) = 
-                    case (nop,nOn) of
-!                      (true,D.D_FALLTHRU) =>
-!                           D.enableDelaySlot{n=true,nop=false,instr=jmp}
-!                   |  (true,D.D_NONE) =>
-                            D.enableDelaySlot{n=true,nop=false,instr=jmp}
-                    |  _ => jmp
-diff -N -C 2 -r MLRISC/backpatch/vlBackPatch.sml MLRISC-mlton/backpatch/vlBackPatch.sml
-*** MLRISC/backpatch/vlBackPatch.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/backpatch/vlBackPatch.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 27,38 ****
-    (structure CodeString : CODE_STRING
-     structure Jumps      : SDI_JUMPS 
-!    structure Props      : INSN_PROPERTIES 
-!                         where I = Jumps.I
-!    structure Emitter    : MC_EMIT
-!                         where I = Props.I
-!    structure CFG        : CONTROL_FLOW_GRAPH
-!                         where I = Emitter.I
-!    structure Asm        : INSTRUCTION_EMITTER
-!                         where I = CFG.I) =
-  struct 
-    structure I   = Jumps.I
---- 27,55 ----
-    (structure CodeString : CODE_STRING
-     structure Jumps      : SDI_JUMPS 
-!    structure Props      : INSN_PROPERTIES (* where I = Jumps.I *)
-!                           where type I.addressing_mode = Jumps.I.addressing_mode
-!                             and type I.ea = Jumps.I.ea
-!                             and type I.instr = Jumps.I.instr
-!                             and type I.instruction = Jumps.I.instruction
-!                             and type I.operand = Jumps.I.operand
-!    structure Emitter    : MC_EMIT (* where I = Props.I *)
-!                           where type I.addressing_mode = Props.I.addressing_mode
-!                             and type I.ea = Props.I.ea
-!                             and type I.instr = Props.I.instr
-!                             and type I.instruction = Props.I.instruction
-!                             and type I.operand = Props.I.operand
-!    structure CFG        : CONTROL_FLOW_GRAPH (* where I = Emitter.I *)
-!                           where type I.addressing_mode = Emitter.I.addressing_mode
-!                             and type I.ea = Emitter.I.ea
-!                             and type I.instr = Emitter.I.instr
-!                             and type I.instruction = Emitter.I.instruction
-!                             and type I.operand = Emitter.I.operand
-!    structure Asm        : INSTRUCTION_EMITTER (* where I = CFG.I *)
-!                           where type I.addressing_mode = CFG.I.addressing_mode
-!                             and type I.ea = CFG.I.ea
-!                             and type I.instr = CFG.I.instr
-!                             and type I.instruction = CFG.I.instruction
-!                             and type I.operand = CFG.I.operand
-!   ) =
-  struct 
-    structure I   = Jumps.I
-diff -N -C 2 -r MLRISC/block-placement/block-placement.sml MLRISC-mlton/block-placement/block-placement.sml
-*** MLRISC/block-placement/block-placement.sml	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/block-placement/block-placement.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 6,13 ****
-  functor BlockPlacement 
-     (structure CFG : CONTROL_FLOW_GRAPH
-!     structure Props : INSN_PROPERTIES
-! 	where I = CFG.I)
-! 
-!    : BLOCK_PLACEMENT =
-  
-  struct
---- 6,16 ----
-  functor BlockPlacement 
-     (structure CFG : CONTROL_FLOW_GRAPH
-!     structure Props : INSN_PROPERTIES (* where I = CFG.I *)
-!                       where type I.addressing_mode = CFG.I.addressing_mode
-!                         and type I.ea = CFG.I.ea
-!                         and type I.instr = CFG.I.instr
-!                         and type I.instruction = CFG.I.instruction
-!                         and type I.operand = CFG.I.operand
-!    ) : BLOCK_PLACEMENT =
-  
-  struct
-diff -N -C 2 -r MLRISC/block-placement/check-placement-fn.sml MLRISC-mlton/block-placement/check-placement-fn.sml
-*** MLRISC/block-placement/check-placement-fn.sml	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/block-placement/check-placement-fn.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 10,15 ****
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES
-!       where I = CFG.I
-  
-    ) : sig
---- 10,19 ----
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
-!                           where type I.addressing_mode = CFG.I.addressing_mode
-!                             and type I.ea = CFG.I.ea
-!                             and type I.instr = CFG.I.instr
-!                             and type I.instruction = CFG.I.instruction
-!                             and type I.operand = CFG.I.operand
-  
-    ) : sig
-***************
-*** 82,86 ****
-  	(* check that FALLSTHRU and BRANCH false edges connect adjacent nodes *)
-  	  fun chkEdge (src, dst, CFG.EDGE{k, ...}) = (case k
-! 		 of (CFG.FALLSTHRU | CFG.BRANCH false) =>
-  		      if adjacentNodes(src, dst)
-  			then ()
---- 86,94 ----
-  	(* check that FALLSTHRU and BRANCH false edges connect adjacent nodes *)
-  	  fun chkEdge (src, dst, CFG.EDGE{k, ...}) = (case k
-! 		 of CFG.FALLSTHRU =>
-! 		      if adjacentNodes(src, dst)
-! 			then ()
-! 			else reportNotAdjacent(src, dst)
-! 		  | CFG.BRANCH false =>
-  		      if adjacentNodes(src, dst)
-  			then ()
-diff -N -C 2 -r MLRISC/block-placement/jump-chain-elim-fn.sml MLRISC-mlton/block-placement/jump-chain-elim-fn.sml
-*** MLRISC/block-placement/jump-chain-elim-fn.sml	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/block-placement/jump-chain-elim-fn.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 13,18 ****
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES
-!       where I = CFG.I
-  
-    (* Control flag that when set true allows jumps to labels outside
---- 13,22 ----
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
-!                           where type I.addressing_mode = CFG.I.addressing_mode
-!                             and type I.ea = CFG.I.ea
-!                             and type I.instr = CFG.I.instr
-!                             and type I.instruction = CFG.I.instruction
-!                             and type I.operand = CFG.I.operand
-  
-    (* Control flag that when set true allows jumps to labels outside
-diff -N -C 2 -r MLRISC/block-placement/weighted-block-placement-fn.sml MLRISC-mlton/block-placement/weighted-block-placement-fn.sml
-*** MLRISC/block-placement/weighted-block-placement-fn.sml	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/block-placement/weighted-block-placement-fn.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 13,18 ****
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES
-!       where I = CFG.I
-  
-    ) : BLOCK_PLACEMENT = struct
---- 13,22 ----
-  
-      structure CFG : CONTROL_FLOW_GRAPH
-!     structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
-!                           where type I.addressing_mode = CFG.I.addressing_mode
-!                             and type I.ea = CFG.I.ea
-!                             and type I.instr = CFG.I.instr
-!                             and type I.instruction = CFG.I.instruction
-!                             and type I.operand = CFG.I.operand
-  
-    ) : BLOCK_PLACEMENT = struct
-diff -N -C 2 -r MLRISC/c-call/archs/sparc-c-call-fn.sml MLRISC-mlton/c-call/archs/sparc-c-call-fn.sml
-*** MLRISC/c-call/archs/sparc-c-call-fn.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/archs/sparc-c-call-fn.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 78,84 ****
-  
-    (* assign a C type to a kind of machine location *)
-!     fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR | 
-! 		   CTy.C_ARRAY _ | CTy.C_STRUCT _ | CTy.C_UNION _) = GPR
-  
-    (* takes a C type and a request for passing values of that type *)
---- 78,90 ----
-  
-    (* assign a C type to a kind of machine location *)
-!     fun kindOfCTy (CTy.C_float) = FPR
-!       | kindOfCTy (CTy.C_double) = FPR
-!       | kindOfCTy (CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_unsigned _) = GPR
-!       | kindOfCTy (CTy.C_signed _) = GPR
-!       | kindOfCTy (CTy.C_PTR) = GPR
-!       | kindOfCTy (CTy.C_ARRAY _) = GPR
-!       | kindOfCTy (CTy.C_STRUCT _) = GPR
-!       | kindOfCTy (CTy.C_UNION _) = GPR
-  
-    (* takes a C type and a request for passing values of that type *)
-***************
-*** 87,93 ****
-            in
-  	    case cTy
-! 	     of (CTy.C_STRUCT _ | CTy.C_UNION _) => (32, kindOfCTy cTy, align)
-! 	      | (CTy.C_unsigned CTy.I_long_long |
-! 		 CTy.C_signed CTy.I_long_long   ) => raise Fail "todo"
-  	      | _ => (sz * 8, kindOfCTy cTy, align)
-  	  end
---- 93,100 ----
-            in
-  	    case cTy
-! 	     of (CTy.C_STRUCT _) => (32, kindOfCTy cTy, align)
-! 	      | (CTy.C_UNION _) => (32, kindOfCTy cTy, align)
-! 	      | (CTy.C_unsigned CTy.I_long_long) => raise Fail "todo"
-! 	      | (CTy.C_signed CTy.I_long_long) => raise Fail "todo"
-  	      | _ => (sz * 8, kindOfCTy cTy, align)
-  	  end
-***************
-*** 136,140 ****
-  	  val res_szal =
-  	    case retTy of
-! 		(Ty.C_long_double | Ty.C_STRUCT _ | Ty.C_UNION _) =>
-  		  SOME (SparcCSizes.sizeOfTy retTy)
-  	      | _ => NONE
---- 143,151 ----
-  	  val res_szal =
-  	    case retTy of
-! 		(Ty.C_long_double) =>
-! 		  SOME (SparcCSizes.sizeOfTy retTy)
-!               | (Ty.C_STRUCT _) =>
-! 		  SOME (SparcCSizes.sizeOfTy retTy)
-! 	      | (Ty.C_UNION _) =>
-  		  SOME (SparcCSizes.sizeOfTy retTy)
-  	      | _ => NONE
-diff -N -C 2 -r MLRISC/c-call/archs/sparc-c-sizes.sml MLRISC-mlton/c-call/archs/sparc-c-sizes.sml
-*** MLRISC/c-call/archs/sparc-c-sizes.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/archs/sparc-c-sizes.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,19 ****
-  
-    (* calculate size and alignment for a C type *)
-!     fun sizeOfTy (Ty.C_void | Ty.C_float | Ty.C_PTR |
-! 	      Ty.C_signed (Ty.I_int | Ty.I_long) |
-! 	      Ty.C_unsigned (Ty.I_int | Ty.I_long)) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_double |
-! 	      Ty.C_signed Ty.I_long_long |
-! 	      Ty.C_unsigned Ty.I_long_long) = {sz=8, align=8}
-        | sizeOfTy (Ty.C_long_double) = {sz=16, align=8}
-!       | sizeOfTy (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) = {sz=1, align=1}
-!       | sizeOfTy (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) = {sz=2, align=2}
-        | sizeOfTy (Ty.C_ARRAY (t, n)) = let val {sz=s, align=a} = sizeOfTy t in {sz=n * s, align=a} end
-        | sizeOfTy (Ty.C_STRUCT l) =
---- 7,25 ----
-  
-    (* calculate size and alignment for a C type *)
-!     fun sizeOfTy (Ty.C_void) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_float) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_PTR) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_signed (Ty.I_int)) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_signed (Ty.I_long)) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_unsigned (Ty.I_int)) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_unsigned (Ty.I_long)) = {sz=4, align=4}
-!       | sizeOfTy (Ty.C_double) = {sz=8, align=8}
-!       | sizeOfTy (Ty.C_signed Ty.I_long_long) = {sz=8, align=8}
-!       | sizeOfTy (Ty.C_unsigned Ty.I_long_long) = {sz=8, align=8}
-        | sizeOfTy (Ty.C_long_double) = {sz=16, align=8}
-!       | sizeOfTy (Ty.C_signed Ty.I_char) = {sz=1, align=1}
-!       | sizeOfTy (Ty.C_unsigned Ty.I_char) = {sz=1, align=1}
-!       | sizeOfTy (Ty.C_signed Ty.I_short) = {sz=2, align=2}
-!       | sizeOfTy (Ty.C_unsigned Ty.I_short) = {sz=2, align=2}
-        | sizeOfTy (Ty.C_ARRAY (t, n)) = let val {sz=s, align=a} = sizeOfTy t in {sz=n * s, align=a} end
-        | sizeOfTy (Ty.C_STRUCT l) =
-diff -N -C 2 -r MLRISC/c-call/archs/x86-64-svid-fn.sml MLRISC-mlton/c-call/archs/x86-64-svid-fn.sml
-*** MLRISC/c-call/archs/x86-64-svid-fn.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/archs/x86-64-svid-fn.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 76,80 ****
-      val callerSaveRegs =  [C.rax, C.rcx, C.rdx, C.rsi, C.rdi, C.r8, C.r9, C.r10, C.r11]
-      val callerSaveFRegs = (C.Regs CB.FP {from=0, to=15, step=1})
-!     val calleeSaveFRegs = []
-  			  
-      val frameAlignB = 16
---- 76,80 ----
-      val callerSaveRegs =  [C.rax, C.rcx, C.rdx, C.rsi, C.rdi, C.r8, C.r9, C.r10, C.r11]
-      val callerSaveFRegs = (C.Regs CB.FP {from=0, to=15, step=1})
-!     val calleeSaveFRegs : T.reg list = []
-  			  
-      val frameAlignB = 16
-***************
-*** 103,109 ****
-  
-    (* classify a C type into its location kind (assuming that aggregates cannot be passed in registers) *)
-!     fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_ARRAY _ | CTy.C_STRUCT _ | CTy.C_UNION _) = raise Fail "impossible"
-!       | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR) = GPR
-  
-      fun combineKinds (k1, k2) = if (k1 = k2)
---- 103,115 ----
-  
-    (* classify a C type into its location kind (assuming that aggregates cannot be passed in registers) *)
-!     fun kindOfCTy (CTy.C_float) = FPR
-!       | kindOfCTy (CTy.C_double) = FPR
-!       | kindOfCTy (CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_ARRAY _) = raise Fail "impossible"
-!       | kindOfCTy (CTy.C_STRUCT _) = raise Fail "impossible"
-!       | kindOfCTy (CTy.C_UNION _) = raise Fail "impossible"
-!       | kindOfCTy (CTy.C_unsigned _) = GPR
-!       | kindOfCTy (CTy.C_signed _) = GPR
-!       | kindOfCTy (CTy.C_PTR) = GPR
-  
-      fun combineKinds (k1, k2) = if (k1 = k2)
-***************
-*** 129,137 ****
-  
-      fun containsUnalignedFields cTy = (case cTy
-!         of (CTy.C_STRUCT cTys | CTy.C_UNION cTys) => List.exists containsUnalignedFields cTys
-  	 | cTy => Int.max(8, szBOfCTy cTy) mod 8 <> 0
-          (* end case *))
-  
-!     fun reqsOfCTy (cTy as (CTy.C_STRUCT _ | CTy.C_UNION _ | CTy.C_ARRAY _)) = 
-  	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
-  	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
---- 135,152 ----
-  
-      fun containsUnalignedFields cTy = (case cTy
-!         of (CTy.C_STRUCT cTys) => List.exists containsUnalignedFields cTys
-!          | (CTy.C_UNION cTys) => List.exists containsUnalignedFields cTys
-  	 | cTy => Int.max(8, szBOfCTy cTy) mod 8 <> 0
-          (* end case *))
-  
-!     fun reqsOfCTy (cTy as (CTy.C_STRUCT _)) = 
-! 	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
-! 	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
-! 	      else List.map (fn eb => (8*8, kindOfEightByte eb, 8)) (eightBytesOfCTy cTy)
-!       | reqsOfCTy (cTy as (CTy.C_UNION _)) = 
-! 	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
-! 	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
-! 	      else List.map (fn eb => (8*8, kindOfEightByte eb, 8)) (eightBytesOfCTy cTy)
-!       | reqsOfCTy (cTy as (CTy.C_ARRAY _)) = 
-  	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
-  	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
-diff -N -C 2 -r MLRISC/c-call/archs/x86-svid-fn.sml MLRISC-mlton/c-call/archs/x86-svid-fn.sml
-*** MLRISC/c-call/archs/x86-svid-fn.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/archs/x86-svid-fn.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 69,74 ****
-  
-    (* assign a C type to a kind of machine location *)
-!     fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR | CTy.C_ARRAY _) = GPR
-  
-      (* convert a C type to reqs for staged allocation *)
---- 69,79 ----
-  
-    (* assign a C type to a kind of machine location *)
-!     fun kindOfCTy (CTy.C_float) = FPR
-!       | kindOfCTy (CTy.C_double) = FPR
-!       | kindOfCTy (CTy.C_long_double) = FPR
-!       | kindOfCTy (CTy.C_unsigned _) = GPR
-!       | kindOfCTy (CTy.C_signed _) = GPR
-!       | kindOfCTy (CTy.C_PTR) = GPR
-!       | kindOfCTy (CTy.C_ARRAY _) = GPR
-  
-      (* convert a C type to reqs for staged allocation *)
-***************
-*** 87,92 ****
-                   then [(8, GPR, align), (8, GPR, align)]
-                else reqs
-! 	    | ( (CTy.C_unsigned CTy.I_long_long |
-! 		 CTy.C_signed CTy.I_long_long   ),
-  		_ ) => 
-  	      (* 64-bit integers are returned in GPRs *)
---- 92,100 ----
-                   then [(8, GPR, align), (8, GPR, align)]
-                else reqs
-! 	    | ( (CTy.C_unsigned CTy.I_long_long),
-! 		_ ) => 
-! 	      (* 64-bit integers are returned in GPRs *)
-! 	      [(8, GPR, align), (8, GPR, align)]
-! 	    | ( (CTy.C_signed CTy.I_long_long),
-  		_ ) => 
-  	      (* 64-bit integers are returned in GPRs *)
-***************
-*** 203,207 ****
-  	 *)
-  	  val calleePops = (case #conv proto
-! 		 of (""|"ccall") => false
-  		  | "stdcall" => true
-  		  | conv => raise Fail (concat [
---- 211,216 ----
-  	 *)
-  	  val calleePops = (case #conv proto
-! 		 of ("") => false
-!                   | ("ccall") => false
-  		  | "stdcall" => true
-  		  | conv => raise Fail (concat [
-diff -N -C 2 -r MLRISC/c-call/gen/c-call-gen-fn.sml MLRISC-mlton/c-call/gen/c-call-gen-fn.sml
-*** MLRISC/c-call/gen/c-call-gen-fn.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/gen/c-call-gen-fn.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 92,99 ****
-      fun writeLoc arg (off, loc, stms) = (
-  	  case (arg, loc)
-! 	   of (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) =>
-  	      (* register to stack (gpr) *)
-  	      T.STORE(wordTy, offSp offset, e, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', (K.GPR | K.STK))) =>
-  	      (* register to stack with width conversion (gpr) *)
-  	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
---- 92,111 ----
-      fun writeLoc arg (off, loc, stms) = (
-  	  case (arg, loc)
-! 	   of (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.GPR), offset)) =>
-  	      (* register to stack (gpr) *)
-  	      T.STORE(wordTy, offSp offset, e, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.STK), offset)) =>
-! 	      (* register to stack (gpr) *)
-! 	      T.STORE(wordTy, offSp offset, e, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', (K.GPR))) =>
-! 	      (* register to stack with width conversion (gpr) *)
-! 	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', (K.STK))) =>
-! 	      (* register to stack with width conversion (gpr) *)
-! 	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', (K.GPR))) =>
-! 	      (* register to stack with width conversion (gpr) *)
-! 	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
-! 	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', (K.STK))) =>
-  	      (* register to stack with width conversion (gpr) *)
-  	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
-***************
-*** 110,114 ****
-  	      (* expression to register with conversion *)
-  	      copyToReg(w, r, sx{fromWidth=w', toWidth=w, e=e}) @ stms
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) => let
-  	      (* memory to stack (gpr) *)
-  		val tmp = C.newReg ()
---- 122,126 ----
-  	      (* expression to register with conversion *)
-  	      copyToReg(w, r, sx{fromWidth=w', toWidth=w, e=e}) @ stms
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.GPR), offset)) => let
-  	      (* memory to stack (gpr) *)
-  		val tmp = C.newReg ()
-***************
-*** 117,121 ****
-  		  T.MV (ty, tmp, T.LOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', K.GPR)) => let
-  	      (* memory to stack with conversion (gpr) *)
-  		val tmp = C.newReg ()
---- 129,140 ----
-  		  T.MV (ty, tmp, T.LOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.STK), offset)) => let
-! 	      (* memory to stack (gpr) *)
-! 		val tmp = C.newReg ()
-! 	        in
-! 		  T.STORE (ty, offSp offset, T.REG (ty, tmp), stack) :: 
-! 		  T.MV (ty, tmp, T.LOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-! 	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', K.GPR)) => let
-  	      (* memory to stack with conversion (gpr) *)
-  		val tmp = C.newReg ()
-***************
-*** 124,128 ****
-  		  T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=T.LOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (ARG e, SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) => let
-  	      (* expression to stack (gpr) *)
-  		val tmp = C.newReg ()
---- 143,160 ----
-  		  T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=T.LOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', K.GPR)) => let
-! 	      (* memory to stack with conversion (gpr) *)
-! 		val tmp = C.newReg ()
-! 	        in
-! 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: 
-! 		  T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=T.LOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-! 	        end
-! 	    | (ARG e, SA.BLOCK_OFFSET(w, (K.GPR), offset)) => let
-! 	      (* expression to stack (gpr) *)
-! 		val tmp = C.newReg ()
-! 	        in
-! 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, e) :: stms
-! 	        end
-! 	    | (ARG e, SA.BLOCK_OFFSET(w, (K.STK), offset)) => let
-  	      (* expression to stack (gpr) *)
-  		val tmp = C.newReg ()
-***************
-*** 130,134 ****
-  		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, e) :: stms
-  	        end
-! 	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', K.GPR)) => let
-  	      (* expression to stack with conversion (gpr) *)
-  		val tmp = C.newReg ()
---- 162,166 ----
-  		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, e) :: stms
-  	        end
-! 	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', K.GPR)) => let
-  	      (* expression to stack with conversion (gpr) *)
-  		val tmp = C.newReg ()
-***************
-*** 136,140 ****
-  		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=e}) :: stms
-  	        end
-! 	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) =>
-  	      (* register to stack (fpr) *)
-  	      T.FSTORE (w, offSp offset, e, stack) :: stms
---- 168,181 ----
-  		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=e}) :: stms
-  	        end
-! 	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', K.GPR)) => let
-! 	      (* expression to stack with conversion (gpr) *)
-! 		val tmp = C.newReg ()
-! 	        in
-! 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=e}) :: stms
-! 	        end
-! 	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FPR), offset)) =>
-! 	      (* register to stack (fpr) *)
-! 	      T.FSTORE (w, offSp offset, e, stack) :: stms
-! 	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) =>
-  	      (* register to stack (fpr) *)
-  	      T.FSTORE (w, offSp offset, e, stack) :: stms
-***************
-*** 148,152 ****
-  	      (* memory to register (fpr) *)
-  	      copyToFReg(w, r, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) @ stms
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
-                (* memory to stack (fpr) *)
-  		val tmp = C.newFreg ()
---- 189,200 ----
-  	      (* memory to register (fpr) *)
-  	      copyToFReg(w, r, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) @ stms
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
-!               (* memory to stack (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
-! 		  T.FMV (w, tmp, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-! 	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
-                (* memory to stack (fpr) *)
-  		val tmp = C.newFreg ()
-***************
-*** 155,159 ****
-  		  T.FMV (w, tmp, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
-                (* memory to stack with conversion (fpr) *)
-  		val tmp = C.newFreg ()
---- 203,207 ----
-  		  T.FMV (w, tmp, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
-                (* memory to stack with conversion (fpr) *)
-  		val tmp = C.newFreg ()
-***************
-*** 162,166 ****
-  		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
-                (* memory to stack (fpr) *)
-  		val tmp = C.newFreg ()
---- 210,228 ----
-  		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
-!               (* memory to stack with conversion (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
-! 		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
-! 	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
-!               (* memory to stack (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
-! 		  T.FMV (w, tmp, T.FLOAD (w, T.ADD(wordTy, e, off), rgn)) :: stms
-! 	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
-                (* memory to stack (fpr) *)
-  		val tmp = C.newFreg ()
-***************
-*** 169,173 ****
-  		  T.FMV (w, tmp, T.FLOAD (w, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
-                (* memory to stack with conversion (fpr) *)
-  		val tmp = C.newFreg ()
---- 231,235 ----
-  		  T.FMV (w, tmp, T.FLOAD (w, T.ADD(wordTy, e, off), rgn)) :: stms
-  	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
-                (* memory to stack with conversion (fpr) *)
-  		val tmp = C.newFreg ()
-***************
-*** 176,180 ****
-  		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w, T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
-                (* expression to stack (fpr) *)
-  		val tmp = C.newFreg ()
---- 238,255 ----
-  		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w, T.ADD(wordTy, e, off), rgn)}) :: stms
-  	        end
-! 	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
-!               (* memory to stack with conversion (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
-! 		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w, T.ADD(wordTy, e, off), rgn)}) :: stms
-! 	        end
-! 	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
-!               (* expression to stack (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: T.FMV (w, tmp, e) :: stms
-! 	        end
-! 	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
-                (* expression to stack (fpr) *)
-  		val tmp = C.newFreg ()
-***************
-*** 182,186 ****
-  		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: T.FMV (w, tmp, e) :: stms
-  	        end
-! 	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
-                (* expression to stack (fpr) *)
-  		val tmp = C.newFreg ()
---- 257,267 ----
-  		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: T.FMV (w, tmp, e) :: stms
-  	        end
-! 	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
-!               (* expression to stack (fpr) *)
-! 		val tmp = C.newFreg ()
-! 	        in
-! 		  T.FSTORE (w', offSp offset, f2f{fromWidth=w, toWidth=w', e=T.FREG (w, tmp)}, stack) :: T.FMV (w, tmp, e) :: stms
-! 	        end
-! 	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
-                (* expression to stack (fpr) *)
-  		val tmp = C.newFreg ()
-diff -N -C 2 -r MLRISC/c-call/gen/c-call-sig.sml MLRISC-mlton/c-call/gen/c-call-sig.sml
-*** MLRISC/c-call/gen/c-call-sig.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/gen/c-call-sig.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 4,8 ****
-      structure T : MLTREE
-      structure Gen : C_CALL_GEN
-!       where T = T
-  
-      datatype c_arg = datatype Gen.c_arg
---- 4,28 ----
-      structure T : MLTREE
-      structure Gen : C_CALL_GEN
-!       (* where T = T *)
-!       where type T.Basis.cond = T.Basis.cond
-!         and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!         and type T.Basis.ext = T.Basis.ext
-!         and type T.Basis.fcond = T.Basis.fcond
-!         and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!         and type T.Constant.const = T.Constant.const
-!         and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!         and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!         and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!         and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!         and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!         and type T.Region.region = T.Region.region
-!         and type T.ccexp = T.ccexp
-!         and type T.fexp = T.fexp
-!         (* and type T.labexp = T.labexp *)
-!         and type T.mlrisc = T.mlrisc
-!         and type T.oper = T.oper
-!         and type T.rep = T.rep
-!         and type T.rexp = T.rexp
-!         and type T.stm = T.stm
-  
-      datatype c_arg = datatype Gen.c_arg
-diff -N -C 2 -r MLRISC/c-call/gen/c-type.sml MLRISC-mlton/c-call/gen/c-type.sml
-*** MLRISC/c-call/gen/c-type.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/c-call/gen/c-type.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 43,48 ****
-      (* eliminate aggregates in a C type *)
-      fun flattenCTy cTy = (case cTy
-!         of (C_STRUCT cTys |
-! 	    C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
-  	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
-  	 | cTy => [cTy])
---- 43,48 ----
-      (* eliminate aggregates in a C type *)
-      fun flattenCTy cTy = (case cTy
-!         of (C_STRUCT cTys ) => List.concat (List.map flattenCTy cTys)
-!          | (C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
-  	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
-  	 | cTy => [cTy])
-diff -N -C 2 -r MLRISC/c-calls/c-types.sml MLRISC-mlton/c-calls/c-types.sml
-*** MLRISC/c-calls/c-types.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/c-calls/c-types.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 43,48 ****
-      (* eliminate aggregates in a C type *)
-      fun flattenCTy cTy = (case cTy
-!         of (C_STRUCT cTys |
-! 	    C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
-  	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
-  	 | cTy => [cTy])
---- 43,48 ----
-      (* eliminate aggregates in a C type *)
-      fun flattenCTy cTy = (case cTy
-!         of (C_STRUCT cTys ) => List.concat (List.map flattenCTy cTys)
-! 	 | (C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
-  	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
-  	 | cTy => [cTy])
-diff -N -C 2 -r MLRISC/c-calls/unimplemented-c-calls.sml MLRISC-mlton/c-calls/unimplemented-c-calls.sml
-*** MLRISC/c-calls/unimplemented-c-calls.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/c-calls/unimplemented-c-calls.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 7,11 ****
-  functor UnimplementedCCallsFn
-  	    (structure T: MLTREE
-! 	     val impossible: string -> 'a) :> C_CALLS where T = T =
-  struct
-      structure T = T
---- 7,31 ----
-  functor UnimplementedCCallsFn
-  	    (structure T: MLTREE
-! 	     val impossible: string -> 'a) :> C_CALLS (* where T = T *)
-!                                               where type T.Basis.cond = T.Basis.cond
-!                                                 and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                                                 and type T.Basis.ext = T.Basis.ext
-!                                                 and type T.Basis.fcond = T.Basis.fcond
-!                                                 and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                                                 and type T.Constant.const = T.Constant.const
-!                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                                                 and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                                                 and type T.Region.region = T.Region.region
-!                                                 and type T.ccexp = T.ccexp
-!                                                 and type T.fexp = T.fexp
-!                                                 (* and type T.labexp = T.labexp *)
-!                                                 and type T.mlrisc = T.mlrisc
-!                                                 and type T.oper = T.oper
-!                                                 and type T.rep = T.rep
-!                                                 and type T.rexp = T.rexp
-!                                                 and type T.stm = T.stm =
-  struct
-      structure T = T
-diff -N -C 2 -r MLRISC/cm/proxyLib.cm MLRISC-mlton/cm/proxyLib.cm
-*** MLRISC/cm/proxyLib.cm	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/cm/proxyLib.cm	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 0 ****
---- 1,61 ----
-+ Group
-+         group(proxyGrp.cm)
-+ is
-+ 	proxyGrp.cm 
-+ (
-+ bind:(anchor:ALPHA.cm value:.)
-+ bind:(anchor:ALPHA-GC.cm value:.)
-+ bind:(anchor:ALPHA-Peephole.cm value:.)
-+ bind:(anchor:ALPHA-RTL.cm value:.)
-+ bind:(anchor:ALPHA-Sched.cm value:.)
-+ bind:(anchor:ALPHA-SSA.cm value:.)
-+ bind:(anchor:AMD64.cm value:.)
-+ bind:(anchor:AMD64-GC.cm value:.)
-+ bind:(anchor:AMD64-Peephole.cm value:.)
-+ bind:(anchor:AMD64-RTL.cm value:.)
-+ bind:(anchor:AMD64-Sched.cm value:.)
-+ bind:(anchor:AMD64-SSA.cm value:.)
-+ bind:(anchor:CCall.cm value:.)
-+ bind:(anchor:CCall-sparc.cm value:.)
-+ bind:(anchor:CCall-x86-64.cm value:.)
-+ bind:(anchor:CCall-x86.cm value:.)
-+ bind:(anchor:Control.cm value:.)
-+ bind:(anchor:GC.cm value:.)
-+ bind:(anchor:Graphs.cm value:.)
-+ bind:(anchor:HPPA.cm value:.)
-+ bind:(anchor:HPPA-GC.cm value:.)
-+ bind:(anchor:HPPA-RTL.cm value:.)
-+ bind:(anchor:HPPA-Sched.cm value:.)
-+ bind:(anchor:HPPA-SSA.cm value:.)
-+ bind:(anchor:IA32.cm value:.)
-+ bind:(anchor:IA32-GC.cm value:.)
-+ bind:(anchor:IA32-Peephole.cm value:.)
-+ bind:(anchor:IA32-RTL.cm value:.)
-+ bind:(anchor:IA32-Sched.cm value:.)
-+ bind:(anchor:IA32-SSA.cm value:.)
-+ bind:(anchor:ir-archive.cm value:.)
-+ bind:(anchor:IR.cm value:.)
-+ bind:(anchor:Lib.cm value:.)
-+ bind:(anchor:MIPS.cm value:.)
-+ bind:(anchor:MLRISC.cm value:.)
-+ bind:(anchor:MLTREE.cm value:.)
-+ bind:(anchor:Opt.cm value:.)
-+ bind:(anchor:Peephole.cm value:.)
-+ bind:(anchor:PPC.cm value:.)
-+ bind:(anchor:PPC-GC.cm value:.)
-+ bind:(anchor:PPC-Sched.cm value:.)
-+ bind:(anchor:RA.cm value:.)
-+ bind:(anchor:Region.cm value:.)
-+ bind:(anchor:RTL.cm value:.)
-+ bind:(anchor:Sched.cm value:.)
-+ bind:(anchor:SPARC.cm value:.)
-+ bind:(anchor:SPARC-GC.cm value:.)
-+ bind:(anchor:SPARC-Peephole.cm value:.)
-+ bind:(anchor:SPARC-RTL.cm value:.)
-+ bind:(anchor:SPARC-Sched.cm value:.)
-+ bind:(anchor:SPARC-SSA.cm value:.)
-+ bind:(anchor:SSA.cm value:.)
-+ bind:(anchor:StagedAlloc.cm value:.)
-+ bind:(anchor:Visual.cm value:.)
-+ bind:(anchor:VLIW.cm value:.)
-+ )
-diff -N -C 2 -r MLRISC/emit/cfgEmit.sml MLRISC-mlton/emit/cfgEmit.sml
-*** MLRISC/emit/cfgEmit.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/emit/cfgEmit.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 14,20 ****
-  functor CFGEmit
-    (structure E   : INSTRUCTION_EMITTER
-!    structure CFG : CONTROL_FLOW_GRAPH
-! 		   where I = E.I
-! 		     and P = E.S.P)  : ASSEMBLY_EMITTER = 
-  struct
-    structure CFG = CFG
---- 14,45 ----
-  functor CFGEmit
-    (structure E   : INSTRUCTION_EMITTER
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = E.I and P = E.S.P *)
-!                    where type I.addressing_mode = E.I.addressing_mode
-!                      and type I.ea = E.I.ea
-!                      and type I.instr = E.I.instr
-!                      and type I.instruction = E.I.instruction
-!                      and type I.operand = E.I.operand
-!                    where type P.Client.pseudo_op = E.S.P.Client.pseudo_op
-!                      and type P.T.Basis.cond = E.S.P.T.Basis.cond
-!                      and type P.T.Basis.div_rounding_mode = E.S.P.T.Basis.div_rounding_mode
-!                      and type P.T.Basis.ext = E.S.P.T.Basis.ext
-!                      and type P.T.Basis.fcond = E.S.P.T.Basis.fcond
-!                      and type P.T.Basis.rounding_mode = E.S.P.T.Basis.rounding_mode
-!                      and type P.T.Constant.const = E.S.P.T.Constant.const
-!                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) E.S.P.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) E.S.P.T.Extension.fx
-!                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) E.S.P.T.Extension.rx
-!                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) E.S.P.T.Extension.sx
-!                      and type P.T.I.div_rounding_mode = E.S.P.T.I.div_rounding_mode
-!                      and type P.T.Region.region = E.S.P.T.Region.region
-!                      and type P.T.ccexp = E.S.P.T.ccexp
-!                      and type P.T.fexp = E.S.P.T.fexp
-!                      (* and type P.T.labexp = E.S.P.T.labexp *)
-!                      and type P.T.mlrisc = E.S.P.T.mlrisc
-!                      and type P.T.oper = E.S.P.T.oper
-!                      and type P.T.rep = E.S.P.T.rep
-!                      and type P.T.rexp = E.S.P.T.rexp
-!                      and type P.T.stm = E.S.P.T.stm
-!   )  : ASSEMBLY_EMITTER = 
-  struct
-    structure CFG = CFG
-diff -N -C 2 -r MLRISC/flowgraph/buildFlowgraph.sml MLRISC-mlton/flowgraph/buildFlowgraph.sml
-*** MLRISC/flowgraph/buildFlowgraph.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/buildFlowgraph.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 10,16 ****
-     structure I   : INSTRUCTIONS
-     structure P   : PSEUDO_OPS
-!    structure CFG : CONTROL_FLOW_GRAPH
-!    		where I = I
-!                   and P = P
-     (*
-      * This creates an emitter which can be used to build a CFG incrementally
---- 10,41 ----
-     structure I   : INSTRUCTIONS
-     structure P   : PSEUDO_OPS
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = P *)
-!                    where type I.addressing_mode = I.addressing_mode
-!                      and type I.ea = I.ea
-!                      and type I.instr = I.instr
-!                      and type I.instruction = I.instruction
-!                      and type I.operand = I.operand
-!                    where type P.Client.pseudo_op = P.Client.pseudo_op
-!                      and type P.T.Basis.cond = P.T.Basis.cond
-!                      and type P.T.Basis.div_rounding_mode = P.T.Basis.div_rounding_mode
-!                      and type P.T.Basis.ext = P.T.Basis.ext
-!                      and type P.T.Basis.fcond = P.T.Basis.fcond
-!                      and type P.T.Basis.rounding_mode = P.T.Basis.rounding_mode
-!                      and type P.T.Constant.const = P.T.Constant.const
-!                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) P.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) P.T.Extension.fx
-!                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) P.T.Extension.rx
-!                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) P.T.Extension.sx
-!                      and type P.T.I.div_rounding_mode = P.T.I.div_rounding_mode
-!                      and type P.T.Region.region = P.T.Region.region
-!                      and type P.T.ccexp = P.T.ccexp
-!                      and type P.T.fexp = P.T.fexp
-!                      (* and type P.T.labexp = P.T.labexp *)
-!                      and type P.T.mlrisc = P.T.mlrisc
-!                      and type P.T.oper = P.T.oper
-!                      and type P.T.rep = P.T.rep
-!                      and type P.T.rexp = P.T.rexp
-!                      and type P.T.stm = P.T.stm
-! 
-     (*
-      * This creates an emitter which can be used to build a CFG incrementally
-***************
-*** 27,33 ****
-    (structure Props  : INSN_PROPERTIES
-     structure Stream : INSTRUCTION_STREAM
-!    structure CFG    : CONTROL_FLOW_GRAPH  
-! 			  where I = Props.I
-! 			    and P = Stream.P
-    ) : CONTROL_FLOWGRAPH_GEN =
-  struct
---- 52,82 ----
-    (structure Props  : INSN_PROPERTIES
-     structure Stream : INSTRUCTION_STREAM
-!    structure CFG    : CONTROL_FLOW_GRAPH (* where I = Props.I and P = Stream.P *)
-!                       where type I.addressing_mode = Props.I.addressing_mode
-!                         and type I.ea = Props.I.ea
-!                         and type I.instr = Props.I.instr
-!                         and type I.instruction = Props.I.instruction
-!                         and type I.operand = Props.I.operand
-!                       where type P.Client.pseudo_op = Stream.P.Client.pseudo_op
-!                         and type P.T.Basis.cond = Stream.P.T.Basis.cond
-!                         and type P.T.Basis.div_rounding_mode = Stream.P.T.Basis.div_rounding_mode
-!                         and type P.T.Basis.ext = Stream.P.T.Basis.ext
-!                         and type P.T.Basis.fcond = Stream.P.T.Basis.fcond
-!                         and type P.T.Basis.rounding_mode = Stream.P.T.Basis.rounding_mode
-!                         and type P.T.Constant.const = Stream.P.T.Constant.const
-!                         and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Stream.P.T.Extension.ccx
-!                         and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Stream.P.T.Extension.fx
-!                         and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Stream.P.T.Extension.rx
-!                         and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Stream.P.T.Extension.sx
-!                         and type P.T.I.div_rounding_mode = Stream.P.T.I.div_rounding_mode
-!                         and type P.T.Region.region = Stream.P.T.Region.region
-!                         and type P.T.ccexp = Stream.P.T.ccexp
-!                         and type P.T.fexp = Stream.P.T.fexp
-!                         (* and type P.T.labexp = Stream.P.T.labexp *)
-!                         and type P.T.mlrisc = Stream.P.T.mlrisc
-!                         and type P.T.oper = Stream.P.T.oper
-!                         and type P.T.rep = Stream.P.T.rep
-!                         and type P.T.rexp = Stream.P.T.rexp
-!                         and type P.T.stm = Stream.P.T.stm
-    ) : CONTROL_FLOWGRAPH_GEN =
-  struct
-diff -N -C 2 -r MLRISC/flowgraph/cfg.sml MLRISC-mlton/flowgraph/cfg.sml
-*** MLRISC/flowgraph/cfg.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/cfg.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 11,16 ****
-     (structure I : INSTRUCTIONS
-      structure GraphImpl : GRAPH_IMPLEMENTATION
-!     structure InsnProps : INSN_PROPERTIES where I = I
-!     structure Asm : INSTRUCTION_EMITTER where I = I
-     ) : CONTROL_FLOW_GRAPH =
-  struct
---- 11,26 ----
-     (structure I : INSTRUCTIONS
-      structure GraphImpl : GRAPH_IMPLEMENTATION
-!     structure InsnProps : INSN_PROPERTIES (* where I = I *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-!     structure Asm : INSTRUCTION_EMITTER (* where I = I *)
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-     ) : CONTROL_FLOW_GRAPH =
-  struct
-***************
-*** 315,319 ****
-     let val visited = H.mkTable(23,NotFound)
-         fun chase [] = false
-!          | chase((u,v,EDGE{k=(FALLSTHRU|BRANCH false),...})::_) =
-             if H.inDomain visited u then false
-             else u = i orelse (H.insert visited (u,true); chase(#in_edges cfg u))
---- 325,332 ----
-     let val visited = H.mkTable(23,NotFound)
-         fun chase [] = false
-!          | chase((u,v,EDGE{k= FALLSTHRU,...})::_) =
-!            if H.inDomain visited u then false
-!            else u = i orelse (H.insert visited (u,true); chase(#in_edges cfg u))
-!          | chase((u,v,EDGE{k= BRANCH false,...})::_) =
-             if H.inDomain visited u then false
-             else u = i orelse (H.insert visited (u,true); chase(#in_edges cfg u))
-***************
-*** 356,360 ****
-               (case #out_edges cfg node of
-                  [] => ()
-!              |  [(_,_,EDGE{k=(ENTRY | EXIT),...})] => ()
-               |  [(i,j,_)] =>
-                    if InsnProps.instrKind jmp = InsnProps.IK_JUMP then
---- 369,374 ----
-               (case #out_edges cfg node of
-                  [] => ()
-!              |  [(_,_,EDGE{k=ENTRY,...})] => ()
-!              |  [(_,_,EDGE{k=EXIT,...})] => ()
-               |  [(i,j,_)] =>
-                    if InsnProps.instrKind jmp = InsnProps.IK_JUMP then
-***************
-*** 389,393 ****
-     fun mergeEdge (CFG as G.GRAPH cfg) (i,j,e as EDGE{w,k,...}) = 
-     let val _ = case k of
-!                   (ENTRY | EXIT) => raise Can'tMerge
-                 |  _ => () 
-         val _ = case (#out_edges cfg i,#in_edges cfg j) of
---- 403,408 ----
-     fun mergeEdge (CFG as G.GRAPH cfg) (i,j,e as EDGE{w,k,...}) = 
-     let val _ = case k of
-!                   ENTRY => raise Can'tMerge
-!                |  EXIT => raise Can'tMerge
-                 |  _ => () 
-         val _ = case (#out_edges cfg i,#in_edges cfg j) of
-***************
-*** 714,718 ****
-     fun cdgEdge(EDGE{k, ...}) = 
-          case k of
-!            (JUMP | FALLSTHRU) => false
-          |  _ => true
-  
---- 729,734 ----
-     fun cdgEdge(EDGE{k, ...}) = 
-          case k of
-!            JUMP => false
-!         |  FALLSTHRU => false
-          |  _ => true
-  
-diff -N -C 2 -r MLRISC/flowgraph/cfgCountCopies.sml MLRISC-mlton/flowgraph/cfgCountCopies.sml
-*** MLRISC/flowgraph/cfgCountCopies.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/cfgCountCopies.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 5,12 ****
-  functor CFGCountCopies
-     ( structure CFG : CONTROL_FLOW_GRAPH
-!      structure InsnProps : INSN_PROPERTIES
-!      		where I = CFG.I
-!      structure SdiJumps : SDI_JUMPS
-!      		where I = CFG.I
-      ) : CFG_OPTIMIZATION =
-  struct
---- 5,20 ----
-  functor CFGCountCopies
-     ( structure CFG : CONTROL_FLOW_GRAPH
-!      structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
-!                            where type I.addressing_mode = CFG.I.addressing_mode
-!                              and type I.ea = CFG.I.ea
-!                              and type I.instr = CFG.I.instr
-!                              and type I.instruction = CFG.I.instruction
-!                              and type I.operand = CFG.I.operand
-!      structure SdiJumps : SDI_JUMPS (* where I = CFG.I *)
-!                           where type I.addressing_mode = CFG.I.addressing_mode
-!                             and type I.ea = CFG.I.ea
-!                             and type I.instr = CFG.I.instr
-!                             and type I.instruction = CFG.I.instruction
-!                             and type I.operand = CFG.I.operand
-      ) : CFG_OPTIMIZATION =
-  struct
-diff -N -C 2 -r MLRISC/flowgraph/cfgExpandCopies.sml MLRISC-mlton/flowgraph/cfgExpandCopies.sml
-*** MLRISC/flowgraph/cfgExpandCopies.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/cfgExpandCopies.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,13 ****
-  functor CFGExpandCopies
-     (structure CFG    : CONTROL_FLOW_GRAPH
-!     structure Shuffle : SHUFFLE
-!     			where I = CFG.I
+          | I.FSQRTS _ => 32
+          | I.FSQRTD _ => 64
+diff --git a/amd64/mltree/amd64-gen.sml b/amd64/mltree/amd64-gen.sml
+index fbfb364..d20c32a 100644
+--- a/amd64/mltree/amd64-gen.sml
++++ b/amd64/mltree/amd64-gen.sml
+@@ -5,10 +5,53 @@
+ 
+ functor AMD64Gen (
+     structure I : AMD64INSTR
+-    structure MLTreeUtils : MLTREE_UTILS
+-	where T = I.T
+-    structure ExtensionComp : MLTREE_EXTENSION_COMP
+-        where I = I and T = I.T
++    structure MLTreeUtils : MLTREE_UTILS (* where T = I.T *)
++                            where type T.Basis.cond = I.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = I.T.Basis.ext
++                              and type T.Basis.fcond = I.T.Basis.fcond
++                              and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                              and type T.Constant.const = I.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                              and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                               and type T.Region.region = I.T.Region.region
++                              and type T.ccexp = I.T.ccexp
++                              and type T.fexp = I.T.fexp
++                              (* and type T.labexp = I.T.labexp *)
++                              and type T.mlrisc = I.T.mlrisc
++                              and type T.oper = I.T.oper
++                              and type T.rep = I.T.rep
++                              and type T.rexp = I.T.rexp
++                              and type T.stm = I.T.stm
++    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = I and T = I.T *)
++                              where type I.addressing_mode = I.addressing_mode
++                                and type I.ea = I.ea
++                                and type I.instr = I.instr
++                                and type I.instruction = I.instruction
++                                and type I.operand = I.operand
++                              where type T.Basis.cond = I.T.Basis.cond
++                                and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                                and type T.Basis.ext = I.T.Basis.ext
++                                and type T.Basis.fcond = I.T.Basis.fcond
++                                and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                                and type T.Constant.const = I.T.Constant.const
++                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                                and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                                and type T.Region.region = I.T.Region.region
++                                and type T.ccexp = I.T.ccexp
++                                and type T.fexp = I.T.fexp
++                                (* and type T.labexp = I.T.labexp *)
++                                and type T.mlrisc = I.T.mlrisc
++                                and type T.oper = I.T.oper
++                                and type T.rep = I.T.rep
++                                and type T.rexp = I.T.rexp
++                                and type T.stm = I.T.stm
+ 
+     (* Take a number of bits and returns a label that points to a literal with the high bit set.
+      * We need this literal value for floating-point negation and absolute value (at least
+@@ -369,7 +412,8 @@ functor AMD64Gen (
+ 		   move (ty, I.Immed64 (Int64.fromLarge i'), dst);
+ 		   dst
+                end
+-          | operand _ (x as (T.CONST _ | T.LABEL _)) = loadLabel (I.ImmedLabel x)
++          | operand _ (x as (T.CONST _ )) = loadLabel (I.ImmedLabel x)
++          | operand _ (x as (T.LABEL _)) = loadLabel (I.ImmedLabel x)
+           | operand _ (T.LABEXP le) = loadLabel (I.ImmedLabel le)
+           | operand _ (T.REG(ty,r)) = gpr (ty, r)
+           | operand _ (T.LOAD(ty,ea,mem)) = address (ea, mem)
+@@ -383,7 +427,8 @@ functor AMD64Gen (
+ 	  | immedOrReg(ty, opnd as I.LabelEA _)  = moveToReg (ty, opnd)
+ 	  | immedOrReg (ty, opnd)  = opnd
+ 
+-	and regOrMem (ty, opnd as (I.Immed _ | I.ImmedLabel _)) = moveToReg (ty, opnd)
++	and regOrMem (ty, opnd as (I.Immed _)) = moveToReg (ty, opnd)
++	  | regOrMem (ty, opnd as (I.ImmedLabel _)) = moveToReg (ty, opnd)
+ 	  | regOrMem (ty, opnd) = opnd
+ 
+ 	and getExpr (exp as T.REG(_, rd)) = rd
+@@ -797,7 +842,9 @@ functor AMD64Gen (
+ 		 | T.LI z => if (fitsIn32Bits z)
+                    then move' (ty, I.Immed (toInt32 z), dstOpnd, an)
+                    else mark' (move64 (I.Immed64(toInt64 z), dstOpnd), an)
+-		 | (T.CONST _ | T.LABEL _) => 
++		 | (T.CONST _) =>
++                   move' (ty, I.ImmedLabel e, dstOpnd, an)
++		 | (T.LABEL _) =>
+                    move' (ty, I.ImmedLabel e, dstOpnd, an)
+ 		 | T.LABEXP le => move' (ty, I.ImmedLabel le, dstOpnd, an)
+ 		 (* arithmetic operations *)
+@@ -936,7 +983,34 @@ functor AMD64Gen (
+ 	and fbinop (fty, binOp, a, b, d, an) = let
+            (* try to move memory operands to src rather than dst if binOp is commutative *)
+ 	    val (a, b) = (case (binOp, a, b)
+-                of ( (I.ADDSS | I.ADDSD | I.MULSS | I.MULSD | I.XORPS | I.XORPD | I.ANDPS | I.ANDPD | I.ORPS | I.ORPD), 		     
++                of ( (I.ADDSS),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.ADDSD),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.MULSS),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.MULSD),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.XORPS),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.XORPD),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.ANDPS),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.ANDPD),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.ORPS),
++		     T.FLOAD _,
++		     T.FREG _) => (b, a)
++                 | ( (I.ORPD),
+ 		     T.FLOAD _,
+ 		     T.FREG _) => (b, a)
+ 		 | _ => (a, b)
+@@ -1301,7 +1375,15 @@ functor AMD64Gen (
+ 	 * On the amd64, TEST is superior to AND for doing the same thing,
+ 	 * since it doesn't need to write out the result in a register.
+ 	 *)
+-	and cmpWithZero(cc as (T.EQ | T.NE), e as T.ANDB(ty, a, b), an) = 
++	and cmpWithZero(cc as (T.EQ), e as T.ANDB(ty, a, b), an) =
++		(case ty
++		  of 8 => test(ty, I.TESTB, a, b, an)
++		  | 16 => test(ty, I.TESTW, a, b, an)
++		  | 32 => test(ty, I.TESTL, a, b, an)
++		  | 64 => test(ty, I.TESTQ, a, b, an)
++		  | _  => expr (e, newReg(), an);
++		cc)
++	 | cmpWithZero(cc as (T.NE), e as T.ANDB(ty, a, b), an) =
+ 		(case ty 
+ 		  of 8 => test(ty, I.TESTB, a, b, an)
+ 		  | 16 => test(ty, I.TESTW, a, b, an)
+diff --git a/amd64/ra/amd64RegAlloc.sml b/amd64/ra/amd64RegAlloc.sml
+index cb37763..1556796 100644
+--- a/amd64/ra/amd64RegAlloc.sml
++++ b/amd64/ra/amd64RegAlloc.sml
+@@ -6,15 +6,51 @@
+ functor AMD64RegAlloc (
+       structure I : AMD64INSTR
+       structure SpillHeur : RA_SPILL_HEURISTICS 
+-      structure Props : AMD64INSN_PROPERTIES
+-          where I = I
+-      structure CFG : CONTROL_FLOW_GRAPH
+-          where I = I
+-      structure Spill : RA_SPILL
+-          where I = I
+-      structure Asm : INSTRUCTION_EMITTER
+-          where I = I
+-          and   S.P = CFG.P
++      structure Props : AMD64INSN_PROPERTIES (* where I = I *)
++                        where type I.addressing_mode = I.addressing_mode
++                          and type I.ea = I.ea
++                          and type I.instr = I.instr
++                          and type I.instruction = I.instruction
++                          and type I.operand = I.operand
++      structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
++                      where type I.addressing_mode = I.addressing_mode
++                        and type I.ea = I.ea
++                        and type I.instr = I.instr
++                        and type I.instruction = I.instruction
++                        and type I.operand = I.operand
++      structure Spill : RA_SPILL (* where I = I *)
++                      where type I.addressing_mode = I.addressing_mode
++                        and type I.ea = I.ea
++                        and type I.instr = I.instr
++                        and type I.instruction = I.instruction
++                        and type I.operand = I.operand
++      structure Asm : INSTRUCTION_EMITTER (* where I = I and S.P = CFG.P *)
++                           where type I.addressing_mode = I.addressing_mode
++                             and type I.ea = I.ea
++                             and type I.instr = I.instr
++                             and type I.instruction = I.instruction
++                             and type I.operand = I.operand
++                           where type S.P.Client.pseudo_op = CFG.P.Client.pseudo_op
++                             and type S.P.T.Basis.cond = CFG.P.T.Basis.cond
++                             and type S.P.T.Basis.div_rounding_mode = CFG.P.T.Basis.div_rounding_mode
++                             and type S.P.T.Basis.ext = CFG.P.T.Basis.ext
++                             and type S.P.T.Basis.fcond = CFG.P.T.Basis.fcond
++                             and type S.P.T.Basis.rounding_mode = CFG.P.T.Basis.rounding_mode
++                             and type S.P.T.Constant.const = CFG.P.T.Constant.const
++                             and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) CFG.P.T.Extension.ccx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) CFG.P.T.Extension.fx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) CFG.P.T.Extension.rx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) CFG.P.T.Extension.sx
++                             and type S.P.T.I.div_rounding_mode = CFG.P.T.I.div_rounding_mode
++                             and type S.P.T.Region.region = CFG.P.T.Region.region
++                             and type S.P.T.ccexp = CFG.P.T.ccexp
++                             and type S.P.T.fexp = CFG.P.T.fexp
++                             (* and type S.P.T.labexp = CFG.P.T.labexp *)
++                             and type S.P.T.mlrisc = CFG.P.T.mlrisc
++                             and type S.P.T.oper = CFG.P.T.oper
++                             and type S.P.T.rep = CFG.P.T.rep
++                             and type S.P.T.rexp = CFG.P.T.rexp
++                             and type S.P.T.stm = CFG.P.T.stm
+ 
+       type spill_info
+       datatype spill_operand_kind = SPILL_LOC 
+@@ -138,17 +174,16 @@ functor AMD64RegAlloc (
+     (* use the standard register allocator *)
+     structure RA = 
+         RegisterAllocator
+-          (SpillHeur)
+-          (MemoryRA
++          (structure SpillHeuristics = SpillHeur
++           structure Flowgraph = MemoryRA
+              (RADeadCodeElim
+-                (ClusterRA
++                (structure Flowgraph = ClusterRA
+                    (structure Flowgraph = CFG
+                     structure Asm = Asm
+                     structure InsnProps = Props
+                     structure Spill = Spill
+                    )
+-                 )
+-                (fun cellkind CB.GP = true
++                 fun cellkind CB.GP = true
+ 		   | cellkind CB.FP = true
+ 		   | cellkind _ = false 
+                  val deadRegs = deadRegs
+diff --git a/amd64/ra/amd64SpillInstr.sml b/amd64/ra/amd64SpillInstr.sml
+index 2be8cfd..82b5f3a 100644
+--- a/amd64/ra/amd64SpillInstr.sml
++++ b/amd64/ra/amd64SpillInstr.sml
+@@ -6,8 +6,12 @@
+ 
+ functor AMD64SpillInstr (
+       structure I : AMD64INSTR
+-      structure Props : AMD64INSN_PROPERTIES
+-          where I = I
++      structure Props : AMD64INSN_PROPERTIES (* where I = I *)
++                        where type I.addressing_mode = I.addressing_mode
++                          and type I.ea = I.ea
++                          and type I.instr = I.instr
++                          and type I.instruction = I.instruction
++                          and type I.operand = I.operand
+ 
+    (* guaranteeing that floats are stored at 16-byte aligned addresses reduces the number of instructions *)
+     val floats16ByteAligned : bool
+@@ -74,7 +78,8 @@ functor AMD64SpillInstr (
+                        proh=[], newReg=NONE}
+         in
+           (case ea
+-            of ( I.Displace _ | I.Indexed _ ) => move ()
++            of ( I.Displace _ ) => move ()
++             | ( I.Indexed _ ) => move ()
+              | _ => error "spillToEA"
+           (* end case *))
+         end 
+@@ -86,7 +91,8 @@ functor AMD64SpillInstr (
+                        proh=[], newReg=NONE}
+         in
+           (case ea
+-            of ( I.Displace _ | I.Indexed _ ) => move ()
++            of ( I.Displace _ ) => move ()
++             | ( I.Indexed _ ) => move ()
+              | _ => error "reloadFromEA"
+           (* end case *))
+         end
+@@ -116,9 +122,63 @@ functor AMD64SpillInstr (
+ 			        cutsTo=cutsTo, mem=mem, pops=pops}, an)
+ 		 (* With sign or zero extended spills we use different operand sizes
+ 		  * for copying to the tmp operand and for copying from the tmp operand. *)
+-		 | I.MOVE {mvOp as (I.MOVZBQ|I.MOVSBQ|I.MOVZWQ|I.MOVSWQ|
+-		                    I.MOVSLQ|I.MOVZBL|I.MOVSBL|I.MOVZWL|
+-		                    I.MOVSWL), src, dst} => let
++		 | I.MOVE {mvOp as (I.MOVZBQ), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVSBQ), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVZWQ), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVSWQ), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVSLQ), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVZBL), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVSBL), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVZWL), src, dst} => let
++		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
++		   in
++		     {proh=[tmpR], newReg=SOME tmpR,
++		      code=[mark (I.MOVE {mvOp=mvOp, src=src, dst=tmpOpnd}, an),
++		            I.move {mvOp=defaultMov, src=tmpOpnd64, dst=spillLoc}]}
++		   end
++		 | I.MOVE {mvOp as (I.MOVSWL), src, dst} => let
+ 		   val (tmpR, tmpOpnd, tmpOpnd64) = freshTmp ()
+ 		   in
+ 		     {proh=[tmpR], newReg=SOME tmpR,
+@@ -182,8 +242,14 @@ functor AMD64SpillInstr (
+ 			  
+ 		 | I.BINARY {binOp, src, dst} => let 
+ 		   (* note: dst = r *)
+-		   fun multBinOp(I.MULQ|I.MULL|I.MULW|I.MULB|
+-				 I.IMULQ|I.IMULL|I.IMULW|I.IMULB) = true
++		   fun multBinOp(I.MULQ) = true
++		     | multBinOp(I.MULL) = true
++		     | multBinOp(I.MULW) = true
++		     | multBinOp(I.MULB) = true
++		     | multBinOp(I.IMULQ) = true
++		     | multBinOp(I.IMULL) = true
++		     | multBinOp(I.IMULW) = true
++		     | multBinOp(I.IMULB) = true
+ 		     | multBinOp _ = false
+ 		   in
+ 		     if multBinOp binOp 
+@@ -613,7 +679,77 @@ functor AMD64SpillInstr (
+                       proh=[tmpR], newReg=SOME tmpR}
+                    end
+                 (* treat bitwise operators differently, as they require that their source operand is 16-byte aligned *)
+-		 | I.FBINOP {binOp=binOp as (I.XORPS | I.XORPD | I.ANDPS | I.ANDPD | I.ORPS | I.ORPD), src, dst} => if CB.sameColor (r, dst)
++		 | I.FBINOP {binOp=binOp as (I.XORPS), src, dst} => if CB.sameColor (r, dst)
++                   then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
++			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)],
++		         proh=[], newReg=NONE}
++                   else if floats16ByteAligned
++                        then let
++                          val tmpR = newFreg ()
++                          val tmp = I.FDirect tmpR
++                          in
++                              {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
++				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)],
++		               proh=[tmpR], newReg=SOME tmpR}
++                          end
++                   else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
++		 | I.FBINOP {binOp=binOp as (I.XORPD), src, dst} => if CB.sameColor (r, dst)
++                   then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
++			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)],
++		         proh=[], newReg=NONE}
++                   else if floats16ByteAligned
++                        then let
++                          val tmpR = newFreg ()
++                          val tmp = I.FDirect tmpR
++                          in
++                              {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
++				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)],
++		               proh=[tmpR], newReg=SOME tmpR}
++                          end
++                   else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
++		 | I.FBINOP {binOp=binOp as (I.ANDPS), src, dst} => if CB.sameColor (r, dst)
++                   then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
++			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)],
++		         proh=[], newReg=NONE}
++                   else if floats16ByteAligned
++                        then let
++                          val tmpR = newFreg ()
++                          val tmp = I.FDirect tmpR
++                          in
++                              {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
++				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)],
++		               proh=[tmpR], newReg=SOME tmpR}
++                          end
++                   else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
++		 | I.FBINOP {binOp=binOp as (I.ANDPD), src, dst} => if CB.sameColor (r, dst)
++                   then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
++			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)],
++		         proh=[], newReg=NONE}
++                   else if floats16ByteAligned
++                        then let
++                          val tmpR = newFreg ()
++                          val tmp = I.FDirect tmpR
++                          in
++                              {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
++				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)],
++		               proh=[tmpR], newReg=SOME tmpR}
++                          end
++                   else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
++		 | I.FBINOP {binOp=binOp as (I.ORPS), src, dst} => if CB.sameColor (r, dst)
++                   then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
++			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)],
++		         proh=[], newReg=NONE}
++                   else if floats16ByteAligned
++                        then let
++                          val tmpR = newFreg ()
++                          val tmp = I.FDirect tmpR
++                          in
++                              {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=tmp},
++				     mark (I.FBINOP {binOp=binOp, src=tmp, dst=dst}, an)],
++		               proh=[tmpR], newReg=SOME tmpR}
++                          end
++                   else {code=[mark (I.FBINOP {binOp=binOp, src=replace src, dst=dst}, an)], proh=[], newReg=NONE}
++		 | I.FBINOP {binOp=binOp as (I.ORPD), src, dst} => if CB.sameColor (r, dst)
+                    then {code=[I.fmove {fmvOp=fmvOp, src=spillLoc, dst=I.FDirect dst},
+ 			       mark (I.FBINOP {binOp=binOp, src=src, dst=dst}, an)], 
+ 		         proh=[], newReg=NONE}
+diff --git a/backpatch/backpatch.sml b/backpatch/backpatch.sml
+index 962bbf9..dceed1f 100644
+--- a/backpatch/backpatch.sml
++++ b/backpatch/backpatch.sml
+@@ -8,13 +8,45 @@
+ 
+ functor BBSched2
+     (structure Emitter : INSTRUCTION_EMITTER
+-     structure CFG     : CONTROL_FLOW_GRAPH
+-			where I = Emitter.I
+-		          and P = Emitter.S.P
+-     structure Jumps   : SDI_JUMPS
+-     			where I = CFG.I
+-     structure Props   : INSN_PROPERTIES
+-			where I = CFG.I
++     structure CFG     : CONTROL_FLOW_GRAPH (* where I = Emitter.I and P = Emitter.S.P *)
++                         where type I.addressing_mode = Emitter.I.addressing_mode
++                           and type I.ea = Emitter.I.ea
++                           and type I.instr = Emitter.I.instr
++                           and type I.instruction = Emitter.I.instruction
++                           and type I.operand = Emitter.I.operand
++                         where type P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
++                           and type P.T.Basis.cond = Emitter.S.P.T.Basis.cond
++                           and type P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
++                           and type P.T.Basis.ext = Emitter.S.P.T.Basis.ext
++                           and type P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
++                           and type P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
++                           and type P.T.Constant.const = Emitter.S.P.T.Constant.const
++                           and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
++                           and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
++                           and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
++                           and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
++                           and type P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
++                           and type P.T.Region.region = Emitter.S.P.T.Region.region
++                           and type P.T.ccexp = Emitter.S.P.T.ccexp
++                           and type P.T.fexp = Emitter.S.P.T.fexp
++                           (* and type P.T.labexp = Emitter.S.P.T.labexp *)
++                           and type P.T.mlrisc = Emitter.S.P.T.mlrisc
++                           and type P.T.oper = Emitter.S.P.T.oper
++                           and type P.T.rep = Emitter.S.P.T.rep
++                           and type P.T.rexp = Emitter.S.P.T.rexp
++                           and type P.T.stm = Emitter.S.P.T.stm
++     structure Jumps   : SDI_JUMPS (* where I = CFG.I *)
++                         where type I.addressing_mode = CFG.I.addressing_mode
++                           and type I.ea = CFG.I.ea
++                           and type I.instr = CFG.I.instr
++                           and type I.instruction = CFG.I.instruction
++                           and type I.operand = CFG.I.operand
++     structure Props   : INSN_PROPERTIES (* where I = CFG.I *)
++                         where type I.addressing_mode = CFG.I.addressing_mode
++                           and type I.ea = CFG.I.ea
++                           and type I.instr = CFG.I.instr
++                           and type I.instruction = CFG.I.instruction
++                           and type I.operand = CFG.I.operand
+     ) = 
+ struct
+ 
+diff --git a/backpatch/sdi-jumps.sig b/backpatch/sdi-jumps.sig
+index d06e456..f63b5b7 100644
+--- a/backpatch/sdi-jumps.sig
++++ b/backpatch/sdi-jumps.sig
+@@ -7,7 +7,7 @@
+ signature SDI_JUMPS = sig
+   structure I : INSTRUCTIONS
+   structure C : CELLS
+-    sharing I.C = C
++    (* sharing I.C = C *)
+ 
+   val branchDelayedArch : bool
+ 
+diff --git a/backpatch/spanDep.sml b/backpatch/spanDep.sml
+index c26b29a..a665b9c 100644
+--- a/backpatch/spanDep.sml
++++ b/backpatch/spanDep.sml
+@@ -9,18 +9,79 @@
+ 
+ functor SpanDependencyResolution
+     (structure Emitter   : INSTRUCTION_EMITTER
+-     structure CFG       : CONTROL_FLOW_GRAPH
+-                             where I = Emitter.I
+-                          and P = Emitter.S.P
+-     structure Jumps     : SDI_JUMPS
+-                             where I = CFG.I
+-     structure DelaySlot : DELAY_SLOT_PROPERTIES
+-                             where I = CFG.I
+-     structure Props     : INSN_PROPERTIES
+-                             where I = CFG.I
+-     structure Asm        : INSTRUCTION_EMITTER
+-                             where I = CFG.I
+-                             and   S = Emitter.S
++     structure CFG       : CONTROL_FLOW_GRAPH (* where I = Emitter.I and P = Emitter.S.P *)
++                           where type I.addressing_mode = Emitter.I.addressing_mode
++                             and type I.ea = Emitter.I.ea
++                             and type I.instr = Emitter.I.instr
++                             and type I.instruction = Emitter.I.instruction
++                             and type I.operand = Emitter.I.operand
++                           where type P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
++                             and type P.T.Basis.cond = Emitter.S.P.T.Basis.cond
++                             and type P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
++                             and type P.T.Basis.ext = Emitter.S.P.T.Basis.ext
++                             and type P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
++                             and type P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
++                             and type P.T.Constant.const = Emitter.S.P.T.Constant.const
++                             and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
++                             and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
++                             and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
++                             and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
++                             and type P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
++                             and type P.T.Region.region = Emitter.S.P.T.Region.region
++                             and type P.T.ccexp = Emitter.S.P.T.ccexp
++                             and type P.T.fexp = Emitter.S.P.T.fexp
++                             (* and type P.T.labexp = Emitter.S.P.T.labexp *)
++                             and type P.T.mlrisc = Emitter.S.P.T.mlrisc
++                             and type P.T.oper = Emitter.S.P.T.oper
++                             and type P.T.rep = Emitter.S.P.T.rep
++                             and type P.T.rexp = Emitter.S.P.T.rexp
++                             and type P.T.stm = Emitter.S.P.T.stm
++     structure Jumps     : SDI_JUMPS (* where I = CFG.I *)
++                           where type I.addressing_mode = CFG.I.addressing_mode
++                             and type I.ea = CFG.I.ea
++                             and type I.instr = CFG.I.instr
++                             and type I.instruction = CFG.I.instruction
++                             and type I.operand = CFG.I.operand
++     structure DelaySlot : DELAY_SLOT_PROPERTIES (* where I = CFG.I *)
++                           where type I.addressing_mode = CFG.I.addressing_mode
++                             and type I.ea = CFG.I.ea
++                             and type I.instr = CFG.I.instr
++                             and type I.instruction = CFG.I.instruction
++                             and type I.operand = CFG.I.operand
++     structure Props     : INSN_PROPERTIES (* where I = CFG.I *)
++                           where type I.addressing_mode = CFG.I.addressing_mode
++                             and type I.ea = CFG.I.ea
++                             and type I.instr = CFG.I.instr
++                             and type I.instruction = CFG.I.instruction
++                             and type I.operand = CFG.I.operand
++     structure Asm       : INSTRUCTION_EMITTER (* where I = CFG.I and S = Emitter.S *)
++                           where type I.addressing_mode = CFG.I.addressing_mode
++                             and type I.ea = CFG.I.ea
++                             and type I.instr = CFG.I.instr
++                             and type I.instruction = CFG.I.instruction
++                             and type I.operand = CFG.I.operand
++                           where type S.P.Client.pseudo_op = Emitter.S.P.Client.pseudo_op
++                             and type S.P.T.Basis.cond = Emitter.S.P.T.Basis.cond
++                             and type S.P.T.Basis.div_rounding_mode = Emitter.S.P.T.Basis.div_rounding_mode
++                             and type S.P.T.Basis.ext = Emitter.S.P.T.Basis.ext
++                             and type S.P.T.Basis.fcond = Emitter.S.P.T.Basis.fcond
++                             and type S.P.T.Basis.rounding_mode = Emitter.S.P.T.Basis.rounding_mode
++                             and type S.P.T.Constant.const = Emitter.S.P.T.Constant.const
++                             and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.ccx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.fx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.rx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) Emitter.S.P.T.Extension.sx
++                             and type S.P.T.I.div_rounding_mode = Emitter.S.P.T.I.div_rounding_mode
++                             and type S.P.T.Region.region = Emitter.S.P.T.Region.region
++                             and type S.P.T.ccexp = Emitter.S.P.T.ccexp
++                             and type S.P.T.fexp = Emitter.S.P.T.fexp
++                             (* and type S.P.T.labexp = Emitter.S.P.T.labexp *)
++                             and type S.P.T.mlrisc = Emitter.S.P.T.mlrisc
++                             and type S.P.T.oper = Emitter.S.P.T.oper
++                             and type S.P.T.rep = Emitter.S.P.T.rep
++                             and type S.P.T.rexp = Emitter.S.P.T.rexp
++                             and type S.P.T.stm = Emitter.S.P.T.stm
++                             and type ('a,'b,'c,'d) S.stream = ('a,'b,'c,'d) Emitter.S.stream
+      ) : BBSCHED = 
+ struct
+ 
+@@ -275,7 +336,9 @@ struct
+ 
+               and eliminateNop(jmp) = 
+                   case (nop,nOn) of
+-                     (true,(D.D_FALLTHRU | D.D_NONE)) =>
++                     (true,D.D_FALLTHRU) =>
++                          D.enableDelaySlot{n=true,nop=false,instr=jmp}
++                  |  (true,D.D_NONE) =>
+                           D.enableDelaySlot{n=true,nop=false,instr=jmp}
+                   |  _ => jmp
+ 
+diff --git a/backpatch/vlBackPatch.sml b/backpatch/vlBackPatch.sml
+index 78f639a..3366e4c 100644
+--- a/backpatch/vlBackPatch.sml
++++ b/backpatch/vlBackPatch.sml
+@@ -26,14 +26,31 @@
+ functor BackPatch
+   (structure CodeString : CODE_STRING
+    structure Jumps      : SDI_JUMPS 
+-   structure Props      : INSN_PROPERTIES 
+-                        where I = Jumps.I
+-   structure Emitter    : MC_EMIT
+-                        where I = Props.I
+-   structure CFG        : CONTROL_FLOW_GRAPH
+-                        where I = Emitter.I
+-   structure Asm        : INSTRUCTION_EMITTER
+-                        where I = CFG.I) =
++   structure Props      : INSN_PROPERTIES (* where I = Jumps.I *)
++                          where type I.addressing_mode = Jumps.I.addressing_mode
++                            and type I.ea = Jumps.I.ea
++                            and type I.instr = Jumps.I.instr
++                            and type I.instruction = Jumps.I.instruction
++                            and type I.operand = Jumps.I.operand
++   structure Emitter    : MC_EMIT (* where I = Props.I *)
++                          where type I.addressing_mode = Props.I.addressing_mode
++                            and type I.ea = Props.I.ea
++                            and type I.instr = Props.I.instr
++                            and type I.instruction = Props.I.instruction
++                            and type I.operand = Props.I.operand
++   structure CFG        : CONTROL_FLOW_GRAPH (* where I = Emitter.I *)
++                          where type I.addressing_mode = Emitter.I.addressing_mode
++                            and type I.ea = Emitter.I.ea
++                            and type I.instr = Emitter.I.instr
++                            and type I.instruction = Emitter.I.instruction
++                            and type I.operand = Emitter.I.operand
++   structure Asm        : INSTRUCTION_EMITTER (* where I = CFG.I *)
++                          where type I.addressing_mode = CFG.I.addressing_mode
++                            and type I.ea = CFG.I.ea
++                            and type I.instr = CFG.I.instr
++                            and type I.instruction = CFG.I.instruction
++                            and type I.operand = CFG.I.operand
++  ) =
+ struct 
+   structure I   = Jumps.I
+   structure C   = I.C
+diff --git a/block-placement/block-placement.sml b/block-placement/block-placement.sml
+index 702f584..6066578 100644
+--- a/block-placement/block-placement.sml
++++ b/block-placement/block-placement.sml
+@@ -5,10 +5,13 @@
+ 
+ functor BlockPlacement 
+    (structure CFG : CONTROL_FLOW_GRAPH
+-    structure Props : INSN_PROPERTIES
+-	where I = CFG.I)
+-
+-   : BLOCK_PLACEMENT =
++    structure Props : INSN_PROPERTIES (* where I = CFG.I *)
++                      where type I.addressing_mode = CFG.I.addressing_mode
++                        and type I.ea = CFG.I.ea
++                        and type I.instr = CFG.I.instr
++                        and type I.instruction = CFG.I.instruction
++                        and type I.operand = CFG.I.operand
++   ) : BLOCK_PLACEMENT =
+ 
+ struct
+   structure CFG = CFG
+diff --git a/block-placement/check-placement-fn.sml b/block-placement/check-placement-fn.sml
+index 6eae5d7..4c4aeff 100644
+--- a/block-placement/check-placement-fn.sml
++++ b/block-placement/check-placement-fn.sml
+@@ -9,8 +9,12 @@
+ functor CheckPlacementFn (
+ 
+     structure CFG : CONTROL_FLOW_GRAPH
+-    structure InsnProps : INSN_PROPERTIES
+-      where I = CFG.I
++    structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
++                          where type I.addressing_mode = CFG.I.addressing_mode
++                            and type I.ea = CFG.I.ea
++                            and type I.instr = CFG.I.instr
++                            and type I.instruction = CFG.I.instruction
++                            and type I.operand = CFG.I.operand
+ 
+   ) : sig
+ 
+@@ -81,7 +85,11 @@ functor CheckPlacementFn (
+ 		(* end case *))
+ 	(* check that FALLSTHRU and BRANCH false edges connect adjacent nodes *)
+ 	  fun chkEdge (src, dst, CFG.EDGE{k, ...}) = (case k
+-		 of (CFG.FALLSTHRU | CFG.BRANCH false) =>
++		 of CFG.FALLSTHRU =>
++		      if adjacentNodes(src, dst)
++			then ()
++			else reportNotAdjacent(src, dst)
++		  | CFG.BRANCH false =>
+ 		      if adjacentNodes(src, dst)
+ 			then ()
+ 			else reportNotAdjacent(src, dst)
+diff --git a/block-placement/jump-chain-elim-fn.sml b/block-placement/jump-chain-elim-fn.sml
+index 678da26..ceb242f 100644
+--- a/block-placement/jump-chain-elim-fn.sml
++++ b/block-placement/jump-chain-elim-fn.sml
+@@ -12,8 +12,12 @@
+ functor JumpChainElimFn (
+ 
+     structure CFG : CONTROL_FLOW_GRAPH
+-    structure InsnProps : INSN_PROPERTIES
+-      where I = CFG.I
++    structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
++                          where type I.addressing_mode = CFG.I.addressing_mode
++                            and type I.ea = CFG.I.ea
++                            and type I.instr = CFG.I.instr
++                            and type I.instruction = CFG.I.instruction
++                            and type I.operand = CFG.I.operand
+ 
+   (* Control flag that when set true allows jumps to labels outside
+    * of the CFG to be chained.  Set this false when there are many
+diff --git a/block-placement/weighted-block-placement-fn.sml b/block-placement/weighted-block-placement-fn.sml
+index 4668215..1f7a704 100644
+--- a/block-placement/weighted-block-placement-fn.sml
++++ b/block-placement/weighted-block-placement-fn.sml
+@@ -12,8 +12,12 @@
+ functor WeightedBlockPlacementFn (
+ 
+     structure CFG : CONTROL_FLOW_GRAPH
+-    structure InsnProps : INSN_PROPERTIES
+-      where I = CFG.I
++    structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
++                          where type I.addressing_mode = CFG.I.addressing_mode
++                            and type I.ea = CFG.I.ea
++                            and type I.instr = CFG.I.instr
++                            and type I.instruction = CFG.I.instruction
++                            and type I.operand = CFG.I.operand
+ 
+   ) : BLOCK_PLACEMENT = struct
+ 
+diff --git a/c-call/archs/sparc-c-call-fn.sml b/c-call/archs/sparc-c-call-fn.sml
+index eff4c31..db08cfe 100644
+--- a/c-call/archs/sparc-c-call-fn.sml
++++ b/c-call/archs/sparc-c-call-fn.sml
+@@ -77,18 +77,25 @@ functor SparcCCallFn (
+ 		      structure SA = SA)
+ 
+   (* assign a C type to a kind of machine location *)
+-    fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
+-      | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR | 
+-		   CTy.C_ARRAY _ | CTy.C_STRUCT _ | CTy.C_UNION _) = GPR
++    fun kindOfCTy (CTy.C_float) = FPR
++      | kindOfCTy (CTy.C_double) = FPR
++      | kindOfCTy (CTy.C_long_double) = FPR
++      | kindOfCTy (CTy.C_unsigned _) = GPR
++      | kindOfCTy (CTy.C_signed _) = GPR
++      | kindOfCTy (CTy.C_PTR) = GPR
++      | kindOfCTy (CTy.C_ARRAY _) = GPR
++      | kindOfCTy (CTy.C_STRUCT _) = GPR
++      | kindOfCTy (CTy.C_UNION _) = GPR
+ 
+   (* takes a C type and a request for passing values of that type *)
+     fun cTyToReq cTy = let
+ 	  val {sz, align} = SparcCSizes.sizeOfTy cTy
+           in
+ 	    case cTy
+-	     of (CTy.C_STRUCT _ | CTy.C_UNION _) => (32, kindOfCTy cTy, align)
+-	      | (CTy.C_unsigned CTy.I_long_long |
+-		 CTy.C_signed CTy.I_long_long   ) => raise Fail "todo"
++	     of (CTy.C_STRUCT _) => (32, kindOfCTy cTy, align)
++	      | (CTy.C_UNION _) => (32, kindOfCTy cTy, align)
++	      | (CTy.C_unsigned CTy.I_long_long) => raise Fail "todo"
++	      | (CTy.C_signed CTy.I_long_long) => raise Fail "todo"
+ 	      | _ => (sz * 8, kindOfCTy cTy, align)
+ 	  end
+ 
+@@ -135,7 +142,11 @@ functor SparcCCallFn (
+         (* bytes to allocate on the stack for returning structs *)
+ 	  val res_szal =
+ 	    case retTy of
+-		(Ty.C_long_double | Ty.C_STRUCT _ | Ty.C_UNION _) =>
++		(Ty.C_long_double) =>
++		  SOME (SparcCSizes.sizeOfTy retTy)
++              | (Ty.C_STRUCT _) =>
++		  SOME (SparcCSizes.sizeOfTy retTy)
++	      | (Ty.C_UNION _) =>
+ 		  SOME (SparcCSizes.sizeOfTy retTy)
+ 	      | _ => NONE
+ 
+diff --git a/c-call/archs/sparc-c-sizes.sml b/c-call/archs/sparc-c-sizes.sml
+index 78e55d4..af1807d 100644
+--- a/c-call/archs/sparc-c-sizes.sml
++++ b/c-call/archs/sparc-c-sizes.sml
+@@ -6,15 +6,21 @@ structure SparcCSizes =
+     fun roundup (i, a) = a * ((i + a - 1) div a)
+ 
+   (* calculate size and alignment for a C type *)
+-    fun sizeOfTy (Ty.C_void | Ty.C_float | Ty.C_PTR |
+-	      Ty.C_signed (Ty.I_int | Ty.I_long) |
+-	      Ty.C_unsigned (Ty.I_int | Ty.I_long)) = {sz=4, align=4}
+-      | sizeOfTy (Ty.C_double |
+-	      Ty.C_signed Ty.I_long_long |
+-	      Ty.C_unsigned Ty.I_long_long) = {sz=8, align=8}
++    fun sizeOfTy (Ty.C_void) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_float) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_PTR) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_signed (Ty.I_int)) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_signed (Ty.I_long)) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_unsigned (Ty.I_int)) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_unsigned (Ty.I_long)) = {sz=4, align=4}
++      | sizeOfTy (Ty.C_double) = {sz=8, align=8}
++      | sizeOfTy (Ty.C_signed Ty.I_long_long) = {sz=8, align=8}
++      | sizeOfTy (Ty.C_unsigned Ty.I_long_long) = {sz=8, align=8}
+       | sizeOfTy (Ty.C_long_double) = {sz=16, align=8}
+-      | sizeOfTy (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) = {sz=1, align=1}
+-      | sizeOfTy (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) = {sz=2, align=2}
++      | sizeOfTy (Ty.C_signed Ty.I_char) = {sz=1, align=1}
++      | sizeOfTy (Ty.C_unsigned Ty.I_char) = {sz=1, align=1}
++      | sizeOfTy (Ty.C_signed Ty.I_short) = {sz=2, align=2}
++      | sizeOfTy (Ty.C_unsigned Ty.I_short) = {sz=2, align=2}
+       | sizeOfTy (Ty.C_ARRAY (t, n)) = let val {sz=s, align=a} = sizeOfTy t in {sz=n * s, align=a} end
+       | sizeOfTy (Ty.C_STRUCT l) =
+ 	let (* i: next free memory address (relative to struct start);
+diff --git a/c-call/archs/x86-64-svid-fn.sml b/c-call/archs/x86-64-svid-fn.sml
+index 96f29f9..8bd5790 100644
+--- a/c-call/archs/x86-64-svid-fn.sml
++++ b/c-call/archs/x86-64-svid-fn.sml
+@@ -75,7 +75,7 @@ functor X86_64SVIDFn (
+     val calleeSaveRegs = [C.rbx, C.r12, C.r13, C.r14, C.r15]
+     val callerSaveRegs =  [C.rax, C.rcx, C.rdx, C.rsi, C.rdi, C.r8, C.r9, C.r10, C.r11]
+     val callerSaveFRegs = (C.Regs CB.FP {from=0, to=15, step=1})
+-    val calleeSaveFRegs = []
++    val calleeSaveFRegs : T.reg list = []
+ 			  
+     val frameAlignB = 16
+ 
+@@ -102,9 +102,15 @@ functor X86_64SVIDFn (
+     fun eightBytesOfCTy cTy = eightBytesOfCTys (CType.flattenCTy cTy, [], [])
+ 
+   (* classify a C type into its location kind (assuming that aggregates cannot be passed in registers) *)
+-    fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
+-      | kindOfCTy (CTy.C_ARRAY _ | CTy.C_STRUCT _ | CTy.C_UNION _) = raise Fail "impossible"
+-      | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR) = GPR
++    fun kindOfCTy (CTy.C_float) = FPR
++      | kindOfCTy (CTy.C_double) = FPR
++      | kindOfCTy (CTy.C_long_double) = FPR
++      | kindOfCTy (CTy.C_ARRAY _) = raise Fail "impossible"
++      | kindOfCTy (CTy.C_STRUCT _) = raise Fail "impossible"
++      | kindOfCTy (CTy.C_UNION _) = raise Fail "impossible"
++      | kindOfCTy (CTy.C_unsigned _) = GPR
++      | kindOfCTy (CTy.C_signed _) = GPR
++      | kindOfCTy (CTy.C_PTR) = GPR
+ 
+     fun combineKinds (k1, k2) = if (k1 = k2)
+ 	then k1
+@@ -128,11 +134,20 @@ functor X86_64SVIDFn (
+ 	   end
+ 
+     fun containsUnalignedFields cTy = (case cTy
+-        of (CTy.C_STRUCT cTys | CTy.C_UNION cTys) => List.exists containsUnalignedFields cTys
++        of (CTy.C_STRUCT cTys) => List.exists containsUnalignedFields cTys
++         | (CTy.C_UNION cTys) => List.exists containsUnalignedFields cTys
+ 	 | cTy => Int.max(8, szBOfCTy cTy) mod 8 <> 0
+         (* end case *))
+ 
+-    fun reqsOfCTy (cTy as (CTy.C_STRUCT _ | CTy.C_UNION _ | CTy.C_ARRAY _)) = 
++    fun reqsOfCTy (cTy as (CTy.C_STRUCT _)) =
++	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
++	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
++	      else List.map (fn eb => (8*8, kindOfEightByte eb, 8)) (eightBytesOfCTy cTy)
++      | reqsOfCTy (cTy as (CTy.C_UNION _)) =
++	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
++	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
++	      else List.map (fn eb => (8*8, kindOfEightByte eb, 8)) (eightBytesOfCTy cTy)
++      | reqsOfCTy (cTy as (CTy.C_ARRAY _)) =
+ 	   if (szBOfCTy cTy > 2*8 orelse containsUnalignedFields cTy)
+ 	      then List.tabulate (szBOfCTy cTy div 8, fn _ => (8*8, STK, 8))
+ 	      else List.map (fn eb => (8*8, kindOfEightByte eb, 8)) (eightBytesOfCTy cTy)
+diff --git a/c-call/archs/x86-svid-fn.sml b/c-call/archs/x86-svid-fn.sml
+index 49e5add..b1d362e 100644
+--- a/c-call/archs/x86-svid-fn.sml
++++ b/c-call/archs/x86-svid-fn.sml
+@@ -68,8 +68,13 @@ functor X86SVIDFn (
+     val callerSaveFRegs = []
+ 
+   (* assign a C type to a kind of machine location *)
+-    fun kindOfCTy (CTy.C_float | CTy.C_double | CTy.C_long_double) = FPR
+-      | kindOfCTy (CTy.C_unsigned _ | CTy.C_signed _ | CTy.C_PTR | CTy.C_ARRAY _) = GPR
++    fun kindOfCTy (CTy.C_float) = FPR
++      | kindOfCTy (CTy.C_double) = FPR
++      | kindOfCTy (CTy.C_long_double) = FPR
++      | kindOfCTy (CTy.C_unsigned _) = GPR
++      | kindOfCTy (CTy.C_signed _) = GPR
++      | kindOfCTy (CTy.C_PTR) = GPR
++      | kindOfCTy (CTy.C_ARRAY _) = GPR
+ 
+     (* convert a C type to reqs for staged allocation *)
+     fun cTyToReqs cTy = let
+@@ -86,8 +91,11 @@ functor X86SVIDFn (
+               else if (sz <= 8)
+                  then [(8, GPR, align), (8, GPR, align)]
+               else reqs
+-	    | ( (CTy.C_unsigned CTy.I_long_long |
+-		 CTy.C_signed CTy.I_long_long   ),
++	    | ( (CTy.C_unsigned CTy.I_long_long),
++		_ ) =>
++	      (* 64-bit integers are returned in GPRs *)
++	      [(8, GPR, align), (8, GPR, align)]
++	    | ( (CTy.C_signed CTy.I_long_long),
+ 		_ ) => 
+ 	      (* 64-bit integers are returned in GPRs *)
+ 	      [(8, GPR, align), (8, GPR, align)]
+@@ -202,7 +210,8 @@ functor X86SVIDFn (
+ 	 * differences there might be between the SVID and Windows ABIs. (JHR)
+ 	 *)
+ 	  val calleePops = (case #conv proto
+-		 of (""|"ccall") => false
++		 of ("") => false
++                  | ("ccall") => false
+ 		  | "stdcall" => true
+ 		  | conv => raise Fail (concat [
+ 			"unknown calling convention \"", String.toString conv, "\""
+diff --git a/c-call/gen/c-call-gen-fn.sml b/c-call/gen/c-call-gen-fn.sml
+index f39eece..17153d4 100644
+--- a/c-call/gen/c-call-gen-fn.sml
++++ b/c-call/gen/c-call-gen-fn.sml
+@@ -91,10 +91,22 @@ functor CCallGenFn (
+      *)
+     fun writeLoc arg (off, loc, stms) = (
+ 	  case (arg, loc)
+-	   of (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) =>
++	   of (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.GPR), offset)) =>
+ 	      (* register to stack (gpr) *)
+ 	      T.STORE(wordTy, offSp offset, e, stack) :: stms
+-	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', (K.GPR | K.STK))) =>
++	    | (ARG (e as T.REG _), SA.BLOCK_OFFSET(w, (K.STK), offset)) =>
++	      (* register to stack (gpr) *)
++	      T.STORE(wordTy, offSp offset, e, stack) :: stms
++	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', (K.GPR))) =>
++	      (* register to stack with width conversion (gpr) *)
++	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
++	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', (K.STK))) =>
++	      (* register to stack with width conversion (gpr) *)
++	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
++	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', (K.GPR))) =>
++	      (* register to stack with width conversion (gpr) *)
++	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
++	    | (ARG (e as T.REG _), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', (K.STK))) =>
+ 	      (* register to stack with width conversion (gpr) *)
+ 	      T.STORE(w, offSp offset, sx{fromWidth=w', toWidth=w, e=e}, stack) :: stms
+ 	    | (ARG (T.LOAD (ty, e, rgn)), SA.REG (w, K.GPR, r)) =>
+@@ -109,33 +121,62 @@ functor CCallGenFn (
+ 	    | (ARG e, SA.NARROW (SA.REG(w, K.GPR, r), w', K.GPR)) => 
+ 	      (* expression to register with conversion *)
+ 	      copyToReg(w, r, sx{fromWidth=w', toWidth=w, e=e}) @ stms
+-	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.GPR), offset)) => let
+ 	      (* memory to stack (gpr) *)
+ 		val tmp = C.newReg ()
+ 	        in
+ 		  T.STORE (ty, offSp offset, T.REG (ty, tmp), stack) :: 
+ 		  T.MV (ty, tmp, T.LOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
+ 	        end
+-	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', K.GPR)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.STK), offset)) => let
++	      (* memory to stack (gpr) *)
++		val tmp = C.newReg ()
++	        in
++		  T.STORE (ty, offSp offset, T.REG (ty, tmp), stack) ::
++		  T.MV (ty, tmp, T.LOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
++	        end
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', K.GPR)) => let
+ 	      (* memory to stack with conversion (gpr) *)
+ 		val tmp = C.newReg ()
+ 	        in
+ 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: 
+ 		  T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=T.LOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
+ 	        end
+-	    | (ARG e, SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', K.GPR)) => let
++	      (* memory to stack with conversion (gpr) *)
++		val tmp = C.newReg ()
++	        in
++		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) ::
++		  T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=T.LOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
++	        end
++	    | (ARG e, SA.BLOCK_OFFSET(w, (K.GPR), offset)) => let
++	      (* expression to stack (gpr) *)
++		val tmp = C.newReg ()
++	        in
++		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, e) :: stms
++	        end
++	    | (ARG e, SA.BLOCK_OFFSET(w, (K.STK), offset)) => let
+ 	      (* expression to stack (gpr) *)
+ 		val tmp = C.newReg ()
+ 	        in
+ 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, e) :: stms
+ 	        end
+-	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR | K.STK), offset), w', K.GPR)) => let
++	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.GPR), offset), w', K.GPR)) => let
+ 	      (* expression to stack with conversion (gpr) *)
+ 		val tmp = C.newReg ()
+ 	        in
+ 		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=e}) :: stms
+ 	        end
+-	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) =>
++	    | (ARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.STK), offset), w', K.GPR)) => let
++	      (* expression to stack with conversion (gpr) *)
++		val tmp = C.newReg ()
++	        in
++		  T.STORE (w, offSp offset, T.REG (w, tmp), stack) :: T.MV (w, tmp, sx{fromWidth=w', toWidth=w, e=e}) :: stms
++	        end
++	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FPR), offset)) =>
++	      (* register to stack (fpr) *)
++	      T.FSTORE (w, offSp offset, e, stack) :: stms
++	    | (FARG (e as T.FREG _), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) =>
+ 	      (* register to stack (fpr) *)
+ 	      T.FSTORE (w, offSp offset, e, stack) :: stms
+ 	    | (FARG e, SA.REG(w, K.FPR, r)) => 
+@@ -147,41 +188,81 @@ functor CCallGenFn (
+ 	    | (ARG (T.LOAD (ty, e, rgn)), SA.REG(w, K.FPR, r)) =>
+ 	      (* memory to register (fpr) *)
+ 	      copyToFReg(w, r, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) @ stms
+-	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
++              (* memory to stack (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) ::
++		  T.FMV (w, tmp, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
++	        end
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
+               (* memory to stack (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+ 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
+ 		  T.FMV (w, tmp, T.FLOAD (ty, T.ADD(wordTy, e, off), rgn)) :: stms
+ 	        end
+-	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
+               (* memory to stack with conversion (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+ 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
+ 		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
+ 	        end
+-	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
++	    | (ARG (T.LOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
++              (* memory to stack with conversion (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) ::
++		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w', T.ADD(wordTy, e, off), rgn)}) :: stms
++	        end
++	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
++              (* memory to stack (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) ::
++		  T.FMV (w, tmp, T.FLOAD (w, T.ADD(wordTy, e, off), rgn)) :: stms
++	        end
++	    | (FARG (T.FLOAD (ty, e, rgn)), SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
+               (* memory to stack (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+ 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
+ 		  T.FMV (w, tmp, T.FLOAD (w, T.ADD(wordTy, e, off), rgn)) :: stms
+ 	        end
+-	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
++	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
+               (* memory to stack with conversion (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+ 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: 
+ 		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w, T.ADD(wordTy, e, off), rgn)}) :: stms
+ 	        end
+-	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset)) => let
++	    | (FARG (T.FLOAD (ty, e, rgn)), SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
++              (* memory to stack with conversion (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) ::
++		  T.FMV (w', tmp, f2f{fromWidth=w, toWidth=w', e=T.FLOAD (w, T.ADD(wordTy, e, off), rgn)}) :: stms
++	        end
++	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FPR), offset)) => let
+               (* expression to stack (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+ 		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: T.FMV (w, tmp, e) :: stms
+ 	        end
+-	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR | K.FSTK), offset), w', K.FPR)) => let
++	    | (FARG e, SA.BLOCK_OFFSET(w, (K.FSTK), offset)) => let
++              (* expression to stack (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w, offSp offset, T.FREG (w, tmp), stack) :: T.FMV (w, tmp, e) :: stms
++	        end
++	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FPR), offset), w', K.FPR)) => let
++              (* expression to stack (fpr) *)
++		val tmp = C.newFreg ()
++	        in
++		  T.FSTORE (w', offSp offset, f2f{fromWidth=w, toWidth=w', e=T.FREG (w, tmp)}, stack) :: T.FMV (w, tmp, e) :: stms
++	        end
++	    | (FARG e, SA.NARROW(SA.BLOCK_OFFSET(w, (K.FSTK), offset), w', K.FPR)) => let
+               (* expression to stack (fpr) *)
+ 		val tmp = C.newFreg ()
+ 	        in
+diff --git a/c-call/gen/c-call-sig.sml b/c-call/gen/c-call-sig.sml
+index 35718b0..9d07716 100644
+--- a/c-call/gen/c-call-sig.sml
++++ b/c-call/gen/c-call-sig.sml
+@@ -3,7 +3,27 @@ signature C_CALL =
+ 
+     structure T : MLTREE
+     structure Gen : C_CALL_GEN
+-      where T = T
++      (* where T = T *)
++      where type T.Basis.cond = T.Basis.cond
++        and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++        and type T.Basis.ext = T.Basis.ext
++        and type T.Basis.fcond = T.Basis.fcond
++        and type T.Basis.rounding_mode = T.Basis.rounding_mode
++        and type T.Constant.const = T.Constant.const
++        and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++        and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++        and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++        and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++        and type T.I.div_rounding_mode = T.I.div_rounding_mode
++        and type T.Region.region = T.Region.region
++        and type T.ccexp = T.ccexp
++        and type T.fexp = T.fexp
++        (* and type T.labexp = T.labexp *)
++        and type T.mlrisc = T.mlrisc
++        and type T.oper = T.oper
++        and type T.rep = T.rep
++        and type T.rexp = T.rexp
++        and type T.stm = T.stm
+ 
+     datatype c_arg = datatype Gen.c_arg
+ 
+diff --git a/c-call/gen/c-type.sml b/c-call/gen/c-type.sml
+index b2d716e..684632b 100644
+--- a/c-call/gen/c-type.sml
++++ b/c-call/gen/c-type.sml
+@@ -42,8 +42,8 @@ structure CType =
+ 
+     (* eliminate aggregates in a C type *)
+     fun flattenCTy cTy = (case cTy
+-        of (C_STRUCT cTys |
+-	    C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
++        of (C_STRUCT cTys ) => List.concat (List.map flattenCTy cTys)
++         | (C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
+ 	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
+ 	 | cTy => [cTy])
+ 
+diff --git a/c-calls/c-types.sml b/c-calls/c-types.sml
+index 62cb3fe..a5eaa32 100644
+--- a/c-calls/c-types.sml
++++ b/c-calls/c-types.sml
+@@ -42,8 +42,8 @@ structure CTypes =
+ 
+     (* eliminate aggregates in a C type *)
+     fun flattenCTy cTy = (case cTy
+-        of (C_STRUCT cTys |
+-	    C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
++        of (C_STRUCT cTys ) => List.concat (List.map flattenCTy cTys)
++	 | (C_UNION cTys ) => List.concat (List.map flattenCTy cTys)
+ 	 | C_ARRAY (cTy, n) => List.tabulate (n, fn _ => cTy)
+ 	 | cTy => [cTy])
+ 
+diff --git a/c-calls/unimplemented-c-calls.sml b/c-calls/unimplemented-c-calls.sml
+index 507a247..3f6bbc6 100644
+--- a/c-calls/unimplemented-c-calls.sml
++++ b/c-calls/unimplemented-c-calls.sml
+@@ -6,7 +6,27 @@
+  *)
+ functor UnimplementedCCallsFn
+ 	    (structure T: MLTREE
+-	     val impossible: string -> 'a) :> C_CALLS where T = T =
++	     val impossible: string -> 'a) :> C_CALLS (* where T = T *)
++                                              where type T.Basis.cond = T.Basis.cond
++                                                and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                                                and type T.Basis.ext = T.Basis.ext
++                                                and type T.Basis.fcond = T.Basis.fcond
++                                                and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                                                and type T.Constant.const = T.Constant.const
++                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                                                and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                                                and type T.Region.region = T.Region.region
++                                                and type T.ccexp = T.ccexp
++                                                and type T.fexp = T.fexp
++                                                (* and type T.labexp = T.labexp *)
++                                                and type T.mlrisc = T.mlrisc
++                                                and type T.oper = T.oper
++                                                and type T.rep = T.rep
++                                                and type T.rexp = T.rexp
++                                                and type T.stm = T.stm =
+ struct
+     structure T = T
+ 
+diff --git a/cm/proxyLib.cm b/cm/proxyLib.cm
+new file mode 100644
+index 0000000..72c35c1
+--- /dev/null
++++ b/cm/proxyLib.cm
+@@ -0,0 +1,61 @@
++Group
++        group(proxyGrp.cm)
++is
++	proxyGrp.cm
++(
++bind:(anchor:ALPHA.cm value:.)
++bind:(anchor:ALPHA-GC.cm value:.)
++bind:(anchor:ALPHA-Peephole.cm value:.)
++bind:(anchor:ALPHA-RTL.cm value:.)
++bind:(anchor:ALPHA-Sched.cm value:.)
++bind:(anchor:ALPHA-SSA.cm value:.)
++bind:(anchor:AMD64.cm value:.)
++bind:(anchor:AMD64-GC.cm value:.)
++bind:(anchor:AMD64-Peephole.cm value:.)
++bind:(anchor:AMD64-RTL.cm value:.)
++bind:(anchor:AMD64-Sched.cm value:.)
++bind:(anchor:AMD64-SSA.cm value:.)
++bind:(anchor:CCall.cm value:.)
++bind:(anchor:CCall-sparc.cm value:.)
++bind:(anchor:CCall-x86-64.cm value:.)
++bind:(anchor:CCall-x86.cm value:.)
++bind:(anchor:Control.cm value:.)
++bind:(anchor:GC.cm value:.)
++bind:(anchor:Graphs.cm value:.)
++bind:(anchor:HPPA.cm value:.)
++bind:(anchor:HPPA-GC.cm value:.)
++bind:(anchor:HPPA-RTL.cm value:.)
++bind:(anchor:HPPA-Sched.cm value:.)
++bind:(anchor:HPPA-SSA.cm value:.)
++bind:(anchor:IA32.cm value:.)
++bind:(anchor:IA32-GC.cm value:.)
++bind:(anchor:IA32-Peephole.cm value:.)
++bind:(anchor:IA32-RTL.cm value:.)
++bind:(anchor:IA32-Sched.cm value:.)
++bind:(anchor:IA32-SSA.cm value:.)
++bind:(anchor:ir-archive.cm value:.)
++bind:(anchor:IR.cm value:.)
++bind:(anchor:Lib.cm value:.)
++bind:(anchor:MIPS.cm value:.)
++bind:(anchor:MLRISC.cm value:.)
++bind:(anchor:MLTREE.cm value:.)
++bind:(anchor:Opt.cm value:.)
++bind:(anchor:Peephole.cm value:.)
++bind:(anchor:PPC.cm value:.)
++bind:(anchor:PPC-GC.cm value:.)
++bind:(anchor:PPC-Sched.cm value:.)
++bind:(anchor:RA.cm value:.)
++bind:(anchor:Region.cm value:.)
++bind:(anchor:RTL.cm value:.)
++bind:(anchor:Sched.cm value:.)
++bind:(anchor:SPARC.cm value:.)
++bind:(anchor:SPARC-GC.cm value:.)
++bind:(anchor:SPARC-Peephole.cm value:.)
++bind:(anchor:SPARC-RTL.cm value:.)
++bind:(anchor:SPARC-Sched.cm value:.)
++bind:(anchor:SPARC-SSA.cm value:.)
++bind:(anchor:SSA.cm value:.)
++bind:(anchor:StagedAlloc.cm value:.)
++bind:(anchor:Visual.cm value:.)
++bind:(anchor:VLIW.cm value:.)
++)
+diff --git a/emit/cfgEmit.sml b/emit/cfgEmit.sml
+index 4b0393e..6795ba0 100644
+--- a/emit/cfgEmit.sml
++++ b/emit/cfgEmit.sml
+@@ -13,9 +13,34 @@
+ 
+ functor CFGEmit
+   (structure E   : INSTRUCTION_EMITTER
+-   structure CFG : CONTROL_FLOW_GRAPH
+-		   where I = E.I
+-		     and P = E.S.P)  : ASSEMBLY_EMITTER = 
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = E.I and P = E.S.P *)
++                   where type I.addressing_mode = E.I.addressing_mode
++                     and type I.ea = E.I.ea
++                     and type I.instr = E.I.instr
++                     and type I.instruction = E.I.instruction
++                     and type I.operand = E.I.operand
++                   where type P.Client.pseudo_op = E.S.P.Client.pseudo_op
++                     and type P.T.Basis.cond = E.S.P.T.Basis.cond
++                     and type P.T.Basis.div_rounding_mode = E.S.P.T.Basis.div_rounding_mode
++                     and type P.T.Basis.ext = E.S.P.T.Basis.ext
++                     and type P.T.Basis.fcond = E.S.P.T.Basis.fcond
++                     and type P.T.Basis.rounding_mode = E.S.P.T.Basis.rounding_mode
++                     and type P.T.Constant.const = E.S.P.T.Constant.const
++                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) E.S.P.T.Extension.ccx
++                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) E.S.P.T.Extension.fx
++                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) E.S.P.T.Extension.rx
++                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) E.S.P.T.Extension.sx
++                     and type P.T.I.div_rounding_mode = E.S.P.T.I.div_rounding_mode
++                     and type P.T.Region.region = E.S.P.T.Region.region
++                     and type P.T.ccexp = E.S.P.T.ccexp
++                     and type P.T.fexp = E.S.P.T.fexp
++                     (* and type P.T.labexp = E.S.P.T.labexp *)
++                     and type P.T.mlrisc = E.S.P.T.mlrisc
++                     and type P.T.oper = E.S.P.T.oper
++                     and type P.T.rep = E.S.P.T.rep
++                     and type P.T.rexp = E.S.P.T.rexp
++                     and type P.T.stm = E.S.P.T.stm
++  )  : ASSEMBLY_EMITTER =
+ struct
+   structure CFG = CFG
+ 
+diff --git a/flowgraph/buildFlowgraph.sml b/flowgraph/buildFlowgraph.sml
+index a6d4582..533b83d 100644
+--- a/flowgraph/buildFlowgraph.sml
++++ b/flowgraph/buildFlowgraph.sml
+@@ -9,9 +9,34 @@ sig
+    structure S   : INSTRUCTION_STREAM
+    structure I   : INSTRUCTIONS
+    structure P   : PSEUDO_OPS
+-   structure CFG : CONTROL_FLOW_GRAPH
+-   		where I = I
+-                  and P = P
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = P *)
++                   where type I.addressing_mode = I.addressing_mode
++                     and type I.ea = I.ea
++                     and type I.instr = I.instr
++                     and type I.instruction = I.instruction
++                     and type I.operand = I.operand
++                   where type P.Client.pseudo_op = P.Client.pseudo_op
++                     and type P.T.Basis.cond = P.T.Basis.cond
++                     and type P.T.Basis.div_rounding_mode = P.T.Basis.div_rounding_mode
++                     and type P.T.Basis.ext = P.T.Basis.ext
++                     and type P.T.Basis.fcond = P.T.Basis.fcond
++                     and type P.T.Basis.rounding_mode = P.T.Basis.rounding_mode
++                     and type P.T.Constant.const = P.T.Constant.const
++                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) P.T.Extension.ccx
++                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) P.T.Extension.fx
++                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) P.T.Extension.rx
++                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) P.T.Extension.sx
++                     and type P.T.I.div_rounding_mode = P.T.I.div_rounding_mode
++                     and type P.T.Region.region = P.T.Region.region
++                     and type P.T.ccexp = P.T.ccexp
++                     and type P.T.fexp = P.T.fexp
++                     (* and type P.T.labexp = P.T.labexp *)
++                     and type P.T.mlrisc = P.T.mlrisc
++                     and type P.T.oper = P.T.oper
++                     and type P.T.rep = P.T.rep
++                     and type P.T.rexp = P.T.rexp
++                     and type P.T.stm = P.T.stm
++
+    (*
+     * This creates an emitter which can be used to build a CFG incrementally
+     *)
+@@ -26,9 +51,33 @@ end
+ functor BuildFlowgraph 
+   (structure Props  : INSN_PROPERTIES
+    structure Stream : INSTRUCTION_STREAM
+-   structure CFG    : CONTROL_FLOW_GRAPH  
+-			  where I = Props.I
+-			    and P = Stream.P
++   structure CFG    : CONTROL_FLOW_GRAPH (* where I = Props.I and P = Stream.P *)
++                      where type I.addressing_mode = Props.I.addressing_mode
++                        and type I.ea = Props.I.ea
++                        and type I.instr = Props.I.instr
++                        and type I.instruction = Props.I.instruction
++                        and type I.operand = Props.I.operand
++                      where type P.Client.pseudo_op = Stream.P.Client.pseudo_op
++                        and type P.T.Basis.cond = Stream.P.T.Basis.cond
++                        and type P.T.Basis.div_rounding_mode = Stream.P.T.Basis.div_rounding_mode
++                        and type P.T.Basis.ext = Stream.P.T.Basis.ext
++                        and type P.T.Basis.fcond = Stream.P.T.Basis.fcond
++                        and type P.T.Basis.rounding_mode = Stream.P.T.Basis.rounding_mode
++                        and type P.T.Constant.const = Stream.P.T.Constant.const
++                        and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Stream.P.T.Extension.ccx
++                        and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Stream.P.T.Extension.fx
++                        and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Stream.P.T.Extension.rx
++                        and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Stream.P.T.Extension.sx
++                        and type P.T.I.div_rounding_mode = Stream.P.T.I.div_rounding_mode
++                        and type P.T.Region.region = Stream.P.T.Region.region
++                        and type P.T.ccexp = Stream.P.T.ccexp
++                        and type P.T.fexp = Stream.P.T.fexp
++                        (* and type P.T.labexp = Stream.P.T.labexp *)
++                        and type P.T.mlrisc = Stream.P.T.mlrisc
++                        and type P.T.oper = Stream.P.T.oper
++                        and type P.T.rep = Stream.P.T.rep
++                        and type P.T.rexp = Stream.P.T.rexp
++                        and type P.T.stm = Stream.P.T.stm
+   ) : CONTROL_FLOWGRAPH_GEN =
+ struct
+   structure CFG = CFG
+diff --git a/flowgraph/cfg.sml b/flowgraph/cfg.sml
+index 430cfdd..9998db9 100644
+--- a/flowgraph/cfg.sml
++++ b/flowgraph/cfg.sml
+@@ -10,8 +10,18 @@
+ functor ControlFlowGraph
+    (structure I : INSTRUCTIONS
+     structure GraphImpl : GRAPH_IMPLEMENTATION
+-    structure InsnProps : INSN_PROPERTIES where I = I
+-    structure Asm : INSTRUCTION_EMITTER where I = I
++    structure InsnProps : INSN_PROPERTIES (* where I = I *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
++    structure Asm : INSTRUCTION_EMITTER (* where I = I *)
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
+    ) : CONTROL_FLOW_GRAPH =
+ struct
+ 
+@@ -314,7 +324,10 @@ struct
+    fun mustPreceed (G.GRAPH cfg) (i,j) =
+    let val visited = H.mkTable(23,NotFound)
+        fun chase [] = false
+-         | chase((u,v,EDGE{k=(FALLSTHRU|BRANCH false),...})::_) =
++         | chase((u,v,EDGE{k= FALLSTHRU,...})::_) =
++           if H.inDomain visited u then false
++           else u = i orelse (H.insert visited (u,true); chase(#in_edges cfg u))
++         | chase((u,v,EDGE{k= BRANCH false,...})::_) =
+            if H.inDomain visited u then false
+            else u = i orelse (H.insert visited (u,true); chase(#in_edges cfg u))
+          | chase(_::es) = chase es
+@@ -355,7 +368,8 @@ struct
+        |  BLOCK{insns=insns as ref(jmp::rest),...} => 
+              (case #out_edges cfg node of
+                 [] => ()
+-             |  [(_,_,EDGE{k=(ENTRY | EXIT),...})] => ()
++             |  [(_,_,EDGE{k=ENTRY,...})] => ()
++             |  [(_,_,EDGE{k=EXIT,...})] => ()
+              |  [(i,j,_)] =>
+                   if InsnProps.instrKind jmp = InsnProps.IK_JUMP then
+                        insns := InsnProps.setJumpTarget(jmp,labelOf j)::rest
+@@ -388,7 +402,8 @@ struct
+     *=====================================================================*)
+    fun mergeEdge (CFG as G.GRAPH cfg) (i,j,e as EDGE{w,k,...}) = 
+    let val _ = case k of
+-                  (ENTRY | EXIT) => raise Can'tMerge
++                  ENTRY => raise Can'tMerge
++               |  EXIT => raise Can'tMerge
+                |  _ => () 
+        val _ = case (#out_edges cfg i,#in_edges cfg j) of
+                   ([(_,j',_)],[(i',_,_)]) => 
+@@ -713,7 +728,8 @@ struct
+     *========================================================================*)
+    fun cdgEdge(EDGE{k, ...}) = 
+         case k of
+-           (JUMP | FALLSTHRU) => false
++           JUMP => false
++        |  FALLSTHRU => false
+         |  _ => true
+ 
+    (*========================================================================
+diff --git a/flowgraph/cfgCountCopies.sml b/flowgraph/cfgCountCopies.sml
+index d02d2b5..9c68c03 100644
+--- a/flowgraph/cfgCountCopies.sml
++++ b/flowgraph/cfgCountCopies.sml
+@@ -4,10 +4,18 @@
+  *)
+ functor CFGCountCopies
+    ( structure CFG : CONTROL_FLOW_GRAPH
+-     structure InsnProps : INSN_PROPERTIES
+-     		where I = CFG.I
+-     structure SdiJumps : SDI_JUMPS
+-     		where I = CFG.I
++     structure InsnProps : INSN_PROPERTIES (* where I = CFG.I *)
++                           where type I.addressing_mode = CFG.I.addressing_mode
++                             and type I.ea = CFG.I.ea
++                             and type I.instr = CFG.I.instr
++                             and type I.instruction = CFG.I.instruction
++                             and type I.operand = CFG.I.operand
++     structure SdiJumps : SDI_JUMPS (* where I = CFG.I *)
++                          where type I.addressing_mode = CFG.I.addressing_mode
++                            and type I.ea = CFG.I.ea
++                            and type I.instr = CFG.I.instr
++                            and type I.instruction = CFG.I.instruction
++                            and type I.operand = CFG.I.operand
      ) : CFG_OPTIMIZATION =
-    struct
---- 8,17 ----
-  functor CFGExpandCopies
-     (structure CFG    : CONTROL_FLOW_GRAPH
-!     structure Shuffle : SHUFFLE (* where I = CFG.I *)
-!                         where type I.addressing_mode = CFG.I.addressing_mode
-!                           and type I.ea = CFG.I.ea
-!                           and type I.instr = CFG.I.instr
-!                           and type I.instruction = CFG.I.instruction
-!                           and type I.operand = CFG.I.operand
-     ) : CFG_OPTIMIZATION =
-    struct
-diff -N -C 2 -r MLRISC/flowgraph/cfgPeephole.sml MLRISC-mlton/flowgraph/cfgPeephole.sml
-*** MLRISC/flowgraph/cfgPeephole.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/cfgPeephole.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 4,9 ****
-  functor CFGPeephole
-    (structure CFG      : CONTROL_FLOW_GRAPH
-!    structure PeepHole : PEEPHOLE
-!      sharing CFG.I = PeepHole.I
+ struct
+    structure CFG = CFG
+diff --git a/flowgraph/cfgExpandCopies.sml b/flowgraph/cfgExpandCopies.sml
+index dc22908..2fc7240 100644
+--- a/flowgraph/cfgExpandCopies.sml
++++ b/flowgraph/cfgExpandCopies.sml
+@@ -7,8 +7,12 @@
+ 
+ functor CFGExpandCopies
+    (structure CFG    : CONTROL_FLOW_GRAPH
+-    structure Shuffle : SHUFFLE
+-    			where I = CFG.I
++    structure Shuffle : SHUFFLE (* where I = CFG.I *)
++                        where type I.addressing_mode = CFG.I.addressing_mode
++                          and type I.ea = CFG.I.ea
++                          and type I.instr = CFG.I.instr
++                          and type I.instruction = CFG.I.instruction
++                          and type I.operand = CFG.I.operand
     ) : CFG_OPTIMIZATION =
-  struct
---- 4,13 ----
-  functor CFGPeephole
-    (structure CFG      : CONTROL_FLOW_GRAPH
-!    structure PeepHole : PEEPHOLE (* sharing CFG.I = PeepHole.I *)
-!                         where type I.addressing_mode = CFG.I.addressing_mode
-!                           and type I.ea = CFG.I.ea
-!                           and type I.instr = CFG.I.instr
-!                           and type I.instruction = CFG.I.instruction
-!                           and type I.operand = CFG.I.operand
-    ) : CFG_OPTIMIZATION =
-  struct
-diff -N -C 2 -r MLRISC/flowgraph/printFlowgraph.sml MLRISC-mlton/flowgraph/printFlowgraph.sml
-*** MLRISC/flowgraph/printFlowgraph.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/printFlowgraph.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 6,12 ****
-  sig
-     structure Asm : INSTRUCTION_EMITTER
-!    structure CFG : CONTROL_FLOW_GRAPH
-! 		      where I = Asm.I 
-! 			and P = Asm.S.P
-  
-     val printCFG : TextIO.outstream -> string -> CFG.cfg -> unit
---- 6,36 ----
-  sig
-     structure Asm : INSTRUCTION_EMITTER
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
-!                    where type I.addressing_mode = Asm.I.addressing_mode
-!                      and type I.ea = Asm.I.ea
-!                      and type I.instr = Asm.I.instr
-!                      and type I.instruction = Asm.I.instruction
-!                      and type I.operand = Asm.I.operand
-!                    where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
-!                      and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
-!                      and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
-!                      and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
-!                      and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
-!                      and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
-!                      and type P.T.Constant.const = Asm.S.P.T.Constant.const
-!                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
-!                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
-!                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
-!                      and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
-!                      and type P.T.Region.region = Asm.S.P.T.Region.region
-!                      and type P.T.ccexp = Asm.S.P.T.ccexp
-!                      and type P.T.fexp = Asm.S.P.T.fexp
-!                      (* and type P.T.labexp = Asm.S.P.T.labexp *)
-!                      and type P.T.mlrisc = Asm.S.P.T.mlrisc
-!                      and type P.T.oper = Asm.S.P.T.oper
-!                      and type P.T.rep = Asm.S.P.T.rep
-!                      and type P.T.rexp = Asm.S.P.T.rexp
-!                      and type P.T.stm = Asm.S.P.T.stm
-  
-     val printCFG : TextIO.outstream -> string -> CFG.cfg -> unit
-***************
-*** 16,22 ****
-  functor PrintFlowgraph 
-     (structure Asm : INSTRUCTION_EMITTER
-!     structure CFG : CONTROL_FLOW_GRAPH
-! 		    where I = Asm.I
-! 		      and P = Asm.S.P
-     ) : PRINT_FLOWGRAPH =
-  struct
---- 40,70 ----
-  functor PrintFlowgraph 
-     (structure Asm : INSTRUCTION_EMITTER
-!     structure CFG : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
-!                     where type I.addressing_mode = Asm.I.addressing_mode
-!                       and type I.ea = Asm.I.ea
-!                       and type I.instr = Asm.I.instr
-!                       and type I.instruction = Asm.I.instruction
-!                       and type I.operand = Asm.I.operand
-!                     where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = Asm.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = Asm.S.P.T.Region.region
-!                       and type P.T.ccexp = Asm.S.P.T.ccexp
-!                       and type P.T.fexp = Asm.S.P.T.fexp
-!                       (* and type P.T.labexp = Asm.S.P.T.labexp *)
-!                       and type P.T.mlrisc = Asm.S.P.T.mlrisc
-!                       and type P.T.oper = Asm.S.P.T.oper
-!                       and type P.T.rep = Asm.S.P.T.rep
-!                       and type P.T.rexp = Asm.S.P.T.rexp
-!                       and type P.T.stm = Asm.S.P.T.stm
-     ) : PRINT_FLOWGRAPH =
-  struct
-diff -N -C 2 -r MLRISC/flowgraph/pseudo-ops-big.sml MLRISC-mlton/flowgraph/pseudo-ops-big.sml
-*** MLRISC/flowgraph/pseudo-ops-big.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/pseudo-ops-big.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,13 ****
-  functor PseudoOpsBig
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL 
-! 			     where T = T
-       val  icache_alignment : int	(* cache line size *)
-       val max_alignment : int option	(* maximum alignment for internal labels *)
---- 8,32 ----
-  functor PseudoOpsBig
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-       val  icache_alignment : int	(* cache line size *)
-       val max_alignment : int option	(* maximum alignment for internal labels *)
-diff -N -C 2 -r MLRISC/flowgraph/pseudo-ops-little.sml MLRISC-mlton/flowgraph/pseudo-ops-little.sml
-*** MLRISC/flowgraph/pseudo-ops-little.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/pseudo-ops-little.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,13 ****
-  functor PseudoOpsLittle
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL
-! 			    where T = T
-       val icache_alignment : int		(* cache line size *)
-       val max_alignment : int option	(* maximum alignment for internal labels *)
---- 8,32 ----
-  functor PseudoOpsLittle
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-       val icache_alignment : int		(* cache line size *)
-       val max_alignment : int option	(* maximum alignment for internal labels *)
-diff -N -C 2 -r MLRISC/flowgraph/pseudo-ops.sig MLRISC-mlton/flowgraph/pseudo-ops.sig
-*** MLRISC/flowgraph/pseudo-ops.sig	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/flowgraph/pseudo-ops.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 9,13 ****
-  signature PSEUDO_OPS = sig
+   struct
+     structure CFG = CFG
+diff --git a/flowgraph/cfgPeephole.sml b/flowgraph/cfgPeephole.sml
+index 9cf9fa8..f7b21db 100644
+--- a/flowgraph/cfgPeephole.sml
++++ b/flowgraph/cfgPeephole.sml
+@@ -3,8 +3,12 @@
+  *)
+ functor CFGPeephole
+   (structure CFG      : CONTROL_FLOW_GRAPH
+-   structure PeepHole : PEEPHOLE
+-     sharing CFG.I = PeepHole.I
++   structure PeepHole : PEEPHOLE (* sharing CFG.I = PeepHole.I *)
++                        where type I.addressing_mode = CFG.I.addressing_mode
++                          and type I.ea = CFG.I.ea
++                          and type I.instr = CFG.I.instr
++                          and type I.instruction = CFG.I.instruction
++                          and type I.operand = CFG.I.operand
+   ) : CFG_OPTIMIZATION =
+ struct
+    structure CFG = CFG
+diff --git a/flowgraph/printFlowgraph.sml b/flowgraph/printFlowgraph.sml
+index 84732fa..3c0718c 100644
+--- a/flowgraph/printFlowgraph.sml
++++ b/flowgraph/printFlowgraph.sml
+@@ -5,9 +5,33 @@
+ signature PRINT_FLOWGRAPH = 
+ sig
+    structure Asm : INSTRUCTION_EMITTER
+-   structure CFG : CONTROL_FLOW_GRAPH
+-		      where I = Asm.I 
+-			and P = Asm.S.P
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
++                   where type I.addressing_mode = Asm.I.addressing_mode
++                     and type I.ea = Asm.I.ea
++                     and type I.instr = Asm.I.instr
++                     and type I.instruction = Asm.I.instruction
++                     and type I.operand = Asm.I.operand
++                   where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
++                     and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
++                     and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
++                     and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
++                     and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
++                     and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
++                     and type P.T.Constant.const = Asm.S.P.T.Constant.const
++                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
++                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
++                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
++                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
++                     and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
++                     and type P.T.Region.region = Asm.S.P.T.Region.region
++                     and type P.T.ccexp = Asm.S.P.T.ccexp
++                     and type P.T.fexp = Asm.S.P.T.fexp
++                     (* and type P.T.labexp = Asm.S.P.T.labexp *)
++                     and type P.T.mlrisc = Asm.S.P.T.mlrisc
++                     and type P.T.oper = Asm.S.P.T.oper
++                     and type P.T.rep = Asm.S.P.T.rep
++                     and type P.T.rexp = Asm.S.P.T.rexp
++                     and type P.T.stm = Asm.S.P.T.stm
+ 
+    val printCFG : TextIO.outstream -> string -> CFG.cfg -> unit
+ end
+@@ -15,9 +39,33 @@ end
+ 
+ functor PrintFlowgraph 
+    (structure Asm : INSTRUCTION_EMITTER
+-    structure CFG : CONTROL_FLOW_GRAPH
+-		    where I = Asm.I
+-		      and P = Asm.S.P
++    structure CFG : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
++                    where type I.addressing_mode = Asm.I.addressing_mode
++                      and type I.ea = Asm.I.ea
++                      and type I.instr = Asm.I.instr
++                      and type I.instruction = Asm.I.instruction
++                      and type I.operand = Asm.I.operand
++                    where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = Asm.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = Asm.S.P.T.Region.region
++                      and type P.T.ccexp = Asm.S.P.T.ccexp
++                      and type P.T.fexp = Asm.S.P.T.fexp
++                      (* and type P.T.labexp = Asm.S.P.T.labexp *)
++                      and type P.T.mlrisc = Asm.S.P.T.mlrisc
++                      and type P.T.oper = Asm.S.P.T.oper
++                      and type P.T.rep = Asm.S.P.T.rep
++                      and type P.T.rexp = Asm.S.P.T.rexp
++                      and type P.T.stm = Asm.S.P.T.stm
+    ) : PRINT_FLOWGRAPH =
+ struct
+    structure Asm = Asm
+diff --git a/flowgraph/pseudo-ops-big.sml b/flowgraph/pseudo-ops-big.sml
+index 6834f48..7a31d3c 100644
+--- a/flowgraph/pseudo-ops-big.sml
++++ b/flowgraph/pseudo-ops-big.sml
+@@ -7,8 +7,27 @@
+ 
+ functor PseudoOpsBig
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL 
+-			     where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+      val  icache_alignment : int	(* cache line size *)
+      val max_alignment : int option	(* maximum alignment for internal labels *)
+      val nop: {sz:int, en:Word32.word}	(* encoding for noop *)
+diff --git a/flowgraph/pseudo-ops-little.sml b/flowgraph/pseudo-ops-little.sml
+index a474d29..c9ee8f4 100644
+--- a/flowgraph/pseudo-ops-little.sml
++++ b/flowgraph/pseudo-ops-little.sml
+@@ -7,8 +7,27 @@
+ 
+ functor PseudoOpsLittle
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL
+-			    where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+      val icache_alignment : int		(* cache line size *)
+      val max_alignment : int option	(* maximum alignment for internal labels *)
+      val nop: {sz:int, en:Word32.word}	(* encoding for noop *)
+diff --git a/flowgraph/pseudo-ops.sig b/flowgraph/pseudo-ops.sig
+index f5165c9..7f0b394 100644
+--- a/flowgraph/pseudo-ops.sig
++++ b/flowgraph/pseudo-ops.sig
+@@ -8,7 +8,27 @@
+ 
+ signature PSEUDO_OPS = sig
+   structure T : MLTREE
+-  structure Client : CLIENT_PSEUDO_OPS where AsmPseudoOps.T = T
++  structure Client : CLIENT_PSEUDO_OPS (* where AsmPseudoOps.T = T *)
++                     where type AsmPseudoOps.T.Basis.cond = T.Basis.cond
++                       and type AsmPseudoOps.T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                       and type AsmPseudoOps.T.Basis.ext = T.Basis.ext
++                       and type AsmPseudoOps.T.Basis.fcond = T.Basis.fcond
++                       and type AsmPseudoOps.T.Basis.rounding_mode = T.Basis.rounding_mode
++                       and type AsmPseudoOps.T.Constant.const = T.Constant.const
++                       and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                       and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                       and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                       and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                       and type AsmPseudoOps.T.I.div_rounding_mode = T.I.div_rounding_mode
++                       and type AsmPseudoOps.T.Region.region = T.Region.region
++                       and type AsmPseudoOps.T.ccexp = T.ccexp
++                       and type AsmPseudoOps.T.fexp = T.fexp
++                       (* and type AsmPseudoOps.T.labexp = T.labexp *)
++                       and type AsmPseudoOps.T.mlrisc = T.mlrisc
++                       and type AsmPseudoOps.T.oper = T.oper
++                       and type AsmPseudoOps.T.rep = T.rep
++                       and type AsmPseudoOps.T.rexp = T.rexp
++                       and type AsmPseudoOps.T.stm = T.stm
+ 
+   type pseudo_op = (T.labexp, Client.pseudo_op) PseudoOpsBasisTyp.pseudo_op
+ 
+diff --git a/frequencies/compute-freqs-fn.sml b/frequencies/compute-freqs-fn.sml
+index 2c701ce..cc41c8d 100644
+--- a/frequencies/compute-freqs-fn.sml
++++ b/frequencies/compute-freqs-fn.sml
+@@ -40,9 +40,9 @@ functor ComputeFreqsFn (
+ 
+   (***** Representation of equations *****)
+     type var = Graph.node_id
++    type term = (real * var)
++    type sum = {terms : term list, c : real}
+     datatype def = Unknown | Sum of sum
+-    withtype term = (real * var)
+-	 and sum = {terms : term list, c : real}
+ 
+     val zero = {c = 0.0, terms = []}
+     val one = {c = 1.0, terms = []}
+diff --git a/gc-safety/gc-cells.sig b/gc-safety/gc-cells.sig
+index c70e143..09f8388 100644
+--- a/gc-safety/gc-cells.sig
++++ b/gc-safety/gc-cells.sig
+@@ -8,7 +8,16 @@ sig
+ 
+    structure C  : CELLS
+    structure GC : GC_TYPE
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+ 
+    (* Generate a virtual register and update the gc info at the same time. *)
+    val newCell   : CB.cellkind -> GC.gctype -> CB.cell
+diff --git a/graphs/bigraph.sig b/graphs/bigraph.sig
+index 218d36f..33b5b30 100644
+--- a/graphs/bigraph.sig
++++ b/graphs/bigraph.sig
+@@ -9,8 +9,7 @@ sig
+ 
+    include GRAPH
+ 
+-   datatype ('m,'n,'e,'g) bigraph = BIGRAPH of ('m,'n,'e,'g) bigraph_methods
+-   withtype ('m,'n,'e,'g) bigraph_methods =
++   type ('m,'n,'e,'g) bigraph_methods =
+        {  name        : string,
+           graph_info  : 'g,
+ 
+@@ -50,5 +49,6 @@ sig
+           forall_dst   : ('n node -> unit) -> unit,
+           forall_edges : ('e edge -> unit) -> unit
+        }
++   datatype ('m,'n,'e,'g) bigraph = BIGRAPH of ('m,'n,'e,'g) bigraph_methods
+ end
+ 
+diff --git a/graphs/digraph.sml b/graphs/digraph.sml
+index 44d341a..7076b55 100644
+--- a/graphs/digraph.sml
++++ b/graphs/digraph.sml
+@@ -7,7 +7,33 @@
+  * -- Allen
+  *)
+ 
+-functor DirectedGraph(A : ARRAY) : 
++functor DirectedGraph(A : sig type 'a array
++                              type 'a vector
++                                 
++                              val all: ('a -> bool) -> 'a array -> bool
++                              val app: ('a -> unit) -> 'a array -> unit
++                              val appi: (int * 'a -> unit) -> 'a array -> unit
++                              val array: int * 'a -> 'a array
++                              val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
++                              val copy: {src: 'a array, dst: 'a array, di: int} -> unit
++                              val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit
++                              val exists: ('a -> bool) -> 'a array -> bool
++                              val find: ('a -> bool) -> 'a array -> 'a option
++                              val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
++                              val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++                              val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++                              val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++                              val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++                              val fromList: 'a list -> 'a array
++                              val length: 'a array -> int
++                              val maxLen: int
++                              val modify: ('a -> 'a) -> 'a array -> unit
++                              val modifyi: (int * 'a -> 'a) -> 'a array -> unit
++                              val sub: 'a array * int -> 'a
++                              val tabulate: int * (int -> 'a) -> 'a array
++                              val update: 'a array * int * 'a -> unit
++                              val vector: 'a array -> 'a vector
++                          end) :
+ sig include GRAPH_IMPLEMENTATION 
+ 
+     type 'e adjlist   = 'e Graph.edge list A.array
+diff --git a/graphs/graph.sig b/graphs/graph.sig
+index 50b2ff0..0d98039 100644
+--- a/graphs/graph.sig
++++ b/graphs/graph.sig
+@@ -25,8 +25,7 @@ sig
+    type 'n node = node_id * 'n 
+    type 'e edge = node_id * node_id * 'e
+ 
+-   datatype ('n,'e,'g) graph = GRAPH of ('n,'e,'g) graph_methods
+-   withtype ('n,'e,'g) graph_methods = 
++   type ('n,'e,'g) graph_methods =
+        {  name            : string,
+           graph_info      : 'g,
+ 
+@@ -65,6 +64,7 @@ sig
+           forall_nodes    : ('n node -> unit) -> unit,
+           forall_edges    : ('e edge -> unit) -> unit
+        }
++   datatype ('n,'e,'g) graph = GRAPH of ('n,'e,'g) graph_methods
+    val unimplemented : 'a -> 'b
+ 
+          (* remove one edge i->j from graph *)
+diff --git a/hppa/backpatch/hppaDelaySlotProps.sml b/hppa/backpatch/hppaDelaySlotProps.sml
+index 5b2ffbb..113525b 100644
+--- a/hppa/backpatch/hppaDelaySlotProps.sml
++++ b/hppa/backpatch/hppaDelaySlotProps.sml
+@@ -4,7 +4,12 @@
+ 
+ functor HppaDelaySlots
+    (structure I : HPPAINSTR
+-    structure P : INSN_PROPERTIES where I = I
++    structure P : INSN_PROPERTIES (* where I = I *)
++                  where type I.addressing_mode = I.addressing_mode
++                    and type I.ea = I.ea
++                    and type I.instr = I.instr
++                    and type I.instruction = I.instruction
++                    and type I.operand = I.operand
+    ) : DELAY_SLOT_PROPERTIES =
+ struct
+    structure I  = I
+@@ -100,11 +105,19 @@ struct
+         in  clash(defUseInt) orelse clash(defUseReal) 
+         end
+ 
+-    fun delaySlotCandidate{jmp,delaySlot=
+-             (  I.INSTR(I.BCOND _) | I.INSTR(I.BCONDI _) | I.INSTR(I.BB _) | I.INSTR(I.FBRANCH _) 
+-              | I.INSTR(I.BV _) | I.INSTR(I.BE _) | I.INSTR(I.COMCLR_LDO _) | I.INSTR(I.COMICLR_LDO _) 
+-	      | I.INSTR(I.B _) | I.INSTR(I.LONGJUMP _) | I.INSTR(I.BLR _) | I.INSTR(I.BL _) 
+-	      | I.INSTR(I.BLE _))} = false
++    fun delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BCOND _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BCONDI _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BB _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FBRANCH _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BV _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BE _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.COMCLR_LDO _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.COMICLR_LDO _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.B _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.LONGJUMP _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BLR _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BL _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BLE _)} = false
+       | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
+            delaySlotCandidate{jmp=i,delaySlot=delaySlot}
+       | delaySlotCandidate{jmp,delaySlot=I.ANNOTATION{i,...}} = 
+diff --git a/hppa/backpatch/hppaJumps.sml b/hppa/backpatch/hppaJumps.sml
+index df66191..fc3e049 100644
+--- a/hppa/backpatch/hppaJumps.sml
++++ b/hppa/backpatch/hppaJumps.sml
+@@ -5,10 +5,75 @@
+  *)
+ functor HppaJumps
+   ( structure Instr:HPPAINSTR
+-    structure Shuffle:HPPASHUFFLE 
+-			 where I = Instr
+-    structure MLTreeEval : MLTREE_EVAL 
+-		         where T = Instr.T
++    structure Shuffle:HPPASHUFFLE (* where I = Instr *)
++                      where type I.Constant.const = Instr.Constant.const
++                        and type I.Region.region = Instr.Region.region
++                        and type I.T.Basis.cond = Instr.T.Basis.cond
++                        and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                        and type I.T.Basis.ext = Instr.T.Basis.ext
++                        and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                        and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                        and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                        and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                        and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                        and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                        and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                        and type I.T.ccexp = Instr.T.ccexp
++                        and type I.T.fexp = Instr.T.fexp
++                        (* and type I.T.labexp = Instr.T.labexp *)
++                        and type I.T.mlrisc = Instr.T.mlrisc
++                        and type I.T.oper = Instr.T.oper
++                        and type I.T.rep = Instr.T.rep
++                        and type I.T.rexp = Instr.T.rexp
++                        and type I.T.stm = Instr.T.stm
++                        and type I.addressing_mode = Instr.addressing_mode
++                        and type I.arith = Instr.arith
++                        and type I.arithi = Instr.arithi
++                        and type I.bcond = Instr.bcond
++                        and type I.bitcond = Instr.bitcond
++                        and type I.cmp = Instr.cmp
++                        and type I.cmpi = Instr.cmpi
++                        and type I.ea = Instr.ea
++                        and type I.farith = Instr.farith
++                        and type I.fcnv = Instr.fcnv
++                        and type I.fcond = Instr.fcond
++                        and type I.field_selector = Instr.field_selector
++                        and type I.fload = Instr.fload
++                        and type I.floadx = Instr.floadx
++                        and type I.fmt = Instr.fmt
++                        and type I.fstore = Instr.fstore
++                        and type I.fstorex = Instr.fstorex
++                        and type I.funary = Instr.funary
++                        and type I.instr = Instr.instr
++                        and type I.instruction = Instr.instruction
++                        and type I.load = Instr.load
++                        and type I.loadi = Instr.loadi
++                        and type I.operand = Instr.operand
++                        and type I.scond = Instr.scond
++                        and type I.shift = Instr.shift
++                        and type I.shiftv = Instr.shiftv
++                        and type I.store = Instr.store
++    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                           where type T.Basis.cond = Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = Instr.T.Basis.ext
++                             and type T.Basis.fcond = Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                             and type T.Region.region = Instr.T.Region.region
++                             and type T.ccexp = Instr.T.ccexp
++                             and type T.fexp = Instr.T.fexp
++                             (* and type T.labexp = Instr.T.labexp *)
++                             and type T.mlrisc = Instr.T.mlrisc
++                             and type T.oper = Instr.T.oper
++                             and type T.rep = Instr.T.rep
++                             and type T.rexp = Instr.T.rexp
++                             and type T.stm = Instr.T.stm
+   ) : SDI_JUMPS =				
+ struct
+   structure I = Instr
+diff --git a/hppa/emit/hppaAsm.sml b/hppa/emit/hppaAsm.sml
+index ead6d50..ba1a410 100644
+--- a/hppa/emit/hppaAsm.sml
++++ b/hppa/emit/hppaAsm.sml
+@@ -6,12 +6,96 @@
+ 
+ 
+ functor HppaAsmEmitter(structure S : INSTRUCTION_STREAM
+-                       structure Instr : HPPAINSTR
+-                          where T = S.P.T
+-                       structure Shuffle : HPPASHUFFLE
+-                          where I = Instr
+-                       structure MLTreeEval : MLTREE_EVAL
+-                          where T = Instr.T
++                       structure Instr : HPPAINSTR (* where T = S.P.T *)
++                                         where type T.Basis.cond = S.P.T.Basis.cond
++                                           and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                           and type T.Basis.ext = S.P.T.Basis.ext
++                                           and type T.Basis.fcond = S.P.T.Basis.fcond
++                                           and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                           and type T.Constant.const = S.P.T.Constant.const
++                                           and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                           and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                           and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                           and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                           and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                           and type T.Region.region = S.P.T.Region.region
++                                           and type T.ccexp = S.P.T.ccexp
++                                           and type T.fexp = S.P.T.fexp
++                                           (* and type T.labexp = S.P.T.labexp *)
++                                           and type T.mlrisc = S.P.T.mlrisc
++                                           and type T.oper = S.P.T.oper
++                                           and type T.rep = S.P.T.rep
++                                           and type T.rexp = S.P.T.rexp
++                                           and type T.stm = S.P.T.stm
++                       structure Shuffle : HPPASHUFFLE (* where I = Instr *)
++                                           where type I.Constant.const = Instr.Constant.const
++                                             and type I.Region.region = Instr.Region.region
++                                             and type I.T.Basis.cond = Instr.T.Basis.cond
++                                             and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                             and type I.T.Basis.ext = Instr.T.Basis.ext
++                                             and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                             and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                             and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                             and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                             and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                             and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                             and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                             and type I.T.ccexp = Instr.T.ccexp
++                                             and type I.T.fexp = Instr.T.fexp
++                                             (* and type I.T.labexp = Instr.T.labexp *)
++                                             and type I.T.mlrisc = Instr.T.mlrisc
++                                             and type I.T.oper = Instr.T.oper
++                                             and type I.T.rep = Instr.T.rep
++                                             and type I.T.rexp = Instr.T.rexp
++                                             and type I.T.stm = Instr.T.stm
++                                             and type I.addressing_mode = Instr.addressing_mode
++                                             and type I.arith = Instr.arith
++                                             and type I.arithi = Instr.arithi
++                                             and type I.bcond = Instr.bcond
++                                             and type I.bitcond = Instr.bitcond
++                                             and type I.cmp = Instr.cmp
++                                             and type I.cmpi = Instr.cmpi
++                                             and type I.ea = Instr.ea
++                                             and type I.farith = Instr.farith
++                                             and type I.fcnv = Instr.fcnv
++                                             and type I.fcond = Instr.fcond
++                                             and type I.field_selector = Instr.field_selector
++                                             and type I.fload = Instr.fload
++                                             and type I.floadx = Instr.floadx
++                                             and type I.fmt = Instr.fmt
++                                             and type I.fstore = Instr.fstore
++                                             and type I.fstorex = Instr.fstorex
++                                             and type I.funary = Instr.funary
++                                             and type I.instr = Instr.instr
++                                             and type I.instruction = Instr.instruction
++                                             and type I.load = Instr.load
++                                             and type I.loadi = Instr.loadi
++                                             and type I.operand = Instr.operand
++                                             and type I.scond = Instr.scond
++                                             and type I.shift = Instr.shift
++                                             and type I.shiftv = Instr.shiftv
++                                             and type I.store = Instr.store
++                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                              where type T.Basis.cond = Instr.T.Basis.cond
++                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                                and type T.Basis.ext = Instr.T.Basis.ext
++                                                and type T.Basis.fcond = Instr.T.Basis.fcond
++                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                                and type T.Constant.const = Instr.T.Constant.const
++                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                                and type T.Region.region = Instr.T.Region.region
++                                                and type T.ccexp = Instr.T.ccexp
++                                                and type T.fexp = Instr.T.fexp
++                                                (* and type T.labexp = Instr.T.labexp *)
++                                                and type T.mlrisc = Instr.T.mlrisc
++                                                and type T.oper = Instr.T.oper
++                                                and type T.rep = Instr.T.rep
++                                                and type T.rexp = Instr.T.rexp
++                                                and type T.stm = Instr.T.stm
+                       ) : INSTRUCTION_EMITTER =
+ struct
+    structure I  = Instr
+diff --git a/hppa/emit/hppaMC.sml b/hppa/emit/hppaMC.sml
+index e4d5ad4..37805e3 100644
+--- a/hppa/emit/hppaMC.sml
++++ b/hppa/emit/hppaMC.sml
+@@ -6,7 +6,27 @@
+ 
+ 
+ functor HppaMCEmitter(structure Instr : HPPAINSTR
+-                      structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++                      structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                             where type T.Basis.cond = Instr.T.Basis.cond
++                                               and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                               and type T.Basis.ext = Instr.T.Basis.ext
++                                               and type T.Basis.fcond = Instr.T.Basis.fcond
++                                               and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                               and type T.Constant.const = Instr.T.Constant.const
++                                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                               and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                               and type T.Region.region = Instr.T.Region.region
++                                               and type T.ccexp = Instr.T.ccexp
++                                               and type T.fexp = Instr.T.fexp
++                                               (* and type T.labexp = Instr.T.labexp *)
++                                               and type T.mlrisc = Instr.T.mlrisc
++                                               and type T.oper = Instr.T.oper
++                                               and type T.rep = Instr.T.rep
++                                               and type T.rexp = Instr.T.rexp
++                                               and type T.stm = Instr.T.stm
+                       structure Stream : INSTRUCTION_STREAM 
+                       structure CodeString : CODE_STRING
+                      ) : INSTRUCTION_EMITTER =
+@@ -47,6 +67,7 @@ struct
+        (* note: fromLargeWord strips the high order bits! *)
+        fun eByteW w =
+        let val i = !loc
++           val w = W.toLargeWord w
+        in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
+    
+        fun doNothing _ = ()
+diff --git a/hppa/flowgraph/hppaGasPseudoOps.sml b/hppa/flowgraph/hppaGasPseudoOps.sml
+index 8d140ee..1eb8f85 100644
+--- a/hppa/flowgraph/hppaGasPseudoOps.sml
++++ b/hppa/flowgraph/hppaGasPseudoOps.sml
+@@ -1,6 +1,26 @@
+ functor HppaGasPseudoOps 
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL  where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+     ) : PSEUDO_OPS_BASIS = 
+ 
+ struct
+diff --git a/hppa/instructions/hppaInstr.sml b/hppa/instructions/hppaInstr.sml
+index 34a89b2..a2d0e29 100644
+--- a/hppa/instructions/hppaInstr.sml
++++ b/hppa/instructions/hppaInstr.sml
+@@ -8,7 +8,16 @@
+ signature HPPAINSTR =
+ sig
+    structure C : HPPACELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
     structure T : MLTREE
-!   structure Client : CLIENT_PSEUDO_OPS where AsmPseudoOps.T = T
-  
-    type pseudo_op = (T.labexp, Client.pseudo_op) PseudoOpsBasisTyp.pseudo_op
---- 9,33 ----
-  signature PSEUDO_OPS = sig
-    structure T : MLTREE
-!   structure Client : CLIENT_PSEUDO_OPS (* where AsmPseudoOps.T = T *)
-!                      where type AsmPseudoOps.T.Basis.cond = T.Basis.cond
-!                        and type AsmPseudoOps.T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                        and type AsmPseudoOps.T.Basis.ext = T.Basis.ext
-!                        and type AsmPseudoOps.T.Basis.fcond = T.Basis.fcond
-!                        and type AsmPseudoOps.T.Basis.rounding_mode = T.Basis.rounding_mode
-!                        and type AsmPseudoOps.T.Constant.const = T.Constant.const
-!                        and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                        and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                        and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                        and type ('s,'r,'f,'c) AsmPseudoOps.T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                        and type AsmPseudoOps.T.I.div_rounding_mode = T.I.div_rounding_mode
-!                        and type AsmPseudoOps.T.Region.region = T.Region.region
-!                        and type AsmPseudoOps.T.ccexp = T.ccexp
-!                        and type AsmPseudoOps.T.fexp = T.fexp
-!                        (* and type AsmPseudoOps.T.labexp = T.labexp *)
-!                        and type AsmPseudoOps.T.mlrisc = T.mlrisc
-!                        and type AsmPseudoOps.T.oper = T.oper
-!                        and type AsmPseudoOps.T.rep = T.rep
-!                        and type AsmPseudoOps.T.rexp = T.rexp
-!                        and type AsmPseudoOps.T.stm = T.stm
-  
-    type pseudo_op = (T.labexp, Client.pseudo_op) PseudoOpsBasisTyp.pseudo_op
-diff -N -C 2 -r MLRISC/frequencies/compute-freqs-fn.sml MLRISC-mlton/frequencies/compute-freqs-fn.sml
-*** MLRISC/frequencies/compute-freqs-fn.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/frequencies/compute-freqs-fn.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 41,47 ****
-    (***** Representation of equations *****)
-      type var = Graph.node_id
-      datatype def = Unknown | Sum of sum
--     withtype term = (real * var)
-- 	 and sum = {terms : term list, c : real}
-  
-      val zero = {c = 0.0, terms = []}
---- 41,47 ----
-    (***** Representation of equations *****)
-      type var = Graph.node_id
-+     type term = (real * var)
-+     type sum = {terms : term list, c : real}
-      datatype def = Unknown | Sum of sum
-  
-      val zero = {c = 0.0, terms = []}
-diff -N -C 2 -r MLRISC/gc-safety/gc-cells.sig MLRISC-mlton/gc-safety/gc-cells.sig
-*** MLRISC/gc-safety/gc-cells.sig	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/gc-safety/gc-cells.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 9,13 ****
-     structure C  : CELLS
-     structure GC : GC_TYPE
-!    structure CB : CELLS_BASIS = CellsBasis
-  
-     (* Generate a virtual register and update the gc info at the same time. *)
---- 9,22 ----
-     structure C  : CELLS
-     structure GC : GC_TYPE
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-  
-     (* Generate a virtual register and update the gc info at the same time. *)
-diff -N -C 2 -r MLRISC/graphs/bigraph.sig MLRISC-mlton/graphs/bigraph.sig
-*** MLRISC/graphs/bigraph.sig	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/graphs/bigraph.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 10,15 ****
-     include GRAPH
-  
-!    datatype ('m,'n,'e,'g) bigraph = BIGRAPH of ('m,'n,'e,'g) bigraph_methods
-!    withtype ('m,'n,'e,'g) bigraph_methods =
-         {  name        : string,
-            graph_info  : 'g,
---- 10,14 ----
-     include GRAPH
-  
-!    type ('m,'n,'e,'g) bigraph_methods =
-         {  name        : string,
-            graph_info  : 'g,
-***************
-*** 51,54 ****
---- 50,54 ----
-            forall_edges : ('e edge -> unit) -> unit
-         }
-+    datatype ('m,'n,'e,'g) bigraph = BIGRAPH of ('m,'n,'e,'g) bigraph_methods
-  end
-  
-diff -N -C 2 -r MLRISC/graphs/digraph.sml MLRISC-mlton/graphs/digraph.sml
-*** MLRISC/graphs/digraph.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/graphs/digraph.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,12 ****
-   *)
-  
-! functor DirectedGraph(A : ARRAY) : 
-  sig include GRAPH_IMPLEMENTATION 
-  
---- 8,38 ----
-   *)
-  
-! functor DirectedGraph(A : sig type 'a array
-!                               type 'a vector
-!                                  
-!                               val all: ('a -> bool) -> 'a array -> bool
-!                               val app: ('a -> unit) -> 'a array -> unit 
-!                               val appi: (int * 'a -> unit) -> 'a array -> unit 
-!                               val array: int * 'a -> 'a array 
-!                               val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
-!                               val copy: {src: 'a array, dst: 'a array, di: int} -> unit 
-!                               val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit 
-!                               val exists: ('a -> bool) -> 'a array -> bool
-!                               val find: ('a -> bool) -> 'a array -> 'a option
-!                               val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
-!                               val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!                               val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!                               val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!                               val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!                               val fromList: 'a list -> 'a array 
-!                               val length: 'a array -> int 
-!                               val maxLen: int 
-!                               val modify: ('a -> 'a) -> 'a array -> unit 
-!                               val modifyi: (int * 'a -> 'a) -> 'a array -> unit 
-!                               val sub: 'a array * int -> 'a 
-!                               val tabulate: int * (int -> 'a) -> 'a array 
-!                               val update: 'a array * int * 'a -> unit 
-!                               val vector: 'a array -> 'a vector
-!                           end) : 
-  sig include GRAPH_IMPLEMENTATION 
-  
-diff -N -C 2 -r MLRISC/graphs/graph.sig MLRISC-mlton/graphs/graph.sig
-*** MLRISC/graphs/graph.sig	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/graphs/graph.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 26,31 ****
-     type 'e edge = node_id * node_id * 'e
-  
-!    datatype ('n,'e,'g) graph = GRAPH of ('n,'e,'g) graph_methods
-!    withtype ('n,'e,'g) graph_methods = 
-         {  name            : string,
-            graph_info      : 'g,
---- 26,30 ----
-     type 'e edge = node_id * node_id * 'e
-  
-!    type ('n,'e,'g) graph_methods = 
-         {  name            : string,
-            graph_info      : 'g,
-***************
-*** 66,69 ****
---- 65,69 ----
-            forall_edges    : ('e edge -> unit) -> unit
-         }
-+    datatype ('n,'e,'g) graph = GRAPH of ('n,'e,'g) graph_methods
-     val unimplemented : 'a -> 'b
-  
-diff -N -C 2 -r MLRISC/hppa/backpatch/hppaDelaySlotProps.sml MLRISC-mlton/hppa/backpatch/hppaDelaySlotProps.sml
-*** MLRISC/hppa/backpatch/hppaDelaySlotProps.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/backpatch/hppaDelaySlotProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 5,9 ****
-  functor HppaDelaySlots
-     (structure I : HPPAINSTR
-!     structure P : INSN_PROPERTIES where I = I
-     ) : DELAY_SLOT_PROPERTIES =
-  struct
---- 5,14 ----
-  functor HppaDelaySlots
-     (structure I : HPPAINSTR
-!     structure P : INSN_PROPERTIES (* where I = I *)
-!                   where type I.addressing_mode = I.addressing_mode
-!                     and type I.ea = I.ea
-!                     and type I.instr = I.instr
-!                     and type I.instruction = I.instruction
-!                     and type I.operand = I.operand
-     ) : DELAY_SLOT_PROPERTIES =
-  struct
-***************
-*** 101,109 ****
-          end
-  
-!     fun delaySlotCandidate{jmp,delaySlot=
-!              (  I.INSTR(I.BCOND _) | I.INSTR(I.BCONDI _) | I.INSTR(I.BB _) | I.INSTR(I.FBRANCH _) 
-!               | I.INSTR(I.BV _) | I.INSTR(I.BE _) | I.INSTR(I.COMCLR_LDO _) | I.INSTR(I.COMICLR_LDO _) 
-! 	      | I.INSTR(I.B _) | I.INSTR(I.LONGJUMP _) | I.INSTR(I.BLR _) | I.INSTR(I.BL _) 
-! 	      | I.INSTR(I.BLE _))} = false
-        | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
-             delaySlotCandidate{jmp=i,delaySlot=delaySlot}
---- 106,122 ----
-          end
-  
-!     fun delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BCOND _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BCONDI _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BB _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FBRANCH _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BV _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BE _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.COMCLR_LDO _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.COMICLR_LDO _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.B _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.LONGJUMP _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BLR _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BL _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BLE _)} = false
-        | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
-             delaySlotCandidate{jmp=i,delaySlot=delaySlot}
-diff -N -C 2 -r MLRISC/hppa/backpatch/hppaJumps.sml MLRISC-mlton/hppa/backpatch/hppaJumps.sml
-*** MLRISC/hppa/backpatch/hppaJumps.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/backpatch/hppaJumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,13 ****
-  functor HppaJumps
-    ( structure Instr:HPPAINSTR
-!     structure Shuffle:HPPASHUFFLE 
-! 			 where I = Instr
-!     structure MLTreeEval : MLTREE_EVAL 
-! 		         where T = Instr.T
-    ) : SDI_JUMPS =				
-  struct
---- 6,78 ----
-  functor HppaJumps
-    ( structure Instr:HPPAINSTR
-!     structure Shuffle:HPPASHUFFLE (* where I = Instr *)
-!                       where type I.Constant.const = Instr.Constant.const
-!                         and type I.Region.region = Instr.Region.region
-!                         and type I.T.Basis.cond = Instr.T.Basis.cond
-!                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                         and type I.T.Basis.ext = Instr.T.Basis.ext
-!                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                         and type I.T.ccexp = Instr.T.ccexp
-!                         and type I.T.fexp = Instr.T.fexp
-!                         (* and type I.T.labexp = Instr.T.labexp *)
-!                         and type I.T.mlrisc = Instr.T.mlrisc
-!                         and type I.T.oper = Instr.T.oper
-!                         and type I.T.rep = Instr.T.rep
-!                         and type I.T.rexp = Instr.T.rexp
-!                         and type I.T.stm = Instr.T.stm
-!                         and type I.addressing_mode = Instr.addressing_mode
-!                         and type I.arith = Instr.arith
-!                         and type I.arithi = Instr.arithi
-!                         and type I.bcond = Instr.bcond
-!                         and type I.bitcond = Instr.bitcond
-!                         and type I.cmp = Instr.cmp
-!                         and type I.cmpi = Instr.cmpi
-!                         and type I.ea = Instr.ea
-!                         and type I.farith = Instr.farith
-!                         and type I.fcnv = Instr.fcnv
-!                         and type I.fcond = Instr.fcond
-!                         and type I.field_selector = Instr.field_selector
-!                         and type I.fload = Instr.fload
-!                         and type I.floadx = Instr.floadx
-!                         and type I.fmt = Instr.fmt
-!                         and type I.fstore = Instr.fstore
-!                         and type I.fstorex = Instr.fstorex
-!                         and type I.funary = Instr.funary
-!                         and type I.instr = Instr.instr
-!                         and type I.instruction = Instr.instruction
-!                         and type I.load = Instr.load
-!                         and type I.loadi = Instr.loadi
-!                         and type I.operand = Instr.operand
-!                         and type I.scond = Instr.scond
-!                         and type I.shift = Instr.shift
-!                         and type I.shiftv = Instr.shiftv
-!                         and type I.store = Instr.store
-!     structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                            where type T.Basis.cond = Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = Instr.T.Basis.ext
-!                              and type T.Basis.fcond = Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = Instr.T.Region.region
-!                              and type T.ccexp = Instr.T.ccexp
-!                              and type T.fexp = Instr.T.fexp
-!                              (* and type T.labexp = Instr.T.labexp *)
-!                              and type T.mlrisc = Instr.T.mlrisc
-!                              and type T.oper = Instr.T.oper
-!                              and type T.rep = Instr.T.rep
-!                              and type T.rexp = Instr.T.rexp
-!                              and type T.stm = Instr.T.stm
-    ) : SDI_JUMPS =				
-  struct
-diff -N -C 2 -r MLRISC/hppa/emit/hppaAsm.sml MLRISC-mlton/hppa/emit/hppaAsm.sml
-*** MLRISC/hppa/emit/hppaAsm.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/emit/hppaAsm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,16 ****
-  
-  functor HppaAsmEmitter(structure S : INSTRUCTION_STREAM
-!                        structure Instr : HPPAINSTR
-!                           where T = S.P.T
-!                        structure Shuffle : HPPASHUFFLE
-!                           where I = Instr
-!                        structure MLTreeEval : MLTREE_EVAL
-!                           where T = Instr.T
-                        ) : INSTRUCTION_EMITTER =
-  struct
---- 7,100 ----
-  
-  functor HppaAsmEmitter(structure S : INSTRUCTION_STREAM
-!                        structure Instr : HPPAINSTR (* where T = S.P.T *)
-!                                          where type T.Basis.cond = S.P.T.Basis.cond
-!                                            and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                            and type T.Basis.ext = S.P.T.Basis.ext
-!                                            and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                            and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                            and type T.Constant.const = S.P.T.Constant.const
-!                                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                            and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                            and type T.Region.region = S.P.T.Region.region
-!                                            and type T.ccexp = S.P.T.ccexp
-!                                            and type T.fexp = S.P.T.fexp
-!                                            (* and type T.labexp = S.P.T.labexp *)
-!                                            and type T.mlrisc = S.P.T.mlrisc
-!                                            and type T.oper = S.P.T.oper
-!                                            and type T.rep = S.P.T.rep
-!                                            and type T.rexp = S.P.T.rexp
-!                                            and type T.stm = S.P.T.stm
-!                        structure Shuffle : HPPASHUFFLE (* where I = Instr *)
-!                                            where type I.Constant.const = Instr.Constant.const
-!                                              and type I.Region.region = Instr.Region.region
-!                                              and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                              and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                              and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                              and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                              and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                              and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                              and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                              and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                              and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                              and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                              and type I.T.ccexp = Instr.T.ccexp
-!                                              and type I.T.fexp = Instr.T.fexp
-!                                              (* and type I.T.labexp = Instr.T.labexp *)
-!                                              and type I.T.mlrisc = Instr.T.mlrisc
-!                                              and type I.T.oper = Instr.T.oper
-!                                              and type I.T.rep = Instr.T.rep
-!                                              and type I.T.rexp = Instr.T.rexp
-!                                              and type I.T.stm = Instr.T.stm
-!                                              and type I.addressing_mode = Instr.addressing_mode
-!                                              and type I.arith = Instr.arith
-!                                              and type I.arithi = Instr.arithi
-!                                              and type I.bcond = Instr.bcond
-!                                              and type I.bitcond = Instr.bitcond
-!                                              and type I.cmp = Instr.cmp
-!                                              and type I.cmpi = Instr.cmpi
-!                                              and type I.ea = Instr.ea
-!                                              and type I.farith = Instr.farith
-!                                              and type I.fcnv = Instr.fcnv
-!                                              and type I.fcond = Instr.fcond
-!                                              and type I.field_selector = Instr.field_selector
-!                                              and type I.fload = Instr.fload
-!                                              and type I.floadx = Instr.floadx
-!                                              and type I.fmt = Instr.fmt
-!                                              and type I.fstore = Instr.fstore
-!                                              and type I.fstorex = Instr.fstorex
-!                                              and type I.funary = Instr.funary
-!                                              and type I.instr = Instr.instr
-!                                              and type I.instruction = Instr.instruction
-!                                              and type I.load = Instr.load
-!                                              and type I.loadi = Instr.loadi
-!                                              and type I.operand = Instr.operand
-!                                              and type I.scond = Instr.scond
-!                                              and type I.shift = Instr.shift
-!                                              and type I.shiftv = Instr.shiftv
-!                                              and type I.store = Instr.store
-!                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                               where type T.Basis.cond = Instr.T.Basis.cond
-!                                                 and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                 and type T.Basis.ext = Instr.T.Basis.ext
-!                                                 and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                 and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                 and type T.Constant.const = Instr.T.Constant.const
-!                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                 and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                 and type T.Region.region = Instr.T.Region.region
-!                                                 and type T.ccexp = Instr.T.ccexp
-!                                                 and type T.fexp = Instr.T.fexp
-!                                                 (* and type T.labexp = Instr.T.labexp *)
-!                                                 and type T.mlrisc = Instr.T.mlrisc
-!                                                 and type T.oper = Instr.T.oper
-!                                                 and type T.rep = Instr.T.rep
-!                                                 and type T.rexp = Instr.T.rexp
-!                                                 and type T.stm = Instr.T.stm
-                        ) : INSTRUCTION_EMITTER =
-  struct
-diff -N -C 2 -r MLRISC/hppa/emit/hppaMC.sml MLRISC-mlton/hppa/emit/hppaMC.sml
-*** MLRISC/hppa/emit/hppaMC.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/emit/hppaMC.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,11 ****
-  
-  functor HppaMCEmitter(structure Instr : HPPAINSTR
-!                       structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-                        structure Stream : INSTRUCTION_STREAM 
-                        structure CodeString : CODE_STRING
---- 7,31 ----
-  
-  functor HppaMCEmitter(structure Instr : HPPAINSTR
-!                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                              where type T.Basis.cond = Instr.T.Basis.cond
-!                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                and type T.Basis.ext = Instr.T.Basis.ext
-!                                                and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                and type T.Constant.const = Instr.T.Constant.const
-!                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                and type T.Region.region = Instr.T.Region.region
-!                                                and type T.ccexp = Instr.T.ccexp
-!                                                and type T.fexp = Instr.T.fexp
-!                                                (* and type T.labexp = Instr.T.labexp *)
-!                                                and type T.mlrisc = Instr.T.mlrisc
-!                                                and type T.oper = Instr.T.oper
-!                                                and type T.rep = Instr.T.rep
-!                                                and type T.rexp = Instr.T.rexp
-!                                                and type T.stm = Instr.T.stm
-                        structure Stream : INSTRUCTION_STREAM 
-                        structure CodeString : CODE_STRING
-***************
-*** 48,51 ****
---- 68,72 ----
-         fun eByteW w =
-         let val i = !loc
-+            val w = W.toLargeWord w
-         in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
-     
-diff -N -C 2 -r MLRISC/hppa/flowgraph/hppaGasPseudoOps.sml MLRISC-mlton/hppa/flowgraph/hppaGasPseudoOps.sml
-*** MLRISC/hppa/flowgraph/hppaGasPseudoOps.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/flowgraph/hppaGasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  functor HppaGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL  where T = T
-      ) : PSEUDO_OPS_BASIS = 
-  
---- 1,25 ----
-  functor HppaGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-      ) : PSEUDO_OPS_BASIS = 
-  
-diff -N -C 2 -r MLRISC/hppa/instructions/hppaInstr.sml MLRISC-mlton/hppa/instructions/hppaInstr.sml
-*** MLRISC/hppa/instructions/hppaInstr.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/instructions/hppaInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : HPPACELLS
-!    structure CB : CELLS_BASIS = CellsBasis
-     structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : HPPACELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     structure T : MLTREE
-     structure Constant: CONSTANT
-diff -N -C 2 -r MLRISC/hppa/instructions/hppaProps.sml MLRISC-mlton/hppa/instructions/hppaProps.sml
-*** MLRISC/hppa/instructions/hppaProps.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/instructions/hppaProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,12 ****
-  functor HppaProps
-     ( structure HppaInstr : HPPAINSTR
-!      structure MLTreeEval : MLTREE_EVAL where T = HppaInstr.T
-!      structure MLTreeHash : MLTREE_HASH where T = HppaInstr.T
-      ) : INSN_PROPERTIES = 
-  struct
---- 7,52 ----
-  functor HppaProps
-     ( structure HppaInstr : HPPAINSTR
-!      structure MLTreeEval : MLTREE_EVAL (* where T = HppaInstr.T *)
-!                             where type T.Basis.cond = HppaInstr.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = HppaInstr.T.Basis.ext
-!                               and type T.Basis.fcond = HppaInstr.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
-!                               and type T.Constant.const = HppaInstr.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
-!                               and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
-!                               and type T.Region.region = HppaInstr.T.Region.region
-!                               and type T.ccexp = HppaInstr.T.ccexp
-!                               and type T.fexp = HppaInstr.T.fexp
-!                               (* and type T.labexp = HppaInstr.T.labexp *)
-!                               and type T.mlrisc = HppaInstr.T.mlrisc
-!                               and type T.oper = HppaInstr.T.oper
-!                               and type T.rep = HppaInstr.T.rep
-!                               and type T.rexp = HppaInstr.T.rexp
-!                               and type T.stm = HppaInstr.T.stm
-!      structure MLTreeHash : MLTREE_HASH (* where T = HppaInstr.T *)
-!                             where type T.Basis.cond = HppaInstr.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = HppaInstr.T.Basis.ext
-!                               and type T.Basis.fcond = HppaInstr.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
-!                               and type T.Constant.const = HppaInstr.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
-!                               and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
-!                               and type T.Region.region = HppaInstr.T.Region.region
-!                               and type T.ccexp = HppaInstr.T.ccexp
-!                               and type T.fexp = HppaInstr.T.fexp
-!                               (* and type T.labexp = HppaInstr.T.labexp *)
-!                               and type T.mlrisc = HppaInstr.T.mlrisc
-!                               and type T.oper = HppaInstr.T.oper
-!                               and type T.rep = HppaInstr.T.rep
-!                               and type T.rexp = HppaInstr.T.rexp
-!                               and type T.stm = HppaInstr.T.stm
-      ) : INSN_PROPERTIES = 
-  struct
-***************
-*** 207,213 ****
-    fun defUseR instr = let
-      fun hppaDU instr = let
-!       fun trap((I.ADDO | I.SUBO | I.SH1ADDO), d, u) = (d, u)
-  	| trap(_, d, u) = (d, u)
-!       fun trapi((I.ADDIO | I.SUBIO), d, u) = (d, u)
-  	| trapi(_, d, u) = (d, u)
-      in
---- 247,256 ----
-    fun defUseR instr = let
-      fun hppaDU instr = let
-!       fun trap(I.ADDO, d, u) = (d, u)
-!         | trap(I.SUBO, d, u) = (d, u)
-!         | trap(I.SH1ADDO, d, u) = (d, u)
-  	| trap(_, d, u) = (d, u)
-!       fun trapi(I.ADDIO, d, u) = (d, u)
-!         | trapi(I.SUBIO, d, u) = (d, u)
-  	| trapi(_, d, u) = (d, u)
-      in
-diff -N -C 2 -r MLRISC/hppa/mltree/hppa.sml MLRISC-mlton/hppa/mltree/hppa.sml
-*** MLRISC/hppa/mltree/hppa.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/mltree/hppa.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 15,26 ****
-  functor Hppa
-    (structure HppaInstr : HPPAINSTR
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP
-!       		where I = HppaInstr 
-! 		  and T = HppaInstr.T
-!    structure MilliCode : HPPA_MILLICODE
-!       		where I = HppaInstr
-!    structure LabelComp : LABEL_COMP 
-!    		where I = HppaInstr  
-! 		  and T = HppaInstr.T
-     val costOfMultiply : int ref
-     val costOfDivision : int ref
---- 15,118 ----
-  functor Hppa
-    (structure HppaInstr : HPPAINSTR
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = HppaInstr and T = HppaInstr.T *)
-!                              where type I.addressing_mode = HppaInstr.addressing_mode
-!                                and type I.ea = HppaInstr.ea
-!                                and type I.instr = HppaInstr.instr
-!                                and type I.instruction = HppaInstr.instruction
-!                                and type I.operand = HppaInstr.operand
-!                              where type T.Basis.cond = HppaInstr.T.Basis.cond
-!                                and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
-!                                and type T.Basis.ext = HppaInstr.T.Basis.ext
-!                                and type T.Basis.fcond = HppaInstr.T.Basis.fcond
-!                                and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
-!                                and type T.Constant.const = HppaInstr.T.Constant.const
-!                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
-!                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
-!                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
-!                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
-!                                and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
-!                                and type T.Region.region = HppaInstr.T.Region.region
-!                                and type T.ccexp = HppaInstr.T.ccexp
-!                                and type T.fexp = HppaInstr.T.fexp
-!                                (* and type T.labexp = HppaInstr.T.labexp *)
-!                                and type T.mlrisc = HppaInstr.T.mlrisc
-!                                and type T.oper = HppaInstr.T.oper
-!                                and type T.rep = HppaInstr.T.rep
-!                                and type T.rexp = HppaInstr.T.rexp
-!                                and type T.stm = HppaInstr.T.stm
-!    structure MilliCode : HPPA_MILLICODE (* where I = HppaInstr *)
-!                          where type I.Constant.const = HppaInstr.Constant.const
-!                            and type I.Region.region = HppaInstr.Region.region
-!                            and type I.T.Basis.cond = HppaInstr.T.Basis.cond
-!                            and type I.T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
-!                            and type I.T.Basis.ext = HppaInstr.T.Basis.ext
-!                            and type I.T.Basis.fcond = HppaInstr.T.Basis.fcond
-!                            and type I.T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
-!                            and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
-!                            and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
-!                            and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
-!                            and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
-!                            and type I.T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
-!                            and type I.T.ccexp = HppaInstr.T.ccexp
-!                            and type I.T.fexp = HppaInstr.T.fexp
-!                            (* and type I.T.labexp = HppaInstr.T.labexp *)
-!                            and type I.T.mlrisc = HppaInstr.T.mlrisc
-!                            and type I.T.oper = HppaInstr.T.oper
-!                            and type I.T.rep = HppaInstr.T.rep
-!                            and type I.T.rexp = HppaInstr.T.rexp
-!                            and type I.T.stm = HppaInstr.T.stm
-!                            and type I.addressing_mode = HppaInstr.addressing_mode
-!                            and type I.arith = HppaInstr.arith
-!                            and type I.arithi = HppaInstr.arithi
-!                            and type I.bcond = HppaInstr.bcond
-!                            and type I.bitcond = HppaInstr.bitcond
-!                            and type I.cmp = HppaInstr.cmp
-!                            and type I.cmpi = HppaInstr.cmpi
-!                            and type I.ea = HppaInstr.ea
-!                            and type I.farith = HppaInstr.farith
-!                            and type I.fcnv = HppaInstr.fcnv
-!                            and type I.fcond = HppaInstr.fcond
-!                            and type I.field_selector = HppaInstr.field_selector
-!                            and type I.fload = HppaInstr.fload
-!                            and type I.floadx = HppaInstr.floadx
-!                            and type I.fmt = HppaInstr.fmt
-!                            and type I.fstore = HppaInstr.fstore
-!                            and type I.fstorex = HppaInstr.fstorex
-!                            and type I.funary = HppaInstr.funary
-!                            and type I.instr = HppaInstr.instr
-!                            and type I.instruction = HppaInstr.instruction
-!                            and type I.load = HppaInstr.load
-!                            and type I.loadi = HppaInstr.loadi
-!                            and type I.operand = HppaInstr.operand
-!                            and type I.scond = HppaInstr.scond
-!                            and type I.shift = HppaInstr.shift
-!                            and type I.shiftv = HppaInstr.shiftv
-!                            and type I.store = HppaInstr.store
-!    structure LabelComp : LABEL_COMP (* where I = HppaInstr and T = HppaInstr.T *)
-!                          where type I.addressing_mode = HppaInstr.addressing_mode
-!                            and type I.ea = HppaInstr.ea
-!                            and type I.instr = HppaInstr.instr
-!                            and type I.instruction = HppaInstr.instruction
-!                            and type I.operand = HppaInstr.operand
-!                          where type T.Basis.cond = HppaInstr.T.Basis.cond
-!                            and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
-!                            and type T.Basis.ext = HppaInstr.T.Basis.ext
-!                            and type T.Basis.fcond = HppaInstr.T.Basis.fcond
-!                            and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
-!                            and type T.Constant.const = HppaInstr.T.Constant.const
-!                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
-!                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
-!                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
-!                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
-!                            and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
-!                            and type T.Region.region = HppaInstr.T.Region.region
-!                            and type T.ccexp = HppaInstr.T.ccexp
-!                            and type T.fexp = HppaInstr.T.fexp
-!                            (* and type T.labexp = HppaInstr.T.labexp *)
-!                            and type T.mlrisc = HppaInstr.T.mlrisc
-!                            and type T.oper = HppaInstr.T.oper
-!                            and type T.rep = HppaInstr.T.rep
-!                            and type T.rexp = HppaInstr.T.rexp
-!                            and type T.stm = HppaInstr.T.stm
-     val costOfMultiply : int ref
-     val costOfDivision : int ref
-***************
-*** 53,57 ****
-         I.COPY{k=CB.FP, sz=64, dst=dst, src=src, tmp=tmp}
-     structure W = Word32
-!    functor Multiply32 = MLTreeMult
-      (structure I = I
-       structure T = T
---- 145,151 ----
-         I.COPY{k=CB.FP, sz=64, dst=dst, src=src, tmp=tmp}
-     structure W = Word32
-! 
-!    (* signed, trapping version of multiply and divide *)
-!    structure Mult32 = MLTreeMult
-      (structure I = I
-       structure T = T
-***************
-*** 66,74 ****
-       fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
-       fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
-!     )
-! 
-!    (* signed, trapping version of multiply and divide *)
-!    structure Mult32 = Multiply32
-!     (val trapping = true
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
---- 160,165 ----
-       fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
-       fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
-!      
-!      val trapping = true
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
-***************
-*** 78,87 ****
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDO,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDO,r1=r1,r2=r2,t=d}])
-!     )
-!     (val signed = true)
-  
-     (* unsigned, non-trapping version of multiply and divide *)
-!    structure Mulu32 = Multiply32
-!     (val trapping = false
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
---- 169,191 ----
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDO,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDO,r1=r1,r2=r2,t=d}])
-!      
-!      val signed = true)
-  
-     (* unsigned, non-trapping version of multiply and divide *)
-!    structure Mulu32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CB
-!      val intTy = 32
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-! 
-!      fun mov{r,d} = mkcopy{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r1=r1,r2=r2,t=d}
-!      fun slli{r,i,d} = [I.shift{s=I.ZDEP,r=r,p=31-i,len=32-i,t=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
-!      
-!      val trapping = false
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
-***************
-*** 91,100 ****
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
-!     )
-!     (val signed   = false)
-  
-     (* signed, non-trapping version of multiply and divide *)
-!    structure Muls32 = Multiply32
-!     (val trapping = false
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
---- 195,217 ----
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
-!      
-!      val signed   = false)
-  
-     (* signed, non-trapping version of multiply and divide *)
-!    structure Muls32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CB
-!      val intTy = 32
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-! 
-!      fun mov{r,d} = mkcopy{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r1=r1,r2=r2,t=d}
-!      fun slli{r,i,d} = [I.shift{s=I.ZDEP,r=r,p=31-i,len=32-i,t=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
-!      
-!      val trapping = false
-       val multCost = costOfMultiply
-       val divCost  = costOfDivision
-***************
-*** 104,109 ****
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
-!     )
-!     (val signed   = true)
-  
-     fun error msg = MLRiscErrorMsg.error("Hppa",msg)
---- 221,226 ----
-       val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
-       val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
-!      
-!      val signed   = true)
-  
-     fun error msg = MLRiscErrorMsg.error("Hppa",msg)
-diff -N -C 2 -r MLRISC/hppa/mltree/hppaMillicode.sig MLRISC-mlton/hppa/mltree/hppaMillicode.sig
-*** MLRISC/hppa/mltree/hppaMillicode.sig	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/hppa/mltree/hppaMillicode.sig	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  signature HPPA_MILLICODE = sig
-    structure I : HPPAINSTR
-!   structure CB : CELLS_BASIS =  CellsBasis
-  
-    val divu : {rs:CB.cell, rt:CB.cell, rd:CB.cell} -> I.instruction list
---- 1,14 ----
-  signature HPPA_MILLICODE = sig
-    structure I : HPPAINSTR
-!   structure CB : CELLS_BASIS (* = CellsBasis *)
-!                  where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                    and type cell = CellsBasis.cell
-!                    and type cellColor = CellsBasis.cellColor
-!                    and type cellkind = CellsBasis.cellkind
-!                    and type cellkindDesc = CellsBasis.cellkindDesc
-!                    and type cellkindInfo = CellsBasis.cellkindInfo
-  
-    val divu : {rs:CB.cell, rt:CB.cell, rd:CB.cell} -> I.instruction list
-diff -N -C 2 -r MLRISC/instructions/insnProps.sig MLRISC-mlton/instructions/insnProps.sig
-*** MLRISC/instructions/insnProps.sig	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/instructions/insnProps.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 8,12 ****
-     structure I : INSTRUCTIONS
-     structure C : CELLS
-!      sharing I.C = C
-  
-        (* classify instructions *)
---- 8,12 ----
-     structure I : INSTRUCTIONS
-     structure C : CELLS
-!      (* sharing I.C = C *)
-  
-        (* classify instructions *)
-diff -N -C 2 -r MLRISC/instructions/instructions.sig MLRISC-mlton/instructions/instructions.sig
-*** MLRISC/instructions/instructions.sig	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/instructions/instructions.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C   : CELLS
-!    structure CB  :CELLS_BASIS = CellsBasis
-     type operand             (* operands supported by architecture *)
-     type addressing_mode                        (* addressing mode *)
---- 9,22 ----
-  sig
-     structure C   : CELLS
-!    structure CB  : CELLS_BASIS (* = CellsBasis *)
-!                    where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                      and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                      and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                      and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                      and type cell = CellsBasis.cell
-!                      and type cellColor = CellsBasis.cellColor
-!                      and type cellkind = CellsBasis.cellkind
-!                      and type cellkindDesc = CellsBasis.cellkindDesc
-!                      and type cellkindInfo = CellsBasis.cellkindInfo
-     type operand             (* operands supported by architecture *)
-     type addressing_mode                        (* addressing mode *)
-diff -N -C 2 -r MLRISC/instructions/mlriscAnnotations.sig MLRISC-mlton/instructions/mlriscAnnotations.sig
-*** MLRISC/instructions/mlriscAnnotations.sig	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/instructions/mlriscAnnotations.sig	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 16,20 ****
-  sig
-  
-!     structure C : CELLS_BASIS = CellsBasis
-  
-      (* 
---- 16,29 ----
-  sig
-  
-!     structure C : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-  
-      (* 
-diff -N -C 2 -r MLRISC/library/dynamic-array.sml MLRISC-mlton/library/dynamic-array.sml
-*** MLRISC/library/dynamic-array.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/library/dynamic-array.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 6,10 ****
-  
-  structure DynArray : 
-!   sig include ARRAY
-        val fromArray : 'a Array.array * 'a * int -> 'a array
-        val baseArray : 'a array -> 'a Array.array
---- 6,36 ----
-  
-  structure DynArray : 
-!   sig type 'a array
-!       type 'a vector
-! 
-!       val all: ('a -> bool) -> 'a array -> bool
-!       val app: ('a -> unit) -> 'a array -> unit 
-!       val appi: (int * 'a -> unit) -> 'a array -> unit 
-!       val array: int * 'a -> 'a array 
-!       val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
-!       val copy: {src: 'a array, dst: 'a array, di: int} -> unit 
-!       val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit 
-!       val exists: ('a -> bool) -> 'a array -> bool
-!       val find: ('a -> bool) -> 'a array -> 'a option
-!       val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
-!       val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!       val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!       val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!       val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!       val fromList: 'a list -> 'a array 
-!       val length: 'a array -> int 
-!       val maxLen: int 
-!       val modify: ('a -> 'a) -> 'a array -> unit 
-!       val modifyi: (int * 'a -> 'a) -> 'a array -> unit 
-!       val sub: 'a array * int -> 'a 
-!       val tabulate: int * (int -> 'a) -> 'a array 
-!       val update: 'a array * int * 'a -> unit 
-!       val vector: 'a array -> 'a vector
-! 
-        val fromArray : 'a Array.array * 'a * int -> 'a array
-        val baseArray : 'a array -> 'a Array.array
-diff -N -C 2 -r MLRISC/library/hash-array.sml MLRISC-mlton/library/hash-array.sml
-*** MLRISC/library/hash-array.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/library/hash-array.sml	2009-10-02 09:51:25.000000000 -0400
-***************
-*** 6,10 ****
-  
-  structure HashArray : 
-!      sig include ARRAY
-           val array' : int * (int -> 'a) -> 'a array
-           val array'': int * (int -> 'a) -> 'a array
---- 6,36 ----
-  
-  structure HashArray : 
-!      sig type 'a array
-!          type 'a vector
-! 
-!          val all: ('a -> bool) -> 'a array -> bool
-!          val app: ('a -> unit) -> 'a array -> unit 
-!          val appi: (int * 'a -> unit) -> 'a array -> unit 
-!          val array: int * 'a -> 'a array 
-!          val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
-!          val copy: {src: 'a array, dst: 'a array, di: int} -> unit 
-!          val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit 
-!          val exists: ('a -> bool) -> 'a array -> bool
-!          val find: ('a -> bool) -> 'a array -> 'a option
-!          val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
-!          val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!          val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!          val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b 
-!          val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
-!          val fromList: 'a list -> 'a array 
-!          val length: 'a array -> int 
-!          val maxLen: int 
-!          val modify: ('a -> 'a) -> 'a array -> unit 
-!          val modifyi: (int * 'a -> 'a) -> 'a array -> unit 
-!          val sub: 'a array * int -> 'a 
-!          val tabulate: int * (int -> 'a) -> 'a array 
-!          val update: 'a array * int * 'a -> unit 
-!          val vector: 'a array -> 'a vector
-! 
-           val array' : int * (int -> 'a) -> 'a array
-           val array'': int * (int -> 'a) -> 'a array
-diff -N -C 2 -r MLRISC/mlb/ALPHA.mlb MLRISC-mlton/mlb/ALPHA.mlb
-*** MLRISC/mlb/ALPHA.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/ALPHA.mlb	2010-04-02 16:08:55.000000000 -0400
-***************
-*** 0 ****
---- 1,474 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l42 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l136 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l50 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l9 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = FREQUENCY_PROPERTIES
+    structure Constant: CONSTANT
+    structure Region : REGION
+diff --git a/hppa/instructions/hppaProps.sml b/hppa/instructions/hppaProps.sml
+index df9b170..50d9210 100644
+--- a/hppa/instructions/hppaProps.sml
++++ b/hppa/instructions/hppaProps.sml
+@@ -6,8 +6,48 @@
+ 
+ functor HppaProps
+    ( structure HppaInstr : HPPAINSTR
+-     structure MLTreeEval : MLTREE_EVAL where T = HppaInstr.T
+-     structure MLTreeHash : MLTREE_HASH where T = HppaInstr.T
++     structure MLTreeEval : MLTREE_EVAL (* where T = HppaInstr.T *)
++                            where type T.Basis.cond = HppaInstr.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = HppaInstr.T.Basis.ext
++                              and type T.Basis.fcond = HppaInstr.T.Basis.fcond
++                              and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
++                              and type T.Constant.const = HppaInstr.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
++                              and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
++                              and type T.Region.region = HppaInstr.T.Region.region
++                              and type T.ccexp = HppaInstr.T.ccexp
++                              and type T.fexp = HppaInstr.T.fexp
++                              (* and type T.labexp = HppaInstr.T.labexp *)
++                              and type T.mlrisc = HppaInstr.T.mlrisc
++                              and type T.oper = HppaInstr.T.oper
++                              and type T.rep = HppaInstr.T.rep
++                              and type T.rexp = HppaInstr.T.rexp
++                              and type T.stm = HppaInstr.T.stm
++     structure MLTreeHash : MLTREE_HASH (* where T = HppaInstr.T *)
++                            where type T.Basis.cond = HppaInstr.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = HppaInstr.T.Basis.ext
++                              and type T.Basis.fcond = HppaInstr.T.Basis.fcond
++                              and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
++                              and type T.Constant.const = HppaInstr.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
++                              and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
++                              and type T.Region.region = HppaInstr.T.Region.region
++                              and type T.ccexp = HppaInstr.T.ccexp
++                              and type T.fexp = HppaInstr.T.fexp
++                              (* and type T.labexp = HppaInstr.T.labexp *)
++                              and type T.mlrisc = HppaInstr.T.mlrisc
++                              and type T.oper = HppaInstr.T.oper
++                              and type T.rep = HppaInstr.T.rep
++                              and type T.rexp = HppaInstr.T.rexp
++                              and type T.stm = HppaInstr.T.stm
+     ) : INSN_PROPERTIES = 
+ struct
+   structure I = HppaInstr
+@@ -206,9 +246,12 @@ struct
+    *========================================================================*)
+   fun defUseR instr = let
+     fun hppaDU instr = let
+-      fun trap((I.ADDO | I.SUBO | I.SH1ADDO), d, u) = (d, u)
++      fun trap(I.ADDO, d, u) = (d, u)
++        | trap(I.SUBO, d, u) = (d, u)
++        | trap(I.SH1ADDO, d, u) = (d, u)
+ 	| trap(_, d, u) = (d, u)
+-      fun trapi((I.ADDIO | I.SUBIO), d, u) = (d, u)
++      fun trapi(I.ADDIO, d, u) = (d, u)
++        | trapi(I.SUBIO, d, u) = (d, u)
+ 	| trapi(_, d, u) = (d, u)
+     in
+       case instr
+diff --git a/hppa/mltree/hppa.sml b/hppa/mltree/hppa.sml
+index 50a58b4..0a340c8 100644
+--- a/hppa/mltree/hppa.sml
++++ b/hppa/mltree/hppa.sml
+@@ -14,14 +14,106 @@
+ 
+ functor Hppa
+   (structure HppaInstr : HPPAINSTR
+-   structure ExtensionComp : MLTREE_EXTENSION_COMP
+-      		where I = HppaInstr 
+-		  and T = HppaInstr.T
+-   structure MilliCode : HPPA_MILLICODE
+-      		where I = HppaInstr
+-   structure LabelComp : LABEL_COMP 
+-   		where I = HppaInstr  
+-		  and T = HppaInstr.T
++   structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = HppaInstr and T = HppaInstr.T *)
++                             where type I.addressing_mode = HppaInstr.addressing_mode
++                               and type I.ea = HppaInstr.ea
++                               and type I.instr = HppaInstr.instr
++                               and type I.instruction = HppaInstr.instruction
++                               and type I.operand = HppaInstr.operand
++                             where type T.Basis.cond = HppaInstr.T.Basis.cond
++                               and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
++                               and type T.Basis.ext = HppaInstr.T.Basis.ext
++                               and type T.Basis.fcond = HppaInstr.T.Basis.fcond
++                               and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
++                               and type T.Constant.const = HppaInstr.T.Constant.const
++                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
++                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
++                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
++                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
++                               and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
++                               and type T.Region.region = HppaInstr.T.Region.region
++                               and type T.ccexp = HppaInstr.T.ccexp
++                               and type T.fexp = HppaInstr.T.fexp
++                               (* and type T.labexp = HppaInstr.T.labexp *)
++                               and type T.mlrisc = HppaInstr.T.mlrisc
++                               and type T.oper = HppaInstr.T.oper
++                               and type T.rep = HppaInstr.T.rep
++                               and type T.rexp = HppaInstr.T.rexp
++                               and type T.stm = HppaInstr.T.stm
++   structure MilliCode : HPPA_MILLICODE (* where I = HppaInstr *)
++                         where type I.Constant.const = HppaInstr.Constant.const
++                           and type I.Region.region = HppaInstr.Region.region
++                           and type I.T.Basis.cond = HppaInstr.T.Basis.cond
++                           and type I.T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
++                           and type I.T.Basis.ext = HppaInstr.T.Basis.ext
++                           and type I.T.Basis.fcond = HppaInstr.T.Basis.fcond
++                           and type I.T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
++                           and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
++                           and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
++                           and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
++                           and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
++                           and type I.T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
++                           and type I.T.ccexp = HppaInstr.T.ccexp
++                           and type I.T.fexp = HppaInstr.T.fexp
++                           (* and type I.T.labexp = HppaInstr.T.labexp *)
++                           and type I.T.mlrisc = HppaInstr.T.mlrisc
++                           and type I.T.oper = HppaInstr.T.oper
++                           and type I.T.rep = HppaInstr.T.rep
++                           and type I.T.rexp = HppaInstr.T.rexp
++                           and type I.T.stm = HppaInstr.T.stm
++                           and type I.addressing_mode = HppaInstr.addressing_mode
++                           and type I.arith = HppaInstr.arith
++                           and type I.arithi = HppaInstr.arithi
++                           and type I.bcond = HppaInstr.bcond
++                           and type I.bitcond = HppaInstr.bitcond
++                           and type I.cmp = HppaInstr.cmp
++                           and type I.cmpi = HppaInstr.cmpi
++                           and type I.ea = HppaInstr.ea
++                           and type I.farith = HppaInstr.farith
++                           and type I.fcnv = HppaInstr.fcnv
++                           and type I.fcond = HppaInstr.fcond
++                           and type I.field_selector = HppaInstr.field_selector
++                           and type I.fload = HppaInstr.fload
++                           and type I.floadx = HppaInstr.floadx
++                           and type I.fmt = HppaInstr.fmt
++                           and type I.fstore = HppaInstr.fstore
++                           and type I.fstorex = HppaInstr.fstorex
++                           and type I.funary = HppaInstr.funary
++                           and type I.instr = HppaInstr.instr
++                           and type I.instruction = HppaInstr.instruction
++                           and type I.load = HppaInstr.load
++                           and type I.loadi = HppaInstr.loadi
++                           and type I.operand = HppaInstr.operand
++                           and type I.scond = HppaInstr.scond
++                           and type I.shift = HppaInstr.shift
++                           and type I.shiftv = HppaInstr.shiftv
++                           and type I.store = HppaInstr.store
++   structure LabelComp : LABEL_COMP (* where I = HppaInstr and T = HppaInstr.T *)
++                         where type I.addressing_mode = HppaInstr.addressing_mode
++                           and type I.ea = HppaInstr.ea
++                           and type I.instr = HppaInstr.instr
++                           and type I.instruction = HppaInstr.instruction
++                           and type I.operand = HppaInstr.operand
++                         where type T.Basis.cond = HppaInstr.T.Basis.cond
++                           and type T.Basis.div_rounding_mode = HppaInstr.T.Basis.div_rounding_mode
++                           and type T.Basis.ext = HppaInstr.T.Basis.ext
++                           and type T.Basis.fcond = HppaInstr.T.Basis.fcond
++                           and type T.Basis.rounding_mode = HppaInstr.T.Basis.rounding_mode
++                           and type T.Constant.const = HppaInstr.T.Constant.const
++                           and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) HppaInstr.T.Extension.ccx
++                           and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) HppaInstr.T.Extension.fx
++                           and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) HppaInstr.T.Extension.rx
++                           and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) HppaInstr.T.Extension.sx
++                           and type T.I.div_rounding_mode = HppaInstr.T.I.div_rounding_mode
++                           and type T.Region.region = HppaInstr.T.Region.region
++                           and type T.ccexp = HppaInstr.T.ccexp
++                           and type T.fexp = HppaInstr.T.fexp
++                           (* and type T.labexp = HppaInstr.T.labexp *)
++                           and type T.mlrisc = HppaInstr.T.mlrisc
++                           and type T.oper = HppaInstr.T.oper
++                           and type T.rep = HppaInstr.T.rep
++                           and type T.rexp = HppaInstr.T.rexp
++                           and type T.stm = HppaInstr.T.stm
+    val costOfMultiply : int ref
+    val costOfDivision : int ref
+   ) : MLTREECOMP =
+@@ -52,7 +144,9 @@ struct
+    fun mkfcopy{dst, src, tmp} =
+        I.COPY{k=CB.FP, sz=64, dst=dst, src=src, tmp=tmp}
+    structure W = Word32
+-   functor Multiply32 = MLTreeMult
++
++   (* signed, trapping version of multiply and divide *)
++   structure Mult32 = MLTreeMult
+     (structure I = I
+      structure T = T
+      structure CB = CB
+@@ -65,11 +159,8 @@ struct
+      fun slli{r,i,d} = [I.shift{s=I.ZDEP,r=r,p=31-i,len=32-i,t=d}]
+      fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
+      fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
+-    )
+ 
+-   (* signed, trapping version of multiply and divide *)
+-   structure Mult32 = Multiply32
+-    (val trapping = true
++     val trapping = true
+      val multCost = costOfMultiply
+      val divCost  = costOfDivision
+      fun addv{r1,r2,d} = [I.arith{a=I.ADDO,r1=r1,r2=r2,t=d}]
+@@ -77,12 +168,25 @@ struct
+      val sh1addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH1ADDO,r1=r1,r2=r2,t=d}])
+      val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDO,r1=r1,r2=r2,t=d}])
+      val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDO,r1=r1,r2=r2,t=d}])
+-    )
+-    (val signed = true)
++     
++     val signed = true)
+ 
+    (* unsigned, non-trapping version of multiply and divide *)
+-   structure Mulu32 = Multiply32
+-    (val trapping = false
++   structure Mulu32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CB
++     val intTy = 32
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++
++     fun mov{r,d} = mkcopy{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r1=r1,r2=r2,t=d}
++     fun slli{r,i,d} = [I.shift{s=I.ZDEP,r=r,p=31-i,len=32-i,t=d}]
++     fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
++     fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
++     
++     val trapping = false
+      val multCost = costOfMultiply
+      val divCost  = costOfDivision
+      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r1=r1,r2=r2,t=d}]
+@@ -90,12 +194,25 @@ struct
+      val sh1addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH1ADDL,r1=r1,r2=r2,t=d}])
+      val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
+      val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
+-    )
+-    (val signed   = false)
++     
++     val signed   = false)
+ 
+    (* signed, non-trapping version of multiply and divide *)
+-   structure Muls32 = Multiply32
+-    (val trapping = false
++   structure Muls32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CB
++     val intTy = 32
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++
++     fun mov{r,d} = mkcopy{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r1=r1,r2=r2,t=d}
++     fun slli{r,i,d} = [I.shift{s=I.ZDEP,r=r,p=31-i,len=32-i,t=d}]
++     fun srli{r,i,d} = [I.shift{s=I.EXTRU,r=r,p=31-i,len=32-i,t=d}]
++     fun srai{r,i,d} = [I.shift{s=I.EXTRS,r=r,p=31-i,len=32-i,t=d}]
++     
++     val trapping = false
+      val multCost = costOfMultiply
+      val divCost  = costOfDivision
+      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r1=r1,r2=r2,t=d}]
+@@ -103,8 +220,8 @@ struct
+      val sh1addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH1ADDL,r1=r1,r2=r2,t=d}])
+      val sh2addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH2ADDL,r1=r1,r2=r2,t=d}])
+      val sh3addv = SOME(fn{r1,r2,d} => [I.arith{a=I.SH3ADDL,r1=r1,r2=r2,t=d}])
+-    )
+-    (val signed   = true)
++     
++     val signed   = true)
+ 
+    fun error msg = MLRiscErrorMsg.error("Hppa",msg)
+ 
+diff --git a/hppa/mltree/hppaMillicode.sig b/hppa/mltree/hppaMillicode.sig
+index 936dd90..d801996 100644
+--- a/hppa/mltree/hppaMillicode.sig
++++ b/hppa/mltree/hppaMillicode.sig
+@@ -1,6 +1,15 @@
+ signature HPPA_MILLICODE = sig
+   structure I : HPPAINSTR
+-  structure CB : CELLS_BASIS =  CellsBasis
++  structure CB : CELLS_BASIS (* = CellsBasis *)
++                 where type CellSet.cellset = CellsBasis.CellSet.cellset
++                   and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                   and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                   and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                   and type cell = CellsBasis.cell
++                   and type cellColor = CellsBasis.cellColor
++                   and type cellkind = CellsBasis.cellkind
++                   and type cellkindDesc = CellsBasis.cellkindDesc
++                   and type cellkindInfo = CellsBasis.cellkindInfo
+ 
+   val divu : {rs:CB.cell, rt:CB.cell, rd:CB.cell} -> I.instruction list
+   val mulo : {rs:CB.cell, rt:CB.cell, rd:CB.cell} -> I.instruction list
+diff --git a/instructions/insnProps.sig b/instructions/insnProps.sig
+index 63fde27..29ed432 100644
+--- a/instructions/insnProps.sig
++++ b/instructions/insnProps.sig
+@@ -7,7 +7,7 @@ signature INSN_PROPERTIES =
+ sig
+    structure I : INSTRUCTIONS
+    structure C : CELLS
+-     sharing I.C = C
++     (* sharing I.C = C *)
+ 
+       (* classify instructions *)
+    datatype kind = IK_JUMP   (* branches, including returns *)
+diff --git a/instructions/instructions.sig b/instructions/instructions.sig
+index cbd007c..eb8a1b3 100644
+--- a/instructions/instructions.sig
++++ b/instructions/instructions.sig
+@@ -8,7 +8,16 @@
+ signature INSTRUCTIONS =
+ sig
+    structure C   : CELLS
+-   structure CB  :CELLS_BASIS = CellsBasis
++   structure CB  : CELLS_BASIS (* = CellsBasis *)
++                   where type CellSet.cellset = CellsBasis.CellSet.cellset
++                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                     and type cell = CellsBasis.cell
++                     and type cellColor = CellsBasis.cellColor
++                     and type cellkind = CellsBasis.cellkind
++                     and type cellkindDesc = CellsBasis.cellkindDesc
++                     and type cellkindInfo = CellsBasis.cellkindInfo
+    type operand             (* operands supported by architecture *)
+    type addressing_mode                        (* addressing mode *)
+    type ea              (* effective address for accessing memory *)
+diff --git a/instructions/mlriscAnnotations.sig b/instructions/mlriscAnnotations.sig
+index 36c14af..39d87eb 100644
+--- a/instructions/mlriscAnnotations.sig
++++ b/instructions/mlriscAnnotations.sig
+@@ -15,7 +15,16 @@
+ signature MLRISC_ANNOTATIONS =
+ sig
+ 
+-    structure C : CELLS_BASIS = CellsBasis
++    structure C : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+ 
+     (* 
+      * The branch probability of conditional branches. 
+diff --git a/library/dynamic-array.sml b/library/dynamic-array.sml
+index 7733a6f..506581d 100644
+--- a/library/dynamic-array.sml
++++ b/library/dynamic-array.sml
+@@ -5,7 +5,33 @@
+  *)
+ 
+ structure DynArray : 
+-  sig include ARRAY
++  sig type 'a array
++      type 'a vector
++
++      val all: ('a -> bool) -> 'a array -> bool
++      val app: ('a -> unit) -> 'a array -> unit
++      val appi: (int * 'a -> unit) -> 'a array -> unit
++      val array: int * 'a -> 'a array
++      val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
++      val copy: {src: 'a array, dst: 'a array, di: int} -> unit
++      val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit
++      val exists: ('a -> bool) -> 'a array -> bool
++      val find: ('a -> bool) -> 'a array -> 'a option
++      val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
++      val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++      val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++      val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++      val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++      val fromList: 'a list -> 'a array
++      val length: 'a array -> int
++      val maxLen: int
++      val modify: ('a -> 'a) -> 'a array -> unit
++      val modifyi: (int * 'a -> 'a) -> 'a array -> unit
++      val sub: 'a array * int -> 'a
++      val tabulate: int * (int -> 'a) -> 'a array
++      val update: 'a array * int * 'a -> unit
++      val vector: 'a array -> 'a vector
++
+       val fromArray : 'a Array.array * 'a * int -> 'a array
+       val baseArray : 'a array -> 'a Array.array
+       val checkArray: 'a array * 'a Array.array -> unit
+diff --git a/library/hash-array.sml b/library/hash-array.sml
+index e50b34e..f11bc8a 100644
+--- a/library/hash-array.sml
++++ b/library/hash-array.sml
+@@ -5,7 +5,33 @@
+  *)
+ 
+ structure HashArray : 
+-     sig include ARRAY
++     sig type 'a array
++         type 'a vector
++
++         val all: ('a -> bool) -> 'a array -> bool
++         val app: ('a -> unit) -> 'a array -> unit
++         val appi: (int * 'a -> unit) -> 'a array -> unit
++         val array: int * 'a -> 'a array
++         val collate: ('a * 'a -> order) -> 'a array * 'a array -> order
++         val copy: {src: 'a array, dst: 'a array, di: int} -> unit
++         val copyVec: {src: 'a vector, dst: 'a array, di: int} -> unit
++         val exists: ('a -> bool) -> 'a array -> bool
++         val find: ('a -> bool) -> 'a array -> 'a option
++         val findi: (int * 'a -> bool) -> 'a array -> (int * 'a) option
++         val foldl: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++         val foldli: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++         val foldr: ('a * 'b -> 'b) -> 'b -> 'a array -> 'b
++         val foldri: (int * 'a * 'b -> 'b) -> 'b -> 'a array -> 'b
++         val fromList: 'a list -> 'a array
++         val length: 'a array -> int
++         val maxLen: int
++         val modify: ('a -> 'a) -> 'a array -> unit
++         val modifyi: (int * 'a -> 'a) -> 'a array -> unit
++         val sub: 'a array * int -> 'a
++         val tabulate: int * (int -> 'a) -> 'a array
++         val update: 'a array * int * 'a -> unit
++         val vector: 'a array -> 'a vector
++
+          val array' : int * (int -> 'a) -> 'a array
+          val array'': int * (int -> 'a) -> 'a array
+          val clear  : 'a array -> unit 
+diff --git a/mlb/ALPHA.mlb b/mlb/ALPHA.mlb
+new file mode 100644
+index 0000000..d1874c1
+--- /dev/null
++++ b/mlb/ALPHA.mlb
+@@ -0,0 +1,474 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l42 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_1 = PROBABILITY
-+       structure gs_2 = Probability
++  basis l136 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = MLRiscAnnotations
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = REGION
++  basis l50 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_5 = CONSTANT
++  basis l9 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_6 = MLTREE
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = FREQUENCY_PROPERTIES
++   end
++   local
++      open l9
++   in
++      signature gs_1 = PROBABILITY
++      structure gs_2 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_3 = MLRiscAnnotations
++   end
++   local
++      open l4
++   in
++      signature gs_4 = REGION
++   end
++   local
++      open l4
++   in
++      signature gs_5 = CONSTANT
++   end
++   local
++      open l4
++   in
++      signature gs_6 = MLTREE
++   end
++   local
++      open l4
++   in
++      signature gs_7 = CELLS_BASIS
++   end
++   local
++      open l4
++   in
++      structure gs_8 = CellsBasis
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Label
++   end
++   local
++      open l9
++   in
++      structure gs_10 = Annotations
++   end
++   local
++      open l4
++   in
++      functor gs_11 = Cells
++   end
++   local
++      open l42
++   in
++      structure gs_12 = Int
++   end
++   local
++      open l4
++   in
++      signature gs_13 = CELLS
++   end
++   local
++      open l50
++   in
++      signature gs_14 = MLRISC_ERROR_MSG
++      structure gs_15 = MLRiscErrorMsg
++   end
++   local
++      signature CELLS = gs_13
++      functor Cells = gs_11
++      structure CellsBasis = gs_8
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      ../alpha/instructions/alphaCells.sml
++   in
++      signature gs_16 = ALPHACELLS
++      structure gs_17 = AlphaCells
++   end
++   local
++      signature ALPHACELLS = gs_16
++      structure AlphaCells = gs_17
++      structure Annotations = gs_10
++      signature CELLS_BASIS = gs_7
++      signature CONSTANT = gs_5
++      structure CellsBasis = gs_8
++      structure Label = gs_9
++      signature MLTREE = gs_6
++      signature REGION = gs_4
++      ../alpha/instructions/alphaInstr.sml
++   in
++      signature gs_18 = ALPHAINSTR
++      functor gs_19 = AlphaInstr
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      functor AlphaInstr = gs_19
++      signature FREQUENCY_PROPERTIES = gs_0
++      structure MLRiscAnnotations = gs_3
++      signature PROBABILITY = gs_1
++      structure Probability = gs_2
++      ../alpha/instructions/alphaFreqProps.sml
++   in
++      functor gs_20 = AlphaFreqProps
++   end
++   local
++      open l4
++   in
++      signature gs_21 = INSN_PROPERTIES
++   end
++   local
++      open l42
++   in
++      structure gs_22 = Option
++   end
++   local
++      open l42
++   in
++      structure gs_23 = Word
++   end
++   local
++      open l4
++   in
++      signature gs_24 = MLTREE_EVAL
++   end
++   local
++      open l4
++   in
++      signature gs_25 = MLTREE_HASH
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      signature INSN_PROPERTIES = gs_21
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_24
++      signature MLTREE_HASH = gs_25
++      structure Option = gs_22
++      structure Word = gs_23
++      ../alpha/instructions/alphaProps.sml
++   in
++      functor gs_26 = AlphaProps
++   end
++   local
++      open l4
++   in
++      signature gs_27 = SDI_JUMPS
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      ../alpha/instructions/alphaShuffle.sig
++   in
++      signature gs_28 = ALPHASHUFFLE
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      signature ALPHASHUFFLE = gs_28
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_24
++      structure Option = gs_22
++      signature SDI_JUMPS = gs_27
++      ../alpha/backpatch/alphaJumps.sml
++   in
++      functor gs_29 = AlphaJumps
++   end
++   local
++      open l4
++   in
++      signature gs_30 = INSTRUCTION_EMITTER
++   end
++   local
++      open l4
++   in
++      signature gs_31 = ASM_FORMAT_UTIL
++      structure gs_32 = AsmFormatUtil
++   end
++   local
++      open l4
++   in
++      signature gs_33 = ASM_STREAM
++      structure gs_34 = AsmStream
++   end
++   local
++      open l42
++   in
++      structure gs_35 = TextIO
++   end
++   local
++      open l42
++   in
++      structure gs_36 = String
++   end
++   local
++      open l4
++   in
++      structure gs_37 = AsmFlags
++   end
++   local
++      open l4
++   in
++      signature gs_38 = INSTRUCTION_STREAM
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      signature ALPHASHUFFLE = gs_28
++      signature ASM_FORMAT_UTIL = gs_31
++      signature ASM_STREAM = gs_33
++      functor AlphaInstr = gs_19
++      structure Annotations = gs_10
++      structure AsmFlags = gs_37
++      structure AsmFormatUtil = gs_32
++      structure AsmStream = gs_34
++      structure CellsBasis = gs_8
++      signature INSTRUCTION_EMITTER = gs_30
++      signature INSTRUCTION_STREAM = gs_38
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_24
++      structure String = gs_36
++      structure TextIO = gs_35
++      ../alpha/emit/alphaAsm.sml
++   in
++      functor gs_39 = AlphaAsmEmitter
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      ../alpha/ra/alphaRewrite.sml
++   in
++      functor gs_40 = AlphaRewrite
++   end
++   local
++      open l4
++   in
++      signature gs_41 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l4
++   in
++      functor gs_42 = GasPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_43 = PseudoOpsLittle
++   end
++   local
++      open l136
++   in
++      structure gs_44 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_45 = PseudoOpsBasisTyp
++   end
++   local
++      open l42
++   in
++      structure gs_46 = Word32
++   end
++   local
++      structure Format = gs_44
++      functor GasPseudoOps = gs_42
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE = gs_6
++      signature MLTREE_EVAL = gs_24
++      signature PSEUDO_OPS_BASIS = gs_41
++      structure PseudoOpsBasisTyp = gs_45
++      functor PseudoOpsLittle = gs_43
++      structure Word32 = gs_46
++      ../alpha/flowgraph/alphaGasPseudoOps.sml
++   in
++      functor gs_47 = AlphaGasPseudoOps
++   end
++   local
++      open l4
++   in
++      signature gs_48 = ARCH_SPILL_INSTR
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      signature ARCH_SPILL_INSTR = gs_48
++      functor AlphaInstr = gs_19
++      functor AlphaRewrite = gs_40
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      ../alpha/ra/alphaSpillInstr.sml
++   in
++      functor gs_49 = AlphaSpillInstr
++   end
++   local
++      open l4
++   in
++      functor gs_50 = MLTreeMult
++   end
++   local
++      open l4
++   in
++      functor gs_51 = MLTreeGen
++   end
++   local
++      open l42
++   in
++      structure gs_52 = IntInf
++   end
++   local
++      open l42
++   in
++      structure gs_53 = Int32
++   end
++   local
++      open l42
++   in
++      structure gs_54 = List
++   end
++   local
++      open l4
++   in
++      signature gs_55 = MLTREECOMP
++      signature gs_56 = MLTREE_EXTENSION_COMP
++   end
++   local
++      signature ALPHACELLS = gs_16
++      signature ALPHAINSTR = gs_18
++      structure AlphaCells = gs_17
++      functor AlphaInstr = gs_19
++      signature CELLS_BASIS = gs_7
++      structure CellsBasis = gs_8
++      signature MLTREE = gs_6
++      ../alpha/mltree/alphaPseudoInstr.sig
++   in
++      signature gs_57 = ALPHA_PSEUDO_INSTR
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      signature ALPHA_PSEUDO_INSTR = gs_57
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      structure Int32 = gs_53
++      structure IntInf = gs_52
++      structure Label = gs_9
++      structure List = gs_54
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscAnnotations = gs_3
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREECOMP = gs_55
++      signature MLTREE_EXTENSION_COMP = gs_56
++      functor MLTreeGen = gs_51
++      functor MLTreeMult = gs_50
++      structure Word = gs_23
++      structure Word32 = gs_46
++      ../alpha/mltree/alpha.sml
++   in
++      functor gs_58 = Alpha
++   end
++   local
++      open l4
++   in
++      functor gs_59 = Shuffle
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      signature ALPHASHUFFLE = gs_28
++      functor AlphaInstr = gs_19
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      structure Option = gs_22
++      functor Shuffle = gs_59
++      ../alpha/instructions/alphaShuffle.sml
++   in
++      functor gs_60 = AlphaShuffle
++   end
++   local
++      open l42
++   in
++      structure gs_61 = Word8
++   end
++   local
++      open l4
++   in
++      signature gs_62 = CODE_STRING
++   end
++   local
++      signature ALPHAINSTR = gs_18
++      functor AlphaInstr = gs_19
++      signature CODE_STRING = gs_62
++      structure CellsBasis = gs_8
++      signature INSTRUCTION_EMITTER = gs_30
++      signature INSTRUCTION_STREAM = gs_38
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_24
++      structure Option = gs_22
++      structure Word32 = gs_46
++      structure Word8 = gs_61
++      ../alpha/emit/alphaMC.sml
++   in
++      functor gs_63 = AlphaMCEmitter
++   end
++in
++   signature ALPHACELLS = gs_16
++   signature ALPHAINSTR = gs_18
++   signature ALPHASHUFFLE = gs_28
++   signature ALPHA_PSEUDO_INSTR = gs_57
++   functor Alpha = gs_58
++   functor AlphaAsmEmitter = gs_39
++   structure AlphaCells = gs_17
++   functor AlphaFreqProps = gs_20
++   functor AlphaGasPseudoOps = gs_47
++   functor AlphaInstr = gs_19
++   functor AlphaJumps = gs_29
++   functor AlphaMCEmitter = gs_63
++   functor AlphaProps = gs_26
++   functor AlphaRewrite = gs_40
++   functor AlphaShuffle = gs_60
++   functor AlphaSpillInstr = gs_49
++end
++end
++
++end
+diff --git a/mlb/AMD64-Peephole.mlb b/mlb/AMD64-Peephole.mlb
+new file mode 100644
+index 0000000..4a9607e
+--- /dev/null
++++ b/mlb/AMD64-Peephole.mlb
+@@ -0,0 +1,60 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_7 = CELLS_BASIS
++  basis l4 =
++    bas
++      (* $Peephole.cm(=(proxyLib.cm):.)/Peephole.cm =??=> *) Peephole.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_8 = CellsBasis
++  basis l16 =
++    bas
++      (* $AMD64.cm(=(proxyLib.cm):.)/AMD64.cm =??=> *) AMD64.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Label
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = PEEPHOLE
++   end
++   local
++      open l8
++   in
++      structure gs_1 = CellsBasis
++   end
++   local
++      open l8
++   in
++      signature gs_2 = MLTREE_EVAL
++   end
++   local
++      open l16
++   in
++      signature gs_3 = AMD64INSTR
++      functor gs_4 = AMD64Instr
++   end
++   local
++      signature AMD64INSTR = gs_3
++      functor AMD64Instr = gs_4
++      structure CellsBasis = gs_1
++      signature MLTREE_EVAL = gs_2
++      signature PEEPHOLE = gs_0
++      ../amd64/instructions/amd64Peephole.sml
++   in
++      functor gs_5 = AMD64Peephole
++   end
++in
++   functor AMD64Peephole = gs_5
++end
++end
++
++end
+diff --git a/mlb/AMD64.mlb b/mlb/AMD64.mlb
+new file mode 100644
+index 0000000..7fd9142
+--- /dev/null
++++ b/mlb/AMD64.mlb
+@@ -0,0 +1,670 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       structure gs_10 = Annotations
++  basis l111 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_11 = Cells
++  basis l9 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_12 = Int
++  basis l46 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_13 = CELLS
++  basis l223 =
++    bas
++      (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
 +    end
-+    local
-+       open l50
-+    in
-+       signature gs_14 = MLRISC_ERROR_MSG
-+       structure gs_15 = MLRiscErrorMsg
++  basis l34 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       signature CELLS = gs_13
-+       functor Cells = gs_11
-+       structure CellsBasis = gs_8
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       ../alpha/instructions/alphaCells.sml
-+    in
-+       signature gs_16 = ALPHACELLS
-+       structure gs_17 = AlphaCells
++  basis l276 =
++    bas
++      (* $MLTREE.cm(=(proxyLib.cm):.)/MLTREE.cm =??=> *) MLTREE.mlb
 +    end
-+    local
-+       signature ALPHACELLS = gs_16
-+       structure AlphaCells = gs_17
-+       structure Annotations = gs_10
-+       signature CELLS_BASIS = gs_7
-+       signature CONSTANT = gs_5
-+       structure CellsBasis = gs_8
-+       structure Label = gs_9
-+       signature MLTREE = gs_6
-+       signature REGION = gs_4
-+       ../alpha/instructions/alphaInstr.sml
-+    in
-+       signature gs_18 = ALPHAINSTR
-+       functor gs_19 = AlphaInstr
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = Int
++   end
++   local
++      open l9
++   in
++      signature gs_1 = REGION
++   end
++   local
++      open l9
++   in
++      signature gs_2 = CONSTANT
++   end
++   local
++      open l9
++   in
++      signature gs_3 = MLTREE
++   end
++   local
++      open l9
++   in
++      signature gs_4 = CELLS_BASIS
++   end
++   local
++      open l9
++   in
++      structure gs_5 = CellsBasis
++   end
++   local
++      open l9
++   in
++      structure gs_6 = Label
++   end
++   local
++      open l4
++   in
++      structure gs_7 = Int64
++   end
++   local
++      open l4
++   in
++      structure gs_8 = Int32
++   end
++   local
++      open l34
++   in
++      structure gs_9 = Annotations
++   end
++   local
++      open l9
++   in
++      functor gs_10 = Cells
++   end
++   local
++      open l9
++   in
++      signature gs_11 = CELLS
++   end
++   local
++      open l46
++   in
++      signature gs_12 = MLRISC_ERROR_MSG
++      structure gs_13 = MLRiscErrorMsg
++   end
++   local
++      signature CELLS = gs_11
++      functor Cells = gs_10
++      structure CellsBasis = gs_5
++      structure Int = gs_0
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      ../amd64/instructions/amd64Cells.sml
++   in
++      signature gs_14 = AMD64CELLS
++      structure gs_15 = AMD64Cells
++   end
++   local
++      signature AMD64CELLS = gs_14
++      structure AMD64Cells = gs_15
++      structure Annotations = gs_9
++      signature CELLS_BASIS = gs_4
++      signature CONSTANT = gs_2
++      structure CellsBasis = gs_5
++      structure Int32 = gs_8
++      structure Int64 = gs_7
++      structure Label = gs_6
++      signature MLTREE = gs_3
++      signature REGION = gs_1
++      ../amd64/instructions/amd64Instr.sml
++   in
++      signature gs_16 = AMD64INSTR
++      functor gs_17 = AMD64Instr
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      structure Int = gs_0
++      ../amd64/mltree/amd64-opcodes.sml
++   in
++      functor gs_18 = AMD64Opcodes
++   end
++   local
++      open l9
++   in
++      signature gs_19 = MC_EMIT
++   end
++   local
++      open l4
++   in
++      structure gs_20 = Word32
++   end
++   local
++      open l4
++   in
++      structure gs_21 = Word8
++   end
++   local
++      open l4
++   in
++      structure gs_22 = LargeWord
++   end
++   local
++      open l4
++   in
++      structure gs_23 = Word8Vector
++   end
++   local
++      open l4
++   in
++      structure gs_24 = Word
++   end
++   local
++      open l9
++   in
++      signature gs_25 = MLTREE_EVAL
++   end
++   local
++      open l9
++   in
++      functor gs_26 = Shuffle
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      structure CellsBasis = gs_5
++      functor Shuffle = gs_26
++      ../amd64/instructions/amd64Shuffle.sml
++   in
++      signature gs_27 = AMD64SHUFFLE
++      functor gs_28 = AMD64Shuffle
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      signature AMD64SHUFFLE = gs_27
++      functor AMD64Shuffle = gs_28
++      structure CellsBasis = gs_5
++      structure Int32 = gs_8
++      structure LargeWord = gs_22
++      signature MC_EMIT = gs_19
++      signature MLTREE_EVAL = gs_25
++      structure Word = gs_24
++      structure Word32 = gs_20
++      structure Word8 = gs_21
++      structure Word8Vector = gs_23
++      ../amd64/amd64MCFn.sml
++   in
++      functor gs_29 = AMD64MCFn
++   end
++   local
++      open l9
++   in
++      signature gs_30 = INSTRUCTION_EMITTER
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      signature AMD64SHUFFLE = gs_27
++      functor AMD64Shuffle = gs_28
++      structure CellsBasis = gs_5
++      signature INSTRUCTION_EMITTER = gs_30
++      structure Int = gs_0
++      structure Int32 = gs_8
++      structure LargeWord = gs_22
++      signature MC_EMIT = gs_19
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_25
++      structure Word = gs_24
++      structure Word32 = gs_20
++      structure Word8 = gs_21
++      structure Word8Vector = gs_23
++      ../amd64/amd64MC.sml
++   in
++      functor gs_31 = AMD64MCEmitter
++   end
++   local
++      open l9
++   in
++      signature gs_32 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l9
++   in
++      functor gs_33 = GasPseudoOps
++   end
++   local
++      open l9
++   in
++      functor gs_34 = PseudoOpsLittle
++   end
++   local
++      open l111
++   in
++      structure gs_35 = Format
++   end
++   local
++      open l9
++   in
++      structure gs_36 = PseudoOpsBasisTyp
++   end
++   local
++      structure Format = gs_35
++      functor GasPseudoOps = gs_33
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE = gs_3
++      signature MLTREE_EVAL = gs_25
++      signature PSEUDO_OPS_BASIS = gs_32
++      structure PseudoOpsBasisTyp = gs_36
++      functor PseudoOpsLittle = gs_34
++      structure Word32 = gs_20
++      ../amd64/flowgraph/amd64GasPseudoOps.sml
++   in
++      functor gs_37 = AMD64GasPseudoOps
++   end
++   local
++      open l4
++   in
++      structure gs_38 = List
++   end
++   local
++      open l9
++   in
++      signature gs_39 = MLTREE_HASH
++   end
++   local
++      open l9
++   in
++      signature gs_40 = INSN_PROPERTIES
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      structure CellsBasis = gs_5
++      signature INSN_PROPERTIES = gs_40
++      structure Int = gs_0
++      structure Int32 = gs_8
++      structure Int64 = gs_7
++      structure Label = gs_6
++      structure List = gs_38
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_25
++      signature MLTREE_HASH = gs_39
++      structure Word = gs_24
++      ../amd64/instructions/amd64Props.sml
++   in
++      signature gs_41 = AMD64INSN_PROPERTIES
++      functor gs_42 = AMD64Props
++   end
++   local
++      open l9
++   in
++      signature gs_43 = SDI_JUMPS
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      signature AMD64SHUFFLE = gs_27
++      functor AMD64Shuffle = gs_28
++      signature MC_EMIT = gs_19
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_25
++      signature SDI_JUMPS = gs_43
++      structure Word8Vector = gs_23
++      ../amd64/backpatch/amd64Jumps.sml
++   in
++      functor gs_44 = AMD64Jumps
++   end
++   local
++      open l9
++   in
++      signature gs_45 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l9
++   in
++      signature gs_46 = MLTREE_STREAM
++   end
++   local
++      ../amd64/instructions/amd64InstrExt.sml
++   in
++      structure gs_47 = AMD64InstrExt
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      structure AMD64InstrExt = gs_47
++      signature CONTROL_FLOW_GRAPH = gs_45
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_STREAM = gs_46
++      ../amd64/instructions/amd64CompInstrExt.sml
++   in
++      signature gs_48 = AMD64COMP_INSTR_EXT
++      functor gs_49 = AMD64CompInstrExt
++   end
++   local
++      open l9
++   in
++      functor gs_50 = DarwinPseudoOps
++   end
++   local
++      functor DarwinPseudoOps = gs_50
++      structure Format = gs_35
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE = gs_3
++      signature MLTREE_EVAL = gs_25
++      signature PSEUDO_OPS_BASIS = gs_32
++      structure PseudoOpsBasisTyp = gs_36
++      functor PseudoOpsLittle = gs_34
++      structure Word32 = gs_20
++      ../amd64/flowgraph/amd64-darwin-pseudo-ops.sml
++   in
++      functor gs_51 = AMD64DarwinPseudoOps
++   end
++   local
++      open l9
++   in
++      signature gs_52 = ASM_FORMAT_UTIL
++      structure gs_53 = AsmFormatUtil
++   end
++   local
++      open l9
++   in
++      signature gs_54 = ASM_STREAM
++      structure gs_55 = AsmStream
++   end
++   local
++      open l4
++   in
++      structure gs_56 = TextIO
++   end
++   local
++      open l4
++   in
++      structure gs_57 = String
++   end
++   local
++      open l4
++   in
++      structure gs_58 = Char
++   end
++   local
++      open l9
++   in
++      structure gs_59 = AsmFlags
++   end
++   local
++      open l9
++   in
++      signature gs_60 = INSTRUCTION_STREAM
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      signature AMD64SHUFFLE = gs_27
++      functor AMD64Shuffle = gs_28
++      signature ASM_FORMAT_UTIL = gs_52
++      signature ASM_STREAM = gs_54
++      structure Annotations = gs_9
++      structure AsmFlags = gs_59
++      structure AsmFormatUtil = gs_53
++      structure AsmStream = gs_55
++      structure CellsBasis = gs_5
++      structure Char = gs_58
++      signature INSTRUCTION_EMITTER = gs_30
++      signature INSTRUCTION_STREAM = gs_60
++      structure Int = gs_0
++      structure Int32 = gs_8
++      structure Int64 = gs_7
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_25
++      structure String = gs_57
++      structure TextIO = gs_56
++      ../amd64/emit/amd64Asm.sml
++   in
++      functor gs_61 = AMD64AsmEmitter
++   end
++   local
++      open l9
++   in
++      signature gs_62 = CFG_OPTIMIZATION
++   end
++   local
++      open l9
++   in
++      functor gs_63 = GetReg
++   end
++   local
++      open l9
++   in
++      signature gs_64 = PRINT_FLOWGRAPH
++      functor gs_65 = PrintFlowgraph
++   end
++   local
++      open l9
++   in
++      functor gs_66 = RegisterAllocator
++   end
++   local
++      open l9
++   in
++      functor gs_67 = MemoryRA
++   end
++   local
++      open l9
++   in
++      functor gs_68 = RADeadCodeElim
++   end
++   local
++      open l9
++   in
++      functor gs_69 = ClusterRA
++   end
++   local
++      open l111
++   in
++      structure gs_70 = IntHashTable
++   end
++   local
++      open l46
++   in
++      signature gs_71 = MLRISC_CONTROL
++      structure gs_72 = MLRiscControl
++   end
++   local
++      open l223
++   in
++      structure gs_73 = Graph
++   end
++   local
++      open l4
++   in
++      structure gs_74 = Array
++   end
++   local
++      open l4
++   in
++      structure gs_75 = Option
++   end
++   local
++      open l9
++   in
++      signature gs_76 = RA_SPILL
++   end
++   local
++      open l9
++   in
++      signature gs_77 = RA_SPILL_HEURISTICS
++   end
++   local
++      open l9
++   in
++      structure gs_78 = RAGraph
++   end
++   local
++      open l9
++   in
++      signature gs_79 = ARCH_SPILL_INSTR
++   end
++   local
++      open l9
++   in
++      structure gs_80 = MLRiscAnnotations
++   end
++   local
++      signature AMD64INSN_PROPERTIES = gs_41
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      functor AMD64Props = gs_42
++      signature ARCH_SPILL_INSTR = gs_79
++      structure Annotations = gs_9
++      structure CellsBasis = gs_5
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscAnnotations = gs_80
++      structure MLRiscErrorMsg = gs_13
++      ../amd64/ra/amd64SpillInstr.sml
++   in
++      functor gs_81 = AMD64SpillInstr
++   end
++   local
++      signature AMD64INSN_PROPERTIES = gs_41
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      functor AMD64Props = gs_42
++      functor AMD64SpillInstr = gs_81
++      structure Annotations = gs_9
++      structure Array = gs_74
++      signature CFG_OPTIMIZATION = gs_62
++      signature CONTROL_FLOW_GRAPH = gs_45
++      structure CellsBasis = gs_5
++      functor ClusterRA = gs_69
++      functor GetReg = gs_63
++      structure Graph = gs_73
++      signature INSTRUCTION_EMITTER = gs_30
++      structure IntHashTable = gs_70
++      structure List = gs_38
++      signature MLRISC_CONTROL = gs_71
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscControl = gs_72
++      structure MLRiscErrorMsg = gs_13
++      functor MemoryRA = gs_67
++      structure Option = gs_75
++      signature PRINT_FLOWGRAPH = gs_64
++      functor PrintFlowgraph = gs_65
++      functor RADeadCodeElim = gs_68
++      structure RAGraph = gs_78
++      signature RA_SPILL = gs_76
++      signature RA_SPILL_HEURISTICS = gs_77
++      functor RegisterAllocator = gs_66
++      ../amd64/ra/amd64RegAlloc.sml
++   in
++      functor gs_82 = AMD64RegAlloc
++   end
++   local
++      open l9
++   in
++      functor gs_83 = MLTreeGen
++   end
++   local
++      open l9
++   in
++      functor gs_84 = MLTreeSize
++   end
++   local
++      open l4
++   in
++      structure gs_85 = IntInf
++   end
++   local
++      open l34
++   in
++      signature gs_86 = PROBABILITY
++      structure gs_87 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_88 = ListPair
++   end
++   local
++      open l9
++   in
++      signature gs_89 = MLTREECOMP
++      signature gs_90 = MLTREE_EXTENSION_COMP
++   end
++   local
++      open l276
++   in
++      signature gs_91 = MLTREE_UTILS
++   end
++   local
++      signature AMD64INSTR = gs_16
++      functor AMD64Instr = gs_17
++      functor AMD64Opcodes = gs_18
++      structure CellsBasis = gs_5
++      structure Int32 = gs_8
++      structure Int64 = gs_7
++      structure IntInf = gs_85
++      structure Label = gs_6
++      structure List = gs_38
++      structure ListPair = gs_88
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscAnnotations = gs_80
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREECOMP = gs_89
++      signature MLTREE_EXTENSION_COMP = gs_90
++      signature MLTREE_UTILS = gs_91
++      functor MLTreeGen = gs_83
++      functor MLTreeSize = gs_84
++      signature PROBABILITY = gs_86
++      structure Probability = gs_87
++      functor Shuffle = gs_26
++      structure Word = gs_24
++      structure Word32 = gs_20
++      ../amd64/mltree/amd64-gen.sml
++   in
++      functor gs_92 = AMD64Gen
++   end
++in
++   functor AMD64AsmEmitter = gs_61
++   signature AMD64CELLS = gs_14
++   structure AMD64Cells = gs_15
++   functor AMD64CompInstrExt = gs_49
++   functor AMD64DarwinPseudoOps = gs_51
++   functor AMD64GasPseudoOps = gs_37
++   functor AMD64Gen = gs_92
++   signature AMD64INSN_PROPERTIES = gs_41
++   signature AMD64INSTR = gs_16
++   functor AMD64Instr = gs_17
++   structure AMD64InstrExt = gs_47
++   functor AMD64Jumps = gs_44
++   functor AMD64MCEmitter = gs_31
++   functor AMD64MCFn = gs_29
++   functor AMD64Opcodes = gs_18
++   functor AMD64Props = gs_42
++   functor AMD64RegAlloc = gs_82
++   signature AMD64SHUFFLE = gs_27
++   functor AMD64Shuffle = gs_28
++   functor AMD64SpillInstr = gs_81
++end
++end
++
++end
+diff --git a/mlb/CCall-sparc.mlb b/mlb/CCall-sparc.mlb
+new file mode 100644
+index 0000000..2ed4349
+--- /dev/null
++++ b/mlb/CCall-sparc.mlb
+@@ -0,0 +1,118 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l29 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       functor AlphaInstr = gs_19
-+       signature FREQUENCY_PROPERTIES = gs_0
-+       structure MLRiscAnnotations = gs_3
-+       signature PROBABILITY = gs_1
-+       structure Probability = gs_2
-+       ../alpha/instructions/alphaFreqProps.sml
-+    in
-+       functor gs_20 = AlphaFreqProps
++  basis l33 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_21 = INSN_PROPERTIES
++  basis l8 =
++    bas
++      (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_22 = Option
++  basis l4 =
++    bas
++      (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_23 = Word
++  basis l19 =
++    bas
++      (* $SPARC.cm(=(proxyLib.cm):.)/SPARC.cm =??=> *) SPARC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_24 = MLTREE_EVAL
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = C_CALL
++   end
++   local
++      open l8
++   in
++      functor gs_1 = SparcCConventionFn
++   end
++   local
++      open l4
++   in
++      functor gs_2 = CCallGenFn
++   end
++   local
++      open l8
++   in
++      functor gs_3 = StagedAllocationFn
++   end
++   local
++      open l19
++   in
++      signature gs_4 = SPARCCELLS
++      structure gs_5 = SparcCells
++   end
++   local
++      open l4
++   in
++      structure gs_6 = CType
++   end
++   local
++      open l8
++   in
++      structure gs_7 = CLocKind
++   end
++   local
++      open l29
++   in
++      structure gs_8 = List
++   end
++   local
++      open l33
++   in
++      signature gs_9 = MLTREE
++   end
++   local
++      open l19
++   in
++      structure gs_10 = SparcInstrExt
++   end
++   local
++      open l29
++   in
++      structure gs_11 = Int
++   end
++   local
++      structure CType = gs_6
++      structure Int = gs_11
++      ../c-call/archs/sparc-c-sizes.sml
++   in
++      structure gs_12 = SparcCSizes
++   end
++   local
++      functor CCallGenFn = gs_2
++      structure CLocKind = gs_7
++      structure CType = gs_6
++      signature C_CALL = gs_0
++      structure List = gs_8
++      signature MLTREE = gs_9
++      signature SPARCCELLS = gs_4
++      functor SparcCConventionFn = gs_1
++      structure SparcCSizes = gs_12
++      structure SparcCells = gs_5
++      structure SparcInstrExt = gs_10
++      functor StagedAllocationFn = gs_3
++      ../c-call/archs/sparc-c-call-fn.sml
++   in
++      functor gs_13 = SparcCCallFn
++   end
++in
++   functor SparcCCallFn = gs_13
++   structure SparcCSizes = gs_12
++end
++end
++
++end
+diff --git a/mlb/CCall-x86-64.mlb b/mlb/CCall-x86-64.mlb
+new file mode 100644
+index 0000000..51fa89e
+--- /dev/null
++++ b/mlb/CCall-x86-64.mlb
+@@ -0,0 +1,125 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_25 = MLTREE_HASH
++  basis l29 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       signature INSN_PROPERTIES = gs_21
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_24
-+       signature MLTREE_HASH = gs_25
-+       structure Option = gs_22
-+       structure Word = gs_23
-+       ../alpha/instructions/alphaProps.sml
-+    in
-+       functor gs_26 = AlphaProps
++  basis l19 =
++    bas
++      (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_27 = SDI_JUMPS
++  basis l4 =
++    bas
++      (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       ../alpha/instructions/alphaShuffle.sig
-+    in
-+       signature gs_28 = ALPHASHUFFLE
++  basis l34 =
++    bas
++      (* $AMD64.cm(=(proxyLib.cm):.)/AMD64.cm =??=> *) AMD64.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       signature ALPHASHUFFLE = gs_28
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_24
-+       structure Option = gs_22
-+       signature SDI_JUMPS = gs_27
-+       ../alpha/backpatch/alphaJumps.sml
-+    in
-+       functor gs_29 = AlphaJumps
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = CType
++   end
++   local
++      open l8
++   in
++      structure gs_1 = Word
++   end
++   local
++      open l8
++   in
++      structure gs_2 = Int
++   end
++   local
++      structure CType = gs_0
++      structure Int = gs_2
++      structure Word = gs_1
++      ../c-call/archs/x86-64-c-sizes.sml
++   in
++      structure gs_3 = CSizes
++   end
++   local
++      open l19
++   in
++      functor gs_4 = X86_64CConventionFn
++   end
++   local
++      open l4
++   in
++      functor gs_5 = CCallGenFn
++   end
++   local
++      open l19
++   in
++      functor gs_6 = StagedAllocationFn
++   end
++   local
++      open l29
++   in
++      structure gs_7 = CellsBasis
++   end
++   local
++      open l34
++   in
++      signature gs_8 = AMD64CELLS
++      structure gs_9 = AMD64Cells
++   end
++   local
++      open l19
++   in
++      structure gs_10 = CLocKind
++   end
++   local
++      open l8
++   in
++      structure gs_11 = String
++   end
++   local
++      open l8
++   in
++      structure gs_12 = List
++   end
++   local
++      open l29
++   in
++      signature gs_13 = MLTREE
++   end
++   local
++      signature AMD64CELLS = gs_8
++      structure AMD64Cells = gs_9
++      functor CCallGenFn = gs_5
++      structure CLocKind = gs_10
++      structure CSizes = gs_3
++      structure CType = gs_0
++      structure CellsBasis = gs_7
++      structure Int = gs_2
++      structure List = gs_12
++      signature MLTREE = gs_13
++      functor StagedAllocationFn = gs_6
++      structure String = gs_11
++      functor X86_64CConventionFn = gs_4
++      ../c-call/archs/x86-64-svid-fn.sml
++   in
++      functor gs_14 = X86_64SVIDFn
++   end
++in
++   structure CSizes = gs_3
++   functor X86_64SVIDFn = gs_14
++end
++end
++
++end
+diff --git a/mlb/CCall-x86.mlb b/mlb/CCall-x86.mlb
+new file mode 100644
+index 0000000..4168bb1
+--- /dev/null
++++ b/mlb/CCall-x86.mlb
+@@ -0,0 +1,155 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_30 = INSTRUCTION_EMITTER
++  basis l32 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_31 = ASM_FORMAT_UTIL
-+       structure gs_32 = AsmFormatUtil
++  basis l22 =
++    bas
++      (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_33 = ASM_STREAM
-+       structure gs_34 = AsmStream
++  basis l4 =
++    bas
++      (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_35 = TextIO
++  basis l37 =
++    bas
++      (* $IA32.cm(=(proxyLib.cm):.)/IA32.cm =??=> *) IA32.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_36 = String
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = CType
++   end
++   local
++      open l8
++   in
++      structure gs_1 = Word
++   end
++   local
++      open l8
++   in
++      structure gs_2 = Int
++   end
++   local
++      structure CType = gs_0
++      structure Int = gs_2
++      structure Word = gs_1
++      ../c-call/archs/x86-c-sizes.sml
++   in
++      structure gs_3 = X86CSizes
++   end
++   local
++      open l4
++   in
++      signature gs_4 = C_CALL
++   end
++   local
++      open l22
++   in
++      functor gs_5 = X86CConventionFn
++   end
++   local
++      open l4
++   in
++      functor gs_6 = CCallGenFn
++   end
++   local
++      open l22
++   in
++      functor gs_7 = StagedAllocationFn
++   end
++   local
++      open l32
++   in
++      structure gs_8 = CellsBasis
++   end
++   local
++      open l37
++   in
++      signature gs_9 = X86CELLS
++      structure gs_10 = X86Cells
++   end
++   local
++      open l22
++   in
++      structure gs_11 = CLocKind
++   end
++   local
++      open l8
++   in
++      structure gs_12 = IntInf
++   end
++   local
++      open l32
++   in
++      structure gs_13 = MLRiscAnnotations
++   end
++   local
++      open l8
++   in
++      structure gs_14 = Int32
++   end
++   local
++      open l8
++   in
++      structure gs_15 = String
++   end
++   local
++      open l8
++   in
++      structure gs_16 = List
++   end
++   local
++      open l32
++   in
++      signature gs_17 = MLTREE
++   end
++   local
++      open l37
++   in
++      structure gs_18 = X86InstrExt
++   end
++   local
++      functor CCallGenFn = gs_6
++      structure CLocKind = gs_11
++      structure CType = gs_0
++      signature C_CALL = gs_4
++      structure CellsBasis = gs_8
++      structure Int = gs_2
++      structure Int32 = gs_14
++      structure IntInf = gs_12
++      structure List = gs_16
++      structure MLRiscAnnotations = gs_13
++      signature MLTREE = gs_17
++      functor StagedAllocationFn = gs_7
++      structure String = gs_15
++      functor X86CConventionFn = gs_5
++      signature X86CELLS = gs_9
++      structure X86CSizes = gs_3
++      structure X86Cells = gs_10
++      structure X86InstrExt = gs_18
++      ../c-call/archs/x86-svid-fn.sml
++   in
++      functor gs_19 = X86SVIDFn
++   end
++in
++   structure X86CSizes = gs_3
++   functor X86SVIDFn = gs_19
++end
++end
++
++end
+diff --git a/mlb/CCall.mlb b/mlb/CCall.mlb
+new file mode 100644
+index 0000000..02e5019
+--- /dev/null
++++ b/mlb/CCall.mlb
+@@ -0,0 +1,96 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l20 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_37 = AsmFlags
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_38 = INSTRUCTION_STREAM
++  basis l9 =
++    bas
++      (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       signature ALPHASHUFFLE = gs_28
-+       signature ASM_FORMAT_UTIL = gs_31
-+       signature ASM_STREAM = gs_33
-+       functor AlphaInstr = gs_19
-+       structure Annotations = gs_10
-+       structure AsmFlags = gs_37
-+       structure AsmFormatUtil = gs_32
-+       structure AsmStream = gs_34
-+       structure CellsBasis = gs_8
-+       signature INSTRUCTION_EMITTER = gs_30
-+       signature INSTRUCTION_STREAM = gs_38
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_24
-+       structure String = gs_36
-+       structure TextIO = gs_35
-+       ../alpha/emit/alphaAsm.sml
-+    in
-+       functor gs_39 = AlphaAsmEmitter
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = MLTREE
++   end
++   local
++      open l9
++   in
++      signature gs_1 = STAGED_ALLOCATION
++   end
++   local
++      open l9
++   in
++      structure gs_2 = CLocKind
++   end
++   local
++      structure CLocKind = gs_2
++      signature MLTREE = gs_0
++      signature STAGED_ALLOCATION = gs_1
++      ../c-call/gen/c-call-gen-sig.sml
++   in
++      signature gs_3 = C_CALL_GEN
++   end
++   local
++      open l20
++   in
++      structure gs_4 = List
++   end
++   local
++      structure List = gs_4
++      ../c-call/gen/c-type.sml
++   in
++      structure gs_5 = CType
++   end
++   local
++      structure CType = gs_5
++      signature C_CALL_GEN = gs_3
++      signature MLTREE = gs_0
++      ../c-call/gen/c-call-sig.sml
++   in
++      signature gs_6 = C_CALL
++   end
++   local
++      open l20
++   in
++      structure gs_7 = ListPair
++   end
++   local
++      open l4
++   in
++      signature gs_8 = CELLS
++   end
++   local
++      signature CELLS = gs_8
++      structure CLocKind = gs_2
++      signature C_CALL_GEN = gs_3
++      structure List = gs_4
++      structure ListPair = gs_7
++      signature MLTREE = gs_0
++      signature STAGED_ALLOCATION = gs_1
++      ../c-call/gen/c-call-gen-fn.sml
++   in
++      functor gs_9 = CCallGenFn
++   end
++in
++   functor CCallGenFn = gs_9
++   structure CType = gs_5
++   signature C_CALL = gs_6
++   signature C_CALL_GEN = gs_3
++end
++end
++
++end
+diff --git a/mlb/Control.mlb b/mlb/Control.mlb
+new file mode 100644
+index 0000000..1d8454e
+--- /dev/null
++++ b/mlb/Control.mlb
+@@ -0,0 +1,104 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       ../alpha/ra/alphaRewrite.sml
-+    in
-+       functor gs_40 = AlphaRewrite
++  basis l28 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_41 = PSEUDO_OPS_BASIS
++  basis l12 =
++    bas
++      (* $/controls-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Controls/controls-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_42 = GasPseudoOps
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = Timer
++   end
++   local
++      open l4
++   in
++      structure gs_1 = Time
++   end
++   local
++      open l12
++   in
++      structure gs_2 = Controls
++   end
++   local
++      open l12
++   in
++      structure gs_3 = ControlUtil
++   end
++   local
++      open l12
++   in
++      structure gs_4 = ControlSet
++   end
++   local
++      open l12
++   in
++      structure gs_5 = ControlRegistry
++   end
++   local
++      open l4
++   in
++      structure gs_6 = TextIO
++   end
++   local
++      open l28
++   in
++      structure gs_7 = Atom
++   end
++   local
++      structure Atom = gs_7
++      structure ControlRegistry = gs_5
++      structure ControlSet = gs_4
++      structure ControlUtil = gs_3
++      structure Controls = gs_2
++      structure TextIO = gs_6
++      structure Time = gs_1
++      ../control/mlrisc-control.sml
++   in
++      signature gs_8 = MLRISC_CONTROL
++      structure gs_9 = MLRiscControl
++   end
++   local
++      signature MLRISC_CONTROL = gs_8
++      structure MLRiscControl = gs_9
++      structure Time = gs_1
++      structure Timer = gs_0
++      ../control/mlrisc-timing.sml
++   in
++      signature gs_10 = MLRISC_TIMING
++      structure gs_11 = MLRiscTiming
++   end
++   local
++      structure TextIO = gs_6
++      ../control/mlriscErrormsg.sml
++   in
++      signature gs_12 = MLRISC_ERROR_MSG
++      structure gs_13 = MLRiscErrorMsg
++   end
++in
++   signature MLRISC_CONTROL = gs_8
++   signature MLRISC_ERROR_MSG = gs_12
++   signature MLRISC_TIMING = gs_10
++   structure MLRiscControl = gs_9
++   structure MLRiscErrorMsg = gs_13
++   structure MLRiscTiming = gs_11
++end
++end
++
++end
+diff --git a/mlb/Graphs.mlb b/mlb/Graphs.mlb
+new file mode 100644
+index 0000000..f667605
+--- /dev/null
++++ b/mlb/Graphs.mlb
+@@ -0,0 +1,708 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_43 = PseudoOpsLittle
++  basis l4 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l136
-+    in
-+       structure gs_44 = Format
++  basis l29 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_45 = PseudoOpsBasisTyp
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = ListMergeSort
++   end
++   local
++      open l8
++   in
++      structure gs_1 = Int
++   end
++   local
++      open l8
++   in
++      structure gs_2 = List
++   end
++   local
++      ../graphs/graph.sig
++   in
++      signature gs_3 = GRAPH
++   end
++   local
++      signature GRAPH = gs_3
++      structure List = gs_2
++      ../graphs/graph.sml
++   in
++      structure gs_4 = Graph
++   end
++   local
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure ListMergeSort = gs_0
++      ../graphs/uniongraph.sml
++   in
++      signature gs_5 = UNION_GRAPH_VIEW
++      structure gs_6 = UnionGraphView
++   end
++   local
++      open l29
++   in
++      signature gs_7 = CATNETABLE_LIST
++      structure gs_8 = CatnetableList
++   end
++   local
++      open l8
++   in
++      structure gs_9 = Array
++   end
++   local
++      ../graphs/group.sig
++   in
++      signature gs_10 = ABELIAN_GROUP
++      signature gs_11 = ABELIAN_GROUP_WITH_INF
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      structure Graph = gs_4
++      ../graphs/min-cut.sig
++   in
++      signature gs_12 = MIN_CUT
++   end
++   local
++      open l8
++   in
++      signature gs_13 = ARRAY
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/node-priqueue.sig
++   in
++      signature gs_14 = NODE_PRIORITY_QUEUE
++   end
++   local
++      signature ARRAY = gs_13
++      structure Graph = gs_4
++      signature NODE_PRIORITY_QUEUE = gs_14
++      ../graphs/node-priqueue.sml
++   in
++      functor gs_15 = NodePriorityQueue
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      structure Array = gs_9
++      signature CATNETABLE_LIST = gs_7
++      structure CatnetableList = gs_8
++      structure Graph = gs_4
++      signature MIN_CUT = gs_12
++      functor NodePriorityQueue = gs_15
++      ../graphs/min-cut.sml
++   in
++      functor gs_16 = MinCut
++   end
++   local
++      structure Graph = gs_4
++      structure List = gs_2
++      ../graphs/isograph.sml
++   in
++      signature gs_17 = ISOMORPHIC_GRAPH_VIEW
++      structure gs_18 = IsomorphicGraphView
++   end
++   local
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure List = gs_2
++      ../graphs/seme.sml
++   in
++      signature gs_19 = SINGLE_ENTRY_MULTIPLE_EXIT_VIEW
++      structure gs_20 = SingleEntryMultipleExit
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-comb.sig
++   in
++      signature gs_21 = GRAPH_COMBINATIONS
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/revgraph.sml
++   in
++      signature gs_22 = REVERSED_GRAPH_VIEW
++      structure gs_23 = ReversedGraphView
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/renamegraph.sml
++   in
++      signature gs_24 = RENAMED_GRAPH_VIEW
++      structure gs_25 = RenamedGraphView
++   end
++   local
++      signature GRAPH_COMBINATIONS = gs_21
++      structure Graph = gs_4
++      signature RENAMED_GRAPH_VIEW = gs_24
++      signature REVERSED_GRAPH_VIEW = gs_22
++      structure RenamedGraphView = gs_25
++      structure ReversedGraphView = gs_23
++      signature UNION_GRAPH_VIEW = gs_5
++      structure UnionGraphView = gs_6
++      ../graphs/graph-comb.sml
++   in
++      structure gs_26 = GraphCombinations
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/readonly.sml
++   in
++      signature gs_27 = READONLY_GRAPH_VIEW
++      structure gs_28 = ReadOnlyGraphView
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graphimpl.sig
++   in
++      signature gs_29 = GRAPH_IMPLEMENTATION
++   end
++   local
++      open l8
++   in
++      structure gs_30 = Word8Array
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-scc.sig
++   in
++      signature gs_31 = GRAPH_STRONGLY_CONNECTED_COMPONENTS
++   end
++   local
++      structure Array = gs_9
++      signature GRAPH_STRONGLY_CONNECTED_COMPONENTS = gs_31
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure Word8Array = gs_30
++      ../graphs/graph-scc.sml
++   in
++      structure gs_32 = GraphSCC
++   end
++   local
++      open l29
++   in
++      structure gs_33 = BitSet
++   end
++   local
++      structure Array = gs_9
++      structure Graph = gs_4
++      ../graphs/graph-dfs.sig
++   in
++      signature gs_34 = GRAPH_DEPTH_FIRST_SEARCH
++   end
++   local
++      structure Array = gs_9
++      structure BitSet = gs_33
++      signature GRAPH_DEPTH_FIRST_SEARCH = gs_34
++      structure Graph = gs_4
++      ../graphs/graph-dfs.sml
++   in
++      structure gs_35 = GraphDFS
++   end
++   local
++      structure Array = gs_9
++      structure Graph = gs_4
++      ../graphs/graph-bfs.sig
++   in
++      signature gs_36 = GRAPH_BREATH_FIRST_SEARCH
++   end
++   local
++      structure Array = gs_9
++      structure BitSet = gs_33
++      signature GRAPH_BREATH_FIRST_SEARCH = gs_36
++      structure Graph = gs_4
++      ../graphs/graph-bfs.sml
++   in
++      structure gs_37 = GraphBFS
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-bcc.sig
++   in
++      signature gs_38 = GRAPH_BICONNECTED_COMPONENTS
++   end
++   local
++      structure Array = gs_9
++      signature GRAPH_BICONNECTED_COMPONENTS = gs_38
++      structure Graph = gs_4
++      ../graphs/graph-bcc.sml
++   in
++      structure gs_39 = GraphBCC
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-topsort.sig
++   in
++      signature gs_40 = GRAPH_TOPOLOGICAL_SORT
++   end
++   local
++      open l8
++   in
++      structure gs_41 = String
++   end
++   local
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure List = gs_2
++      structure String = gs_41
++      ../graphs/printgraph.sml
++   in
++      signature gs_42 = PRINT_GRAPH
++      structure gs_43 = PrintGraph
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/no-exit.sml
++   in
++      signature gs_44 = NO_ENTRY_VIEW
++      signature gs_45 = NO_EXIT_VIEW
++      structure gs_46 = NoEntryView
++      structure gs_47 = NoExitView
++   end
++   local
++      open l29
++   in
++      structure gs_48 = PriorityQueue
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/spanning-tree.sig
++   in
++      signature gs_49 = MIN_COST_SPANNING_TREE
++   end
++   local
++      open l4
++   in
++      structure gs_50 = HashTable
++   end
++   local
++      open l4
++   in
++      structure gs_51 = URef
++   end
++   local
++      open l8
++   in
++      structure gs_52 = Word
++   end
++   local
++      structure Graph = gs_4
++      structure HashTable = gs_50
++      structure URef = gs_51
++      structure Word = gs_52
++      ../graphs/node-partition.sml
++   in
++      signature gs_53 = NODE_PARTITION
++      structure gs_54 = NodePartition
++   end
++   local
++      structure Graph = gs_4
++      signature MIN_COST_SPANNING_TREE = gs_49
++      signature NODE_PARTITION = gs_53
++      structure NodePartition = gs_54
++      structure PriorityQueue = gs_48
++      ../graphs/kruskal.sml
++   in
++      structure gs_55 = Kruskal
++   end
++   local
++      open l29
++   in
++      structure gs_56 = HashArray
++   end
++   local
++      structure Graph = gs_4
++      structure List = gs_2
++      ../graphs/subgraph-p.sml
++   in
++      signature gs_57 = SUBGRAPH_P_VIEW
++      structure gs_58 = Subgraph_P_View
++   end
++   local
++      structure Graph = gs_4
++      structure HashArray = gs_56
++      signature SUBGRAPH_P_VIEW = gs_57
++      structure Subgraph_P_View = gs_58
++      ../graphs/trace-graph.sml
++   in
++      signature gs_59 = TRACE_SUBGRAPH_VIEW
++      structure gs_60 = TraceView
++   end
++   local
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure List = gs_2
++      ../graphs/start-stop.sml
++   in
++      signature gs_61 = START_STOP_VIEW
++      structure gs_62 = StartStopView
++   end
++   local
++      signature GRAPH_IMPLEMENTATION = gs_29
++      structure Graph = gs_4
++      ../graphs/snap-shot.sml
++   in
++      signature gs_63 = GRAPH_SNAPSHOT
++      functor gs_64 = GraphSnapShot
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      structure Graph = gs_4
++      ../graphs/max-flow.sig
++   in
++      signature gs_65 = MAX_FLOW
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      structure Array = gs_9
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure List = gs_2
++      signature MAX_FLOW = gs_65
++      ../graphs/max-flow.sml
++   in
++      functor gs_66 = MaxFlow
++   end
++   local
++      open l8
++   in
++      structure gs_67 = Array2
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      structure Array = gs_9
++      structure Array2 = gs_67
++      structure Graph = gs_4
++      ../graphs/shortest-paths.sig
++   in
++      signature gs_68 = ALL_PAIRS_SHORTEST_PATHS
++      signature gs_69 = SINGLE_SOURCE_SHORTEST_PATHS
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      signature ALL_PAIRS_SHORTEST_PATHS = gs_68
++      structure Array2 = gs_67
++      structure Graph = gs_4
++      signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
++      ../graphs/floyd-warshall.sml
++   in
++      functor gs_70 = FloydWarshall
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-is-cyclic.sig
++   in
++      signature gs_71 = GRAPH_IS_CYCLIC
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/update-graph-info.sml
++   in
++      signature gs_72 = UPDATE_GRAPH_INFO
++      structure gs_73 = UpdateGraphInfo
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/graph-cycles.sig
++   in
++      signature gs_74 = GRAPH_SIMPLE_CYCLES
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      signature ALL_PAIRS_SHORTEST_PATHS = gs_68
++      structure Array = gs_9
++      structure Graph = gs_4
++      structure Int = gs_1
++      signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
++      ../graphs/bellman-ford.sml
++   in
++      functor gs_75 = BellmanFord
++   end
++   local
++      signature GRAPH_TOPOLOGICAL_SORT = gs_40
++      structure Graph = gs_4
++      structure Word8Array = gs_30
++      ../graphs/graph-topsort.sml
++   in
++      structure gs_76 = GraphTopsort
++   end
++   local
++      structure Array = gs_9
++      structure Graph = gs_4
++      structure GraphTopsort = gs_76
++      ../graphs/trans-closure.sml
++   in
++      signature gs_77 = TRANSITIVE_CLOSURE
++      structure gs_78 = TransitiveClosure
++   end
++   local
++      open l29
++   in
++      structure gs_79 = DynArray
++   end
++   local
++      structure DynArray = gs_79
++      signature GRAPH_IMPLEMENTATION = gs_29
++      structure Graph = gs_4
++      structure List = gs_2
++      ../graphs/digraph.sml
++   in
++      functor gs_80 = DirectedGraph
++      structure gs_81 = DirectedGraph
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/wrappers.sml
++   in
++      signature gs_82 = GRAPH_WRAPPERS
++      structure gs_83 = GraphWrappers
++   end
++   local
++      structure BitSet = gs_33
++      signature GRAPH_IS_CYCLIC = gs_71
++      structure Graph = gs_4
++      ../graphs/graph-is-cyclic.sml
++   in
++      structure gs_84 = GraphIsCyclic
++   end
++   local
++      open l4
++   in
++      structure gs_85 = IntHashTable
++   end
++   local
++      structure Graph = gs_4
++      structure IntHashTable = gs_85
++      structure List = gs_2
++      ../graphs/subgraph.sml
++   in
++      signature gs_86 = SUBGRAPH_VIEW
++      structure gs_87 = SubgraphView
++   end
++   local
++      structure Graph = gs_4
++      structure Int = gs_1
++      structure ListMergeSort = gs_0
++      ../graphs/ugraph.sml
++   in
++      signature gs_88 = UNDIRECTED_GRAPH_VIEW
++      structure gs_89 = UndirectedGraphView
++   end
++   local
++      structure Graph = gs_4
++      structure HashArray = gs_56
++      structure List = gs_2
++      structure URef = gs_51
++      ../graphs/graph-minor.sml
++   in
++      signature gs_90 = GRAPH_MINOR_VIEW
++      structure gs_91 = GraphMinorView
++   end
++   local
++      signature ARRAY = gs_13
++      signature GRAPH_IMPLEMENTATION = gs_29
++      structure Graph = gs_4
++      structure List = gs_2
++      ../graphs/udgraph.sml
++   in
++      functor gs_92 = UndirectedGraph
++   end
++   local
++      signature GRAPH = gs_3
++      ../graphs/bigraph.sig
++   in
++      signature gs_93 = BIPARTITE_GRAPH
++   end
++   local
++      structure Graph = gs_4
++      structure HashArray = gs_56
++      signature SUBGRAPH_P_VIEW = gs_57
++      structure Subgraph_P_View = gs_58
++      ../graphs/acyclic-graph.sml
++   in
++      signature gs_94 = ACYCLIC_SUBGRAPH_VIEW
++      structure gs_95 = AcyclicSubgraphView
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/singleton.sml
++   in
++      signature gs_96 = SINGLETON_GRAPH_VIEW
++      structure gs_97 = SingletonGraphView
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      signature ALL_PAIRS_SHORTEST_PATHS = gs_68
++      structure Array = gs_9
++      structure Graph = gs_4
++      functor NodePriorityQueue = gs_15
++      signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
++      ../graphs/dijkstra.sml
++   in
++      functor gs_98 = Dijkstra
++   end
++   local
++      signature ABELIAN_GROUP = gs_10
++      signature ABELIAN_GROUP_WITH_INF = gs_11
++      signature ALL_PAIRS_SHORTEST_PATHS = gs_68
++      structure Array = gs_9
++      structure Array2 = gs_67
++      functor BellmanFord = gs_75
++      functor Dijkstra = gs_98
++      functor DirectedGraph = gs_80
++      structure DirectedGraph = gs_81
++      structure Graph = gs_4
++      structure HashArray = gs_56
++      signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
++      signature UNION_GRAPH_VIEW = gs_5
++      structure UnionGraphView = gs_6
++      ../graphs/johnson.sml
++   in
++      functor gs_99 = Johnson
++   end
++   local
++      structure Graph = gs_4
++      ../graphs/matching.sig
++   in
++      signature gs_100 = BIPARTITE_MATCHING
++   end
++   local
++      structure Array = gs_9
++      signature GRAPH_SIMPLE_CYCLES = gs_74
++      structure Graph = gs_4
++      structure GraphSCC = gs_32
++      ../graphs/graph-cycles.sml
++   in
++      structure gs_101 = GraphCycles
++   end
++   local
++      structure Array = gs_9
++      signature BIPARTITE_MATCHING = gs_100
++      structure Graph = gs_4
++      structure List = gs_2
++      ../graphs/matching.sml
++   in
++      structure gs_102 = BipartiteMatching
++   end
++   local
++      ../graphs/closed-semi-ring.sig
++   in
++      signature gs_103 = CLOSED_SEMI_RING
++   end
++in
++   signature ABELIAN_GROUP = gs_10
++   signature ABELIAN_GROUP_WITH_INF = gs_11
++   signature ACYCLIC_SUBGRAPH_VIEW = gs_94
++   signature ALL_PAIRS_SHORTEST_PATHS = gs_68
++   structure AcyclicSubgraphView = gs_95
++   signature BIPARTITE_GRAPH = gs_93
++   signature BIPARTITE_MATCHING = gs_100
++   functor BellmanFord = gs_75
++   structure BipartiteMatching = gs_102
++   signature CLOSED_SEMI_RING = gs_103
++   functor Dijkstra = gs_98
++   functor DirectedGraph = gs_80
++   structure DirectedGraph = gs_81
++   functor FloydWarshall = gs_70
++   signature GRAPH = gs_3
++   signature GRAPH_BICONNECTED_COMPONENTS = gs_38
++   signature GRAPH_BREATH_FIRST_SEARCH = gs_36
++   signature GRAPH_COMBINATIONS = gs_21
++   signature GRAPH_DEPTH_FIRST_SEARCH = gs_34
++   signature GRAPH_IMPLEMENTATION = gs_29
++   signature GRAPH_IS_CYCLIC = gs_71
++   signature GRAPH_MINOR_VIEW = gs_90
++   signature GRAPH_SIMPLE_CYCLES = gs_74
++   signature GRAPH_SNAPSHOT = gs_63
++   signature GRAPH_STRONGLY_CONNECTED_COMPONENTS = gs_31
++   signature GRAPH_TOPOLOGICAL_SORT = gs_40
++   signature GRAPH_WRAPPERS = gs_82
++   structure Graph = gs_4
++   structure GraphBCC = gs_39
++   structure GraphBFS = gs_37
++   structure GraphCombinations = gs_26
++   structure GraphCycles = gs_101
++   structure GraphDFS = gs_35
++   structure GraphIsCyclic = gs_84
++   structure GraphMinorView = gs_91
++   structure GraphSCC = gs_32
++   functor GraphSnapShot = gs_64
++   structure GraphTopsort = gs_76
++   structure GraphWrappers = gs_83
++   signature ISOMORPHIC_GRAPH_VIEW = gs_17
++   structure IsomorphicGraphView = gs_18
++   functor Johnson = gs_99
++   structure Kruskal = gs_55
++   signature MAX_FLOW = gs_65
++   signature MIN_COST_SPANNING_TREE = gs_49
++   signature MIN_CUT = gs_12
++   functor MaxFlow = gs_66
++   functor MinCut = gs_16
++   signature NODE_PARTITION = gs_53
++   signature NODE_PRIORITY_QUEUE = gs_14
++   signature NO_ENTRY_VIEW = gs_44
++   signature NO_EXIT_VIEW = gs_45
++   structure NoEntryView = gs_46
++   structure NoExitView = gs_47
++   structure NodePartition = gs_54
++   functor NodePriorityQueue = gs_15
++   signature PRINT_GRAPH = gs_42
++   structure PrintGraph = gs_43
++   signature READONLY_GRAPH_VIEW = gs_27
++   signature RENAMED_GRAPH_VIEW = gs_24
++   signature REVERSED_GRAPH_VIEW = gs_22
++   structure ReadOnlyGraphView = gs_28
++   structure RenamedGraphView = gs_25
++   structure ReversedGraphView = gs_23
++   signature SINGLETON_GRAPH_VIEW = gs_96
++   signature SINGLE_ENTRY_MULTIPLE_EXIT_VIEW = gs_19
++   signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
++   signature START_STOP_VIEW = gs_61
++   signature SUBGRAPH_P_VIEW = gs_57
++   signature SUBGRAPH_VIEW = gs_86
++   structure SingleEntryMultipleExit = gs_20
++   structure SingletonGraphView = gs_97
++   structure StartStopView = gs_62
++   structure SubgraphView = gs_87
++   structure Subgraph_P_View = gs_58
++   signature TRACE_SUBGRAPH_VIEW = gs_59
++   signature TRANSITIVE_CLOSURE = gs_77
++   structure TraceView = gs_60
++   structure TransitiveClosure = gs_78
++   signature UNDIRECTED_GRAPH_VIEW = gs_88
++   signature UNION_GRAPH_VIEW = gs_5
++   signature UPDATE_GRAPH_INFO = gs_72
++   functor UndirectedGraph = gs_92
++   structure UndirectedGraphView = gs_89
++   structure UnionGraphView = gs_6
++   structure UpdateGraphInfo = gs_73
++end
++end
++
++end
+diff --git a/mlb/HPPA.mlb b/mlb/HPPA.mlb
+new file mode 100644
+index 0000000..f803709
+--- /dev/null
++++ b/mlb/HPPA.mlb
+@@ -0,0 +1,492 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l11 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_46 = Word32
++  basis l157 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       structure Format = gs_44
-+       functor GasPseudoOps = gs_42
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE = gs_6
-+       signature MLTREE_EVAL = gs_24
-+       signature PSEUDO_OPS_BASIS = gs_41
-+       structure PseudoOpsBasisTyp = gs_45
-+       functor PseudoOpsLittle = gs_43
-+       structure Word32 = gs_46
-+       ../alpha/flowgraph/alphaGasPseudoOps.sml
-+    in
-+       functor gs_47 = AlphaGasPseudoOps
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_48 = ARCH_SPILL_INSTR
++  basis l16 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       signature ARCH_SPILL_INSTR = gs_48
-+       functor AlphaInstr = gs_19
-+       functor AlphaRewrite = gs_40
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       ../alpha/ra/alphaSpillInstr.sml
-+    in
-+       functor gs_49 = AlphaSpillInstr
++  basis l37 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_50 = MLTreeMult
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = CellsBasis
++   end
++   local
++      open l4
++   in
++      functor gs_1 = Shuffle
++   end
++   local
++      open l11
++   in
++      structure gs_2 = Option
++   end
++   local
++      open l16
++   in
++      signature gs_3 = MLRISC_ERROR_MSG
++      structure gs_4 = MLRiscErrorMsg
++   end
++   local
++      open l4
++   in
++      signature gs_5 = REGION
++   end
++   local
++      open l4
++   in
++      signature gs_6 = CONSTANT
++   end
++   local
++      open l4
++   in
++      signature gs_7 = MLTREE
++   end
++   local
++      open l4
++   in
++      signature gs_8 = CELLS_BASIS
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Label
++   end
++   local
++      open l37
++   in
++      structure gs_10 = Annotations
++   end
++   local
++      open l4
++   in
++      functor gs_11 = Cells
++   end
++   local
++      open l11
++   in
++      structure gs_12 = Int
++   end
++   local
++      open l4
++   in
++      signature gs_13 = CELLS
++   end
++   local
++      signature CELLS = gs_13
++      functor Cells = gs_11
++      structure CellsBasis = gs_0
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      ../hppa/instructions/hppaCells.sml
++   in
++      signature gs_14 = HPPACELLS
++      structure gs_15 = HppaCells
++   end
++   local
++      structure Annotations = gs_10
++      signature CELLS_BASIS = gs_8
++      signature CONSTANT = gs_6
++      structure CellsBasis = gs_0
++      signature HPPACELLS = gs_14
++      structure HppaCells = gs_15
++      structure Label = gs_9
++      signature MLTREE = gs_7
++      signature REGION = gs_5
++      ../hppa/instructions/hppaInstr.sml
++   in
++      signature gs_16 = HPPAINSTR
++      functor gs_17 = HppaInstr
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      ../hppa/instructions/hppaShuffle.sig
++   in
++      signature gs_18 = HPPASHUFFLE
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      signature HPPASHUFFLE = gs_18
++      functor HppaInstr = gs_17
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      structure Option = gs_2
++      functor Shuffle = gs_1
++      ../hppa/instructions/hppaShuffle.sml
++   in
++      functor gs_19 = HppaShuffle
++   end
++   local
++      open l4
++   in
++      signature gs_20 = INSTRUCTION_EMITTER
++   end
++   local
++      open l11
++   in
++      structure gs_21 = IntInf
++   end
++   local
++      open l11
++   in
++      structure gs_22 = Word8
++   end
++   local
++      open l11
++   in
++      structure gs_23 = Word32
++   end
++   local
++      open l4
++   in
++      signature gs_24 = CODE_STRING
++   end
++   local
++      open l4
++   in
++      signature gs_25 = INSTRUCTION_STREAM
++   end
++   local
++      open l4
++   in
++      signature gs_26 = MLTREE_EVAL
++   end
++   local
++      signature CODE_STRING = gs_24
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      signature INSTRUCTION_EMITTER = gs_20
++      signature INSTRUCTION_STREAM = gs_25
++      structure IntInf = gs_21
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREE_EVAL = gs_26
++      structure Option = gs_2
++      structure Word32 = gs_23
++      structure Word8 = gs_22
++      ../hppa/emit/hppaMC.sml
++   in
++      functor gs_27 = HppaMCEmitter
++   end
++   local
++      signature CELLS_BASIS = gs_8
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      ../hppa/mltree/hppaMillicode.sig
++   in
++      signature gs_28 = HPPA_MILLICODE
++   end
++   local
++      open l4
++   in
++      signature gs_29 = ASM_FORMAT_UTIL
++      structure gs_30 = AsmFormatUtil
++   end
++   local
++      open l4
++   in
++      signature gs_31 = ASM_STREAM
++      structure gs_32 = AsmStream
++   end
++   local
++      open l11
++   in
++      structure gs_33 = TextIO
++   end
++   local
++      open l11
++   in
++      structure gs_34 = String
++   end
++   local
++      open l4
++   in
++      structure gs_35 = AsmFlags
++   end
++   local
++      signature ASM_FORMAT_UTIL = gs_29
++      signature ASM_STREAM = gs_31
++      structure Annotations = gs_10
++      structure AsmFlags = gs_35
++      structure AsmFormatUtil = gs_30
++      structure AsmStream = gs_32
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      signature HPPASHUFFLE = gs_18
++      functor HppaInstr = gs_17
++      signature INSTRUCTION_EMITTER = gs_20
++      signature INSTRUCTION_STREAM = gs_25
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREE_EVAL = gs_26
++      structure String = gs_34
++      structure TextIO = gs_33
++      ../hppa/emit/hppaAsm.sml
++   in
++      functor gs_36 = HppaAsmEmitter
++   end
++   local
++      open l4
++   in
++      signature gs_37 = INSTRUCTIONS
++   end
++   local
++      structure CellsBasis = gs_0
++      signature INSTRUCTIONS = gs_37
++      signature MLTREE = gs_7
++      ../hppa/mltree/hppaLabelComp.sig
++   in
++      signature gs_38 = LABEL_COMP
++   end
++   local
++      open l4
++   in
++      signature gs_39 = ARCH_SPILL_INSTR
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      ../hppa/ra/hppaRewrite.sml
++   in
++      functor gs_40 = HppaRewrite
++   end
++   local
++      signature ARCH_SPILL_INSTR = gs_39
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      functor HppaRewrite = gs_40
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      ../hppa/ra/hppaSpillInstr.sml
++   in
++      functor gs_41 = HppaSpillInstr
++   end
++   local
++      open l4
++   in
++      signature gs_42 = FREQUENCY_PROPERTIES
++   end
++   local
++      open l37
++   in
++      signature gs_43 = PROBABILITY
++      structure gs_44 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_45 = MLRiscAnnotations
++   end
++   local
++      signature FREQUENCY_PROPERTIES = gs_42
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      structure MLRiscAnnotations = gs_45
++      signature PROBABILITY = gs_43
++      structure Probability = gs_44
++      ../hppa/instructions/hppaFreqProps.sml
++   in
++      functor gs_46 = HppaFreqProps
++   end
++   local
++      open l4
++   in
++      signature gs_47 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l4
++   in
++      functor gs_48 = GasPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_49 = PseudoOpsBig
++   end
++   local
++      open l157
++   in
++      structure gs_50 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_51 = PseudoOpsBasisTyp
++   end
++   local
++      structure Format = gs_50
++      functor GasPseudoOps = gs_48
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREE = gs_7
++      signature MLTREE_EVAL = gs_26
++      signature PSEUDO_OPS_BASIS = gs_47
++      structure PseudoOpsBasisTyp = gs_51
++      functor PseudoOpsBig = gs_49
++      structure Word32 = gs_23
++      ../hppa/flowgraph/hppaGasPseudoOps.sml
++   in
++      functor gs_52 = HppaGasPseudoOps
++   end
++   local
++      open l4
++   in
++      signature gs_53 = DELAY_SLOT_PROPERTIES
++   end
++   local
++      open l4
++   in
++      signature gs_54 = INSN_PROPERTIES
++   end
++   local
++      structure CellsBasis = gs_0
++      signature DELAY_SLOT_PROPERTIES = gs_53
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      signature INSN_PROPERTIES = gs_54
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      structure Option = gs_2
++      ../hppa/backpatch/hppaDelaySlotProps.sml
++   in
++      functor gs_55 = HppaDelaySlots
++   end
++   local
++      open l11
++   in
++      structure gs_56 = Word
++   end
++   local
++      open l4
++   in
++      signature gs_57 = MLTREE_HASH
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      functor HppaInstr = gs_17
++      signature INSN_PROPERTIES = gs_54
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREE_EVAL = gs_26
++      signature MLTREE_HASH = gs_57
++      structure Option = gs_2
++      structure Word = gs_56
++      ../hppa/instructions/hppaProps.sml
++   in
++      functor gs_58 = HppaProps
++   end
++   local
++      open l4
++   in
++      signature gs_59 = SDI_JUMPS
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      signature HPPASHUFFLE = gs_18
++      functor HppaInstr = gs_17
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREE_EVAL = gs_26
++      signature SDI_JUMPS = gs_59
++      structure Word = gs_56
++      ../hppa/backpatch/hppaJumps.sml
++   in
++      functor gs_60 = HppaJumps
++   end
++   local
++      open l4
++   in
++      functor gs_61 = MLTreeMult
++   end
++   local
++      open l4
++   in
++      functor gs_62 = MLTreeGen
++   end
++   local
++      open l4
++   in
++      signature gs_63 = MLTREECOMP
++      signature gs_64 = MLTREE_EXTENSION_COMP
++   end
++   local
++      structure CellsBasis = gs_0
++      signature HPPAINSTR = gs_16
++      signature HPPA_MILLICODE = gs_28
++      functor HppaInstr = gs_17
++      signature LABEL_COMP = gs_38
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_3
++      structure MLRiscAnnotations = gs_45
++      structure MLRiscErrorMsg = gs_4
++      signature MLTREECOMP = gs_63
++      signature MLTREE_EXTENSION_COMP = gs_64
++      functor MLTreeGen = gs_62
++      functor MLTreeMult = gs_61
++      structure Word32 = gs_23
++      ../hppa/mltree/hppa.sml
++   in
++      functor gs_65 = Hppa
++   end
++in
++   signature HPPACELLS = gs_14
++   signature HPPAINSTR = gs_16
++   signature HPPASHUFFLE = gs_18
++   signature HPPA_MILLICODE = gs_28
++   functor Hppa = gs_65
++   functor HppaAsmEmitter = gs_36
++   structure HppaCells = gs_15
++   functor HppaDelaySlots = gs_55
++   functor HppaFreqProps = gs_46
++   functor HppaGasPseudoOps = gs_52
++   functor HppaInstr = gs_17
++   functor HppaJumps = gs_60
++   functor HppaMCEmitter = gs_27
++   functor HppaProps = gs_58
++   functor HppaRewrite = gs_40
++   functor HppaShuffle = gs_19
++   functor HppaSpillInstr = gs_41
++   signature LABEL_COMP = gs_38
++end
++end
++
++end
+diff --git a/mlb/IA32-Peephole.mlb b/mlb/IA32-Peephole.mlb
+new file mode 100644
+index 0000000..078990a
+--- /dev/null
++++ b/mlb/IA32-Peephole.mlb
+@@ -0,0 +1,60 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l8 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_51 = MLTreeGen
++  basis l4 =
++    bas
++      (* $Peephole.cm(=(proxyLib.cm):.)/Peephole.cm =??=> *) Peephole.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_52 = IntInf
++  basis l16 =
++    bas
++      (* $IA32.cm(=(proxyLib.cm):.)/IA32.cm =??=> *) IA32.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_53 = Int32
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = PEEPHOLE
++   end
++   local
++      open l8
++   in
++      structure gs_1 = CellsBasis
++   end
++   local
++      open l8
++   in
++      signature gs_2 = MLTREE_EVAL
++   end
++   local
++      open l16
++   in
++      signature gs_3 = X86INSTR
++      functor gs_4 = X86Instr
++   end
++   local
++      structure CellsBasis = gs_1
++      signature MLTREE_EVAL = gs_2
++      signature PEEPHOLE = gs_0
++      signature X86INSTR = gs_3
++      functor X86Instr = gs_4
++      ../x86/instructions/x86Peephole.sml
++   in
++      functor gs_5 = X86Peephole
++   end
++in
++   functor X86Peephole = gs_5
++end
++end
++
++end
+diff --git a/mlb/IA32.mlb b/mlb/IA32.mlb
+new file mode 100644
+index 0000000..50731cd
+--- /dev/null
++++ b/mlb/IA32.mlb
+@@ -0,0 +1,800 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l35 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_54 = List
++  basis l112 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_55 = MLTREECOMP
-+       signature gs_56 = MLTREE_EXTENSION_COMP
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       signature ALPHACELLS = gs_16
-+       signature ALPHAINSTR = gs_18
-+       structure AlphaCells = gs_17
-+       functor AlphaInstr = gs_19
-+       signature CELLS_BASIS = gs_7
-+       structure CellsBasis = gs_8
-+       signature MLTREE = gs_6
-+       ../alpha/mltree/alphaPseudoInstr.sig
-+    in
-+       signature gs_57 = ALPHA_PSEUDO_INSTR
++  basis l12 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       signature ALPHA_PSEUDO_INSTR = gs_57
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       structure Int32 = gs_53
-+       structure IntInf = gs_52
-+       structure Label = gs_9
-+       structure List = gs_54
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscAnnotations = gs_3
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREECOMP = gs_55
-+       signature MLTREE_EXTENSION_COMP = gs_56
-+       functor MLTreeGen = gs_51
-+       functor MLTreeMult = gs_50
-+       structure Word = gs_23
-+       structure Word32 = gs_46
-+       ../alpha/mltree/alpha.sml
-+    in
-+       functor gs_58 = Alpha
++  basis l236 =
++    bas
++      (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       functor gs_59 = Shuffle
++  basis l39 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       signature ALPHASHUFFLE = gs_28
-+       functor AlphaInstr = gs_19
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       structure Option = gs_22
-+       functor Shuffle = gs_59
-+       ../alpha/instructions/alphaShuffle.sml
-+    in
-+       functor gs_60 = AlphaShuffle
++  basis l317 =
++    bas
++      (* $MLTREE.cm(=(proxyLib.cm):.)/MLTREE.cm =??=> *) MLTREE.mlb
 +    end
-+    local
-+       open l42
-+    in
-+       structure gs_61 = Word8
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = ARCH_SPILL_INSTR
++   end
++   local
++      open l4
++   in
++      structure gs_1 = CellsBasis
++   end
++   local
++      open l12
++   in
++      signature gs_2 = MLRISC_ERROR_MSG
++      structure gs_3 = MLRiscErrorMsg
++   end
++   local
++      open l4
++   in
++      signature gs_4 = INSN_PROPERTIES
++   end
++   local
++      open l4
++   in
++      signature gs_5 = REGION
++   end
++   local
++      open l4
++   in
++      signature gs_6 = CONSTANT
++   end
++   local
++      open l4
++   in
++      signature gs_7 = MLTREE
++   end
++   local
++      open l4
++   in
++      signature gs_8 = CELLS_BASIS
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Label
++   end
++   local
++      open l35
++   in
++      structure gs_10 = Int32
++   end
++   local
++      open l39
++   in
++      structure gs_11 = Annotations
++   end
++   local
++      open l4
++   in
++      functor gs_12 = Cells
++   end
++   local
++      open l35
++   in
++      structure gs_13 = Int
++   end
++   local
++      open l4
++   in
++      signature gs_14 = CELLS
++   end
++   local
++      signature CELLS = gs_14
++      functor Cells = gs_12
++      structure CellsBasis = gs_1
++      structure Int = gs_13
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      ../x86/instructions/x86Cells.sml
++   in
++      signature gs_15 = X86CELLS
++      structure gs_16 = X86Cells
++   end
++   local
++      structure Annotations = gs_11
++      signature CELLS_BASIS = gs_8
++      signature CONSTANT = gs_6
++      structure CellsBasis = gs_1
++      structure Int32 = gs_10
++      structure Label = gs_9
++      signature MLTREE = gs_7
++      signature REGION = gs_5
++      signature X86CELLS = gs_15
++      structure X86Cells = gs_16
++      ../x86/instructions/x86Instr.sml
++   in
++      signature gs_17 = X86INSTR
++      functor gs_18 = X86Instr
++   end
++   local
++      signature ARCH_SPILL_INSTR = gs_0
++      structure CellsBasis = gs_1
++      signature INSN_PROPERTIES = gs_4
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/ra/x86SpillInstr.sml
++   in
++      functor gs_19 = X86SpillInstr
++   end
++   local
++      structure CellsBasis = gs_1
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/instructions/x86MemRegs.sig
++   in
++      signature gs_20 = MEMORY_REGISTERS
++   end
++   local
++      open l4
++   in
++      signature gs_21 = MC_EMIT
++   end
++   local
++      open l35
++   in
++      structure gs_22 = Word32
++   end
++   local
++      open l35
++   in
++      structure gs_23 = Word8
++   end
++   local
++      open l35
++   in
++      structure gs_24 = LargeWord
++   end
++   local
++      open l35
++   in
++      structure gs_25 = Word8Vector
++   end
++   local
++      open l35
++   in
++      structure gs_26 = Option
++   end
++   local
++      open l35
++   in
++      structure gs_27 = Word
++   end
++   local
++      open l4
++   in
++      signature gs_28 = INSTRUCTION_EMITTER
++   end
++   local
++      open l4
++   in
++      signature gs_29 = MLTREE_EVAL
++   end
++   local
++      structure CellsBasis = gs_1
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/instructions/x86Shuffle.sig
++   in
++      signature gs_30 = X86SHUFFLE
++   end
++   local
++      structure CellsBasis = gs_1
++      signature INSTRUCTION_EMITTER = gs_28
++      structure Int32 = gs_10
++      structure LargeWord = gs_24
++      signature MC_EMIT = gs_21
++      signature MEMORY_REGISTERS = gs_20
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE_EVAL = gs_29
++      structure Option = gs_26
++      structure Word = gs_27
++      structure Word32 = gs_22
++      structure Word8 = gs_23
++      structure Word8Vector = gs_25
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      signature X86SHUFFLE = gs_30
++      ../x86/x86MC.sml
++   in
++      functor gs_31 = X86MCEmitter
++   end
++   local
++      open l4
++   in
++      signature gs_32 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l4
++   in
++      functor gs_33 = DarwinPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_34 = PseudoOpsLittle
++   end
++   local
++      open l112
++   in
++      structure gs_35 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_36 = PseudoOpsBasisTyp
++   end
++   local
++      functor DarwinPseudoOps = gs_33
++      structure Format = gs_35
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE = gs_7
++      signature MLTREE_EVAL = gs_29
++      signature PSEUDO_OPS_BASIS = gs_32
++      structure PseudoOpsBasisTyp = gs_36
++      functor PseudoOpsLittle = gs_34
++      structure Word32 = gs_22
++      ../x86/flowgraph/x86-darwin-pseudo-ops.sml
++   in
++      functor gs_37 = X86DarwinPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_38 = Shuffle
++   end
++   local
++      open l35
++   in
++      structure gs_39 = List
++   end
++   local
++      structure CellsBasis = gs_1
++      structure List = gs_39
++      functor Shuffle = gs_38
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      signature X86SHUFFLE = gs_30
++      ../x86/instructions/x86Shuffle.sml
++   in
++      functor gs_40 = X86Shuffle
++   end
++   local
++      open l4
++   in
++      signature gs_41 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l4
++   in
++      signature gs_42 = MLTREE_STREAM
++   end
++   local
++      ../x86/instructions/x86instr-ext.sml
++   in
++      structure gs_43 = X86InstrExt
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_41
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE_STREAM = gs_42
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      structure X86InstrExt = gs_43
++      ../x86/instructions/x86comp-instr-ext.sml
++   in
++      signature gs_44 = X86COMP_INSTR_EXT
++      functor gs_45 = X86CompInstrExt
++   end
++   local
++      open l4
++   in
++      functor gs_46 = GasPseudoOps
++   end
++   local
++      structure Format = gs_35
++      functor GasPseudoOps = gs_46
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE = gs_7
++      signature MLTREE_EVAL = gs_29
++      signature PSEUDO_OPS_BASIS = gs_32
++      structure PseudoOpsBasisTyp = gs_36
++      functor PseudoOpsLittle = gs_34
++      structure Word32 = gs_22
++      ../x86/flowgraph/x86GasPseudoOps.sml
++   in
++      functor gs_47 = X86GasPseudoOps
++   end
++   local
++      open l4
++   in
++      signature gs_48 = C_CALLS
++   end
++   local
++      open l4
++   in
++      structure gs_49 = CTypes
++   end
++   local
++      open l35
++   in
++      structure gs_50 = IntInf
++   end
++   local
++      open l4
++   in
++      structure gs_51 = MLRiscAnnotations
++   end
++   local
++      open l35
++   in
++      structure gs_52 = String
++   end
++   local
++      structure CTypes = gs_49
++      signature C_CALLS = gs_48
++      structure Int = gs_13
++      structure Int32 = gs_10
++      structure IntInf = gs_50
++      structure List = gs_39
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscAnnotations = gs_51
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE = gs_7
++      structure String = gs_52
++      structure Word = gs_27
++      signature X86CELLS = gs_15
++      structure X86Cells = gs_16
++      structure X86InstrExt = gs_43
++      ../x86/c-calls/ia32-svid.sml
++   in
++      functor gs_53 = IA32SVID_CCalls
++   end
++   local
++      open l4
++   in
++      signature gs_54 = FREQUENCY_PROPERTIES
++   end
++   local
++      open l39
++   in
++      signature gs_55 = PROBABILITY
++      structure gs_56 = Probability
++   end
++   local
++      signature FREQUENCY_PROPERTIES = gs_54
++      structure MLRiscAnnotations = gs_51
++      signature PROBABILITY = gs_55
++      structure Probability = gs_56
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/instructions/x86FreqProps.sml
++   in
++      functor gs_57 = X86FreqProps
++   end
++   local
++      open l4
++   in
++      signature gs_58 = MLTREE_HASH
++   end
++   local
++      structure CellsBasis = gs_1
++      signature INSN_PROPERTIES = gs_4
++      structure Int = gs_13
++      structure Int32 = gs_10
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE_EVAL = gs_29
++      signature MLTREE_HASH = gs_58
++      structure Word = gs_27
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/instructions/x86Props.sml
++   in
++      functor gs_59 = X86Props
++   end
++   local
++      open l4
++   in
++      signature gs_60 = SDI_JUMPS
++   end
++   local
++      signature MC_EMIT = gs_21
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE_EVAL = gs_29
++      signature SDI_JUMPS = gs_60
++      structure Word8Vector = gs_25
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      signature X86SHUFFLE = gs_30
++      ../x86/backpatch/x86Jumps.sml
++   in
++      functor gs_61 = X86Jumps
++   end
++   local
++      signature CELLS_BASIS = gs_8
++      structure CellsBasis = gs_1
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/ra/x86Rewrite.sig
++   in
++      signature gs_62 = X86REWRITE
++   end
++   local
++      open l4
++   in
++      signature gs_63 = CFG_OPTIMIZATION
++   end
++   local
++      open l4
++   in
++      functor gs_64 = GetReg
++   end
++   local
++      open l4
++   in
++      functor gs_65 = RegisterAllocator
++   end
++   local
++      open l4
++   in
++      functor gs_66 = MemoryRA
++   end
++   local
++      open l4
++   in
++      functor gs_67 = RADeadCodeElim
++   end
++   local
++      open l4
++   in
++      functor gs_68 = ClusterRA
++   end
++   local
++      open l4
++   in
++      signature gs_69 = LIVENESS
++      functor gs_70 = Liveness
++   end
++   local
++      open l4
++   in
++      signature gs_71 = PRINT_FLOWGRAPH
++      functor gs_72 = PrintFlowgraph
++   end
++   local
++      open l112
++   in
++      structure gs_73 = IntHashTable
++   end
++   local
++      open l12
++   in
++      signature gs_74 = MLRISC_CONTROL
++      structure gs_75 = MLRiscControl
++   end
++   local
++      open l236
++   in
++      structure gs_76 = Graph
++   end
++   local
++      open l35
++   in
++      structure gs_77 = Array
++   end
++   local
++      open l4
++   in
++      signature gs_78 = RA_SPILL
++   end
++   local
++      open l4
++   in
++      signature gs_79 = RA_SPILL_HEURISTICS
++   end
++   local
++      open l4
++   in
++      structure gs_80 = RAGraph
++   end
++   local
++      open l112
++   in
++      structure gs_81 = IntRedBlackMap
++   end
++   local
++      open l39
++   in
++      structure gs_82 = StringOutStream
++   end
++   local
++      open l4
++   in
++      signature gs_83 = ASM_STREAM
++      structure gs_84 = AsmStream
++   end
++   local
++      open l112
++   in
++      structure gs_85 = ListMergeSort
++   end
++   local
++      open l35
++   in
++      structure gs_86 = TextIO
++   end
++   local
++      open l35
++   in
++      structure gs_87 = ListPair
++   end
++   local
++      signature ASM_STREAM = gs_83
++      structure Annotations = gs_11
++      structure Array = gs_77
++      structure AsmStream = gs_84
++      signature CFG_OPTIMIZATION = gs_63
++      signature CONTROL_FLOW_GRAPH = gs_41
++      structure CellsBasis = gs_1
++      structure Graph = gs_76
++      signature INSN_PROPERTIES = gs_4
++      signature INSTRUCTION_EMITTER = gs_28
++      structure Int = gs_13
++      structure IntHashTable = gs_73
++      structure IntRedBlackMap = gs_81
++      signature LIVENESS = gs_69
++      structure Label = gs_9
++      structure List = gs_39
++      structure ListMergeSort = gs_85
++      structure ListPair = gs_87
++      functor Liveness = gs_70
++      signature MLRISC_CONTROL = gs_74
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscAnnotations = gs_51
++      structure MLRiscControl = gs_75
++      structure MLRiscErrorMsg = gs_3
++      structure String = gs_52
++      structure StringOutStream = gs_82
++      structure TextIO = gs_86
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/mltree/x86-fp.sml
++   in
++      functor gs_88 = X86FP
++   end
++   local
++      structure Annotations = gs_11
++      structure Array = gs_77
++      signature CFG_OPTIMIZATION = gs_63
++      signature CONTROL_FLOW_GRAPH = gs_41
++      structure CellsBasis = gs_1
++      functor ClusterRA = gs_68
++      functor GetReg = gs_64
++      structure Graph = gs_76
++      signature INSN_PROPERTIES = gs_4
++      signature INSTRUCTION_EMITTER = gs_28
++      structure IntHashTable = gs_73
++      signature LIVENESS = gs_69
++      structure List = gs_39
++      functor Liveness = gs_70
++      signature MLRISC_CONTROL = gs_74
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscControl = gs_75
++      structure MLRiscErrorMsg = gs_3
++      functor MemoryRA = gs_66
++      signature PRINT_FLOWGRAPH = gs_71
++      functor PrintFlowgraph = gs_72
++      functor RADeadCodeElim = gs_67
++      structure RAGraph = gs_80
++      signature RA_SPILL = gs_78
++      signature RA_SPILL_HEURISTICS = gs_79
++      functor RegisterAllocator = gs_65
++      functor X86FP = gs_88
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      functor X86SpillInstr = gs_19
++      ../x86/ra/x86RA.sml
++   in
++      functor gs_89 = X86RA
++   end
++   local
++      open l4
++   in
++      signature gs_90 = OMIT_FRAME_POINTER
++   end
++   local
++      open l35
++   in
++      structure gs_91 = General
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_41
++      structure CellsBasis = gs_1
++      structure General = gs_91
++      structure Graph = gs_76
++      structure Int32 = gs_10
++      structure IntHashTable = gs_73
++      structure ListPair = gs_87
++      signature MEMORY_REGISTERS = gs_20
++      signature MLRISC_CONTROL = gs_74
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscAnnotations = gs_51
++      structure MLRiscControl = gs_75
++      structure MLRiscErrorMsg = gs_3
++      signature OMIT_FRAME_POINTER = gs_90
++      structure Option = gs_26
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/omit-frameptr/x86omit-frameptr.sml
++   in
++      functor gs_92 = X86OmitFramePointer
++   end
++   local
++      open l4
++   in
++      signature gs_93 = ASM_FORMAT_UTIL
++      structure gs_94 = AsmFormatUtil
++   end
++   local
++      open l35
++   in
++      structure gs_95 = Char
++   end
++   local
++      open l4
++   in
++      structure gs_96 = AsmFlags
++   end
++   local
++      open l4
++   in
++      signature gs_97 = INSTRUCTION_STREAM
++   end
++   local
++      signature ASM_FORMAT_UTIL = gs_93
++      signature ASM_STREAM = gs_83
++      structure Annotations = gs_11
++      structure AsmFlags = gs_96
++      structure AsmFormatUtil = gs_94
++      structure AsmStream = gs_84
++      structure CellsBasis = gs_1
++      structure Char = gs_95
++      signature INSTRUCTION_EMITTER = gs_28
++      signature INSTRUCTION_STREAM = gs_97
++      structure Int = gs_13
++      structure Int32 = gs_10
++      signature MEMORY_REGISTERS = gs_20
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREE_EVAL = gs_29
++      structure Option = gs_26
++      structure String = gs_52
++      structure TextIO = gs_86
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      signature X86SHUFFLE = gs_30
++      ../x86/emit/x86Asm.sml
++   in
++      functor gs_98 = X86AsmEmitter
++   end
++   local
++      structure CellsBasis = gs_1
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscErrorMsg = gs_3
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      signature X86REWRITE = gs_62
++      ../x86/ra/x86Rewrite.sml
++   in
++      functor gs_99 = X86Rewrite
++   end
++   local
++      open l4
++   in
++      functor gs_100 = MLTreeGen
++   end
++   local
++      open l4
++   in
++      signature gs_101 = MLTREECOMP
++      signature gs_102 = MLTREE_EXTENSION_COMP
++   end
++   local
++      open l317
++   in
++      signature gs_103 = MLTREE_UTILS
++   end
++   local
++      structure Annotations = gs_11
++      structure CellsBasis = gs_1
++      structure Int = gs_13
++      structure Int32 = gs_10
++      structure Label = gs_9
++      structure List = gs_39
++      signature MLRISC_ERROR_MSG = gs_2
++      structure MLRiscAnnotations = gs_51
++      structure MLRiscErrorMsg = gs_3
++      signature MLTREECOMP = gs_101
++      signature MLTREE_EXTENSION_COMP = gs_102
++      signature MLTREE_STREAM = gs_42
++      signature MLTREE_UTILS = gs_103
++      functor MLTreeGen = gs_100
++      signature PROBABILITY = gs_55
++      structure Probability = gs_56
++      functor Shuffle = gs_38
++      structure Word = gs_27
++      structure Word32 = gs_22
++      signature X86INSTR = gs_17
++      functor X86Instr = gs_18
++      ../x86/mltree/x86.sml
++   in
++      functor gs_104 = X86
++   end
++in
++   functor IA32SVID_CCalls = gs_53
++   signature MEMORY_REGISTERS = gs_20
++   functor X86 = gs_104
++   functor X86AsmEmitter = gs_98
++   signature X86CELLS = gs_15
++   signature X86COMP_INSTR_EXT = gs_44
++   structure X86Cells = gs_16
++   functor X86CompInstrExt = gs_45
++   functor X86DarwinPseudoOps = gs_37
++   functor X86FP = gs_88
++   functor X86FreqProps = gs_57
++   functor X86GasPseudoOps = gs_47
++   signature X86INSTR = gs_17
++   functor X86Instr = gs_18
++   structure X86InstrExt = gs_43
++   functor X86Jumps = gs_61
++   functor X86MCEmitter = gs_31
++   functor X86OmitFramePointer = gs_92
++   functor X86Props = gs_59
++   functor X86RA = gs_89
++   signature X86REWRITE = gs_62
++   functor X86Rewrite = gs_99
++   signature X86SHUFFLE = gs_30
++   functor X86Shuffle = gs_40
++   functor X86SpillInstr = gs_19
++end
++end
++
++end
+diff --git a/mlb/Lib.mlb b/mlb/Lib.mlb
+new file mode 100644
+index 0000000..1f20ce2
+--- /dev/null
++++ b/mlb/Lib.mlb
+@@ -0,0 +1,263 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       signature gs_62 = CODE_STRING
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = ArraySlice
++   end
++   local
++      open l4
++   in
++      structure gs_1 = Array
++   end
++   local
++      open l4
++   in
++      structure gs_2 = Vector
++   end
++   local
++      open l4
++   in
++      structure gs_3 = General
++   end
++   local
++      open l4
++   in
++      structure gs_4 = List
++   end
++   local
++      open l4
++   in
++      structure gs_5 = Int
++   end
++   local
++      structure Array = gs_1
++      structure ArraySlice = gs_0
++      structure General = gs_3
++      structure Int = gs_5
++      structure List = gs_4
++      structure Vector = gs_2
++      ../library/dynamic-array.sml
++   in
++      structure gs_6 = DynArray
++   end
++   local
++      open l4
++   in
++      structure gs_7 = String
++   end
++   local
++      open l4
++   in
++      structure gs_8 = Word
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Word8
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Word8Array
++   end
++   local
++      ../library/bitset.sig
++   in
++      signature gs_11 = BITSET
++   end
++   local
++      signature BITSET = gs_11
++      structure String = gs_7
++      structure Word = gs_8
++      structure Word8 = gs_9
++      structure Word8Array = gs_10
++      ../library/bitset.sml
++   in
++      structure gs_12 = BitSet
++   end
++   local
++      open l4
++   in
++      structure gs_13 = TextIO
++   end
++   local
++      structure TextIO = gs_13
++      ../library/stringOutStream.sig
++   in
++      signature gs_14 = STRING_OUTSTREAM
++   end
++   local
++      structure String = gs_7
++      ../library/line-break.sml
++   in
++      signature gs_15 = LINE_BREAK
++      structure gs_16 = LineBreak
++   end
++   local
++      open l4
++   in
++      structure gs_17 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_18 = IntInf
++   end
++   local
++      structure Int = gs_5
++      structure IntInf = gs_18
++      structure List = gs_4
++      structure Real = gs_17
++      ../library/probability.sml
++   in
++      signature gs_19 = PROBABILITY
++      structure gs_20 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_21 = TextPrimIO
++   end
++   local
++      open l4
++   in
++      structure gs_22 = CharArraySlice
++   end
++   local
++      open l4
++   in
++      structure gs_23 = CharVectorSlice
++   end
++   local
++      open l4
++   in
++      structure gs_24 = IO
++   end
++   local
++      structure CharArraySlice = gs_22
++      structure CharVectorSlice = gs_23
++      structure IO = gs_24
++      structure List = gs_4
++      signature STRING_OUTSTREAM = gs_14
++      structure String = gs_7
++      structure TextIO = gs_13
++      structure TextPrimIO = gs_21
++      ../library/stringOutStream.sml
++   in
++      structure gs_25 = StringOutStream
++   end
++   local
++      ../library/catlist.sml
++   in
++      signature gs_26 = CATNETABLE_LIST
++      structure gs_27 = CatnetableList
++   end
++   local
++      ../library/priQueue.sig
++   in
++      signature gs_28 = PRIORITY_QUEUE
++   end
++   local
++      structure Array = gs_1
++      signature PRIORITY_QUEUE = gs_28
++      ../library/heap.sml
++   in
++      structure gs_29 = PriorityHeap
++   end
++   local
++      ../library/annotations.sig
++   in
++      signature gs_30 = ANNOTATIONS
++   end
++   local
++      signature ANNOTATIONS = gs_30
++      ../library/annotations.sml
++   in
++      structure gs_31 = Annotations
++   end
++   local
++      structure Array = gs_1
++      structure List = gs_4
++      structure Vector = gs_2
++      structure Word = gs_8
++      ../library/hash-array.sml
++   in
++      structure gs_32 = HashArray
++   end
++   local
++      ../library/cache.sml
++   in
++      signature gs_33 = CACHE_REF
++      structure gs_34 = CacheRef
++   end
++   local
++      ../library/sortedlist.sml
++   in
++      structure gs_35 = SortedList
++   end
++   local
++      structure Int = gs_5
++      signature PRIORITY_QUEUE = gs_28
++      ../library/priQueue.sml
++   in
++      structure gs_36 = PriorityQueue
++   end
++   local
++      open l4
++   in
++      signature gs_37 = INTEGER
++   end
++   local
++      signature INTEGER = gs_37
++      ../library/freq.sig
++   in
++      signature gs_38 = FREQ
++   end
++   local
++      signature FREQ = gs_38
++      structure Int = gs_5
++      ../library/freq.sml
++   in
++      structure gs_39 = Freq
++   end
++in
++   signature ANNOTATIONS = gs_30
++   structure Annotations = gs_31
++   signature BITSET = gs_11
++   structure BitSet = gs_12
++   signature CACHE_REF = gs_33
++   signature CATNETABLE_LIST = gs_26
++   structure CacheRef = gs_34
++   structure CatnetableList = gs_27
++   structure DynArray = gs_6
++   signature FREQ = gs_38
++   structure Freq = gs_39
++   structure HashArray = gs_32
++   signature LINE_BREAK = gs_15
++   structure LineBreak = gs_16
++   signature PRIORITY_QUEUE = gs_28
++   signature PROBABILITY = gs_19
++   structure PriorityHeap = gs_29
++   structure PriorityQueue = gs_36
++   structure Probability = gs_20
++   signature STRING_OUTSTREAM = gs_14
++   structure SortedList = gs_35
++   structure StringOutStream = gs_25
++end
++end
++
++end
+diff --git a/mlb/MLRISC.mlb b/mlb/MLRISC.mlb
+new file mode 100644
+index 0000000..1018698
+--- /dev/null
++++ b/mlb/MLRISC.mlb
+@@ -0,0 +1,1746 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l13 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       signature ALPHAINSTR = gs_18
-+       functor AlphaInstr = gs_19
-+       signature CODE_STRING = gs_62
-+       structure CellsBasis = gs_8
-+       signature INSTRUCTION_EMITTER = gs_30
-+       signature INSTRUCTION_STREAM = gs_38
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_24
-+       structure Option = gs_22
-+       structure Word32 = gs_46
-+       structure Word8 = gs_61
-+       ../alpha/emit/alphaMC.sml
-+    in
-+       functor gs_63 = AlphaMCEmitter
++  basis l19 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+ in
-+    signature ALPHACELLS = gs_16
-+    signature ALPHAINSTR = gs_18
-+    signature ALPHASHUFFLE = gs_28
-+    signature ALPHA_PSEUDO_INSTR = gs_57
-+    functor Alpha = gs_58
-+    functor AlphaAsmEmitter = gs_39
-+    structure AlphaCells = gs_17
-+    functor AlphaFreqProps = gs_20
-+    functor AlphaGasPseudoOps = gs_47
-+    functor AlphaInstr = gs_19
-+    functor AlphaJumps = gs_29
-+    functor AlphaMCEmitter = gs_63
-+    functor AlphaProps = gs_26
-+    functor AlphaRewrite = gs_40
-+    functor AlphaShuffle = gs_60
-+    functor AlphaSpillInstr = gs_49
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/AMD64-Peephole.mlb MLRISC-mlton/mlb/AMD64-Peephole.mlb
-*** MLRISC/mlb/AMD64-Peephole.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/AMD64-Peephole.mlb	2010-04-02 16:08:56.000000000 -0400
-***************
-*** 0 ****
---- 1,60 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $Peephole.cm(=(proxyLib.cm):.)/Peephole.cm =??=> *) Peephole.mlb
-+     end
-+   basis l16 = 
-+     bas
-+       (* $AMD64.cm(=(proxyLib.cm):.)/AMD64.cm =??=> *) AMD64.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = PEEPHOLE
++  basis l44 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = CellsBasis
++  basis l5 =
++    bas
++      (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
 +    end
-+    local
-+       open l8
-+    in
-+       signature gs_2 = MLTREE_EVAL
++  basis l9 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l16
-+    in
-+       signature gs_3 = AMD64INSTR
-+       functor gs_4 = AMD64Instr
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l5
++   in
++      structure gs_0 = Graph
++   end
++   local
++      open l9
++   in
++      structure gs_1 = Annotations
++   end
++   local
++      open l13
++   in
++      structure gs_2 = TextIO
++   end
++   local
++      open l19
++   in
++      signature gs_3 = MONO_HASH_TABLE
++   end
++   local
++      open l13
++   in
++      structure gs_4 = Array
++   end
++   local
++      structure Annotations = gs_1
++      structure Array = gs_4
++      signature MONO_HASH_TABLE = gs_3
++      ../instructions/cells-basis.sig
++   in
++      signature gs_5 = CELLS_BASIS
++   end
++   local
++      open l19
++   in
++      functor gs_6 = HashTableFn
++   end
++   local
++      open l13
++   in
++      structure gs_7 = String
++   end
++   local
++      open l13
++   in
++      structure gs_8 = Word
++   end
++   local
++      open l13
++   in
++      structure gs_9 = List
++   end
++   local
++      open l44
++   in
++      signature gs_10 = MLRISC_ERROR_MSG
++      structure gs_11 = MLRiscErrorMsg
++   end
++   local
++      open l13
++   in
++      structure gs_12 = Int
++   end
++   local
++      structure Annotations = gs_1
++      structure Array = gs_4
++      signature CELLS_BASIS = gs_5
++      functor HashTableFn = gs_6
++      structure Int = gs_12
++      structure List = gs_9
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      structure String = gs_7
++      structure Word = gs_8
++      ../instructions/cells-basis.sml
++   in
++      structure gs_13 = CellsBasis
++   end
++   local
++      structure CellsBasis = gs_13
++      ../instructions/cells.sig
++   in
++      signature gs_14 = CELLS
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      ../instructions/instructions.sig
++   in
++      signature gs_15 = INSTRUCTIONS
++   end
++   local
++      open l13
++   in
++      structure gs_16 = Word8
++   end
++   local
++      open l13
++   in
++      structure gs_17 = Int32
++   end
++   local
++      open l13
++   in
++      structure gs_18 = IntInf
++   end
++   local
++      open l13
++   in
++      structure gs_19 = Int64
++   end
++   local
++      open l13
++   in
++      structure gs_20 = Word32
++   end
++   local
++      structure Int32 = gs_17
++      structure Int64 = gs_19
++      structure IntInf = gs_18
++      structure Word32 = gs_20
++      ../mltree/machine-int.sig
++   in
++      signature gs_21 = MACHINE_INT
++   end
++   local
++      ../mltree/mltree-extension.sig
++   in
++      signature gs_22 = MLTREE_EXTENSION
++   end
++   local
++      ../mltree/mltree-basis.sig
++   in
++      signature gs_23 = MLTREE_BASIS
++   end
++   local
++      ../instructions/region.sig
++   in
++      signature gs_24 = REGION
++   end
++   local
++      ../instructions/constant.sig
++   in
++      signature gs_25 = CONSTANT
++   end
++   local
++      ../instructions/label-sig.sml
++   in
++      signature gs_26 = LABEL
++   end
++   local
++      signature LABEL = gs_26
++      structure Word = gs_8
++      ../instructions/label.sml
++   in
++      structure gs_27 = Label
++   end
++   local
++      structure Annotations = gs_1
++      signature CONSTANT = gs_25
++      structure CellsBasis = gs_13
++      structure Int32 = gs_17
++      structure Label = gs_27
++      signature MACHINE_INT = gs_21
++      signature MLTREE_BASIS = gs_23
++      signature MLTREE_EXTENSION = gs_22
++      signature REGION = gs_24
++      ../mltree/mltree.sig
++   in
++      signature gs_28 = MLTREE
++   end
++   local
++      open l19
++   in
++      structure gs_29 = Atom
++   end
++   local
++      structure Atom = gs_29
++      structure Label = gs_27
++      ../flowgraph/pseudo-ops-basis-typ.sml
++   in
++      structure gs_30 = PseudoOpsBasisTyp
++   end
++   local
++      structure Label = gs_27
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      structure Word8 = gs_16
++      ../flowgraph/pseudo-ops-basis.sig
++   in
++      signature gs_31 = PSEUDO_OPS_BASIS
++   end
++   local
++      signature PSEUDO_OPS_BASIS = gs_31
++      structure Word8 = gs_16
++      ../flowgraph/client-pseudo-ops.sig
++   in
++      signature gs_32 = CLIENT_PSEUDO_OPS
++   end
++   local
++      signature CLIENT_PSEUDO_OPS = gs_32
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      structure Word8 = gs_16
++      ../flowgraph/pseudo-ops.sig
++   in
++      signature gs_33 = PSEUDO_OPS
++   end
++   local
++      structure Annotations = gs_1
++      structure Graph = gs_0
++      signature INSTRUCTIONS = gs_15
++      structure Label = gs_27
++      signature PSEUDO_OPS = gs_33
++      structure TextIO = gs_2
++      ../flowgraph/cfg.sig
++   in
++      signature gs_34 = CONTROL_FLOW_GRAPH
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      ../emit/asmEmit.sig
++   in
++      signature gs_35 = ASSEMBLY_EMITTER
++   end
++   local
++      structure List = gs_9
++      signature MLTREE = gs_28
++      ../mltree/mltree-check-ty.sml
++   in
++      functor gs_36 = MLTreeCheckTy
++   end
++   local
++      open l5
++   in
++      signature gs_37 = GRAPH_IMPLEMENTATION
++   end
++   local
++      structure Array = gs_4
++      signature GRAPH_IMPLEMENTATION = gs_37
++      structure Graph = gs_0
++      ../ir-archive/dominator.sig
++   in
++      signature gs_38 = DOMINATOR_TREE
++   end
++   local
++      structure Array = gs_4
++      signature DOMINATOR_TREE = gs_38
++      signature GRAPH_IMPLEMENTATION = gs_37
++      structure Graph = gs_0
++      ../ir-archive/loop-structure.sig
++   in
++      signature gs_39 = LOOP_STRUCTURE
++   end
++   local
++      open l9
++   in
++      structure gs_40 = BitSet
++   end
++   local
++      open l5
++   in
++      signature gs_41 = REVERSED_GRAPH_VIEW
++      structure gs_42 = ReversedGraphView
++   end
++   local
++      structure Array = gs_4
++      structure BitSet = gs_40
++      signature DOMINATOR_TREE = gs_38
++      signature GRAPH_IMPLEMENTATION = gs_37
++      structure Graph = gs_0
++      structure List = gs_9
++      signature REVERSED_GRAPH_VIEW = gs_41
++      structure ReversedGraphView = gs_42
++      ../ir-archive/dominator.sml
++   in
++      functor gs_43 = DominatorTree
++   end
++   local
++      structure Annotations = gs_1
++      structure Label = gs_27
++      signature PSEUDO_OPS = gs_33
++      ../instructions/stream.sig
++   in
++      signature gs_44 = INSTRUCTION_STREAM
++   end
++   local
++      structure Annotations = gs_1
++      signature INSTRUCTION_STREAM = gs_44
++      structure Label = gs_27
++      signature PSEUDO_OPS = gs_33
++      ../instructions/stream.sml
++   in
++      functor gs_45 = InstructionStream
++   end
++   local
++      signature MLTREE = gs_28
++      ../mltree/mltree-size.sig
++   in
++      signature gs_46 = MLTREE_SIZE
++   end
++   local
++      structure Annotations = gs_1
++      structure CellsBasis = gs_13
++      signature MLTREE = gs_28
++      signature MLTREE_SIZE = gs_46
++      ../mltree/mltree-gen.sig
++   in
++      signature gs_47 = MLTREEGEN
++   end
++   local
++      signature INSTRUCTION_STREAM = gs_44
++      signature MLTREE = gs_28
++      ../mltree/mltree-stream.sig
++   in
++      signature gs_48 = MLTREE_STREAM
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      signature MLTREE = gs_28
++      signature MLTREEGEN = gs_47
++      signature MLTREE_STREAM = gs_48
++      ../mltree/mltreecomp.sig
++   in
++      signature gs_49 = MLTREECOMP
++      signature gs_50 = MLTREE_EXTENSION_COMP
++   end
++   local
++      open l19
++   in
++      structure gs_51 = Format
++   end
++   local
++      structure TextIO = gs_2
++      ../emit/asmStream.sml
++   in
++      signature gs_52 = ASM_STREAM
++      structure gs_53 = AsmStream
++   end
++   local
++      structure Annotations = gs_1
++      signature INSTRUCTIONS = gs_15
++      signature INSTRUCTION_STREAM = gs_44
++      ../emit/instruction-emitter.sig
++   in
++      signature gs_54 = INSTRUCTION_EMITTER
++   end
++   local
++      signature ASM_STREAM = gs_52
++      structure AsmStream = gs_53
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Format = gs_51
++      structure Graph = gs_0
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Int = gs_12
++      structure List = gs_9
++      structure TextIO = gs_2
++      ../flowgraph/printFlowgraph.sml
++   in
++      signature gs_55 = PRINT_FLOWGRAPH
++      functor gs_56 = PrintFlowgraph
++   end
++   local
++      structure Array = gs_4
++      ../ra/getreg.sig
++   in
++      signature gs_57 = GETREG
++   end
++   local
++      structure Array = gs_4
++      signature GETREG = gs_57
++      ../ra/getreg.sml
++   in
++      functor gs_58 = GetReg
++   end
++   local
++      signature INSTRUCTIONS = gs_15
++      structure Label = gs_27
++      ../backpatch/delaySlotProps.sig
++   in
++      signature gs_59 = DELAY_SLOT_PROPERTIES
++   end
++   local
++      structure List = gs_9
++      ../c-calls/c-types.sml
++   in
++      structure gs_60 = CTypes
++   end
++   local
++      structure CTypes = gs_60
++      signature MLTREE = gs_28
++      ../c-calls/c-calls.sig
++   in
++      signature gs_61 = C_CALLS
++   end
++   local
++      signature C_CALLS = gs_61
++      signature MLTREE = gs_28
++      ../c-calls/unimplemented-c-calls.sml
++   in
++      functor gs_62 = UnimplementedCCallsFn
++   end
++   local
++      open l44
++   in
++      signature gs_63 = MLRISC_CONTROL
++      structure gs_64 = MLRiscControl
++   end
++   local
++      open l19
++   in
++      structure gs_65 = ListMergeSort
++   end
++   local
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      ../aliasing/pointsTo.sig
++   in
++      signature gs_66 = POINTS_TO
++   end
++   local
++      structure CellsBasis = gs_13
++      structure Int = gs_12
++      structure ListMergeSort = gs_65
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      signature POINTS_TO = gs_66
++      ../aliasing/pointsTo.sml
++   in
++      structure gs_67 = PointsTo
++   end
++   local
++      open l13
++   in
++      structure gs_68 = Char
++   end
++   local
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      structure Word8 = gs_16
++      ../flowgraph/pseudo-ops-endian.sig
++   in
++      signature gs_69 = PSEUDO_OPS_ENDIAN
++   end
++   local
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLTREE = gs_28
++      ../mltree/mltree-eval.sig
++   in
++      signature gs_70 = MLTREE_EVAL
++   end
++   local
++      structure Char = gs_68
++      structure Int = gs_12
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      signature MLTREE_EVAL = gs_70
++      signature PSEUDO_OPS_ENDIAN = gs_69
++      structure PseudoOpsBasisTyp = gs_30
++      structure String = gs_7
++      structure Word = gs_8
++      structure Word32 = gs_20
++      structure Word8 = gs_16
++      ../flowgraph/pseudo-ops-big.sml
++   in
++      functor gs_71 = PseudoOpsBig
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      ../backpatch/bbsched.sig
++   in
++      signature gs_72 = BBSCHED
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure Label = gs_27
++      ../instructions/insnProps.sig
++   in
++      signature gs_73 = INSN_PROPERTIES
++   end
++   local
++      signature CELLS = gs_14
++      signature INSTRUCTIONS = gs_15
++      structure Label = gs_27
++      ../backpatch/sdi-jumps.sig
++   in
++      signature gs_74 = SDI_JUMPS
++   end
++   local
++      structure Array = gs_4
++      signature BBSCHED = gs_72
++      signature CONTROL_FLOW_GRAPH = gs_34
++      signature DELAY_SLOT_PROPERTIES = gs_59
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Label = gs_27
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      signature SDI_JUMPS = gs_74
++      ../backpatch/spanDep.sml
++   in
++      functor gs_75 = SpanDependencyResolution
++   end
++   local
++      structure Label = gs_27
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      ../flowgraph/as-pseudo-ops.sig
++   in
++      signature gs_76 = AS_PSEUDO_OPS
++   end
++   local
++      signature AS_PSEUDO_OPS = gs_76
++      structure Atom = gs_29
++      structure Format = gs_51
++      structure Int = gs_12
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      structure String = gs_7
++      ../flowgraph/darwin-pseudo-ops.sml
++   in
++      functor gs_77 = DarwinPseudoOps
++   end
++   local
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      ../ra/ra-flowgraph-part.sig
++   in
++      signature gs_78 = RA_FLOWGRAPH_PARTITIONER
++   end
++   local
++      structure Word8 = gs_16
++      ../emit/code-string.sig
++   in
++      signature gs_79 = CODE_STRING
++   end
++   local
++      open l9
++   in
++      signature gs_80 = PROBABILITY
++      structure gs_81 = Probability
++   end
++   local
++      open l13
++   in
++      structure gs_82 = Real
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      ../frequencies/compute-execution-freqs.sig
++   in
++      signature gs_83 = COMPUTE_EXECUTION_FREQUENCIES
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../instructions/mlriscAnnotations.sig
++   in
++      signature gs_84 = MLRISC_ANNOTATIONS
++   end
++   local
++      structure Annotations = gs_1
++      structure CellsBasis = gs_13
++      structure Int = gs_12
++      signature MLRISC_ANNOTATIONS = gs_84
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../instructions/mlriscAnnotations.sml
++   in
++      structure gs_85 = MLRiscAnnotations
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscAnnotations = gs_85
++      structure MLRiscControl = gs_64
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../frequencies/complete-probs-fn.sml
++   in
++      functor gs_86 = CompleteProbsFn
++   end
++   local
++      structure Array = gs_4
++      signature COMPUTE_EXECUTION_FREQUENCIES = gs_83
++      signature CONTROL_FLOW_GRAPH = gs_34
++      functor CompleteProbsFn = gs_86
++      structure Format = gs_51
++      structure Graph = gs_0
++      structure Int = gs_12
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      structure Real = gs_82
++      structure TextIO = gs_2
++      ../frequencies/compute-freqs-fn.sml
++   in
++      functor gs_87 = ComputeFreqsFn
++   end
++   local
++      signature MLTREE = gs_28
++      ../mltree/mltree-hash.sig
++   in
++      signature gs_88 = MLTREE_HASH
++   end
++   local
++      ../aliasing/mlriscRegion.sig
++   in
++      signature gs_89 = MLRISC_REGION
++   end
++   local
++      ../instructions/mlriscOptimization.sig
++   in
++      signature gs_90 = MLRISC_OPTIMIZATION
++   end
++   local
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      ../instructions/shuffle.sig
++   in
++      signature gs_91 = SHUFFLE
++   end
++   local
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      ../ra/arch-spill-instr.sig
++   in
++      signature gs_92 = ARCH_SPILL_INSTR
++   end
++   local
++      signature AS_PSEUDO_OPS = gs_76
++      structure Atom = gs_29
++      structure Format = gs_51
++      structure Int = gs_12
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      structure PseudoOpsBasisTyp = gs_30
++      structure String = gs_7
++      ../flowgraph/gasPseudoOps.sml
++   in
++      functor gs_93 = GasPseudoOps
++   end
++   local
++      structure Array = gs_4
++      ../ra/ra-bitmatrix.sig
++   in
++      signature gs_94 = RA_BITMATRIX
++   end
++   local
++      ../ra/ra-priqueue.sig
++   in
++      signature gs_95 = RA_PRIORITY_QUEUE
++   end
++   local
++      open l13
++   in
++      structure gs_96 = Unsafe
++   end
++   local
++      structure Array = gs_4
++      signature RA_BITMATRIX = gs_94
++      structure Unsafe = gs_96
++      structure Word = gs_8
++      ../ra/raBitmatrix.sml
++   in
++      structure gs_97 = RaBitmatrix
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      structure Label = gs_27
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure TextIO = gs_2
++      ../block-placement/jump-chain-elim-fn.sml
++   in
++      functor gs_98 = JumpChainElimFn
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      ../flowgraph/cfg-optimization.sig
++   in
++      signature gs_99 = CFG_OPTIMIZATION
++   end
++   local
++      signature CFG_OPTIMIZATION = gs_99
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      structure Graph = gs_0
++      structure List = gs_9
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature SHUFFLE = gs_91
++      ../flowgraph/cfgExpandCopies.sml
++   in
++      functor gs_100 = CFGExpandCopies
++   end
++   local
++      signature INSTRUCTION_STREAM = gs_44
++      signature MLTREE = gs_28
++      signature MLTREE_STREAM = gs_48
++      ../mltree/mltree-stream.sml
++   in
++      functor gs_101 = MLTreeStream
++   end
++   local
++      structure Char = gs_68
++      structure Int = gs_12
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      signature MLTREE_EVAL = gs_70
++      signature PSEUDO_OPS_ENDIAN = gs_69
++      structure PseudoOpsBasisTyp = gs_30
++      structure String = gs_7
++      structure Word = gs_8
++      structure Word32 = gs_20
++      structure Word8 = gs_16
++      ../flowgraph/pseudo-ops-little.sml
++   in
++      functor gs_102 = PseudoOpsLittle
++   end
++   local
++      signature MLTREE = gs_28
++      signature MLTREE_SIZE = gs_46
++      ../mltree/mltree-size.sml
++   in
++      functor gs_103 = MLTreeSize
++   end
++   local
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      structure Int = gs_12
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      signature MLTREEGEN = gs_47
++      functor MLTreeSize = gs_103
++      ../mltree/mltree-gen.sml
++   in
++      functor gs_104 = MLTreeGen
++   end
++   local
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE_BASIS = gs_23
++      ../mltree/mltree-basis.sml
++   in
++      structure gs_105 = MLTreeBasis
++   end
++   local
++      signature CLIENT_PSEUDO_OPS = gs_32
++      signature PSEUDO_OPS = gs_33
++      structure PseudoOpsBasisTyp = gs_30
++      ../flowgraph/pseudo-ops.sml
++   in
++      functor gs_106 = PseudoOps
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      ../block-placement/block-placement.sig
++   in
++      signature gs_107 = BLOCK_PLACEMENT
++   end
++   local
++      open l19
++   in
++      structure gs_108 = IntHashTable
++   end
++   local
++      structure Array = gs_4
++      signature CELLS_BASIS = gs_5
++      structure IntHashTable = gs_108
++      signature MONO_HASH_TABLE = gs_3
++      signature RA_BITMATRIX = gs_94
++      structure RaBitmatrix = gs_97
++      ../ra/ra-graph.sig
++   in
++      signature gs_109 = RA_GRAPH
++   end
++   local
++      structure Array = gs_4
++      structure CellsBasis = gs_13
++      functor HashTableFn = gs_6
++      structure IntHashTable = gs_108
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature RA_GRAPH = gs_109
++      structure RaBitmatrix = gs_97
++      structure Word = gs_8
++      ../ra/ra-graph.sml
++   in
++      structure gs_110 = RAGraph
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure RAGraph = gs_110
++      signature RA_GRAPH = gs_109
++      ../ra/ra-spill.sig
++   in
++      signature gs_111 = RA_SPILL
++   end
++   local
++      signature INSTRUCTIONS = gs_15
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../instructions/freqProps.sig
++   in
++      signature gs_112 = FREQUENCY_PROPERTIES
++   end
++   local
++      signature FREQUENCY_PROPERTIES = gs_112
++      signature INSN_PROPERTIES = gs_73
++      structure MLRiscAnnotations = gs_85
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../instructions/freqProps.sml
++   in
++      functor gs_113 = FreqProps
++   end
++   local
++      structure Annotations = gs_1
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Format = gs_51
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTIONS = gs_15
++      signature INSTRUCTION_STREAM = gs_44
++      structure IntHashTable = gs_108
++      structure Label = gs_27
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscAnnotations = gs_85
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      signature PSEUDO_OPS = gs_33
++      structure PseudoOpsBasisTyp = gs_30
++      structure Word = gs_8
++      ../flowgraph/buildFlowgraph.sml
++   in
++      functor gs_114 = BuildFlowgraph
++      signature gs_115 = CONTROL_FLOWGRAPH_GEN
++   end
++   local
++      structure RAGraph = gs_110
++      signature RA_GRAPH = gs_109
++      ../ra/ra-spillheur.sig
++   in
++      signature gs_116 = RA_SPILL_HEURISTICS
++   end
++   local
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      ../emit/asm-flags.sml
++   in
++      structure gs_117 = AsmFlags
++   end
++   local
++      structure Annotations = gs_1
++      structure IntInf = gs_18
++      ../gc-safety/gc-type.sig
++   in
++      signature gs_118 = GC_TYPE
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature GC_TYPE = gs_118
++      ../gc-safety/gc-cells.sig
++   in
++      signature gs_119 = GC_CELLS
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure RAGraph = gs_110
++      signature RA_GRAPH = gs_109
++      signature RA_SPILL = gs_111
++      structure TextIO = gs_2
++      ../ra/ra-flowgraph.sig
++   in
++      signature gs_120 = RA_FLOWGRAPH
++   end
++   local
++      structure Array = gs_4
++      signature CELLS = gs_14
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure RAGraph = gs_110
++      signature RA_FLOWGRAPH = gs_120
++      ../ra/ra.sig
++   in
++      signature gs_121 = RA
++   end
++   local
++      open l13
++   in
++      structure gs_122 = Word8Array
++   end
++   local
++      structure RAGraph = gs_110
++      signature RA_BITMATRIX = gs_94
++      signature RA_GRAPH = gs_109
++      signature RA_PRIORITY_QUEUE = gs_95
++      structure TextIO = gs_2
++      ../ra/ra-core.sig
++   in
++      signature gs_123 = RA_CORE
++   end
++   local
++      signature RA_PRIORITY_QUEUE = gs_95
++      ../ra/raPriQueue.sml
++   in
++      functor gs_124 = RaPriQueue
++   end
++   local
++      structure Array = gs_4
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      structure List = gs_9
++      structure ListMergeSort = gs_65
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure RAGraph = gs_110
++      signature RA_CORE = gs_123
++      functor RaPriQueue = gs_124
++      structure Real = gs_82
++      structure TextIO = gs_2
++      structure Unsafe = gs_96
++      structure Word = gs_8
++      structure Word8 = gs_16
++      structure Word8Array = gs_122
++      ../ra/ra-core.sml
++   in
++      structure gs_125 = RACore
++   end
++   local
++      structure Array = gs_4
++      structure CellsBasis = gs_13
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      signature RA = gs_121
++      structure RACore = gs_125
++      signature RA_FLOWGRAPH = gs_120
++      signature RA_SPILL_HEURISTICS = gs_116
++      structure Real = gs_82
++      structure TextIO = gs_2
++      structure Word = gs_8
++      ../ra/ra.sml
++   in
++      functor gs_126 = RegisterAllocator
++   end
++   local
++      structure CellsBasis = gs_13
++      structure IntHashTable = gs_108
++      structure RACore = gs_125
++      signature RA_FLOWGRAPH = gs_120
++      structure Word = gs_8
++      ../ra/ra-deadCodeE.sml
++   in
++      functor gs_127 = RADeadCodeElim
++   end
++   local
++      open l19
++   in
++      structure gs_128 = URef
++   end
++   local
++      structure Array = gs_4
++      signature DOMINATOR_TREE = gs_38
++      signature GRAPH_IMPLEMENTATION = gs_37
++      structure Graph = gs_0
++      signature LOOP_STRUCTURE = gs_39
++      structure List = gs_9
++      structure URef = gs_128
++      ../ir-archive/loop-structure.sml
++   in
++      functor gs_129 = LoopStructure
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Label = gs_27
++      structure List = gs_9
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature SDI_JUMPS = gs_74
++      ../backpatch/backpatch.sml
++   in
++      functor gs_130 = BBSched2
++   end
++   local
++      structure Array = gs_4
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      structure List = gs_9
++      structure ListMergeSort = gs_65
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure RACore = gs_125
++      structure RAGraph = gs_110
++      signature RA_FLOWGRAPH = gs_120
++      signature RA_SPILL = gs_111
++      structure TextIO = gs_2
++      structure Unsafe = gs_96
++      structure Word = gs_8
++      ../ra/cluster-ra.sml
++   in
++      functor gs_131 = ClusterRA
++   end
++   local
++      structure RACore = gs_125
++      structure RAGraph = gs_110
++      signature RA_SPILL_HEURISTICS = gs_116
++      ../ra/chaitin-spillheur.sml
++   in
++      structure gs_132 = ChaitinSpillHeur
++   end
++   local
++      open l19
++   in
++      functor gs_133 = LeftPriorityQFn
++   end
++   local
++      signature BLOCK_PLACEMENT = gs_107
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      functor LeftPriorityQFn = gs_133
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      structure Real = gs_82
++      structure TextIO = gs_2
++      structure URef = gs_128
++      ../block-placement/weighted-block-placement-fn.sml
++   in
++      functor gs_134 = WeightedBlockPlacementFn
++   end
++   local
++      structure Array = gs_4
++      signature BLOCK_PLACEMENT = gs_107
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      structure Int = gs_12
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure TextIO = gs_2
++      ../block-placement/default-block-placement.sml
++   in
++      functor gs_135 = DefaultBlockPlacement
++   end
++   local
++      signature BLOCK_PLACEMENT = gs_107
++      signature CONTROL_FLOW_GRAPH = gs_34
++      functor DefaultBlockPlacement = gs_135
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      functor WeightedBlockPlacementFn = gs_134
++      ../block-placement/block-placement.sml
++   in
++      functor gs_136 = BlockPlacement
++   end
++   local
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      signature MLTREE = gs_28
++      ../mltree/mltree-mult.sig
++   in
++      signature gs_137 = MLTREE_MULT_DIV
++   end
++   local
++      structure Array = gs_4
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      signature MLTREE_MULT_DIV = gs_137
++      structure Word = gs_8
++      ../mltree/mltree-mult.sml
++   in
++      functor gs_138 = MLTreeMult
++   end
++   local
++      structure CellsBasis = gs_13
++      structure Char = gs_68
++      structure Int = gs_12
++      structure Label = gs_27
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      signature MLTREE = gs_28
++      signature MLTREE_HASH = gs_88
++      structure String = gs_7
++      structure Word = gs_8
++      ../mltree/mltree-hash.sml
++   in
++      functor gs_139 = MLTreeHash
++   end
++   local
++      structure CellsBasis = gs_13
++      structure IntInf = gs_18
++      structure Label = gs_27
++      signature MLTREE = gs_28
++      signature MLTREE_EVAL = gs_70
++      ../mltree/mltree-eval.sml
++   in
++      functor gs_140 = MLTreeEval
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      signature GC_CELLS = gs_119
++      signature GC_TYPE = gs_118
++      ../gc-safety/gc-cells.sml
++   in
++      functor gs_141 = GCCells
++   end
++   local
++      structure Array = gs_4
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      structure Int = gs_12
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure TextIO = gs_2
++      ../block-placement/check-placement-fn.sml
++   in
++      functor gs_142 = CheckPlacementFn
++   end
++   local
++      structure Array = gs_4
++      signature CELLS = gs_14
++      structure CellsBasis = gs_13
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      ../instructions/cells.sml
++   in
++      functor gs_143 = Cells
++   end
++   local
++      signature DELAY_SLOT_PROPERTIES = gs_59
++      signature INSTRUCTIONS = gs_15
++      ../backpatch/noDelaySlots.sml
++   in
++      functor gs_144 = NoDelaySlots
++   end
++   local
++      structure Annotations = gs_1
++      signature CELLS_BASIS = gs_5
++      structure CellsBasis = gs_13
++      structure Label = gs_27
++      structure List = gs_9
++      structure MLRiscAnnotations = gs_85
++      ../emit/asmUtil.sml
++   in
++      signature gs_145 = ASM_FORMAT_UTIL
++      structure gs_146 = AsmFormatUtil
++   end
++   local
++      open l13
++   in
++      structure gs_147 = ListPair
++   end
++   local
++      open l13
++   in
++      structure gs_148 = Option
++   end
++   local
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure List = gs_9
++      structure ListPair = gs_147
++      structure Option = gs_148
++      ../instructions/shuffle.sml
++   in
++      functor gs_149 = Shuffle
++   end
++   local
++      open l5
++   in
++      functor gs_150 = DirectedGraph
++      structure gs_151 = DirectedGraph
++   end
++   local
++      structure Annotations = gs_1
++      signature CONTROL_FLOW_GRAPH = gs_34
++      functor DirectedGraph = gs_150
++      structure DirectedGraph = gs_151
++      functor DominatorTree = gs_43
++      structure Graph = gs_0
++      structure List = gs_9
++      functor LoopStructure = gs_129
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscAnnotations = gs_85
++      structure MLRiscControl = gs_64
++      signature PROBABILITY = gs_80
++      structure Probability = gs_81
++      ../frequencies/estimate-loop-probs-fn.sml
++   in
++      functor gs_152 = EstimateLoopProbsFn
++   end
++   local
++      open l13
++   in
++      structure gs_153 = StringCvt
++   end
++   local
++      structure Array = gs_4
++      structure Int32 = gs_17
++      structure Int64 = gs_19
++      structure IntInf = gs_18
++      signature MACHINE_INT = gs_21
++      structure String = gs_7
++      structure StringCvt = gs_153
++      structure Word = gs_8
++      structure Word32 = gs_20
++      ../mltree/machine-int.sml
++   in
++      structure gs_154 = MachineInt
++   end
++   local
++      structure Array = gs_4
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure RACore = gs_125
++      structure RAGraph = gs_110
++      signature RA_FLOWGRAPH = gs_120
++      structure Real = gs_82
++      structure Word = gs_8
++      ../ra/mem-ra.sml
++   in
++      functor gs_155 = MemoryRA
++   end
++   local
++      structure Annotations = gs_1
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure RAGraph = gs_110
++      ../ra/ra-spill-types.sml
++   in
++      functor gs_156 = RASpillTypes
++   end
++   local
++      open l13
++   in
++      structure gs_157 = Word8Vector
++   end
++   local
++      signature INSTRUCTIONS = gs_15
++      structure Word8Vector = gs_157
++      ../emit/mc-emit.sig
++   in
++      signature gs_158 = MC_EMIT
++   end
++   local
++      signature CODE_STRING = gs_79
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Label = gs_27
++      structure List = gs_9
++      signature MC_EMIT = gs_158
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      signature SDI_JUMPS = gs_74
++      structure Word8 = gs_16
++      structure Word8Vector = gs_157
++      ../backpatch/vlBackPatch.sml
++   in
++      functor gs_159 = BackPatch
++   end
++   local
++      open l9
++   in
++      structure gs_160 = PriorityHeap
++   end
++   local
++      structure IntHashTable = gs_108
++      structure Option = gs_148
++      structure PriorityHeap = gs_160
++      structure RACore = gs_125
++      structure RAGraph = gs_110
++      signature RA_SPILL_HEURISTICS = gs_116
++      structure Real = gs_82
++      ../ra/chow-hennessy-spillheur.sml
++   in
++      structure gs_161 = ChowHennessySpillHeur
++   end
++   local
++      open l9
++   in
++      signature gs_162 = LINE_BREAK
++      structure gs_163 = LineBreak
++   end
++   local
++      open l9
++   in
++      structure gs_164 = StringOutStream
++   end
++   local
++      open l5
++   in
++      signature gs_165 = UPDATE_GRAPH_INFO
++      structure gs_166 = UpdateGraphInfo
++   end
++   local
++      open l13
++   in
++      structure gs_167 = Bool
++   end
++   local
++      signature ASM_STREAM = gs_52
++      structure Annotations = gs_1
++      structure Array = gs_4
++      structure AsmStream = gs_53
++      structure Bool = gs_167
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      structure Char = gs_68
++      structure Format = gs_51
++      signature GRAPH_IMPLEMENTATION = gs_37
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTIONS = gs_15
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      signature LINE_BREAK = gs_162
++      structure Label = gs_27
++      structure LineBreak = gs_163
++      structure List = gs_9
++      structure ListMergeSort = gs_65
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      structure Real = gs_82
++      structure String = gs_7
++      structure StringOutStream = gs_164
++      structure TextIO = gs_2
++      signature UPDATE_GRAPH_INFO = gs_165
++      structure UpdateGraphInfo = gs_166
++      ../flowgraph/cfg.sml
++   in
++      functor gs_168 = ControlFlowGraph
++   end
++   local
++      structure Annotations = gs_1
++      signature CONSTANT = gs_25
++      structure CellsBasis = gs_13
++      structure Int32 = gs_17
++      structure Label = gs_27
++      signature MLTREE = gs_28
++      signature MLTREE_EXTENSION = gs_22
++      structure MLTreeBasis = gs_105
++      structure MachineInt = gs_154
++      signature REGION = gs_24
++      ../mltree/mltree.sml
++   in
++      functor gs_169 = MLTreeF
++   end
++   local
++      open l13
++   in
++      structure gs_170 = General
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      structure General = gs_170
++      structure Graph = gs_0
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscErrorMsg = gs_11
++      ../ra/liveness.sml
++   in
++      signature gs_171 = LIVENESS
++      functor gs_172 = Liveness
++   end
++   local
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      ../instructions/rewrite.sig
++   in
++      signature gs_173 = REWRITE_INSTRUCTIONS
++   end
++   local
++      signature ARCH_SPILL_INSTR = gs_92
++      structure Annotations = gs_1
++      structure Array = gs_4
++      signature CFG_OPTIMIZATION = gs_99
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      functor ClusterRA = gs_131
++      functor GetReg = gs_58
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTIONS = gs_15
++      signature INSTRUCTION_EMITTER = gs_54
++      structure List = gs_9
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure RAGraph = gs_110
++      signature RA_SPILL = gs_111
++      signature RA_SPILL_HEURISTICS = gs_116
++      signature REWRITE_INSTRUCTIONS = gs_173
++      functor RegisterAllocator = gs_126
++      structure Word = gs_8
++      ../ra/risc-ra.sml
++   in
++      functor gs_174 = RISC_RA
++   end
++   local
++      signature CFG_OPTIMIZATION = gs_99
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSN_PROPERTIES = gs_73
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      signature SDI_JUMPS = gs_74
++      ../flowgraph/cfgCountCopies.sml
++   in
++      functor gs_175 = CFGCountCopies
++   end
++   local
++      signature ASSEMBLY_EMITTER = gs_35
++      structure Annotations = gs_1
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure Graph = gs_0
++      signature INSTRUCTION_EMITTER = gs_54
++      structure List = gs_9
++      structure PseudoOpsBasisTyp = gs_30
++      ../emit/cfgEmit.sml
++   in
++      functor gs_176 = CFGEmit
++   end
++   local
++      structure Array = gs_4
++      signature GETREG = gs_57
++      ../ra/getreg2.sml
++   in
++      functor gs_177 = GetReg2
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_34
++      structure CellsBasis = gs_13
++      signature INSTRUCTIONS = gs_15
++      structure Int32 = gs_17
++      ../omit-frameptr/omit-frame-pointer.sig
++   in
++      signature gs_178 = OMIT_FRAME_POINTER
++   end
++   local
++      signature MLRISC_CONTROL = gs_63
++      structure MLRiscControl = gs_64
++      signature RA = gs_121
++      structure RACore = gs_125
++      signature RA_FLOWGRAPH_PARTITIONER = gs_78
++      ../ra/region-based-ra.sml
++   in
++      functor gs_179 = RegionBasedRA
++   end
++   local
++      signature MLRISC_REGION = gs_89
++      structure String = gs_7
++      ../aliasing/mlriscRegion.sml
++   in
++      structure gs_180 = MLRiscRegion
++   end
++   local
++      structure CellsBasis = gs_13
++      signature INSN_PROPERTIES = gs_73
++      signature INSTRUCTION_EMITTER = gs_54
++      structure Int = gs_12
++      structure IntHashTable = gs_108
++      signature MLRISC_CONTROL = gs_63
++      signature MLRISC_ERROR_MSG = gs_10
++      structure MLRiscControl = gs_64
++      structure MLRiscErrorMsg = gs_11
++      structure RACore = gs_125
++      functor RASpillTypes = gs_156
++      signature RA_SPILL = gs_111
++      structure Word = gs_8
++      ../ra/ra-spill.sml
++   in
++      functor gs_181 = RASpill
++   end
++in
++   signature ARCH_SPILL_INSTR = gs_92
++   signature ASM_FORMAT_UTIL = gs_145
++   signature ASM_STREAM = gs_52
++   signature ASSEMBLY_EMITTER = gs_35
++   signature AS_PSEUDO_OPS = gs_76
++   structure AsmFlags = gs_117
++   structure AsmFormatUtil = gs_146
++   structure AsmStream = gs_53
++   signature BBSCHED = gs_72
++   functor BBSched2 = gs_130
++   signature BLOCK_PLACEMENT = gs_107
++   functor BackPatch = gs_159
++   functor BlockPlacement = gs_136
++   functor BuildFlowgraph = gs_114
++   signature CELLS = gs_14
++   signature CELLS_BASIS = gs_5
++   functor CFGCountCopies = gs_175
++   functor CFGEmit = gs_176
++   functor CFGExpandCopies = gs_100
++   signature CFG_OPTIMIZATION = gs_99
++   signature CLIENT_PSEUDO_OPS = gs_32
++   signature CODE_STRING = gs_79
++   signature COMPUTE_EXECUTION_FREQUENCIES = gs_83
++   signature CONSTANT = gs_25
++   signature CONTROL_FLOWGRAPH_GEN = gs_115
++   signature CONTROL_FLOW_GRAPH = gs_34
++   structure CTypes = gs_60
++   signature C_CALLS = gs_61
++   functor Cells = gs_143
++   structure CellsBasis = gs_13
++   structure ChaitinSpillHeur = gs_132
++   functor CheckPlacementFn = gs_142
++   structure ChowHennessySpillHeur = gs_161
++   functor ClusterRA = gs_131
++   functor CompleteProbsFn = gs_86
++   functor ComputeFreqsFn = gs_87
++   functor ControlFlowGraph = gs_168
++   signature DELAY_SLOT_PROPERTIES = gs_59
++   signature DOMINATOR_TREE = gs_38
++   functor DarwinPseudoOps = gs_77
++   functor DefaultBlockPlacement = gs_135
++   functor DominatorTree = gs_43
++   functor EstimateLoopProbsFn = gs_152
++   signature FREQUENCY_PROPERTIES = gs_112
++   functor FreqProps = gs_113
++   functor GCCells = gs_141
++   signature GC_CELLS = gs_119
++   signature GC_TYPE = gs_118
++   signature GETREG = gs_57
++   functor GasPseudoOps = gs_93
++   functor GetReg = gs_58
++   functor GetReg2 = gs_177
++   signature INSN_PROPERTIES = gs_73
++   signature INSTRUCTIONS = gs_15
++   signature INSTRUCTION_EMITTER = gs_54
++   signature INSTRUCTION_STREAM = gs_44
++   functor InstructionStream = gs_45
++   functor JumpChainElimFn = gs_98
++   signature LABEL = gs_26
++   signature LIVENESS = gs_171
++   signature LOOP_STRUCTURE = gs_39
++   structure Label = gs_27
++   functor Liveness = gs_172
++   functor LoopStructure = gs_129
++   signature MACHINE_INT = gs_21
++   signature MC_EMIT = gs_158
++   signature MLRISC_ANNOTATIONS = gs_84
++   signature MLRISC_OPTIMIZATION = gs_90
++   signature MLRISC_REGION = gs_89
++   structure MLRiscAnnotations = gs_85
++   structure MLRiscRegion = gs_180
++   signature MLTREE = gs_28
++   signature MLTREECOMP = gs_49
++   signature MLTREEGEN = gs_47
++   signature MLTREE_BASIS = gs_23
++   signature MLTREE_EVAL = gs_70
++   signature MLTREE_EXTENSION = gs_22
++   signature MLTREE_EXTENSION_COMP = gs_50
++   signature MLTREE_HASH = gs_88
++   signature MLTREE_MULT_DIV = gs_137
++   signature MLTREE_SIZE = gs_46
++   signature MLTREE_STREAM = gs_48
++   structure MLTreeBasis = gs_105
++   functor MLTreeCheckTy = gs_36
++   functor MLTreeEval = gs_140
++   functor MLTreeF = gs_169
++   functor MLTreeGen = gs_104
++   functor MLTreeHash = gs_139
++   functor MLTreeMult = gs_138
++   functor MLTreeSize = gs_103
++   functor MLTreeStream = gs_101
++   structure MachineInt = gs_154
++   functor MemoryRA = gs_155
++   functor NoDelaySlots = gs_144
++   signature OMIT_FRAME_POINTER = gs_178
++   signature POINTS_TO = gs_66
++   signature PRINT_FLOWGRAPH = gs_55
++   signature PSEUDO_OPS = gs_33
++   signature PSEUDO_OPS_BASIS = gs_31
++   signature PSEUDO_OPS_ENDIAN = gs_69
++   structure PointsTo = gs_67
++   functor PrintFlowgraph = gs_56
++   functor PseudoOps = gs_106
++   structure PseudoOpsBasisTyp = gs_30
++   functor PseudoOpsBig = gs_71
++   functor PseudoOpsLittle = gs_102
++   signature RA = gs_121
++   structure RACore = gs_125
++   functor RADeadCodeElim = gs_127
++   structure RAGraph = gs_110
++   functor RASpill = gs_181
++   functor RASpillTypes = gs_156
++   signature RA_BITMATRIX = gs_94
++   signature RA_CORE = gs_123
++   signature RA_FLOWGRAPH = gs_120
++   signature RA_FLOWGRAPH_PARTITIONER = gs_78
++   signature RA_GRAPH = gs_109
++   signature RA_PRIORITY_QUEUE = gs_95
++   signature RA_SPILL = gs_111
++   signature RA_SPILL_HEURISTICS = gs_116
++   signature REGION = gs_24
++   signature REWRITE_INSTRUCTIONS = gs_173
++   functor RISC_RA = gs_174
++   structure RaBitmatrix = gs_97
++   functor RaPriQueue = gs_124
++   functor RegionBasedRA = gs_179
++   functor RegisterAllocator = gs_126
++   signature SDI_JUMPS = gs_74
++   signature SHUFFLE = gs_91
++   functor Shuffle = gs_149
++   functor SpanDependencyResolution = gs_75
++   functor UnimplementedCCallsFn = gs_62
++   functor WeightedBlockPlacementFn = gs_134
++end
++end
++
++end
+diff --git a/mlb/MLTREE.mlb b/mlb/MLTREE.mlb
+new file mode 100644
+index 0000000..167f3b4
+--- /dev/null
++++ b/mlb/MLTREE.mlb
+@@ -0,0 +1,209 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l18 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       signature AMD64INSTR = gs_3
-+       functor AMD64Instr = gs_4
-+       structure CellsBasis = gs_1
-+       signature MLTREE_EVAL = gs_2
-+       signature PEEPHOLE = gs_0
-+       ../amd64/instructions/amd64Peephole.sml
-+    in
-+       functor gs_5 = AMD64Peephole
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+ in
-+    functor AMD64Peephole = gs_5
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/AMD64.mlb MLRISC-mlton/mlb/AMD64.mlb
-*** MLRISC/mlb/AMD64.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/AMD64.mlb	2010-04-02 16:08:56.000000000 -0400
-***************
-*** 0 ****
---- 1,670 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l111 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l9 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l46 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l223 = 
-+     bas
-+       (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
-+     end
-+   basis l34 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+   basis l276 = 
-+     bas
-+       (* $MLTREE.cm(=(proxyLib.cm):.)/MLTREE.cm =??=> *) MLTREE.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = Int
++  basis l41 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_1 = REGION
++  basis l67 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_2 = CONSTANT
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = MLTREE
++   end
++   local
++      signature MLTREE = gs_0
++      ../mltree/mltree-rewrite.sig
++   in
++      signature gs_1 = MLTREE_REWRITE
++   end
++   local
++      signature MLTREE = gs_0
++      signature MLTREE_REWRITE = gs_1
++      ../mltree/mltree-rewrite.sml
++   in
++      functor gs_2 = MLTreeRewrite
++   end
++   local
++      signature MLTREE = gs_0
++      ../mltree/mltree-fold.sig
++   in
++      signature gs_3 = MLTREE_FOLD
++   end
++   local
++      open l18
++   in
++      structure gs_4 = Word
++   end
++   local
++      open l4
++   in
++      structure gs_5 = CellsBasis
++   end
++   local
++      open l18
++   in
++      structure gs_6 = IntInf
++   end
++   local
++      open l4
++   in
++      structure gs_7 = Label
++   end
++   local
++      open l18
++   in
++      structure gs_8 = String
++   end
++   local
++      open l18
++   in
++      structure gs_9 = List
++   end
++   local
++      open l18
++   in
++      structure gs_10 = Char
++   end
++   local
++      open l41
++   in
++      signature gs_11 = MLRISC_ERROR_MSG
++      structure gs_12 = MLRiscErrorMsg
++   end
++   local
++      open l18
++   in
++      structure gs_13 = Int
++   end
++   local
++      signature MLTREE = gs_0
++      ../mltree/mltree-utils.sig
++   in
++      signature gs_14 = MLTREE_UTILS
++   end
++   local
++      structure CellsBasis = gs_5
++      structure Char = gs_10
++      structure Int = gs_13
++      structure IntInf = gs_6
++      structure Label = gs_7
++      structure List = gs_9
++      signature MLRISC_ERROR_MSG = gs_11
++      structure MLRiscErrorMsg = gs_12
++      signature MLTREE = gs_0
++      signature MLTREE_UTILS = gs_14
++      structure String = gs_8
++      structure Word = gs_4
++      ../mltree/mltree-utils.sml
++   in
++      functor gs_15 = MLTreeUtils
++   end
++   local
++      open l4
++   in
++      signature gs_16 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l4
++   in
++      signature gs_17 = INSTRUCTION_STREAM
++   end
++   local
++      open l4
++   in
++      signature gs_18 = INSTRUCTIONS
++   end
++   local
++      open l4
++   in
++      signature gs_19 = CELLS
++   end
++   local
++      open l67
++   in
++      structure gs_20 = Annotations
++   end
++   local
++      structure Annotations = gs_20
++      signature CELLS = gs_19
++      signature CONTROL_FLOW_GRAPH = gs_16
++      signature INSTRUCTIONS = gs_18
++      signature INSTRUCTION_STREAM = gs_17
++      ../mltree/instr-gen.sig
++   in
++      signature gs_21 = INSTR_GEN
++   end
++   local
++      signature MLTREE = gs_0
++      signature MLTREE_FOLD = gs_3
++      ../mltree/mltree-fold.sml
++   in
++      functor gs_22 = MLTreeFold
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_16
++      signature INSTRUCTIONS = gs_18
++      signature INSTRUCTION_STREAM = gs_17
++      signature INSTR_GEN = gs_21
++      signature MLRISC_ERROR_MSG = gs_11
++      structure MLRiscErrorMsg = gs_12
++      ../mltree/instr-gen.sml
++   in
++      functor gs_23 = InstrGen
++   end
++   local
++      signature MLTREE = gs_0
++      ../mltree/mltree-simplify.sig
++   in
++      signature gs_24 = MLTREE_SIMPLIFIER
++   end
++   local
++      open l4
++   in
++      signature gs_25 = MLTREE_SIZE
++   end
++   local
++      structure IntInf = gs_6
++      signature MLTREE = gs_0
++      signature MLTREE_SIMPLIFIER = gs_24
++      signature MLTREE_SIZE = gs_25
++      functor MLTreeRewrite = gs_2
++      ../mltree/mltree-simplify.sml
++   in
++      functor gs_26 = MLTreeSimplifier
++   end
++in
++   signature INSTR_GEN = gs_21
++   functor InstrGen = gs_23
++   signature MLTREE_FOLD = gs_3
++   signature MLTREE_REWRITE = gs_1
++   signature MLTREE_SIMPLIFIER = gs_24
++   signature MLTREE_UTILS = gs_14
++   functor MLTreeFold = gs_22
++   functor MLTreeRewrite = gs_2
++   functor MLTreeSimplifier = gs_26
++   functor MLTreeUtils = gs_15
++end
++end
++
++end
+diff --git a/mlb/PPC.mlb b/mlb/PPC.mlb
+new file mode 100644
+index 0000000..65d3f05
+--- /dev/null
++++ b/mlb/PPC.mlb
+@@ -0,0 +1,573 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l42 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_3 = MLTREE
++  basis l116 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_4 = CELLS_BASIS
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       structure gs_5 = CellsBasis
++  basis l50 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       structure gs_6 = Label
++  basis l9 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = Int64
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = FREQUENCY_PROPERTIES
++   end
++   local
++      open l9
++   in
++      signature gs_1 = PROBABILITY
++      structure gs_2 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_3 = MLRiscAnnotations
++   end
++   local
++      open l4
++   in
++      signature gs_4 = REGION
++   end
++   local
++      open l4
++   in
++      signature gs_5 = CONSTANT
++   end
++   local
++      open l4
++   in
++      signature gs_6 = MLTREE
++   end
++   local
++      open l4
++   in
++      signature gs_7 = CELLS_BASIS
++   end
++   local
++      open l4
++   in
++      structure gs_8 = CellsBasis
++   end
++   local
++      open l4
++   in
++      structure gs_9 = Label
++   end
++   local
++      open l9
++   in
++      structure gs_10 = Annotations
++   end
++   local
++      open l4
++   in
++      functor gs_11 = Cells
++   end
++   local
++      open l42
++   in
++      structure gs_12 = Int
++   end
++   local
++      open l4
++   in
++      signature gs_13 = CELLS
++   end
++   local
++      open l50
++   in
++      signature gs_14 = MLRISC_ERROR_MSG
++      structure gs_15 = MLRiscErrorMsg
++   end
++   local
++      open l50
++   in
++      signature gs_16 = MLRISC_CONTROL
++      structure gs_17 = MLRiscControl
++   end
++   local
++      signature MLRISC_CONTROL = gs_16
++      structure MLRiscControl = gs_17
++      ../ppc/emit/ppcAsmSyntax.sml
++   in
++      structure gs_18 = PPCAsmSyntax
++   end
++   local
++      signature CELLS = gs_13
++      functor Cells = gs_11
++      structure CellsBasis = gs_8
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      structure PPCAsmSyntax = gs_18
++      ../ppc/instructions/ppcCells.sml
++   in
++      signature gs_19 = PPCCELLS
++      structure gs_20 = PPCCells
++   end
++   local
++      structure Annotations = gs_10
++      signature CELLS_BASIS = gs_7
++      signature CONSTANT = gs_5
++      structure CellsBasis = gs_8
++      structure Label = gs_9
++      signature MLTREE = gs_6
++      signature PPCCELLS = gs_19
++      structure PPCCells = gs_20
++      signature REGION = gs_4
++      ../ppc/instructions/ppcInstr.sml
++   in
++      signature gs_21 = PPCINSTR
++      functor gs_22 = PPCInstr
++   end
++   local
++      signature FREQUENCY_PROPERTIES = gs_0
++      structure MLRiscAnnotations = gs_3
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      signature PROBABILITY = gs_1
++      structure Probability = gs_2
++      ../ppc/instructions/ppcFreqProps.sml
++   in
++      functor gs_23 = PPCFreqProps
++   end
++   local
++      open l4
++   in
++      signature gs_24 = INSTRUCTION_EMITTER
++   end
++   local
++      open l4
++   in
++      signature gs_25 = ASM_FORMAT_UTIL
++      structure gs_26 = AsmFormatUtil
++   end
++   local
++      open l4
++   in
++      signature gs_27 = ASM_STREAM
++      structure gs_28 = AsmStream
++   end
++   local
++      open l42
++   in
++      structure gs_29 = TextIO
++   end
++   local
++      open l42
++   in
++      structure gs_30 = String
++   end
++   local
++      open l4
++   in
++      structure gs_31 = AsmFlags
++   end
++   local
++      open l4
++   in
++      signature gs_32 = MLTREE_EVAL
++   end
++   local
++      open l4
++   in
++      signature gs_33 = INSTRUCTION_STREAM
++   end
++   local
++      structure CellsBasis = gs_8
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      ../ppc/instructions/ppcShuffle.sig
++   in
++      signature gs_34 = PPCSHUFFLE
++   end
++   local
++      signature ASM_FORMAT_UTIL = gs_25
++      signature ASM_STREAM = gs_27
++      structure Annotations = gs_10
++      structure AsmFlags = gs_31
++      structure AsmFormatUtil = gs_26
++      structure AsmStream = gs_28
++      structure CellsBasis = gs_8
++      signature INSTRUCTION_EMITTER = gs_24
++      signature INSTRUCTION_STREAM = gs_33
++      structure Int = gs_12
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_32
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      signature PPCSHUFFLE = gs_34
++      structure String = gs_30
++      structure TextIO = gs_29
++      ../ppc/emit/ppcAsm.sml
++   in
++      functor gs_35 = PPCAsmEmitter
++   end
++   local
++      structure CellsBasis = gs_8
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      ../ppc/mltree/ppcPseudoInstr.sig
++   in
++      signature gs_36 = PPC_PSEUDO_INSTR
++   end
++   local
++      open l4
++   in
++      signature gs_37 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l4
++   in
++      functor gs_38 = PseudoOpsBig
++   end
++   local
++      open l116
++   in
++      structure gs_39 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_40 = PseudoOpsBasisTyp
++   end
++   local
++      open l42
++   in
++      structure gs_41 = IntInf
++   end
++   local
++      open l42
++   in
++      structure gs_42 = Word32
++   end
++   local
++      open l116
++   in
++      structure gs_43 = Atom
++   end
++   local
++      structure Atom = gs_43
++      structure Format = gs_39
++      structure Int = gs_12
++      structure IntInf = gs_41
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE = gs_6
++      signature MLTREE_EVAL = gs_32
++      signature PSEUDO_OPS_BASIS = gs_37
++      structure PseudoOpsBasisTyp = gs_40
++      functor PseudoOpsBig = gs_38
++      structure String = gs_30
++      structure Word32 = gs_42
++      ../ppc/flowgraph/ppcDarwinPseudoOps.sml
++   in
++      functor gs_44 = PPCDarwinPseudoOps
++   end
++   local
++      open l4
++   in
++      signature gs_45 = ARCH_SPILL_INSTR
++   end
++   local
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      ../ppc/ra/ppcRewrite.sml
++   in
++      functor gs_46 = PPCRewrite
++   end
++   local
++      signature ARCH_SPILL_INSTR = gs_45
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      functor PPCRewrite = gs_46
++      ../ppc/ra/ppcSpillInstr.sml
++   in
++      functor gs_47 = PPCSpillInstr
++   end
++   local
++      open l4
++   in
++      functor gs_48 = GasPseudoOps
++   end
++   local
++      structure Format = gs_39
++      functor GasPseudoOps = gs_48
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE = gs_6
++      signature MLTREE_EVAL = gs_32
++      signature PSEUDO_OPS_BASIS = gs_37
++      structure PseudoOpsBasisTyp = gs_40
++      functor PseudoOpsBig = gs_38
++      structure Word32 = gs_42
++      ../ppc/flowgraph/ppcGasPseudoOps.sml
++   in
++      functor gs_49 = PPCGasPseudoOps
++   end
++   local
++      open l4
++   in
++      signature gs_50 = INSN_PROPERTIES
++   end
++   local
++      open l42
++   in
++      structure gs_51 = Word
++   end
++   local
++      open l4
++   in
++      signature gs_52 = MLTREE_HASH
++   end
++   local
++      structure CellsBasis = gs_8
++      signature INSN_PROPERTIES = gs_50
++      structure IntInf = gs_41
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_32
++      signature MLTREE_HASH = gs_52
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      structure Word = gs_51
++      ../ppc/instructions/ppcProps.sml
++   in
++      functor gs_53 = PPCProps
++   end
++   local
++      open l4
++   in
++      signature gs_54 = SDI_JUMPS
++   end
++   local
++      structure CellsBasis = gs_8
++      signature MLRISC_CONTROL = gs_16
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscControl = gs_17
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_32
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      signature PPCSHUFFLE = gs_34
++      signature SDI_JUMPS = gs_54
++      structure Word = gs_51
++      ../ppc/backpatch/ppcJumps.sml
++   in
++      functor gs_55 = PPCJumps
++   end
++   local
++      ../ppc/instructions/ppcInstrExt.sml
++   in
++      structure gs_56 = PPCInstrExt
++   end
++   local
++      open l4
++   in
++      signature gs_57 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l4
++   in
++      signature gs_58 = MLTREE_STREAM
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_57
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_STREAM = gs_58
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      structure PPCInstrExt = gs_56
++      ../ppc/instructions/ppcCompInstrExt.sml
++   in
++      signature gs_59 = PPCCOMP_INSTR_EXT
++      functor gs_60 = PPCCompInstrExt
++   end
++   local
++      open l4
++   in
++      signature gs_61 = DELAY_SLOT_PROPERTIES
++   end
++   local
++      signature DELAY_SLOT_PROPERTIES = gs_61
++      signature INSN_PROPERTIES = gs_50
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      ../ppc/backpatch/ppcDelaySlots.sml
++   in
++      functor gs_62 = PPCDelaySlots
++   end
++   local
++      open l4
++   in
++      structure gs_63 = CTypes
++   end
++   local
++      open l42
++   in
++      structure gs_64 = List
++   end
++   local
++      open l4
++   in
++      signature gs_65 = C_CALLS
++   end
++   local
++      structure CTypes = gs_63
++      signature C_CALLS = gs_65
++      structure Int = gs_12
++      structure IntInf = gs_41
++      structure List = gs_64
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscAnnotations = gs_3
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE = gs_6
++      signature PPCCELLS = gs_19
++      structure PPCCells = gs_20
++      structure String = gs_30
++      structure Word = gs_51
++      ../ppc/c-calls/ppc-macosx.sml
++   in
++      functor gs_66 = PPCMacOSX_CCalls
++      signature gs_67 = PPC_MACOSX_C_CALLS
++   end
++   local
++      open l4
++   in
++      functor gs_68 = Shuffle
++   end
++   local
++      structure CellsBasis = gs_8
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      functor Shuffle = gs_68
++      ../ppc/instructions/ppcShuffle.sml
++   in
++      functor gs_69 = PPCShuffle
++   end
++   local
++      open l42
++   in
++      structure gs_70 = Word8
++   end
++   local
++      open l4
++   in
++      signature gs_71 = CODE_STRING
++   end
++   local
++      signature CODE_STRING = gs_71
++      structure CellsBasis = gs_8
++      signature INSTRUCTION_EMITTER = gs_24
++      signature INSTRUCTION_STREAM = gs_33
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREE_EVAL = gs_32
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      structure Word32 = gs_42
++      structure Word8 = gs_70
++      ../ppc/emit/ppcMC.sml
++   in
++      functor gs_72 = PPCMCEmitter
++   end
++   local
++      open l4
++   in
++      functor gs_73 = MLTreeMult
++   end
++   local
++      open l4
++   in
++      functor gs_74 = MLTreeGen
++   end
++   local
++      open l4
++   in
++      signature gs_75 = MLTREECOMP
++      signature gs_76 = MLTREE_EXTENSION_COMP
++   end
++   local
++      structure CellsBasis = gs_8
++      structure Int = gs_12
++      structure Label = gs_9
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscAnnotations = gs_3
++      structure MLRiscErrorMsg = gs_15
++      signature MLTREECOMP = gs_75
++      signature MLTREE_EXTENSION_COMP = gs_76
++      functor MLTreeGen = gs_74
++      functor MLTreeMult = gs_73
++      signature PPCINSTR = gs_21
++      functor PPCInstr = gs_22
++      signature PPC_PSEUDO_INSTR = gs_36
++      structure Word32 = gs_42
++      ../ppc/mltree/ppc.sml
++   in
++      functor gs_77 = PPC
++   end
++in
++   functor PPC = gs_77
++   functor PPCAsmEmitter = gs_35
++   structure PPCAsmSyntax = gs_18
++   signature PPCCELLS = gs_19
++   signature PPCCOMP_INSTR_EXT = gs_59
++   structure PPCCells = gs_20
++   functor PPCCompInstrExt = gs_60
++   functor PPCDarwinPseudoOps = gs_44
++   functor PPCDelaySlots = gs_62
++   functor PPCFreqProps = gs_23
++   functor PPCGasPseudoOps = gs_49
++   signature PPCINSTR = gs_21
++   functor PPCInstr = gs_22
++   structure PPCInstrExt = gs_56
++   functor PPCJumps = gs_55
++   functor PPCMCEmitter = gs_72
++   functor PPCMacOSX_CCalls = gs_66
++   functor PPCProps = gs_53
++   functor PPCRewrite = gs_46
++   signature PPCSHUFFLE = gs_34
++   functor PPCShuffle = gs_69
++   functor PPCSpillInstr = gs_47
++   signature PPC_PSEUDO_INSTR = gs_36
++end
++end
++
++end
+diff --git a/mlb/Peephole.mlb b/mlb/Peephole.mlb
+new file mode 100644
+index 0000000..800b311
+--- /dev/null
++++ b/mlb/Peephole.mlb
+@@ -0,0 +1,61 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_8 = Int32
++  basis l14 =
++    bas
++      (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
 +    end
-+    local
-+       open l34
-+    in
-+       structure gs_9 = Annotations
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = INSTRUCTIONS
++   end
++   local
++      signature INSTRUCTIONS = gs_0
++      ../instructions/peephole.sig
++   in
++      signature gs_1 = PEEPHOLE
++   end
++   local
++      open l4
++   in
++      signature gs_2 = CFG_OPTIMIZATION
++   end
++   local
++      open l14
++   in
++      structure gs_3 = Graph
++   end
++   local
++      open l4
++   in
++      signature gs_4 = CONTROL_FLOW_GRAPH
++   end
++   local
++      signature CFG_OPTIMIZATION = gs_2
++      signature CONTROL_FLOW_GRAPH = gs_4
++      structure Graph = gs_3
++      signature PEEPHOLE = gs_1
++      ../flowgraph/cfgPeephole.sml
++   in
++      functor gs_5 = CFGPeephole
++   end
++in
++   functor CFGPeephole = gs_5
++   signature PEEPHOLE = gs_1
++end
++end
++
++end
+diff --git a/mlb/RA.mlb b/mlb/RA.mlb
+new file mode 100644
+index 0000000..d089254
+--- /dev/null
++++ b/mlb/RA.mlb
+@@ -0,0 +1,152 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l11 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       functor gs_10 = Cells
++  basis l22 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_11 = CELLS
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l46
-+    in
-+       signature gs_12 = MLRISC_ERROR_MSG
-+       structure gs_13 = MLRiscErrorMsg
++  basis l53 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       signature CELLS = gs_11
-+       functor Cells = gs_10
-+       structure CellsBasis = gs_5
-+       structure Int = gs_0
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       ../amd64/instructions/amd64Cells.sml
-+    in
-+       signature gs_14 = AMD64CELLS
-+       structure gs_15 = AMD64Cells
++  basis l29 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       signature AMD64CELLS = gs_14
-+       structure AMD64Cells = gs_15
-+       structure Annotations = gs_9
-+       signature CELLS_BASIS = gs_4
-+       signature CONSTANT = gs_2
-+       structure CellsBasis = gs_5
-+       structure Int32 = gs_8
-+       structure Int64 = gs_7
-+       structure Label = gs_6
-+       signature MLTREE = gs_3
-+       signature REGION = gs_1
-+       ../amd64/instructions/amd64Instr.sml
-+    in
-+       signature gs_16 = AMD64INSTR
-+       functor gs_17 = AMD64Instr
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = RA_SPILL_HEURISTICS
++   end
++   local
++      open l4
++   in
++      structure gs_1 = RACore
++   end
++   local
++      open l11
++   in
++      structure gs_2 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_3 = RAGraph
++   end
++   local
++      structure RACore = gs_1
++      structure RAGraph = gs_3
++      signature RA_SPILL_HEURISTICS = gs_0
++      structure Real = gs_2
++      ../ra/chaitin-spillheur2.sml
++   in
++      functor gs_4 = ImprovedChaitinSpillHeur
++   end
++   local
++      open l22
++   in
++      structure gs_5 = IntHashTable
++   end
++   local
++      open l11
++   in
++      structure gs_6 = Option
++   end
++   local
++      open l29
++   in
++      structure gs_7 = PriorityHeap
++   end
++   local
++      structure IntHashTable = gs_5
++      structure Option = gs_6
++      structure PriorityHeap = gs_7
++      structure RACore = gs_1
++      structure RAGraph = gs_3
++      signature RA_SPILL_HEURISTICS = gs_0
++      structure Real = gs_2
++      ../ra/chow-hennessy-spillheur2.sml
++   in
++      functor gs_8 = ImprovedChowHennessySpillHeur
++   end
++   local
++      open l4
++   in
++      signature gs_9 = RA_SPILL
++   end
++   local
++      open l11
++   in
++      structure gs_10 = Int
++   end
++   local
++      open l4
++   in
++      functor gs_11 = RASpillTypes
++   end
++   local
++      open l4
++   in
++      structure gs_12 = CellsBasis
++   end
++   local
++      open l11
++   in
++      structure gs_13 = Word
++   end
++   local
++      open l53
++   in
++      signature gs_14 = MLRISC_ERROR_MSG
++      structure gs_15 = MLRiscErrorMsg
++   end
++   local
++      open l4
++   in
++      signature gs_16 = INSTRUCTION_EMITTER
++   end
++   local
++      open l4
++   in
++      signature gs_17 = INSN_PROPERTIES
++   end
++   local
++      structure CellsBasis = gs_12
++      signature INSN_PROPERTIES = gs_17
++      signature INSTRUCTION_EMITTER = gs_16
++      structure Int = gs_10
++      structure IntHashTable = gs_5
++      signature MLRISC_ERROR_MSG = gs_14
++      structure MLRiscErrorMsg = gs_15
++      structure RACore = gs_1
++      functor RASpillTypes = gs_11
++      signature RA_SPILL = gs_9
++      structure Word = gs_13
++      ../ra/ra-spill-with-renaming.sml
++   in
++      functor gs_18 = RASpillWithRenaming
++   end
++in
++   functor ImprovedChaitinSpillHeur = gs_4
++   functor ImprovedChowHennessySpillHeur = gs_8
++   functor RASpillWithRenaming = gs_18
++end
++end
++
++end
+diff --git a/mlb/SPARC.mlb b/mlb/SPARC.mlb
+new file mode 100644
+index 0000000..1b14d64
+--- /dev/null
++++ b/mlb/SPARC.mlb
+@@ -0,0 +1,538 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l38 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       structure Int = gs_0
-+       ../amd64/mltree/amd64-opcodes.sml
-+    in
-+       functor gs_18 = AMD64Opcodes
++  basis l136 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_19 = MC_EMIT
++  basis l4 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_20 = Word32
++  basis l46 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_21 = Word8
++  basis l30 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_22 = LargeWord
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      signature gs_0 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l4
++   in
++      signature gs_1 = MLTREE_STREAM
++   end
++   local
++      open l4
++   in
++      signature gs_2 = MLTREE
++   end
++   local
++      open l4
++   in
++      signature gs_3 = REGION
++   end
++   local
++      open l4
++   in
++      signature gs_4 = CONSTANT
++   end
++   local
++      open l4
++   in
++      signature gs_5 = CELLS_BASIS
++   end
++   local
++      open l4
++   in
++      structure gs_6 = CellsBasis
++   end
++   local
++      open l4
++   in
++      structure gs_7 = Label
++   end
++   local
++      open l30
++   in
++      structure gs_8 = Annotations
++   end
++   local
++      open l4
++   in
++      functor gs_9 = Cells
++   end
++   local
++      open l38
++   in
++      structure gs_10 = Int
++   end
++   local
++      open l4
++   in
++      signature gs_11 = CELLS
++   end
++   local
++      open l46
++   in
++      signature gs_12 = MLRISC_ERROR_MSG
++      structure gs_13 = MLRiscErrorMsg
++   end
++   local
++      signature CELLS = gs_11
++      functor Cells = gs_9
++      structure CellsBasis = gs_6
++      structure Int = gs_10
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      ../sparc/instructions/sparcCells.sml
++   in
++      signature gs_14 = SPARCCELLS
++      structure gs_15 = SparcCells
++   end
++   local
++      structure Annotations = gs_8
++      signature CELLS_BASIS = gs_5
++      signature CONSTANT = gs_4
++      structure CellsBasis = gs_6
++      structure Label = gs_7
++      signature MLTREE = gs_2
++      signature REGION = gs_3
++      signature SPARCCELLS = gs_14
++      structure SparcCells = gs_15
++      ../sparc/instructions/sparcInstr.sml
++   in
++      signature gs_16 = SPARCINSTR
++      functor gs_17 = SparcInstr
++   end
++   local
++      ../sparc/instructions/sparcinstr-ext.sml
++   in
++      structure gs_18 = SparcInstrExt
++   end
++   local
++      signature CONTROL_FLOW_GRAPH = gs_0
++      signature MLTREE = gs_2
++      signature MLTREE_STREAM = gs_1
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      structure SparcInstrExt = gs_18
++      ../sparc/instructions/sparccomp-instr-ext.sml
++   in
++      signature gs_19 = SPARCCOMP_INSTR_EXT
++      functor gs_20 = SparcCompInstrExt
++   end
++   local
++      open l4
++   in
++      signature gs_21 = INSTRUCTION_EMITTER
++   end
++   local
++      open l38
++   in
++      structure gs_22 = Word8
++   end
++   local
++      open l38
++   in
++      structure gs_23 = Word32
++   end
++   local
++      open l4
++   in
++      signature gs_24 = CODE_STRING
++   end
++   local
++      open l4
++   in
++      signature gs_25 = INSTRUCTION_STREAM
++   end
++   local
++      open l4
++   in
++      signature gs_26 = MLTREE_EVAL
++   end
++   local
++      signature CODE_STRING = gs_24
++      structure CellsBasis = gs_6
++      signature INSTRUCTION_EMITTER = gs_21
++      signature INSTRUCTION_STREAM = gs_25
++      structure Label = gs_7
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_26
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      structure Word32 = gs_23
++      structure Word8 = gs_22
++      ../sparc/emit/sparcMC.sml
++   in
++      functor gs_27 = SparcMCEmitter
++   end
++   local
++      open l4
++   in
++      functor gs_28 = Shuffle
++   end
++   local
++      open l38
++   in
++      structure gs_29 = Option
++   end
++   local
++      structure CellsBasis = gs_6
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      ../sparc/instructions/sparcShuffle.sig
++   in
++      signature gs_30 = SPARCSHUFFLE
++   end
++   local
++      structure CellsBasis = gs_6
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      structure Option = gs_29
++      signature SPARCINSTR = gs_16
++      signature SPARCSHUFFLE = gs_30
++      functor Shuffle = gs_28
++      functor SparcInstr = gs_17
++      structure Word32 = gs_23
++      ../sparc/instructions/sparcShuffle.sml
++   in
++      functor gs_31 = SparcShuffle
++   end
++   local
++      open l4
++   in
++      signature gs_32 = DELAY_SLOT_PROPERTIES
++   end
++   local
++      open l4
++   in
++      signature gs_33 = INSN_PROPERTIES
++   end
++   local
++      structure CellsBasis = gs_6
++      signature DELAY_SLOT_PROPERTIES = gs_32
++      signature INSN_PROPERTIES = gs_33
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      structure Option = gs_29
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      ../sparc/backpatch/sparcDelaySlotProps.sml
++   in
++      functor gs_34 = SparcDelaySlots
++   end
++   local
++      open l4
++   in
++      signature gs_35 = FREQUENCY_PROPERTIES
++   end
++   local
++      open l30
++   in
++      signature gs_36 = PROBABILITY
++      structure gs_37 = Probability
++   end
++   local
++      open l4
++   in
++      structure gs_38 = MLRiscAnnotations
++   end
++   local
++      signature FREQUENCY_PROPERTIES = gs_35
++      structure MLRiscAnnotations = gs_38
++      signature PROBABILITY = gs_36
++      structure Probability = gs_37
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      ../sparc/instructions/sparcFreqProps.sml
++   in
++      functor gs_39 = SparcFreqProps
++   end
++   local
++      open l4
++   in
++      signature gs_40 = PSEUDO_OPS_BASIS
++   end
++   local
++      open l4
++   in
++      functor gs_41 = GasPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_42 = PseudoOpsBig
++   end
++   local
++      open l136
++   in
++      structure gs_43 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_44 = PseudoOpsBasisTyp
++   end
++   local
++      structure Format = gs_43
++      functor GasPseudoOps = gs_41
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE = gs_2
++      signature MLTREE_EVAL = gs_26
++      signature PSEUDO_OPS_BASIS = gs_40
++      structure PseudoOpsBasisTyp = gs_44
++      functor PseudoOpsBig = gs_42
++      structure Word32 = gs_23
++      ../sparc/flowgraph/sparcGasPseudoOps.sml
++   in
++      functor gs_45 = SparcGasPseudoOps
++   end
++   local
++      open l4
++   in
++      functor gs_46 = MLTreeMult
++   end
++   local
++      open l4
++   in
++      functor gs_47 = MLTreeGen
++   end
++   local
++      open l4
++   in
++      signature gs_48 = MLTREECOMP
++      signature gs_49 = MLTREE_EXTENSION_COMP
++   end
++   local
++      structure CellsBasis = gs_6
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      ../sparc/mltree/sparcPseudoInstr.sig
++   in
++      signature gs_50 = SPARC_PSEUDO_INSTR
++   end
++   local
++      structure CellsBasis = gs_6
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscAnnotations = gs_38
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREECOMP = gs_48
++      signature MLTREE_EXTENSION_COMP = gs_49
++      functor MLTreeGen = gs_47
++      functor MLTreeMult = gs_46
++      signature SPARCINSTR = gs_16
++      signature SPARC_PSEUDO_INSTR = gs_50
++      functor SparcInstr = gs_17
++      structure Word32 = gs_23
++      ../sparc/mltree/sparc.sml
++   in
++      functor gs_51 = Sparc
++   end
++   local
++      open l38
++   in
++      structure gs_52 = IntInf
++   end
++   local
++      open l38
++   in
++      structure gs_53 = Word
++   end
++   local
++      open l4
++   in
++      signature gs_54 = MLTREE_HASH
++   end
++   local
++      structure CellsBasis = gs_6
++      signature INSN_PROPERTIES = gs_33
++      structure IntInf = gs_52
++      structure Label = gs_7
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_26
++      signature MLTREE_HASH = gs_54
++      structure Option = gs_29
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      structure Word = gs_53
++      ../sparc/instructions/sparcProps.sml
++   in
++      functor gs_55 = SparcProps
++   end
++   local
++      open l4
++   in
++      signature gs_56 = SDI_JUMPS
++   end
++   local
++      structure CellsBasis = gs_6
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_26
++      signature SDI_JUMPS = gs_56
++      signature SPARCINSTR = gs_16
++      signature SPARCSHUFFLE = gs_30
++      functor SparcInstr = gs_17
++      structure Word32 = gs_23
++      ../sparc/backpatch/sparcJumps.sml
++   in
++      functor gs_57 = SparcJumps
++   end
++   local
++      open l4
++   in
++      signature gs_58 = C_CALLS
++   end
++   local
++      open l4
++   in
++      structure gs_59 = CTypes
++   end
++   local
++      open l38
++   in
++      structure gs_60 = String
++   end
++   local
++      open l38
++   in
++      structure gs_61 = List
++   end
++   local
++      structure CTypes = gs_59
++      signature C_CALLS = gs_58
++      structure Int = gs_10
++      structure List = gs_61
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscAnnotations = gs_38
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE = gs_2
++      signature SPARCCELLS = gs_14
++      structure SparcCells = gs_15
++      structure SparcInstrExt = gs_18
++      structure String = gs_60
++      ../sparc/c-calls/sparc-c-calls.sml
++   in
++      functor gs_62 = Sparc_CCalls
++   end
++   local
++      open l4
++   in
++      signature gs_63 = ASM_FORMAT_UTIL
++      structure gs_64 = AsmFormatUtil
++   end
++   local
++      open l4
++   in
++      signature gs_65 = ASM_STREAM
++      structure gs_66 = AsmStream
++   end
++   local
++      open l38
++   in
++      structure gs_67 = TextIO
++   end
++   local
++      open l4
++   in
++      structure gs_68 = AsmFlags
++   end
++   local
++      signature ASM_FORMAT_UTIL = gs_63
++      signature ASM_STREAM = gs_65
++      structure Annotations = gs_8
++      structure AsmFlags = gs_68
++      structure AsmFormatUtil = gs_64
++      structure AsmStream = gs_66
++      structure CellsBasis = gs_6
++      signature INSTRUCTION_EMITTER = gs_21
++      signature INSTRUCTION_STREAM = gs_25
++      structure Int = gs_10
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature MLTREE_EVAL = gs_26
++      signature SPARCINSTR = gs_16
++      signature SPARCSHUFFLE = gs_30
++      functor SparcInstr = gs_17
++      structure String = gs_60
++      structure TextIO = gs_67
++      structure Word32 = gs_23
++      ../sparc/emit/sparcAsm.sml
++   in
++      functor gs_69 = SparcAsmEmitter
++   end
++   local
++      structure CellsBasis = gs_6
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      ../sparc/ra/sparcRewrite.sml
++   in
++      functor gs_70 = SparcRewrite
++   end
++   local
++      open l4
++   in
++      signature gs_71 = ARCH_SPILL_INSTR
++   end
++   local
++      signature ARCH_SPILL_INSTR = gs_71
++      structure CellsBasis = gs_6
++      signature MLRISC_ERROR_MSG = gs_12
++      structure MLRiscErrorMsg = gs_13
++      signature SPARCINSTR = gs_16
++      functor SparcInstr = gs_17
++      functor SparcRewrite = gs_70
++      ../sparc/ra/sparcSpillInstr.sml
++   in
++      functor gs_72 = SparcSpillInstr
++   end
++in
++   signature SPARCCELLS = gs_14
++   signature SPARCCOMP_INSTR_EXT = gs_19
++   signature SPARCINSTR = gs_16
++   signature SPARCSHUFFLE = gs_30
++   signature SPARC_PSEUDO_INSTR = gs_50
++   functor Sparc = gs_51
++   functor SparcAsmEmitter = gs_69
++   structure SparcCells = gs_15
++   functor SparcCompInstrExt = gs_20
++   functor SparcDelaySlots = gs_34
++   functor SparcFreqProps = gs_39
++   functor SparcGasPseudoOps = gs_45
++   functor SparcInstr = gs_17
++   structure SparcInstrExt = gs_18
++   functor SparcJumps = gs_57
++   functor SparcMCEmitter = gs_27
++   functor SparcProps = gs_55
++   functor SparcRewrite = gs_70
++   functor SparcShuffle = gs_31
++   functor SparcSpillInstr = gs_72
++   functor Sparc_CCalls = gs_62
++end
++end
++
++end
+diff --git a/mlb/StagedAlloc.mlb b/mlb/StagedAlloc.mlb
+new file mode 100644
+index 0000000..5aa93cc
+--- /dev/null
++++ b/mlb/StagedAlloc.mlb
+@@ -0,0 +1,91 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l11 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_23 = Word8Vector
++  basis l28 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       open l4
-+    in
-+       structure gs_24 = Word
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      ../staged-alloc/conventions/c-loc-kind.sml
++   in
++      structure gs_0 = CLocKind
++   end
++   local
++      ../staged-alloc/allocator/staged-allocation-sig.sml
++   in
++      signature gs_1 = STAGED_ALLOCATION
++   end
++   local
++      open l11
++   in
++      structure gs_2 = List
++   end
++   local
++      open l11
++   in
++      structure gs_3 = Int
++   end
++   local
++      structure CLocKind = gs_0
++      structure Int = gs_3
++      structure List = gs_2
++      signature STAGED_ALLOCATION = gs_1
++      ../staged-alloc/conventions/sparc-c-fn.sml
++   in
++      functor gs_4 = SparcCConventionFn
++   end
++   local
++      structure CLocKind = gs_0
++      structure Int = gs_3
++      structure List = gs_2
++      signature STAGED_ALLOCATION = gs_1
++      ../staged-alloc/conventions/x86-c-fn.sml
++   in
++      functor gs_5 = X86CConventionFn
++   end
++   local
++      structure CLocKind = gs_0
++      structure Int = gs_3
++      structure List = gs_2
++      signature STAGED_ALLOCATION = gs_1
++      ../staged-alloc/conventions/x86-64-c-fn.sml
++   in
++      functor gs_6 = X86_64CConventionFn
++   end
++   local
++      open l28
++   in
++      structure gs_7 = IntBinaryMap
++   end
++   local
++      structure Int = gs_3
++      structure IntBinaryMap = gs_7
++      structure List = gs_2
++      signature STAGED_ALLOCATION = gs_1
++      ../staged-alloc/allocator/staged-allocation-fn.sml
++   in
++      functor gs_8 = StagedAllocationFn
++   end
++in
++   structure CLocKind = gs_0
++   signature STAGED_ALLOCATION = gs_1
++   functor SparcCConventionFn = gs_4
++   functor StagedAllocationFn = gs_8
++   functor X86CConventionFn = gs_5
++   functor X86_64CConventionFn = gs_6
++end
++end
++
++end
+diff --git a/mlb/Visual.mlb b/mlb/Visual.mlb
+new file mode 100644
+index 0000000..7245fd9
+--- /dev/null
++++ b/mlb/Visual.mlb
+@@ -0,0 +1,252 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l23 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_25 = MLTREE_EVAL
++  basis l5 =
++    bas
++      (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       functor gs_26 = Shuffle
++  basis l19 =
++    bas
++      (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
 +    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       structure CellsBasis = gs_5
-+       functor Shuffle = gs_26
-+       ../amd64/instructions/amd64Shuffle.sml
-+    in
-+       signature gs_27 = AMD64SHUFFLE
-+       functor gs_28 = AMD64Shuffle
++  basis l12 =
++    bas
++      (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
 +    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       signature AMD64SHUFFLE = gs_27
-+       functor AMD64Shuffle = gs_28
-+       structure CellsBasis = gs_5
-+       structure Int32 = gs_8
-+       structure LargeWord = gs_22
-+       signature MC_EMIT = gs_19
-+       signature MLTREE_EVAL = gs_25
-+       structure Word = gs_24
-+       structure Word32 = gs_20
-+       structure Word8 = gs_21
-+       structure Word8Vector = gs_23
-+       ../amd64/amd64MCFn.sml
-+    in
-+       functor gs_29 = AMD64MCFn
++  basis l66 =
++    bas
++      (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
 +    end
-+    local
-+       open l9
-+    in
-+       signature gs_30 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       signature AMD64SHUFFLE = gs_27
-+       functor AMD64Shuffle = gs_28
-+       structure CellsBasis = gs_5
-+       signature INSTRUCTION_EMITTER = gs_30
-+       structure Int = gs_0
-+       structure Int32 = gs_8
-+       structure LargeWord = gs_22
-+       signature MC_EMIT = gs_19
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_25
-+       structure Word = gs_24
-+       structure Word32 = gs_20
-+       structure Word8 = gs_21
-+       structure Word8Vector = gs_23
-+       ../amd64/amd64MC.sml
-+    in
-+       functor gs_31 = AMD64MCEmitter
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_32 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_33 = GasPseudoOps
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_34 = PseudoOpsLittle
-+    end
-+    local
-+       open l111
-+    in
-+       structure gs_35 = Format
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_36 = PseudoOpsBasisTyp
-+    end
-+    local
-+       structure Format = gs_35
-+       functor GasPseudoOps = gs_33
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE = gs_3
-+       signature MLTREE_EVAL = gs_25
-+       signature PSEUDO_OPS_BASIS = gs_32
-+       structure PseudoOpsBasisTyp = gs_36
-+       functor PseudoOpsLittle = gs_34
-+       structure Word32 = gs_20
-+       ../amd64/flowgraph/amd64GasPseudoOps.sml
-+    in
-+       functor gs_37 = AMD64GasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_38 = List
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_39 = MLTREE_HASH
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_40 = INSN_PROPERTIES
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       structure CellsBasis = gs_5
-+       signature INSN_PROPERTIES = gs_40
-+       structure Int = gs_0
-+       structure Int32 = gs_8
-+       structure Int64 = gs_7
-+       structure Label = gs_6
-+       structure List = gs_38
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_25
-+       signature MLTREE_HASH = gs_39
-+       structure Word = gs_24
-+       ../amd64/instructions/amd64Props.sml
-+    in
-+       signature gs_41 = AMD64INSN_PROPERTIES
-+       functor gs_42 = AMD64Props
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_43 = SDI_JUMPS
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       signature AMD64SHUFFLE = gs_27
-+       functor AMD64Shuffle = gs_28
-+       signature MC_EMIT = gs_19
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_25
-+       signature SDI_JUMPS = gs_43
-+       structure Word8Vector = gs_23
-+       ../amd64/backpatch/amd64Jumps.sml
-+    in
-+       functor gs_44 = AMD64Jumps
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_45 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_46 = MLTREE_STREAM
-+    end
-+    local
-+       ../amd64/instructions/amd64InstrExt.sml
-+    in
-+       structure gs_47 = AMD64InstrExt
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       structure AMD64InstrExt = gs_47
-+       signature CONTROL_FLOW_GRAPH = gs_45
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_STREAM = gs_46
-+       ../amd64/instructions/amd64CompInstrExt.sml
-+    in
-+       signature gs_48 = AMD64COMP_INSTR_EXT
-+       functor gs_49 = AMD64CompInstrExt
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_50 = DarwinPseudoOps
-+    end
-+    local
-+       functor DarwinPseudoOps = gs_50
-+       structure Format = gs_35
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE = gs_3
-+       signature MLTREE_EVAL = gs_25
-+       signature PSEUDO_OPS_BASIS = gs_32
-+       structure PseudoOpsBasisTyp = gs_36
-+       functor PseudoOpsLittle = gs_34
-+       structure Word32 = gs_20
-+       ../amd64/flowgraph/amd64-darwin-pseudo-ops.sml
-+    in
-+       functor gs_51 = AMD64DarwinPseudoOps
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_52 = ASM_FORMAT_UTIL
-+       structure gs_53 = AsmFormatUtil
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_54 = ASM_STREAM
-+       structure gs_55 = AsmStream
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_56 = TextIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_57 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_58 = Char
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_59 = AsmFlags
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_60 = INSTRUCTION_STREAM
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       signature AMD64SHUFFLE = gs_27
-+       functor AMD64Shuffle = gs_28
-+       signature ASM_FORMAT_UTIL = gs_52
-+       signature ASM_STREAM = gs_54
-+       structure Annotations = gs_9
-+       structure AsmFlags = gs_59
-+       structure AsmFormatUtil = gs_53
-+       structure AsmStream = gs_55
-+       structure CellsBasis = gs_5
-+       structure Char = gs_58
-+       signature INSTRUCTION_EMITTER = gs_30
-+       signature INSTRUCTION_STREAM = gs_60
-+       structure Int = gs_0
-+       structure Int32 = gs_8
-+       structure Int64 = gs_7
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_25
-+       structure String = gs_57
-+       structure TextIO = gs_56
-+       ../amd64/emit/amd64Asm.sml
-+    in
-+       functor gs_61 = AMD64AsmEmitter
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_62 = CFG_OPTIMIZATION
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_63 = GetReg
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_64 = PRINT_FLOWGRAPH
-+       functor gs_65 = PrintFlowgraph
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_66 = RegisterAllocator
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_67 = MemoryRA
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_68 = RADeadCodeElim
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_69 = ClusterRA
-+    end
-+    local
-+       open l111
-+    in
-+       structure gs_70 = IntHashTable
-+    end
-+    local
-+       open l46
-+    in
-+       signature gs_71 = MLRISC_CONTROL
-+       structure gs_72 = MLRiscControl
-+    end
-+    local
-+       open l223
-+    in
-+       structure gs_73 = Graph
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_74 = Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_75 = Option
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_76 = RA_SPILL
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_77 = RA_SPILL_HEURISTICS
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_78 = RAGraph
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_79 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_80 = MLRiscAnnotations
-+    end
-+    local
-+       signature AMD64INSN_PROPERTIES = gs_41
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       functor AMD64Props = gs_42
-+       signature ARCH_SPILL_INSTR = gs_79
-+       structure Annotations = gs_9
-+       structure CellsBasis = gs_5
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscAnnotations = gs_80
-+       structure MLRiscErrorMsg = gs_13
-+       ../amd64/ra/amd64SpillInstr.sml
-+    in
-+       functor gs_81 = AMD64SpillInstr
-+    end
-+    local
-+       signature AMD64INSN_PROPERTIES = gs_41
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       functor AMD64Props = gs_42
-+       functor AMD64SpillInstr = gs_81
-+       structure Annotations = gs_9
-+       structure Array = gs_74
-+       signature CFG_OPTIMIZATION = gs_62
-+       signature CONTROL_FLOW_GRAPH = gs_45
-+       structure CellsBasis = gs_5
-+       functor ClusterRA = gs_69
-+       functor GetReg = gs_63
-+       structure Graph = gs_73
-+       signature INSTRUCTION_EMITTER = gs_30
-+       structure IntHashTable = gs_70
-+       structure List = gs_38
-+       signature MLRISC_CONTROL = gs_71
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscControl = gs_72
-+       structure MLRiscErrorMsg = gs_13
-+       functor MemoryRA = gs_67
-+       structure Option = gs_75
-+       signature PRINT_FLOWGRAPH = gs_64
-+       functor PrintFlowgraph = gs_65
-+       functor RADeadCodeElim = gs_68
-+       structure RAGraph = gs_78
-+       signature RA_SPILL = gs_76
-+       signature RA_SPILL_HEURISTICS = gs_77
-+       functor RegisterAllocator = gs_66
-+       ../amd64/ra/amd64RegAlloc.sml
-+    in
-+       functor gs_82 = AMD64RegAlloc
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_83 = MLTreeGen
-+    end
-+    local
-+       open l9
-+    in
-+       functor gs_84 = MLTreeSize
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_85 = IntInf
-+    end
-+    local
-+       open l34
-+    in
-+       signature gs_86 = PROBABILITY
-+       structure gs_87 = Probability
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_88 = ListPair
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_89 = MLTREECOMP
-+       signature gs_90 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       open l276
-+    in
-+       signature gs_91 = MLTREE_UTILS
-+    end
-+    local
-+       signature AMD64INSTR = gs_16
-+       functor AMD64Instr = gs_17
-+       functor AMD64Opcodes = gs_18
-+       structure CellsBasis = gs_5
-+       structure Int32 = gs_8
-+       structure Int64 = gs_7
-+       structure IntInf = gs_85
-+       structure Label = gs_6
-+       structure List = gs_38
-+       structure ListPair = gs_88
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscAnnotations = gs_80
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREECOMP = gs_89
-+       signature MLTREE_EXTENSION_COMP = gs_90
-+       signature MLTREE_UTILS = gs_91
-+       functor MLTreeGen = gs_83
-+       functor MLTreeSize = gs_84
-+       signature PROBABILITY = gs_86
-+       structure Probability = gs_87
-+       functor Shuffle = gs_26
-+       structure Word = gs_24
-+       structure Word32 = gs_20
-+       ../amd64/mltree/amd64-gen.sml
-+    in
-+       functor gs_92 = AMD64Gen
-+    end
-+ in
-+    functor AMD64AsmEmitter = gs_61
-+    signature AMD64CELLS = gs_14
-+    structure AMD64Cells = gs_15
-+    functor AMD64CompInstrExt = gs_49
-+    functor AMD64DarwinPseudoOps = gs_51
-+    functor AMD64GasPseudoOps = gs_37
-+    functor AMD64Gen = gs_92
-+    signature AMD64INSN_PROPERTIES = gs_41
-+    signature AMD64INSTR = gs_16
-+    functor AMD64Instr = gs_17
-+    structure AMD64InstrExt = gs_47
-+    functor AMD64Jumps = gs_44
-+    functor AMD64MCEmitter = gs_31
-+    functor AMD64MCFn = gs_29
-+    functor AMD64Opcodes = gs_18
-+    functor AMD64Props = gs_42
-+    functor AMD64RegAlloc = gs_82
-+    signature AMD64SHUFFLE = gs_27
-+    functor AMD64Shuffle = gs_28
-+    functor AMD64SpillInstr = gs_81
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/CCall-sparc.mlb MLRISC-mlton/mlb/CCall-sparc.mlb
-*** MLRISC/mlb/CCall-sparc.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/CCall-sparc.mlb	2010-04-02 16:08:57.000000000 -0400
-***************
-*** 0 ****
---- 1,118 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l29 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l33 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l8 = 
-+     bas
-+       (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
-+     end
-+   basis l19 = 
-+     bas
-+       (* $SPARC.cm(=(proxyLib.cm):.)/SPARC.cm =??=> *) SPARC.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = C_CALL
-+    end
-+    local
-+       open l8
-+    in
-+       functor gs_1 = SparcCConventionFn
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_2 = CCallGenFn
-+    end
-+    local
-+       open l8
-+    in
-+       functor gs_3 = StagedAllocationFn
-+    end
-+    local
-+       open l19
-+    in
-+       signature gs_4 = SPARCCELLS
-+       structure gs_5 = SparcCells
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_6 = CType
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_7 = CLocKind
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_8 = List
-+    end
-+    local
-+       open l33
-+    in
-+       signature gs_9 = MLTREE
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_10 = SparcInstrExt
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_11 = Int
-+    end
-+    local
-+       structure CType = gs_6
-+       structure Int = gs_11
-+       ../c-call/archs/sparc-c-sizes.sml
-+    in
-+       structure gs_12 = SparcCSizes
-+    end
-+    local
-+       functor CCallGenFn = gs_2
-+       structure CLocKind = gs_7
-+       structure CType = gs_6
-+       signature C_CALL = gs_0
-+       structure List = gs_8
-+       signature MLTREE = gs_9
-+       signature SPARCCELLS = gs_4
-+       functor SparcCConventionFn = gs_1
-+       structure SparcCSizes = gs_12
-+       structure SparcCells = gs_5
-+       structure SparcInstrExt = gs_10
-+       functor StagedAllocationFn = gs_3
-+       ../c-call/archs/sparc-c-call-fn.sml
-+    in
-+       functor gs_13 = SparcCCallFn
-+    end
-+ in
-+    functor SparcCCallFn = gs_13
-+    structure SparcCSizes = gs_12
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/CCall-x86-64.mlb MLRISC-mlton/mlb/CCall-x86-64.mlb
-*** MLRISC/mlb/CCall-x86-64.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/CCall-x86-64.mlb	2010-04-02 16:08:57.000000000 -0400
-***************
-*** 0 ****
---- 1,125 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l29 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l19 = 
-+     bas
-+       (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
-+     end
-+   basis l34 = 
-+     bas
-+       (* $AMD64.cm(=(proxyLib.cm):.)/AMD64.cm =??=> *) AMD64.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = CType
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = Word
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_2 = Int
-+    end
-+    local
-+       structure CType = gs_0
-+       structure Int = gs_2
-+       structure Word = gs_1
-+       ../c-call/archs/x86-64-c-sizes.sml
-+    in
-+       structure gs_3 = CSizes
-+    end
-+    local
-+       open l19
-+    in
-+       functor gs_4 = X86_64CConventionFn
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_5 = CCallGenFn
-+    end
-+    local
-+       open l19
-+    in
-+       functor gs_6 = StagedAllocationFn
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_7 = CellsBasis
-+    end
-+    local
-+       open l34
-+    in
-+       signature gs_8 = AMD64CELLS
-+       structure gs_9 = AMD64Cells
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_10 = CLocKind
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_11 = String
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_12 = List
-+    end
-+    local
-+       open l29
-+    in
-+       signature gs_13 = MLTREE
-+    end
-+    local
-+       signature AMD64CELLS = gs_8
-+       structure AMD64Cells = gs_9
-+       functor CCallGenFn = gs_5
-+       structure CLocKind = gs_10
-+       structure CSizes = gs_3
-+       structure CType = gs_0
-+       structure CellsBasis = gs_7
-+       structure Int = gs_2
-+       structure List = gs_12
-+       signature MLTREE = gs_13
-+       functor StagedAllocationFn = gs_6
-+       structure String = gs_11
-+       functor X86_64CConventionFn = gs_4
-+       ../c-call/archs/x86-64-svid-fn.sml
-+    in
-+       functor gs_14 = X86_64SVIDFn
-+    end
-+ in
-+    structure CSizes = gs_3
-+    functor X86_64SVIDFn = gs_14
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/CCall-x86.mlb MLRISC-mlton/mlb/CCall-x86.mlb
-*** MLRISC/mlb/CCall-x86.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/CCall-x86.mlb	2010-04-02 16:08:58.000000000 -0400
-***************
-*** 0 ****
---- 1,155 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l32 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l22 = 
-+     bas
-+       (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $CCall.cm(=(proxyLib.cm):.)/CCall.cm =??=> *) CCall.mlb
-+     end
-+   basis l37 = 
-+     bas
-+       (* $IA32.cm(=(proxyLib.cm):.)/IA32.cm =??=> *) IA32.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = CType
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = Word
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_2 = Int
-+    end
-+    local
-+       structure CType = gs_0
-+       structure Int = gs_2
-+       structure Word = gs_1
-+       ../c-call/archs/x86-c-sizes.sml
-+    in
-+       structure gs_3 = X86CSizes
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = C_CALL
-+    end
-+    local
-+       open l22
-+    in
-+       functor gs_5 = X86CConventionFn
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_6 = CCallGenFn
-+    end
-+    local
-+       open l22
-+    in
-+       functor gs_7 = StagedAllocationFn
-+    end
-+    local
-+       open l32
-+    in
-+       structure gs_8 = CellsBasis
-+    end
-+    local
-+       open l37
-+    in
-+       signature gs_9 = X86CELLS
-+       structure gs_10 = X86Cells
-+    end
-+    local
-+       open l22
-+    in
-+       structure gs_11 = CLocKind
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_12 = IntInf
-+    end
-+    local
-+       open l32
-+    in
-+       structure gs_13 = MLRiscAnnotations
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_14 = Int32
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_15 = String
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_16 = List
-+    end
-+    local
-+       open l32
-+    in
-+       signature gs_17 = MLTREE
-+    end
-+    local
-+       open l37
-+    in
-+       structure gs_18 = X86InstrExt
-+    end
-+    local
-+       functor CCallGenFn = gs_6
-+       structure CLocKind = gs_11
-+       structure CType = gs_0
-+       signature C_CALL = gs_4
-+       structure CellsBasis = gs_8
-+       structure Int = gs_2
-+       structure Int32 = gs_14
-+       structure IntInf = gs_12
-+       structure List = gs_16
-+       structure MLRiscAnnotations = gs_13
-+       signature MLTREE = gs_17
-+       functor StagedAllocationFn = gs_7
-+       structure String = gs_15
-+       functor X86CConventionFn = gs_5
-+       signature X86CELLS = gs_9
-+       structure X86CSizes = gs_3
-+       structure X86Cells = gs_10
-+       structure X86InstrExt = gs_18
-+       ../c-call/archs/x86-svid-fn.sml
-+    in
-+       functor gs_19 = X86SVIDFn
-+    end
-+ in
-+    structure X86CSizes = gs_3
-+    functor X86SVIDFn = gs_19
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/CCall.mlb MLRISC-mlton/mlb/CCall.mlb
-*** MLRISC/mlb/CCall.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/CCall.mlb	2010-04-02 16:08:56.000000000 -0400
-***************
-*** 0 ****
---- 1,96 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l20 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l9 = 
-+     bas
-+       (* $StagedAlloc.cm(=(proxyLib.cm):.)/StagedAlloc.cm =??=> *) StagedAlloc.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = MLTREE
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_1 = STAGED_ALLOCATION
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_2 = CLocKind
-+    end
-+    local
-+       structure CLocKind = gs_2
-+       signature MLTREE = gs_0
-+       signature STAGED_ALLOCATION = gs_1
-+       ../c-call/gen/c-call-gen-sig.sml
-+    in
-+       signature gs_3 = C_CALL_GEN
-+    end
-+    local
-+       open l20
-+    in
-+       structure gs_4 = List
-+    end
-+    local
-+       structure List = gs_4
-+       ../c-call/gen/c-type.sml
-+    in
-+       structure gs_5 = CType
-+    end
-+    local
-+       structure CType = gs_5
-+       signature C_CALL_GEN = gs_3
-+       signature MLTREE = gs_0
-+       ../c-call/gen/c-call-sig.sml
-+    in
-+       signature gs_6 = C_CALL
-+    end
-+    local
-+       open l20
-+    in
-+       structure gs_7 = ListPair
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_8 = CELLS
-+    end
-+    local
-+       signature CELLS = gs_8
-+       structure CLocKind = gs_2
-+       signature C_CALL_GEN = gs_3
-+       structure List = gs_4
-+       structure ListPair = gs_7
-+       signature MLTREE = gs_0
-+       signature STAGED_ALLOCATION = gs_1
-+       ../c-call/gen/c-call-gen-fn.sml
-+    in
-+       functor gs_9 = CCallGenFn
-+    end
-+ in
-+    functor CCallGenFn = gs_9
-+    structure CType = gs_5
-+    signature C_CALL = gs_6
-+    signature C_CALL_GEN = gs_3
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/Control.mlb MLRISC-mlton/mlb/Control.mlb
-*** MLRISC/mlb/Control.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/Control.mlb	2010-04-02 16:08:58.000000000 -0400
-***************
-*** 0 ****
---- 1,104 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l28 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l12 = 
-+     bas
-+       (* $/controls-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Controls/controls-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = Timer
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = Time
-+    end
-+    local
-+       open l12
-+    in
-+       structure gs_2 = Controls
-+    end
-+    local
-+       open l12
-+    in
-+       structure gs_3 = ControlUtil
-+    end
-+    local
-+       open l12
-+    in
-+       structure gs_4 = ControlSet
-+    end
-+    local
-+       open l12
-+    in
-+       structure gs_5 = ControlRegistry
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_6 = TextIO
-+    end
-+    local
-+       open l28
-+    in
-+       structure gs_7 = Atom
-+    end
-+    local
-+       structure Atom = gs_7
-+       structure ControlRegistry = gs_5
-+       structure ControlSet = gs_4
-+       structure ControlUtil = gs_3
-+       structure Controls = gs_2
-+       structure TextIO = gs_6
-+       structure Time = gs_1
-+       ../control/mlrisc-control.sml
-+    in
-+       signature gs_8 = MLRISC_CONTROL
-+       structure gs_9 = MLRiscControl
-+    end
-+    local
-+       signature MLRISC_CONTROL = gs_8
-+       structure MLRiscControl = gs_9
-+       structure Time = gs_1
-+       structure Timer = gs_0
-+       ../control/mlrisc-timing.sml
-+    in
-+       signature gs_10 = MLRISC_TIMING
-+       structure gs_11 = MLRiscTiming
-+    end
-+    local
-+       structure TextIO = gs_6
-+       ../control/mlriscErrormsg.sml
-+    in
-+       signature gs_12 = MLRISC_ERROR_MSG
-+       structure gs_13 = MLRiscErrorMsg
-+    end
-+ in
-+    signature MLRISC_CONTROL = gs_8
-+    signature MLRISC_ERROR_MSG = gs_12
-+    signature MLRISC_TIMING = gs_10
-+    structure MLRiscControl = gs_9
-+    structure MLRiscErrorMsg = gs_13
-+    structure MLRiscTiming = gs_11
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/Graphs.mlb MLRISC-mlton/mlb/Graphs.mlb
-*** MLRISC/mlb/Graphs.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/Graphs.mlb	2010-04-02 16:08:58.000000000 -0400
-***************
-*** 0 ****
---- 1,708 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l29 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = ListMergeSort
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = Int
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_2 = List
-+    end
-+    local
-+       ../graphs/graph.sig
-+    in
-+       signature gs_3 = GRAPH
-+    end
-+    local
-+       signature GRAPH = gs_3
-+       structure List = gs_2
-+       ../graphs/graph.sml
-+    in
-+       structure gs_4 = Graph
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure ListMergeSort = gs_0
-+       ../graphs/uniongraph.sml
-+    in
-+       signature gs_5 = UNION_GRAPH_VIEW
-+       structure gs_6 = UnionGraphView
-+    end
-+    local
-+       open l29
-+    in
-+       signature gs_7 = CATNETABLE_LIST
-+       structure gs_8 = CatnetableList
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_9 = Array
-+    end
-+    local
-+       ../graphs/group.sig
-+    in
-+       signature gs_10 = ABELIAN_GROUP
-+       signature gs_11 = ABELIAN_GROUP_WITH_INF
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       structure Graph = gs_4
-+       ../graphs/min-cut.sig
-+    in
-+       signature gs_12 = MIN_CUT
-+    end
-+    local
-+       open l8
-+    in
-+       signature gs_13 = ARRAY
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/node-priqueue.sig
-+    in
-+       signature gs_14 = NODE_PRIORITY_QUEUE
-+    end
-+    local
-+       signature ARRAY = gs_13
-+       structure Graph = gs_4
-+       signature NODE_PRIORITY_QUEUE = gs_14
-+       ../graphs/node-priqueue.sml
-+    in
-+       functor gs_15 = NodePriorityQueue
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       structure Array = gs_9
-+       signature CATNETABLE_LIST = gs_7
-+       structure CatnetableList = gs_8
-+       structure Graph = gs_4
-+       signature MIN_CUT = gs_12
-+       functor NodePriorityQueue = gs_15
-+       ../graphs/min-cut.sml
-+    in
-+       functor gs_16 = MinCut
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure List = gs_2
-+       ../graphs/isograph.sml
-+    in
-+       signature gs_17 = ISOMORPHIC_GRAPH_VIEW
-+       structure gs_18 = IsomorphicGraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure List = gs_2
-+       ../graphs/seme.sml
-+    in
-+       signature gs_19 = SINGLE_ENTRY_MULTIPLE_EXIT_VIEW
-+       structure gs_20 = SingleEntryMultipleExit
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-comb.sig
-+    in
-+       signature gs_21 = GRAPH_COMBINATIONS
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/revgraph.sml
-+    in
-+       signature gs_22 = REVERSED_GRAPH_VIEW
-+       structure gs_23 = ReversedGraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/renamegraph.sml
-+    in
-+       signature gs_24 = RENAMED_GRAPH_VIEW
-+       structure gs_25 = RenamedGraphView
-+    end
-+    local
-+       signature GRAPH_COMBINATIONS = gs_21
-+       structure Graph = gs_4
-+       signature RENAMED_GRAPH_VIEW = gs_24
-+       signature REVERSED_GRAPH_VIEW = gs_22
-+       structure RenamedGraphView = gs_25
-+       structure ReversedGraphView = gs_23
-+       signature UNION_GRAPH_VIEW = gs_5
-+       structure UnionGraphView = gs_6
-+       ../graphs/graph-comb.sml
-+    in
-+       structure gs_26 = GraphCombinations
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/readonly.sml
-+    in
-+       signature gs_27 = READONLY_GRAPH_VIEW
-+       structure gs_28 = ReadOnlyGraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graphimpl.sig
-+    in
-+       signature gs_29 = GRAPH_IMPLEMENTATION
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_30 = Word8Array
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-scc.sig
-+    in
-+       signature gs_31 = GRAPH_STRONGLY_CONNECTED_COMPONENTS
-+    end
-+    local
-+       structure Array = gs_9
-+       signature GRAPH_STRONGLY_CONNECTED_COMPONENTS = gs_31
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure Word8Array = gs_30
-+       ../graphs/graph-scc.sml
-+    in
-+       structure gs_32 = GraphSCC
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_33 = BitSet
-+    end
-+    local
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       ../graphs/graph-dfs.sig
-+    in
-+       signature gs_34 = GRAPH_DEPTH_FIRST_SEARCH
-+    end
-+    local
-+       structure Array = gs_9
-+       structure BitSet = gs_33
-+       signature GRAPH_DEPTH_FIRST_SEARCH = gs_34
-+       structure Graph = gs_4
-+       ../graphs/graph-dfs.sml
-+    in
-+       structure gs_35 = GraphDFS
-+    end
-+    local
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       ../graphs/graph-bfs.sig
-+    in
-+       signature gs_36 = GRAPH_BREATH_FIRST_SEARCH
-+    end
-+    local
-+       structure Array = gs_9
-+       structure BitSet = gs_33
-+       signature GRAPH_BREATH_FIRST_SEARCH = gs_36
-+       structure Graph = gs_4
-+       ../graphs/graph-bfs.sml
-+    in
-+       structure gs_37 = GraphBFS
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-bcc.sig
-+    in
-+       signature gs_38 = GRAPH_BICONNECTED_COMPONENTS
-+    end
-+    local
-+       structure Array = gs_9
-+       signature GRAPH_BICONNECTED_COMPONENTS = gs_38
-+       structure Graph = gs_4
-+       ../graphs/graph-bcc.sml
-+    in
-+       structure gs_39 = GraphBCC
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-topsort.sig
-+    in
-+       signature gs_40 = GRAPH_TOPOLOGICAL_SORT
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_41 = String
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure List = gs_2
-+       structure String = gs_41
-+       ../graphs/printgraph.sml
-+    in
-+       signature gs_42 = PRINT_GRAPH
-+       structure gs_43 = PrintGraph
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/no-exit.sml
-+    in
-+       signature gs_44 = NO_ENTRY_VIEW
-+       signature gs_45 = NO_EXIT_VIEW
-+       structure gs_46 = NoEntryView
-+       structure gs_47 = NoExitView
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_48 = PriorityQueue
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/spanning-tree.sig
-+    in
-+       signature gs_49 = MIN_COST_SPANNING_TREE
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_50 = HashTable
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_51 = URef
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_52 = Word
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure HashTable = gs_50
-+       structure URef = gs_51
-+       structure Word = gs_52
-+       ../graphs/node-partition.sml
-+    in
-+       signature gs_53 = NODE_PARTITION
-+       structure gs_54 = NodePartition
-+    end
-+    local
-+       structure Graph = gs_4
-+       signature MIN_COST_SPANNING_TREE = gs_49
-+       signature NODE_PARTITION = gs_53
-+       structure NodePartition = gs_54
-+       structure PriorityQueue = gs_48
-+       ../graphs/kruskal.sml
-+    in
-+       structure gs_55 = Kruskal
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_56 = HashArray
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure List = gs_2
-+       ../graphs/subgraph-p.sml
-+    in
-+       signature gs_57 = SUBGRAPH_P_VIEW
-+       structure gs_58 = Subgraph_P_View
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure HashArray = gs_56
-+       signature SUBGRAPH_P_VIEW = gs_57
-+       structure Subgraph_P_View = gs_58
-+       ../graphs/trace-graph.sml
-+    in
-+       signature gs_59 = TRACE_SUBGRAPH_VIEW
-+       structure gs_60 = TraceView
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure List = gs_2
-+       ../graphs/start-stop.sml
-+    in
-+       signature gs_61 = START_STOP_VIEW
-+       structure gs_62 = StartStopView
-+    end
-+    local
-+       signature GRAPH_IMPLEMENTATION = gs_29
-+       structure Graph = gs_4
-+       ../graphs/snap-shot.sml
-+    in
-+       signature gs_63 = GRAPH_SNAPSHOT
-+       functor gs_64 = GraphSnapShot
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       structure Graph = gs_4
-+       ../graphs/max-flow.sig
-+    in
-+       signature gs_65 = MAX_FLOW
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure List = gs_2
-+       signature MAX_FLOW = gs_65
-+       ../graphs/max-flow.sml
-+    in
-+       functor gs_66 = MaxFlow
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_67 = Array2
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       structure Array = gs_9
-+       structure Array2 = gs_67
-+       structure Graph = gs_4
-+       ../graphs/shortest-paths.sig
-+    in
-+       signature gs_68 = ALL_PAIRS_SHORTEST_PATHS
-+       signature gs_69 = SINGLE_SOURCE_SHORTEST_PATHS
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       signature ALL_PAIRS_SHORTEST_PATHS = gs_68
-+       structure Array2 = gs_67
-+       structure Graph = gs_4
-+       signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
-+       ../graphs/floyd-warshall.sml
-+    in
-+       functor gs_70 = FloydWarshall
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-is-cyclic.sig
-+    in
-+       signature gs_71 = GRAPH_IS_CYCLIC
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/update-graph-info.sml
-+    in
-+       signature gs_72 = UPDATE_GRAPH_INFO
-+       structure gs_73 = UpdateGraphInfo
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/graph-cycles.sig
-+    in
-+       signature gs_74 = GRAPH_SIMPLE_CYCLES
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       signature ALL_PAIRS_SHORTEST_PATHS = gs_68
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
-+       ../graphs/bellman-ford.sml
-+    in
-+       functor gs_75 = BellmanFord
-+    end
-+    local
-+       signature GRAPH_TOPOLOGICAL_SORT = gs_40
-+       structure Graph = gs_4
-+       structure Word8Array = gs_30
-+       ../graphs/graph-topsort.sml
-+    in
-+       structure gs_76 = GraphTopsort
-+    end
-+    local
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       structure GraphTopsort = gs_76
-+       ../graphs/trans-closure.sml
-+    in
-+       signature gs_77 = TRANSITIVE_CLOSURE
-+       structure gs_78 = TransitiveClosure
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_79 = DynArray
-+    end
-+    local
-+       structure DynArray = gs_79
-+       signature GRAPH_IMPLEMENTATION = gs_29
-+       structure Graph = gs_4
-+       structure List = gs_2
-+       ../graphs/digraph.sml
-+    in
-+       functor gs_80 = DirectedGraph
-+       structure gs_81 = DirectedGraph
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/wrappers.sml
-+    in
-+       signature gs_82 = GRAPH_WRAPPERS
-+       structure gs_83 = GraphWrappers
-+    end
-+    local
-+       structure BitSet = gs_33
-+       signature GRAPH_IS_CYCLIC = gs_71
-+       structure Graph = gs_4
-+       ../graphs/graph-is-cyclic.sml
-+    in
-+       structure gs_84 = GraphIsCyclic
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_85 = IntHashTable
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure IntHashTable = gs_85
-+       structure List = gs_2
-+       ../graphs/subgraph.sml
-+    in
-+       signature gs_86 = SUBGRAPH_VIEW
-+       structure gs_87 = SubgraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure Int = gs_1
-+       structure ListMergeSort = gs_0
-+       ../graphs/ugraph.sml
-+    in
-+       signature gs_88 = UNDIRECTED_GRAPH_VIEW
-+       structure gs_89 = UndirectedGraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure HashArray = gs_56
-+       structure List = gs_2
-+       structure URef = gs_51
-+       ../graphs/graph-minor.sml
-+    in
-+       signature gs_90 = GRAPH_MINOR_VIEW
-+       structure gs_91 = GraphMinorView
-+    end
-+    local
-+       signature ARRAY = gs_13
-+       signature GRAPH_IMPLEMENTATION = gs_29
-+       structure Graph = gs_4
-+       structure List = gs_2
-+       ../graphs/udgraph.sml
-+    in
-+       functor gs_92 = UndirectedGraph
-+    end
-+    local
-+       signature GRAPH = gs_3
-+       ../graphs/bigraph.sig
-+    in
-+       signature gs_93 = BIPARTITE_GRAPH
-+    end
-+    local
-+       structure Graph = gs_4
-+       structure HashArray = gs_56
-+       signature SUBGRAPH_P_VIEW = gs_57
-+       structure Subgraph_P_View = gs_58
-+       ../graphs/acyclic-graph.sml
-+    in
-+       signature gs_94 = ACYCLIC_SUBGRAPH_VIEW
-+       structure gs_95 = AcyclicSubgraphView
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/singleton.sml
-+    in
-+       signature gs_96 = SINGLETON_GRAPH_VIEW
-+       structure gs_97 = SingletonGraphView
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       signature ALL_PAIRS_SHORTEST_PATHS = gs_68
-+       structure Array = gs_9
-+       structure Graph = gs_4
-+       functor NodePriorityQueue = gs_15
-+       signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
-+       ../graphs/dijkstra.sml
-+    in
-+       functor gs_98 = Dijkstra
-+    end
-+    local
-+       signature ABELIAN_GROUP = gs_10
-+       signature ABELIAN_GROUP_WITH_INF = gs_11
-+       signature ALL_PAIRS_SHORTEST_PATHS = gs_68
-+       structure Array = gs_9
-+       structure Array2 = gs_67
-+       functor BellmanFord = gs_75
-+       functor Dijkstra = gs_98
-+       functor DirectedGraph = gs_80
-+       structure DirectedGraph = gs_81
-+       structure Graph = gs_4
-+       structure HashArray = gs_56
-+       signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
-+       signature UNION_GRAPH_VIEW = gs_5
-+       structure UnionGraphView = gs_6
-+       ../graphs/johnson.sml
-+    in
-+       functor gs_99 = Johnson
-+    end
-+    local
-+       structure Graph = gs_4
-+       ../graphs/matching.sig
-+    in
-+       signature gs_100 = BIPARTITE_MATCHING
-+    end
-+    local
-+       structure Array = gs_9
-+       signature GRAPH_SIMPLE_CYCLES = gs_74
-+       structure Graph = gs_4
-+       structure GraphSCC = gs_32
-+       ../graphs/graph-cycles.sml
-+    in
-+       structure gs_101 = GraphCycles
-+    end
-+    local
-+       structure Array = gs_9
-+       signature BIPARTITE_MATCHING = gs_100
-+       structure Graph = gs_4
-+       structure List = gs_2
-+       ../graphs/matching.sml
-+    in
-+       structure gs_102 = BipartiteMatching
-+    end
-+    local
-+       ../graphs/closed-semi-ring.sig
-+    in
-+       signature gs_103 = CLOSED_SEMI_RING
-+    end
-+ in
-+    signature ABELIAN_GROUP = gs_10
-+    signature ABELIAN_GROUP_WITH_INF = gs_11
-+    signature ACYCLIC_SUBGRAPH_VIEW = gs_94
-+    signature ALL_PAIRS_SHORTEST_PATHS = gs_68
-+    structure AcyclicSubgraphView = gs_95
-+    signature BIPARTITE_GRAPH = gs_93
-+    signature BIPARTITE_MATCHING = gs_100
-+    functor BellmanFord = gs_75
-+    structure BipartiteMatching = gs_102
-+    signature CLOSED_SEMI_RING = gs_103
-+    functor Dijkstra = gs_98
-+    functor DirectedGraph = gs_80
-+    structure DirectedGraph = gs_81
-+    functor FloydWarshall = gs_70
-+    signature GRAPH = gs_3
-+    signature GRAPH_BICONNECTED_COMPONENTS = gs_38
-+    signature GRAPH_BREATH_FIRST_SEARCH = gs_36
-+    signature GRAPH_COMBINATIONS = gs_21
-+    signature GRAPH_DEPTH_FIRST_SEARCH = gs_34
-+    signature GRAPH_IMPLEMENTATION = gs_29
-+    signature GRAPH_IS_CYCLIC = gs_71
-+    signature GRAPH_MINOR_VIEW = gs_90
-+    signature GRAPH_SIMPLE_CYCLES = gs_74
-+    signature GRAPH_SNAPSHOT = gs_63
-+    signature GRAPH_STRONGLY_CONNECTED_COMPONENTS = gs_31
-+    signature GRAPH_TOPOLOGICAL_SORT = gs_40
-+    signature GRAPH_WRAPPERS = gs_82
-+    structure Graph = gs_4
-+    structure GraphBCC = gs_39
-+    structure GraphBFS = gs_37
-+    structure GraphCombinations = gs_26
-+    structure GraphCycles = gs_101
-+    structure GraphDFS = gs_35
-+    structure GraphIsCyclic = gs_84
-+    structure GraphMinorView = gs_91
-+    structure GraphSCC = gs_32
-+    functor GraphSnapShot = gs_64
-+    structure GraphTopsort = gs_76
-+    structure GraphWrappers = gs_83
-+    signature ISOMORPHIC_GRAPH_VIEW = gs_17
-+    structure IsomorphicGraphView = gs_18
-+    functor Johnson = gs_99
-+    structure Kruskal = gs_55
-+    signature MAX_FLOW = gs_65
-+    signature MIN_COST_SPANNING_TREE = gs_49
-+    signature MIN_CUT = gs_12
-+    functor MaxFlow = gs_66
-+    functor MinCut = gs_16
-+    signature NODE_PARTITION = gs_53
-+    signature NODE_PRIORITY_QUEUE = gs_14
-+    signature NO_ENTRY_VIEW = gs_44
-+    signature NO_EXIT_VIEW = gs_45
-+    structure NoEntryView = gs_46
-+    structure NoExitView = gs_47
-+    structure NodePartition = gs_54
-+    functor NodePriorityQueue = gs_15
-+    signature PRINT_GRAPH = gs_42
-+    structure PrintGraph = gs_43
-+    signature READONLY_GRAPH_VIEW = gs_27
-+    signature RENAMED_GRAPH_VIEW = gs_24
-+    signature REVERSED_GRAPH_VIEW = gs_22
-+    structure ReadOnlyGraphView = gs_28
-+    structure RenamedGraphView = gs_25
-+    structure ReversedGraphView = gs_23
-+    signature SINGLETON_GRAPH_VIEW = gs_96
-+    signature SINGLE_ENTRY_MULTIPLE_EXIT_VIEW = gs_19
-+    signature SINGLE_SOURCE_SHORTEST_PATHS = gs_69
-+    signature START_STOP_VIEW = gs_61
-+    signature SUBGRAPH_P_VIEW = gs_57
-+    signature SUBGRAPH_VIEW = gs_86
-+    structure SingleEntryMultipleExit = gs_20
-+    structure SingletonGraphView = gs_97
-+    structure StartStopView = gs_62
-+    structure SubgraphView = gs_87
-+    structure Subgraph_P_View = gs_58
-+    signature TRACE_SUBGRAPH_VIEW = gs_59
-+    signature TRANSITIVE_CLOSURE = gs_77
-+    structure TraceView = gs_60
-+    structure TransitiveClosure = gs_78
-+    signature UNDIRECTED_GRAPH_VIEW = gs_88
-+    signature UNION_GRAPH_VIEW = gs_5
-+    signature UPDATE_GRAPH_INFO = gs_72
-+    functor UndirectedGraph = gs_92
-+    structure UndirectedGraphView = gs_89
-+    structure UnionGraphView = gs_6
-+    structure UpdateGraphInfo = gs_73
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/HPPA.mlb MLRISC-mlton/mlb/HPPA.mlb
-*** MLRISC/mlb/HPPA.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/HPPA.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,492 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l11 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l157 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l16 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l37 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = CellsBasis
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_1 = Shuffle
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_2 = Option
-+    end
-+    local
-+       open l16
-+    in
-+       signature gs_3 = MLRISC_ERROR_MSG
-+       structure gs_4 = MLRiscErrorMsg
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_5 = REGION
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_6 = CONSTANT
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_7 = MLTREE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_8 = CELLS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Label
-+    end
-+    local
-+       open l37
-+    in
-+       structure gs_10 = Annotations
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_11 = Cells
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_12 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_13 = CELLS
-+    end
-+    local
-+       signature CELLS = gs_13
-+       functor Cells = gs_11
-+       structure CellsBasis = gs_0
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       ../hppa/instructions/hppaCells.sml
-+    in
-+       signature gs_14 = HPPACELLS
-+       structure gs_15 = HppaCells
-+    end
-+    local
-+       structure Annotations = gs_10
-+       signature CELLS_BASIS = gs_8
-+       signature CONSTANT = gs_6
-+       structure CellsBasis = gs_0
-+       signature HPPACELLS = gs_14
-+       structure HppaCells = gs_15
-+       structure Label = gs_9
-+       signature MLTREE = gs_7
-+       signature REGION = gs_5
-+       ../hppa/instructions/hppaInstr.sml
-+    in
-+       signature gs_16 = HPPAINSTR
-+       functor gs_17 = HppaInstr
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       ../hppa/instructions/hppaShuffle.sig
-+    in
-+       signature gs_18 = HPPASHUFFLE
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       signature HPPASHUFFLE = gs_18
-+       functor HppaInstr = gs_17
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       structure Option = gs_2
-+       functor Shuffle = gs_1
-+       ../hppa/instructions/hppaShuffle.sml
-+    in
-+       functor gs_19 = HppaShuffle
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_20 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_21 = IntInf
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_22 = Word8
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_23 = Word32
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_24 = CODE_STRING
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_25 = INSTRUCTION_STREAM
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_26 = MLTREE_EVAL
-+    end
-+    local
-+       signature CODE_STRING = gs_24
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       signature INSTRUCTION_EMITTER = gs_20
-+       signature INSTRUCTION_STREAM = gs_25
-+       structure IntInf = gs_21
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREE_EVAL = gs_26
-+       structure Option = gs_2
-+       structure Word32 = gs_23
-+       structure Word8 = gs_22
-+       ../hppa/emit/hppaMC.sml
-+    in
-+       functor gs_27 = HppaMCEmitter
-+    end
-+    local
-+       signature CELLS_BASIS = gs_8
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       ../hppa/mltree/hppaMillicode.sig
-+    in
-+       signature gs_28 = HPPA_MILLICODE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_29 = ASM_FORMAT_UTIL
-+       structure gs_30 = AsmFormatUtil
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_31 = ASM_STREAM
-+       structure gs_32 = AsmStream
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_33 = TextIO
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_34 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_35 = AsmFlags
-+    end
-+    local
-+       signature ASM_FORMAT_UTIL = gs_29
-+       signature ASM_STREAM = gs_31
-+       structure Annotations = gs_10
-+       structure AsmFlags = gs_35
-+       structure AsmFormatUtil = gs_30
-+       structure AsmStream = gs_32
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       signature HPPASHUFFLE = gs_18
-+       functor HppaInstr = gs_17
-+       signature INSTRUCTION_EMITTER = gs_20
-+       signature INSTRUCTION_STREAM = gs_25
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREE_EVAL = gs_26
-+       structure String = gs_34
-+       structure TextIO = gs_33
-+       ../hppa/emit/hppaAsm.sml
-+    in
-+       functor gs_36 = HppaAsmEmitter
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_37 = INSTRUCTIONS
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature INSTRUCTIONS = gs_37
-+       signature MLTREE = gs_7
-+       ../hppa/mltree/hppaLabelComp.sig
-+    in
-+       signature gs_38 = LABEL_COMP
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_39 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       ../hppa/ra/hppaRewrite.sml
-+    in
-+       functor gs_40 = HppaRewrite
-+    end
-+    local
-+       signature ARCH_SPILL_INSTR = gs_39
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       functor HppaRewrite = gs_40
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       ../hppa/ra/hppaSpillInstr.sml
-+    in
-+       functor gs_41 = HppaSpillInstr
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_42 = FREQUENCY_PROPERTIES
-+    end
-+    local
-+       open l37
-+    in
-+       signature gs_43 = PROBABILITY
-+       structure gs_44 = Probability
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_45 = MLRiscAnnotations
-+    end
-+    local
-+       signature FREQUENCY_PROPERTIES = gs_42
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       structure MLRiscAnnotations = gs_45
-+       signature PROBABILITY = gs_43
-+       structure Probability = gs_44
-+       ../hppa/instructions/hppaFreqProps.sml
-+    in
-+       functor gs_46 = HppaFreqProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_47 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_48 = GasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_49 = PseudoOpsBig
-+    end
-+    local
-+       open l157
-+    in
-+       structure gs_50 = Format
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_51 = PseudoOpsBasisTyp
-+    end
-+    local
-+       structure Format = gs_50
-+       functor GasPseudoOps = gs_48
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREE = gs_7
-+       signature MLTREE_EVAL = gs_26
-+       signature PSEUDO_OPS_BASIS = gs_47
-+       structure PseudoOpsBasisTyp = gs_51
-+       functor PseudoOpsBig = gs_49
-+       structure Word32 = gs_23
-+       ../hppa/flowgraph/hppaGasPseudoOps.sml
-+    in
-+       functor gs_52 = HppaGasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_53 = DELAY_SLOT_PROPERTIES
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_54 = INSN_PROPERTIES
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature DELAY_SLOT_PROPERTIES = gs_53
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       signature INSN_PROPERTIES = gs_54
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       structure Option = gs_2
-+       ../hppa/backpatch/hppaDelaySlotProps.sml
-+    in
-+       functor gs_55 = HppaDelaySlots
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_56 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_57 = MLTREE_HASH
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       functor HppaInstr = gs_17
-+       signature INSN_PROPERTIES = gs_54
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREE_EVAL = gs_26
-+       signature MLTREE_HASH = gs_57
-+       structure Option = gs_2
-+       structure Word = gs_56
-+       ../hppa/instructions/hppaProps.sml
-+    in
-+       functor gs_58 = HppaProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_59 = SDI_JUMPS
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       signature HPPASHUFFLE = gs_18
-+       functor HppaInstr = gs_17
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREE_EVAL = gs_26
-+       signature SDI_JUMPS = gs_59
-+       structure Word = gs_56
-+       ../hppa/backpatch/hppaJumps.sml
-+    in
-+       functor gs_60 = HppaJumps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_61 = MLTreeMult
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_62 = MLTreeGen
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_63 = MLTREECOMP
-+       signature gs_64 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       structure CellsBasis = gs_0
-+       signature HPPAINSTR = gs_16
-+       signature HPPA_MILLICODE = gs_28
-+       functor HppaInstr = gs_17
-+       signature LABEL_COMP = gs_38
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_3
-+       structure MLRiscAnnotations = gs_45
-+       structure MLRiscErrorMsg = gs_4
-+       signature MLTREECOMP = gs_63
-+       signature MLTREE_EXTENSION_COMP = gs_64
-+       functor MLTreeGen = gs_62
-+       functor MLTreeMult = gs_61
-+       structure Word32 = gs_23
-+       ../hppa/mltree/hppa.sml
-+    in
-+       functor gs_65 = Hppa
-+    end
-+ in
-+    signature HPPACELLS = gs_14
-+    signature HPPAINSTR = gs_16
-+    signature HPPASHUFFLE = gs_18
-+    signature HPPA_MILLICODE = gs_28
-+    functor Hppa = gs_65
-+    functor HppaAsmEmitter = gs_36
-+    structure HppaCells = gs_15
-+    functor HppaDelaySlots = gs_55
-+    functor HppaFreqProps = gs_46
-+    functor HppaGasPseudoOps = gs_52
-+    functor HppaInstr = gs_17
-+    functor HppaJumps = gs_60
-+    functor HppaMCEmitter = gs_27
-+    functor HppaProps = gs_58
-+    functor HppaRewrite = gs_40
-+    functor HppaShuffle = gs_19
-+    functor HppaSpillInstr = gs_41
-+    signature LABEL_COMP = gs_38
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/IA32-Peephole.mlb MLRISC-mlton/mlb/IA32-Peephole.mlb
-*** MLRISC/mlb/IA32-Peephole.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/IA32-Peephole.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,60 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l8 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $Peephole.cm(=(proxyLib.cm):.)/Peephole.cm =??=> *) Peephole.mlb
-+     end
-+   basis l16 = 
-+     bas
-+       (* $IA32.cm(=(proxyLib.cm):.)/IA32.cm =??=> *) IA32.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = PEEPHOLE
-+    end
-+    local
-+       open l8
-+    in
-+       structure gs_1 = CellsBasis
-+    end
-+    local
-+       open l8
-+    in
-+       signature gs_2 = MLTREE_EVAL
-+    end
-+    local
-+       open l16
-+    in
-+       signature gs_3 = X86INSTR
-+       functor gs_4 = X86Instr
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature MLTREE_EVAL = gs_2
-+       signature PEEPHOLE = gs_0
-+       signature X86INSTR = gs_3
-+       functor X86Instr = gs_4
-+       ../x86/instructions/x86Peephole.sml
-+    in
-+       functor gs_5 = X86Peephole
-+    end
-+ in
-+    functor X86Peephole = gs_5
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/IA32.mlb MLRISC-mlton/mlb/IA32.mlb
-*** MLRISC/mlb/IA32.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/IA32.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,800 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l35 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l112 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l12 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l236 = 
-+     bas
-+       (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
-+     end
-+   basis l39 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+   basis l317 = 
-+     bas
-+       (* $MLTREE.cm(=(proxyLib.cm):.)/MLTREE.cm =??=> *) MLTREE.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = CellsBasis
-+    end
-+    local
-+       open l12
-+    in
-+       signature gs_2 = MLRISC_ERROR_MSG
-+       structure gs_3 = MLRiscErrorMsg
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = INSN_PROPERTIES
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_5 = REGION
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_6 = CONSTANT
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_7 = MLTREE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_8 = CELLS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Label
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_10 = Int32
-+    end
-+    local
-+       open l39
-+    in
-+       structure gs_11 = Annotations
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_12 = Cells
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_13 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_14 = CELLS
-+    end
-+    local
-+       signature CELLS = gs_14
-+       functor Cells = gs_12
-+       structure CellsBasis = gs_1
-+       structure Int = gs_13
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       ../x86/instructions/x86Cells.sml
-+    in
-+       signature gs_15 = X86CELLS
-+       structure gs_16 = X86Cells
-+    end
-+    local
-+       structure Annotations = gs_11
-+       signature CELLS_BASIS = gs_8
-+       signature CONSTANT = gs_6
-+       structure CellsBasis = gs_1
-+       structure Int32 = gs_10
-+       structure Label = gs_9
-+       signature MLTREE = gs_7
-+       signature REGION = gs_5
-+       signature X86CELLS = gs_15
-+       structure X86Cells = gs_16
-+       ../x86/instructions/x86Instr.sml
-+    in
-+       signature gs_17 = X86INSTR
-+       functor gs_18 = X86Instr
-+    end
-+    local
-+       signature ARCH_SPILL_INSTR = gs_0
-+       structure CellsBasis = gs_1
-+       signature INSN_PROPERTIES = gs_4
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/ra/x86SpillInstr.sml
-+    in
-+       functor gs_19 = X86SpillInstr
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/instructions/x86MemRegs.sig
-+    in
-+       signature gs_20 = MEMORY_REGISTERS
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_21 = MC_EMIT
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_22 = Word32
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_23 = Word8
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_24 = LargeWord
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_25 = Word8Vector
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_26 = Option
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_27 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_28 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_29 = MLTREE_EVAL
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/instructions/x86Shuffle.sig
-+    in
-+       signature gs_30 = X86SHUFFLE
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature INSTRUCTION_EMITTER = gs_28
-+       structure Int32 = gs_10
-+       structure LargeWord = gs_24
-+       signature MC_EMIT = gs_21
-+       signature MEMORY_REGISTERS = gs_20
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE_EVAL = gs_29
-+       structure Option = gs_26
-+       structure Word = gs_27
-+       structure Word32 = gs_22
-+       structure Word8 = gs_23
-+       structure Word8Vector = gs_25
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       signature X86SHUFFLE = gs_30
-+       ../x86/x86MC.sml
-+    in
-+       functor gs_31 = X86MCEmitter
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_32 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_33 = DarwinPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_34 = PseudoOpsLittle
-+    end
-+    local
-+       open l112
-+    in
-+       structure gs_35 = Format
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_36 = PseudoOpsBasisTyp
-+    end
-+    local
-+       functor DarwinPseudoOps = gs_33
-+       structure Format = gs_35
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE = gs_7
-+       signature MLTREE_EVAL = gs_29
-+       signature PSEUDO_OPS_BASIS = gs_32
-+       structure PseudoOpsBasisTyp = gs_36
-+       functor PseudoOpsLittle = gs_34
-+       structure Word32 = gs_22
-+       ../x86/flowgraph/x86-darwin-pseudo-ops.sml
-+    in
-+       functor gs_37 = X86DarwinPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_38 = Shuffle
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_39 = List
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       structure List = gs_39
-+       functor Shuffle = gs_38
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       signature X86SHUFFLE = gs_30
-+       ../x86/instructions/x86Shuffle.sml
-+    in
-+       functor gs_40 = X86Shuffle
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_41 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_42 = MLTREE_STREAM
-+    end
-+    local
-+       ../x86/instructions/x86instr-ext.sml
-+    in
-+       structure gs_43 = X86InstrExt
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_41
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE_STREAM = gs_42
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       structure X86InstrExt = gs_43
-+       ../x86/instructions/x86comp-instr-ext.sml
-+    in
-+       signature gs_44 = X86COMP_INSTR_EXT
-+       functor gs_45 = X86CompInstrExt
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_46 = GasPseudoOps
-+    end
-+    local
-+       structure Format = gs_35
-+       functor GasPseudoOps = gs_46
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE = gs_7
-+       signature MLTREE_EVAL = gs_29
-+       signature PSEUDO_OPS_BASIS = gs_32
-+       structure PseudoOpsBasisTyp = gs_36
-+       functor PseudoOpsLittle = gs_34
-+       structure Word32 = gs_22
-+       ../x86/flowgraph/x86GasPseudoOps.sml
-+    in
-+       functor gs_47 = X86GasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_48 = C_CALLS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_49 = CTypes
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_50 = IntInf
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_51 = MLRiscAnnotations
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_52 = String
-+    end
-+    local
-+       structure CTypes = gs_49
-+       signature C_CALLS = gs_48
-+       structure Int = gs_13
-+       structure Int32 = gs_10
-+       structure IntInf = gs_50
-+       structure List = gs_39
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscAnnotations = gs_51
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE = gs_7
-+       structure String = gs_52
-+       structure Word = gs_27
-+       signature X86CELLS = gs_15
-+       structure X86Cells = gs_16
-+       structure X86InstrExt = gs_43
-+       ../x86/c-calls/ia32-svid.sml
-+    in
-+       functor gs_53 = IA32SVID_CCalls
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_54 = FREQUENCY_PROPERTIES
-+    end
-+    local
-+       open l39
-+    in
-+       signature gs_55 = PROBABILITY
-+       structure gs_56 = Probability
-+    end
-+    local
-+       signature FREQUENCY_PROPERTIES = gs_54
-+       structure MLRiscAnnotations = gs_51
-+       signature PROBABILITY = gs_55
-+       structure Probability = gs_56
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/instructions/x86FreqProps.sml
-+    in
-+       functor gs_57 = X86FreqProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_58 = MLTREE_HASH
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature INSN_PROPERTIES = gs_4
-+       structure Int = gs_13
-+       structure Int32 = gs_10
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE_EVAL = gs_29
-+       signature MLTREE_HASH = gs_58
-+       structure Word = gs_27
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/instructions/x86Props.sml
-+    in
-+       functor gs_59 = X86Props
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_60 = SDI_JUMPS
-+    end
-+    local
-+       signature MC_EMIT = gs_21
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE_EVAL = gs_29
-+       signature SDI_JUMPS = gs_60
-+       structure Word8Vector = gs_25
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       signature X86SHUFFLE = gs_30
-+       ../x86/backpatch/x86Jumps.sml
-+    in
-+       functor gs_61 = X86Jumps
-+    end
-+    local
-+       signature CELLS_BASIS = gs_8
-+       structure CellsBasis = gs_1
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/ra/x86Rewrite.sig
-+    in
-+       signature gs_62 = X86REWRITE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_63 = CFG_OPTIMIZATION
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_64 = GetReg
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_65 = RegisterAllocator
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_66 = MemoryRA
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_67 = RADeadCodeElim
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_68 = ClusterRA
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_69 = LIVENESS
-+       functor gs_70 = Liveness
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_71 = PRINT_FLOWGRAPH
-+       functor gs_72 = PrintFlowgraph
-+    end
-+    local
-+       open l112
-+    in
-+       structure gs_73 = IntHashTable
-+    end
-+    local
-+       open l12
-+    in
-+       signature gs_74 = MLRISC_CONTROL
-+       structure gs_75 = MLRiscControl
-+    end
-+    local
-+       open l236
-+    in
-+       structure gs_76 = Graph
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_77 = Array
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_78 = RA_SPILL
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_79 = RA_SPILL_HEURISTICS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_80 = RAGraph
-+    end
-+    local
-+       open l112
-+    in
-+       structure gs_81 = IntRedBlackMap
-+    end
-+    local
-+       open l39
-+    in
-+       structure gs_82 = StringOutStream
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_83 = ASM_STREAM
-+       structure gs_84 = AsmStream
-+    end
-+    local
-+       open l112
-+    in
-+       structure gs_85 = ListMergeSort
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_86 = TextIO
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_87 = ListPair
-+    end
-+    local
-+       signature ASM_STREAM = gs_83
-+       structure Annotations = gs_11
-+       structure Array = gs_77
-+       structure AsmStream = gs_84
-+       signature CFG_OPTIMIZATION = gs_63
-+       signature CONTROL_FLOW_GRAPH = gs_41
-+       structure CellsBasis = gs_1
-+       structure Graph = gs_76
-+       signature INSN_PROPERTIES = gs_4
-+       signature INSTRUCTION_EMITTER = gs_28
-+       structure Int = gs_13
-+       structure IntHashTable = gs_73
-+       structure IntRedBlackMap = gs_81
-+       signature LIVENESS = gs_69
-+       structure Label = gs_9
-+       structure List = gs_39
-+       structure ListMergeSort = gs_85
-+       structure ListPair = gs_87
-+       functor Liveness = gs_70
-+       signature MLRISC_CONTROL = gs_74
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscAnnotations = gs_51
-+       structure MLRiscControl = gs_75
-+       structure MLRiscErrorMsg = gs_3
-+       structure String = gs_52
-+       structure StringOutStream = gs_82
-+       structure TextIO = gs_86
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/mltree/x86-fp.sml
-+    in
-+       functor gs_88 = X86FP
-+    end
-+    local
-+       structure Annotations = gs_11
-+       structure Array = gs_77
-+       signature CFG_OPTIMIZATION = gs_63
-+       signature CONTROL_FLOW_GRAPH = gs_41
-+       structure CellsBasis = gs_1
-+       functor ClusterRA = gs_68
-+       functor GetReg = gs_64
-+       structure Graph = gs_76
-+       signature INSN_PROPERTIES = gs_4
-+       signature INSTRUCTION_EMITTER = gs_28
-+       structure IntHashTable = gs_73
-+       signature LIVENESS = gs_69
-+       structure List = gs_39
-+       functor Liveness = gs_70
-+       signature MLRISC_CONTROL = gs_74
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscControl = gs_75
-+       structure MLRiscErrorMsg = gs_3
-+       functor MemoryRA = gs_66
-+       signature PRINT_FLOWGRAPH = gs_71
-+       functor PrintFlowgraph = gs_72
-+       functor RADeadCodeElim = gs_67
-+       structure RAGraph = gs_80
-+       signature RA_SPILL = gs_78
-+       signature RA_SPILL_HEURISTICS = gs_79
-+       functor RegisterAllocator = gs_65
-+       functor X86FP = gs_88
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       functor X86SpillInstr = gs_19
-+       ../x86/ra/x86RA.sml
-+    in
-+       functor gs_89 = X86RA
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_90 = OMIT_FRAME_POINTER
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_91 = General
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_41
-+       structure CellsBasis = gs_1
-+       structure General = gs_91
-+       structure Graph = gs_76
-+       structure Int32 = gs_10
-+       structure IntHashTable = gs_73
-+       structure ListPair = gs_87
-+       signature MEMORY_REGISTERS = gs_20
-+       signature MLRISC_CONTROL = gs_74
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscAnnotations = gs_51
-+       structure MLRiscControl = gs_75
-+       structure MLRiscErrorMsg = gs_3
-+       signature OMIT_FRAME_POINTER = gs_90
-+       structure Option = gs_26
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/omit-frameptr/x86omit-frameptr.sml
-+    in
-+       functor gs_92 = X86OmitFramePointer
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_93 = ASM_FORMAT_UTIL
-+       structure gs_94 = AsmFormatUtil
-+    end
-+    local
-+       open l35
-+    in
-+       structure gs_95 = Char
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_96 = AsmFlags
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_97 = INSTRUCTION_STREAM
-+    end
-+    local
-+       signature ASM_FORMAT_UTIL = gs_93
-+       signature ASM_STREAM = gs_83
-+       structure Annotations = gs_11
-+       structure AsmFlags = gs_96
-+       structure AsmFormatUtil = gs_94
-+       structure AsmStream = gs_84
-+       structure CellsBasis = gs_1
-+       structure Char = gs_95
-+       signature INSTRUCTION_EMITTER = gs_28
-+       signature INSTRUCTION_STREAM = gs_97
-+       structure Int = gs_13
-+       structure Int32 = gs_10
-+       signature MEMORY_REGISTERS = gs_20
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREE_EVAL = gs_29
-+       structure Option = gs_26
-+       structure String = gs_52
-+       structure TextIO = gs_86
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       signature X86SHUFFLE = gs_30
-+       ../x86/emit/x86Asm.sml
-+    in
-+       functor gs_98 = X86AsmEmitter
-+    end
-+    local
-+       structure CellsBasis = gs_1
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscErrorMsg = gs_3
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       signature X86REWRITE = gs_62
-+       ../x86/ra/x86Rewrite.sml
-+    in
-+       functor gs_99 = X86Rewrite
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_100 = MLTreeGen
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_101 = MLTREECOMP
-+       signature gs_102 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       open l317
-+    in
-+       signature gs_103 = MLTREE_UTILS
-+    end
-+    local
-+       structure Annotations = gs_11
-+       structure CellsBasis = gs_1
-+       structure Int = gs_13
-+       structure Int32 = gs_10
-+       structure Label = gs_9
-+       structure List = gs_39
-+       signature MLRISC_ERROR_MSG = gs_2
-+       structure MLRiscAnnotations = gs_51
-+       structure MLRiscErrorMsg = gs_3
-+       signature MLTREECOMP = gs_101
-+       signature MLTREE_EXTENSION_COMP = gs_102
-+       signature MLTREE_STREAM = gs_42
-+       signature MLTREE_UTILS = gs_103
-+       functor MLTreeGen = gs_100
-+       signature PROBABILITY = gs_55
-+       structure Probability = gs_56
-+       functor Shuffle = gs_38
-+       structure Word = gs_27
-+       structure Word32 = gs_22
-+       signature X86INSTR = gs_17
-+       functor X86Instr = gs_18
-+       ../x86/mltree/x86.sml
-+    in
-+       functor gs_104 = X86
-+    end
-+ in
-+    functor IA32SVID_CCalls = gs_53
-+    signature MEMORY_REGISTERS = gs_20
-+    functor X86 = gs_104
-+    functor X86AsmEmitter = gs_98
-+    signature X86CELLS = gs_15
-+    signature X86COMP_INSTR_EXT = gs_44
-+    structure X86Cells = gs_16
-+    functor X86CompInstrExt = gs_45
-+    functor X86DarwinPseudoOps = gs_37
-+    functor X86FP = gs_88
-+    functor X86FreqProps = gs_57
-+    functor X86GasPseudoOps = gs_47
-+    signature X86INSTR = gs_17
-+    functor X86Instr = gs_18
-+    structure X86InstrExt = gs_43
-+    functor X86Jumps = gs_61
-+    functor X86MCEmitter = gs_31
-+    functor X86OmitFramePointer = gs_92
-+    functor X86Props = gs_59
-+    functor X86RA = gs_89
-+    signature X86REWRITE = gs_62
-+    functor X86Rewrite = gs_99
-+    signature X86SHUFFLE = gs_30
-+    functor X86Shuffle = gs_40
-+    functor X86SpillInstr = gs_19
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/Lib.mlb MLRISC-mlton/mlb/Lib.mlb
-*** MLRISC/mlb/Lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/Lib.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,263 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = ArraySlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = Array
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_2 = Vector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = General
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_4 = List
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_5 = Int
-+    end
-+    local
-+       structure Array = gs_1
-+       structure ArraySlice = gs_0
-+       structure General = gs_3
-+       structure Int = gs_5
-+       structure List = gs_4
-+       structure Vector = gs_2
-+       ../library/dynamic-array.sml
-+    in
-+       structure gs_6 = DynArray
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_8 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Word8
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_10 = Word8Array
-+    end
-+    local
-+       ../library/bitset.sig
-+    in
-+       signature gs_11 = BITSET
-+    end
-+    local
-+       signature BITSET = gs_11
-+       structure String = gs_7
-+       structure Word = gs_8
-+       structure Word8 = gs_9
-+       structure Word8Array = gs_10
-+       ../library/bitset.sml
-+    in
-+       structure gs_12 = BitSet
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_13 = TextIO
-+    end
-+    local
-+       structure TextIO = gs_13
-+       ../library/stringOutStream.sig
-+    in
-+       signature gs_14 = STRING_OUTSTREAM
-+    end
-+    local
-+       structure String = gs_7
-+       ../library/line-break.sml
-+    in
-+       signature gs_15 = LINE_BREAK
-+       structure gs_16 = LineBreak
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_17 = Real
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_18 = IntInf
-+    end
-+    local
-+       structure Int = gs_5
-+       structure IntInf = gs_18
-+       structure List = gs_4
-+       structure Real = gs_17
-+       ../library/probability.sml
-+    in
-+       signature gs_19 = PROBABILITY
-+       structure gs_20 = Probability
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_21 = TextPrimIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_22 = CharArraySlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_23 = CharVectorSlice
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_24 = IO
-+    end
-+    local
-+       structure CharArraySlice = gs_22
-+       structure CharVectorSlice = gs_23
-+       structure IO = gs_24
-+       structure List = gs_4
-+       signature STRING_OUTSTREAM = gs_14
-+       structure String = gs_7
-+       structure TextIO = gs_13
-+       structure TextPrimIO = gs_21
-+       ../library/stringOutStream.sml
-+    in
-+       structure gs_25 = StringOutStream
-+    end
-+    local
-+       ../library/catlist.sml
-+    in
-+       signature gs_26 = CATNETABLE_LIST
-+       structure gs_27 = CatnetableList
-+    end
-+    local
-+       ../library/priQueue.sig
-+    in
-+       signature gs_28 = PRIORITY_QUEUE
-+    end
-+    local
-+       structure Array = gs_1
-+       signature PRIORITY_QUEUE = gs_28
-+       ../library/heap.sml
-+    in
-+       structure gs_29 = PriorityHeap
-+    end
-+    local
-+       ../library/annotations.sig
-+    in
-+       signature gs_30 = ANNOTATIONS
-+    end
-+    local
-+       signature ANNOTATIONS = gs_30
-+       ../library/annotations.sml
-+    in
-+       structure gs_31 = Annotations
-+    end
-+    local
-+       structure Array = gs_1
-+       structure List = gs_4
-+       structure Vector = gs_2
-+       structure Word = gs_8
-+       ../library/hash-array.sml
-+    in
-+       structure gs_32 = HashArray
-+    end
-+    local
-+       ../library/cache.sml
-+    in
-+       signature gs_33 = CACHE_REF
-+       structure gs_34 = CacheRef
-+    end
-+    local
-+       ../library/sortedlist.sml
-+    in
-+       structure gs_35 = SortedList
-+    end
-+    local
-+       structure Int = gs_5
-+       signature PRIORITY_QUEUE = gs_28
-+       ../library/priQueue.sml
-+    in
-+       structure gs_36 = PriorityQueue
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_37 = INTEGER
-+    end
-+    local
-+       signature INTEGER = gs_37
-+       ../library/freq.sig
-+    in
-+       signature gs_38 = FREQ
-+    end
-+    local
-+       signature FREQ = gs_38
-+       structure Int = gs_5
-+       ../library/freq.sml
-+    in
-+       structure gs_39 = Freq
-+    end
-+ in
-+    signature ANNOTATIONS = gs_30
-+    structure Annotations = gs_31
-+    signature BITSET = gs_11
-+    structure BitSet = gs_12
-+    signature CACHE_REF = gs_33
-+    signature CATNETABLE_LIST = gs_26
-+    structure CacheRef = gs_34
-+    structure CatnetableList = gs_27
-+    structure DynArray = gs_6
-+    signature FREQ = gs_38
-+    structure Freq = gs_39
-+    structure HashArray = gs_32
-+    signature LINE_BREAK = gs_15
-+    structure LineBreak = gs_16
-+    signature PRIORITY_QUEUE = gs_28
-+    signature PROBABILITY = gs_19
-+    structure PriorityHeap = gs_29
-+    structure PriorityQueue = gs_36
-+    structure Probability = gs_20
-+    signature STRING_OUTSTREAM = gs_14
-+    structure SortedList = gs_35
-+    structure StringOutStream = gs_25
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/MLRISC.mlb MLRISC-mlton/mlb/MLRISC.mlb
-*** MLRISC/mlb/MLRISC.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/MLRISC.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,1746 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l13 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l19 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l44 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l5 = 
-+     bas
-+       (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
-+     end
-+   basis l9 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l5
-+    in
-+       structure gs_0 = Graph
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_1 = Annotations
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_2 = TextIO
-+    end
-+    local
-+       open l19
-+    in
-+       signature gs_3 = MONO_HASH_TABLE
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_4 = Array
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure Array = gs_4
-+       signature MONO_HASH_TABLE = gs_3
-+       ../instructions/cells-basis.sig
-+    in
-+       signature gs_5 = CELLS_BASIS
-+    end
-+    local
-+       open l19
-+    in
-+       functor gs_6 = HashTableFn
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_7 = String
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_8 = Word
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_9 = List
-+    end
-+    local
-+       open l44
-+    in
-+       signature gs_10 = MLRISC_ERROR_MSG
-+       structure gs_11 = MLRiscErrorMsg
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_12 = Int
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure Array = gs_4
-+       signature CELLS_BASIS = gs_5
-+       functor HashTableFn = gs_6
-+       structure Int = gs_12
-+       structure List = gs_9
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       structure String = gs_7
-+       structure Word = gs_8
-+       ../instructions/cells-basis.sml
-+    in
-+       structure gs_13 = CellsBasis
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       ../instructions/cells.sig
-+    in
-+       signature gs_14 = CELLS
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       ../instructions/instructions.sig
-+    in
-+       signature gs_15 = INSTRUCTIONS
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_16 = Word8
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_17 = Int32
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_18 = IntInf
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_19 = Int64
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_20 = Word32
-+    end
-+    local
-+       structure Int32 = gs_17
-+       structure Int64 = gs_19
-+       structure IntInf = gs_18
-+       structure Word32 = gs_20
-+       ../mltree/machine-int.sig
-+    in
-+       signature gs_21 = MACHINE_INT
-+    end
-+    local
-+       ../mltree/mltree-extension.sig
-+    in
-+       signature gs_22 = MLTREE_EXTENSION
-+    end
-+    local
-+       ../mltree/mltree-basis.sig
-+    in
-+       signature gs_23 = MLTREE_BASIS
-+    end
-+    local
-+       ../instructions/region.sig
-+    in
-+       signature gs_24 = REGION
-+    end
-+    local
-+       ../instructions/constant.sig
-+    in
-+       signature gs_25 = CONSTANT
-+    end
-+    local
-+       ../instructions/label-sig.sml
-+    in
-+       signature gs_26 = LABEL
-+    end
-+    local
-+       signature LABEL = gs_26
-+       structure Word = gs_8
-+       ../instructions/label.sml
-+    in
-+       structure gs_27 = Label
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CONSTANT = gs_25
-+       structure CellsBasis = gs_13
-+       structure Int32 = gs_17
-+       structure Label = gs_27
-+       signature MACHINE_INT = gs_21
-+       signature MLTREE_BASIS = gs_23
-+       signature MLTREE_EXTENSION = gs_22
-+       signature REGION = gs_24
-+       ../mltree/mltree.sig
-+    in
-+       signature gs_28 = MLTREE
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_29 = Atom
-+    end
-+    local
-+       structure Atom = gs_29
-+       structure Label = gs_27
-+       ../flowgraph/pseudo-ops-basis-typ.sml
-+    in
-+       structure gs_30 = PseudoOpsBasisTyp
-+    end
-+    local
-+       structure Label = gs_27
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure Word8 = gs_16
-+       ../flowgraph/pseudo-ops-basis.sig
-+    in
-+       signature gs_31 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       signature PSEUDO_OPS_BASIS = gs_31
-+       structure Word8 = gs_16
-+       ../flowgraph/client-pseudo-ops.sig
-+    in
-+       signature gs_32 = CLIENT_PSEUDO_OPS
-+    end
-+    local
-+       signature CLIENT_PSEUDO_OPS = gs_32
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure Word8 = gs_16
-+       ../flowgraph/pseudo-ops.sig
-+    in
-+       signature gs_33 = PSEUDO_OPS
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure Graph = gs_0
-+       signature INSTRUCTIONS = gs_15
-+       structure Label = gs_27
-+       signature PSEUDO_OPS = gs_33
-+       structure TextIO = gs_2
-+       ../flowgraph/cfg.sig
-+    in
-+       signature gs_34 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       ../emit/asmEmit.sig
-+    in
-+       signature gs_35 = ASSEMBLY_EMITTER
-+    end
-+    local
-+       structure List = gs_9
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-check-ty.sml
-+    in
-+       functor gs_36 = MLTreeCheckTy
-+    end
-+    local
-+       open l5
-+    in
-+       signature gs_37 = GRAPH_IMPLEMENTATION
-+    end
-+    local
-+       structure Array = gs_4
-+       signature GRAPH_IMPLEMENTATION = gs_37
-+       structure Graph = gs_0
-+       ../ir-archive/dominator.sig
-+    in
-+       signature gs_38 = DOMINATOR_TREE
-+    end
-+    local
-+       structure Array = gs_4
-+       signature DOMINATOR_TREE = gs_38
-+       signature GRAPH_IMPLEMENTATION = gs_37
-+       structure Graph = gs_0
-+       ../ir-archive/loop-structure.sig
-+    in
-+       signature gs_39 = LOOP_STRUCTURE
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_40 = BitSet
-+    end
-+    local
-+       open l5
-+    in
-+       signature gs_41 = REVERSED_GRAPH_VIEW
-+       structure gs_42 = ReversedGraphView
-+    end
-+    local
-+       structure Array = gs_4
-+       structure BitSet = gs_40
-+       signature DOMINATOR_TREE = gs_38
-+       signature GRAPH_IMPLEMENTATION = gs_37
-+       structure Graph = gs_0
-+       structure List = gs_9
-+       signature REVERSED_GRAPH_VIEW = gs_41
-+       structure ReversedGraphView = gs_42
-+       ../ir-archive/dominator.sml
-+    in
-+       functor gs_43 = DominatorTree
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure Label = gs_27
-+       signature PSEUDO_OPS = gs_33
-+       ../instructions/stream.sig
-+    in
-+       signature gs_44 = INSTRUCTION_STREAM
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature INSTRUCTION_STREAM = gs_44
-+       structure Label = gs_27
-+       signature PSEUDO_OPS = gs_33
-+       ../instructions/stream.sml
-+    in
-+       functor gs_45 = InstructionStream
-+    end
-+    local
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-size.sig
-+    in
-+       signature gs_46 = MLTREE_SIZE
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure CellsBasis = gs_13
-+       signature MLTREE = gs_28
-+       signature MLTREE_SIZE = gs_46
-+       ../mltree/mltree-gen.sig
-+    in
-+       signature gs_47 = MLTREEGEN
-+    end
-+    local
-+       signature INSTRUCTION_STREAM = gs_44
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-stream.sig
-+    in
-+       signature gs_48 = MLTREE_STREAM
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       signature MLTREE = gs_28
-+       signature MLTREEGEN = gs_47
-+       signature MLTREE_STREAM = gs_48
-+       ../mltree/mltreecomp.sig
-+    in
-+       signature gs_49 = MLTREECOMP
-+       signature gs_50 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_51 = Format
-+    end
-+    local
-+       structure TextIO = gs_2
-+       ../emit/asmStream.sml
-+    in
-+       signature gs_52 = ASM_STREAM
-+       structure gs_53 = AsmStream
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature INSTRUCTIONS = gs_15
-+       signature INSTRUCTION_STREAM = gs_44
-+       ../emit/instruction-emitter.sig
-+    in
-+       signature gs_54 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       signature ASM_STREAM = gs_52
-+       structure AsmStream = gs_53
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Format = gs_51
-+       structure Graph = gs_0
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Int = gs_12
-+       structure List = gs_9
-+       structure TextIO = gs_2
-+       ../flowgraph/printFlowgraph.sml
-+    in
-+       signature gs_55 = PRINT_FLOWGRAPH
-+       functor gs_56 = PrintFlowgraph
-+    end
-+    local
-+       structure Array = gs_4
-+       ../ra/getreg.sig
-+    in
-+       signature gs_57 = GETREG
-+    end
-+    local
-+       structure Array = gs_4
-+       signature GETREG = gs_57
-+       ../ra/getreg.sml
-+    in
-+       functor gs_58 = GetReg
-+    end
-+    local
-+       signature INSTRUCTIONS = gs_15
-+       structure Label = gs_27
-+       ../backpatch/delaySlotProps.sig
-+    in
-+       signature gs_59 = DELAY_SLOT_PROPERTIES
-+    end
-+    local
-+       structure List = gs_9
-+       ../c-calls/c-types.sml
-+    in
-+       structure gs_60 = CTypes
-+    end
-+    local
-+       structure CTypes = gs_60
-+       signature MLTREE = gs_28
-+       ../c-calls/c-calls.sig
-+    in
-+       signature gs_61 = C_CALLS
-+    end
-+    local
-+       signature C_CALLS = gs_61
-+       signature MLTREE = gs_28
-+       ../c-calls/unimplemented-c-calls.sml
-+    in
-+       functor gs_62 = UnimplementedCCallsFn
-+    end
-+    local
-+       open l44
-+    in
-+       signature gs_63 = MLRISC_CONTROL
-+       structure gs_64 = MLRiscControl
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_65 = ListMergeSort
-+    end
-+    local
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       ../aliasing/pointsTo.sig
-+    in
-+       signature gs_66 = POINTS_TO
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       structure Int = gs_12
-+       structure ListMergeSort = gs_65
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       signature POINTS_TO = gs_66
-+       ../aliasing/pointsTo.sml
-+    in
-+       structure gs_67 = PointsTo
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_68 = Char
-+    end
-+    local
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure Word8 = gs_16
-+       ../flowgraph/pseudo-ops-endian.sig
-+    in
-+       signature gs_69 = PSEUDO_OPS_ENDIAN
-+    end
-+    local
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-eval.sig
-+    in
-+       signature gs_70 = MLTREE_EVAL
-+    end
-+    local
-+       structure Char = gs_68
-+       structure Int = gs_12
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       signature MLTREE_EVAL = gs_70
-+       signature PSEUDO_OPS_ENDIAN = gs_69
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure String = gs_7
-+       structure Word = gs_8
-+       structure Word32 = gs_20
-+       structure Word8 = gs_16
-+       ../flowgraph/pseudo-ops-big.sml
-+    in
-+       functor gs_71 = PseudoOpsBig
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       ../backpatch/bbsched.sig
-+    in
-+       signature gs_72 = BBSCHED
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure Label = gs_27
-+       ../instructions/insnProps.sig
-+    in
-+       signature gs_73 = INSN_PROPERTIES
-+    end
-+    local
-+       signature CELLS = gs_14
-+       signature INSTRUCTIONS = gs_15
-+       structure Label = gs_27
-+       ../backpatch/sdi-jumps.sig
-+    in
-+       signature gs_74 = SDI_JUMPS
-+    end
-+    local
-+       structure Array = gs_4
-+       signature BBSCHED = gs_72
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       signature DELAY_SLOT_PROPERTIES = gs_59
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Label = gs_27
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       signature SDI_JUMPS = gs_74
-+       ../backpatch/spanDep.sml
-+    in
-+       functor gs_75 = SpanDependencyResolution
-+    end
-+    local
-+       structure Label = gs_27
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       ../flowgraph/as-pseudo-ops.sig
-+    in
-+       signature gs_76 = AS_PSEUDO_OPS
-+    end
-+    local
-+       signature AS_PSEUDO_OPS = gs_76
-+       structure Atom = gs_29
-+       structure Format = gs_51
-+       structure Int = gs_12
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure String = gs_7
-+       ../flowgraph/darwin-pseudo-ops.sml
-+    in
-+       functor gs_77 = DarwinPseudoOps
-+    end
-+    local
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       ../ra/ra-flowgraph-part.sig
-+    in
-+       signature gs_78 = RA_FLOWGRAPH_PARTITIONER
-+    end
-+    local
-+       structure Word8 = gs_16
-+       ../emit/code-string.sig
-+    in
-+       signature gs_79 = CODE_STRING
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_80 = PROBABILITY
-+       structure gs_81 = Probability
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_82 = Real
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       ../frequencies/compute-execution-freqs.sig
-+    in
-+       signature gs_83 = COMPUTE_EXECUTION_FREQUENCIES
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../instructions/mlriscAnnotations.sig
-+    in
-+       signature gs_84 = MLRISC_ANNOTATIONS
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure CellsBasis = gs_13
-+       structure Int = gs_12
-+       signature MLRISC_ANNOTATIONS = gs_84
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../instructions/mlriscAnnotations.sml
-+    in
-+       structure gs_85 = MLRiscAnnotations
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscAnnotations = gs_85
-+       structure MLRiscControl = gs_64
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../frequencies/complete-probs-fn.sml
-+    in
-+       functor gs_86 = CompleteProbsFn
-+    end
-+    local
-+       structure Array = gs_4
-+       signature COMPUTE_EXECUTION_FREQUENCIES = gs_83
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       functor CompleteProbsFn = gs_86
-+       structure Format = gs_51
-+       structure Graph = gs_0
-+       structure Int = gs_12
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       structure Real = gs_82
-+       structure TextIO = gs_2
-+       ../frequencies/compute-freqs-fn.sml
-+    in
-+       functor gs_87 = ComputeFreqsFn
-+    end
-+    local
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-hash.sig
-+    in
-+       signature gs_88 = MLTREE_HASH
-+    end
-+    local
-+       ../aliasing/mlriscRegion.sig
-+    in
-+       signature gs_89 = MLRISC_REGION
-+    end
-+    local
-+       ../instructions/mlriscOptimization.sig
-+    in
-+       signature gs_90 = MLRISC_OPTIMIZATION
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       ../instructions/shuffle.sig
-+    in
-+       signature gs_91 = SHUFFLE
-+    end
-+    local
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       ../ra/arch-spill-instr.sig
-+    in
-+       signature gs_92 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       signature AS_PSEUDO_OPS = gs_76
-+       structure Atom = gs_29
-+       structure Format = gs_51
-+       structure Int = gs_12
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure String = gs_7
-+       ../flowgraph/gasPseudoOps.sml
-+    in
-+       functor gs_93 = GasPseudoOps
-+    end
-+    local
-+       structure Array = gs_4
-+       ../ra/ra-bitmatrix.sig
-+    in
-+       signature gs_94 = RA_BITMATRIX
-+    end
-+    local
-+       ../ra/ra-priqueue.sig
-+    in
-+       signature gs_95 = RA_PRIORITY_QUEUE
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_96 = Unsafe
-+    end
-+    local
-+       structure Array = gs_4
-+       signature RA_BITMATRIX = gs_94
-+       structure Unsafe = gs_96
-+       structure Word = gs_8
-+       ../ra/raBitmatrix.sml
-+    in
-+       structure gs_97 = RaBitmatrix
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       structure Label = gs_27
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure TextIO = gs_2
-+       ../block-placement/jump-chain-elim-fn.sml
-+    in
-+       functor gs_98 = JumpChainElimFn
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       ../flowgraph/cfg-optimization.sig
-+    in
-+       signature gs_99 = CFG_OPTIMIZATION
-+    end
-+    local
-+       signature CFG_OPTIMIZATION = gs_99
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       structure Graph = gs_0
-+       structure List = gs_9
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature SHUFFLE = gs_91
-+       ../flowgraph/cfgExpandCopies.sml
-+    in
-+       functor gs_100 = CFGExpandCopies
-+    end
-+    local
-+       signature INSTRUCTION_STREAM = gs_44
-+       signature MLTREE = gs_28
-+       signature MLTREE_STREAM = gs_48
-+       ../mltree/mltree-stream.sml
-+    in
-+       functor gs_101 = MLTreeStream
-+    end
-+    local
-+       structure Char = gs_68
-+       structure Int = gs_12
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       signature MLTREE_EVAL = gs_70
-+       signature PSEUDO_OPS_ENDIAN = gs_69
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure String = gs_7
-+       structure Word = gs_8
-+       structure Word32 = gs_20
-+       structure Word8 = gs_16
-+       ../flowgraph/pseudo-ops-little.sml
-+    in
-+       functor gs_102 = PseudoOpsLittle
-+    end
-+    local
-+       signature MLTREE = gs_28
-+       signature MLTREE_SIZE = gs_46
-+       ../mltree/mltree-size.sml
-+    in
-+       functor gs_103 = MLTreeSize
-+    end
-+    local
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       structure Int = gs_12
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       signature MLTREEGEN = gs_47
-+       functor MLTreeSize = gs_103
-+       ../mltree/mltree-gen.sml
-+    in
-+       functor gs_104 = MLTreeGen
-+    end
-+    local
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE_BASIS = gs_23
-+       ../mltree/mltree-basis.sml
-+    in
-+       structure gs_105 = MLTreeBasis
-+    end
-+    local
-+       signature CLIENT_PSEUDO_OPS = gs_32
-+       signature PSEUDO_OPS = gs_33
-+       structure PseudoOpsBasisTyp = gs_30
-+       ../flowgraph/pseudo-ops.sml
-+    in
-+       functor gs_106 = PseudoOps
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       ../block-placement/block-placement.sig
-+    in
-+       signature gs_107 = BLOCK_PLACEMENT
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_108 = IntHashTable
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CELLS_BASIS = gs_5
-+       structure IntHashTable = gs_108
-+       signature MONO_HASH_TABLE = gs_3
-+       signature RA_BITMATRIX = gs_94
-+       structure RaBitmatrix = gs_97
-+       ../ra/ra-graph.sig
-+    in
-+       signature gs_109 = RA_GRAPH
-+    end
-+    local
-+       structure Array = gs_4
-+       structure CellsBasis = gs_13
-+       functor HashTableFn = gs_6
-+       structure IntHashTable = gs_108
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature RA_GRAPH = gs_109
-+       structure RaBitmatrix = gs_97
-+       structure Word = gs_8
-+       ../ra/ra-graph.sml
-+    in
-+       structure gs_110 = RAGraph
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure RAGraph = gs_110
-+       signature RA_GRAPH = gs_109
-+       ../ra/ra-spill.sig
-+    in
-+       signature gs_111 = RA_SPILL
-+    end
-+    local
-+       signature INSTRUCTIONS = gs_15
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../instructions/freqProps.sig
-+    in
-+       signature gs_112 = FREQUENCY_PROPERTIES
-+    end
-+    local
-+       signature FREQUENCY_PROPERTIES = gs_112
-+       signature INSN_PROPERTIES = gs_73
-+       structure MLRiscAnnotations = gs_85
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../instructions/freqProps.sml
-+    in
-+       functor gs_113 = FreqProps
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Format = gs_51
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTIONS = gs_15
-+       signature INSTRUCTION_STREAM = gs_44
-+       structure IntHashTable = gs_108
-+       structure Label = gs_27
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscAnnotations = gs_85
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       signature PSEUDO_OPS = gs_33
-+       structure PseudoOpsBasisTyp = gs_30
-+       structure Word = gs_8
-+       ../flowgraph/buildFlowgraph.sml
-+    in
-+       functor gs_114 = BuildFlowgraph
-+       signature gs_115 = CONTROL_FLOWGRAPH_GEN
-+    end
-+    local
-+       structure RAGraph = gs_110
-+       signature RA_GRAPH = gs_109
-+       ../ra/ra-spillheur.sig
-+    in
-+       signature gs_116 = RA_SPILL_HEURISTICS
-+    end
-+    local
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       ../emit/asm-flags.sml
-+    in
-+       structure gs_117 = AsmFlags
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure IntInf = gs_18
-+       ../gc-safety/gc-type.sig
-+    in
-+       signature gs_118 = GC_TYPE
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature GC_TYPE = gs_118
-+       ../gc-safety/gc-cells.sig
-+    in
-+       signature gs_119 = GC_CELLS
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure RAGraph = gs_110
-+       signature RA_GRAPH = gs_109
-+       signature RA_SPILL = gs_111
-+       structure TextIO = gs_2
-+       ../ra/ra-flowgraph.sig
-+    in
-+       signature gs_120 = RA_FLOWGRAPH
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CELLS = gs_14
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure RAGraph = gs_110
-+       signature RA_FLOWGRAPH = gs_120
-+       ../ra/ra.sig
-+    in
-+       signature gs_121 = RA
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_122 = Word8Array
-+    end
-+    local
-+       structure RAGraph = gs_110
-+       signature RA_BITMATRIX = gs_94
-+       signature RA_GRAPH = gs_109
-+       signature RA_PRIORITY_QUEUE = gs_95
-+       structure TextIO = gs_2
-+       ../ra/ra-core.sig
-+    in
-+       signature gs_123 = RA_CORE
-+    end
-+    local
-+       signature RA_PRIORITY_QUEUE = gs_95
-+       ../ra/raPriQueue.sml
-+    in
-+       functor gs_124 = RaPriQueue
-+    end
-+    local
-+       structure Array = gs_4
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       structure List = gs_9
-+       structure ListMergeSort = gs_65
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure RAGraph = gs_110
-+       signature RA_CORE = gs_123
-+       functor RaPriQueue = gs_124
-+       structure Real = gs_82
-+       structure TextIO = gs_2
-+       structure Unsafe = gs_96
-+       structure Word = gs_8
-+       structure Word8 = gs_16
-+       structure Word8Array = gs_122
-+       ../ra/ra-core.sml
-+    in
-+       structure gs_125 = RACore
-+    end
-+    local
-+       structure Array = gs_4
-+       structure CellsBasis = gs_13
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       signature RA = gs_121
-+       structure RACore = gs_125
-+       signature RA_FLOWGRAPH = gs_120
-+       signature RA_SPILL_HEURISTICS = gs_116
-+       structure Real = gs_82
-+       structure TextIO = gs_2
-+       structure Word = gs_8
-+       ../ra/ra.sml
-+    in
-+       functor gs_126 = RegisterAllocator
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       structure IntHashTable = gs_108
-+       structure RACore = gs_125
-+       signature RA_FLOWGRAPH = gs_120
-+       structure Word = gs_8
-+       ../ra/ra-deadCodeE.sml
-+    in
-+       functor gs_127 = RADeadCodeElim
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_128 = URef
-+    end
-+    local
-+       structure Array = gs_4
-+       signature DOMINATOR_TREE = gs_38
-+       signature GRAPH_IMPLEMENTATION = gs_37
-+       structure Graph = gs_0
-+       signature LOOP_STRUCTURE = gs_39
-+       structure List = gs_9
-+       structure URef = gs_128
-+       ../ir-archive/loop-structure.sml
-+    in
-+       functor gs_129 = LoopStructure
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Label = gs_27
-+       structure List = gs_9
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature SDI_JUMPS = gs_74
-+       ../backpatch/backpatch.sml
-+    in
-+       functor gs_130 = BBSched2
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       structure List = gs_9
-+       structure ListMergeSort = gs_65
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure RACore = gs_125
-+       structure RAGraph = gs_110
-+       signature RA_FLOWGRAPH = gs_120
-+       signature RA_SPILL = gs_111
-+       structure TextIO = gs_2
-+       structure Unsafe = gs_96
-+       structure Word = gs_8
-+       ../ra/cluster-ra.sml
-+    in
-+       functor gs_131 = ClusterRA
-+    end
-+    local
-+       structure RACore = gs_125
-+       structure RAGraph = gs_110
-+       signature RA_SPILL_HEURISTICS = gs_116
-+       ../ra/chaitin-spillheur.sml
-+    in
-+       structure gs_132 = ChaitinSpillHeur
-+    end
-+    local
-+       open l19
-+    in
-+       functor gs_133 = LeftPriorityQFn
-+    end
-+    local
-+       signature BLOCK_PLACEMENT = gs_107
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       functor LeftPriorityQFn = gs_133
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       structure Real = gs_82
-+       structure TextIO = gs_2
-+       structure URef = gs_128
-+       ../block-placement/weighted-block-placement-fn.sml
-+    in
-+       functor gs_134 = WeightedBlockPlacementFn
-+    end
-+    local
-+       structure Array = gs_4
-+       signature BLOCK_PLACEMENT = gs_107
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       structure Int = gs_12
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure TextIO = gs_2
-+       ../block-placement/default-block-placement.sml
-+    in
-+       functor gs_135 = DefaultBlockPlacement
-+    end
-+    local
-+       signature BLOCK_PLACEMENT = gs_107
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       functor DefaultBlockPlacement = gs_135
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       functor WeightedBlockPlacementFn = gs_134
-+       ../block-placement/block-placement.sml
-+    in
-+       functor gs_136 = BlockPlacement
-+    end
-+    local
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       signature MLTREE = gs_28
-+       ../mltree/mltree-mult.sig
-+    in
-+       signature gs_137 = MLTREE_MULT_DIV
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       signature MLTREE_MULT_DIV = gs_137
-+       structure Word = gs_8
-+       ../mltree/mltree-mult.sml
-+    in
-+       functor gs_138 = MLTreeMult
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       structure Char = gs_68
-+       structure Int = gs_12
-+       structure Label = gs_27
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       signature MLTREE = gs_28
-+       signature MLTREE_HASH = gs_88
-+       structure String = gs_7
-+       structure Word = gs_8
-+       ../mltree/mltree-hash.sml
-+    in
-+       functor gs_139 = MLTreeHash
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       structure IntInf = gs_18
-+       structure Label = gs_27
-+       signature MLTREE = gs_28
-+       signature MLTREE_EVAL = gs_70
-+       ../mltree/mltree-eval.sml
-+    in
-+       functor gs_140 = MLTreeEval
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       signature GC_CELLS = gs_119
-+       signature GC_TYPE = gs_118
-+       ../gc-safety/gc-cells.sml
-+    in
-+       functor gs_141 = GCCells
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       structure Int = gs_12
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure TextIO = gs_2
-+       ../block-placement/check-placement-fn.sml
-+    in
-+       functor gs_142 = CheckPlacementFn
-+    end
-+    local
-+       structure Array = gs_4
-+       signature CELLS = gs_14
-+       structure CellsBasis = gs_13
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       ../instructions/cells.sml
-+    in
-+       functor gs_143 = Cells
-+    end
-+    local
-+       signature DELAY_SLOT_PROPERTIES = gs_59
-+       signature INSTRUCTIONS = gs_15
-+       ../backpatch/noDelaySlots.sml
-+    in
-+       functor gs_144 = NoDelaySlots
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CELLS_BASIS = gs_5
-+       structure CellsBasis = gs_13
-+       structure Label = gs_27
-+       structure List = gs_9
-+       structure MLRiscAnnotations = gs_85
-+       ../emit/asmUtil.sml
-+    in
-+       signature gs_145 = ASM_FORMAT_UTIL
-+       structure gs_146 = AsmFormatUtil
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_147 = ListPair
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_148 = Option
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure List = gs_9
-+       structure ListPair = gs_147
-+       structure Option = gs_148
-+       ../instructions/shuffle.sml
-+    in
-+       functor gs_149 = Shuffle
-+    end
-+    local
-+       open l5
-+    in
-+       functor gs_150 = DirectedGraph
-+       structure gs_151 = DirectedGraph
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       functor DirectedGraph = gs_150
-+       structure DirectedGraph = gs_151
-+       functor DominatorTree = gs_43
-+       structure Graph = gs_0
-+       structure List = gs_9
-+       functor LoopStructure = gs_129
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscAnnotations = gs_85
-+       structure MLRiscControl = gs_64
-+       signature PROBABILITY = gs_80
-+       structure Probability = gs_81
-+       ../frequencies/estimate-loop-probs-fn.sml
-+    in
-+       functor gs_152 = EstimateLoopProbsFn
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_153 = StringCvt
-+    end
-+    local
-+       structure Array = gs_4
-+       structure Int32 = gs_17
-+       structure Int64 = gs_19
-+       structure IntInf = gs_18
-+       signature MACHINE_INT = gs_21
-+       structure String = gs_7
-+       structure StringCvt = gs_153
-+       structure Word = gs_8
-+       structure Word32 = gs_20
-+       ../mltree/machine-int.sml
-+    in
-+       structure gs_154 = MachineInt
-+    end
-+    local
-+       structure Array = gs_4
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure RACore = gs_125
-+       structure RAGraph = gs_110
-+       signature RA_FLOWGRAPH = gs_120
-+       structure Real = gs_82
-+       structure Word = gs_8
-+       ../ra/mem-ra.sml
-+    in
-+       functor gs_155 = MemoryRA
-+    end
-+    local
-+       structure Annotations = gs_1
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure RAGraph = gs_110
-+       ../ra/ra-spill-types.sml
-+    in
-+       functor gs_156 = RASpillTypes
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_157 = Word8Vector
-+    end
-+    local
-+       signature INSTRUCTIONS = gs_15
-+       structure Word8Vector = gs_157
-+       ../emit/mc-emit.sig
-+    in
-+       signature gs_158 = MC_EMIT
-+    end
-+    local
-+       signature CODE_STRING = gs_79
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Label = gs_27
-+       structure List = gs_9
-+       signature MC_EMIT = gs_158
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       signature SDI_JUMPS = gs_74
-+       structure Word8 = gs_16
-+       structure Word8Vector = gs_157
-+       ../backpatch/vlBackPatch.sml
-+    in
-+       functor gs_159 = BackPatch
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_160 = PriorityHeap
-+    end
-+    local
-+       structure IntHashTable = gs_108
-+       structure Option = gs_148
-+       structure PriorityHeap = gs_160
-+       structure RACore = gs_125
-+       structure RAGraph = gs_110
-+       signature RA_SPILL_HEURISTICS = gs_116
-+       structure Real = gs_82
-+       ../ra/chow-hennessy-spillheur.sml
-+    in
-+       structure gs_161 = ChowHennessySpillHeur
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_162 = LINE_BREAK
-+       structure gs_163 = LineBreak
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_164 = StringOutStream
-+    end
-+    local
-+       open l5
-+    in
-+       signature gs_165 = UPDATE_GRAPH_INFO
-+       structure gs_166 = UpdateGraphInfo
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_167 = Bool
-+    end
-+    local
-+       signature ASM_STREAM = gs_52
-+       structure Annotations = gs_1
-+       structure Array = gs_4
-+       structure AsmStream = gs_53
-+       structure Bool = gs_167
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       structure Char = gs_68
-+       structure Format = gs_51
-+       signature GRAPH_IMPLEMENTATION = gs_37
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTIONS = gs_15
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       signature LINE_BREAK = gs_162
-+       structure Label = gs_27
-+       structure LineBreak = gs_163
-+       structure List = gs_9
-+       structure ListMergeSort = gs_65
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       structure Real = gs_82
-+       structure String = gs_7
-+       structure StringOutStream = gs_164
-+       structure TextIO = gs_2
-+       signature UPDATE_GRAPH_INFO = gs_165
-+       structure UpdateGraphInfo = gs_166
-+       ../flowgraph/cfg.sml
-+    in
-+       functor gs_168 = ControlFlowGraph
-+    end
-+    local
-+       structure Annotations = gs_1
-+       signature CONSTANT = gs_25
-+       structure CellsBasis = gs_13
-+       structure Int32 = gs_17
-+       structure Label = gs_27
-+       signature MLTREE = gs_28
-+       signature MLTREE_EXTENSION = gs_22
-+       structure MLTreeBasis = gs_105
-+       structure MachineInt = gs_154
-+       signature REGION = gs_24
-+       ../mltree/mltree.sml
-+    in
-+       functor gs_169 = MLTreeF
-+    end
-+    local
-+       open l13
-+    in
-+       structure gs_170 = General
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       structure General = gs_170
-+       structure Graph = gs_0
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscErrorMsg = gs_11
-+       ../ra/liveness.sml
-+    in
-+       signature gs_171 = LIVENESS
-+       functor gs_172 = Liveness
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       ../instructions/rewrite.sig
-+    in
-+       signature gs_173 = REWRITE_INSTRUCTIONS
-+    end
-+    local
-+       signature ARCH_SPILL_INSTR = gs_92
-+       structure Annotations = gs_1
-+       structure Array = gs_4
-+       signature CFG_OPTIMIZATION = gs_99
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       functor ClusterRA = gs_131
-+       functor GetReg = gs_58
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTIONS = gs_15
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure List = gs_9
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure RAGraph = gs_110
-+       signature RA_SPILL = gs_111
-+       signature RA_SPILL_HEURISTICS = gs_116
-+       signature REWRITE_INSTRUCTIONS = gs_173
-+       functor RegisterAllocator = gs_126
-+       structure Word = gs_8
-+       ../ra/risc-ra.sml
-+    in
-+       functor gs_174 = RISC_RA
-+    end
-+    local
-+       signature CFG_OPTIMIZATION = gs_99
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSN_PROPERTIES = gs_73
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       signature SDI_JUMPS = gs_74
-+       ../flowgraph/cfgCountCopies.sml
-+    in
-+       functor gs_175 = CFGCountCopies
-+    end
-+    local
-+       signature ASSEMBLY_EMITTER = gs_35
-+       structure Annotations = gs_1
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure Graph = gs_0
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure List = gs_9
-+       structure PseudoOpsBasisTyp = gs_30
-+       ../emit/cfgEmit.sml
-+    in
-+       functor gs_176 = CFGEmit
-+    end
-+    local
-+       structure Array = gs_4
-+       signature GETREG = gs_57
-+       ../ra/getreg2.sml
-+    in
-+       functor gs_177 = GetReg2
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_34
-+       structure CellsBasis = gs_13
-+       signature INSTRUCTIONS = gs_15
-+       structure Int32 = gs_17
-+       ../omit-frameptr/omit-frame-pointer.sig
-+    in
-+       signature gs_178 = OMIT_FRAME_POINTER
-+    end
-+    local
-+       signature MLRISC_CONTROL = gs_63
-+       structure MLRiscControl = gs_64
-+       signature RA = gs_121
-+       structure RACore = gs_125
-+       signature RA_FLOWGRAPH_PARTITIONER = gs_78
-+       ../ra/region-based-ra.sml
-+    in
-+       functor gs_179 = RegionBasedRA
-+    end
-+    local
-+       signature MLRISC_REGION = gs_89
-+       structure String = gs_7
-+       ../aliasing/mlriscRegion.sml
-+    in
-+       structure gs_180 = MLRiscRegion
-+    end
-+    local
-+       structure CellsBasis = gs_13
-+       signature INSN_PROPERTIES = gs_73
-+       signature INSTRUCTION_EMITTER = gs_54
-+       structure Int = gs_12
-+       structure IntHashTable = gs_108
-+       signature MLRISC_CONTROL = gs_63
-+       signature MLRISC_ERROR_MSG = gs_10
-+       structure MLRiscControl = gs_64
-+       structure MLRiscErrorMsg = gs_11
-+       structure RACore = gs_125
-+       functor RASpillTypes = gs_156
-+       signature RA_SPILL = gs_111
-+       structure Word = gs_8
-+       ../ra/ra-spill.sml
-+    in
-+       functor gs_181 = RASpill
-+    end
-+ in
-+    signature ARCH_SPILL_INSTR = gs_92
-+    signature ASM_FORMAT_UTIL = gs_145
-+    signature ASM_STREAM = gs_52
-+    signature ASSEMBLY_EMITTER = gs_35
-+    signature AS_PSEUDO_OPS = gs_76
-+    structure AsmFlags = gs_117
-+    structure AsmFormatUtil = gs_146
-+    structure AsmStream = gs_53
-+    signature BBSCHED = gs_72
-+    functor BBSched2 = gs_130
-+    signature BLOCK_PLACEMENT = gs_107
-+    functor BackPatch = gs_159
-+    functor BlockPlacement = gs_136
-+    functor BuildFlowgraph = gs_114
-+    signature CELLS = gs_14
-+    signature CELLS_BASIS = gs_5
-+    functor CFGCountCopies = gs_175
-+    functor CFGEmit = gs_176
-+    functor CFGExpandCopies = gs_100
-+    signature CFG_OPTIMIZATION = gs_99
-+    signature CLIENT_PSEUDO_OPS = gs_32
-+    signature CODE_STRING = gs_79
-+    signature COMPUTE_EXECUTION_FREQUENCIES = gs_83
-+    signature CONSTANT = gs_25
-+    signature CONTROL_FLOWGRAPH_GEN = gs_115
-+    signature CONTROL_FLOW_GRAPH = gs_34
-+    structure CTypes = gs_60
-+    signature C_CALLS = gs_61
-+    functor Cells = gs_143
-+    structure CellsBasis = gs_13
-+    structure ChaitinSpillHeur = gs_132
-+    functor CheckPlacementFn = gs_142
-+    structure ChowHennessySpillHeur = gs_161
-+    functor ClusterRA = gs_131
-+    functor CompleteProbsFn = gs_86
-+    functor ComputeFreqsFn = gs_87
-+    functor ControlFlowGraph = gs_168
-+    signature DELAY_SLOT_PROPERTIES = gs_59
-+    signature DOMINATOR_TREE = gs_38
-+    functor DarwinPseudoOps = gs_77
-+    functor DefaultBlockPlacement = gs_135
-+    functor DominatorTree = gs_43
-+    functor EstimateLoopProbsFn = gs_152
-+    signature FREQUENCY_PROPERTIES = gs_112
-+    functor FreqProps = gs_113
-+    functor GCCells = gs_141
-+    signature GC_CELLS = gs_119
-+    signature GC_TYPE = gs_118
-+    signature GETREG = gs_57
-+    functor GasPseudoOps = gs_93
-+    functor GetReg = gs_58
-+    functor GetReg2 = gs_177
-+    signature INSN_PROPERTIES = gs_73
-+    signature INSTRUCTIONS = gs_15
-+    signature INSTRUCTION_EMITTER = gs_54
-+    signature INSTRUCTION_STREAM = gs_44
-+    functor InstructionStream = gs_45
-+    functor JumpChainElimFn = gs_98
-+    signature LABEL = gs_26
-+    signature LIVENESS = gs_171
-+    signature LOOP_STRUCTURE = gs_39
-+    structure Label = gs_27
-+    functor Liveness = gs_172
-+    functor LoopStructure = gs_129
-+    signature MACHINE_INT = gs_21
-+    signature MC_EMIT = gs_158
-+    signature MLRISC_ANNOTATIONS = gs_84
-+    signature MLRISC_OPTIMIZATION = gs_90
-+    signature MLRISC_REGION = gs_89
-+    structure MLRiscAnnotations = gs_85
-+    structure MLRiscRegion = gs_180
-+    signature MLTREE = gs_28
-+    signature MLTREECOMP = gs_49
-+    signature MLTREEGEN = gs_47
-+    signature MLTREE_BASIS = gs_23
-+    signature MLTREE_EVAL = gs_70
-+    signature MLTREE_EXTENSION = gs_22
-+    signature MLTREE_EXTENSION_COMP = gs_50
-+    signature MLTREE_HASH = gs_88
-+    signature MLTREE_MULT_DIV = gs_137
-+    signature MLTREE_SIZE = gs_46
-+    signature MLTREE_STREAM = gs_48
-+    structure MLTreeBasis = gs_105
-+    functor MLTreeCheckTy = gs_36
-+    functor MLTreeEval = gs_140
-+    functor MLTreeF = gs_169
-+    functor MLTreeGen = gs_104
-+    functor MLTreeHash = gs_139
-+    functor MLTreeMult = gs_138
-+    functor MLTreeSize = gs_103
-+    functor MLTreeStream = gs_101
-+    structure MachineInt = gs_154
-+    functor MemoryRA = gs_155
-+    functor NoDelaySlots = gs_144
-+    signature OMIT_FRAME_POINTER = gs_178
-+    signature POINTS_TO = gs_66
-+    signature PRINT_FLOWGRAPH = gs_55
-+    signature PSEUDO_OPS = gs_33
-+    signature PSEUDO_OPS_BASIS = gs_31
-+    signature PSEUDO_OPS_ENDIAN = gs_69
-+    structure PointsTo = gs_67
-+    functor PrintFlowgraph = gs_56
-+    functor PseudoOps = gs_106
-+    structure PseudoOpsBasisTyp = gs_30
-+    functor PseudoOpsBig = gs_71
-+    functor PseudoOpsLittle = gs_102
-+    signature RA = gs_121
-+    structure RACore = gs_125
-+    functor RADeadCodeElim = gs_127
-+    structure RAGraph = gs_110
-+    functor RASpill = gs_181
-+    functor RASpillTypes = gs_156
-+    signature RA_BITMATRIX = gs_94
-+    signature RA_CORE = gs_123
-+    signature RA_FLOWGRAPH = gs_120
-+    signature RA_FLOWGRAPH_PARTITIONER = gs_78
-+    signature RA_GRAPH = gs_109
-+    signature RA_PRIORITY_QUEUE = gs_95
-+    signature RA_SPILL = gs_111
-+    signature RA_SPILL_HEURISTICS = gs_116
-+    signature REGION = gs_24
-+    signature REWRITE_INSTRUCTIONS = gs_173
-+    functor RISC_RA = gs_174
-+    structure RaBitmatrix = gs_97
-+    functor RaPriQueue = gs_124
-+    functor RegionBasedRA = gs_179
-+    functor RegisterAllocator = gs_126
-+    signature SDI_JUMPS = gs_74
-+    signature SHUFFLE = gs_91
-+    functor Shuffle = gs_149
-+    functor SpanDependencyResolution = gs_75
-+    functor UnimplementedCCallsFn = gs_62
-+    functor WeightedBlockPlacementFn = gs_134
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/MLTREE.mlb MLRISC-mlton/mlb/MLTREE.mlb
-*** MLRISC/mlb/MLTREE.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/MLTREE.mlb	2010-04-02 16:08:59.000000000 -0400
-***************
-*** 0 ****
---- 1,209 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l18 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l41 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l67 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = MLTREE
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       ../mltree/mltree-rewrite.sig
-+    in
-+       signature gs_1 = MLTREE_REWRITE
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       signature MLTREE_REWRITE = gs_1
-+       ../mltree/mltree-rewrite.sml
-+    in
-+       functor gs_2 = MLTreeRewrite
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       ../mltree/mltree-fold.sig
-+    in
-+       signature gs_3 = MLTREE_FOLD
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_4 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_5 = CellsBasis
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_6 = IntInf
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = Label
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_8 = String
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_9 = List
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_10 = Char
-+    end
-+    local
-+       open l41
-+    in
-+       signature gs_11 = MLRISC_ERROR_MSG
-+       structure gs_12 = MLRiscErrorMsg
-+    end
-+    local
-+       open l18
-+    in
-+       structure gs_13 = Int
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       ../mltree/mltree-utils.sig
-+    in
-+       signature gs_14 = MLTREE_UTILS
-+    end
-+    local
-+       structure CellsBasis = gs_5
-+       structure Char = gs_10
-+       structure Int = gs_13
-+       structure IntInf = gs_6
-+       structure Label = gs_7
-+       structure List = gs_9
-+       signature MLRISC_ERROR_MSG = gs_11
-+       structure MLRiscErrorMsg = gs_12
-+       signature MLTREE = gs_0
-+       signature MLTREE_UTILS = gs_14
-+       structure String = gs_8
-+       structure Word = gs_4
-+       ../mltree/mltree-utils.sml
-+    in
-+       functor gs_15 = MLTreeUtils
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_16 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_17 = INSTRUCTION_STREAM
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_18 = INSTRUCTIONS
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_19 = CELLS
-+    end
-+    local
-+       open l67
-+    in
-+       structure gs_20 = Annotations
-+    end
-+    local
-+       structure Annotations = gs_20
-+       signature CELLS = gs_19
-+       signature CONTROL_FLOW_GRAPH = gs_16
-+       signature INSTRUCTIONS = gs_18
-+       signature INSTRUCTION_STREAM = gs_17
-+       ../mltree/instr-gen.sig
-+    in
-+       signature gs_21 = INSTR_GEN
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       signature MLTREE_FOLD = gs_3
-+       ../mltree/mltree-fold.sml
-+    in
-+       functor gs_22 = MLTreeFold
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_16
-+       signature INSTRUCTIONS = gs_18
-+       signature INSTRUCTION_STREAM = gs_17
-+       signature INSTR_GEN = gs_21
-+       signature MLRISC_ERROR_MSG = gs_11
-+       structure MLRiscErrorMsg = gs_12
-+       ../mltree/instr-gen.sml
-+    in
-+       functor gs_23 = InstrGen
-+    end
-+    local
-+       signature MLTREE = gs_0
-+       ../mltree/mltree-simplify.sig
-+    in
-+       signature gs_24 = MLTREE_SIMPLIFIER
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_25 = MLTREE_SIZE
-+    end
-+    local
-+       structure IntInf = gs_6
-+       signature MLTREE = gs_0
-+       signature MLTREE_SIMPLIFIER = gs_24
-+       signature MLTREE_SIZE = gs_25
-+       functor MLTreeRewrite = gs_2
-+       ../mltree/mltree-simplify.sml
-+    in
-+       functor gs_26 = MLTreeSimplifier
-+    end
-+ in
-+    signature INSTR_GEN = gs_21
-+    functor InstrGen = gs_23
-+    signature MLTREE_FOLD = gs_3
-+    signature MLTREE_REWRITE = gs_1
-+    signature MLTREE_SIMPLIFIER = gs_24
-+    signature MLTREE_UTILS = gs_14
-+    functor MLTreeFold = gs_22
-+    functor MLTreeRewrite = gs_2
-+    functor MLTreeSimplifier = gs_26
-+    functor MLTreeUtils = gs_15
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/PPC.mlb MLRISC-mlton/mlb/PPC.mlb
-*** MLRISC/mlb/PPC.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/PPC.mlb	2010-04-02 16:09:00.000000000 -0400
-***************
-*** 0 ****
---- 1,573 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l42 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l116 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l50 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l9 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = FREQUENCY_PROPERTIES
-+    end
-+    local
-+       open l9
-+    in
-+       signature gs_1 = PROBABILITY
-+       structure gs_2 = Probability
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = MLRiscAnnotations
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = REGION
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_5 = CONSTANT
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_6 = MLTREE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_7 = CELLS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_8 = CellsBasis
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_9 = Label
-+    end
-+    local
-+       open l9
-+    in
-+       structure gs_10 = Annotations
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_11 = Cells
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_12 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_13 = CELLS
-+    end
-+    local
-+       open l50
-+    in
-+       signature gs_14 = MLRISC_ERROR_MSG
-+       structure gs_15 = MLRiscErrorMsg
-+    end
-+    local
-+       open l50
-+    in
-+       signature gs_16 = MLRISC_CONTROL
-+       structure gs_17 = MLRiscControl
-+    end
-+    local
-+       signature MLRISC_CONTROL = gs_16
-+       structure MLRiscControl = gs_17
-+       ../ppc/emit/ppcAsmSyntax.sml
-+    in
-+       structure gs_18 = PPCAsmSyntax
-+    end
-+    local
-+       signature CELLS = gs_13
-+       functor Cells = gs_11
-+       structure CellsBasis = gs_8
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       structure PPCAsmSyntax = gs_18
-+       ../ppc/instructions/ppcCells.sml
-+    in
-+       signature gs_19 = PPCCELLS
-+       structure gs_20 = PPCCells
-+    end
-+    local
-+       structure Annotations = gs_10
-+       signature CELLS_BASIS = gs_7
-+       signature CONSTANT = gs_5
-+       structure CellsBasis = gs_8
-+       structure Label = gs_9
-+       signature MLTREE = gs_6
-+       signature PPCCELLS = gs_19
-+       structure PPCCells = gs_20
-+       signature REGION = gs_4
-+       ../ppc/instructions/ppcInstr.sml
-+    in
-+       signature gs_21 = PPCINSTR
-+       functor gs_22 = PPCInstr
-+    end
-+    local
-+       signature FREQUENCY_PROPERTIES = gs_0
-+       structure MLRiscAnnotations = gs_3
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       signature PROBABILITY = gs_1
-+       structure Probability = gs_2
-+       ../ppc/instructions/ppcFreqProps.sml
-+    in
-+       functor gs_23 = PPCFreqProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_24 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_25 = ASM_FORMAT_UTIL
-+       structure gs_26 = AsmFormatUtil
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_27 = ASM_STREAM
-+       structure gs_28 = AsmStream
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_29 = TextIO
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_30 = String
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_31 = AsmFlags
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_32 = MLTREE_EVAL
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_33 = INSTRUCTION_STREAM
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       ../ppc/instructions/ppcShuffle.sig
-+    in
-+       signature gs_34 = PPCSHUFFLE
-+    end
-+    local
-+       signature ASM_FORMAT_UTIL = gs_25
-+       signature ASM_STREAM = gs_27
-+       structure Annotations = gs_10
-+       structure AsmFlags = gs_31
-+       structure AsmFormatUtil = gs_26
-+       structure AsmStream = gs_28
-+       structure CellsBasis = gs_8
-+       signature INSTRUCTION_EMITTER = gs_24
-+       signature INSTRUCTION_STREAM = gs_33
-+       structure Int = gs_12
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_32
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       signature PPCSHUFFLE = gs_34
-+       structure String = gs_30
-+       structure TextIO = gs_29
-+       ../ppc/emit/ppcAsm.sml
-+    in
-+       functor gs_35 = PPCAsmEmitter
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       ../ppc/mltree/ppcPseudoInstr.sig
-+    in
-+       signature gs_36 = PPC_PSEUDO_INSTR
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_37 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_38 = PseudoOpsBig
-+    end
-+    local
-+       open l116
-+    in
-+       structure gs_39 = Format
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_40 = PseudoOpsBasisTyp
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_41 = IntInf
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_42 = Word32
-+    end
-+    local
-+       open l116
-+    in
-+       structure gs_43 = Atom
-+    end
-+    local
-+       structure Atom = gs_43
-+       structure Format = gs_39
-+       structure Int = gs_12
-+       structure IntInf = gs_41
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE = gs_6
-+       signature MLTREE_EVAL = gs_32
-+       signature PSEUDO_OPS_BASIS = gs_37
-+       structure PseudoOpsBasisTyp = gs_40
-+       functor PseudoOpsBig = gs_38
-+       structure String = gs_30
-+       structure Word32 = gs_42
-+       ../ppc/flowgraph/ppcDarwinPseudoOps.sml
-+    in
-+       functor gs_44 = PPCDarwinPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_45 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       ../ppc/ra/ppcRewrite.sml
-+    in
-+       functor gs_46 = PPCRewrite
-+    end
-+    local
-+       signature ARCH_SPILL_INSTR = gs_45
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       functor PPCRewrite = gs_46
-+       ../ppc/ra/ppcSpillInstr.sml
-+    in
-+       functor gs_47 = PPCSpillInstr
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_48 = GasPseudoOps
-+    end
-+    local
-+       structure Format = gs_39
-+       functor GasPseudoOps = gs_48
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE = gs_6
-+       signature MLTREE_EVAL = gs_32
-+       signature PSEUDO_OPS_BASIS = gs_37
-+       structure PseudoOpsBasisTyp = gs_40
-+       functor PseudoOpsBig = gs_38
-+       structure Word32 = gs_42
-+       ../ppc/flowgraph/ppcGasPseudoOps.sml
-+    in
-+       functor gs_49 = PPCGasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_50 = INSN_PROPERTIES
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_51 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_52 = MLTREE_HASH
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature INSN_PROPERTIES = gs_50
-+       structure IntInf = gs_41
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_32
-+       signature MLTREE_HASH = gs_52
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       structure Word = gs_51
-+       ../ppc/instructions/ppcProps.sml
-+    in
-+       functor gs_53 = PPCProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_54 = SDI_JUMPS
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature MLRISC_CONTROL = gs_16
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscControl = gs_17
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_32
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       signature PPCSHUFFLE = gs_34
-+       signature SDI_JUMPS = gs_54
-+       structure Word = gs_51
-+       ../ppc/backpatch/ppcJumps.sml
-+    in
-+       functor gs_55 = PPCJumps
-+    end
-+    local
-+       ../ppc/instructions/ppcInstrExt.sml
-+    in
-+       structure gs_56 = PPCInstrExt
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_57 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_58 = MLTREE_STREAM
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_57
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_STREAM = gs_58
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       structure PPCInstrExt = gs_56
-+       ../ppc/instructions/ppcCompInstrExt.sml
-+    in
-+       signature gs_59 = PPCCOMP_INSTR_EXT
-+       functor gs_60 = PPCCompInstrExt
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_61 = DELAY_SLOT_PROPERTIES
-+    end
-+    local
-+       signature DELAY_SLOT_PROPERTIES = gs_61
-+       signature INSN_PROPERTIES = gs_50
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       ../ppc/backpatch/ppcDelaySlots.sml
-+    in
-+       functor gs_62 = PPCDelaySlots
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_63 = CTypes
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_64 = List
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_65 = C_CALLS
-+    end
-+    local
-+       structure CTypes = gs_63
-+       signature C_CALLS = gs_65
-+       structure Int = gs_12
-+       structure IntInf = gs_41
-+       structure List = gs_64
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscAnnotations = gs_3
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE = gs_6
-+       signature PPCCELLS = gs_19
-+       structure PPCCells = gs_20
-+       structure String = gs_30
-+       structure Word = gs_51
-+       ../ppc/c-calls/ppc-macosx.sml
-+    in
-+       functor gs_66 = PPCMacOSX_CCalls
-+       signature gs_67 = PPC_MACOSX_C_CALLS
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_68 = Shuffle
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       functor Shuffle = gs_68
-+       ../ppc/instructions/ppcShuffle.sml
-+    in
-+       functor gs_69 = PPCShuffle
-+    end
-+    local
-+       open l42
-+    in
-+       structure gs_70 = Word8
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_71 = CODE_STRING
-+    end
-+    local
-+       signature CODE_STRING = gs_71
-+       structure CellsBasis = gs_8
-+       signature INSTRUCTION_EMITTER = gs_24
-+       signature INSTRUCTION_STREAM = gs_33
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREE_EVAL = gs_32
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       structure Word32 = gs_42
-+       structure Word8 = gs_70
-+       ../ppc/emit/ppcMC.sml
-+    in
-+       functor gs_72 = PPCMCEmitter
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_73 = MLTreeMult
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_74 = MLTreeGen
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_75 = MLTREECOMP
-+       signature gs_76 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       structure CellsBasis = gs_8
-+       structure Int = gs_12
-+       structure Label = gs_9
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscAnnotations = gs_3
-+       structure MLRiscErrorMsg = gs_15
-+       signature MLTREECOMP = gs_75
-+       signature MLTREE_EXTENSION_COMP = gs_76
-+       functor MLTreeGen = gs_74
-+       functor MLTreeMult = gs_73
-+       signature PPCINSTR = gs_21
-+       functor PPCInstr = gs_22
-+       signature PPC_PSEUDO_INSTR = gs_36
-+       structure Word32 = gs_42
-+       ../ppc/mltree/ppc.sml
-+    in
-+       functor gs_77 = PPC
-+    end
-+ in
-+    functor PPC = gs_77
-+    functor PPCAsmEmitter = gs_35
-+    structure PPCAsmSyntax = gs_18
-+    signature PPCCELLS = gs_19
-+    signature PPCCOMP_INSTR_EXT = gs_59
-+    structure PPCCells = gs_20
-+    functor PPCCompInstrExt = gs_60
-+    functor PPCDarwinPseudoOps = gs_44
-+    functor PPCDelaySlots = gs_62
-+    functor PPCFreqProps = gs_23
-+    functor PPCGasPseudoOps = gs_49
-+    signature PPCINSTR = gs_21
-+    functor PPCInstr = gs_22
-+    structure PPCInstrExt = gs_56
-+    functor PPCJumps = gs_55
-+    functor PPCMCEmitter = gs_72
-+    functor PPCMacOSX_CCalls = gs_66
-+    functor PPCProps = gs_53
-+    functor PPCRewrite = gs_46
-+    signature PPCSHUFFLE = gs_34
-+    functor PPCShuffle = gs_69
-+    functor PPCSpillInstr = gs_47
-+    signature PPC_PSEUDO_INSTR = gs_36
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/Peephole.mlb MLRISC-mlton/mlb/Peephole.mlb
-*** MLRISC/mlb/Peephole.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/Peephole.mlb	2010-04-02 16:09:00.000000000 -0400
-***************
-*** 0 ****
---- 1,61 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l14 = 
-+     bas
-+       (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = INSTRUCTIONS
-+    end
-+    local
-+       signature INSTRUCTIONS = gs_0
-+       ../instructions/peephole.sig
-+    in
-+       signature gs_1 = PEEPHOLE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_2 = CFG_OPTIMIZATION
-+    end
-+    local
-+       open l14
-+    in
-+       structure gs_3 = Graph
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       signature CFG_OPTIMIZATION = gs_2
-+       signature CONTROL_FLOW_GRAPH = gs_4
-+       structure Graph = gs_3
-+       signature PEEPHOLE = gs_1
-+       ../flowgraph/cfgPeephole.sml
-+    in
-+       functor gs_5 = CFGPeephole
-+    end
-+ in
-+    functor CFGPeephole = gs_5
-+    signature PEEPHOLE = gs_1
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/RA.mlb MLRISC-mlton/mlb/RA.mlb
-*** MLRISC/mlb/RA.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/RA.mlb	2010-04-02 16:09:00.000000000 -0400
-***************
-*** 0 ****
---- 1,152 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l11 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l22 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l53 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l29 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = RA_SPILL_HEURISTICS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_1 = RACore
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_2 = Real
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_3 = RAGraph
-+    end
-+    local
-+       structure RACore = gs_1
-+       structure RAGraph = gs_3
-+       signature RA_SPILL_HEURISTICS = gs_0
-+       structure Real = gs_2
-+       ../ra/chaitin-spillheur2.sml
-+    in
-+       functor gs_4 = ImprovedChaitinSpillHeur
-+    end
-+    local
-+       open l22
-+    in
-+       structure gs_5 = IntHashTable
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_6 = Option
-+    end
-+    local
-+       open l29
-+    in
-+       structure gs_7 = PriorityHeap
-+    end
-+    local
-+       structure IntHashTable = gs_5
-+       structure Option = gs_6
-+       structure PriorityHeap = gs_7
-+       structure RACore = gs_1
-+       structure RAGraph = gs_3
-+       signature RA_SPILL_HEURISTICS = gs_0
-+       structure Real = gs_2
-+       ../ra/chow-hennessy-spillheur2.sml
-+    in
-+       functor gs_8 = ImprovedChowHennessySpillHeur
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_9 = RA_SPILL
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_10 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_11 = RASpillTypes
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_12 = CellsBasis
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_13 = Word
-+    end
-+    local
-+       open l53
-+    in
-+       signature gs_14 = MLRISC_ERROR_MSG
-+       structure gs_15 = MLRiscErrorMsg
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_16 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_17 = INSN_PROPERTIES
-+    end
-+    local
-+       structure CellsBasis = gs_12
-+       signature INSN_PROPERTIES = gs_17
-+       signature INSTRUCTION_EMITTER = gs_16
-+       structure Int = gs_10
-+       structure IntHashTable = gs_5
-+       signature MLRISC_ERROR_MSG = gs_14
-+       structure MLRiscErrorMsg = gs_15
-+       structure RACore = gs_1
-+       functor RASpillTypes = gs_11
-+       signature RA_SPILL = gs_9
-+       structure Word = gs_13
-+       ../ra/ra-spill-with-renaming.sml
-+    in
-+       functor gs_18 = RASpillWithRenaming
-+    end
-+ in
-+    functor ImprovedChaitinSpillHeur = gs_4
-+    functor ImprovedChowHennessySpillHeur = gs_8
-+    functor RASpillWithRenaming = gs_18
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/SPARC.mlb MLRISC-mlton/mlb/SPARC.mlb
-*** MLRISC/mlb/SPARC.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/SPARC.mlb	2010-04-02 16:09:01.000000000 -0400
-***************
-*** 0 ****
---- 1,538 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l38 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l136 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l4 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+   basis l46 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l30 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       signature gs_0 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_1 = MLTREE_STREAM
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_2 = MLTREE
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_3 = REGION
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_4 = CONSTANT
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_5 = CELLS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_6 = CellsBasis
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = Label
-+    end
-+    local
-+       open l30
-+    in
-+       structure gs_8 = Annotations
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_9 = Cells
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_10 = Int
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_11 = CELLS
-+    end
-+    local
-+       open l46
-+    in
-+       signature gs_12 = MLRISC_ERROR_MSG
-+       structure gs_13 = MLRiscErrorMsg
-+    end
-+    local
-+       signature CELLS = gs_11
-+       functor Cells = gs_9
-+       structure CellsBasis = gs_6
-+       structure Int = gs_10
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       ../sparc/instructions/sparcCells.sml
-+    in
-+       signature gs_14 = SPARCCELLS
-+       structure gs_15 = SparcCells
-+    end
-+    local
-+       structure Annotations = gs_8
-+       signature CELLS_BASIS = gs_5
-+       signature CONSTANT = gs_4
-+       structure CellsBasis = gs_6
-+       structure Label = gs_7
-+       signature MLTREE = gs_2
-+       signature REGION = gs_3
-+       signature SPARCCELLS = gs_14
-+       structure SparcCells = gs_15
-+       ../sparc/instructions/sparcInstr.sml
-+    in
-+       signature gs_16 = SPARCINSTR
-+       functor gs_17 = SparcInstr
-+    end
-+    local
-+       ../sparc/instructions/sparcinstr-ext.sml
-+    in
-+       structure gs_18 = SparcInstrExt
-+    end
-+    local
-+       signature CONTROL_FLOW_GRAPH = gs_0
-+       signature MLTREE = gs_2
-+       signature MLTREE_STREAM = gs_1
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       structure SparcInstrExt = gs_18
-+       ../sparc/instructions/sparccomp-instr-ext.sml
-+    in
-+       signature gs_19 = SPARCCOMP_INSTR_EXT
-+       functor gs_20 = SparcCompInstrExt
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_21 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_22 = Word8
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_23 = Word32
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_24 = CODE_STRING
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_25 = INSTRUCTION_STREAM
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_26 = MLTREE_EVAL
-+    end
-+    local
-+       signature CODE_STRING = gs_24
-+       structure CellsBasis = gs_6
-+       signature INSTRUCTION_EMITTER = gs_21
-+       signature INSTRUCTION_STREAM = gs_25
-+       structure Label = gs_7
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_26
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       structure Word32 = gs_23
-+       structure Word8 = gs_22
-+       ../sparc/emit/sparcMC.sml
-+    in
-+       functor gs_27 = SparcMCEmitter
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_28 = Shuffle
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_29 = Option
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       ../sparc/instructions/sparcShuffle.sig
-+    in
-+       signature gs_30 = SPARCSHUFFLE
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       structure Option = gs_29
-+       signature SPARCINSTR = gs_16
-+       signature SPARCSHUFFLE = gs_30
-+       functor Shuffle = gs_28
-+       functor SparcInstr = gs_17
-+       structure Word32 = gs_23
-+       ../sparc/instructions/sparcShuffle.sml
-+    in
-+       functor gs_31 = SparcShuffle
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_32 = DELAY_SLOT_PROPERTIES
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_33 = INSN_PROPERTIES
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature DELAY_SLOT_PROPERTIES = gs_32
-+       signature INSN_PROPERTIES = gs_33
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       structure Option = gs_29
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       ../sparc/backpatch/sparcDelaySlotProps.sml
-+    in
-+       functor gs_34 = SparcDelaySlots
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_35 = FREQUENCY_PROPERTIES
-+    end
-+    local
-+       open l30
-+    in
-+       signature gs_36 = PROBABILITY
-+       structure gs_37 = Probability
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_38 = MLRiscAnnotations
-+    end
-+    local
-+       signature FREQUENCY_PROPERTIES = gs_35
-+       structure MLRiscAnnotations = gs_38
-+       signature PROBABILITY = gs_36
-+       structure Probability = gs_37
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       ../sparc/instructions/sparcFreqProps.sml
-+    in
-+       functor gs_39 = SparcFreqProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_40 = PSEUDO_OPS_BASIS
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_41 = GasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_42 = PseudoOpsBig
-+    end
-+    local
-+       open l136
-+    in
-+       structure gs_43 = Format
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_44 = PseudoOpsBasisTyp
-+    end
-+    local
-+       structure Format = gs_43
-+       functor GasPseudoOps = gs_41
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE = gs_2
-+       signature MLTREE_EVAL = gs_26
-+       signature PSEUDO_OPS_BASIS = gs_40
-+       structure PseudoOpsBasisTyp = gs_44
-+       functor PseudoOpsBig = gs_42
-+       structure Word32 = gs_23
-+       ../sparc/flowgraph/sparcGasPseudoOps.sml
-+    in
-+       functor gs_45 = SparcGasPseudoOps
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_46 = MLTreeMult
-+    end
-+    local
-+       open l4
-+    in
-+       functor gs_47 = MLTreeGen
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_48 = MLTREECOMP
-+       signature gs_49 = MLTREE_EXTENSION_COMP
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       ../sparc/mltree/sparcPseudoInstr.sig
-+    in
-+       signature gs_50 = SPARC_PSEUDO_INSTR
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscAnnotations = gs_38
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREECOMP = gs_48
-+       signature MLTREE_EXTENSION_COMP = gs_49
-+       functor MLTreeGen = gs_47
-+       functor MLTreeMult = gs_46
-+       signature SPARCINSTR = gs_16
-+       signature SPARC_PSEUDO_INSTR = gs_50
-+       functor SparcInstr = gs_17
-+       structure Word32 = gs_23
-+       ../sparc/mltree/sparc.sml
-+    in
-+       functor gs_51 = Sparc
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_52 = IntInf
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_53 = Word
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_54 = MLTREE_HASH
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature INSN_PROPERTIES = gs_33
-+       structure IntInf = gs_52
-+       structure Label = gs_7
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_26
-+       signature MLTREE_HASH = gs_54
-+       structure Option = gs_29
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       structure Word = gs_53
-+       ../sparc/instructions/sparcProps.sml
-+    in
-+       functor gs_55 = SparcProps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_56 = SDI_JUMPS
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_26
-+       signature SDI_JUMPS = gs_56
-+       signature SPARCINSTR = gs_16
-+       signature SPARCSHUFFLE = gs_30
-+       functor SparcInstr = gs_17
-+       structure Word32 = gs_23
-+       ../sparc/backpatch/sparcJumps.sml
-+    in
-+       functor gs_57 = SparcJumps
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_58 = C_CALLS
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_59 = CTypes
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_60 = String
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_61 = List
-+    end
-+    local
-+       structure CTypes = gs_59
-+       signature C_CALLS = gs_58
-+       structure Int = gs_10
-+       structure List = gs_61
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscAnnotations = gs_38
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE = gs_2
-+       signature SPARCCELLS = gs_14
-+       structure SparcCells = gs_15
-+       structure SparcInstrExt = gs_18
-+       structure String = gs_60
-+       ../sparc/c-calls/sparc-c-calls.sml
-+    in
-+       functor gs_62 = Sparc_CCalls
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_63 = ASM_FORMAT_UTIL
-+       structure gs_64 = AsmFormatUtil
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_65 = ASM_STREAM
-+       structure gs_66 = AsmStream
-+    end
-+    local
-+       open l38
-+    in
-+       structure gs_67 = TextIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_68 = AsmFlags
-+    end
-+    local
-+       signature ASM_FORMAT_UTIL = gs_63
-+       signature ASM_STREAM = gs_65
-+       structure Annotations = gs_8
-+       structure AsmFlags = gs_68
-+       structure AsmFormatUtil = gs_64
-+       structure AsmStream = gs_66
-+       structure CellsBasis = gs_6
-+       signature INSTRUCTION_EMITTER = gs_21
-+       signature INSTRUCTION_STREAM = gs_25
-+       structure Int = gs_10
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature MLTREE_EVAL = gs_26
-+       signature SPARCINSTR = gs_16
-+       signature SPARCSHUFFLE = gs_30
-+       functor SparcInstr = gs_17
-+       structure String = gs_60
-+       structure TextIO = gs_67
-+       structure Word32 = gs_23
-+       ../sparc/emit/sparcAsm.sml
-+    in
-+       functor gs_69 = SparcAsmEmitter
-+    end
-+    local
-+       structure CellsBasis = gs_6
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       ../sparc/ra/sparcRewrite.sml
-+    in
-+       functor gs_70 = SparcRewrite
-+    end
-+    local
-+       open l4
-+    in
-+       signature gs_71 = ARCH_SPILL_INSTR
-+    end
-+    local
-+       signature ARCH_SPILL_INSTR = gs_71
-+       structure CellsBasis = gs_6
-+       signature MLRISC_ERROR_MSG = gs_12
-+       structure MLRiscErrorMsg = gs_13
-+       signature SPARCINSTR = gs_16
-+       functor SparcInstr = gs_17
-+       functor SparcRewrite = gs_70
-+       ../sparc/ra/sparcSpillInstr.sml
-+    in
-+       functor gs_72 = SparcSpillInstr
-+    end
-+ in
-+    signature SPARCCELLS = gs_14
-+    signature SPARCCOMP_INSTR_EXT = gs_19
-+    signature SPARCINSTR = gs_16
-+    signature SPARCSHUFFLE = gs_30
-+    signature SPARC_PSEUDO_INSTR = gs_50
-+    functor Sparc = gs_51
-+    functor SparcAsmEmitter = gs_69
-+    structure SparcCells = gs_15
-+    functor SparcCompInstrExt = gs_20
-+    functor SparcDelaySlots = gs_34
-+    functor SparcFreqProps = gs_39
-+    functor SparcGasPseudoOps = gs_45
-+    functor SparcInstr = gs_17
-+    structure SparcInstrExt = gs_18
-+    functor SparcJumps = gs_57
-+    functor SparcMCEmitter = gs_27
-+    functor SparcProps = gs_55
-+    functor SparcRewrite = gs_70
-+    functor SparcShuffle = gs_31
-+    functor SparcSpillInstr = gs_72
-+    functor Sparc_CCalls = gs_62
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/StagedAlloc.mlb MLRISC-mlton/mlb/StagedAlloc.mlb
-*** MLRISC/mlb/StagedAlloc.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/StagedAlloc.mlb	2010-04-02 16:09:01.000000000 -0400
-***************
-*** 0 ****
---- 1,91 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l11 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l28 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       ../staged-alloc/conventions/c-loc-kind.sml
-+    in
-+       structure gs_0 = CLocKind
-+    end
-+    local
-+       ../staged-alloc/allocator/staged-allocation-sig.sml
-+    in
-+       signature gs_1 = STAGED_ALLOCATION
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_2 = List
-+    end
-+    local
-+       open l11
-+    in
-+       structure gs_3 = Int
-+    end
-+    local
-+       structure CLocKind = gs_0
-+       structure Int = gs_3
-+       structure List = gs_2
-+       signature STAGED_ALLOCATION = gs_1
-+       ../staged-alloc/conventions/sparc-c-fn.sml
-+    in
-+       functor gs_4 = SparcCConventionFn
-+    end
-+    local
-+       structure CLocKind = gs_0
-+       structure Int = gs_3
-+       structure List = gs_2
-+       signature STAGED_ALLOCATION = gs_1
-+       ../staged-alloc/conventions/x86-c-fn.sml
-+    in
-+       functor gs_5 = X86CConventionFn
-+    end
-+    local
-+       structure CLocKind = gs_0
-+       structure Int = gs_3
-+       structure List = gs_2
-+       signature STAGED_ALLOCATION = gs_1
-+       ../staged-alloc/conventions/x86-64-c-fn.sml
-+    in
-+       functor gs_6 = X86_64CConventionFn
-+    end
-+    local
-+       open l28
-+    in
-+       structure gs_7 = IntBinaryMap
-+    end
-+    local
-+       structure Int = gs_3
-+       structure IntBinaryMap = gs_7
-+       structure List = gs_2
-+       signature STAGED_ALLOCATION = gs_1
-+       ../staged-alloc/allocator/staged-allocation-fn.sml
-+    in
-+       functor gs_8 = StagedAllocationFn
-+    end
-+ in
-+    structure CLocKind = gs_0
-+    signature STAGED_ALLOCATION = gs_1
-+    functor SparcCConventionFn = gs_4
-+    functor StagedAllocationFn = gs_8
-+    functor X86CConventionFn = gs_5
-+    functor X86_64CConventionFn = gs_6
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlb/Visual.mlb MLRISC-mlton/mlb/Visual.mlb
-*** MLRISC/mlb/Visual.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlb/Visual.mlb	2010-04-02 16:09:01.000000000 -0400
-***************
-*** 0 ****
---- 1,252 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l23 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb $(SML_LIB)/basis/unsafe.mlb
-+     end
-+   basis l5 = 
-+     bas
-+       (* $Control.cm(=(proxyLib.cm):.)/Control.cm =??=> *) Control.mlb
-+     end
-+   basis l19 = 
-+     bas
-+       (* $Lib.cm(=(proxyLib.cm):.)/Lib.cm =??=> *) Lib.mlb
-+     end
-+   basis l12 = 
-+     bas
-+       (* $Graphs.cm(=(proxyLib.cm):.)/Graphs.cm =??=> *) Graphs.mlb
-+     end
-+   basis l66 = 
-+     bas
-+       (* $MLRISC.cm(=(proxyLib.cm):.)/MLRISC.cm =??=> *) MLRISC.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l5
-+    in
-+       signature gs_0 = MLRISC_CONTROL
-+       structure gs_1 = MLRiscControl
-+    end
-+    local
-+       open l12
-+    in
-+       signature gs_2 = ISOMORPHIC_GRAPH_VIEW
-+       structure gs_3 = IsomorphicGraphView
-+    end
-+    local
-+       open l12
-+    in
-+       structure gs_4 = Graph
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_5 = Annotations
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_6 = Int
-+    end
-+    local
-+       structure Annotations = gs_5
-+       structure Graph = gs_4
-+       signature ISOMORPHIC_GRAPH_VIEW = gs_2
-+       structure Int = gs_6
-+       structure IsomorphicGraphView = gs_3
-+       ../visualization/graphLayout.sml
-+    in
-+       structure gs_7 = GraphLayout
-+    end
-+    local
-+       structure GraphLayout = gs_7
-+       ../visualization/graphDisplay.sig
-+    in
-+       signature gs_8 = GRAPH_DISPLAY
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_9 = String
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_10 = List
-+    end
-+    local
-+       signature GRAPH_DISPLAY = gs_8
-+       structure Graph = gs_4
-+       structure GraphLayout = gs_7
-+       structure Int = gs_6
-+       structure List = gs_10
-+       structure String = gs_9
-+       ../visualization/daVinci.sml
-+    in
-+       structure gs_11 = daVinci
-+    end
-+    local
-+       signature GRAPH_DISPLAY = gs_8
-+       structure Graph = gs_4
-+       structure GraphLayout = gs_7
-+       structure Int = gs_6
-+       structure String = gs_9
-+       ../visualization/vcg.sml
-+    in
-+       structure gs_12 = VCG
-+    end
-+    local
-+       signature GRAPH_DISPLAY = gs_8
-+       structure Graph = gs_4
-+       structure GraphLayout = gs_7
-+       structure Int = gs_6
-+       structure String = gs_9
-+       ../visualization/dot.sml
-+    in
-+       structure gs_13 = Dot
-+    end
-+    local
-+       structure Dot = gs_13
-+       signature GRAPH_DISPLAY = gs_8
-+       signature MLRISC_CONTROL = gs_0
-+       structure MLRiscControl = gs_1
-+       structure VCG = gs_12
-+       structure daVinci = gs_11
-+       ../visualization/allDisplays.sml
-+    in
-+       structure gs_14 = AllDisplays
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_15 = TextIO
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_16 = OS
-+    end
-+    local
-+       structure GraphLayout = gs_7
-+       ../visualization/graphViewer.sig
-+    in
-+       signature gs_17 = GRAPH_VIEWER
-+    end
-+    local
-+       signature GRAPH_DISPLAY = gs_8
-+       signature GRAPH_VIEWER = gs_17
-+       structure Graph = gs_4
-+       structure GraphLayout = gs_7
-+       structure Int = gs_6
-+       signature MLRISC_CONTROL = gs_0
-+       structure MLRiscControl = gs_1
-+       structure OS = gs_16
-+       structure TextIO = gs_15
-+       ../visualization/graphViewer.sml
-+    in
-+       functor gs_18 = GraphViewer
-+    end
-+    local
-+       open l66
-+    in
-+       structure gs_19 = Label
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_20 = Array
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_21 = Real
-+    end
-+    local
-+       open l23
-+    in
-+       structure gs_22 = Math
-+    end
-+    local
-+       open l66
-+    in
-+       signature gs_23 = INSTRUCTION_EMITTER
-+    end
-+    local
-+       open l66
-+    in
-+       signature gs_24 = CONTROL_FLOW_GRAPH
-+    end
-+    local
-+       open l19
-+    in
-+       structure gs_25 = StringOutStream
-+    end
-+    local
-+       open l66
-+    in
-+       signature gs_26 = ASM_STREAM
-+       structure gs_27 = AsmStream
-+    end
-+    local
-+       open l66
-+    in
-+       signature gs_28 = INSTRUCTIONS
-+    end
-+    local
-+       signature ASM_STREAM = gs_26
-+       structure Annotations = gs_5
-+       structure AsmStream = gs_27
-+       signature INSTRUCTIONS = gs_28
-+       signature INSTRUCTION_EMITTER = gs_23
-+       structure String = gs_9
-+       structure StringOutStream = gs_25
-+       ../visualization/mlrisc-format-insn.sml
-+    in
-+       signature gs_29 = FORMAT_INSTRUCTION
-+       functor gs_30 = FormatInstruction
-+    end
-+    local
-+       structure Annotations = gs_5
-+       structure Array = gs_20
-+       signature CONTROL_FLOW_GRAPH = gs_24
-+       signature FORMAT_INSTRUCTION = gs_29
-+       functor FormatInstruction = gs_30
-+       signature GRAPH_VIEWER = gs_17
-+       structure Graph = gs_4
-+       structure GraphLayout = gs_7
-+       signature INSTRUCTION_EMITTER = gs_23
-+       structure Int = gs_6
-+       structure Label = gs_19
-+       structure List = gs_10
-+       signature MLRISC_CONTROL = gs_0
-+       structure MLRiscControl = gs_1
-+       structure Math = gs_22
-+       structure Real = gs_21
-+       structure String = gs_9
-+       ../visualization/cfgViewer.sml
-+    in
-+       functor gs_31 = CFGViewer
-+    end
-+ in
-+    structure AllDisplays = gs_14
-+    functor CFGViewer = gs_31
-+    structure Dot = gs_13
-+    functor FormatInstruction = gs_30
-+    signature GRAPH_DISPLAY = gs_8
-+    signature GRAPH_VIEWER = gs_17
-+    structure GraphLayout = gs_7
-+    functor GraphViewer = gs_18
-+    structure VCG = gs_12
-+    structure daVinci = gs_11
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r MLRISC/mlrisc-lib.mlb MLRISC-mlton/mlrisc-lib.mlb
-*** MLRISC/mlrisc-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- MLRISC-mlton/mlrisc-lib.mlb	2010-04-02 16:09:01.000000000 -0400
-***************
-*** 0 ****
---- 1,24 ----
-+ (* DO NOT USE.  Only suitable for type-checking purposes. *)
-+ local
-+ mlb/ALPHA.mlb
-+ mlb/AMD64.mlb
-+ mlb/AMD64-Peephole.mlb
-+ mlb/CCall.mlb
-+ mlb/CCall-sparc.mlb
-+ mlb/CCall-x86-64.mlb
-+ mlb/CCall-x86.mlb
-+ mlb/Control.mlb
-+ mlb/Graphs.mlb
-+ mlb/HPPA.mlb
-+ mlb/IA32.mlb
-+ mlb/IA32-Peephole.mlb
-+ mlb/Lib.mlb
-+ mlb/MLRISC.mlb
-+ mlb/MLTREE.mlb
-+ mlb/Peephole.mlb
-+ mlb/PPC.mlb
-+ mlb/RA.mlb
-+ mlb/SPARC.mlb
-+ mlb/StagedAlloc.mlb
-+ mlb/Visual.mlb
-+ in end
-diff -N -C 2 -r MLRISC/mltree/instr-gen.sig MLRISC-mlton/mltree/instr-gen.sig
-*** MLRISC/mltree/instr-gen.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/instr-gen.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 9,14 ****
-     structure CFG : CONTROL_FLOW_GRAPH 
-  
-!    sharing I.C = C 
-!    sharing CFG.P = S.P
-  
-     (* 
---- 9,35 ----
-     structure CFG : CONTROL_FLOW_GRAPH 
-  
-!    (* sharing I.C = C *)
-!    (* sharing CFG.P = S.P *)
-!    where type P.Client.pseudo_op = S.P.Client.pseudo_op
-!      and type P.T.Basis.cond = S.P.T.Basis.cond
-!      and type P.T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!      and type P.T.Basis.ext = S.P.T.Basis.ext
-!      and type P.T.Basis.fcond = S.P.T.Basis.fcond
-!      and type P.T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!      and type P.T.Constant.const = S.P.T.Constant.const
-!      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!      and type P.T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!      and type P.T.Region.region = S.P.T.Region.region
-!      and type P.T.ccexp = S.P.T.ccexp
-!      and type P.T.fexp = S.P.T.fexp
-!      (* and type P.T.labexp = S.P.T.labexp *)
-!      and type P.T.mlrisc = S.P.T.mlrisc
-!      and type P.T.oper = S.P.T.oper
-!      and type P.T.rep = S.P.T.rep
-!      and type P.T.rexp = S.P.T.rexp
-!      and type P.T.stm = S.P.T.stm
-  
-     (* 
-diff -N -C 2 -r MLRISC/mltree/instr-gen.sml MLRISC-mlton/mltree/instr-gen.sml
-*** MLRISC/mltree/instr-gen.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/instr-gen.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 5,11 ****
-     (structure I      : INSTRUCTIONS
-      structure Stream : INSTRUCTION_STREAM
-!     structure CFG    : CONTROL_FLOW_GRAPH
-!     			where I = I
-! 			  and P = Stream.P
-     ) : INSTR_GEN =
-  struct
---- 5,35 ----
-     (structure I      : INSTRUCTIONS
-      structure Stream : INSTRUCTION_STREAM
-!     structure CFG    : CONTROL_FLOW_GRAPH (* where I = I and P = Stream.P *)
-!                        where type I.addressing_mode = I.addressing_mode
-!                          and type I.ea = I.ea
-!                          and type I.instr = I.instr
-!                          and type I.instruction = I.instruction
-!                          and type I.operand = I.operand
-!                        where type P.Client.pseudo_op = Stream.P.Client.pseudo_op
-!                          and type P.T.Basis.cond = Stream.P.T.Basis.cond
-!                          and type P.T.Basis.div_rounding_mode = Stream.P.T.Basis.div_rounding_mode
-!                          and type P.T.Basis.ext = Stream.P.T.Basis.ext
-!                          and type P.T.Basis.fcond = Stream.P.T.Basis.fcond
-!                          and type P.T.Basis.rounding_mode = Stream.P.T.Basis.rounding_mode
-!                          and type P.T.Constant.const = Stream.P.T.Constant.const
-!                          and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Stream.P.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Stream.P.T.Extension.fx
-!                          and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Stream.P.T.Extension.rx
-!                          and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Stream.P.T.Extension.sx
-!                          and type P.T.I.div_rounding_mode = Stream.P.T.I.div_rounding_mode
-!                          and type P.T.Region.region = Stream.P.T.Region.region
-!                          and type P.T.ccexp = Stream.P.T.ccexp
-!                          and type P.T.fexp = Stream.P.T.fexp
-!                          (* and type P.T.labexp = Stream.P.T.labexp *)
-!                          and type P.T.mlrisc = Stream.P.T.mlrisc
-!                          and type P.T.oper = Stream.P.T.oper
-!                          and type P.T.rep = Stream.P.T.rep
-!                          and type P.T.rexp = Stream.P.T.rexp
-!                          and type P.T.stm = Stream.P.T.stm
-     ) : INSTR_GEN =
-  struct
-diff -N -C 2 -r MLRISC/mltree/mltree-check-ty.sml MLRISC-mlton/mltree/mltree-check-ty.sml
-*** MLRISC/mltree/mltree-check-ty.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-check-ty.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 102,106 ****
-     and checkCCexpB cce = (case cce
-            of T.NOT cce => checkCCexpB cce
-! 	   | ( T.AND (cce1, cce2) | T.OR (cce1, cce2) | T.XOR (cce1, cce2) | T.EQV (cce1, cce2) ) =>
-  	     checkCCexpB cce1 andalso checkCCexpB cce2
-  	   | T.CMP (ty, _, e1, e2) => ty = checkRexp e1 andalso ty = checkRexp e2
---- 102,112 ----
-     and checkCCexpB cce = (case cce
-            of T.NOT cce => checkCCexpB cce
-! 	   | ( T.AND (cce1, cce2) ) =>
-! 	     checkCCexpB cce1 andalso checkCCexpB cce2
-! 	   | ( T.OR (cce1, cce2) ) =>
-! 	     checkCCexpB cce1 andalso checkCCexpB cce2
-! 	   | ( T.XOR (cce1, cce2) ) =>
-! 	     checkCCexpB cce1 andalso checkCCexpB cce2
-! 	   | ( T.EQV (cce1, cce2) ) =>
-  	     checkCCexpB cce1 andalso checkCCexpB cce2
-  	   | T.CMP (ty, _, e1, e2) => ty = checkRexp e1 andalso ty = checkRexp e2
-diff -N -C 2 -r MLRISC/mltree/mltree-gen.sig MLRISC-mlton/mltree/mltree-gen.sig
-*** MLRISC/mltree/mltree-gen.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-gen.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 10,15 ****
-  
-     structure T : MLTREE
-!    structure Size : MLTREE_SIZE
-!    	where T = T
-  
-     val condOf : T.ccexp -> T.Basis.cond
---- 10,34 ----
-  
-     structure T : MLTREE
-!    structure Size : MLTREE_SIZE (* where T = T *)
-!                     where type T.Basis.cond = T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = T.Basis.ext
-!                       and type T.Basis.fcond = T.Basis.fcond
-!                       and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                       and type T.Constant.const = T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                       and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                       and type T.Region.region = T.Region.region
-!                       and type T.ccexp = T.ccexp
-!                       and type T.fexp = T.fexp
-!                       (* and type T.labexp = T.labexp *)
-!                       and type T.mlrisc = T.mlrisc
-!                       and type T.oper = T.oper
-!                       and type T.rep = T.rep
-!                       and type T.rexp = T.rexp
-!                       and type T.stm = T.stm
-  
-     val condOf : T.ccexp -> T.Basis.cond
-diff -N -C 2 -r MLRISC/mltree/mltree-mult.sig MLRISC-mlton/mltree/mltree-mult.sig
-*** MLRISC/mltree/mltree-mult.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-mult.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 9,13 ****
-     structure T : MLTREE
-     structure C : CELLS 
-!    structure I : INSTRUCTIONS where C=C
-  
-     exception TooComplex
---- 9,13 ----
-     structure T : MLTREE
-     structure C : CELLS 
-!    structure I : INSTRUCTIONS (* where C = C *)
-  
-     exception TooComplex
-diff -N -C 2 -r MLRISC/mltree/mltree-mult.sml MLRISC-mlton/mltree/mltree-mult.sml
-*** MLRISC/mltree/mltree-mult.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-mult.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 9,13 ****
-     structure T : MLTREE
-  
-!    structure CB : CELLS_BASIS = CellsBasis
-     val intTy : int (* width of integer type *)
-  
---- 9,22 ----
-     structure T : MLTREE
-  
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     val intTy : int (* width of integer type *)
-  
-***************
-*** 21,26 ****
-     val srli  : argi -> I.instruction list
-     val srai  : argi -> I.instruction list
-!   )
-!   (val trapping : bool (* trap on overflow? *)
-     val multCost : int ref  (* cost of multiplication *)
-  
---- 30,35 ----
-     val srli  : argi -> I.instruction list
-     val srai  : argi -> I.instruction list
-!   
-!    val trapping : bool (* trap on overflow? *)
-     val multCost : int ref  (* cost of multiplication *)
-  
-***************
-*** 38,43 ****
-     val sh2addv  : (arg -> I.instruction list) option (* a*4 + b *)  
-     val sh3addv  : (arg -> I.instruction list) option (* a*8 + b *)
-!   )  
-!   (val signed   : bool (* signed? *)
-    ) : MLTREE_MULT_DIV =
-  struct
---- 47,52 ----
-     val sh2addv  : (arg -> I.instruction list) option (* a*4 + b *)  
-     val sh3addv  : (arg -> I.instruction list) option (* a*8 + b *)
-!     
-!    val signed   : bool (* signed? *)
-    ) : MLTREE_MULT_DIV =
-  struct
-diff -N -C 2 -r MLRISC/mltree/mltree-simplify.in MLRISC-mlton/mltree/mltree-simplify.in
-*** MLRISC/mltree/mltree-simplify.in	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-simplify.in	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 15,20 ****
-  functor MLTreeSimplifier
-    (structure T    : MLTREE
-!    structure Size : MLTREE_SIZE
-!       where T = T
-     (* Extension *)
-     val sext : T.rewriter -> T.sext -> T.sext
---- 15,39 ----
-  functor MLTreeSimplifier
-    (structure T    : MLTREE
-!    structure Size : MLTREE_SIZE (* where T = T *)
-!                     where type T.Basis.cond = T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = T.Basis.ext
-!                       and type T.Basis.fcond = T.Basis.fcond
-!                       and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                       and type T.Constant.const = T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                       and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                       and type T.Region.region = T.Region.region
-!                       and type T.ccexp = T.ccexp
-!                       and type T.fexp = T.fexp
-!                       (* and type T.labexp = T.labexp *)
-!                       and type T.mlrisc = T.mlrisc
-!                       and type T.oper = T.oper
-!                       and type T.rep = T.rep
-!                       and type T.rexp = T.rexp
-!                       and type T.stm = T.stm
-     (* Extension *)
-     val sext : T.rewriter -> T.sext -> T.sext
-diff -N -C 2 -r MLRISC/mltree/mltree-simplify.sml MLRISC-mlton/mltree/mltree-simplify.sml
-*** MLRISC/mltree/mltree-simplify.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-simplify.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 10,14 ****
-  
-  (*#line 17.4 "mltree-simplify.in"*)
-!                          structure Size : MLTREE_SIZE where T=T
-  
-  (*#line 20.4 "mltree-simplify.in"*)
---- 10,34 ----
-  
-  (*#line 17.4 "mltree-simplify.in"*)
-!                          structure Size : MLTREE_SIZE (* where T=T *)
-!                                           where type T.Basis.cond = T.Basis.cond
-!                                             and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                                             and type T.Basis.ext = T.Basis.ext
-!                                             and type T.Basis.fcond = T.Basis.fcond
-!                                             and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                                             and type T.Constant.const = T.Constant.const
-!                                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                                             and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                                             and type T.Region.region = T.Region.region
-!                                             and type T.ccexp = T.ccexp
-!                                             and type T.fexp = T.fexp
-!                                             (* and type T.labexp = T.labexp *)
-!                                             and type T.mlrisc = T.mlrisc
-!                                             and type T.oper = T.oper
-!                                             and type T.rep = T.rep
-!                                             and type T.rexp = T.rexp
-!                                             and type T.stm = T.stm
-  
-  (*#line 20.4 "mltree-simplify.in"*)
-diff -N -C 2 -r MLRISC/mltree/mltree-utils.sml MLRISC-mlton/mltree/mltree-utils.sml
-*** MLRISC/mltree/mltree-utils.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree-utils.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 519,525 ****
-        and oper(T.OPER{name,...}) = name 
-  
-!       and parenRexp
-!             (e as (T.REG _ | T.LI _ | T.$ _ | T.ARG _)) = 
-!               rexp e
-          | parenRexp e = "("^rexp e^")"
-  
---- 519,526 ----
-        and oper(T.OPER{name,...}) = name 
-  
-!       and parenRexp (e as T.REG _) = rexp e
-!         | parenRexp (e as T.LI _) = rexp e
-!         | parenRexp (e as T.$ _) = rexp e
-!         | parenRexp (e as T.ARG _) = rexp e
-          | parenRexp e = "("^rexp e^")"
-  
-diff -N -C 2 -r MLRISC/mltree/mltree.sig MLRISC-mlton/mltree/mltree.sig
-*** MLRISC/mltree/mltree.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 31,34 ****
---- 31,38 ----
-     * it possible for recursive type definitions to work.
-     *)
-+   type controlflow = Label.label list (* control flow info *)
-+   type ctrl   = var                   (* control dependence info *)
-+   type ctrls  = ctrl list
-+ 
-    datatype stm =
-        (* assignment *)
-***************
-*** 71,75 ****
-  
-      | ANNOTATION of stm * an
-!     | EXT of sext  (* extension *)
-  
-        (* synthetic instructions to indicated that the regs are live or
---- 75,79 ----
-  
-      | ANNOTATION of stm * an
-!     | EXT of (stm, rexp, fexp, ccexp) Extension.sx  (* extension *)
-  
-        (* synthetic instructions to indicated that the regs are live or
-***************
-*** 153,157 ****
-      | LET of stm * rexp
-  
-!     | REXT of ty * rext
-  
-      | MARK of rexp * an
---- 157,161 ----
-      | LET of stm * rexp
-  
-!     | REXT of ty * (stm, rexp, fexp, ccexp) Extension.rx
-  
-      | MARK of rexp * an
-***************
-*** 188,192 ****
-      | FPRED of fexp * ctrl
-  
-!     | FEXT of fty * fext
-  
-      | FMARK of fexp * an
---- 192,196 ----
-      | FPRED of fexp * ctrl
-  
-!     | FEXT of fty * (stm, rexp, fexp, ccexp) Extension.fx
-  
-      | FMARK of fexp * an
-***************
-*** 205,209 ****
-      | FCMP   of fty * Basis.fcond * fexp * fexp
-      | CCMARK of ccexp * an
-!     | CCEXT  of ty * ccext
-  
-    and mlrisc =
---- 209,213 ----
-      | FCMP   of fty * Basis.fcond * fexp * fexp
-      | CCMARK of ccexp * an
-!     | CCEXT  of ty * (stm, rexp, fexp, ccexp) Extension.ccx
-  
-    and mlrisc =
-***************
-*** 212,223 ****
-      | FPR of fexp
-  
-!   withtype controlflow = Label.label list (* control flow info *)
-!        and ctrl   = var                   (* control dependence info *)
-!        and ctrls  = ctrl list
-!        and sext   = (stm, rexp, fexp, ccexp) Extension.sx
-!        and rext   = (stm, rexp, fexp, ccexp) Extension.rx
-!        and fext   = (stm, rexp, fexp, ccexp) Extension.fx
-!        and ccext  = (stm, rexp, fexp, ccexp) Extension.ccx
-!        and labexp = rexp
-    (*
-     * Useful type abbreviations for working for MLTree.
---- 216,224 ----
-      | FPR of fexp
-  
-!   type sext   = (stm, rexp, fexp, ccexp) Extension.sx
-!    and rext   = (stm, rexp, fexp, ccexp) Extension.rx
-!    and fext   = (stm, rexp, fexp, ccexp) Extension.fx
-!    and ccext  = (stm, rexp, fexp, ccexp) Extension.ccx
-!    and labexp = rexp
-    (*
-     * Useful type abbreviations for working for MLTree.
-diff -N -C 2 -r MLRISC/mltree/mltree.sml MLRISC-mlton/mltree/mltree.sml
-*** MLRISC/mltree/mltree.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltree.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 33,36 ****
---- 33,40 ----
-     * it possible for recursive type definitions to work.
-     *)
-+   type controlflow = Label.label list (* control flow info *)
-+   type ctrl   = var                   (* control dependence info *)
-+   type ctrls  = ctrl list
-+ 
-    datatype stm =
-        (* assignment *)
-***************
-*** 200,207 ****
-      | FPR of fexp
-  
-!   withtype controlflow = Label.label list (* control flow info *)
-!        and ctrl   = var                   (* control dependence info *)
-!        and ctrls  = ctrl list
-!        and sext   = (stm, rexp, fexp, ccexp) Extension.sx
-         and rext   = (stm, rexp, fexp, ccexp) Extension.rx
-         and fext   = (stm, rexp, fexp, ccexp) Extension.fx
---- 204,208 ----
-      | FPR of fexp
-  
-!   withtype sext   = (stm, rexp, fexp, ccexp) Extension.sx
-         and rext   = (stm, rexp, fexp, ccexp) Extension.rx
-         and fext   = (stm, rexp, fexp, ccexp) Extension.fx
-diff -N -C 2 -r MLRISC/mltree/mltreecomp.sig MLRISC-mlton/mltree/mltreecomp.sig
-*** MLRISC/mltree/mltreecomp.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/mltree/mltreecomp.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 10,18 ****
-  sig
-     structure T : MLTREE
-!    structure TS : MLTREE_STREAM where T = T
-     structure I : INSTRUCTIONS
-!    structure CFG : CONTROL_FLOW_GRAPH
-! 		where I = I
-! 	          and P = TS.S.P
-     (* 
-      * The reducer is given to the client during the compilation of
---- 10,63 ----
-  sig
-     structure T : MLTREE
-!    structure TS : MLTREE_STREAM (* where T = T *)
-!                   where type T.Basis.cond = T.Basis.cond
-!                     and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                     and type T.Basis.ext = T.Basis.ext
-!                     and type T.Basis.fcond = T.Basis.fcond
-!                     and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                     and type T.Constant.const = T.Constant.const
-!                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                     and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                     and type T.Region.region = T.Region.region
-!                     and type T.ccexp = T.ccexp
-!                     and type T.fexp = T.fexp
-!                     (* and type T.labexp = T.labexp *)
-!                     and type T.mlrisc = T.mlrisc
-!                     and type T.oper = T.oper
-!                     and type T.rep = T.rep
-!                     and type T.rexp = T.rexp
-!                     and type T.stm = T.stm
-     structure I : INSTRUCTIONS
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
-!                    where type I.addressing_mode = I.addressing_mode
-!                      and type I.ea = I.ea
-!                      and type I.instr = I.instr
-!                      and type I.instruction = I.instruction
-!                      and type I.operand = I.operand
-!                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                      and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                      and type P.T.Region.region = TS.S.P.T.Region.region
-!                      and type P.T.ccexp = TS.S.P.T.ccexp
-!                      and type P.T.fexp = TS.S.P.T.fexp
-! 	             (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                      and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                      and type P.T.oper = TS.S.P.T.oper
-!                      and type P.T.rep = TS.S.P.T.rep
-!                      and type P.T.rexp = TS.S.P.T.rexp
-!                      and type P.T.stm = TS.S.P.T.stm
-! 
-     (* 
-      * The reducer is given to the client during the compilation of
-***************
-*** 35,43 ****
-     structure TS : MLTREE_STREAM
-     structure I : INSTRUCTIONS 
-!    structure CFG : CONTROL_FLOW_GRAPH 
-!       		where I = I
-! 		  and P = TS.S.P
-!    structure Gen : MLTREEGEN 
-!    		where T = TS.T
-  
-     type instrStream = (I.instruction, I.C.cellset, CFG.cfg) TS.stream  
---- 80,131 ----
-     structure TS : MLTREE_STREAM
-     structure I : INSTRUCTIONS 
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
-!                    where type I.addressing_mode = I.addressing_mode
-!                      and type I.ea = I.ea
-!                      and type I.instr = I.instr
-!                      and type I.instruction = I.instruction
-!                      and type I.operand = I.operand
-!                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                      and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                      and type P.T.Region.region = TS.S.P.T.Region.region
-!                      and type P.T.ccexp = TS.S.P.T.ccexp
-!                      and type P.T.fexp = TS.S.P.T.fexp
-!                      (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                      and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                      and type P.T.oper = TS.S.P.T.oper
-!                      and type P.T.rep = TS.S.P.T.rep
-!                      and type P.T.rexp = TS.S.P.T.rexp
-!                      and type P.T.stm = TS.S.P.T.stm
-!    structure Gen : MLTREEGEN (* where T = TS.T *)
-!                    where type T.Basis.cond = TS.T.Basis.cond
-!                      and type T.Basis.div_rounding_mode = TS.T.Basis.div_rounding_mode
-!                      and type T.Basis.ext = TS.T.Basis.ext
-!                      and type T.Basis.fcond = TS.T.Basis.fcond
-!                      and type T.Basis.rounding_mode = TS.T.Basis.rounding_mode
-!                      and type T.Constant.const = TS.T.Constant.const
-!                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) TS.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) TS.T.Extension.fx
-!                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) TS.T.Extension.rx
-!                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) TS.T.Extension.sx
-!                      and type T.I.div_rounding_mode = TS.T.I.div_rounding_mode
-!                      and type T.Region.region = TS.T.Region.region
-!                      and type T.ccexp = TS.T.ccexp
-!                      and type T.fexp = TS.T.fexp
-!                      (* and type T.labexp = TS.T.labexp *)
-!                      and type T.mlrisc = TS.T.mlrisc
-!                      and type T.oper = TS.T.oper
-!                      and type T.rep = TS.T.rep
-!                      and type T.rexp = TS.T.rexp
-!                      and type T.stm = TS.T.stm
-  
-     type instrStream = (I.instruction, I.C.cellset, CFG.cfg) TS.stream  
-diff -N -C 2 -r MLRISC/omit-frameptr/omit-frame-pointer.sig MLRISC-mlton/omit-frameptr/omit-frame-pointer.sig
-*** MLRISC/omit-frameptr/omit-frame-pointer.sig	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/omit-frameptr/omit-frame-pointer.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 3,7 ****
-  signature OMIT_FRAME_POINTER = sig
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l5
++   in
++      signature gs_0 = MLRISC_CONTROL
++      structure gs_1 = MLRiscControl
++   end
++   local
++      open l12
++   in
++      signature gs_2 = ISOMORPHIC_GRAPH_VIEW
++      structure gs_3 = IsomorphicGraphView
++   end
++   local
++      open l12
++   in
++      structure gs_4 = Graph
++   end
++   local
++      open l19
++   in
++      structure gs_5 = Annotations
++   end
++   local
++      open l23
++   in
++      structure gs_6 = Int
++   end
++   local
++      structure Annotations = gs_5
++      structure Graph = gs_4
++      signature ISOMORPHIC_GRAPH_VIEW = gs_2
++      structure Int = gs_6
++      structure IsomorphicGraphView = gs_3
++      ../visualization/graphLayout.sml
++   in
++      structure gs_7 = GraphLayout
++   end
++   local
++      structure GraphLayout = gs_7
++      ../visualization/graphDisplay.sig
++   in
++      signature gs_8 = GRAPH_DISPLAY
++   end
++   local
++      open l23
++   in
++      structure gs_9 = String
++   end
++   local
++      open l23
++   in
++      structure gs_10 = List
++   end
++   local
++      signature GRAPH_DISPLAY = gs_8
++      structure Graph = gs_4
++      structure GraphLayout = gs_7
++      structure Int = gs_6
++      structure List = gs_10
++      structure String = gs_9
++      ../visualization/daVinci.sml
++   in
++      structure gs_11 = daVinci
++   end
++   local
++      signature GRAPH_DISPLAY = gs_8
++      structure Graph = gs_4
++      structure GraphLayout = gs_7
++      structure Int = gs_6
++      structure String = gs_9
++      ../visualization/vcg.sml
++   in
++      structure gs_12 = VCG
++   end
++   local
++      signature GRAPH_DISPLAY = gs_8
++      structure Graph = gs_4
++      structure GraphLayout = gs_7
++      structure Int = gs_6
++      structure String = gs_9
++      ../visualization/dot.sml
++   in
++      structure gs_13 = Dot
++   end
++   local
++      structure Dot = gs_13
++      signature GRAPH_DISPLAY = gs_8
++      signature MLRISC_CONTROL = gs_0
++      structure MLRiscControl = gs_1
++      structure VCG = gs_12
++      structure daVinci = gs_11
++      ../visualization/allDisplays.sml
++   in
++      structure gs_14 = AllDisplays
++   end
++   local
++      open l23
++   in
++      structure gs_15 = TextIO
++   end
++   local
++      open l23
++   in
++      structure gs_16 = OS
++   end
++   local
++      structure GraphLayout = gs_7
++      ../visualization/graphViewer.sig
++   in
++      signature gs_17 = GRAPH_VIEWER
++   end
++   local
++      signature GRAPH_DISPLAY = gs_8
++      signature GRAPH_VIEWER = gs_17
++      structure Graph = gs_4
++      structure GraphLayout = gs_7
++      structure Int = gs_6
++      signature MLRISC_CONTROL = gs_0
++      structure MLRiscControl = gs_1
++      structure OS = gs_16
++      structure TextIO = gs_15
++      ../visualization/graphViewer.sml
++   in
++      functor gs_18 = GraphViewer
++   end
++   local
++      open l66
++   in
++      structure gs_19 = Label
++   end
++   local
++      open l23
++   in
++      structure gs_20 = Array
++   end
++   local
++      open l23
++   in
++      structure gs_21 = Real
++   end
++   local
++      open l23
++   in
++      structure gs_22 = Math
++   end
++   local
++      open l66
++   in
++      signature gs_23 = INSTRUCTION_EMITTER
++   end
++   local
++      open l66
++   in
++      signature gs_24 = CONTROL_FLOW_GRAPH
++   end
++   local
++      open l19
++   in
++      structure gs_25 = StringOutStream
++   end
++   local
++      open l66
++   in
++      signature gs_26 = ASM_STREAM
++      structure gs_27 = AsmStream
++   end
++   local
++      open l66
++   in
++      signature gs_28 = INSTRUCTIONS
++   end
++   local
++      signature ASM_STREAM = gs_26
++      structure Annotations = gs_5
++      structure AsmStream = gs_27
++      signature INSTRUCTIONS = gs_28
++      signature INSTRUCTION_EMITTER = gs_23
++      structure String = gs_9
++      structure StringOutStream = gs_25
++      ../visualization/mlrisc-format-insn.sml
++   in
++      signature gs_29 = FORMAT_INSTRUCTION
++      functor gs_30 = FormatInstruction
++   end
++   local
++      structure Annotations = gs_5
++      structure Array = gs_20
++      signature CONTROL_FLOW_GRAPH = gs_24
++      signature FORMAT_INSTRUCTION = gs_29
++      functor FormatInstruction = gs_30
++      signature GRAPH_VIEWER = gs_17
++      structure Graph = gs_4
++      structure GraphLayout = gs_7
++      signature INSTRUCTION_EMITTER = gs_23
++      structure Int = gs_6
++      structure Label = gs_19
++      structure List = gs_10
++      signature MLRISC_CONTROL = gs_0
++      structure MLRiscControl = gs_1
++      structure Math = gs_22
++      structure Real = gs_21
++      structure String = gs_9
++      ../visualization/cfgViewer.sml
++   in
++      functor gs_31 = CFGViewer
++   end
++in
++   structure AllDisplays = gs_14
++   functor CFGViewer = gs_31
++   structure Dot = gs_13
++   functor FormatInstruction = gs_30
++   signature GRAPH_DISPLAY = gs_8
++   signature GRAPH_VIEWER = gs_17
++   structure GraphLayout = gs_7
++   functor GraphViewer = gs_18
++   structure VCG = gs_12
++   structure daVinci = gs_11
++end
++end
++
++end
+diff --git a/mlrisc-lib.mlb b/mlrisc-lib.mlb
+new file mode 100644
+index 0000000..3545999
+--- /dev/null
++++ b/mlrisc-lib.mlb
+@@ -0,0 +1,24 @@
++(* DO NOT USE.  Only suitable for type-checking purposes. *)
++local
++mlb/ALPHA.mlb
++mlb/AMD64.mlb
++mlb/AMD64-Peephole.mlb
++mlb/CCall.mlb
++mlb/CCall-sparc.mlb
++mlb/CCall-x86-64.mlb
++mlb/CCall-x86.mlb
++mlb/Control.mlb
++mlb/Graphs.mlb
++mlb/HPPA.mlb
++mlb/IA32.mlb
++mlb/IA32-Peephole.mlb
++mlb/Lib.mlb
++mlb/MLRISC.mlb
++mlb/MLTREE.mlb
++mlb/Peephole.mlb
++mlb/PPC.mlb
++mlb/RA.mlb
++mlb/SPARC.mlb
++mlb/StagedAlloc.mlb
++mlb/Visual.mlb
++in end
+diff --git a/mltree/instr-gen.sig b/mltree/instr-gen.sig
+index a46af29..c04db90 100644
+--- a/mltree/instr-gen.sig
++++ b/mltree/instr-gen.sig
+@@ -8,8 +8,29 @@ sig
+    structure S   : INSTRUCTION_STREAM
+    structure CFG : CONTROL_FLOW_GRAPH 
+ 
+-   sharing I.C = C 
+-   sharing CFG.P = S.P
++   (* sharing I.C = C *)
++   (* sharing CFG.P = S.P *)
++   where type P.Client.pseudo_op = S.P.Client.pseudo_op
++     and type P.T.Basis.cond = S.P.T.Basis.cond
++     and type P.T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++     and type P.T.Basis.ext = S.P.T.Basis.ext
++     and type P.T.Basis.fcond = S.P.T.Basis.fcond
++     and type P.T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++     and type P.T.Constant.const = S.P.T.Constant.const
++     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++     and type P.T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++     and type P.T.Region.region = S.P.T.Region.region
++     and type P.T.ccexp = S.P.T.ccexp
++     and type P.T.fexp = S.P.T.fexp
++     (* and type P.T.labexp = S.P.T.labexp *)
++     and type P.T.mlrisc = S.P.T.mlrisc
++     and type P.T.oper = S.P.T.oper
++     and type P.T.rep = S.P.T.rep
++     and type P.T.rexp = S.P.T.rexp
++     and type P.T.stm = S.P.T.stm
+ 
+    (* 
+     * This function creates an instruction stream, which can be 
+diff --git a/mltree/instr-gen.sml b/mltree/instr-gen.sml
+index 4b5d6cd..d31db49 100644
+--- a/mltree/instr-gen.sml
++++ b/mltree/instr-gen.sml
+@@ -4,9 +4,33 @@
+ functor InstrGen
+    (structure I      : INSTRUCTIONS
+     structure Stream : INSTRUCTION_STREAM
+-    structure CFG    : CONTROL_FLOW_GRAPH
+-    			where I = I
+-			  and P = Stream.P
++    structure CFG    : CONTROL_FLOW_GRAPH (* where I = I and P = Stream.P *)
++                       where type I.addressing_mode = I.addressing_mode
++                         and type I.ea = I.ea
++                         and type I.instr = I.instr
++                         and type I.instruction = I.instruction
++                         and type I.operand = I.operand
++                       where type P.Client.pseudo_op = Stream.P.Client.pseudo_op
++                         and type P.T.Basis.cond = Stream.P.T.Basis.cond
++                         and type P.T.Basis.div_rounding_mode = Stream.P.T.Basis.div_rounding_mode
++                         and type P.T.Basis.ext = Stream.P.T.Basis.ext
++                         and type P.T.Basis.fcond = Stream.P.T.Basis.fcond
++                         and type P.T.Basis.rounding_mode = Stream.P.T.Basis.rounding_mode
++                         and type P.T.Constant.const = Stream.P.T.Constant.const
++                         and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Stream.P.T.Extension.ccx
++                         and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Stream.P.T.Extension.fx
++                         and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Stream.P.T.Extension.rx
++                         and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Stream.P.T.Extension.sx
++                         and type P.T.I.div_rounding_mode = Stream.P.T.I.div_rounding_mode
++                         and type P.T.Region.region = Stream.P.T.Region.region
++                         and type P.T.ccexp = Stream.P.T.ccexp
++                         and type P.T.fexp = Stream.P.T.fexp
++                         (* and type P.T.labexp = Stream.P.T.labexp *)
++                         and type P.T.mlrisc = Stream.P.T.mlrisc
++                         and type P.T.oper = Stream.P.T.oper
++                         and type P.T.rep = Stream.P.T.rep
++                         and type P.T.rexp = Stream.P.T.rexp
++                         and type P.T.stm = Stream.P.T.stm
+    ) : INSTR_GEN =
+ struct
+    structure C   = I.C
+diff --git a/mltree/mltree-check-ty.sml b/mltree/mltree-check-ty.sml
+index 7583736..b806191 100644
+--- a/mltree/mltree-check-ty.sml
++++ b/mltree/mltree-check-ty.sml
+@@ -101,7 +101,13 @@ functor MLTreeCheckTy
+ 
+    and checkCCexpB cce = (case cce
+           of T.NOT cce => checkCCexpB cce
+-	   | ( T.AND (cce1, cce2) | T.OR (cce1, cce2) | T.XOR (cce1, cce2) | T.EQV (cce1, cce2) ) =>
++	   | ( T.AND (cce1, cce2) ) =>
++	     checkCCexpB cce1 andalso checkCCexpB cce2
++	   | ( T.OR (cce1, cce2) ) =>
++	     checkCCexpB cce1 andalso checkCCexpB cce2
++	   | ( T.XOR (cce1, cce2) ) =>
++	     checkCCexpB cce1 andalso checkCCexpB cce2
++	   | ( T.EQV (cce1, cce2) ) =>
+ 	     checkCCexpB cce1 andalso checkCCexpB cce2
+ 	   | T.CMP (ty, _, e1, e2) => ty = checkRexp e1 andalso ty = checkRexp e2
+ 	   | T.FCMP (fty, _, e1, e2) => fty = checkFexp e1 andalso fty = checkFexp e2
+diff --git a/mltree/mltree-gen.sig b/mltree/mltree-gen.sig
+index f2d1937..757c6d1 100644
+--- a/mltree/mltree-gen.sig
++++ b/mltree/mltree-gen.sig
+@@ -9,8 +9,27 @@ signature MLTREEGEN =
+ sig
+ 
+    structure T : MLTREE
+-   structure Size : MLTREE_SIZE
+-   	where T = T
++   structure Size : MLTREE_SIZE (* where T = T *)
++                    where type T.Basis.cond = T.Basis.cond
++                      and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                      and type T.Basis.ext = T.Basis.ext
++                      and type T.Basis.fcond = T.Basis.fcond
++                      and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                      and type T.Constant.const = T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                      and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                      and type T.Region.region = T.Region.region
++                      and type T.ccexp = T.ccexp
++                      and type T.fexp = T.fexp
++                      (* and type T.labexp = T.labexp *)
++                      and type T.mlrisc = T.mlrisc
++                      and type T.oper = T.oper
++                      and type T.rep = T.rep
++                      and type T.rexp = T.rexp
++                      and type T.stm = T.stm
+ 
+    val condOf : T.ccexp -> T.Basis.cond
+    val fcondOf : T.ccexp -> T.Basis.fcond
+diff --git a/mltree/mltree-mult.sig b/mltree/mltree-mult.sig
+index 827c051..a69f5a6 100644
+--- a/mltree/mltree-mult.sig
++++ b/mltree/mltree-mult.sig
+@@ -8,7 +8,7 @@ sig
+ 
+    structure T : MLTREE
+    structure C : CELLS 
+-   structure I : INSTRUCTIONS where C=C
++   structure I : INSTRUCTIONS (* where C = C *)
+ 
+    exception TooComplex
+ 
+diff --git a/mltree/mltree-mult.sml b/mltree/mltree-mult.sml
+index 41c26eb..def5516 100644
+--- a/mltree/mltree-mult.sml
++++ b/mltree/mltree-mult.sml
+@@ -8,7 +8,16 @@ functor MLTreeMult
+   (structure I : INSTRUCTIONS
+    structure T : MLTREE
+ 
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    val intTy : int (* width of integer type *)
+ 
+    type argi = {r:CB.cell, i:int, d:CB.cell}
+@@ -20,8 +29,8 @@ functor MLTreeMult
+    val slli  : argi -> I.instruction list
+    val srli  : argi -> I.instruction list
+    val srai  : argi -> I.instruction list
+-  )
+-  (val trapping : bool (* trap on overflow? *)
++  
++   val trapping : bool (* trap on overflow? *)
+    val multCost : int ref  (* cost of multiplication *)
+ 
+        (* basic ops; these have to implemented by the architecture *)
+@@ -37,8 +46,8 @@ functor MLTreeMult
+    val sh1addv  : (arg -> I.instruction list) option (* a*2 + b *)
+    val sh2addv  : (arg -> I.instruction list) option (* a*4 + b *)  
+    val sh3addv  : (arg -> I.instruction list) option (* a*8 + b *)
+-  )  
+-  (val signed   : bool (* signed? *)
++    
++   val signed   : bool (* signed? *)
+   ) : MLTREE_MULT_DIV =
+ struct
+    structure T = T 
+diff --git a/mltree/mltree-simplify.in b/mltree/mltree-simplify.in
+index 0e8de12..63ebbc2 100644
+--- a/mltree/mltree-simplify.in
++++ b/mltree/mltree-simplify.in
+@@ -14,8 +14,27 @@ in
+ 
+ functor MLTreeSimplifier
+   (structure T    : MLTREE
+-   structure Size : MLTREE_SIZE
+-      where T = T
++   structure Size : MLTREE_SIZE (* where T = T *)
++                    where type T.Basis.cond = T.Basis.cond
++                      and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                      and type T.Basis.ext = T.Basis.ext
++                      and type T.Basis.fcond = T.Basis.fcond
++                      and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                      and type T.Constant.const = T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                      and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                      and type T.Region.region = T.Region.region
++                      and type T.ccexp = T.ccexp
++                      and type T.fexp = T.fexp
++                      (* and type T.labexp = T.labexp *)
++                      and type T.mlrisc = T.mlrisc
++                      and type T.oper = T.oper
++                      and type T.rep = T.rep
++                      and type T.rexp = T.rexp
++                      and type T.stm = T.stm
+    (* Extension *)
+    val sext : T.rewriter -> T.sext -> T.sext
+    val rext : T.rewriter -> T.rext -> T.rext
+diff --git a/mltree/mltree-simplify.sml b/mltree/mltree-simplify.sml
+index 75e2867..5a15b04 100644
+--- a/mltree/mltree-simplify.sml
++++ b/mltree/mltree-simplify.sml
+@@ -9,7 +9,27 @@ functor MLTreeSimplifier(
+                          structure T : MLTREE
+ 
+ (*#line 17.4 "mltree-simplify.in"*)
+-                         structure Size : MLTREE_SIZE where T=T
++                         structure Size : MLTREE_SIZE (* where T=T *)
++                                          where type T.Basis.cond = T.Basis.cond
++                                            and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                                            and type T.Basis.ext = T.Basis.ext
++                                            and type T.Basis.fcond = T.Basis.fcond
++                                            and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                                            and type T.Constant.const = T.Constant.const
++                                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                                            and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                                            and type T.Region.region = T.Region.region
++                                            and type T.ccexp = T.ccexp
++                                            and type T.fexp = T.fexp
++                                            (* and type T.labexp = T.labexp *)
++                                            and type T.mlrisc = T.mlrisc
++                                            and type T.oper = T.oper
++                                            and type T.rep = T.rep
++                                            and type T.rexp = T.rexp
++                                            and type T.stm = T.stm
+ 
+ (*#line 20.4 "mltree-simplify.in"*)
+                          val sext : T.rewriter -> T.sext -> T.sext
+diff --git a/mltree/mltree-utils.sml b/mltree/mltree-utils.sml
+index e6e01d6..4d9e333 100644
+--- a/mltree/mltree-utils.sml
++++ b/mltree/mltree-utils.sml
+@@ -518,9 +518,10 @@ struct
+ 
+       and oper(T.OPER{name,...}) = name 
+ 
+-      and parenRexp
+-            (e as (T.REG _ | T.LI _ | T.$ _ | T.ARG _)) = 
+-              rexp e
++      and parenRexp (e as T.REG _) = rexp e
++        | parenRexp (e as T.LI _) = rexp e
++        | parenRexp (e as T.$ _) = rexp e
++        | parenRexp (e as T.ARG _) = rexp e
+         | parenRexp e = "("^rexp e^")"
+ 
+       and slices sc = listify' (fn (from,to) => i2s from^".."^i2s to) sc
+diff --git a/mltree/mltree.sig b/mltree/mltree.sig
+index 90f25e9..8bba294 100644
+--- a/mltree/mltree.sig
++++ b/mltree/mltree.sig
+@@ -30,6 +30,10 @@ signature MLTREE = sig
+    * extension type.  Unfortunately, this has to be made polymorphic to make
+    * it possible for recursive type definitions to work.
+    *)
++  type controlflow = Label.label list (* control flow info *)
++  type ctrl   = var                   (* control dependence info *)
++  type ctrls  = ctrl list
++
+   datatype stm =
+       (* assignment *)
+       MV      of ty * dst * rexp
+@@ -70,7 +74,7 @@ signature MLTREE = sig
+     | DEFINE of Label.label   (* define local label *)
+ 
+     | ANNOTATION of stm * an
+-    | EXT of sext  (* extension *)
++    | EXT of (stm, rexp, fexp, ccexp) Extension.sx  (* extension *)
+ 
+       (* synthetic instructions to indicated that the regs are live or
+        * killed at this program point. The spilled list must always
+@@ -152,7 +156,7 @@ signature MLTREE = sig
+ 
+     | LET of stm * rexp
+ 
+-    | REXT of ty * rext
++    | REXT of ty * (stm, rexp, fexp, ccexp) Extension.rx
+ 
+     | MARK of rexp * an
+ 
+@@ -187,7 +191,7 @@ signature MLTREE = sig
+ 
+     | FPRED of fexp * ctrl
+ 
+-    | FEXT of fty * fext
++    | FEXT of fty * (stm, rexp, fexp, ccexp) Extension.fx
+ 
+     | FMARK of fexp * an
+ 
+@@ -204,17 +208,14 @@ signature MLTREE = sig
+     | CMP    of ty * Basis.cond * rexp * rexp
+     | FCMP   of fty * Basis.fcond * fexp * fexp
+     | CCMARK of ccexp * an
+-    | CCEXT  of ty * ccext
++    | CCEXT  of ty * (stm, rexp, fexp, ccexp) Extension.ccx
+ 
+   and mlrisc =
+       CCR of ccexp
+     | GPR of rexp
+     | FPR of fexp
+ 
+-  withtype controlflow = Label.label list (* control flow info *)
+-       and ctrl   = var                   (* control dependence info *)
+-       and ctrls  = ctrl list
+-       and sext   = (stm, rexp, fexp, ccexp) Extension.sx
++  type sext   = (stm, rexp, fexp, ccexp) Extension.sx
+        and rext   = (stm, rexp, fexp, ccexp) Extension.rx
+        and fext   = (stm, rexp, fexp, ccexp) Extension.fx
+        and ccext  = (stm, rexp, fexp, ccexp) Extension.ccx
+diff --git a/mltree/mltree.sml b/mltree/mltree.sml
+index 7f5f1b1..b250ce2 100644
+--- a/mltree/mltree.sml
++++ b/mltree/mltree.sml
+@@ -32,6 +32,10 @@ struct
+    * extension type.  Unfortunately, this has to be made polymorphic to make
+    * it possible for recursive type definitions to work.
+    *)
++  type controlflow = Label.label list (* control flow info *)
++  type ctrl   = var                   (* control dependence info *)
++  type ctrls  = ctrl list
++
+   datatype stm =
+       (* assignment *)
+       MV      of ty * dst * rexp
+@@ -199,10 +203,7 @@ struct
+     | GPR of rexp
+     | FPR of fexp
+ 
+-  withtype controlflow = Label.label list (* control flow info *)
+-       and ctrl   = var                   (* control dependence info *)
+-       and ctrls  = ctrl list
+-       and sext   = (stm, rexp, fexp, ccexp) Extension.sx
++  withtype sext   = (stm, rexp, fexp, ccexp) Extension.sx
+        and rext   = (stm, rexp, fexp, ccexp) Extension.rx
+        and fext   = (stm, rexp, fexp, ccexp) Extension.fx
+        and ccext  = (stm, rexp, fexp, ccexp) Extension.ccx
+diff --git a/mltree/mltreecomp.sig b/mltree/mltreecomp.sig
+index 79ceab5..f6b72e1 100644
+--- a/mltree/mltreecomp.sig
++++ b/mltree/mltreecomp.sig
+@@ -9,11 +9,56 @@
+ signature MLTREE_EXTENSION_COMP =
+ sig
+    structure T : MLTREE
+-   structure TS : MLTREE_STREAM where T = T
++   structure TS : MLTREE_STREAM (* where T = T *)
++                  where type T.Basis.cond = T.Basis.cond
++                    and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                    and type T.Basis.ext = T.Basis.ext
++                    and type T.Basis.fcond = T.Basis.fcond
++                    and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                    and type T.Constant.const = T.Constant.const
++                    and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                    and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                    and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                    and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                    and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                    and type T.Region.region = T.Region.region
++                    and type T.ccexp = T.ccexp
++                    and type T.fexp = T.fexp
++                    (* and type T.labexp = T.labexp *)
++                    and type T.mlrisc = T.mlrisc
++                    and type T.oper = T.oper
++                    and type T.rep = T.rep
++                    and type T.rexp = T.rexp
++                    and type T.stm = T.stm
     structure I : INSTRUCTIONS
-!   structure CFG : CONTROL_FLOW_GRAPH where I = I
+-   structure CFG : CONTROL_FLOW_GRAPH
+-		where I = I
+-	          and P = TS.S.P
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
++                   where type I.addressing_mode = I.addressing_mode
++                     and type I.ea = I.ea
++                     and type I.instr = I.instr
++                     and type I.instruction = I.instruction
++                     and type I.operand = I.operand
++                   where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                     and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                     and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                     and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                     and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                     and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                     and type P.T.Constant.const = TS.S.P.T.Constant.const
++                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                     and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                     and type P.T.Region.region = TS.S.P.T.Region.region
++                     and type P.T.ccexp = TS.S.P.T.ccexp
++                     and type P.T.fexp = TS.S.P.T.fexp
++	             (* and type P.T.labexp = TS.S.P.T.labexp *)
++                     and type P.T.mlrisc = TS.S.P.T.mlrisc
++                     and type P.T.oper = TS.S.P.T.oper
++                     and type P.T.rep = TS.S.P.T.rep
++                     and type P.T.rexp = TS.S.P.T.rexp
++                     and type P.T.stm = TS.S.P.T.stm
++
+    (* 
+     * The reducer is given to the client during the compilation of
+     * the user extensions.
+@@ -34,11 +79,54 @@ signature MLTREECOMP =
+ sig
+    structure TS : MLTREE_STREAM
+    structure I : INSTRUCTIONS 
+-   structure CFG : CONTROL_FLOW_GRAPH 
+-      		where I = I
+-		  and P = TS.S.P
+-   structure Gen : MLTREEGEN 
+-   		where T = TS.T
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
++                   where type I.addressing_mode = I.addressing_mode
++                     and type I.ea = I.ea
++                     and type I.instr = I.instr
++                     and type I.instruction = I.instruction
++                     and type I.operand = I.operand
++                   where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                     and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                     and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                     and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                     and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                     and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                     and type P.T.Constant.const = TS.S.P.T.Constant.const
++                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                     and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                     and type P.T.Region.region = TS.S.P.T.Region.region
++                     and type P.T.ccexp = TS.S.P.T.ccexp
++                     and type P.T.fexp = TS.S.P.T.fexp
++                     (* and type P.T.labexp = TS.S.P.T.labexp *)
++                     and type P.T.mlrisc = TS.S.P.T.mlrisc
++                     and type P.T.oper = TS.S.P.T.oper
++                     and type P.T.rep = TS.S.P.T.rep
++                     and type P.T.rexp = TS.S.P.T.rexp
++                     and type P.T.stm = TS.S.P.T.stm
++   structure Gen : MLTREEGEN (* where T = TS.T *)
++                   where type T.Basis.cond = TS.T.Basis.cond
++                     and type T.Basis.div_rounding_mode = TS.T.Basis.div_rounding_mode
++                     and type T.Basis.ext = TS.T.Basis.ext
++                     and type T.Basis.fcond = TS.T.Basis.fcond
++                     and type T.Basis.rounding_mode = TS.T.Basis.rounding_mode
++                     and type T.Constant.const = TS.T.Constant.const
++                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) TS.T.Extension.ccx
++                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) TS.T.Extension.fx
++                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) TS.T.Extension.rx
++                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) TS.T.Extension.sx
++                     and type T.I.div_rounding_mode = TS.T.I.div_rounding_mode
++                     and type T.Region.region = TS.T.Region.region
++                     and type T.ccexp = TS.T.ccexp
++                     and type T.fexp = TS.T.fexp
++                     (* and type T.labexp = TS.T.labexp *)
++                     and type T.mlrisc = TS.T.mlrisc
++                     and type T.oper = TS.T.oper
++                     and type T.rep = TS.T.rep
++                     and type T.rexp = TS.T.rexp
++                     and type T.stm = TS.T.stm
+ 
+    type instrStream = (I.instruction, I.C.cellset, CFG.cfg) TS.stream  
+    type mltreeStream = (TS.T.stm, TS.T.mlrisc list, CFG.cfg) TS.stream 
+diff --git a/omit-frameptr/omit-frame-pointer.sig b/omit-frameptr/omit-frame-pointer.sig
+index dc0fb5b..e4ec806 100644
+--- a/omit-frameptr/omit-frame-pointer.sig
++++ b/omit-frameptr/omit-frame-pointer.sig
+@@ -2,7 +2,12 @@
+ 
+ signature OMIT_FRAME_POINTER = sig
+   structure I : INSTRUCTIONS
+-  structure CFG : CONTROL_FLOW_GRAPH where I = I
++  structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
++                  where type I.addressing_mode = I.addressing_mode
++                    and type I.ea = I.ea
++                    and type I.instr = I.instr
++                    and type I.instruction = I.instruction
++                    and type I.operand = I.operand
+   
+   (* idelta is the intial displacement between the fp and sp. *)
+   val omitframeptr : {vfp:CellsBasis.cell, idelta:Int32.int option, cfg:CFG.cfg} -> unit
+diff --git a/ppc/backpatch/ppcDelaySlots.sml b/ppc/backpatch/ppcDelaySlots.sml
+index 69823c1..a01898a 100644
+--- a/ppc/backpatch/ppcDelaySlots.sml
++++ b/ppc/backpatch/ppcDelaySlots.sml
+@@ -5,8 +5,12 @@
+ 
+ 
+ functor PPCDelaySlots(structure I : PPCINSTR
+-                      structure P : INSN_PROPERTIES
+-                         where I = I
++                      structure P : INSN_PROPERTIES (* where I = I *)
++                                    where type I.addressing_mode = I.addressing_mode
++                                      and type I.ea = I.ea
++                                      and type I.instr = I.instr
++                                      and type I.instruction = I.instruction
++                                      and type I.operand = I.operand
+                      ) : DELAY_SLOT_PROPERTIES =
+ struct
+    structure I = I
+diff --git a/ppc/backpatch/ppcJumps.sml b/ppc/backpatch/ppcJumps.sml
+index e12d7d2..7411f04 100644
+--- a/ppc/backpatch/ppcJumps.sml
++++ b/ppc/backpatch/ppcJumps.sml
+@@ -1,7 +1,70 @@
+ functor PPCJumps 
+   (structure Instr: PPCINSTR
+-   structure Shuffle : PPCSHUFFLE where I = Instr
+-   structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++   structure Shuffle : PPCSHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         and type I.arith = Instr.arith
++                         and type I.arithi = Instr.arithi
++                         and type I.bit = Instr.bit
++                         and type I.bo = Instr.bo
++                         and type I.ccarith = Instr.ccarith
++                         and type I.cmp = Instr.cmp
++                         and type I.ea = Instr.ea
++                         and type I.farith = Instr.farith
++                         and type I.farith3 = Instr.farith3
++                         and type I.fcmp = Instr.fcmp
++                         and type I.fload = Instr.fload
++                         and type I.fstore = Instr.fstore
++                         and type I.funary = Instr.funary
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.load = Instr.load
++                         and type I.operand = Instr.operand
++                         and type I.rotate = Instr.rotate
++                         and type I.rotatei = Instr.rotatei
++                         and type I.spr = Instr.spr
++                         and type I.store = Instr.store
++                         and type I.unary = Instr.unary
++                         and type I.xerbit = Instr.xerbit
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
+   ) : SDI_JUMPS = 
+ struct
+   structure I = Instr
+@@ -68,22 +131,35 @@ struct
+ 	  | operand _ = error "sdiSize:operand"
+       in
+ 	case instr
+-	of I.L{ld=(I.LBZ | I.LHZ | I.LHA | I.LWZ),d,...} => 
+-	      operand(d, signed16, 4, 8)
++	of I.L{ld=I.LBZ,d,...} => operand(d, signed16, 4, 8)
++	 | I.L{ld=I.LHZ,d,...} => operand(d, signed16, 4, 8)
++	 | I.L{ld=I.LHA,d,...} => operand(d, signed16, 4, 8)
++	 | I.L{ld=I.LWZ,d,...} => operand(d, signed16, 4, 8)
+ 	 | I.L{d,...} => operand(d, signed12, 4, 8)
+-	 | I.LF{ld=(I.LFS | I.LFD), d, ...} => operand(d, signed16, 4, 8)
++	 | I.LF{ld=I.LFS, d, ...} => operand(d, signed16, 4, 8)
++	 | I.LF{ld=I.LFD, d, ...} => operand(d, signed16, 4, 8)
+ 	 | I.LF{d, ...} => operand(d, signed12, 4, 8)
+-	 | I.ST{st=(I.STB | I.STH | I.STW), d, ...} => operand(d, signed16, 4, 8)
++	 | I.ST{st=I.STB, d, ...} => operand(d, signed16, 4, 8)
++	 | I.ST{st=I.STH, d, ...} => operand(d, signed16, 4, 8)
++	 | I.ST{st=I.STW, d, ...} => operand(d, signed16, 4, 8)
+ 	 | I.ST{d, ...} => operand(d, signed12, 4, 8)
+-	 | I.STF{st=(I.STFS | I.STFD), d, ...} => operand(d, signed16, 4, 8)
++	 | I.STF{st=I.STFS, d, ...} => operand(d, signed16, 4, 8)
++	 | I.STF{st=I.STFD, d, ...} => operand(d, signed16, 4, 8)
+ 	 | I.STF{d, ...} => operand(d, signed12, 4, 8)
+ 	 | I.ARITHI{oper, im, ...} => 
+ 	   (case oper
+ 	    of I.ADDI => operand(im, signed16, 4, 8)
+-	     | (I.ADDIS | I.SUBFIC | I.MULLI) => operand(im, signed16, 4, 12)
+-	     | (I.ANDI_Rc | I.ANDIS_Rc | I.ORI | I.ORIS | I.XORI | I.XORIS) => 
+-		   operand(im, unsigned16, 4, 12)
+-	     | (I.SRAWI | I.SRADI) => operand(im, unsigned5, 4, 12)
++	     | I.ADDIS => operand(im, signed16, 4, 12)
++	     | I.SUBFIC => operand(im, signed16, 4, 12)
++	     | I.MULLI => operand(im, signed16, 4, 12)
++	     | I.ANDI_Rc => operand(im, unsigned16, 4, 12)
++	     | I.ANDIS_Rc => operand(im, unsigned16, 4, 12)
++	     | I.ORI => operand(im, unsigned16, 4, 12)
++	     | I.ORIS => operand(im, unsigned16, 4, 12)
++	     | I.XORI => operand(im, unsigned16, 4, 12)
++	     | I.XORIS => operand(im, unsigned16, 4, 12)
++	     | I.SRAWI => operand(im, unsigned5, 4, 12)
++	     | I.SRADI => operand(im, unsigned5, 4, 12)
+ 	    (*esac*))
+ 	 | I.ROTATEI{sh, ...} => error "sdiSize:ROTATE"
+ 	 | I.COMPARE{cmp, rb, ...} => 
+diff --git a/ppc/c-calls/ppc-macosx.sml b/ppc/c-calls/ppc-macosx.sml
+index 24fe75d..26d1ae9 100644
+--- a/ppc/c-calls/ppc-macosx.sml
++++ b/ppc/c-calls/ppc-macosx.sml
+@@ -277,7 +277,9 @@ functor PPCMacOSX_CCalls (
+ 		      assignFPR (tys, offset, availGPRs, availFPRs, layout)
+ 		  | CTy.C_long_double =>
+ 		      assignFPR (tys, offset, availGPRs, availFPRs, layout)
+-		  | (CTy.C_unsigned isz | CTy.C_signed isz) =>
++		  | CTy.C_unsigned isz =>
++		      assignGPR([sizeOfInt isz], tys, offset, availGPRs, availFPRs, layout)
++		  | CTy.C_signed isz =>
+ 		      assignGPR([sizeOfInt isz], tys, offset, availGPRs, availFPRs, layout)
+ 		  | CTy.C_PTR =>
+ 		      assignGPR([sizeOfPtr], tys, offset, availGPRs, availFPRs, layout)
+@@ -464,7 +466,8 @@ functor PPCMacOSX_CCalls (
+ 	  in
+ 	  (* check calling convention *)
+ 	    case conv
+-	     of ("" | "ccall") => ()
++	     of ("") => ()
++	      | ("ccall") => ()
+ 	      | _ => error (concat [
+ 		    "unknown calling convention \"",
+ 		    String.toString conv, "\""
+diff --git a/ppc/emit/ppcAsm.sml b/ppc/emit/ppcAsm.sml
+index 1d241bb..13b3d1e 100644
+--- a/ppc/emit/ppcAsm.sml
++++ b/ppc/emit/ppcAsm.sml
+@@ -6,12 +6,92 @@
+ 
+ 
+ functor PPCAsmEmitter(structure S : INSTRUCTION_STREAM
+-                      structure Instr : PPCINSTR
+-                         where T = S.P.T
+-                      structure Shuffle : PPCSHUFFLE
+-                         where I = Instr
+-                      structure MLTreeEval : MLTREE_EVAL
+-                         where T = Instr.T
++                      structure Instr : PPCINSTR (* where T = S.P.T *)
++                                        where type T.Basis.cond = S.P.T.Basis.cond
++                                          and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                          and type T.Basis.ext = S.P.T.Basis.ext
++                                          and type T.Basis.fcond = S.P.T.Basis.fcond
++                                          and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                          and type T.Constant.const = S.P.T.Constant.const
++                                          and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                          and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                          and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                          and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                          and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                          and type T.Region.region = S.P.T.Region.region
++                                          and type T.ccexp = S.P.T.ccexp
++                                          and type T.fexp = S.P.T.fexp
++                                          (* and type T.labexp = S.P.T.labexp *)
++                                          and type T.mlrisc = S.P.T.mlrisc
++                                          and type T.oper = S.P.T.oper
++                                          and type T.rep = S.P.T.rep
++                                          and type T.rexp = S.P.T.rexp
++                                          and type T.stm = S.P.T.stm
++                      structure Shuffle : PPCSHUFFLE (* where I = Instr *)
++                                          where type I.Constant.const = Instr.Constant.const
++                                            and type I.Region.region = Instr.Region.region
++                                            and type I.T.Basis.cond = Instr.T.Basis.cond
++                                            and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                            and type I.T.Basis.ext = Instr.T.Basis.ext
++                                            and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                            and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                            and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                            and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                            and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                            and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                            and type I.T.ccexp = Instr.T.ccexp
++                                            and type I.T.fexp = Instr.T.fexp
++                                            (* and type I.T.labexp = Instr.T.labexp *)
++                                            and type I.T.mlrisc = Instr.T.mlrisc
++                                            and type I.T.oper = Instr.T.oper
++                                            and type I.T.rep = Instr.T.rep
++                                            and type I.T.rexp = Instr.T.rexp
++                                            and type I.T.stm = Instr.T.stm
++                                            and type I.arith = Instr.arith
++                                            and type I.arithi = Instr.arithi
++                                            and type I.bit = Instr.bit
++                                            and type I.bo = Instr.bo
++                                            and type I.ccarith = Instr.ccarith
++                                            and type I.cmp = Instr.cmp
++                                            and type I.ea = Instr.ea
++                                            and type I.farith = Instr.farith
++                                            and type I.farith3 = Instr.farith3
++                                            and type I.fcmp = Instr.fcmp
++                                            and type I.fload = Instr.fload
++                                            and type I.fstore = Instr.fstore
++                                            and type I.funary = Instr.funary
++                                            and type I.instr = Instr.instr
++                                            and type I.instruction = Instr.instruction
++                                            and type I.load = Instr.load
++                                            and type I.operand = Instr.operand
++                                            and type I.rotate = Instr.rotate
++                                            and type I.rotatei = Instr.rotatei
++                                            and type I.spr = Instr.spr
++                                            and type I.store = Instr.store
++                                            and type I.unary = Instr.unary
++                                            and type I.xerbit = Instr.xerbit
++                      structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                             where type T.Basis.cond = Instr.T.Basis.cond
++                                               and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                               and type T.Basis.ext = Instr.T.Basis.ext
++                                               and type T.Basis.fcond = Instr.T.Basis.fcond
++                                               and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                               and type T.Constant.const = Instr.T.Constant.const
++                                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                               and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                               and type T.Region.region = Instr.T.Region.region
++                                               and type T.ccexp = Instr.T.ccexp
++                                               and type T.fexp = Instr.T.fexp
++                                               (* and type T.labexp = Instr.T.labexp *)
++                                               and type T.mlrisc = Instr.T.mlrisc
++                                               and type T.oper = Instr.T.oper
++                                               and type T.rep = Instr.T.rep
++                                               and type T.rexp = Instr.T.rexp
++                                               and type T.stm = Instr.T.stm
+                      ) : INSTRUCTION_EMITTER =
+ struct
+    structure I  = Instr
+diff --git a/ppc/emit/ppcMC.sml b/ppc/emit/ppcMC.sml
+index fcd3e4a..776ea7d 100644
+--- a/ppc/emit/ppcMC.sml
++++ b/ppc/emit/ppcMC.sml
+@@ -6,7 +6,27 @@
+ 
+ 
+ functor PPCMCEmitter(structure Instr : PPCINSTR
+-                     structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++                     structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                            where type T.Basis.cond = Instr.T.Basis.cond
++                                              and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                              and type T.Basis.ext = Instr.T.Basis.ext
++                                              and type T.Basis.fcond = Instr.T.Basis.fcond
++                                              and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                              and type T.Constant.const = Instr.T.Constant.const
++                                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                              and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                              and type T.Region.region = Instr.T.Region.region
++                                              and type T.ccexp = Instr.T.ccexp
++                                              and type T.fexp = Instr.T.fexp
++                                              (* and type T.labexp = Instr.T.labexp *)
++                                              and type T.mlrisc = Instr.T.mlrisc
++                                              and type T.oper = Instr.T.oper
++                                              and type T.rep = Instr.T.rep
++                                              and type T.rexp = Instr.T.rexp
++                                              and type T.stm = Instr.T.stm
+                      structure Stream : INSTRUCTION_STREAM 
+                      structure CodeString : CODE_STRING
+                     ) : INSTRUCTION_EMITTER =
+@@ -47,6 +67,7 @@ struct
+        (* note: fromLargeWord strips the high order bits! *)
+        fun eByteW w =
+        let val i = !loc
++           val w = W.toLargeWord w
+        in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
     
-    (* idelta is the intial displacement between the fp and sp. *)
---- 3,12 ----
-  signature OMIT_FRAME_POINTER = sig
-    structure I : INSTRUCTIONS
-!   structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
-!                   where type I.addressing_mode = I.addressing_mode
-!                     and type I.ea = I.ea
-!                     and type I.instr = I.instr
-!                     and type I.instruction = I.instruction
-!                     and type I.operand = I.operand
-    
-    (* idelta is the intial displacement between the fp and sp. *)
-diff -N -C 2 -r MLRISC/ppc/backpatch/ppcDelaySlots.sml MLRISC-mlton/ppc/backpatch/ppcDelaySlots.sml
-*** MLRISC/ppc/backpatch/ppcDelaySlots.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/backpatch/ppcDelaySlots.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,11 ****
-  
-  functor PPCDelaySlots(structure I : PPCINSTR
-!                       structure P : INSN_PROPERTIES
-!                          where I = I
-                       ) : DELAY_SLOT_PROPERTIES =
-  struct
---- 6,15 ----
-  
-  functor PPCDelaySlots(structure I : PPCINSTR
-!                       structure P : INSN_PROPERTIES (* where I = I *)
-!                                     where type I.addressing_mode = I.addressing_mode
-!                                       and type I.ea = I.ea
-!                                       and type I.instr = I.instr
-!                                       and type I.instruction = I.instruction
-!                                       and type I.operand = I.operand
-                       ) : DELAY_SLOT_PROPERTIES =
-  struct
-diff -N -C 2 -r MLRISC/ppc/backpatch/ppcJumps.sml MLRISC-mlton/ppc/backpatch/ppcJumps.sml
-*** MLRISC/ppc/backpatch/ppcJumps.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/backpatch/ppcJumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,6 ****
-  functor PPCJumps 
-    (structure Instr: PPCINSTR
-!    structure Shuffle : PPCSHUFFLE where I = Instr
-!    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-    ) : SDI_JUMPS = 
-  struct
---- 1,69 ----
-  functor PPCJumps 
-    (structure Instr: PPCINSTR
-!    structure Shuffle : PPCSHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          and type I.arith = Instr.arith
-!                          and type I.arithi = Instr.arithi
-!                          and type I.bit = Instr.bit
-!                          and type I.bo = Instr.bo
-!                          and type I.ccarith = Instr.ccarith
-!                          and type I.cmp = Instr.cmp
-!                          and type I.ea = Instr.ea
-!                          and type I.farith = Instr.farith
-!                          and type I.farith3 = Instr.farith3
-!                          and type I.fcmp = Instr.fcmp
-!                          and type I.fload = Instr.fload
-!                          and type I.fstore = Instr.fstore
-!                          and type I.funary = Instr.funary
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.load = Instr.load
-!                          and type I.operand = Instr.operand
-!                          and type I.rotate = Instr.rotate
-!                          and type I.rotatei = Instr.rotatei
-!                          and type I.spr = Instr.spr
-!                          and type I.store = Instr.store
-!                          and type I.unary = Instr.unary
-!                          and type I.xerbit = Instr.xerbit
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-    ) : SDI_JUMPS = 
-  struct
-***************
-*** 69,88 ****
-        in
-  	case instr
-! 	of I.L{ld=(I.LBZ | I.LHZ | I.LHA | I.LWZ),d,...} => 
-! 	      operand(d, signed16, 4, 8)
-  	 | I.L{d,...} => operand(d, signed12, 4, 8)
-! 	 | I.LF{ld=(I.LFS | I.LFD), d, ...} => operand(d, signed16, 4, 8)
-  	 | I.LF{d, ...} => operand(d, signed12, 4, 8)
-! 	 | I.ST{st=(I.STB | I.STH | I.STW), d, ...} => operand(d, signed16, 4, 8)
-  	 | I.ST{d, ...} => operand(d, signed12, 4, 8)
-! 	 | I.STF{st=(I.STFS | I.STFD), d, ...} => operand(d, signed16, 4, 8)
-  	 | I.STF{d, ...} => operand(d, signed12, 4, 8)
-  	 | I.ARITHI{oper, im, ...} => 
-  	   (case oper
-  	    of I.ADDI => operand(im, signed16, 4, 8)
-! 	     | (I.ADDIS | I.SUBFIC | I.MULLI) => operand(im, signed16, 4, 12)
-! 	     | (I.ANDI_Rc | I.ANDIS_Rc | I.ORI | I.ORIS | I.XORI | I.XORIS) => 
-! 		   operand(im, unsigned16, 4, 12)
-! 	     | (I.SRAWI | I.SRADI) => operand(im, unsigned5, 4, 12)
-  	    (*esac*))
-  	 | I.ROTATEI{sh, ...} => error "sdiSize:ROTATE"
---- 132,164 ----
-        in
-  	case instr
-! 	of I.L{ld=I.LBZ,d,...} => operand(d, signed16, 4, 8)
-! 	 | I.L{ld=I.LHZ,d,...} => operand(d, signed16, 4, 8)
-! 	 | I.L{ld=I.LHA,d,...} => operand(d, signed16, 4, 8)
-! 	 | I.L{ld=I.LWZ,d,...} => operand(d, signed16, 4, 8)
-  	 | I.L{d,...} => operand(d, signed12, 4, 8)
-! 	 | I.LF{ld=I.LFS, d, ...} => operand(d, signed16, 4, 8)
-! 	 | I.LF{ld=I.LFD, d, ...} => operand(d, signed16, 4, 8)
-  	 | I.LF{d, ...} => operand(d, signed12, 4, 8)
-! 	 | I.ST{st=I.STB, d, ...} => operand(d, signed16, 4, 8)
-! 	 | I.ST{st=I.STH, d, ...} => operand(d, signed16, 4, 8)
-! 	 | I.ST{st=I.STW, d, ...} => operand(d, signed16, 4, 8)
-  	 | I.ST{d, ...} => operand(d, signed12, 4, 8)
-! 	 | I.STF{st=I.STFS, d, ...} => operand(d, signed16, 4, 8)
-! 	 | I.STF{st=I.STFD, d, ...} => operand(d, signed16, 4, 8)
-  	 | I.STF{d, ...} => operand(d, signed12, 4, 8)
-  	 | I.ARITHI{oper, im, ...} => 
-  	   (case oper
-  	    of I.ADDI => operand(im, signed16, 4, 8)
-! 	     | I.ADDIS => operand(im, signed16, 4, 12)
-! 	     | I.SUBFIC => operand(im, signed16, 4, 12)
-! 	     | I.MULLI => operand(im, signed16, 4, 12)
-! 	     | I.ANDI_Rc => operand(im, unsigned16, 4, 12)
-! 	     | I.ANDIS_Rc => operand(im, unsigned16, 4, 12)
-! 	     | I.ORI => operand(im, unsigned16, 4, 12)
-! 	     | I.ORIS => operand(im, unsigned16, 4, 12)
-! 	     | I.XORI => operand(im, unsigned16, 4, 12)
-! 	     | I.XORIS => operand(im, unsigned16, 4, 12)
-! 	     | I.SRAWI => operand(im, unsigned5, 4, 12)
-! 	     | I.SRADI => operand(im, unsigned5, 4, 12)
-  	    (*esac*))
-  	 | I.ROTATEI{sh, ...} => error "sdiSize:ROTATE"
-diff -N -C 2 -r MLRISC/ppc/c-calls/ppc-macosx.sml MLRISC-mlton/ppc/c-calls/ppc-macosx.sml
-*** MLRISC/ppc/c-calls/ppc-macosx.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/c-calls/ppc-macosx.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 278,282 ****
-  		  | CTy.C_long_double =>
-  		      assignFPR (tys, offset, availGPRs, availFPRs, layout)
-! 		  | (CTy.C_unsigned isz | CTy.C_signed isz) =>
-  		      assignGPR([sizeOfInt isz], tys, offset, availGPRs, availFPRs, layout)
-  		  | CTy.C_PTR =>
---- 278,284 ----
-  		  | CTy.C_long_double =>
-  		      assignFPR (tys, offset, availGPRs, availFPRs, layout)
-! 		  | CTy.C_unsigned isz =>
-! 		      assignGPR([sizeOfInt isz], tys, offset, availGPRs, availFPRs, layout)
-! 		  | CTy.C_signed isz =>
-  		      assignGPR([sizeOfInt isz], tys, offset, availGPRs, availFPRs, layout)
-  		  | CTy.C_PTR =>
-***************
-*** 465,469 ****
-  	  (* check calling convention *)
-  	    case conv
-! 	     of ("" | "ccall") => ()
-  	      | _ => error (concat [
-  		    "unknown calling convention \"",
---- 467,472 ----
-  	  (* check calling convention *)
-  	    case conv
-! 	     of ("") => ()
-! 	      | ("ccall") => ()
-  	      | _ => error (concat [
-  		    "unknown calling convention \"",
-diff -N -C 2 -r MLRISC/ppc/emit/ppcAsm.sml MLRISC-mlton/ppc/emit/ppcAsm.sml
-*** MLRISC/ppc/emit/ppcAsm.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/emit/ppcAsm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,16 ****
-  
-  functor PPCAsmEmitter(structure S : INSTRUCTION_STREAM
-!                       structure Instr : PPCINSTR
-!                          where T = S.P.T
-!                       structure Shuffle : PPCSHUFFLE
-!                          where I = Instr
-!                       structure MLTreeEval : MLTREE_EVAL
-!                          where T = Instr.T
-                       ) : INSTRUCTION_EMITTER =
-  struct
---- 7,96 ----
-  
-  functor PPCAsmEmitter(structure S : INSTRUCTION_STREAM
-!                       structure Instr : PPCINSTR (* where T = S.P.T *)
-!                                         where type T.Basis.cond = S.P.T.Basis.cond
-!                                           and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                           and type T.Basis.ext = S.P.T.Basis.ext
-!                                           and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                           and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                           and type T.Constant.const = S.P.T.Constant.const
-!                                           and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                           and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                           and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                           and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                           and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                           and type T.Region.region = S.P.T.Region.region
-!                                           and type T.ccexp = S.P.T.ccexp
-!                                           and type T.fexp = S.P.T.fexp
-!                                           (* and type T.labexp = S.P.T.labexp *)
-!                                           and type T.mlrisc = S.P.T.mlrisc
-!                                           and type T.oper = S.P.T.oper
-!                                           and type T.rep = S.P.T.rep
-!                                           and type T.rexp = S.P.T.rexp
-!                                           and type T.stm = S.P.T.stm
-!                       structure Shuffle : PPCSHUFFLE (* where I = Instr *)
-!                                           where type I.Constant.const = Instr.Constant.const
-!                                             and type I.Region.region = Instr.Region.region
-!                                             and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                             and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                             and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                             and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                             and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                             and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                             and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                             and type I.T.ccexp = Instr.T.ccexp
-!                                             and type I.T.fexp = Instr.T.fexp
-!                                             (* and type I.T.labexp = Instr.T.labexp *)
-!                                             and type I.T.mlrisc = Instr.T.mlrisc
-!                                             and type I.T.oper = Instr.T.oper
-!                                             and type I.T.rep = Instr.T.rep
-!                                             and type I.T.rexp = Instr.T.rexp
-!                                             and type I.T.stm = Instr.T.stm
-!                                             and type I.arith = Instr.arith
-!                                             and type I.arithi = Instr.arithi
-!                                             and type I.bit = Instr.bit
-!                                             and type I.bo = Instr.bo
-!                                             and type I.ccarith = Instr.ccarith
-!                                             and type I.cmp = Instr.cmp
-!                                             and type I.ea = Instr.ea
-!                                             and type I.farith = Instr.farith
-!                                             and type I.farith3 = Instr.farith3
-!                                             and type I.fcmp = Instr.fcmp
-!                                             and type I.fload = Instr.fload
-!                                             and type I.fstore = Instr.fstore
-!                                             and type I.funary = Instr.funary
-!                                             and type I.instr = Instr.instr
-!                                             and type I.instruction = Instr.instruction
-!                                             and type I.load = Instr.load
-!                                             and type I.operand = Instr.operand
-!                                             and type I.rotate = Instr.rotate
-!                                             and type I.rotatei = Instr.rotatei
-!                                             and type I.spr = Instr.spr
-!                                             and type I.store = Instr.store
-!                                             and type I.unary = Instr.unary
-!                                             and type I.xerbit = Instr.xerbit
-!                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                              where type T.Basis.cond = Instr.T.Basis.cond
-!                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                and type T.Basis.ext = Instr.T.Basis.ext
-!                                                and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                and type T.Constant.const = Instr.T.Constant.const
-!                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                and type T.Region.region = Instr.T.Region.region
-!                                                and type T.ccexp = Instr.T.ccexp
-!                                                and type T.fexp = Instr.T.fexp
-!                                                (* and type T.labexp = Instr.T.labexp *)
-!                                                and type T.mlrisc = Instr.T.mlrisc
-!                                                and type T.oper = Instr.T.oper
-!                                                and type T.rep = Instr.T.rep
-!                                                and type T.rexp = Instr.T.rexp
-!                                                and type T.stm = Instr.T.stm
-                       ) : INSTRUCTION_EMITTER =
-  struct
-diff -N -C 2 -r MLRISC/ppc/emit/ppcMC.sml MLRISC-mlton/ppc/emit/ppcMC.sml
-*** MLRISC/ppc/emit/ppcMC.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/emit/ppcMC.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,11 ****
-  
-  functor PPCMCEmitter(structure Instr : PPCINSTR
-!                      structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-                       structure Stream : INSTRUCTION_STREAM 
-                       structure CodeString : CODE_STRING
---- 7,31 ----
-  
-  functor PPCMCEmitter(structure Instr : PPCINSTR
-!                      structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                             where type T.Basis.cond = Instr.T.Basis.cond
-!                                               and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                               and type T.Basis.ext = Instr.T.Basis.ext
-!                                               and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                               and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                               and type T.Constant.const = Instr.T.Constant.const
-!                                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                               and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                               and type T.Region.region = Instr.T.Region.region
-!                                               and type T.ccexp = Instr.T.ccexp
-!                                               and type T.fexp = Instr.T.fexp
-!                                               (* and type T.labexp = Instr.T.labexp *)
-!                                               and type T.mlrisc = Instr.T.mlrisc
-!                                               and type T.oper = Instr.T.oper
-!                                               and type T.rep = Instr.T.rep
-!                                               and type T.rexp = Instr.T.rexp
-!                                               and type T.stm = Instr.T.stm
-                       structure Stream : INSTRUCTION_STREAM 
-                       structure CodeString : CODE_STRING
-***************
-*** 48,51 ****
---- 68,72 ----
-         fun eByteW w =
-         let val i = !loc
-+            val w = W.toLargeWord w
-         in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
-     
-***************
-*** 381,392 ****
-     and arith {oper, rt, ra, rb, OE, Rc} = 
-         (case oper of
-!          (I.ADD | I.SUBF | I.MULLW | I.MULLD | I.MULHW | I.MULHWU | I.DIVW | I.DIVD | I.DIVWU | I.DIVDU) => 
-!             arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-         | _ => arith' {oper=oper, rt=ra, ra=rt, rb=rb, OE=OE, Rc=Rc}
-         )
-     and arithi {oper, rt, ra, im} = 
-         (case oper of
-!          (I.ADDI | I.ADDIS | I.SUBFIC | I.MULLI) => arithi' {oper=oper, rt=rt, 
-!             ra=ra, im=im}
-         | I.SRAWI => srawi {rs=ra, ra=rt, sh=im}
-         | I.SRADI => sradi {rs=ra, ra=rt, sh=im}
---- 402,423 ----
-     and arith {oper, rt, ra, rb, OE, Rc} = 
-         (case oper of
-!          I.ADD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.SUBF => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.MULLW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.MULLD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.MULHW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.MULHWU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.DIVW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.DIVD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.DIVWU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-!        | I.DIVDU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
-         | _ => arith' {oper=oper, rt=ra, ra=rt, rb=rb, OE=OE, Rc=Rc}
-         )
-     and arithi {oper, rt, ra, im} = 
-         (case oper of
-!          I.ADDI => arithi' {oper=oper, rt=rt, ra=ra, im=im}
-!        | I.ADDIS => arithi' {oper=oper, rt=rt, ra=ra, im=im}
-!        | I.SUBFIC => arithi' {oper=oper, rt=rt, ra=ra, im=im}
-!        | I.MULLI => arithi' {oper=oper, rt=rt, ra=ra, im=im}
-         | I.SRAWI => srawi {rs=ra, ra=rt, sh=im}
-         | I.SRADI => sradi {rs=ra, ra=rt, sh=im}
-***************
-*** 463,468 ****
-            in 
-               (case oper of
-!                (I.FMUL | I.FMULS) => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, 
-!                   frc=fb, xo=xo, rc=Rc}
-               | _ => a_form {opcd=opcd, frt=ft, fra=fa, frb=fb, frc=0wx0, xo=xo, 
-                    rc=Rc}
---- 494,499 ----
-            in 
-               (case oper of
-!                I.FMUL => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, frc=fb, xo=xo, rc=Rc}
-!              | I.FMULS => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, frc=fb, xo=xo, rc=Rc}
-               | _ => a_form {opcd=opcd, frt=ft, fra=fa, frb=fb, frc=0wx0, xo=xo, 
-                    rc=Rc}
-diff -N -C 2 -r MLRISC/ppc/flowgraph/ppcDarwinPseudoOps.sml MLRISC-mlton/ppc/flowgraph/ppcDarwinPseudoOps.sml
-*** MLRISC/ppc/flowgraph/ppcDarwinPseudoOps.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/flowgraph/ppcDarwinPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 8,12 ****
-  functor PPCDarwinPseudoOps (
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL  where T = T
-    ) : PSEUDO_OPS_BASIS = struct
-  
---- 8,32 ----
-  functor PPCDarwinPseudoOps (
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                            where type T.Basis.cond = T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = T.Basis.ext
-!                              and type T.Basis.fcond = T.Basis.fcond
-!                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                              and type T.Constant.const = T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                              and type T.Region.region = T.Region.region
-!                              and type T.ccexp = T.ccexp
-!                              and type T.fexp = T.fexp
-!                              (* and type T.labexp = T.labexp *)
-!                              and type T.mlrisc = T.mlrisc
-!                              and type T.oper = T.oper
-!                              and type T.rep = T.rep
-!                              and type T.rexp = T.rexp
-!                              and type T.stm = T.stm
-    ) : PSEUDO_OPS_BASIS = struct
-  
-diff -N -C 2 -r MLRISC/ppc/flowgraph/ppcGasPseudoOps.sml MLRISC-mlton/ppc/flowgraph/ppcGasPseudoOps.sml
-*** MLRISC/ppc/flowgraph/ppcGasPseudoOps.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/flowgraph/ppcGasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,6 ****
-  functor PPCGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL  where T = T
-!     ) : PSEUDO_OPS_BASIS = 
-  
-  struct
---- 1,26 ----
-  functor PPCGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-!       ) : PSEUDO_OPS_BASIS = 
-  
-  struct
-diff -N -C 2 -r MLRISC/ppc/instructions/ppcCompInstrExt.sml MLRISC-mlton/ppc/instructions/ppcCompInstrExt.sml
-*** MLRISC/ppc/instructions/ppcCompInstrExt.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/instructions/ppcCompInstrExt.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 10,18 ****
-    sig
-      structure I : PPCINSTR
-!     structure TS : MLTREE_STREAM
-!       where T = I.T
-!     structure CFG : CONTROL_FLOW_GRAPH 
-!       where I = I
-! 	and P = TS.S.P
-  
-      type reducer = 
---- 10,61 ----
-    sig
-      structure I : PPCINSTR
-!     structure TS : MLTREE_STREAM (* where T = I.T *)
-!                    where type T.Basis.cond = I.T.Basis.cond
-!                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                      and type T.Basis.ext = I.T.Basis.ext
-!                      and type T.Basis.fcond = I.T.Basis.fcond
-!                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                      and type T.Constant.const = I.T.Constant.const
-!                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                      and type T.Region.region = I.T.Region.region
-!                      and type T.ccexp = I.T.ccexp
-!                      and type T.fexp = I.T.fexp
-!                      (* and type T.labexp = I.T.labexp *)
-!                      and type T.mlrisc = I.T.mlrisc
-!                      and type T.oper = I.T.oper
-!                      and type T.rep = I.T.rep
-!                      and type T.rexp = I.T.rexp
-!                      and type T.stm = I.T.stm
-!     structure CFG : CONTROL_FLOW_GRAPH  (* where I = I and  and P = TS.S.P *)
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-!                     where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = TS.S.P.T.Region.region
-!                       and type P.T.ccexp = TS.S.P.T.ccexp
-!                       and type P.T.fexp = TS.S.P.T.fexp
-!                       (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                       and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                       and type P.T.oper = TS.S.P.T.oper
-!                       and type P.T.rep = TS.S.P.T.rep
-!                       and type P.T.rexp = TS.S.P.T.rexp
-!                       and type P.T.stm = TS.S.P.T.stm
-  
-      type reducer = 
-***************
-*** 29,38 ****
-  
-      structure I : PPCINSTR
-!     structure TS  : MLTREE_STREAM
-!       where T = I.T
-!     structure CFG : CONTROL_FLOW_GRAPH 
-!       where P = TS.S.P
-! 	and I = I
-! 
-    ) : PPCCOMP_INSTR_EXT =  struct
-  
---- 72,123 ----
-  
-      structure I : PPCINSTR
-!     structure TS  : MLTREE_STREAM (* where T = I.T *)
-!                     where type T.Basis.cond = I.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = I.T.Basis.ext
-!                       and type T.Basis.fcond = I.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                       and type T.Constant.const = I.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                       and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                       and type T.Region.region = I.T.Region.region
-!                       and type T.ccexp = I.T.ccexp
-!                       and type T.fexp = I.T.fexp
-!                       (* and type T.labexp = I.T.labexp *)
-!                       and type T.mlrisc = I.T.mlrisc
-!                       and type T.oper = I.T.oper
-!                       and type T.rep = I.T.rep
-!                       and type T.rexp = I.T.rexp
-!                       and type T.stm = I.T.stm
-!     structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
-!                     where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = TS.S.P.T.Region.region
-!                       and type P.T.ccexp = TS.S.P.T.ccexp
-!                       and type P.T.fexp = TS.S.P.T.fexp
-!                       (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                       and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                       and type P.T.oper = TS.S.P.T.oper
-!                       and type P.T.rep = TS.S.P.T.rep
-!                       and type P.T.rexp = TS.S.P.T.rexp
-!                       and type P.T.stm = TS.S.P.T.stm
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-    ) : PPCCOMP_INSTR_EXT =  struct
-  
-diff -N -C 2 -r MLRISC/ppc/instructions/ppcInstr.sml MLRISC-mlton/ppc/instructions/ppcInstr.sml
-*** MLRISC/ppc/instructions/ppcInstr.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/instructions/ppcInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : PPCCELLS
-!    structure CB : CELLS_BASIS = CellsBasis
-     structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : PPCCELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     structure T : MLTREE
-     structure Constant: CONSTANT
-diff -N -C 2 -r MLRISC/ppc/instructions/ppcProps.sml MLRISC-mlton/ppc/instructions/ppcProps.sml
-*** MLRISC/ppc/instructions/ppcProps.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/instructions/ppcProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,11 ****
-  functor PPCProps
-     ( structure PPCInstr : PPCINSTR
-!      structure MLTreeEval : MLTREE_EVAL where T = PPCInstr.T
-!      structure MLTreeHash : MLTREE_HASH where T = PPCInstr.T
-      ) : INSN_PROPERTIES = 
-  struct
---- 6,51 ----
-  functor PPCProps
-     ( structure PPCInstr : PPCINSTR
-!      structure MLTreeEval : MLTREE_EVAL (* where T = PPCInstr.T *)
-!                             where type T.Basis.cond = PPCInstr.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = PPCInstr.T.Basis.ext
-!                               and type T.Basis.fcond = PPCInstr.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
-!                               and type T.Constant.const = PPCInstr.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
-!                               and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
-!                               and type T.Region.region = PPCInstr.T.Region.region
-!                               and type T.ccexp = PPCInstr.T.ccexp
-!                               and type T.fexp = PPCInstr.T.fexp
-!                               (* and type T.labexp = PPCInstr.T.labexp *)
-!                               and type T.mlrisc = PPCInstr.T.mlrisc
-!                               and type T.oper = PPCInstr.T.oper
-!                               and type T.rep = PPCInstr.T.rep
-!                               and type T.rexp = PPCInstr.T.rexp
-!                               and type T.stm = PPCInstr.T.stm
-!      structure MLTreeHash : MLTREE_HASH (* where T = PPCInstr.T *)
-!                             where type T.Basis.cond = PPCInstr.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = PPCInstr.T.Basis.ext
-!                               and type T.Basis.fcond = PPCInstr.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
-!                               and type T.Constant.const = PPCInstr.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
-!                               and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
-!                               and type T.Region.region = PPCInstr.T.Region.region
-!                               and type T.ccexp = PPCInstr.T.ccexp
-!                               and type T.fexp = PPCInstr.T.fexp
-!                               (* and type T.labexp = PPCInstr.T.labexp *)
-!                               and type T.mlrisc = PPCInstr.T.mlrisc
-!                               and type T.oper = PPCInstr.T.oper
-!                               and type T.rep = PPCInstr.T.rep
-!                               and type T.rexp = PPCInstr.T.rexp
-!                               and type T.stm = PPCInstr.T.stm
-      ) : INSN_PROPERTIES = 
-  struct
-diff -N -C 2 -r MLRISC/ppc/mltree/ppc.sml MLRISC-mlton/ppc/mltree/ppc.sml
-*** MLRISC/ppc/mltree/ppc.sml	2010-02-03 11:40:41.000000000 -0500
---- MLRISC-mlton/ppc/mltree/ppc.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 11,18 ****
-  functor PPC
-    (structure PPCInstr : PPCINSTR
-!    structure PseudoInstrs : PPC_PSEUDO_INSTR 
-!    			where I = PPCInstr
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP 
-!    			where I = PPCInstr and T = PPCInstr.T
-  
-     (* 
---- 11,84 ----
-  functor PPC
-    (structure PPCInstr : PPCINSTR
-!    structure PseudoInstrs : PPC_PSEUDO_INSTR (* where I = PPCInstr *)
-!                             where type I.Constant.const = PPCInstr.Constant.const
-!                               and type I.Region.region = PPCInstr.Region.region
-!                               and type I.T.Basis.cond = PPCInstr.T.Basis.cond
-!                               and type I.T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
-!                               and type I.T.Basis.ext = PPCInstr.T.Basis.ext
-!                               and type I.T.Basis.fcond = PPCInstr.T.Basis.fcond
-!                               and type I.T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
-!                               and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
-!                               and type I.T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
-!                               and type I.T.ccexp = PPCInstr.T.ccexp
-!                               and type I.T.fexp = PPCInstr.T.fexp
-!                               (* and type I.T.labexp = PPCInstr.T.labexp *)
-!                               and type I.T.mlrisc = PPCInstr.T.mlrisc
-!                               and type I.T.oper = PPCInstr.T.oper
-!                               and type I.T.rep = PPCInstr.T.rep
-!                               and type I.T.rexp = PPCInstr.T.rexp
-!                               and type I.T.stm = PPCInstr.T.stm
-!                               and type I.arith = PPCInstr.arith
-!                               and type I.arithi = PPCInstr.arithi
-!                               and type I.bit = PPCInstr.bit
-!                               and type I.bo = PPCInstr.bo
-!                               and type I.ccarith = PPCInstr.ccarith
-!                               and type I.cmp = PPCInstr.cmp
-!                               and type I.ea = PPCInstr.ea
-!                               and type I.farith = PPCInstr.farith
-!                               and type I.farith3 = PPCInstr.farith3
-!                               and type I.fcmp = PPCInstr.fcmp
-!                               and type I.fload = PPCInstr.fload
-!                               and type I.fstore = PPCInstr.fstore
-!                               and type I.funary = PPCInstr.funary
-!                               and type I.instr = PPCInstr.instr
-!                               and type I.instruction = PPCInstr.instruction
-!                               and type I.load = PPCInstr.load
-!                               and type I.operand = PPCInstr.operand
-!                               and type I.rotate = PPCInstr.rotate
-!                               and type I.rotatei = PPCInstr.rotatei
-!                               and type I.spr = PPCInstr.spr
-!                               and type I.store = PPCInstr.store
-!                               and type I.unary = PPCInstr.unary
-!                               and type I.xerbit = PPCInstr.xerbit
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = PPCInstr and T = PPCInstr.T *)
-!                              where type I.addressing_mode = PPCInstr.addressing_mode
-!                                and type I.ea = PPCInstr.ea
-!                                and type I.instr = PPCInstr.instr
-!                                and type I.instruction = PPCInstr.instruction
-!                                and type I.operand = PPCInstr.operand
-!                              where type T.Basis.cond = PPCInstr.T.Basis.cond
-!                                and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
-!                                and type T.Basis.ext = PPCInstr.T.Basis.ext
-!                                and type T.Basis.fcond = PPCInstr.T.Basis.fcond
-!                                and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
-!                                and type T.Constant.const = PPCInstr.T.Constant.const
-!                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
-!                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
-!                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
-!                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
-!                                and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
-!                                and type T.Region.region = PPCInstr.T.Region.region
-!                                and type T.ccexp = PPCInstr.T.ccexp
-!                                and type T.fexp = PPCInstr.T.fexp
-!                                (* and type T.labexp = PPCInstr.T.labexp *)
-!                                and type T.mlrisc = PPCInstr.T.mlrisc
-!                                and type T.oper = PPCInstr.T.oper
-!                                and type T.rep = PPCInstr.T.rep
-!                                and type T.rexp = PPCInstr.T.rexp
-!                                and type T.stm = PPCInstr.T.stm
-  
-     (* 
-***************
-*** 72,76 ****
-     * Integer multiplication 
-     *)
-!   functor Multiply32 = MLTreeMult
-      (structure I = I
-       structure T = T
---- 138,142 ----
-     * Integer multiplication 
-     *)
-!   structure Mulu32 = MLTreeMult
-      (structure I = I
-       structure T = T
-***************
-*** 85,92 ****
-       fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
-       fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
-!     )
-! 
-!   structure Mulu32 = Multiply32
-!     (val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
---- 151,156 ----
-       fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
-       fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
-!      
-!      val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
-***************
-*** 95,103 ****
-       val sh2addv = NONE
-       val sh3addv = NONE
-!     )
-!     (val signed = false)
-  
-!   structure Muls32 = Multiply32
-!     (val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
---- 159,180 ----
-       val sh2addv = NONE
-       val sh3addv = NONE
-!      
-!      val signed = false)
-! 
-!   structure Muls32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      val intTy = 32
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-  
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}
-!      fun slli{r,i,d} = [I.INSTR(SLLI32{r=r,i=i,d=d})]
-!      fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
-!      fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
-!      
-!      val trapping = false
-       val multCost = multCost
-       fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
-***************
-*** 106,114 ****
-       val sh2addv = NONE
-       val sh3addv = NONE
-!     )
-!     (val signed = true)
-  
-!   structure Mult32 = Multiply32
-!     (val trapping = true
-       val multCost = multCost
-       fun addv{r1,r2,d} = error "Mult32.addv"
---- 183,204 ----
-       val sh2addv = NONE
-       val sh3addv = NONE
-!      
-!      val signed = true)
-  
-!   structure Mult32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      val intTy = 32
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-! 
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d}= I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}
-!      fun slli{r,i,d} = [I.INSTR(SLLI32{r=r,i=i,d=d})]
-!      fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
-!      fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
-!      
-!      val trapping = true
-       val multCost = multCost
-       fun addv{r1,r2,d} = error "Mult32.addv"
-***************
-*** 117,122 ****
-       val sh2addv = NONE
-       val sh3addv = NONE
-!     )
-!     (val signed = true)
-  
-    fun selectInstructions
---- 207,212 ----
-       val sh2addv = NONE
-       val sh3addv = NONE
-!      
-!      val signed = true)
-  
-    fun selectInstructions
-***************
-*** 278,282 ****
-          | stmt(T.JMP(T.LABEXP lexp, labs),an) =
-               mark(I.B{addr=I.LabelOp lexp, LK=false},an)
-!         | stmt(T.JMP(x as (T.LABEL _ | T.CONST _), labs),an) =
-               mark(I.B{addr=I.LabelOp x, LK=false},an)
-          | stmt(T.JMP(rexp, labs),an) =
---- 368,374 ----
-          | stmt(T.JMP(T.LABEXP lexp, labs),an) =
-               mark(I.B{addr=I.LabelOp lexp, LK=false},an)
-!         | stmt(T.JMP(x as T.LABEL _, labs),an) =
-!              mark(I.B{addr=I.LabelOp x, LK=false},an)
-!         | stmt(T.JMP(x as T.CONST _, labs),an) =
-               mark(I.B{addr=I.LabelOp x, LK=false},an)
-          | stmt(T.JMP(rexp, labs),an) =
-***************
-*** 327,331 ****
-  		| T.GTU => (I.TRUE,  I.GT)
-  		| T.GEU => (I.FALSE, I.LT)
-! 		| (T.SETCC | T.MISC_COND _) => error "branch(CMP)"
-  	     (*esac*))
-              val ccreg = if true then CR0 else newCCreg() (* XXX *)
---- 419,424 ----
-  		| T.GTU => (I.TRUE,  I.GT)
-  		| T.GEU => (I.FALSE, I.LT)
-! 		| T.SETCC => error "branch(CMP)"
-! 		| T.MISC_COND _ => error "branch(CMP)"
-  	     (*esac*))
-              val ccreg = if true then CR0 else newCCreg() (* XXX *)
-***************
-*** 355,365 ****
-                   emitBranch{bo=bo, bf=cr, bit=bit, addr=addr, LK=false}
-            in  case cc of 
-!                 T.EQ => branch(I.TRUE, I.EQ)
-!               | T.NE => branch(I.FALSE, I.EQ)
-!               | (T.LT | T.LTU) => branch(I.TRUE, I.LT)
-!               | (T.LE | T.LEU) => branch(I.FALSE, I.GT)
-!               | (T.GE | T.GEU) => branch(I.FALSE, I.LT)
-!               | (T.GT | T.GTU) => branch(I.TRUE, I.GT)
-! 	      | (T.SETCC | T.MISC_COND _) => error "branch(CC)"
-            end  
-          | branch(cmp as T.FCMP(fty, cond, _, _), lab, an) = 
---- 448,463 ----
-                   emitBranch{bo=bo, bf=cr, bit=bit, addr=addr, LK=false}
-            in  case cc of 
-!                 T.EQ  => branch(I.TRUE, I.EQ)
-!               | T.NE  => branch(I.FALSE, I.EQ)
-!               | T.LT  => branch(I.TRUE, I.LT)
-!               | T.LTU => branch(I.TRUE, I.LT)
-!               | T.LE  => branch(I.FALSE, I.GT)
-!               | T.LEU => branch(I.FALSE, I.GT)
-!               | T.GE  => branch(I.FALSE, I.LT)
-!               | T.GEU => branch(I.FALSE, I.LT)
-!               | T.GT  => branch(I.TRUE, I.GT)
-!               | T.GTU => branch(I.TRUE, I.GT)
-! 	      | T.SETCC => error "branch(CC)"
-! 	      | T.MISC_COND _ => error "branch(CC)"
-            end  
-          | branch(cmp as T.FCMP(fty, cond, _, _), lab, an) = 
-***************
-*** 391,395 ****
-                | T.<>  => test2bits(I.FL, I.FG)
-                | T.?=  => test2bits(I.FU, I.FE)
-! 	      | (T.SETFCC | T.MISC_FCOND _) => error "branch(FCMP)"
-               (*esac*)
-            end
---- 489,494 ----
-                | T.<>  => test2bits(I.FL, I.FG)
-                | T.?=  => test2bits(I.FU, I.FE)
-! 	      | T.SETFCC => error "branch(FCMP)"
-! 	      | T.MISC_FCOND _ => error "branch(FCMP)"
-               (*esac*)
-            end
-***************
-*** 497,501 ****
+        fun doNothing _ = ()
+@@ -380,14 +401,24 @@ struct
+        end
+    and arith {oper, rt, ra, rb, OE, Rc} = 
+        (case oper of
+-         (I.ADD | I.SUBF | I.MULLW | I.MULLD | I.MULHW | I.MULHWU | I.DIVW | I.DIVD | I.DIVWU | I.DIVDU) => 
+-            arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++         I.ADD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.SUBF => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.MULLW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.MULLD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.MULHW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.MULHWU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.DIVW => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.DIVD => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.DIVWU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
++       | I.DIVDU => arith' {oper=oper, rt=rt, ra=ra, rb=rb, OE=OE, Rc=Rc}
+        | _ => arith' {oper=oper, rt=ra, ra=rt, rb=rb, OE=OE, Rc=Rc}
+        )
+    and arithi {oper, rt, ra, im} = 
+        (case oper of
+-         (I.ADDI | I.ADDIS | I.SUBFIC | I.MULLI) => arithi' {oper=oper, rt=rt, 
+-            ra=ra, im=im}
++         I.ADDI => arithi' {oper=oper, rt=rt, ra=ra, im=im}
++       | I.ADDIS => arithi' {oper=oper, rt=rt, ra=ra, im=im}
++       | I.SUBFIC => arithi' {oper=oper, rt=rt, ra=ra, im=im}
++       | I.MULLI => arithi' {oper=oper, rt=rt, ra=ra, im=im}
+        | I.SRAWI => srawi {rs=ra, ra=rt, sh=im}
+        | I.SRADI => sradi {rs=ra, ra=rt, sh=im}
+        | _ => arithi' {oper=oper, rt=ra, ra=rt, im=im}
+@@ -462,8 +493,8 @@ struct
+               val (opcd, xo) = emit_farith oper
+           in 
+              (case oper of
+-               (I.FMUL | I.FMULS) => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, 
+-                  frc=fb, xo=xo, rc=Rc}
++               I.FMUL => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, frc=fb, xo=xo, rc=Rc}
++             | I.FMULS => a_form {opcd=opcd, frt=ft, fra=fa, frb=0wx0, frc=fb, xo=xo, rc=Rc}
+              | _ => a_form {opcd=opcd, frt=ft, fra=fa, frb=fb, frc=0wx0, xo=xo, 
+                   rc=Rc}
               )
-          | subtract(ty, T.LI i, e2, rt, an) = subfImmed(i, expr e2, rt, an)
-!         | subtract(ty, x as (T.CONST _ | T.LABEL _), e2, rt, an) =
-               mark(I.ARITHI{oper=I.SUBFIC,rt=rt,ra=expr e2,
-                             im=I.LabelOp x},an)
---- 596,603 ----
-              )
-          | subtract(ty, T.LI i, e2, rt, an) = subfImmed(i, expr e2, rt, an)
-!         | subtract(ty, x as T.CONST _, e2, rt, an) =
-!              mark(I.ARITHI{oper=I.SUBFIC,rt=rt,ra=expr e2,
-!                            im=I.LabelOp x},an)
-!         | subtract(ty, x as T.LABEL _, e2, rt, an) =
-               mark(I.ARITHI{oper=I.SUBFIC,rt=rt,ra=expr e2,
-                             im=I.LabelOp x},an)
-***************
-*** 730,735 ****
-  
-              (* Single/double precision support *)
-!           | T.FABS((32|64), e) => funary(I.FABS, e, ft, an)
-!           | T.FNEG((32|64), e) => funary(I.FNEG, e, ft, an)
-  	  | T.FSQRT(32, e)     => funary(I.FSQRTS, e, ft, an)
-  	  | T.FSQRT(64, e)     => funary(I.FSQRT, e, ft, an)
---- 832,839 ----
-  
-              (* Single/double precision support *)
-!           | T.FABS(32, e) => funary(I.FABS, e, ft, an)
-!           | T.FABS(64, e) => funary(I.FABS, e, ft, an)
-!           | T.FNEG(32, e) => funary(I.FNEG, e, ft, an)
-!           | T.FNEG(64, e) => funary(I.FNEG, e, ft, an)
-  	  | T.FSQRT(32, e)     => funary(I.FSQRTS, e, ft, an)
-  	  | T.FSQRT(64, e)     => funary(I.FSQRT, e, ft, an)
-***************
-*** 758,763 ****
-                let val (opnds, cmp) =
-                     case cc of 
-!                      (T.LT | T.LE | T.EQ | T.NE | T.GT | T.GE) =>
-!                        (immedOpnd signed16, I.CMP)
-                     | _ => (immedOpnd unsigned16, I.CMPL)
-                    val (opndA, opndB) = opnds(e1, e2)
---- 862,871 ----
-                let val (opnds, cmp) =
-                     case cc of 
-!                      T.LT => (immedOpnd signed16, I.CMP)
-!                    | T.LE => (immedOpnd signed16, I.CMP)
-!                    | T.EQ => (immedOpnd signed16, I.CMP)
-!                    | T.NE => (immedOpnd signed16, I.CMP)
-!                    | T.GT => (immedOpnd signed16, I.CMP)
-!                    | T.GE => (immedOpnd signed16, I.CMP)
-                     | _ => (immedOpnd unsigned16, I.CMPL)
-                    val (opndA, opndB) = opnds(e1, e2)
-diff -N -C 2 -r MLRISC/ra/arch-spill-instr.sig MLRISC-mlton/ra/arch-spill-instr.sig
-*** MLRISC/ra/arch-spill-instr.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/arch-spill-instr.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 11,15 ****
-  signature ARCH_SPILL_INSTR = sig
+diff --git a/ppc/flowgraph/ppcDarwinPseudoOps.sml b/ppc/flowgraph/ppcDarwinPseudoOps.sml
+index 5b86ab7..4442fd0 100644
+--- a/ppc/flowgraph/ppcDarwinPseudoOps.sml
++++ b/ppc/flowgraph/ppcDarwinPseudoOps.sml
+@@ -7,7 +7,27 @@
+ 
+ functor PPCDarwinPseudoOps (
+     structure T : MLTREE
+-    structure MLTreeEval : MLTREE_EVAL  where T = T
++    structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                           where type T.Basis.cond = T.Basis.cond
++                             and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                             and type T.Basis.ext = T.Basis.ext
++                             and type T.Basis.fcond = T.Basis.fcond
++                             and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                             and type T.Constant.const = T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                             and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                             and type T.Region.region = T.Region.region
++                             and type T.ccexp = T.ccexp
++                             and type T.fexp = T.fexp
++                             (* and type T.labexp = T.labexp *)
++                             and type T.mlrisc = T.mlrisc
++                             and type T.oper = T.oper
++                             and type T.rep = T.rep
++                             and type T.rexp = T.rexp
++                             and type T.stm = T.stm
+   ) : PSEUDO_OPS_BASIS = struct
+ 
+     structure T = T
+diff --git a/ppc/flowgraph/ppcGasPseudoOps.sml b/ppc/flowgraph/ppcGasPseudoOps.sml
+index 08fdbba..a1bffba 100644
+--- a/ppc/flowgraph/ppcGasPseudoOps.sml
++++ b/ppc/flowgraph/ppcGasPseudoOps.sml
+@@ -1,6 +1,26 @@
+ functor PPCGasPseudoOps 
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL  where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+     ) : PSEUDO_OPS_BASIS = 
+ 
+ struct
+diff --git a/ppc/instructions/ppcCompInstrExt.sml b/ppc/instructions/ppcCompInstrExt.sml
+index b2354cd..d7b6562 100644
+--- a/ppc/instructions/ppcCompInstrExt.sml
++++ b/ppc/instructions/ppcCompInstrExt.sml
+@@ -9,11 +9,54 @@
+ signature PPCCOMP_INSTR_EXT =
+   sig
+     structure I : PPCINSTR
+-    structure TS : MLTREE_STREAM
+-      where T = I.T
+-    structure CFG : CONTROL_FLOW_GRAPH 
+-      where I = I
+-	and P = TS.S.P
++    structure TS : MLTREE_STREAM (* where T = I.T *)
++                   where type T.Basis.cond = I.T.Basis.cond
++                     and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                     and type T.Basis.ext = I.T.Basis.ext
++                     and type T.Basis.fcond = I.T.Basis.fcond
++                     and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                     and type T.Constant.const = I.T.Constant.const
++                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                     and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                     and type T.Region.region = I.T.Region.region
++                     and type T.ccexp = I.T.ccexp
++                     and type T.fexp = I.T.fexp
++                     (* and type T.labexp = I.T.labexp *)
++                     and type T.mlrisc = I.T.mlrisc
++                     and type T.oper = I.T.oper
++                     and type T.rep = I.T.rep
++                     and type T.rexp = I.T.rexp
++                     and type T.stm = I.T.stm
++    structure CFG : CONTROL_FLOW_GRAPH  (* where I = I and  and P = TS.S.P *)
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
++                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = TS.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = TS.S.P.T.Region.region
++                      and type P.T.ccexp = TS.S.P.T.ccexp
++                      and type P.T.fexp = TS.S.P.T.fexp
++                      (* and type P.T.labexp = TS.S.P.T.labexp *)
++                      and type P.T.mlrisc = TS.S.P.T.mlrisc
++                      and type P.T.oper = TS.S.P.T.oper
++                      and type P.T.rep = TS.S.P.T.rep
++                      and type P.T.rexp = TS.S.P.T.rexp
++                      and type P.T.stm = TS.S.P.T.stm
+ 
+     type reducer = 
+       (I.instruction, I.C.cellset, I.operand, I.addressing_mode, CFG.cfg) TS.reducer
+@@ -28,12 +71,54 @@ signature PPCCOMP_INSTR_EXT =
+ functor PPCCompInstrExt (
+ 
+     structure I : PPCINSTR
+-    structure TS  : MLTREE_STREAM
+-      where T = I.T
+-    structure CFG : CONTROL_FLOW_GRAPH 
+-      where P = TS.S.P
+-	and I = I
+-
++    structure TS  : MLTREE_STREAM (* where T = I.T *)
++                    where type T.Basis.cond = I.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = I.T.Basis.ext
++                      and type T.Basis.fcond = I.T.Basis.fcond
++                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                      and type T.Constant.const = I.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                      and type T.Region.region = I.T.Region.region
++                      and type T.ccexp = I.T.ccexp
++                      and type T.fexp = I.T.fexp
++                      (* and type T.labexp = I.T.labexp *)
++                      and type T.mlrisc = I.T.mlrisc
++                      and type T.oper = I.T.oper
++                      and type T.rep = I.T.rep
++                      and type T.rexp = I.T.rexp
++                      and type T.stm = I.T.stm
++    structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
++                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = TS.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = TS.S.P.T.Region.region
++                      and type P.T.ccexp = TS.S.P.T.ccexp
++                      and type P.T.fexp = TS.S.P.T.fexp
++                      (* and type P.T.labexp = TS.S.P.T.labexp *)
++                      and type P.T.mlrisc = TS.S.P.T.mlrisc
++                      and type P.T.oper = TS.S.P.T.oper
++                      and type P.T.rep = TS.S.P.T.rep
++                      and type P.T.rexp = TS.S.P.T.rexp
++                      and type P.T.stm = TS.S.P.T.stm
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
+   ) : PPCCOMP_INSTR_EXT =  struct
+ 
+     structure CFG = CFG
+diff --git a/ppc/instructions/ppcInstr.sml b/ppc/instructions/ppcInstr.sml
+index 5839cc9..a6dcdc0 100644
+--- a/ppc/instructions/ppcInstr.sml
++++ b/ppc/instructions/ppcInstr.sml
+@@ -8,7 +8,16 @@
+ signature PPCINSTR =
+ sig
+    structure C : PPCCELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure T : MLTREE
+    structure Constant: CONSTANT
+    structure Region : REGION
+diff --git a/ppc/instructions/ppcProps.sml b/ppc/instructions/ppcProps.sml
+index d1dd455..ee9be9b 100644
+--- a/ppc/instructions/ppcProps.sml
++++ b/ppc/instructions/ppcProps.sml
+@@ -5,8 +5,48 @@
+ 
+ functor PPCProps
+    ( structure PPCInstr : PPCINSTR
+-     structure MLTreeEval : MLTREE_EVAL where T = PPCInstr.T
+-     structure MLTreeHash : MLTREE_HASH where T = PPCInstr.T
++     structure MLTreeEval : MLTREE_EVAL (* where T = PPCInstr.T *)
++                            where type T.Basis.cond = PPCInstr.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = PPCInstr.T.Basis.ext
++                              and type T.Basis.fcond = PPCInstr.T.Basis.fcond
++                              and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
++                              and type T.Constant.const = PPCInstr.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
++                              and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
++                              and type T.Region.region = PPCInstr.T.Region.region
++                              and type T.ccexp = PPCInstr.T.ccexp
++                              and type T.fexp = PPCInstr.T.fexp
++                              (* and type T.labexp = PPCInstr.T.labexp *)
++                              and type T.mlrisc = PPCInstr.T.mlrisc
++                              and type T.oper = PPCInstr.T.oper
++                              and type T.rep = PPCInstr.T.rep
++                              and type T.rexp = PPCInstr.T.rexp
++                              and type T.stm = PPCInstr.T.stm
++     structure MLTreeHash : MLTREE_HASH (* where T = PPCInstr.T *)
++                            where type T.Basis.cond = PPCInstr.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = PPCInstr.T.Basis.ext
++                              and type T.Basis.fcond = PPCInstr.T.Basis.fcond
++                              and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
++                              and type T.Constant.const = PPCInstr.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
++                              and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
++                              and type T.Region.region = PPCInstr.T.Region.region
++                              and type T.ccexp = PPCInstr.T.ccexp
++                              and type T.fexp = PPCInstr.T.fexp
++                              (* and type T.labexp = PPCInstr.T.labexp *)
++                              and type T.mlrisc = PPCInstr.T.mlrisc
++                              and type T.oper = PPCInstr.T.oper
++                              and type T.rep = PPCInstr.T.rep
++                              and type T.rexp = PPCInstr.T.rexp
++                              and type T.stm = PPCInstr.T.stm
+     ) : INSN_PROPERTIES = 
+ struct
+   structure I = PPCInstr
+diff --git a/ppc/mltree/ppc.sml b/ppc/mltree/ppc.sml
+index 94d81f6..8632899 100644
+--- a/ppc/mltree/ppc.sml
++++ b/ppc/mltree/ppc.sml
+@@ -10,10 +10,76 @@
+ 
+ functor PPC
+   (structure PPCInstr : PPCINSTR
+-   structure PseudoInstrs : PPC_PSEUDO_INSTR 
+-   			where I = PPCInstr
+-   structure ExtensionComp : MLTREE_EXTENSION_COMP 
+-   			where I = PPCInstr and T = PPCInstr.T
++   structure PseudoInstrs : PPC_PSEUDO_INSTR (* where I = PPCInstr *)
++                            where type I.Constant.const = PPCInstr.Constant.const
++                              and type I.Region.region = PPCInstr.Region.region
++                              and type I.T.Basis.cond = PPCInstr.T.Basis.cond
++                              and type I.T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
++                              and type I.T.Basis.ext = PPCInstr.T.Basis.ext
++                              and type I.T.Basis.fcond = PPCInstr.T.Basis.fcond
++                              and type I.T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
++                              and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
++                              and type I.T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
++                              and type I.T.ccexp = PPCInstr.T.ccexp
++                              and type I.T.fexp = PPCInstr.T.fexp
++                              (* and type I.T.labexp = PPCInstr.T.labexp *)
++                              and type I.T.mlrisc = PPCInstr.T.mlrisc
++                              and type I.T.oper = PPCInstr.T.oper
++                              and type I.T.rep = PPCInstr.T.rep
++                              and type I.T.rexp = PPCInstr.T.rexp
++                              and type I.T.stm = PPCInstr.T.stm
++                              and type I.arith = PPCInstr.arith
++                              and type I.arithi = PPCInstr.arithi
++                              and type I.bit = PPCInstr.bit
++                              and type I.bo = PPCInstr.bo
++                              and type I.ccarith = PPCInstr.ccarith
++                              and type I.cmp = PPCInstr.cmp
++                              and type I.ea = PPCInstr.ea
++                              and type I.farith = PPCInstr.farith
++                              and type I.farith3 = PPCInstr.farith3
++                              and type I.fcmp = PPCInstr.fcmp
++                              and type I.fload = PPCInstr.fload
++                              and type I.fstore = PPCInstr.fstore
++                              and type I.funary = PPCInstr.funary
++                              and type I.instr = PPCInstr.instr
++                              and type I.instruction = PPCInstr.instruction
++                              and type I.load = PPCInstr.load
++                              and type I.operand = PPCInstr.operand
++                              and type I.rotate = PPCInstr.rotate
++                              and type I.rotatei = PPCInstr.rotatei
++                              and type I.spr = PPCInstr.spr
++                              and type I.store = PPCInstr.store
++                              and type I.unary = PPCInstr.unary
++                              and type I.xerbit = PPCInstr.xerbit
++   structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = PPCInstr and T = PPCInstr.T *)
++                             where type I.addressing_mode = PPCInstr.addressing_mode
++                               and type I.ea = PPCInstr.ea
++                               and type I.instr = PPCInstr.instr
++                               and type I.instruction = PPCInstr.instruction
++                               and type I.operand = PPCInstr.operand
++                             where type T.Basis.cond = PPCInstr.T.Basis.cond
++                               and type T.Basis.div_rounding_mode = PPCInstr.T.Basis.div_rounding_mode
++                               and type T.Basis.ext = PPCInstr.T.Basis.ext
++                               and type T.Basis.fcond = PPCInstr.T.Basis.fcond
++                               and type T.Basis.rounding_mode = PPCInstr.T.Basis.rounding_mode
++                               and type T.Constant.const = PPCInstr.T.Constant.const
++                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) PPCInstr.T.Extension.ccx
++                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) PPCInstr.T.Extension.fx
++                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) PPCInstr.T.Extension.rx
++                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) PPCInstr.T.Extension.sx
++                               and type T.I.div_rounding_mode = PPCInstr.T.I.div_rounding_mode
++                               and type T.Region.region = PPCInstr.T.Region.region
++                               and type T.ccexp = PPCInstr.T.ccexp
++                               and type T.fexp = PPCInstr.T.fexp
++                               (* and type T.labexp = PPCInstr.T.labexp *)
++                               and type T.mlrisc = PPCInstr.T.mlrisc
++                               and type T.oper = PPCInstr.T.oper
++                               and type T.rep = PPCInstr.T.rep
++                               and type T.rexp = PPCInstr.T.rexp
++                               and type T.stm = PPCInstr.T.stm
+ 
+    (* 
+     * Support 64 bit mode? 
+@@ -71,7 +137,7 @@ struct
+   (*  
+    * Integer multiplication 
+    *)
+-  functor Multiply32 = MLTreeMult
++  structure Mulu32 = MLTreeMult
+     (structure I = I
+      structure T = T
+      structure CB = CellsBasis
+@@ -84,40 +150,64 @@ struct
+      fun slli{r,i,d} = [I.INSTR(SLLI32{r=r,i=i,d=d})]
+      fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
+      fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
+-    )
+ 
+-  structure Mulu32 = Multiply32
+-    (val trapping = false
++     val trapping = false
+      val multCost = multCost
+      fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
+      fun subv{r1,r2,d}=[I.arith{oper=I.SUBF,ra=r2,rb=r1,rt=d,Rc=false,OE=false}]
+      val sh1addv = NONE
+      val sh2addv = NONE
+      val sh3addv = NONE
+-    )
+-    (val signed = false)
+ 
+-  structure Muls32 = Multiply32
+-    (val trapping = false
++     val signed = false)
++
++  structure Muls32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     val intTy = 32
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d}= I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}
++     fun slli{r,i,d} = [I.INSTR(SLLI32{r=r,i=i,d=d})]
++     fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
++     fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
++     
++     val trapping = false
+      val multCost = multCost
+      fun addv{r1,r2,d}=[I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}]
+      fun subv{r1,r2,d}=[I.arith{oper=I.SUBF,ra=r2,rb=r1,rt=d,Rc=false,OE=false}]
+      val sh1addv = NONE
+      val sh2addv = NONE
+      val sh3addv = NONE
+-    )
+-    (val signed = true)
+ 
+-  structure Mult32 = Multiply32
+-    (val trapping = true
++     val signed = true)
++
++  structure Mult32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     val intTy = 32
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d}= I.arith{oper=I.ADD,ra=r1,rb=r2,rt=d,Rc=false,OE=false}
++     fun slli{r,i,d} = [I.INSTR(SLLI32{r=r,i=i,d=d})]
++     fun srli{r,i,d} = [I.INSTR(SRLI32{r=r,i=i,d=d})]
++     fun srai{r,i,d} = [I.arithi{oper=I.SRAWI,rt=d,ra=r,im=I.ImmedOp i}]
++     
++     val trapping = true
+      val multCost = multCost
+      fun addv{r1,r2,d} = error "Mult32.addv"
+      fun subv{r1,r2,d} = error "Mult32.subv"
+      val sh1addv = NONE
+      val sh2addv = NONE
+      val sh3addv = NONE
+-    )
+-    (val signed = true)
++     
++     val signed = true)
+ 
+   fun selectInstructions
+       (instrStream as 
+@@ -277,7 +367,9 @@ struct
+         | stmt(T.FCOPY(_, dst, src), an) = fcopy(dst, src, an)
+         | stmt(T.JMP(T.LABEXP lexp, labs),an) =
+              mark(I.B{addr=I.LabelOp lexp, LK=false},an)
+-        | stmt(T.JMP(x as (T.LABEL _ | T.CONST _), labs),an) =
++        | stmt(T.JMP(x as T.LABEL _, labs),an) =
++             mark(I.B{addr=I.LabelOp x, LK=false},an)
++        | stmt(T.JMP(x as T.CONST _, labs),an) =
+              mark(I.B{addr=I.LabelOp x, LK=false},an)
+         | stmt(T.JMP(rexp, labs),an) =
+           let val rs = expr(rexp)
+@@ -326,7 +418,8 @@ struct
+ 		| T.LEU => (I.FALSE, I.GT)
+ 		| T.GTU => (I.TRUE,  I.GT)
+ 		| T.GEU => (I.FALSE, I.LT)
+-		| (T.SETCC | T.MISC_COND _) => error "branch(CMP)"
++		| T.SETCC => error "branch(CMP)"
++		| T.MISC_COND _ => error "branch(CMP)"
+ 	     (*esac*))
+             val ccreg = if true then CR0 else newCCreg() (* XXX *)
+ 	    val addr = I.LabelOp(T.LABEL lab)
+@@ -356,11 +449,16 @@ struct
+           in  case cc of 
+                 T.EQ => branch(I.TRUE, I.EQ)
+               | T.NE => branch(I.FALSE, I.EQ)
+-              | (T.LT | T.LTU) => branch(I.TRUE, I.LT)
+-              | (T.LE | T.LEU) => branch(I.FALSE, I.GT)
+-              | (T.GE | T.GEU) => branch(I.FALSE, I.LT)
+-              | (T.GT | T.GTU) => branch(I.TRUE, I.GT)
+-	      | (T.SETCC | T.MISC_COND _) => error "branch(CC)"
++              | T.LT  => branch(I.TRUE, I.LT)
++              | T.LTU => branch(I.TRUE, I.LT)
++              | T.LE  => branch(I.FALSE, I.GT)
++              | T.LEU => branch(I.FALSE, I.GT)
++              | T.GE  => branch(I.FALSE, I.LT)
++              | T.GEU => branch(I.FALSE, I.LT)
++              | T.GT  => branch(I.TRUE, I.GT)
++              | T.GTU => branch(I.TRUE, I.GT)
++	      | T.SETCC => error "branch(CC)"
++	      | T.MISC_COND _ => error "branch(CC)"
+           end  
+         | branch(cmp as T.FCMP(fty, cond, _, _), lab, an) = 
+           let val ccreg = if true then CR0 else newCCreg() (* XXX *)
+@@ -390,7 +488,8 @@ struct
+               | T.?<= => branch(I.FALSE,  ccreg, I.FG)
+               | T.<>  => test2bits(I.FL, I.FG)
+               | T.?=  => test2bits(I.FU, I.FE)
+-	      | (T.SETFCC | T.MISC_FCOND _) => error "branch(FCMP)"
++	      | T.SETFCC => error "branch(FCMP)"
++	      | T.MISC_FCOND _ => error "branch(FCMP)"
+              (*esac*)
+           end
+         | branch _ = error "branch"
+@@ -496,7 +595,10 @@ struct
+                            rb=expr e1, OE=false, Rc=false}, an)
+             )
+         | subtract(ty, T.LI i, e2, rt, an) = subfImmed(i, expr e2, rt, an)
+-        | subtract(ty, x as (T.CONST _ | T.LABEL _), e2, rt, an) =
++        | subtract(ty, x as T.CONST _, e2, rt, an) =
++             mark(I.ARITHI{oper=I.SUBFIC,rt=rt,ra=expr e2,
++                           im=I.LabelOp x},an)
++        | subtract(ty, x as T.LABEL _, e2, rt, an) =
+              mark(I.ARITHI{oper=I.SUBFIC,rt=rt,ra=expr e2,
+                            im=I.LabelOp x},an)
+         | subtract(ty, e1, e2, rt, an) =
+@@ -729,8 +831,10 @@ struct
+                app emitInstruction (PseudoInstrs.cvti2d{reg=expr e,fd=ft})
+ 
+             (* Single/double precision support *)
+-          | T.FABS((32|64), e) => funary(I.FABS, e, ft, an)
+-          | T.FNEG((32|64), e) => funary(I.FNEG, e, ft, an)
++          | T.FABS(32, e) => funary(I.FABS, e, ft, an)
++          | T.FABS(64, e) => funary(I.FABS, e, ft, an)
++          | T.FNEG(32, e) => funary(I.FNEG, e, ft, an)
++          | T.FNEG(64, e) => funary(I.FNEG, e, ft, an)
+ 	  | T.FSQRT(32, e)     => funary(I.FSQRTS, e, ft, an)
+ 	  | T.FSQRT(64, e)     => funary(I.FSQRT, e, ft, an)
+ 
+@@ -757,8 +861,12 @@ struct
+               T.CMP(ty, cc, e1, e2) => 
+               let val (opnds, cmp) =
+                    case cc of 
+-                     (T.LT | T.LE | T.EQ | T.NE | T.GT | T.GE) =>
+-                       (immedOpnd signed16, I.CMP)
++                     T.LT => (immedOpnd signed16, I.CMP)
++                   | T.LE => (immedOpnd signed16, I.CMP)
++                   | T.EQ => (immedOpnd signed16, I.CMP)
++                   | T.NE => (immedOpnd signed16, I.CMP)
++                   | T.GT => (immedOpnd signed16, I.CMP)
++                   | T.GE => (immedOpnd signed16, I.CMP)
+                    | _ => (immedOpnd unsigned16, I.CMPL)
+                   val (opndA, opndB) = opnds(e1, e2)
+                   val l  = case ty of
+diff --git a/ra/arch-spill-instr.sig b/ra/arch-spill-instr.sig
+index b91475f..a76c52c 100644
+--- a/ra/arch-spill-instr.sig
++++ b/ra/arch-spill-instr.sig
+@@ -10,7 +10,16 @@
+  *)
+ signature ARCH_SPILL_INSTR = sig
+   structure I : INSTRUCTIONS
+-  structure CB : CELLS_BASIS = CellsBasis
++  structure CB : CELLS_BASIS (* = CellsBasis *)
++                 where type CellSet.cellset = CellsBasis.CellSet.cellset
++                   and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                   and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                   and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                   and type cell = CellsBasis.cell
++                   and type cellColor = CellsBasis.cellColor
++                   and type cellkind = CellsBasis.cellkind
++                   and type cellkindDesc = CellsBasis.cellkindDesc
++                   and type cellkindInfo = CellsBasis.cellkindInfo
+   
+   val spillToEA :
+       CB.cellkind ->
+diff --git a/ra/chaitin-spillheur2.sml b/ra/chaitin-spillheur2.sml
+index 3ca0dbe..475d126 100644
+--- a/ra/chaitin-spillheur2.sml
++++ b/ra/chaitin-spillheur2.sml
+@@ -35,7 +35,35 @@ struct
+           | moveSavings(NODE{movelist, ...}) = 
+             let fun loop([], savings) = 
+                      foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
+-                  | loop(MV{status=ref(WORKLIST | GEORGE_MOVE | BRIGGS_MOVE),
++                  | loop(MV{status=ref WORKLIST,
++                            dst, src, cost, ...}::mvs, savings) =
++                    let fun add(c,[]) = [(c,cost)]
++                          | add(c,(x as (c':int,s))::savings) =
++                             if c = c' then (c',s+cost)::savings
++                             else x::add(c,savings)
++                        val savings =
++                           case chase dst of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ =>
++                           case chase src of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ => savings
++                   in  loop(mvs, savings) end
++                  | loop(MV{status=ref GEORGE_MOVE,
++                            dst, src, cost, ...}::mvs, savings) =
++                    let fun add(c,[]) = [(c,cost)]
++                          | add(c,(x as (c':int,s))::savings) =
++                             if c = c' then (c',s+cost)::savings
++                             else x::add(c,savings)
++                        val savings =
++                           case chase dst of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ =>
++                           case chase src of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ => savings
++                   in  loop(mvs, savings) end
++                  | loop(MV{status=ref BRIGGS_MOVE,
+                             dst, src, cost, ...}::mvs, savings) = 
+                     let fun add(c,[]) = [(c,cost)]
+                           | add(c,(x as (c':int,s))::savings) =
+diff --git a/ra/chow-hennessy-spillheur2.sml b/ra/chow-hennessy-spillheur2.sml
+index 811a509..54fac74 100644
+--- a/ra/chow-hennessy-spillheur2.sml
++++ b/ra/chow-hennessy-spillheur2.sml
+@@ -32,7 +32,35 @@ struct
+           | moveSavings(NODE{movelist, ...}) = 
+             let fun loop([], savings) = 
+                      foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
+-                  | loop(MV{status=ref(WORKLIST | GEORGE_MOVE | BRIGGS_MOVE),
++                  | loop(MV{status=ref WORKLIST,
++                            dst, src, cost, ...}::mvs, savings) =
++                    let fun add(c,[]) = [(c,cost)]
++                          | add(c,(x as (c':int,s))::savings) =
++                             if c = c' then (c',s+cost)::savings
++                             else x::add(c,savings)
++                        val savings =
++                           case chase dst of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ =>
++                           case chase src of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ => savings
++                   in  loop(mvs, savings) end
++                  | loop(MV{status=ref GEORGE_MOVE,
++                            dst, src, cost, ...}::mvs, savings) =
++                    let fun add(c,[]) = [(c,cost)]
++                          | add(c,(x as (c':int,s))::savings) =
++                             if c = c' then (c',s+cost)::savings
++                             else x::add(c,savings)
++                        val savings =
++                           case chase dst of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ =>
++                           case chase src of
++                             NODE{color=ref(COLORED c), ...} => add(c,savings)
++                           | _ => savings
++                   in  loop(mvs, savings) end
++                  | loop(MV{status=ref BRIGGS_MOVE,
+                             dst, src, cost, ...}::mvs, savings) = 
+                     let fun add(c,[]) = [(c,cost)]
+                           | add(c,(x as (c':int,s))::savings) =
+diff --git a/ra/cluster-ra.sml b/ra/cluster-ra.sml
+index 129fe40..edef1e1 100644
+--- a/ra/cluster-ra.sml
++++ b/ra/cluster-ra.sml
+@@ -14,13 +14,45 @@
+ 
+ functor ClusterRA
+    (structure Asm       : INSTRUCTION_EMITTER
+-    structure Flowgraph : CONTROL_FLOW_GRAPH
+-    			where I = Asm.I 
+-			  and P = Asm.S.P
+-    structure InsnProps : INSN_PROPERTIES
+-    			where I = Flowgraph.I 
+-    structure Spill : RA_SPILL 
+-    			where I = Flowgraph.I
++    structure Flowgraph : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
++                          where type I.addressing_mode = Asm.I.addressing_mode
++                            and type I.ea = Asm.I.ea
++                            and type I.instr = Asm.I.instr
++                            and type I.instruction = Asm.I.instruction
++                            and type I.operand = Asm.I.operand
++                          where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
++                            and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
++                            and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
++                            and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
++                            and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
++                            and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
++                            and type P.T.Constant.const = Asm.S.P.T.Constant.const
++                            and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
++                            and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
++                            and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
++                            and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
++                            and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
++                            and type P.T.Region.region = Asm.S.P.T.Region.region
++                            and type P.T.ccexp = Asm.S.P.T.ccexp
++                            and type P.T.fexp = Asm.S.P.T.fexp
++                            (* and type P.T.labexp = Asm.S.P.T.labexp *)
++                            and type P.T.mlrisc = Asm.S.P.T.mlrisc
++                            and type P.T.oper = Asm.S.P.T.oper
++                            and type P.T.rep = Asm.S.P.T.rep
++                            and type P.T.rexp = Asm.S.P.T.rexp
++                            and type P.T.stm = Asm.S.P.T.stm
++    structure InsnProps : INSN_PROPERTIES (* where I = Flowgraph.I *)
++                          where type I.addressing_mode = Flowgraph.I.addressing_mode
++                            and type I.ea = Flowgraph.I.ea
++                            and type I.instr = Flowgraph.I.instr
++                            and type I.instruction = Flowgraph.I.instruction
++                            and type I.operand = Flowgraph.I.operand
++    structure Spill     : RA_SPILL (* where I = Flowgraph.I *)
++                          where type I.addressing_mode = Flowgraph.I.addressing_mode
++                            and type I.ea = Flowgraph.I.ea
++                            and type I.instr = Flowgraph.I.instr
++                            and type I.instruction = Flowgraph.I.instruction
++                            and type I.operand = Flowgraph.I.operand
+    ) : RA_FLOWGRAPH =
+ struct
+    structure CFG    = Flowgraph
+diff --git a/ra/mem-ra.sml b/ra/mem-ra.sml
+index de295f5..e248202 100644
+--- a/ra/mem-ra.sml
++++ b/ra/mem-ra.sml
+@@ -51,7 +51,9 @@ struct
+       fun collectMoves([], mv') = mv'
+ 	| collectMoves(NODE{movelist, color, ...}::ns, mv') = let
+ 	    fun ins([], mv') = collectMoves(ns, mv')
+-	      | ins(MV{status=ref(COALESCED | CONSTRAINED), ...}::mvs, mv') = 
++	      | ins(MV{status=ref COALESCED, ...}::mvs, mv') =
++		  ins(mvs, mv')
++	      | ins(MV{status=ref CONSTRAINED, ...}::mvs, mv') =
+ 		  ins(mvs, mv')
+ 	      | ins((mv as MV{dst, src, ...})::mvs, mv') = let
+ 		  val NODE{color=ref cd, number=nd, ...} = chase dst
+@@ -92,7 +94,19 @@ struct
+ 		| union((n as NODE{color, adj=adjT, 
+ 				   number=t, ...})::adjDst, adjSrc) = 
+ 		  (case !color of
+-		     (SPILLED | MEMREG _ | SPILL_LOC _ | PSEUDO) =>
++		     SPILLED =>
++		       if addEdge(s, t) then
++			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
++		       else union(adjDst, adjSrc)
++		   | MEMREG _ =>
++		       if addEdge(s, t) then
++			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
++		       else union(adjDst, adjSrc)
++		   | SPILL_LOC _ =>
++		       if addEdge(s, t) then
++			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
++		       else union(adjDst, adjSrc)
++		   | PSEUDO =>
+ 		       if addEdge(s, t) then 
+ 			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
+ 		       else union(adjDst, adjSrc)
+@@ -155,7 +169,10 @@ struct
+                  x = y orelse member(x,y) orelse interferes(x, ns)
+ 
+           fun moveSavings([], pinned, total) = (pinned, total+total)
+-            | moveSavings(MV{status=ref(CONSTRAINED | COALESCED), ...}::mvs,
++            | moveSavings(MV{status=ref CONSTRAINED, ...}::mvs,
++                          pinned, total) =
++                 moveSavings(mvs, pinned, total)
++            | moveSavings(MV{status=ref COALESCED, ...}::mvs,
+                           pinned, total) = 
+                  moveSavings(mvs, pinned, total)
+             | moveSavings(MV{dst, src, cost, ...}::mvs, pinned, total) =
+diff --git a/ra/ra-core.sig b/ra/ra-core.sig
+index 3127769..1cecd17 100644
+--- a/ra/ra-core.sig
++++ b/ra/ra-core.sig
+@@ -11,7 +11,26 @@
+ signature RA_CORE = 
+ sig
+ 
+-   structure G  : RA_GRAPH = RAGraph
++   structure G  : RA_GRAPH (* = RAGraph *)
++                  where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
++                    and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
++                    and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
++                    and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
++                    and type C.cell = RAGraph.C.cell
++                    and type C.cellColor = RAGraph.C.cellColor
++                    and type C.cellkind = RAGraph.C.cellkind
++                    and type C.cellkindDesc = RAGraph.C.cellkindDesc
++                    and type C.cellkindInfo = RAGraph.C.cellkindInfo
++                    and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
++                    and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
++                    and type interferenceGraph = RAGraph.interferenceGraph
++                    and type move = RAGraph.move
++                    and type moveKind = RAGraph.moveKind
++                    and type moveStatus = RAGraph.moveStatus
++                    and type node = RAGraph.node
++                    and type nodeStatus = RAGraph.nodeStatus
++                    and type spillLoc = RAGraph.spillLoc
++                    and type trailInfo = RAGraph.trailInfo
+    structure BM : RA_BITMATRIX
+    structure MV : RA_PRIORITY_QUEUE where type elem = G.move
+    structure FZ : RA_PRIORITY_QUEUE where type elem = G.node
+diff --git a/ra/ra-core.sml b/ra/ra-core.sml
+index 594fd74..ae42220 100644
+--- a/ra/ra-core.sml
++++ b/ra/ra-core.sml
+@@ -163,7 +163,15 @@ struct
+   fun dumpGraph(G as G.GRAPH{nodes, showReg, K,...}) stream =
+   let fun pr s = TextIO.output(stream, s)
+       val show = show G
+-      fun prMove(MV{src, dst, status=ref(WORKLIST | BRIGGS_MOVE | GEORGE_MOVE),
++      fun prMove(MV{src, dst, status=ref WORKLIST,
++                    cost,...}) =
++            pr(node2s(chase dst)^" <- "^node2s(chase src)^
++               "("^r2s(cost)^") ")
++        | prMove(MV{src, dst, status=ref BRIGGS_MOVE,
++                    cost,...}) =
++            pr(node2s(chase dst)^" <- "^node2s(chase src)^
++               "("^r2s(cost)^") ")
++        | prMove(MV{src, dst, status=ref GEORGE_MOVE,
+                     cost,...}) = 
+             pr(node2s(chase dst)^" <- "^node2s(chase src)^
+                "("^r2s(cost)^") ")
+@@ -541,7 +549,13 @@ struct
+                 | addMv((m as MV{status, hicount as ref hi, ...})::rest,
+                         ns, mv) = 
+                   (case !status of
+-                     (BRIGGS_MOVE | GEORGE_MOVE) => 
++                     BRIGGS_MOVE =>
++                       (* decrements hi, when hi <= 0 enable move *)
++                       if hi <= 1 then
++                         (status := WORKLIST; addMv(rest, ns, MV.add(m, mv)))
++                       else
++                         (hicount := hi-1; addMv(rest, ns, mv))
++                   | GEORGE_MOVE =>
+                        (* decrements hi, when hi <= 0 enable move *)
+                        if hi <= 1 then
+                          (status := WORKLIST; addMv(rest, ns, MV.add(m, mv)))
+@@ -623,7 +637,10 @@ struct
+                 * nodes that are removed, since removed nodes either have
+                 * deg < K or else optimistic spilling must be in effect!
+                 *)
+-               NODE{degree,number,color=ref(PSEUDO | REMOVED), ...} => 
++               NODE{degree,number,color=ref PSEUDO, ...} =>
++               if !degree < K orelse member(reg, number) then loop(adj, hi)
++               else loop(adj, hi+1)
++             | NODE{degree,number,color=ref REMOVED, ...} =>
+                if !degree < K orelse member(reg, number) then loop(adj, hi)
+                else loop(adj, hi+1)
+              | _ => loop(adj, hi)
+@@ -706,7 +723,13 @@ struct
+            | union((t as NODE{color, degree, ...})::adj, 
+                    mv, fz, stack) =
+               (case !color of
+-                 (COLORED _ | SPILL_LOC _ | MEMREG _ | SPILLED) => 
++                 COLORED _ =>
++                   (addEdge(t, u); union(adj, mv, fz, stack))
++               | SPILL_LOC _ =>
++                   (addEdge(t, u); union(adj, mv, fz, stack))
++               | MEMREG _ =>
++                   (addEdge(t, u); union(adj, mv, fz, stack))
++               | SPILLED =>
+                    (addEdge(t, u); union(adj, mv, fz, stack))
+                | PSEUDO =>
+                    (addEdge(t, u);
+@@ -864,7 +887,22 @@ struct
+             | elimMoves(MV{status, src, dst, ...}::mvs, simp) =
+               case !status of 
+                 WORKLIST => error "elimMoves"
+-              | (BRIGGS_MOVE | GEORGE_MOVE) => (* mark move as lost *)
++              | BRIGGS_MOVE => (* mark move as lost *)
++                let val _ = status := LOST
++                    val src as NODE{number=s,...} = chase src
++                    val you = if s = me then chase dst else src
++                in  case you of
++                      NODE{color=ref(COLORED _),...} =>
++                        elimMoves(mvs, simp)
++                    | NODE{movecnt as ref c, degree, ...} => (* pseudo *)
++                        (movecnt := c - 1;
++                         if c = 1 andalso !degree < K then
++                            elimMoves(mvs, you::simp)
++                         else
++                            elimMoves(mvs, simp)
++                        )
++                end
++              | GEORGE_MOVE => (* mark move as lost *)
+                 let val _ = status := LOST
+                     val src as NODE{number=s,...} = chase src
+                     val you = if s = me then chase dst else src
+@@ -1085,7 +1123,23 @@ struct
+                * color the move with the same color
+                *)
+               fun getPref([], pref) = pref
+-                | getPref(MV{status=ref(LOST | BRIGGS_MOVE | GEORGE_MOVE), 
++                | getPref(MV{status=ref LOST,
++                             src, dst, ...}::mvs, pref) =
++                  let val src as NODE{number=s,...} = chase src
++                      val other = if s = number then chase dst else src
++                  in  case other of
++                        NODE{color=ref(COLORED c),...} => getPref(mvs, c::pref)
++                      | _ => getPref(mvs, pref)
++                  end
++                | getPref(MV{status=ref BRIGGS_MOVE,
++                             src, dst, ...}::mvs, pref) =
++                  let val src as NODE{number=s,...} = chase src
++                      val other = if s = number then chase dst else src
++                  in  case other of
++                        NODE{color=ref(COLORED c),...} => getPref(mvs, c::pref)
++                      | _ => getPref(mvs, pref)
++                  end
++                | getPref(MV{status=ref GEORGE_MOVE,
+                              src, dst, ...}::mvs, pref) =
+                   let val src as NODE{number=s,...} = chase src
+                       val other = if s = number then chase dst else src 
+diff --git a/ra/ra-deadCodeE.sml b/ra/ra-deadCodeE.sml
+index 8f05f89..a7bb8c8 100644
+--- a/ra/ra-deadCodeE.sml
++++ b/ra/ra-deadCodeE.sml
+@@ -6,9 +6,9 @@
+  * -- Allen
+  *)
+ 
+-functor RADeadCodeElim
+-   (Flowgraph : RA_FLOWGRAPH)
+-   (  (* check for dead code on these cellkinds only *)
++functor RADeadCodeElim (
++    structure Flowgraph : RA_FLOWGRAPH
++      (* check for dead code on these cellkinds only *)
+     val cellkind : CellsBasis.cellkind -> bool
+       (* Dead registers are stored here. *)
+     val deadRegs : bool IntHashTable.hash_table 
+diff --git a/ra/ra-flowgraph.sig b/ra/ra-flowgraph.sig
+index 6837166..d7b6981 100644
+--- a/ra/ra-flowgraph.sig
++++ b/ra/ra-flowgraph.sig
+@@ -12,10 +12,34 @@ sig
+ 
+    structure I     : INSTRUCTIONS
+    structure C     : CELLS  
+-   structure G     : RA_GRAPH = RAGraph
++   structure G     : RA_GRAPH (* = RAGraph *)
++                     where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
++                       and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
++                       and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
++                       and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
++                       and type C.cell = RAGraph.C.cell
++                       and type C.cellColor = RAGraph.C.cellColor
++                       and type C.cellkind = RAGraph.C.cellkind
++                       and type C.cellkindDesc = RAGraph.C.cellkindDesc
++                       and type C.cellkindInfo = RAGraph.C.cellkindInfo
++                       and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
++                       and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
++                       and type interferenceGraph = RAGraph.interferenceGraph
++                       and type move = RAGraph.move
++                       and type moveKind = RAGraph.moveKind
++                       and type moveStatus = RAGraph.moveStatus
++                       and type node = RAGraph.node
++                       and type nodeStatus = RAGraph.nodeStatus
++                       and type spillLoc = RAGraph.spillLoc
++                       and type trailInfo = RAGraph.trailInfo
+    structure Spill : RA_SPILL
+-     sharing Spill.I = I
+-     sharing I.C = C 
++     (* sharing Spill.I = I *)
++     where type I.addressing_mode = I.addressing_mode
++       and type I.ea = I.ea
++       and type I.instr = I.instr
++       and type I.instruction = I.instruction
++       and type I.operand = I.operand
++     (* sharing I.C = C *)
+ 
+    type flowgraph
+ 
+diff --git a/ra/ra-graph.sig b/ra/ra-graph.sig
+index 67f7d89..db2435b 100644
+--- a/ra/ra-graph.sig
++++ b/ra/ra-graph.sig
+@@ -11,7 +11,10 @@ signature RA_GRAPH =
+ sig
+ 
+   structure C : CELLS_BASIS
+-  structure BM : RA_BITMATRIX = RaBitmatrix
++  structure BM : RA_BITMATRIX (* = RaBitmatrix *)
++                 where type bitMatrix = RaBitmatrix.bitMatrix
++                   and type bucket = RaBitmatrix.bucket
++                   and type hashTable = RaBitmatrix.hashTable
+   (*
+    * The following are the data structures used in the register allocator.
+    *)
+diff --git a/ra/ra-spill-with-renaming.sml b/ra/ra-spill-with-renaming.sml
+index d5d2b8b..ba4dff1 100644
+--- a/ra/ra-spill-with-renaming.sml
++++ b/ra/ra-spill-with-renaming.sml
+@@ -79,16 +79,14 @@
+  * -- Allen
+  *)
+ 
+-local
+-
+-   val debug = false
+-
+-in
+-
+ functor RASpillWithRenaming
+    (structure InsnProps : INSN_PROPERTIES 
+-    structure Asm       : INSTRUCTION_EMITTER
+-    			where I = InsnProps.I
++    structure Asm       : INSTRUCTION_EMITTER (* where I = InsnProps.I *)
++                          where type I.addressing_mode = InsnProps.I.addressing_mode
++                            and type I.ea = InsnProps.I.ea
++                            and type I.instr = InsnProps.I.instr
++                            and type I.instruction = InsnProps.I.instruction
++                            and type I.operand = InsnProps.I.operand
+ 
+     (* Spilling a variable v creates tiny live-ranges at all its definitions
+      * and uses.  The following parameter is the maximal distance of
+@@ -107,6 +105,7 @@ functor RASpillWithRenaming
+     val keep_multiple_values : bool ref
+    ) : RA_SPILL =
+ struct
++   val debug = false
+ 
+    structure I      = InsnProps.I
+    structure P      = InsnProps
+@@ -584,5 +583,3 @@ struct
+    in  spillRewrite
+    end
+ end
+-
+-end (* local *)
+diff --git a/ra/ra-spill.sig b/ra/ra-spill.sig
+index 2d19e00..39279de 100644
+--- a/ra/ra-spill.sig
++++ b/ra/ra-spill.sig
+@@ -7,11 +7,39 @@ signature RA_SPILL =
+ sig
+ 
     structure I : INSTRUCTIONS
-!   structure CB : CELLS_BASIS = CellsBasis
-    
-    val spillToEA :
---- 11,24 ----
-  signature ARCH_SPILL_INSTR = sig
+-   structure G : RA_GRAPH = RAGraph
++   structure G : RA_GRAPH (* = RAGraph *)
++                 where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
++                   and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
++                   and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
++                   and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
++                   and type C.cell = RAGraph.C.cell
++                   and type C.cellColor = RAGraph.C.cellColor
++                   and type C.cellkind = RAGraph.C.cellkind
++                   and type C.cellkindDesc = RAGraph.C.cellkindDesc
++                   and type C.cellkindInfo = RAGraph.C.cellkindInfo
++                   and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
++                   and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
++                   and type interferenceGraph = RAGraph.interferenceGraph
++                   and type move = RAGraph.move
++                   and type moveKind = RAGraph.moveKind
++                   and type moveStatus = RAGraph.moveStatus
++                   and type node = RAGraph.node
++                   and type nodeStatus = RAGraph.nodeStatus
++                   and type spillLoc = RAGraph.spillLoc
++                   and type trailInfo = RAGraph.trailInfo
+    structure C : CELLS 
+-      sharing I.C = C
++      (* sharing I.C = C *)
+ 
+-   structure CB : CELLS_BASIS = CellsBasis 
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    type copyInstr =
+           (CB.cell list * CB.cell list) * I.instruction -> I.instruction list
+ 
+diff --git a/ra/ra-spill.sml b/ra/ra-spill.sml
+index d89a67a..8df619e 100644
+--- a/ra/ra-spill.sml
++++ b/ra/ra-spill.sml
+@@ -48,18 +48,17 @@
+  * -- Allen
+  *)
+ 
+-local
+-
+-   val debug = false
+-
+-in
+-
+ functor RASpill
+    (structure InsnProps : INSN_PROPERTIES
+-    structure Asm       : INSTRUCTION_EMITTER
+-    			where I = InsnProps.I
++    structure Asm       : INSTRUCTION_EMITTER (* where I = InsnProps.I *)
++                          where type I.addressing_mode = InsnProps.I.addressing_mode
++                            and type I.ea = InsnProps.I.ea
++                            and type I.instr = InsnProps.I.instr
++                            and type I.instruction = InsnProps.I.instruction
++                            and type I.operand = InsnProps.I.operand
+    ) : RA_SPILL =
+ struct
++   val debug = false
+ 
+    structure I      = InsnProps.I
+    structure P      = InsnProps
+@@ -451,5 +450,3 @@ struct
+    in  spillRewrite
+    end
+ end
+-
+-end (* local *)
+diff --git a/ra/ra-spillheur.sig b/ra/ra-spillheur.sig
+index 50f0224..77aeeb5 100644
+--- a/ra/ra-spillheur.sig
++++ b/ra/ra-spillheur.sig
+@@ -3,7 +3,26 @@
+  *)
+ signature RA_SPILL_HEURISTICS =
+ sig
+-   structure G : RA_GRAPH = RAGraph
++   structure G : RA_GRAPH (* = RAGraph *)
++                 where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
++                   and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
++                   and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
++                   and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
++                   and type C.cell = RAGraph.C.cell
++                   and type C.cellColor = RAGraph.C.cellColor
++                   and type C.cellkind = RAGraph.C.cellkind
++                   and type C.cellkindDesc = RAGraph.C.cellkindDesc
++                   and type C.cellkindInfo = RAGraph.C.cellkindInfo
++                   and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
++                   and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
++                   and type interferenceGraph = RAGraph.interferenceGraph
++                   and type move = RAGraph.move
++                   and type moveKind = RAGraph.moveKind
++                   and type moveStatus = RAGraph.moveStatus
++                   and type node = RAGraph.node
++                   and type nodeStatus = RAGraph.nodeStatus
++                   and type spillLoc = RAGraph.spillLoc
++                   and type trailInfo = RAGraph.trailInfo
+ 
+    exception NoCandidate
+ 
+diff --git a/ra/ra.sig b/ra/ra.sig
+index 7fdacac..549c5a4 100644
+--- a/ra/ra.sig
++++ b/ra/ra.sig
+@@ -9,9 +9,23 @@ sig
     structure I : INSTRUCTIONS
-!   structure CB : CELLS_BASIS (* = CellsBasis *)
-!                  where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                    and type cell = CellsBasis.cell
-!                    and type cellColor = CellsBasis.cellColor
-!                    and type cellkind = CellsBasis.cellkind
-!                    and type cellkindDesc = CellsBasis.cellkindDesc
-!                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure C : CELLS
+    structure F : RA_FLOWGRAPH 
+-      sharing F.I   = I
+-      sharing I.C   = C
+-   structure CB : CELLS_BASIS = CellsBasis
++      (* sharing F.I = I *)
++     where type I.addressing_mode = I.addressing_mode
++       and type I.ea = I.ea
++       and type I.instr = I.instr
++       and type I.instruction = I.instruction
++       and type I.operand = I.operand
++      (* sharing I.C = C *)
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+ 
+    type getreg = { pref  : CB.cell_id list,
+                    stamp : int, 
+diff --git a/ra/ra.sml b/ra/ra.sml
+index 388f0b2..bf66604 100644
+--- a/ra/ra.sml
++++ b/ra/ra.sml
+@@ -37,9 +37,10 @@
+  * -- Allen Leung (leunga@cs.nyu.edu)
+  *)
+ 
+-functor RegisterAllocator
+-   (SpillHeuristics : RA_SPILL_HEURISTICS) 
+-   (Flowgraph : RA_FLOWGRAPH where C = CellsBasis) : RA =
++functor RegisterAllocator (
++   structure SpillHeuristics : RA_SPILL_HEURISTICS
++   structure Flowgraph : RA_FLOWGRAPH (* where C = CellsBasis *)
++) : RA =
+ struct
+ 
+    structure F      = Flowgraph
+diff --git a/ra/region-based-ra.sml b/ra/region-based-ra.sml
+index 7166945..e31e981 100644
+--- a/ra/region-based-ra.sml
++++ b/ra/region-based-ra.sml
+@@ -4,10 +4,10 @@
+  * it into manageable pieces to be allocated.
+  *)
+ functor RegionBasedRA
+-   (RA : RA)
+-   (FlowgraphPartitioner : RA_FLOWGRAPH_PARTITIONER 
++   (structure RA : RA
++    structure FlowgraphPartitioner : RA_FLOWGRAPH_PARTITIONER
+        where type flowgraph = RA.F.flowgraph
+-       where C = RA.C
++       (* where C = RA.C *)
+    ) : RA =
+ struct
+ 
+diff --git a/ra/risc-ra.sml b/ra/risc-ra.sml
+index d5d2ec3..b965871 100644
+--- a/ra/risc-ra.sml
++++ b/ra/risc-ra.sml
+@@ -5,17 +5,57 @@
+  *)
+ functor RISC_RA
+   (structure I         : INSTRUCTIONS
+-   structure Asm       : INSTRUCTION_EMITTER
+-   			where I = I 
+-   structure CFG       : CONTROL_FLOW_GRAPH 
+-   			where I = I
+-		          and P = Asm.S.P
+-   structure InsnProps : INSN_PROPERTIES
+-   			where I = I
+-   structure Rewrite   : REWRITE_INSTRUCTIONS
+-   			where I = I
+-   structure SpillInstr : ARCH_SPILL_INSTR
+-                        where I = I
++   structure Asm        : INSTRUCTION_EMITTER (* where I = I *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
++   structure CFG        : CONTROL_FLOW_GRAPH (* where I = I and P = Asm.S.P *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
++                          where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
++                            and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
++                            and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
++                            and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
++                            and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
++                            and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
++                            and type P.T.Constant.const = Asm.S.P.T.Constant.const
++                            and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
++                            and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
++                            and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
++                            and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
++                            and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
++                            and type P.T.Region.region = Asm.S.P.T.Region.region
++                            and type P.T.ccexp = Asm.S.P.T.ccexp
++                            and type P.T.fexp = Asm.S.P.T.fexp
++                            (* and type P.T.labexp = Asm.S.P.T.labexp *)
++                            and type P.T.mlrisc = Asm.S.P.T.mlrisc
++                            and type P.T.oper = Asm.S.P.T.oper
++                            and type P.T.rep = Asm.S.P.T.rep
++                            and type P.T.rexp = Asm.S.P.T.rexp
++                            and type P.T.stm = Asm.S.P.T.stm
++   structure InsnProps  : INSN_PROPERTIES (* where I = I *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
++   structure Rewrite    : REWRITE_INSTRUCTIONS (* where I = I *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
++   structure SpillInstr : ARCH_SPILL_INSTR (* where I = I *)
++                          where type I.addressing_mode = I.addressing_mode
++                            and type I.ea = I.ea
++                            and type I.instr = I.instr
++                            and type I.instruction = I.instruction
++                            and type I.operand = I.operand
+ 
+       (* Spilling heuristics determines which node should be spilled.
+        * You can use Chaitin, ChowHenessey, or one of your own.
+@@ -26,7 +66,12 @@ functor RISC_RA
+        * spill code.  You can use RASpill, or RASpillWithRenaming,
+        * or write your own if you are feeling adventurous.
+        *)
+-   structure Spill : RA_SPILL where I = I
++   structure Spill : RA_SPILL (* where I = I *)
++                     where type I.addressing_mode = I.addressing_mode
++                       and type I.ea = I.ea
++                       and type I.instr = I.instr
++                       and type I.instruction = I.instruction
++                       and type I.operand = I.operand
+           
+    val architecture : string
+ 
+@@ -85,9 +130,9 @@ struct
+    (* The generic register allocator *)
+    structure Ra =
+       RegisterAllocator
+-        (SpillHeur) 
++        (structure SpillHeuristics = SpillHeur
+         (* (ChowHennessySpillHeur) *)
+-        (ClusterRA 
++         structure Flowgraph = ClusterRA
+           (structure Flowgraph = CFG
+            structure Asm = Asm
+            structure InsnProps = InsnProps
+diff --git a/sparc/backpatch/sparcDelaySlotProps.sml b/sparc/backpatch/sparcDelaySlotProps.sml
+index e552cd8..5897411 100644
+--- a/sparc/backpatch/sparcDelaySlotProps.sml
++++ b/sparc/backpatch/sparcDelaySlotProps.sml
+@@ -1,6 +1,11 @@
+ functor SparcDelaySlots
+    (structure I : SPARCINSTR
+-    structure P : INSN_PROPERTIES where I = I
++    structure P : INSN_PROPERTIES (* where I = I *)
++                  where type I.addressing_mode = I.addressing_mode
++                    and type I.ea = I.ea
++                    and type I.instr = I.instr
++                    and type I.instruction = I.instruction
++                    and type I.operand = I.operand
+     (* sharing/defn conflict:   sharing P.I = I*)
+    ) : DELAY_SLOT_PROPERTIES =
+ struct
+@@ -113,10 +118,16 @@ struct
+             clash(toSL defUseOther)
+         end
+ 
+-    fun delaySlotCandidate{jmp,delaySlot=
+-              (  I.INSTR(I.CALL _) | I.INSTR(I.Bicc _) | I.INSTR(I.FBfcc _) 
+-               | I.INSTR(I.Ticc _) | I.INSTR(I.BR _) | I.INSTR(I.JMP _) | I.INSTR(I.JMPL _) 
+-	       | I.INSTR(I.RET _) | I.INSTR(I.BP _) | I.INSTR(I.FCMP _))} = false
++    fun delaySlotCandidate{jmp,delaySlot=I.INSTR(I.CALL _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.Bicc _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FBfcc _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.Ticc _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BR _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.JMP _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.JMPL _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.RET _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BP _)} = false
++      | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FCMP _)} = false
+       | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
+            delaySlotCandidate{jmp=i,delaySlot=delaySlot}
+       | delaySlotCandidate{jmp,delaySlot=I.ANNOTATION{i,...}} = 
+diff --git a/sparc/backpatch/sparcJumps.sml b/sparc/backpatch/sparcJumps.sml
+index 43763bd..099dfea 100644
+--- a/sparc/backpatch/sparcJumps.sml
++++ b/sparc/backpatch/sparcJumps.sml
+@@ -5,8 +5,67 @@
+  *)
+ functor SparcJumps
+   (structure Instr:SPARCINSTR
+-   structure Shuffle:SPARCSHUFFLE where I = Instr
+-   structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++   structure Shuffle:SPARCSHUFFLE (* where I = Instr *)
++                     where type I.Constant.const = Instr.Constant.const
++                       and type I.Region.region = Instr.Region.region
++                       and type I.T.Basis.cond = Instr.T.Basis.cond
++                       and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                       and type I.T.Basis.ext = Instr.T.Basis.ext
++                       and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                       and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                       and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                       and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                       and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                       and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                       and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                       and type I.T.ccexp = Instr.T.ccexp
++                       and type I.T.fexp = Instr.T.fexp
++                       (* and type I.T.labexp = Instr.T.labexp *)
++                       and type I.T.mlrisc = Instr.T.mlrisc
++                       and type I.T.oper = Instr.T.oper
++                       and type I.T.rep = Instr.T.rep
++                       and type I.T.rexp = Instr.T.rexp
++                       and type I.T.stm = Instr.T.stm
++                       and type I.arith = Instr.arith
++                       and type I.branch = Instr.branch
++                       and type I.cc = Instr.cc
++                       and type I.ea = Instr.ea
++                       and type I.farith1 = Instr.farith1
++                       and type I.farith2 = Instr.farith2
++                       and type I.fbranch = Instr.fbranch
++                       and type I.fcmp = Instr.fcmp
++                       and type I.fload = Instr.fload
++                       and type I.fsize = Instr.fsize
++                       and type I.fstore = Instr.fstore
++                       and type I.instr = Instr.instr
++                       and type I.instruction = Instr.instruction
++                       and type I.load = Instr.load
++                       and type I.operand = Instr.operand
++                       and type I.prediction = Instr.prediction
++                       and type I.rcond = Instr.rcond
++                       and type I.shift = Instr.shift
++                       and type I.store = Instr.store
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
+   ) : SDI_JUMPS = 
+ struct
+   structure I = Instr
+@@ -51,7 +110,9 @@ struct
+ 	    | I.SAVE{i,...} => oper i
+ 	    | I.RESTORE{i,...} => oper i
+ 	    (* The following is only true of Version 8 *)
+-	    | I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd), ...} => true
++	    | I.FPop1{a=I.FMOVd, ...} => true
++	    | I.FPop1{a=I.FNEGd, ...} => true
++	    | I.FPop1{a=I.FABSd, ...} => true
+ 	    | _ => false
+ 	end
+ 
+@@ -70,11 +131,15 @@ struct
+ 	 | (I.BP{nop=true,...}) => 8
+ 	 | (I.RET{nop=true,...}) => 8
+ 	 | (I.FCMP{nop=true,...}) => 8
+-	 | (I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...}) => 8
++	 | (I.FPop1{a=I.FMOVd,...}) => 8
++	 | (I.FPop1{a=I.FNEGd,...}) => 8
++	 | (I.FPop1{a=I.FABSd,...}) => 8
+ 	 |  _          => 4
+       (*esac*))
+ 
+-  fun maxSize (I.INSTR(I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...})) = 8
++  fun maxSize (I.INSTR(I.FPop1{a=I.FMOVd,...})) = 8
++    | maxSize (I.INSTR(I.FPop1{a=I.FNEGd,...})) = 8
++    | maxSize (I.INSTR(I.FPop1{a=I.FABSd,...})) = 8
+     | maxSize (I.ANNOTATION{i,...}) = maxSize i
+     | maxSize _		   = 4
+ 
+@@ -85,7 +150,11 @@ struct
+   fun immed30 n = ~0x4000000 <= n andalso n < 0x3ffffff
+ 
+   fun instrLength([],n) = n
+-    | instrLength(I.INSTR(I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...})::is,n) =
++    | instrLength(I.INSTR(I.FPop1{a=I.FMOVd,...})::is,n) =
++        instrLength(is,n+8)
++    | instrLength(I.INSTR(I.FPop1{a=I.FNEGd,...})::is,n) =
++        instrLength(is,n+8)
++    | instrLength(I.INSTR(I.FPop1{a=I.FABSd,...})::is,n) =
+         instrLength(is,n+8)
+     | instrLength(_::is,n) = instrLength(is,n+4)
+ 
+@@ -135,7 +204,9 @@ struct
+ 	  | I.BP{label,nop,...} => branch19 label + delaySlot nop
+ 	  | I.CALL{label,...} => call label
+ 	  | I.WRY{i,...} => oper(i,12)
+- 	  | I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...} => 8	    
++ 	  | I.FPop1{a=I.FMOVd,...} => 8
++ 	  | I.FPop1{a=I.FNEGd,...} => 8
++ 	  | I.FPop1{a=I.FABSd,...} => 8
+ 	  | _ => error "sdiSize"
+       end
+     | sdiSize _ = error "sdiSize"
+@@ -207,10 +278,15 @@ struct
+ 	| (I.FBfcc _,8) => [instr]
+ 	| (I.BR _,8) => [instr]
+ 	| (I.BP _,8) => [instr]
+-	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},(12 | 16)) => 
++	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},12) =>
+ 	    expandImm(i,I.JMPL{r=r,i=I.REG C.asmTmpR,d=d,defs=defs,uses=uses,
+ 			       cutsTo=cutsTo,nop=nop,mem=mem})
+-	| (I.JMP{r,i,labs,nop},(12 | 16)) => 
++	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},16) =>
++	    expandImm(i,I.JMPL{r=r,i=I.REG C.asmTmpR,d=d,defs=defs,uses=uses,
++			       cutsTo=cutsTo,nop=nop,mem=mem})
++	| (I.JMP{r,i,labs,nop},12) =>
++	    expandImm(i,I.JMP{r=r,i=I.REG C.asmTmpR,labs=labs,nop=nop})
++	| (I.JMP{r,i,labs,nop},16) =>
+ 	    expandImm(i,I.JMP{r=r,i=I.REG C.asmTmpR,labs=labs,nop=nop})
+ 	| (I.Ticc{t,cc,r,i},12) =>
+ 	    expandImm(i,I.Ticc{t=t,cc=cc,r=r,i=I.REG C.asmTmpR})
+diff --git a/sparc/c-calls/sparc-c-calls.sml b/sparc/c-calls/sparc-c-calls.sml
+index 6a27f75..413756f 100644
+--- a/sparc/c-calls/sparc-c-calls.sml
++++ b/sparc/c-calls/sparc-c-calls.sml
+@@ -105,15 +105,21 @@ struct
+     fun roundup (i, a) = a * ((i + a - 1) div a)
+ 
+     (* calculate size and alignment for a C type *)
+-    fun szal (Ty.C_void | Ty.C_float | Ty.C_PTR |
+-	      Ty.C_signed (Ty.I_int | Ty.I_long) |
+-	      Ty.C_unsigned (Ty.I_int | Ty.I_long)) = (4, 4)
+-      | szal (Ty.C_double |
+-	      Ty.C_signed Ty.I_long_long |
+-	      Ty.C_unsigned Ty.I_long_long) = (8, 8)
++    fun szal Ty.C_void = (4, 4)
++      | szal Ty.C_float = (4, 4)
++      | szal Ty.C_PTR = (4, 4)
++      | szal (Ty.C_signed Ty.I_int) = (4, 4)
++      | szal (Ty.C_signed Ty.I_long) = (4, 4)
++      | szal (Ty.C_unsigned Ty.I_int) = (4, 4)
++      | szal (Ty.C_unsigned Ty.I_long) = (4, 4)
++      | szal Ty.C_double = (8, 8)
++      | szal (Ty.C_signed Ty.I_long_long) = (8, 8)
++      | szal (Ty.C_unsigned Ty.I_long_long) = (8, 8)
+       | szal (Ty.C_long_double) = (16, 8)
+-      | szal (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) = (1, 1)
+-      | szal (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) = (2, 2)
++      | szal (Ty.C_signed Ty.I_char) = (1, 1)
++      | szal (Ty.C_unsigned Ty.I_char) = (1, 1)
++      | szal (Ty.C_signed Ty.I_short) = (2, 2)
++      | szal (Ty.C_unsigned Ty.I_short) = (2, 2)
+       | szal (Ty.C_ARRAY (t, n)) = let val (s, a) = szal t in (n * s, a) end
+       | szal (Ty.C_STRUCT l) =
+ 	let (* i: next free memory address (relative to struct start);
+@@ -183,21 +189,24 @@ struct
+ 		  callComment, args } = let
+ 	val { conv, retTy, paramTys } = proto
+ 	val _ = case conv of
+-		    ("" | "ccall") => ()
++		    "" => ()
++		  | "ccall" => ()
+ 		  | _ => error (concat ["unknown calling convention \"",
+ 					String.toString conv, "\""])
+ 	val res_szal =
+ 	    case retTy of
+-		(Ty.C_long_double | Ty.C_STRUCT _ | Ty.C_UNION _) =>
+-		  SOME (szal retTy)
++		Ty.C_long_double => SOME (szal retTy)
++	      | Ty.C_STRUCT _ => SOME (szal retTy)
++	      | Ty.C_UNION _ => SOME (szal retTy)
+ 	      | _ => NONE
+ 
+ 	val nargwords = let
+ 	    fun loop ([], n) = n
+ 	      | loop (t :: tl, n) =
+ 		loop (tl, (case t of
+-			       (Ty.C_double | Ty.C_signed Ty.I_long_long |
+-				Ty.C_unsigned Ty.I_long_long) => 2
++			       Ty.C_double => 2
++			     | (Ty.C_signed Ty.I_long_long) => 2
++			     | (Ty.C_unsigned Ty.I_long_long) => 2
+ 			     | _ => 1) + n)
+ 	in
+ 	    loop (paramTys, 0)
+@@ -225,17 +234,21 @@ struct
+ 		    T.STORE (ty, addli (spreg, to_off), a, stack) :: cpc
+ 	    in
+ 		case t of
+-		    (Ty.C_void | Ty.C_PTR |
+-		     Ty.C_signed (Ty.I_int | Ty.I_long) |
+-		     Ty.C_unsigned (Ty.I_int | Ty.I_long)) => ldst 32
+-		  | (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) => ldst 8
+-		  | (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) =>
+-		    ldst 16
+-		  | (Ty.C_signed Ty.I_long_long |
+-		     Ty.C_unsigned Ty.I_long_long) => ldst 64
++		    Ty.C_void => ldst 32
++		  | Ty.C_PTR => ldst 32
++		  | (Ty.C_signed Ty.I_int) => ldst 32
++		  | (Ty.C_signed Ty.I_long) => ldst 32
++		  | (Ty.C_unsigned Ty.I_int) => ldst 32
++		  | (Ty.C_unsigned Ty.I_long) => ldst 32
++		  | (Ty.C_signed Ty.I_char) => ldst 8
++		  | (Ty.C_unsigned Ty.I_char) => ldst 8
++		  | (Ty.C_signed Ty.I_short) => ldst 16
++		  | (Ty.C_unsigned Ty.I_short) => ldst 16
++		  | (Ty.C_signed Ty.I_long_long) => ldst 64
++		  | (Ty.C_unsigned Ty.I_long_long) => ldst 64
+ 		  | (Ty.C_ARRAY _) =>
+ 		    error "ARRAY within gather/scatter struct"
+-		  | (Ty.C_STRUCT _ | Ty.C_UNION _) =>
++		  | (Ty.C_STRUCT _) =>
+ 		    (* Here we have to do the equivalent of a "memcpy". *)
+ 		    let val from = a (* argument is address of struct *)
+ 			fun cp (ty, incr) = let
+@@ -260,8 +273,34 @@ struct
+ 			  | 2 => cp (16, 2)
+ 			  | _ => (* 4 or more *) cp (32, 4)
+ 		    end
+-		  | (Ty.C_float | Ty.C_double | Ty.C_long_double) =>
+-		    error "floating point type does not match ARG"
++		  | (Ty.C_UNION _) =>
++		    (* Here we have to do the equivalent of a "memcpy". *)
++		    let val from = a (* argument is address of struct *)
++			fun cp (ty, incr) = let
++			    fun load_from from_off =
++				T.LOAD (32, addli (from, from_off), mem)
++			    (* from_off is relative to from,
++			     * to_off is relative to %sp *)
++			    fun loop (i, from_off, to_off, cpc) =
++				if i <= 0 then cpc
++				else loop (i - incr,
++					   from_off + incr, to_off + incr,
++					   T.STORE (ty, addli (spreg, to_off),
++						    load_from from_off,
++						    stack)
++					   :: cpc)
++			in
++			    loop (sz, 0, to_off, cpc)
++			end
++		    in
++			case al of
++			    1 => cp (8, 1)
++			  | 2 => cp (16, 2)
++			  | _ => (* 4 or more *) cp (32, 4)
++		    end
++		  | Ty.C_float => error "floating point type does not match ARG"
++		  | Ty.C_double => error "floating point type does not match ARG"
++		  | Ty.C_long_double => error "floating point type does not match ARG"
+ 	    end
+ (*
+ 	  | struct_copy (_, _, ARGS args, Ty.C_STRUCT tl, to_off, cpc) =
+@@ -334,10 +373,13 @@ struct
+ 			else dwordmemarg (tmpaddr, stack, [mkstore tmpaddr])
+ 		in
+ 		    case (t, a) of
+-			((Ty.C_void | Ty.C_PTR | Ty.C_ARRAY _ |
+-			  Ty.C_unsigned (Ty.I_int | Ty.I_long) |
+-			  Ty.C_signed (Ty.I_int | Ty.I_long)),
+-			 ARG a) => wordarg (a, cpc, ss)
++			(Ty.C_void, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_PTR, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_ARRAY _, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_unsigned Ty.I_int, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_unsigned Ty.I_long, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_signed Ty.I_int, ARG a) => wordarg (a, cpc, ss)
++		      | (Ty.C_signed Ty.I_long, ARG a) => wordarg (a, cpc, ss)
+ 		      | (Ty.C_signed Ty.I_char, ARG a) =>
+ 			wordarg (T.SX (32, 8, a), cpc, ss)
+ 		      | (Ty.C_unsigned Ty.I_char, ARG a) =>
+@@ -346,8 +388,13 @@ struct
+ 			wordarg (T.SX (32, 16, a), cpc, ss)
+ 		      | (Ty.C_unsigned Ty.I_short, ARG a) =>
+ 			wordarg (T.ZX (32, 16, a), cpc, ss)
+-		      | ((Ty.C_signed Ty.I_long_long |
+-			  Ty.C_unsigned Ty.I_long_long), ARG a) =>
++		      | (Ty.C_signed Ty.I_long_long, ARG a) =>
++			(case a of
++			     T.LOAD (_, addr, region) =>
++			     dwordmemarg (addr, region, [])
++			   | _ => dwordarg (fn addr =>
++					       T.STORE (64, addr, a, stack)))
++		      | (Ty.C_unsigned Ty.I_long_long, ARG a) =>
+ 			(case a of
+ 			     T.LOAD (_, addr, region) =>
+ 			     dwordmemarg (addr, region, [])
+@@ -390,7 +437,20 @@ struct
+ 				     T.FSTORE (128, ssaddr, a, stack) :: cpc,
+ 				     ss' + 16)
+ 			end
+-		      | (t as (Ty.C_STRUCT _ | Ty.C_UNION _), a) => let
++		      | (t as (Ty.C_STRUCT _), a) => let
++			    (* copy entire struct into scratch space
++			     * (aligned according to struct's alignment
++			     * requirements).  The address of the scratch
++			     * copy is then passed as a regular 32-bit
++			     * argument. *)
++			    val (sz, al) = szal t
++			    val ss' = roundup (ss, al)
++			    val ssaddr = addli (spreg, ss')
++			    val cpc' = struct_copy (sz, al, a, t, ss', cpc)
++			in
++			    wordarg (ssaddr, cpc', ss' + sz)
++			end
++		      | (t as (Ty.C_UNION _), a) => let
+ 			    (* copy entire struct into scratch space
+ 			     * (aligned according to struct's alignment
+ 			     * requirements).  The address of the scratch
+@@ -437,17 +497,32 @@ struct
+ 		Ty.C_float => [T.FPR (T.FREG (32, FP 0))]
+ 	      | Ty.C_double => [T.FPR (T.FREG (64, FP 0))] (* %f0/%f1 *)
+ 	      | Ty.C_long_double => []
+-	      | (Ty.C_STRUCT _ | Ty.C_UNION _) => []
++	      | (Ty.C_STRUCT _) => []
++	      | (Ty.C_UNION _) => []
+ 	      | Ty.C_ARRAY _ => error "array return type"
+-	      | (Ty.C_PTR | Ty.C_void |
+-		 Ty.C_signed (Ty.I_int | Ty.I_long) |
+-		 Ty.C_unsigned (Ty.I_int | Ty.I_long)) =>
++	      | Ty.C_PTR =>
++		[T.GPR (T.REG (32, oreg 0))]
++	      | Ty.C_void =>
++		[T.GPR (T.REG (32, oreg 0))]
++	      | Ty.C_signed Ty.I_int =>
+ 		[T.GPR (T.REG (32, oreg 0))]
+-	      | (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) =>
++	      | Ty.C_signed Ty.I_long =>
++		[T.GPR (T.REG (32, oreg 0))]
++	      | Ty.C_unsigned Ty.I_int =>
++		[T.GPR (T.REG (32, oreg 0))]
++	      | Ty.C_unsigned Ty.I_long =>
++		[T.GPR (T.REG (32, oreg 0))]
++	      | Ty.C_signed Ty.I_char =>
+ 		[T.GPR (T.REG (8, oreg 0))]
+-	      | (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) =>
++	      | Ty.C_unsigned Ty.I_char =>
++		[T.GPR (T.REG (8, oreg 0))]
++	      | Ty.C_signed Ty.I_short =>
++		[T.GPR (T.REG (16, oreg 0))]
++	      | Ty.C_unsigned Ty.I_short =>
+ 		[T.GPR (T.REG (16, oreg 0))]
+-	      | (Ty.C_signed Ty.I_long_long | Ty.C_unsigned Ty.I_long_long) =>
++	      | Ty.C_signed Ty.I_long_long =>
++		[T.GPR (T.REG (64, oreg 0))]
++	      | Ty.C_unsigned Ty.I_long_long =>
+ 		[T.GPR (T.REG (64, oreg 0))]
+ 
+ 	val { save, restore } = saveRestoreDedicated defs
+diff --git a/sparc/emit/sparcAsm.sml b/sparc/emit/sparcAsm.sml
+index 821445a..bd88ce1 100644
+--- a/sparc/emit/sparcAsm.sml
++++ b/sparc/emit/sparcAsm.sml
+@@ -6,12 +6,88 @@
+ 
+ 
+ functor SparcAsmEmitter(structure S : INSTRUCTION_STREAM
+-                        structure Instr : SPARCINSTR
+-                           where T = S.P.T
+-                        structure Shuffle : SPARCSHUFFLE
+-                           where I = Instr
+-                        structure MLTreeEval : MLTREE_EVAL
+-                           where T = Instr.T
++                        structure Instr : SPARCINSTR (* where T = S.P.T *)
++                                          where type T.Basis.cond = S.P.T.Basis.cond
++                                            and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                            and type T.Basis.ext = S.P.T.Basis.ext
++                                            and type T.Basis.fcond = S.P.T.Basis.fcond
++                                            and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                            and type T.Constant.const = S.P.T.Constant.const
++                                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                            and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                            and type T.Region.region = S.P.T.Region.region
++                                            and type T.ccexp = S.P.T.ccexp
++                                            and type T.fexp = S.P.T.fexp
++                                            (* and type T.labexp = S.P.T.labexp *)
++                                            and type T.mlrisc = S.P.T.mlrisc
++                                            and type T.oper = S.P.T.oper
++                                            and type T.rep = S.P.T.rep
++	                                    and type T.rexp = S.P.T.rexp
++                                            and type T.stm = S.P.T.stm
++                        structure Shuffle : SPARCSHUFFLE (* where I = Instr *)
++                                            where type I.Constant.const = Instr.Constant.const
++                                              and type I.Region.region = Instr.Region.region
++                                              and type I.T.Basis.cond = Instr.T.Basis.cond
++                                              and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                              and type I.T.Basis.ext = Instr.T.Basis.ext
++                                              and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                              and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                              and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                              and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                              and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                              and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                              and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                              and type I.T.ccexp = Instr.T.ccexp
++                                              and type I.T.fexp = Instr.T.fexp
++                                              (* and type I.T.labexp = Instr.T.labexp *)
++                                              and type I.T.mlrisc = Instr.T.mlrisc
++                                              and type I.T.oper = Instr.T.oper
++                                              and type I.T.rep = Instr.T.rep
++                                              and type I.T.rexp = Instr.T.rexp
++                                              and type I.T.stm = Instr.T.stm
++                                              and type I.arith = Instr.arith
++                                              and type I.branch = Instr.branch
++                                              and type I.cc = Instr.cc
++                                              and type I.ea = Instr.ea
++                                              and type I.farith1 = Instr.farith1
++                                              and type I.farith2 = Instr.farith2
++                                              and type I.fbranch = Instr.fbranch
++                                              and type I.fcmp = Instr.fcmp
++                                              and type I.fload = Instr.fload
++                                              and type I.fsize = Instr.fsize
++                                              and type I.fstore = Instr.fstore
++                                              and type I.instr = Instr.instr
++                                              and type I.instruction = Instr.instruction
++                                              and type I.load = Instr.load
++                                              and type I.operand = Instr.operand
++                                              and type I.prediction = Instr.prediction
++                                              and type I.rcond = Instr.rcond
++                                              and type I.shift = Instr.shift
++                                              and type I.store = Instr.store
++                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                               where type T.Basis.cond = Instr.T.Basis.cond
++                                                 and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                                 and type T.Basis.ext = Instr.T.Basis.ext
++                                                 and type T.Basis.fcond = Instr.T.Basis.fcond
++                                                 and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                                 and type T.Constant.const = Instr.T.Constant.const
++                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                                 and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                                 and type T.Region.region = Instr.T.Region.region
++                                                 and type T.ccexp = Instr.T.ccexp
++                                                 and type T.fexp = Instr.T.fexp
++                                                 (* and type T.labexp = Instr.T.labexp *)
++                                                 and type T.mlrisc = Instr.T.mlrisc
++                                                 and type T.oper = Instr.T.oper
++                                                 and type T.rep = Instr.T.rep
++                                                 and type T.rexp = Instr.T.rexp
++                                                 and type T.stm = Instr.T.stm
+ 
+ (*#line 466.21 "sparc/sparc.mdl"*)
+                         val V9 : bool
+diff --git a/sparc/emit/sparcMC.sml b/sparc/emit/sparcMC.sml
+index 4aa4e00..079645d 100644
+--- a/sparc/emit/sparcMC.sml
++++ b/sparc/emit/sparcMC.sml
+@@ -6,7 +6,27 @@
+ 
+ 
+ functor SparcMCEmitter(structure Instr : SPARCINSTR
+-                       structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                              where type T.Basis.cond = Instr.T.Basis.cond
++                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                                and type T.Basis.ext = Instr.T.Basis.ext
++                                                and type T.Basis.fcond = Instr.T.Basis.fcond
++                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                                and type T.Constant.const = Instr.T.Constant.const
++                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                                and type T.Region.region = Instr.T.Region.region
++                                                and type T.ccexp = Instr.T.ccexp
++                                                and type T.fexp = Instr.T.fexp
++                                                (* and type T.labexp = Instr.T.labexp *)
++                                                and type T.mlrisc = Instr.T.mlrisc
++                                                and type T.oper = Instr.T.oper
++                                                and type T.rep = Instr.T.rep
++                                                and type T.rexp = Instr.T.rexp
++                                                and type T.stm = Instr.T.stm
+                        structure Stream : INSTRUCTION_STREAM 
+                        structure CodeString : CODE_STRING
+                       ) : INSTRUCTION_EMITTER =
+@@ -47,6 +67,7 @@ struct
+        (* note: fromLargeWord strips the high order bits! *)
+        fun eByteW w =
+        let val i = !loc
++           val w = W.toLargeWord w
+        in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
     
-    val spillToEA :
-diff -N -C 2 -r MLRISC/ra/chaitin-spillheur2.sml MLRISC-mlton/ra/chaitin-spillheur2.sml
-*** MLRISC/ra/chaitin-spillheur2.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/chaitin-spillheur2.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 36,40 ****
-              let fun loop([], savings) = 
-                       foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
-!                   | loop(MV{status=ref(WORKLIST | GEORGE_MOVE | BRIGGS_MOVE),
-                              dst, src, cost, ...}::mvs, savings) = 
-                      let fun add(c,[]) = [(c,cost)]
---- 36,68 ----
-              let fun loop([], savings) = 
-                       foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
-!                   | loop(MV{status=ref WORKLIST,
-!                             dst, src, cost, ...}::mvs, savings) = 
-!                     let fun add(c,[]) = [(c,cost)]
-!                           | add(c,(x as (c':int,s))::savings) =
-!                              if c = c' then (c',s+cost)::savings 
-!                              else x::add(c,savings)
-!                         val savings =
-!                            case chase dst of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ =>
-!                            case chase src of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ => savings
-!                    in  loop(mvs, savings) end
-!                   | loop(MV{status=ref GEORGE_MOVE,
-!                             dst, src, cost, ...}::mvs, savings) = 
-!                     let fun add(c,[]) = [(c,cost)]
-!                           | add(c,(x as (c':int,s))::savings) =
-!                              if c = c' then (c',s+cost)::savings 
-!                              else x::add(c,savings)
-!                         val savings =
-!                            case chase dst of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ =>
-!                            case chase src of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ => savings
-!                    in  loop(mvs, savings) end
-!                   | loop(MV{status=ref BRIGGS_MOVE,
-                              dst, src, cost, ...}::mvs, savings) = 
-                      let fun add(c,[]) = [(c,cost)]
-diff -N -C 2 -r MLRISC/ra/chow-hennessy-spillheur2.sml MLRISC-mlton/ra/chow-hennessy-spillheur2.sml
-*** MLRISC/ra/chow-hennessy-spillheur2.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/chow-hennessy-spillheur2.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 33,37 ****
-              let fun loop([], savings) = 
-                       foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
-!                   | loop(MV{status=ref(WORKLIST | GEORGE_MOVE | BRIGGS_MOVE),
-                              dst, src, cost, ...}::mvs, savings) = 
-                      let fun add(c,[]) = [(c,cost)]
---- 33,65 ----
-              let fun loop([], savings) = 
-                       foldr (fn ((_,a),b) => Real.max(a,b)) 0.0 savings
-!                   | loop(MV{status=ref WORKLIST,
-!                             dst, src, cost, ...}::mvs, savings) = 
-!                     let fun add(c,[]) = [(c,cost)]
-!                           | add(c,(x as (c':int,s))::savings) =
-!                              if c = c' then (c',s+cost)::savings 
-!                              else x::add(c,savings)
-!                         val savings =
-!                            case chase dst of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ =>
-!                            case chase src of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ => savings
-!                    in  loop(mvs, savings) end
-!                   | loop(MV{status=ref GEORGE_MOVE,
-!                             dst, src, cost, ...}::mvs, savings) = 
-!                     let fun add(c,[]) = [(c,cost)]
-!                           | add(c,(x as (c':int,s))::savings) =
-!                              if c = c' then (c',s+cost)::savings 
-!                              else x::add(c,savings)
-!                         val savings =
-!                            case chase dst of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ =>
-!                            case chase src of
-!                              NODE{color=ref(COLORED c), ...} => add(c,savings)
-!                            | _ => savings
-!                    in  loop(mvs, savings) end
-!                   | loop(MV{status=ref BRIGGS_MOVE,
-                              dst, src, cost, ...}::mvs, savings) = 
-                      let fun add(c,[]) = [(c,cost)]
-diff -N -C 2 -r MLRISC/ra/cluster-ra.sml MLRISC-mlton/ra/cluster-ra.sml
-*** MLRISC/ra/cluster-ra.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/cluster-ra.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 15,25 ****
-  functor ClusterRA
-     (structure Asm       : INSTRUCTION_EMITTER
-!     structure Flowgraph : CONTROL_FLOW_GRAPH
-!     			where I = Asm.I 
-! 			  and P = Asm.S.P
-!     structure InsnProps : INSN_PROPERTIES
-!     			where I = Flowgraph.I 
-!     structure Spill : RA_SPILL 
-!     			where I = Flowgraph.I
-     ) : RA_FLOWGRAPH =
-  struct
---- 15,57 ----
-  functor ClusterRA
-     (structure Asm       : INSTRUCTION_EMITTER
-!     structure Flowgraph : CONTROL_FLOW_GRAPH (* where I = Asm.I and P = Asm.S.P *)
-!                           where type I.addressing_mode = Asm.I.addressing_mode
-!                             and type I.ea = Asm.I.ea
-!                             and type I.instr = Asm.I.instr
-!                             and type I.instruction = Asm.I.instruction
-!                             and type I.operand = Asm.I.operand
-!                           where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
-!                             and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
-!                             and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
-!                             and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
-!                             and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
-!                             and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
-!                             and type P.T.Constant.const = Asm.S.P.T.Constant.const
-!                             and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
-!                             and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
-!                             and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
-!                             and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
-!                             and type P.T.Region.region = Asm.S.P.T.Region.region
-!                             and type P.T.ccexp = Asm.S.P.T.ccexp
-!                             and type P.T.fexp = Asm.S.P.T.fexp
-!                             (* and type P.T.labexp = Asm.S.P.T.labexp *)
-!                             and type P.T.mlrisc = Asm.S.P.T.mlrisc
-!                             and type P.T.oper = Asm.S.P.T.oper
-!                             and type P.T.rep = Asm.S.P.T.rep
-!                             and type P.T.rexp = Asm.S.P.T.rexp
-!                             and type P.T.stm = Asm.S.P.T.stm
-!     structure InsnProps : INSN_PROPERTIES (* where I = Flowgraph.I *)
-!                           where type I.addressing_mode = Flowgraph.I.addressing_mode
-!                             and type I.ea = Flowgraph.I.ea
-!                             and type I.instr = Flowgraph.I.instr
-!                             and type I.instruction = Flowgraph.I.instruction
-!                             and type I.operand = Flowgraph.I.operand
-!     structure Spill     : RA_SPILL (* where I = Flowgraph.I *)
-!                           where type I.addressing_mode = Flowgraph.I.addressing_mode
-!                             and type I.ea = Flowgraph.I.ea
-!                             and type I.instr = Flowgraph.I.instr
-!                             and type I.instruction = Flowgraph.I.instruction
-!                             and type I.operand = Flowgraph.I.operand
-     ) : RA_FLOWGRAPH =
-  struct
-diff -N -C 2 -r MLRISC/ra/mem-ra.sml MLRISC-mlton/ra/mem-ra.sml
-*** MLRISC/ra/mem-ra.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/mem-ra.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 52,56 ****
-  	| collectMoves(NODE{movelist, color, ...}::ns, mv') = let
-  	    fun ins([], mv') = collectMoves(ns, mv')
-! 	      | ins(MV{status=ref(COALESCED | CONSTRAINED), ...}::mvs, mv') = 
-  		  ins(mvs, mv')
-  	      | ins((mv as MV{dst, src, ...})::mvs, mv') = let
---- 52,58 ----
-  	| collectMoves(NODE{movelist, color, ...}::ns, mv') = let
-  	    fun ins([], mv') = collectMoves(ns, mv')
-! 	      | ins(MV{status=ref COALESCED, ...}::mvs, mv') = 
-! 		  ins(mvs, mv')
-! 	      | ins(MV{status=ref CONSTRAINED, ...}::mvs, mv') = 
-  		  ins(mvs, mv')
-  	      | ins((mv as MV{dst, src, ...})::mvs, mv') = let
-***************
-*** 93,97 ****
-  				   number=t, ...})::adjDst, adjSrc) = 
-  		  (case !color of
-! 		     (SPILLED | MEMREG _ | SPILL_LOC _ | PSEUDO) =>
-  		       if addEdge(s, t) then 
-  			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
---- 95,111 ----
-  				   number=t, ...})::adjDst, adjSrc) = 
-  		  (case !color of
-! 		     SPILLED =>
-! 		       if addEdge(s, t) then 
-! 			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
-! 		       else union(adjDst, adjSrc)
-! 		   | MEMREG _ =>
-! 		       if addEdge(s, t) then 
-! 			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
-! 		       else union(adjDst, adjSrc)
-! 		   | SPILL_LOC _ =>
-! 		       if addEdge(s, t) then 
-! 			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
-! 		       else union(adjDst, adjSrc)
-! 		   | PSEUDO =>
-  		       if addEdge(s, t) then 
-  			  (adjT := src :: !adjT; union(adjDst, n::adjSrc))
-***************
-*** 156,160 ****
-  
-            fun moveSavings([], pinned, total) = (pinned, total+total)
-!             | moveSavings(MV{status=ref(CONSTRAINED | COALESCED), ...}::mvs,
-                            pinned, total) = 
-                   moveSavings(mvs, pinned, total)
---- 170,177 ----
-  
-            fun moveSavings([], pinned, total) = (pinned, total+total)
-!             | moveSavings(MV{status=ref CONSTRAINED, ...}::mvs,
-!                           pinned, total) = 
-!                  moveSavings(mvs, pinned, total)
-!             | moveSavings(MV{status=ref COALESCED, ...}::mvs,
-                            pinned, total) = 
-                   moveSavings(mvs, pinned, total)
-diff -N -C 2 -r MLRISC/ra/ra-core.sig MLRISC-mlton/ra/ra-core.sig
-*** MLRISC/ra/ra-core.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-core.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 12,16 ****
-  sig
-  
-!    structure G  : RA_GRAPH = RAGraph
-     structure BM : RA_BITMATRIX
-     structure MV : RA_PRIORITY_QUEUE where type elem = G.move
---- 12,35 ----
-  sig
-  
-!    structure G  : RA_GRAPH (* = RAGraph *)
-!                   where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
-!                     and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
-!                     and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
-!                     and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
-!                     and type C.cell = RAGraph.C.cell
-!                     and type C.cellColor = RAGraph.C.cellColor
-!                     and type C.cellkind = RAGraph.C.cellkind
-!                     and type C.cellkindDesc = RAGraph.C.cellkindDesc
-!                     and type C.cellkindInfo = RAGraph.C.cellkindInfo
-!                     and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
-!                     and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
-!                     and type interferenceGraph = RAGraph.interferenceGraph
-!                     and type move = RAGraph.move
-!                     and type moveKind = RAGraph.moveKind
-!                     and type moveStatus = RAGraph.moveStatus
-!                     and type node = RAGraph.node
-!                     and type nodeStatus = RAGraph.nodeStatus
-!                     and type spillLoc = RAGraph.spillLoc
-!                     and type trailInfo = RAGraph.trailInfo
-     structure BM : RA_BITMATRIX
-     structure MV : RA_PRIORITY_QUEUE where type elem = G.move
-diff -N -C 2 -r MLRISC/ra/ra-core.sml MLRISC-mlton/ra/ra-core.sml
-*** MLRISC/ra/ra-core.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-core.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 164,168 ****
-    let fun pr s = TextIO.output(stream, s)
-        val show = show G
-!       fun prMove(MV{src, dst, status=ref(WORKLIST | BRIGGS_MOVE | GEORGE_MOVE),
-                      cost,...}) = 
-              pr(node2s(chase dst)^" <- "^node2s(chase src)^
---- 164,176 ----
-    let fun pr s = TextIO.output(stream, s)
-        val show = show G
-!       fun prMove(MV{src, dst, status=ref WORKLIST,
-!                     cost,...}) = 
-!             pr(node2s(chase dst)^" <- "^node2s(chase src)^
-!                "("^r2s(cost)^") ")
-!         | prMove(MV{src, dst, status=ref BRIGGS_MOVE,
-!                     cost,...}) = 
-!             pr(node2s(chase dst)^" <- "^node2s(chase src)^
-!                "("^r2s(cost)^") ")
-!         | prMove(MV{src, dst, status=ref GEORGE_MOVE,
-                      cost,...}) = 
-              pr(node2s(chase dst)^" <- "^node2s(chase src)^
-***************
-*** 542,546 ****
-                          ns, mv) = 
-                    (case !status of
-!                      (BRIGGS_MOVE | GEORGE_MOVE) => 
-                         (* decrements hi, when hi <= 0 enable move *)
-                         if hi <= 1 then
---- 550,560 ----
-                          ns, mv) = 
-                    (case !status of
-!                      BRIGGS_MOVE => 
-!                        (* decrements hi, when hi <= 0 enable move *)
-!                        if hi <= 1 then
-!                          (status := WORKLIST; addMv(rest, ns, MV.add(m, mv)))
-!                        else
-!                          (hicount := hi-1; addMv(rest, ns, mv))
-!                    | GEORGE_MOVE => 
-                         (* decrements hi, when hi <= 0 enable move *)
-                         if hi <= 1 then
-***************
-*** 624,628 ****
-                  * deg < K or else optimistic spilling must be in effect!
-                  *)
-!                NODE{degree,number,color=ref(PSEUDO | REMOVED), ...} => 
-                 if !degree < K orelse member(reg, number) then loop(adj, hi)
-                 else loop(adj, hi+1)
---- 638,645 ----
-                  * deg < K or else optimistic spilling must be in effect!
-                  *)
-!                NODE{degree,number,color=ref PSEUDO, ...} => 
-!                if !degree < K orelse member(reg, number) then loop(adj, hi)
-!                else loop(adj, hi+1)
-!              | NODE{degree,number,color=ref REMOVED, ...} => 
-                 if !degree < K orelse member(reg, number) then loop(adj, hi)
-                 else loop(adj, hi+1)
-***************
-*** 707,711 ****
-                     mv, fz, stack) =
-                (case !color of
-!                  (COLORED _ | SPILL_LOC _ | MEMREG _ | SPILLED) => 
-                     (addEdge(t, u); union(adj, mv, fz, stack))
-                 | PSEUDO =>
---- 724,734 ----
-                     mv, fz, stack) =
-                (case !color of
-!                  COLORED _ => 
-!                    (addEdge(t, u); union(adj, mv, fz, stack))
-!                | SPILL_LOC _ => 
-!                    (addEdge(t, u); union(adj, mv, fz, stack))
-!                | MEMREG _ => 
-!                    (addEdge(t, u); union(adj, mv, fz, stack))
-!                | SPILLED => 
-                     (addEdge(t, u); union(adj, mv, fz, stack))
-                 | PSEUDO =>
-***************
-*** 865,869 ****
-                case !status of 
-                  WORKLIST => error "elimMoves"
-!               | (BRIGGS_MOVE | GEORGE_MOVE) => (* mark move as lost *)
-                  let val _ = status := LOST
-                      val src as NODE{number=s,...} = chase src
---- 888,907 ----
-                case !status of 
-                  WORKLIST => error "elimMoves"
-!               | BRIGGS_MOVE => (* mark move as lost *)
-!                 let val _ = status := LOST
-!                     val src as NODE{number=s,...} = chase src
-!                     val you = if s = me then chase dst else src
-!                 in  case you of
-!                       NODE{color=ref(COLORED _),...} => 
-!                         elimMoves(mvs, simp)
-!                     | NODE{movecnt as ref c, degree, ...} => (* pseudo *)
-!                         (movecnt := c - 1; 
-!                          if c = 1 andalso !degree < K then 
-!                             elimMoves(mvs, you::simp)
-!                          else 
-!                             elimMoves(mvs, simp)
-!                         )
-!                 end
-!               | GEORGE_MOVE => (* mark move as lost *)
-                  let val _ = status := LOST
-                      val src as NODE{number=s,...} = chase src
-***************
-*** 1086,1090 ****
-                 *)
-                fun getPref([], pref) = pref
-!                 | getPref(MV{status=ref(LOST | BRIGGS_MOVE | GEORGE_MOVE), 
-                               src, dst, ...}::mvs, pref) =
-                    let val src as NODE{number=s,...} = chase src
---- 1124,1144 ----
-                 *)
-                fun getPref([], pref) = pref
-!                 | getPref(MV{status=ref LOST, 
-!                              src, dst, ...}::mvs, pref) =
-!                   let val src as NODE{number=s,...} = chase src
-!                       val other = if s = number then chase dst else src 
-!                   in  case other of
-!                         NODE{color=ref(COLORED c),...} => getPref(mvs, c::pref)
-!                       | _ => getPref(mvs, pref)
-!                   end
-!                 | getPref(MV{status=ref BRIGGS_MOVE, 
-!                              src, dst, ...}::mvs, pref) =
-!                   let val src as NODE{number=s,...} = chase src
-!                       val other = if s = number then chase dst else src 
-!                   in  case other of
-!                         NODE{color=ref(COLORED c),...} => getPref(mvs, c::pref)
-!                       | _ => getPref(mvs, pref)
-!                   end
-!                 | getPref(MV{status=ref GEORGE_MOVE, 
-                               src, dst, ...}::mvs, pref) =
-                    let val src as NODE{number=s,...} = chase src
-diff -N -C 2 -r MLRISC/ra/ra-deadCodeE.sml MLRISC-mlton/ra/ra-deadCodeE.sml
-*** MLRISC/ra/ra-deadCodeE.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-deadCodeE.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 7,13 ****
-   *)
-  
-! functor RADeadCodeElim
-!    (Flowgraph : RA_FLOWGRAPH)
-!    (  (* check for dead code on these cellkinds only *)
-      val cellkind : CellsBasis.cellkind -> bool
-        (* Dead registers are stored here. *)
---- 7,13 ----
-   *)
-  
-! functor RADeadCodeElim (
-!     structure Flowgraph : RA_FLOWGRAPH
-!       (* check for dead code on these cellkinds only *)
-      val cellkind : CellsBasis.cellkind -> bool
-        (* Dead registers are stored here. *)
-diff -N -C 2 -r MLRISC/ra/ra-flowgraph.sig MLRISC-mlton/ra/ra-flowgraph.sig
-*** MLRISC/ra/ra-flowgraph.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-flowgraph.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 13,20 ****
-     structure I     : INSTRUCTIONS
-     structure C     : CELLS  
-!    structure G     : RA_GRAPH = RAGraph
-     structure Spill : RA_SPILL
-!      sharing Spill.I = I
-!      sharing I.C = C 
-  
-     type flowgraph
---- 13,44 ----
-     structure I     : INSTRUCTIONS
-     structure C     : CELLS  
-!    structure G     : RA_GRAPH (* = RAGraph *)
-!                      where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
-!                        and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
-!                        and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
-!                        and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
-!                        and type C.cell = RAGraph.C.cell
-!                        and type C.cellColor = RAGraph.C.cellColor
-!                        and type C.cellkind = RAGraph.C.cellkind
-!                        and type C.cellkindDesc = RAGraph.C.cellkindDesc
-!                        and type C.cellkindInfo = RAGraph.C.cellkindInfo
-!                        and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
-!                        and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
-!                        and type interferenceGraph = RAGraph.interferenceGraph
-!                        and type move = RAGraph.move
-!                        and type moveKind = RAGraph.moveKind
-!                        and type moveStatus = RAGraph.moveStatus
-!                        and type node = RAGraph.node
-!                        and type nodeStatus = RAGraph.nodeStatus
-!                        and type spillLoc = RAGraph.spillLoc
-!                        and type trailInfo = RAGraph.trailInfo
-     structure Spill : RA_SPILL
-!      (* sharing Spill.I = I *)
-!      where type I.addressing_mode = I.addressing_mode
-!        and type I.ea = I.ea
-!        and type I.instr = I.instr
-!        and type I.instruction = I.instruction
-!        and type I.operand = I.operand
-!      (* sharing I.C = C *)
-  
-     type flowgraph
-diff -N -C 2 -r MLRISC/ra/ra-graph.sig MLRISC-mlton/ra/ra-graph.sig
-*** MLRISC/ra/ra-graph.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-graph.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 12,16 ****
-  
-    structure C : CELLS_BASIS
-!   structure BM : RA_BITMATRIX = RaBitmatrix
-    (*
-     * The following are the data structures used in the register allocator.
---- 12,19 ----
-  
-    structure C : CELLS_BASIS
-!   structure BM : RA_BITMATRIX (* = RaBitmatrix *)
-!                  where type bitMatrix = RaBitmatrix.bitMatrix
-!                    and type bucket = RaBitmatrix.bucket
-!                    and type hashTable = RaBitmatrix.hashTable
-    (*
-     * The following are the data structures used in the register allocator.
-diff -N -C 2 -r MLRISC/ra/ra-spill-with-renaming.sml MLRISC-mlton/ra/ra-spill-with-renaming.sml
-*** MLRISC/ra/ra-spill-with-renaming.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-spill-with-renaming.sml	2009-10-02 10:50:19.000000000 -0400
-***************
-*** 80,93 ****
-   *)
-  
-- local
-- 
--    val debug = false
-- 
-- in
-- 
-  functor RASpillWithRenaming
-     (structure InsnProps : INSN_PROPERTIES 
-!     structure Asm       : INSTRUCTION_EMITTER
-!     			where I = InsnProps.I
-  
-      (* Spilling a variable v creates tiny live-ranges at all its definitions
---- 80,91 ----
-   *)
-  
-  functor RASpillWithRenaming
-     (structure InsnProps : INSN_PROPERTIES 
-!     structure Asm       : INSTRUCTION_EMITTER (* where I = InsnProps.I *)
-!                           where type I.addressing_mode = InsnProps.I.addressing_mode
-!                             and type I.ea = InsnProps.I.ea
-!                             and type I.instr = InsnProps.I.instr
-!                             and type I.instruction = InsnProps.I.instruction
-!                             and type I.operand = InsnProps.I.operand
-  
-      (* Spilling a variable v creates tiny live-ranges at all its definitions
-***************
-*** 108,111 ****
---- 106,110 ----
-     ) : RA_SPILL =
-  struct
-+    val debug = false
-  
-     structure I      = InsnProps.I
-***************
-*** 585,588 ****
-     end
-  end
-- 
-- end (* local *)
---- 584,585 ----
-diff -N -C 2 -r MLRISC/ra/ra-spill.sig MLRISC-mlton/ra/ra-spill.sig
-*** MLRISC/ra/ra-spill.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-spill.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 8,16 ****
-  
-     structure I : INSTRUCTIONS
-!    structure G : RA_GRAPH = RAGraph
-     structure C : CELLS 
-!       sharing I.C = C
-  
-!    structure CB : CELLS_BASIS = CellsBasis 
-     type copyInstr =
-            (CB.cell list * CB.cell list) * I.instruction -> I.instruction list
---- 8,44 ----
-  
-     structure I : INSTRUCTIONS
-!    structure G : RA_GRAPH (* = RAGraph *)
-!                  where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
-!                    and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
-!                    and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
-!                    and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
-!                    and type C.cell = RAGraph.C.cell
-!                    and type C.cellColor = RAGraph.C.cellColor
-!                    and type C.cellkind = RAGraph.C.cellkind
-!                    and type C.cellkindDesc = RAGraph.C.cellkindDesc
-!                    and type C.cellkindInfo = RAGraph.C.cellkindInfo
-!                    and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
-!                    and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
-!                    and type interferenceGraph = RAGraph.interferenceGraph
-!                    and type move = RAGraph.move
-!                    and type moveKind = RAGraph.moveKind
-!                    and type moveStatus = RAGraph.moveStatus
-!                    and type node = RAGraph.node
-!                    and type nodeStatus = RAGraph.nodeStatus
-!                    and type spillLoc = RAGraph.spillLoc
-!                    and type trailInfo = RAGraph.trailInfo
-     structure C : CELLS 
-!       (* sharing I.C = C *)
-  
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     type copyInstr =
-            (CB.cell list * CB.cell list) * I.instruction -> I.instruction list
-diff -N -C 2 -r MLRISC/ra/ra-spill.sml MLRISC-mlton/ra/ra-spill.sml
-*** MLRISC/ra/ra-spill.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-spill.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 49,64 ****
-   *)
-  
-- local
-- 
--    val debug = false
-- 
-- in
-- 
-  functor RASpill
-     (structure InsnProps : INSN_PROPERTIES
-!     structure Asm       : INSTRUCTION_EMITTER
-!     			where I = InsnProps.I
-     ) : RA_SPILL =
-  struct
-  
-     structure I      = InsnProps.I
---- 49,63 ----
-   *)
-  
-  functor RASpill
-     (structure InsnProps : INSN_PROPERTIES
-!     structure Asm       : INSTRUCTION_EMITTER (* where I = InsnProps.I *)
-!                           where type I.addressing_mode = InsnProps.I.addressing_mode
-!                             and type I.ea = InsnProps.I.ea
-!                             and type I.instr = InsnProps.I.instr
-!                             and type I.instruction = InsnProps.I.instruction
-!                             and type I.operand = InsnProps.I.operand
-     ) : RA_SPILL =
-  struct
-+    val debug = false
-  
-     structure I      = InsnProps.I
-***************
-*** 452,455 ****
-     end
-  end
-- 
-- end (* local *)
---- 451,452 ----
-diff -N -C 2 -r MLRISC/ra/ra-spillheur.sig MLRISC-mlton/ra/ra-spillheur.sig
-*** MLRISC/ra/ra-spillheur.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra-spillheur.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 4,8 ****
-  signature RA_SPILL_HEURISTICS =
-  sig
-!    structure G : RA_GRAPH = RAGraph
-  
-     exception NoCandidate
---- 4,27 ----
-  signature RA_SPILL_HEURISTICS =
-  sig
-!    structure G : RA_GRAPH (* = RAGraph *)
-!                  where type C.CellSet.cellset = RAGraph.C.CellSet.cellset
-!                    and type 'a C.ColorTable.hash_table = 'a RAGraph.C.ColorTable.hash_table
-!                    and type 'a C.HashTable.hash_table = 'a RAGraph.C.HashTable.hash_table
-!                    and type C.SortedCells.sorted_cells = RAGraph.C.SortedCells.sorted_cells
-!                    and type C.cell = RAGraph.C.cell
-!                    and type C.cellColor = RAGraph.C.cellColor
-!                    and type C.cellkind = RAGraph.C.cellkind
-!                    and type C.cellkindDesc = RAGraph.C.cellkindDesc
-!                    and type C.cellkindInfo = RAGraph.C.cellkindInfo
-!                    and type 'a PPtHashTable.hash_table = 'a RAGraph.PPtHashTable.hash_table
-!                    and type 'a SpillLocHashTable.hash_table = 'a RAGraph.SpillLocHashTable.hash_table
-!                    and type interferenceGraph = RAGraph.interferenceGraph
-!                    and type move = RAGraph.move
-!                    and type moveKind = RAGraph.moveKind
-!                    and type moveStatus = RAGraph.moveStatus
-!                    and type node = RAGraph.node
-!                    and type nodeStatus = RAGraph.nodeStatus
-!                    and type spillLoc = RAGraph.spillLoc
-!                    and type trailInfo = RAGraph.trailInfo
-  
-     exception NoCandidate
-diff -N -C 2 -r MLRISC/ra/ra.sig MLRISC-mlton/ra/ra.sig
-*** MLRISC/ra/ra.sig	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra.sig	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 10,16 ****
-     structure C : CELLS
-     structure F : RA_FLOWGRAPH 
-!       sharing F.I   = I
-!       sharing I.C   = C
-!    structure CB : CELLS_BASIS = CellsBasis
-  
-     type getreg = { pref  : CB.cell_id list,
---- 10,30 ----
-     structure C : CELLS
-     structure F : RA_FLOWGRAPH 
-!       (* sharing F.I = I *)
-!      where type I.addressing_mode = I.addressing_mode
-!        and type I.ea = I.ea
-!        and type I.instr = I.instr
-!        and type I.instruction = I.instruction
-!        and type I.operand = I.operand
-!       (* sharing I.C = C *)
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-  
-     type getreg = { pref  : CB.cell_id list,
-diff -N -C 2 -r MLRISC/ra/ra.sml MLRISC-mlton/ra/ra.sml
-*** MLRISC/ra/ra.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/ra.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 38,44 ****
-   *)
-  
-! functor RegisterAllocator
-!    (SpillHeuristics : RA_SPILL_HEURISTICS) 
-!    (Flowgraph : RA_FLOWGRAPH where C = CellsBasis) : RA =
-  struct
-  
---- 38,45 ----
-   *)
-  
-! functor RegisterAllocator (
-!    structure SpillHeuristics : RA_SPILL_HEURISTICS
-!    structure Flowgraph : RA_FLOWGRAPH (* where C = CellsBasis *)
-! ) : RA =
-  struct
-  
-diff -N -C 2 -r MLRISC/ra/region-based-ra.sml MLRISC-mlton/ra/region-based-ra.sml
-*** MLRISC/ra/region-based-ra.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/region-based-ra.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 5,12 ****
-   *)
-  functor RegionBasedRA
-!    (RA : RA)
-!    (FlowgraphPartitioner : RA_FLOWGRAPH_PARTITIONER 
-         where type flowgraph = RA.F.flowgraph
-!        where C = RA.C
-     ) : RA =
-  struct
---- 5,12 ----
-   *)
-  functor RegionBasedRA
-!    (structure RA : RA
-!     structure FlowgraphPartitioner : RA_FLOWGRAPH_PARTITIONER 
-         where type flowgraph = RA.F.flowgraph
-!        (* where C = RA.C *)
-     ) : RA =
-  struct
-diff -N -C 2 -r MLRISC/ra/risc-ra.sml MLRISC-mlton/ra/risc-ra.sml
-*** MLRISC/ra/risc-ra.sml	2010-02-03 11:40:42.000000000 -0500
---- MLRISC-mlton/ra/risc-ra.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 5,20 ****
-   *)
-  functor RISC_RA
-!   (structure I         : INSTRUCTIONS
-!    structure Asm       : INSTRUCTION_EMITTER
-!    			where I = I 
-!    structure CFG       : CONTROL_FLOW_GRAPH 
-!    			where I = I
-! 		          and P = Asm.S.P
-!    structure InsnProps : INSN_PROPERTIES
-!    			where I = I
-!    structure Rewrite   : REWRITE_INSTRUCTIONS
-!    			where I = I
-!    structure SpillInstr : ARCH_SPILL_INSTR
-!                         where I = I
-  
-        (* Spilling heuristics determines which node should be spilled.
---- 5,60 ----
-   *)
-  functor RISC_RA
-!   (structure I          : INSTRUCTIONS
-!    structure Asm        : INSTRUCTION_EMITTER (* where I = I *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-!    structure CFG        : CONTROL_FLOW_GRAPH (* where I = I and P = Asm.S.P *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-!                           where type P.Client.pseudo_op = Asm.S.P.Client.pseudo_op
-!                             and type P.T.Basis.cond = Asm.S.P.T.Basis.cond
-!                             and type P.T.Basis.div_rounding_mode = Asm.S.P.T.Basis.div_rounding_mode
-!                             and type P.T.Basis.ext = Asm.S.P.T.Basis.ext
-!                             and type P.T.Basis.fcond = Asm.S.P.T.Basis.fcond
-!                             and type P.T.Basis.rounding_mode = Asm.S.P.T.Basis.rounding_mode
-!                             and type P.T.Constant.const = Asm.S.P.T.Constant.const
-!                             and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) Asm.S.P.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) Asm.S.P.T.Extension.fx
-!                             and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) Asm.S.P.T.Extension.rx
-!                             and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) Asm.S.P.T.Extension.sx
-!                             and type P.T.I.div_rounding_mode = Asm.S.P.T.I.div_rounding_mode
-!                             and type P.T.Region.region = Asm.S.P.T.Region.region
-!                             and type P.T.ccexp = Asm.S.P.T.ccexp
-!                             and type P.T.fexp = Asm.S.P.T.fexp
-!                             (* and type P.T.labexp = Asm.S.P.T.labexp *)
-!                             and type P.T.mlrisc = Asm.S.P.T.mlrisc
-!                             and type P.T.oper = Asm.S.P.T.oper
-!                             and type P.T.rep = Asm.S.P.T.rep
-!                             and type P.T.rexp = Asm.S.P.T.rexp
-!                             and type P.T.stm = Asm.S.P.T.stm
-!    structure InsnProps  : INSN_PROPERTIES (* where I = I *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-!    structure Rewrite    : REWRITE_INSTRUCTIONS (* where I = I *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-!    structure SpillInstr : ARCH_SPILL_INSTR (* where I = I *)
-!                           where type I.addressing_mode = I.addressing_mode
-!                             and type I.ea = I.ea
-!                             and type I.instr = I.instr
-!                             and type I.instruction = I.instruction
-!                             and type I.operand = I.operand
-  
-        (* Spilling heuristics determines which node should be spilled.
-***************
-*** 27,31 ****
-         * or write your own if you are feeling adventurous.
-         *)
-!    structure Spill : RA_SPILL where I = I
-            
-     val architecture : string
---- 67,76 ----
-         * or write your own if you are feeling adventurous.
-         *)
-!    structure Spill : RA_SPILL (* where I = I *)
-!                      where type I.addressing_mode = I.addressing_mode
-!                        and type I.ea = I.ea
-!                        and type I.instr = I.instr
-!                        and type I.instruction = I.instruction
-!                        and type I.operand = I.operand
-            
-     val architecture : string
-***************
-*** 86,92 ****
-     structure Ra =
-        RegisterAllocator
-!         (SpillHeur) 
-          (* (ChowHennessySpillHeur) *)
-!         (ClusterRA 
-            (structure Flowgraph = CFG
-             structure Asm = Asm
---- 131,137 ----
-     structure Ra =
-        RegisterAllocator
-!         (structure SpillHeuristics = SpillHeur
-          (* (ChowHennessySpillHeur) *)
-!          structure Flowgraph = ClusterRA 
-            (structure Flowgraph = CFG
-             structure Asm = Asm
-diff -N -C 2 -r MLRISC/sparc/backpatch/sparcDelaySlotProps.sml MLRISC-mlton/sparc/backpatch/sparcDelaySlotProps.sml
-*** MLRISC/sparc/backpatch/sparcDelaySlotProps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/backpatch/sparcDelaySlotProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  functor SparcDelaySlots
-     (structure I : SPARCINSTR
-!     structure P : INSN_PROPERTIES where I = I
-      (* sharing/defn conflict:   sharing P.I = I*)
-     ) : DELAY_SLOT_PROPERTIES =
---- 1,10 ----
-  functor SparcDelaySlots
-     (structure I : SPARCINSTR
-!     structure P : INSN_PROPERTIES (* where I = I *)
-!                   where type I.addressing_mode = I.addressing_mode
-!                     and type I.ea = I.ea
-!                     and type I.instr = I.instr
-!                     and type I.instruction = I.instruction
-!                     and type I.operand = I.operand
-      (* sharing/defn conflict:   sharing P.I = I*)
-     ) : DELAY_SLOT_PROPERTIES =
-***************
-*** 114,121 ****
-          end
-  
-!     fun delaySlotCandidate{jmp,delaySlot=
-!               (  I.INSTR(I.CALL _) | I.INSTR(I.Bicc _) | I.INSTR(I.FBfcc _) 
-!                | I.INSTR(I.Ticc _) | I.INSTR(I.BR _) | I.INSTR(I.JMP _) | I.INSTR(I.JMPL _) 
-! 	       | I.INSTR(I.RET _) | I.INSTR(I.BP _) | I.INSTR(I.FCMP _))} = false
-        | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
-             delaySlotCandidate{jmp=i,delaySlot=delaySlot}
---- 119,132 ----
-          end
-  
-!     fun delaySlotCandidate{jmp,delaySlot=I.INSTR(I.CALL _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.Bicc _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FBfcc _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.Ticc _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BR _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.JMP _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.JMPL _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.RET _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.BP _)} = false
-!       | delaySlotCandidate{jmp,delaySlot=I.INSTR(I.FCMP _)} = false
-        | delaySlotCandidate{jmp=I.ANNOTATION{i,...},delaySlot} = 
-             delaySlotCandidate{jmp=i,delaySlot=delaySlot}
-diff -N -C 2 -r MLRISC/sparc/backpatch/sparcJumps.sml MLRISC-mlton/sparc/backpatch/sparcJumps.sml
-*** MLRISC/sparc/backpatch/sparcJumps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/backpatch/sparcJumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,11 ****
-  functor SparcJumps
-    (structure Instr:SPARCINSTR
-!    structure Shuffle:SPARCSHUFFLE where I = Instr
-!    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-    ) : SDI_JUMPS = 
-  struct
---- 6,70 ----
-  functor SparcJumps
-    (structure Instr:SPARCINSTR
-!    structure Shuffle:SPARCSHUFFLE (* where I = Instr *)
-!                      where type I.Constant.const = Instr.Constant.const
-!                        and type I.Region.region = Instr.Region.region
-!                        and type I.T.Basis.cond = Instr.T.Basis.cond
-!                        and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                        and type I.T.Basis.ext = Instr.T.Basis.ext
-!                        and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                        and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                        and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                        and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                        and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                        and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                        and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                        and type I.T.ccexp = Instr.T.ccexp
-!                        and type I.T.fexp = Instr.T.fexp
-!                        (* and type I.T.labexp = Instr.T.labexp *)
-!                        and type I.T.mlrisc = Instr.T.mlrisc
-!                        and type I.T.oper = Instr.T.oper
-!                        and type I.T.rep = Instr.T.rep
-!                        and type I.T.rexp = Instr.T.rexp
-!                        and type I.T.stm = Instr.T.stm
-!                        and type I.arith = Instr.arith
-!                        and type I.branch = Instr.branch
-!                        and type I.cc = Instr.cc
-!                        and type I.ea = Instr.ea
-!                        and type I.farith1 = Instr.farith1
-!                        and type I.farith2 = Instr.farith2
-!                        and type I.fbranch = Instr.fbranch
-!                        and type I.fcmp = Instr.fcmp
-!                        and type I.fload = Instr.fload
-!                        and type I.fsize = Instr.fsize
-!                        and type I.fstore = Instr.fstore
-!                        and type I.instr = Instr.instr
-!                        and type I.instruction = Instr.instruction
-!                        and type I.load = Instr.load
-!                        and type I.operand = Instr.operand
-!                        and type I.prediction = Instr.prediction
-!                        and type I.rcond = Instr.rcond
-!                        and type I.shift = Instr.shift
-!                        and type I.store = Instr.store
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-    ) : SDI_JUMPS = 
-  struct
-***************
-*** 52,56 ****
-  	    | I.RESTORE{i,...} => oper i
-  	    (* The following is only true of Version 8 *)
-! 	    | I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd), ...} => true
-  	    | _ => false
-  	end
---- 111,117 ----
-  	    | I.RESTORE{i,...} => oper i
-  	    (* The following is only true of Version 8 *)
-! 	    | I.FPop1{a=I.FMOVd, ...} => true
-! 	    | I.FPop1{a=I.FNEGd, ...} => true
-! 	    | I.FPop1{a=I.FABSd, ...} => true
-  	    | _ => false
-  	end
-***************
-*** 71,79 ****
-  	 | (I.RET{nop=true,...}) => 8
-  	 | (I.FCMP{nop=true,...}) => 8
-! 	 | (I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...}) => 8
-  	 |  _          => 4
-        (*esac*))
-  
-!   fun maxSize (I.INSTR(I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...})) = 8
-      | maxSize (I.ANNOTATION{i,...}) = maxSize i
-      | maxSize _		   = 4
---- 132,144 ----
-  	 | (I.RET{nop=true,...}) => 8
-  	 | (I.FCMP{nop=true,...}) => 8
-! 	 | (I.FPop1{a=I.FMOVd,...}) => 8
-! 	 | (I.FPop1{a=I.FNEGd,...}) => 8
-! 	 | (I.FPop1{a=I.FABSd,...}) => 8
-  	 |  _          => 4
-        (*esac*))
-  
-!   fun maxSize (I.INSTR(I.FPop1{a=I.FMOVd,...})) = 8
-!     | maxSize (I.INSTR(I.FPop1{a=I.FNEGd,...})) = 8
-!     | maxSize (I.INSTR(I.FPop1{a=I.FABSd,...})) = 8
-      | maxSize (I.ANNOTATION{i,...}) = maxSize i
-      | maxSize _		   = 4
-***************
-*** 86,90 ****
-  
-    fun instrLength([],n) = n
-!     | instrLength(I.INSTR(I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...})::is,n) =
-          instrLength(is,n+8)
-      | instrLength(_::is,n) = instrLength(is,n+4)
---- 151,159 ----
-  
-    fun instrLength([],n) = n
-!     | instrLength(I.INSTR(I.FPop1{a=I.FMOVd,...})::is,n) =
-!         instrLength(is,n+8)
-!     | instrLength(I.INSTR(I.FPop1{a=I.FNEGd,...})::is,n) =
-!         instrLength(is,n+8)
-!     | instrLength(I.INSTR(I.FPop1{a=I.FABSd,...})::is,n) =
-          instrLength(is,n+8)
-      | instrLength(_::is,n) = instrLength(is,n+4)
-***************
-*** 136,140 ****
-  	  | I.CALL{label,...} => call label
-  	  | I.WRY{i,...} => oper(i,12)
-!  	  | I.FPop1{a=(I.FMOVd | I.FNEGd | I.FABSd),...} => 8	    
-  	  | _ => error "sdiSize"
-        end
---- 205,211 ----
-  	  | I.CALL{label,...} => call label
-  	  | I.WRY{i,...} => oper(i,12)
-!  	  | I.FPop1{a=I.FMOVd,...} => 8	    
-!  	  | I.FPop1{a=I.FNEGd,...} => 8	    
-!  	  | I.FPop1{a=I.FABSd,...} => 8	    
-  	  | _ => error "sdiSize"
-        end
-***************
-*** 208,215 ****
-  	| (I.BR _,8) => [instr]
-  	| (I.BP _,8) => [instr]
-! 	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},(12 | 16)) => 
-  	    expandImm(i,I.JMPL{r=r,i=I.REG C.asmTmpR,d=d,defs=defs,uses=uses,
-  			       cutsTo=cutsTo,nop=nop,mem=mem})
-! 	| (I.JMP{r,i,labs,nop},(12 | 16)) => 
-  	    expandImm(i,I.JMP{r=r,i=I.REG C.asmTmpR,labs=labs,nop=nop})
-  	| (I.Ticc{t,cc,r,i},12) =>
---- 279,291 ----
-  	| (I.BR _,8) => [instr]
-  	| (I.BP _,8) => [instr]
-! 	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},12) => 
-  	    expandImm(i,I.JMPL{r=r,i=I.REG C.asmTmpR,d=d,defs=defs,uses=uses,
-  			       cutsTo=cutsTo,nop=nop,mem=mem})
-! 	| (I.JMPL{r,i,d,defs,uses,cutsTo,nop,mem},16) => 
-! 	    expandImm(i,I.JMPL{r=r,i=I.REG C.asmTmpR,d=d,defs=defs,uses=uses,
-! 			       cutsTo=cutsTo,nop=nop,mem=mem})
-! 	| (I.JMP{r,i,labs,nop},12) => 
-! 	    expandImm(i,I.JMP{r=r,i=I.REG C.asmTmpR,labs=labs,nop=nop})
-! 	| (I.JMP{r,i,labs,nop},16) => 
-  	    expandImm(i,I.JMP{r=r,i=I.REG C.asmTmpR,labs=labs,nop=nop})
-  	| (I.Ticc{t,cc,r,i},12) =>
-diff -N -C 2 -r MLRISC/sparc/c-calls/sparc-c-calls.sml MLRISC-mlton/sparc/c-calls/sparc-c-calls.sml
-*** MLRISC/sparc/c-calls/sparc-c-calls.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/c-calls/sparc-c-calls.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 106,118 ****
-  
-      (* calculate size and alignment for a C type *)
-!     fun szal (Ty.C_void | Ty.C_float | Ty.C_PTR |
-! 	      Ty.C_signed (Ty.I_int | Ty.I_long) |
-! 	      Ty.C_unsigned (Ty.I_int | Ty.I_long)) = (4, 4)
-!       | szal (Ty.C_double |
-! 	      Ty.C_signed Ty.I_long_long |
-! 	      Ty.C_unsigned Ty.I_long_long) = (8, 8)
-        | szal (Ty.C_long_double) = (16, 8)
-!       | szal (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) = (1, 1)
-!       | szal (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) = (2, 2)
-        | szal (Ty.C_ARRAY (t, n)) = let val (s, a) = szal t in (n * s, a) end
-        | szal (Ty.C_STRUCT l) =
---- 106,124 ----
-  
-      (* calculate size and alignment for a C type *)
-!     fun szal Ty.C_void = (4, 4)
-!       | szal Ty.C_float = (4, 4)
-!       | szal Ty.C_PTR = (4, 4)
-!       | szal (Ty.C_signed Ty.I_int) = (4, 4)
-!       | szal (Ty.C_signed Ty.I_long) = (4, 4)
-!       | szal (Ty.C_unsigned Ty.I_int) = (4, 4)
-!       | szal (Ty.C_unsigned Ty.I_long) = (4, 4)
-!       | szal Ty.C_double = (8, 8)
-!       | szal (Ty.C_signed Ty.I_long_long) = (8, 8)
-!       | szal (Ty.C_unsigned Ty.I_long_long) = (8, 8)
-        | szal (Ty.C_long_double) = (16, 8)
-!       | szal (Ty.C_signed Ty.I_char) = (1, 1)
-!       | szal (Ty.C_unsigned Ty.I_char) = (1, 1)
-!       | szal (Ty.C_signed Ty.I_short) = (2, 2)
-!       | szal (Ty.C_unsigned Ty.I_short) = (2, 2)
-        | szal (Ty.C_ARRAY (t, n)) = let val (s, a) = szal t in (n * s, a) end
-        | szal (Ty.C_STRUCT l) =
-***************
-*** 184,194 ****
-  	val { conv, retTy, paramTys } = proto
-  	val _ = case conv of
-! 		    ("" | "ccall") => ()
-  		  | _ => error (concat ["unknown calling convention \"",
-  					String.toString conv, "\""])
-  	val res_szal =
-  	    case retTy of
-! 		(Ty.C_long_double | Ty.C_STRUCT _ | Ty.C_UNION _) =>
-! 		  SOME (szal retTy)
-  	      | _ => NONE
-  
---- 190,202 ----
-  	val { conv, retTy, paramTys } = proto
-  	val _ = case conv of
-! 		    "" => ()
-! 		  | "ccall" => ()
-  		  | _ => error (concat ["unknown calling convention \"",
-  					String.toString conv, "\""])
-  	val res_szal =
-  	    case retTy of
-! 		Ty.C_long_double => SOME (szal retTy)
-! 	      | Ty.C_STRUCT _ => SOME (szal retTy)
-! 	      | Ty.C_UNION _ => SOME (szal retTy)
-  	      | _ => NONE
-  
-***************
-*** 197,202 ****
-  	      | loop (t :: tl, n) =
-  		loop (tl, (case t of
-! 			       (Ty.C_double | Ty.C_signed Ty.I_long_long |
-! 				Ty.C_unsigned Ty.I_long_long) => 2
-  			     | _ => 1) + n)
-  	in
---- 205,211 ----
-  	      | loop (t :: tl, n) =
-  		loop (tl, (case t of
-! 			       Ty.C_double => 2
-! 			     | (Ty.C_signed Ty.I_long_long) => 2
-! 			     | (Ty.C_unsigned Ty.I_long_long) => 2
-  			     | _ => 1) + n)
-  	in
-***************
-*** 226,240 ****
-  	    in
-  		case t of
-! 		    (Ty.C_void | Ty.C_PTR |
-! 		     Ty.C_signed (Ty.I_int | Ty.I_long) |
-! 		     Ty.C_unsigned (Ty.I_int | Ty.I_long)) => ldst 32
-! 		  | (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) => ldst 8
-! 		  | (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) =>
-! 		    ldst 16
-! 		  | (Ty.C_signed Ty.I_long_long |
-! 		     Ty.C_unsigned Ty.I_long_long) => ldst 64
-  		  | (Ty.C_ARRAY _) =>
-  		    error "ARRAY within gather/scatter struct"
-! 		  | (Ty.C_STRUCT _ | Ty.C_UNION _) =>
-  		    (* Here we have to do the equivalent of a "memcpy". *)
-  		    let val from = a (* argument is address of struct *)
---- 235,253 ----
-  	    in
-  		case t of
-! 		    Ty.C_void => ldst 32
-! 		  | Ty.C_PTR => ldst 32
-! 		  | (Ty.C_signed Ty.I_int) => ldst 32
-! 		  | (Ty.C_signed Ty.I_long) => ldst 32
-! 		  | (Ty.C_unsigned Ty.I_int) => ldst 32
-! 		  | (Ty.C_unsigned Ty.I_long) => ldst 32
-! 		  | (Ty.C_signed Ty.I_char) => ldst 8
-! 		  | (Ty.C_unsigned Ty.I_char) => ldst 8
-! 		  | (Ty.C_signed Ty.I_short) => ldst 16
-! 		  | (Ty.C_unsigned Ty.I_short) => ldst 16
-! 		  | (Ty.C_signed Ty.I_long_long) => ldst 64
-! 		  | (Ty.C_unsigned Ty.I_long_long) => ldst 64
-  		  | (Ty.C_ARRAY _) =>
-  		    error "ARRAY within gather/scatter struct"
-! 		  | (Ty.C_STRUCT _) =>
-  		    (* Here we have to do the equivalent of a "memcpy". *)
-  		    let val from = a (* argument is address of struct *)
-***************
-*** 261,266 ****
-  			  | _ => (* 4 or more *) cp (32, 4)
-  		    end
-! 		  | (Ty.C_float | Ty.C_double | Ty.C_long_double) =>
-! 		    error "floating point type does not match ARG"
-  	    end
-  (*
---- 274,305 ----
-  			  | _ => (* 4 or more *) cp (32, 4)
-  		    end
-! 		  | (Ty.C_UNION _) =>
-! 		    (* Here we have to do the equivalent of a "memcpy". *)
-! 		    let val from = a (* argument is address of struct *)
-! 			fun cp (ty, incr) = let
-! 			    fun load_from from_off =
-! 				T.LOAD (32, addli (from, from_off), mem)
-! 			    (* from_off is relative to from,
-! 			     * to_off is relative to %sp *)
-! 			    fun loop (i, from_off, to_off, cpc) =
-! 				if i <= 0 then cpc
-! 				else loop (i - incr,
-! 					   from_off + incr, to_off + incr,
-! 					   T.STORE (ty, addli (spreg, to_off),
-! 						    load_from from_off,
-! 						    stack)
-! 					   :: cpc)
-! 			in
-! 			    loop (sz, 0, to_off, cpc)
-! 			end
-! 		    in
-! 			case al of
-! 			    1 => cp (8, 1)
-! 			  | 2 => cp (16, 2)
-! 			  | _ => (* 4 or more *) cp (32, 4)
-! 		    end
-! 		  | Ty.C_float => error "floating point type does not match ARG"
-! 		  | Ty.C_double => error "floating point type does not match ARG"
-! 		  | Ty.C_long_double => error "floating point type does not match ARG"
-  	    end
-  (*
-***************
-*** 335,342 ****
-  		in
-  		    case (t, a) of
-! 			((Ty.C_void | Ty.C_PTR | Ty.C_ARRAY _ |
-! 			  Ty.C_unsigned (Ty.I_int | Ty.I_long) |
-! 			  Ty.C_signed (Ty.I_int | Ty.I_long)),
-! 			 ARG a) => wordarg (a, cpc, ss)
-  		      | (Ty.C_signed Ty.I_char, ARG a) =>
-  			wordarg (T.SX (32, 8, a), cpc, ss)
---- 374,384 ----
-  		in
-  		    case (t, a) of
-! 			(Ty.C_void, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_PTR, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_ARRAY _, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_unsigned Ty.I_int, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_unsigned Ty.I_long, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_signed Ty.I_int, ARG a) => wordarg (a, cpc, ss)
-! 		      | (Ty.C_signed Ty.I_long, ARG a) => wordarg (a, cpc, ss)
-  		      | (Ty.C_signed Ty.I_char, ARG a) =>
-  			wordarg (T.SX (32, 8, a), cpc, ss)
-***************
-*** 347,352 ****
-  		      | (Ty.C_unsigned Ty.I_short, ARG a) =>
-  			wordarg (T.ZX (32, 16, a), cpc, ss)
-! 		      | ((Ty.C_signed Ty.I_long_long |
-! 			  Ty.C_unsigned Ty.I_long_long), ARG a) =>
-  			(case a of
-  			     T.LOAD (_, addr, region) =>
---- 389,399 ----
-  		      | (Ty.C_unsigned Ty.I_short, ARG a) =>
-  			wordarg (T.ZX (32, 16, a), cpc, ss)
-! 		      | (Ty.C_signed Ty.I_long_long, ARG a) =>
-! 			(case a of
-! 			     T.LOAD (_, addr, region) =>
-! 			     dwordmemarg (addr, region, [])
-! 			   | _ => dwordarg (fn addr =>
-! 					       T.STORE (64, addr, a, stack)))
-! 		      | (Ty.C_unsigned Ty.I_long_long, ARG a) =>
-  			(case a of
-  			     T.LOAD (_, addr, region) =>
-***************
-*** 391,395 ****
-  				     ss' + 16)
-  			end
-! 		      | (t as (Ty.C_STRUCT _ | Ty.C_UNION _), a) => let
-  			    (* copy entire struct into scratch space
-  			     * (aligned according to struct's alignment
---- 438,455 ----
-  				     ss' + 16)
-  			end
-! 		      | (t as (Ty.C_STRUCT _), a) => let
-! 			    (* copy entire struct into scratch space
-! 			     * (aligned according to struct's alignment
-! 			     * requirements).  The address of the scratch
-! 			     * copy is then passed as a regular 32-bit
-! 			     * argument. *)
-! 			    val (sz, al) = szal t
-! 			    val ss' = roundup (ss, al)
-! 			    val ssaddr = addli (spreg, ss')
-! 			    val cpc' = struct_copy (sz, al, a, t, ss', cpc)
-! 			in
-! 			    wordarg (ssaddr, cpc', ss' + sz)
-! 			end
-! 		      | (t as (Ty.C_UNION _), a) => let
-  			    (* copy entire struct into scratch space
-  			     * (aligned according to struct's alignment
-***************
-*** 438,452 ****
-  	      | Ty.C_double => [T.FPR (T.FREG (64, FP 0))] (* %f0/%f1 *)
-  	      | Ty.C_long_double => []
-! 	      | (Ty.C_STRUCT _ | Ty.C_UNION _) => []
-  	      | Ty.C_ARRAY _ => error "array return type"
-! 	      | (Ty.C_PTR | Ty.C_void |
-! 		 Ty.C_signed (Ty.I_int | Ty.I_long) |
-! 		 Ty.C_unsigned (Ty.I_int | Ty.I_long)) =>
-  		[T.GPR (T.REG (32, oreg 0))]
-! 	      | (Ty.C_signed Ty.I_char | Ty.C_unsigned Ty.I_char) =>
-  		[T.GPR (T.REG (8, oreg 0))]
-! 	      | (Ty.C_signed Ty.I_short | Ty.C_unsigned Ty.I_short) =>
-  		[T.GPR (T.REG (16, oreg 0))]
-! 	      | (Ty.C_signed Ty.I_long_long | Ty.C_unsigned Ty.I_long_long) =>
-  		[T.GPR (T.REG (64, oreg 0))]
-  
---- 498,527 ----
-  	      | Ty.C_double => [T.FPR (T.FREG (64, FP 0))] (* %f0/%f1 *)
-  	      | Ty.C_long_double => []
-! 	      | (Ty.C_STRUCT _) => []
-! 	      | (Ty.C_UNION _) => []
-  	      | Ty.C_ARRAY _ => error "array return type"
-! 	      | Ty.C_PTR =>
-! 		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_void =>
-! 		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_signed Ty.I_int =>
-  		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_signed Ty.I_long =>
-! 		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_unsigned Ty.I_int =>
-! 		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_unsigned Ty.I_long =>
-! 		[T.GPR (T.REG (32, oreg 0))]
-! 	      | Ty.C_signed Ty.I_char =>
-  		[T.GPR (T.REG (8, oreg 0))]
-! 	      | Ty.C_unsigned Ty.I_char =>
-! 		[T.GPR (T.REG (8, oreg 0))]
-! 	      | Ty.C_signed Ty.I_short =>
-! 		[T.GPR (T.REG (16, oreg 0))]
-! 	      | Ty.C_unsigned Ty.I_short =>
-  		[T.GPR (T.REG (16, oreg 0))]
-! 	      | Ty.C_signed Ty.I_long_long =>
-! 		[T.GPR (T.REG (64, oreg 0))]
-! 	      | Ty.C_unsigned Ty.I_long_long =>
-  		[T.GPR (T.REG (64, oreg 0))]
-  
-diff -N -C 2 -r MLRISC/sparc/emit/sparcAsm.sml MLRISC-mlton/sparc/emit/sparcAsm.sml
-*** MLRISC/sparc/emit/sparcAsm.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/emit/sparcAsm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,16 ****
-  
-  functor SparcAsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : SPARCINSTR
-!                            where T = S.P.T
-!                         structure Shuffle : SPARCSHUFFLE
-!                            where I = Instr
-!                         structure MLTreeEval : MLTREE_EVAL
-!                            where T = Instr.T
-  
-  (*#line 466.21 "sparc/sparc.mdl"*)
---- 7,92 ----
-  
-  functor SparcAsmEmitter(structure S : INSTRUCTION_STREAM
-!                         structure Instr : SPARCINSTR (* where T = S.P.T *)
-!                                           where type T.Basis.cond = S.P.T.Basis.cond
-!                                             and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                             and type T.Basis.ext = S.P.T.Basis.ext
-!                                             and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                             and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                             and type T.Constant.const = S.P.T.Constant.const
-!                                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                             and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                             and type T.Region.region = S.P.T.Region.region
-!                                             and type T.ccexp = S.P.T.ccexp
-!                                             and type T.fexp = S.P.T.fexp
-!                                             (* and type T.labexp = S.P.T.labexp *)
-!                                             and type T.mlrisc = S.P.T.mlrisc
-!                                             and type T.oper = S.P.T.oper
-!                                             and type T.rep = S.P.T.rep
-! 	                                    and type T.rexp = S.P.T.rexp
-!                                             and type T.stm = S.P.T.stm
-!                         structure Shuffle : SPARCSHUFFLE (* where I = Instr *)
-!                                             where type I.Constant.const = Instr.Constant.const
-!                                               and type I.Region.region = Instr.Region.region
-!                                               and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                               and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                               and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                               and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                               and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                               and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                               and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                               and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                               and type I.T.ccexp = Instr.T.ccexp
-!                                               and type I.T.fexp = Instr.T.fexp
-!                                               (* and type I.T.labexp = Instr.T.labexp *)
-!                                               and type I.T.mlrisc = Instr.T.mlrisc
-!                                               and type I.T.oper = Instr.T.oper
-!                                               and type I.T.rep = Instr.T.rep
-!                                               and type I.T.rexp = Instr.T.rexp
-!                                               and type I.T.stm = Instr.T.stm
-!                                               and type I.arith = Instr.arith
-!                                               and type I.branch = Instr.branch
-!                                               and type I.cc = Instr.cc
-!                                               and type I.ea = Instr.ea
-!                                               and type I.farith1 = Instr.farith1
-!                                               and type I.farith2 = Instr.farith2
-!                                               and type I.fbranch = Instr.fbranch
-!                                               and type I.fcmp = Instr.fcmp
-!                                               and type I.fload = Instr.fload
-!                                               and type I.fsize = Instr.fsize
-!                                               and type I.fstore = Instr.fstore
-!                                               and type I.instr = Instr.instr
-!                                               and type I.instruction = Instr.instruction
-!                                               and type I.load = Instr.load
-!                                               and type I.operand = Instr.operand
-!                                               and type I.prediction = Instr.prediction
-!                                               and type I.rcond = Instr.rcond
-!                                               and type I.shift = Instr.shift
-!                                               and type I.store = Instr.store
-!                         structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                                where type T.Basis.cond = Instr.T.Basis.cond
-!                                                  and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                  and type T.Basis.ext = Instr.T.Basis.ext
-!                                                  and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                  and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                  and type T.Constant.const = Instr.T.Constant.const
-!                                                  and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                  and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                  and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                  and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                  and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                  and type T.Region.region = Instr.T.Region.region
-!                                                  and type T.ccexp = Instr.T.ccexp
-!                                                  and type T.fexp = Instr.T.fexp
-!                                                  (* and type T.labexp = Instr.T.labexp *)
-!                                                  and type T.mlrisc = Instr.T.mlrisc
-!                                                  and type T.oper = Instr.T.oper
-!                                                  and type T.rep = Instr.T.rep
-!                                                  and type T.rexp = Instr.T.rexp
-!                                                  and type T.stm = Instr.T.stm
-  
-  (*#line 466.21 "sparc/sparc.mdl"*)
-diff -N -C 2 -r MLRISC/sparc/emit/sparcMC.sml MLRISC-mlton/sparc/emit/sparcMC.sml
-*** MLRISC/sparc/emit/sparcMC.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/emit/sparcMC.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,11 ****
-  
-  functor SparcMCEmitter(structure Instr : SPARCINSTR
-!                        structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-                         structure Stream : INSTRUCTION_STREAM 
-                         structure CodeString : CODE_STRING
---- 7,31 ----
-  
-  functor SparcMCEmitter(structure Instr : SPARCINSTR
-!                        structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                               where type T.Basis.cond = Instr.T.Basis.cond
-!                                                 and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                 and type T.Basis.ext = Instr.T.Basis.ext
-!                                                 and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                 and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                 and type T.Constant.const = Instr.T.Constant.const
-!                                                 and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                 and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                 and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                 and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                 and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                 and type T.Region.region = Instr.T.Region.region
-!                                                 and type T.ccexp = Instr.T.ccexp
-!                                                 and type T.fexp = Instr.T.fexp
-!                                                 (* and type T.labexp = Instr.T.labexp *)
-!                                                 and type T.mlrisc = Instr.T.mlrisc
-!                                                 and type T.oper = Instr.T.oper
-!                                                 and type T.rep = Instr.T.rep
-!                                                 and type T.rexp = Instr.T.rexp
-!                                                 and type T.stm = Instr.T.stm
-                         structure Stream : INSTRUCTION_STREAM 
-                         structure CodeString : CODE_STRING
-***************
-*** 48,51 ****
---- 68,72 ----
-         fun eByteW w =
-         let val i = !loc
-+            val w = W.toLargeWord w
-         in loc := i + 1; CodeString.update(i,Word8.fromLargeWord w) end
-     
-diff -N -C 2 -r MLRISC/sparc/flowgraph/sparcGasPseudoOps.sml MLRISC-mlton/sparc/flowgraph/sparcGasPseudoOps.sml
-*** MLRISC/sparc/flowgraph/sparcGasPseudoOps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/flowgraph/sparcGasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  functor SparcGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL  where T = T
-      ) : PSEUDO_OPS_BASIS = 
-  
---- 1,25 ----
-  functor SparcGasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-      ) : PSEUDO_OPS_BASIS = 
-  
-diff -N -C 2 -r MLRISC/sparc/instructions/sparcInstr.sml MLRISC-mlton/sparc/instructions/sparcInstr.sml
-*** MLRISC/sparc/instructions/sparcInstr.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/instructions/sparcInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : SPARCCELLS
-!    structure CB : CELLS_BASIS = CellsBasis
+        fun doNothing _ = ()
+diff --git a/sparc/flowgraph/sparcGasPseudoOps.sml b/sparc/flowgraph/sparcGasPseudoOps.sml
+index 375df59..973dd4e 100644
+--- a/sparc/flowgraph/sparcGasPseudoOps.sml
++++ b/sparc/flowgraph/sparcGasPseudoOps.sml
+@@ -1,6 +1,26 @@
+ functor SparcGasPseudoOps 
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL  where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+     ) : PSEUDO_OPS_BASIS = 
+ 
+ struct
+diff --git a/sparc/instructions/sparcInstr.sml b/sparc/instructions/sparcInstr.sml
+index 1cd82fc..54e5c76 100644
+--- a/sparc/instructions/sparcInstr.sml
++++ b/sparc/instructions/sparcInstr.sml
+@@ -8,7 +8,16 @@
+ signature SPARCINSTR =
+ sig
+    structure C : SPARCCELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure T : MLTREE
+    structure Constant: CONSTANT
+    structure Region : REGION
+@@ -234,7 +243,7 @@ sig
+               sz: int,          (* in bits *)
+               dst: CellsBasis.cell list,
+               src: CellsBasis.cell list,
+-              tmp: ea option (* NONE if |dst| = {src| = 1 *)}
++              tmp: ea option (* NONE if |dst| = |src| = 1 *)}
+    | ANNOTATION of {i:instruction, a:Annotations.annotation}
+    | INSTR of instr
+    val load : {l:load, d:CellsBasis.cell, r:CellsBasis.cell, i:operand, mem:Region.region} -> instruction
+diff --git a/sparc/instructions/sparcProps.sml b/sparc/instructions/sparcProps.sml
+index 8f6c283..b67eda6 100644
+--- a/sparc/instructions/sparcProps.sml
++++ b/sparc/instructions/sparcProps.sml
+@@ -5,8 +5,48 @@
+ 
+ functor SparcProps
+   (structure SparcInstr : SPARCINSTR
+-   structure MLTreeEval : MLTREE_EVAL where T = SparcInstr.T
+-   structure MLTreeHash : MLTREE_HASH where T = SparcInstr.T
++   structure MLTreeEval : MLTREE_EVAL (* where T = SparcInstr.T *)
++                          where type T.Basis.cond = SparcInstr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = SparcInstr.T.Basis.ext
++                            and type T.Basis.fcond = SparcInstr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
++                            and type T.Constant.const = SparcInstr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
++                            and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
++                            and type T.Region.region = SparcInstr.T.Region.region
++                            and type T.ccexp = SparcInstr.T.ccexp
++                            and type T.fexp = SparcInstr.T.fexp
++                            (* and type T.labexp = SparcInstr.T.labexp *)
++                            and type T.mlrisc = SparcInstr.T.mlrisc
++                            and type T.oper = SparcInstr.T.oper
++                            and type T.rep = SparcInstr.T.rep
++                            and type T.rexp = SparcInstr.T.rexp
++                            and type T.stm = SparcInstr.T.stm
++   structure MLTreeHash : MLTREE_HASH (* where T = SparcInstr.T *)
++                          where type T.Basis.cond = SparcInstr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = SparcInstr.T.Basis.ext
++                            and type T.Basis.fcond = SparcInstr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
++                            and type T.Constant.const = SparcInstr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
++                            and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
++                            and type T.Region.region = SparcInstr.T.Region.region
++                            and type T.ccexp = SparcInstr.T.ccexp
++                            and type T.fexp = SparcInstr.T.fexp
++                            (* and type T.labexp = SparcInstr.T.labexp *)
++                            and type T.mlrisc = SparcInstr.T.mlrisc
++                            and type T.oper = SparcInstr.T.oper
++                            and type T.rep = SparcInstr.T.rep
++                            and type T.rexp = SparcInstr.T.rexp
++                            and type T.stm = SparcInstr.T.stm
+    ) : INSN_PROPERTIES =
+ struct
+   structure I = SparcInstr
+diff --git a/sparc/instructions/sparccomp-instr-ext.sml b/sparc/instructions/sparccomp-instr-ext.sml
+index 918dbaa..7cf7daf 100644
+--- a/sparc/instructions/sparccomp-instr-ext.sml
++++ b/sparc/instructions/sparccomp-instr-ext.sml
+@@ -7,12 +7,54 @@
+  *)
+ signature SPARCCOMP_INSTR_EXT = sig
      structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : SPARCCELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     structure T : MLTREE
-     structure Constant: CONSTANT
-***************
-*** 235,239 ****
-                dst: CellsBasis.cell list,
-                src: CellsBasis.cell list,
-!               tmp: ea option (* NONE if |dst| = {src| = 1 *)}
-     | ANNOTATION of {i:instruction, a:Annotations.annotation}
-     | INSTR of instr
---- 244,248 ----
-                dst: CellsBasis.cell list,
-                src: CellsBasis.cell list,
-!               tmp: ea option (* NONE if |dst| = |src| = 1 *)}
-     | ANNOTATION of {i:instruction, a:Annotations.annotation}
-     | INSTR of instr
-diff -N -C 2 -r MLRISC/sparc/instructions/sparcProps.sml MLRISC-mlton/sparc/instructions/sparcProps.sml
-*** MLRISC/sparc/instructions/sparcProps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/instructions/sparcProps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,11 ****
-  functor SparcProps
-    (structure SparcInstr : SPARCINSTR
-!    structure MLTreeEval : MLTREE_EVAL where T = SparcInstr.T
-!    structure MLTreeHash : MLTREE_HASH where T = SparcInstr.T
-     ) : INSN_PROPERTIES =
-  struct
---- 6,51 ----
-  functor SparcProps
-    (structure SparcInstr : SPARCINSTR
-!    structure MLTreeEval : MLTREE_EVAL (* where T = SparcInstr.T *)
-!                           where type T.Basis.cond = SparcInstr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = SparcInstr.T.Basis.ext
-!                             and type T.Basis.fcond = SparcInstr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
-!                             and type T.Constant.const = SparcInstr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
-!                             and type T.Region.region = SparcInstr.T.Region.region
-!                             and type T.ccexp = SparcInstr.T.ccexp
-!                             and type T.fexp = SparcInstr.T.fexp
-!                             (* and type T.labexp = SparcInstr.T.labexp *)
-!                             and type T.mlrisc = SparcInstr.T.mlrisc
-!                             and type T.oper = SparcInstr.T.oper
-!                             and type T.rep = SparcInstr.T.rep
-!                             and type T.rexp = SparcInstr.T.rexp
-!                             and type T.stm = SparcInstr.T.stm
-!    structure MLTreeHash : MLTREE_HASH (* where T = SparcInstr.T *)
-!                           where type T.Basis.cond = SparcInstr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = SparcInstr.T.Basis.ext
-!                             and type T.Basis.fcond = SparcInstr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
-!                             and type T.Constant.const = SparcInstr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
-!                             and type T.Region.region = SparcInstr.T.Region.region
-!                             and type T.ccexp = SparcInstr.T.ccexp
-!                             and type T.fexp = SparcInstr.T.fexp
-!                             (* and type T.labexp = SparcInstr.T.labexp *)
-!                             and type T.mlrisc = SparcInstr.T.mlrisc
-!                             and type T.oper = SparcInstr.T.oper
-!                             and type T.rep = SparcInstr.T.rep
-!                             and type T.rexp = SparcInstr.T.rexp
-!                             and type T.stm = SparcInstr.T.stm
-     ) : INSN_PROPERTIES =
-  struct
-diff -N -C 2 -r MLRISC/sparc/instructions/sparccomp-instr-ext.sml MLRISC-mlton/sparc/instructions/sparccomp-instr-ext.sml
-*** MLRISC/sparc/instructions/sparccomp-instr-ext.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/instructions/sparccomp-instr-ext.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 8,17 ****
-  signature SPARCCOMP_INSTR_EXT = sig
-      structure T : MLTREE
-!     structure I : SPARCINSTR
-!     		where T = T
-!     structure TS : MLTREE_STREAM
-! 		where T = I.T
-!     structure CFG : CONTROL_FLOW_GRAPH 
-!     		where I = I 
-  
-  
---- 8,59 ----
-  signature SPARCCOMP_INSTR_EXT = sig
-      structure T : MLTREE
-!     structure I : SPARCINSTR (* where T = T *)
-!                   where type T.Basis.cond = T.Basis.cond
-!                     and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                     and type T.Basis.ext = T.Basis.ext
-!                     and type T.Basis.fcond = T.Basis.fcond
-!                     and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                     and type T.Constant.const = T.Constant.const
-!                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                     and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                     and type T.Region.region = T.Region.region
-!                     and type T.ccexp = T.ccexp
-!                     and type T.fexp = T.fexp
-!                     (* and type T.labexp = T.labexp *)
-!                     and type T.mlrisc = T.mlrisc
-!                     and type T.oper = T.oper
-!                     and type T.rep = T.rep
-!                     and type T.rexp = T.rexp
-!                     and type T.stm = T.stm
-!     structure TS : MLTREE_STREAM (* where T = I.T *)
-!                    where type T.Basis.cond = I.T.Basis.cond
-!                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                      and type T.Basis.ext = I.T.Basis.ext
-!                      and type T.Basis.fcond = I.T.Basis.fcond
-!                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                      and type T.Constant.const = I.T.Constant.const
-!                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                      and type T.Region.region = I.T.Region.region
-!                      and type T.ccexp = I.T.ccexp
-!                      and type T.fexp = I.T.fexp
-!                      (* and type T.labexp = I.T.labexp *)
-!                      and type T.mlrisc = I.T.mlrisc
-!                      and type T.oper = I.T.oper
-!                      and type T.rep = I.T.rep
-!                      and type T.rexp = I.T.rexp
-!                      and type T.stm = I.T.stm
-!     structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-  
-  
-***************
-*** 28,36 ****
-  functor SparcCompInstrExt 
-    (structure I   : SPARCINSTR
-!    structure TS  : MLTREE_STREAM
-! 		where T = I.T
-!    structure CFG : CONTROL_FLOW_GRAPH 
-!    		where I = I
-!                   and P = TS.S.P
-    ) : SPARCCOMP_INSTR_EXT = 
-  struct
---- 70,121 ----
-  functor SparcCompInstrExt 
-    (structure I   : SPARCINSTR
-!    structure TS  : MLTREE_STREAM (* where T = I.T *)
-!                    where type T.Basis.cond = I.T.Basis.cond
-!                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                      and type T.Basis.ext = I.T.Basis.ext
-!                      and type T.Basis.fcond = I.T.Basis.fcond
-!                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                      and type T.Constant.const = I.T.Constant.const
-!                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                      and type T.Region.region = I.T.Region.region
-!                      and type T.ccexp = I.T.ccexp
-!                      and type T.fexp = I.T.fexp
-!                      (* and type T.labexp = I.T.labexp *)
-!                      and type T.mlrisc = I.T.mlrisc
-!                      and type T.oper = I.T.oper
-!                      and type T.rep = I.T.rep
-! 	             and type T.rexp = I.T.rexp
-!                      and type T.stm = I.T.stm
-!    structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-!                     where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = TS.S.P.T.Region.region
-!                       and type P.T.ccexp = TS.S.P.T.ccexp
-!                       and type P.T.fexp = TS.S.P.T.fexp
-!                       (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                       and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                       and type P.T.oper = TS.S.P.T.oper
-!                       and type P.T.rep = TS.S.P.T.rep
-!                       and type P.T.rexp = TS.S.P.T.rexp
-!                       and type P.T.stm = TS.S.P.T.stm
-    ) : SPARCCOMP_INSTR_EXT = 
-  struct
-diff -N -C 2 -r MLRISC/sparc/mltree/sparc.sml MLRISC-mlton/sparc/mltree/sparc.sml
-*** MLRISC/sparc/mltree/sparc.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/sparc/mltree/sparc.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 15,24 ****
-  functor Sparc
-    (structure SparcInstr : SPARCINSTR
-!    structure PseudoInstrs : SPARC_PSEUDO_INSTR 
-!    			where I = SparcInstr
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP
-!    			where I = SparcInstr
-! 			  and T = SparcInstr.T
-! 
-  			  
-     (* 
---- 15,84 ----
-  functor Sparc
-    (structure SparcInstr : SPARCINSTR
-!    structure PseudoInstrs : SPARC_PSEUDO_INSTR (* where I = SparcInstr *)
-!                             where type I.Constant.const = SparcInstr.Constant.const
-!                               and type I.Region.region = SparcInstr.Region.region
-!                               and type I.T.Basis.cond = SparcInstr.T.Basis.cond
-!                               and type I.T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
-!                               and type I.T.Basis.ext = SparcInstr.T.Basis.ext
-!                               and type I.T.Basis.fcond = SparcInstr.T.Basis.fcond
-!                               and type I.T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
-!                               and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
-!                               and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
-!                               and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
-!                               and type I.T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
-!                               and type I.T.ccexp = SparcInstr.T.ccexp
-!                               and type I.T.fexp = SparcInstr.T.fexp
-!                               (* and type I.T.labexp = SparcInstr.T.labexp *)
-!                               and type I.T.mlrisc = SparcInstr.T.mlrisc
-!                               and type I.T.oper = SparcInstr.T.oper
-!                               and type I.T.rep = SparcInstr.T.rep
-!                               and type I.T.rexp = SparcInstr.T.rexp
-!                               and type I.T.stm = SparcInstr.T.stm
-!                               and type I.arith = SparcInstr.arith
-!                               and type I.branch = SparcInstr.branch
-!                               and type I.cc = SparcInstr.cc
-!                               and type I.ea = SparcInstr.ea
-!                               and type I.farith1 = SparcInstr.farith1
-!                               and type I.farith2 = SparcInstr.farith2
-!                               and type I.fbranch = SparcInstr.fbranch
-!                               and type I.fcmp = SparcInstr.fcmp
-!                               and type I.fload = SparcInstr.fload
-!                               and type I.fsize = SparcInstr.fsize
-!                               and type I.fstore = SparcInstr.fstore
-!                               and type I.instr = SparcInstr.instr
-!                               and type I.instruction = SparcInstr.instruction
-!                               and type I.load = SparcInstr.load
-!                               and type I.operand = SparcInstr.operand
-!                               and type I.prediction = SparcInstr.prediction
-!                               and type I.rcond = SparcInstr.rcond
-!                               and type I.shift = SparcInstr.shift
-!                               and type I.store = SparcInstr.store
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = SparcInstr and T = SparcInstr.T *)
-!                              where type I.addressing_mode = SparcInstr.addressing_mode
-!                                and type I.ea = SparcInstr.ea
-!                                and type I.instr = SparcInstr.instr
-!                                and type I.instruction = SparcInstr.instruction
-!                                and type I.operand = SparcInstr.operand
-!                              where type T.Basis.cond = SparcInstr.T.Basis.cond
-!                                and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
-!                                and type T.Basis.ext = SparcInstr.T.Basis.ext
-!                                and type T.Basis.fcond = SparcInstr.T.Basis.fcond
-!                                and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
-!                                and type T.Constant.const = SparcInstr.T.Constant.const
-!                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
-!                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
-!                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
-!                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
-!                                and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
-!                                and type T.Region.region = SparcInstr.T.Region.region
-!                                and type T.ccexp = SparcInstr.T.ccexp
-!                                and type T.fexp = SparcInstr.T.fexp
-!                                (* and type T.labexp = SparcInstr.T.labexp *)
-!                                and type T.mlrisc = SparcInstr.T.mlrisc
-!                                and type T.oper = SparcInstr.T.oper
-!                                and type T.rep = SparcInstr.T.rep
-!                                and type T.rexp = SparcInstr.T.rexp
-!                                and type T.stm = SparcInstr.T.stm
-  			  
-     (* 
-***************
-*** 28,32 ****
-      * cheaper when their costs are lower.
-      *)
-!    val muluCost : int ref  (* cost of unsigned multiplication in cycles *)
-     val divuCost : int ref (* cost of unsigned division in cycles *)
-     val multCost : int ref (* cost of trapping/signed multiplication in cycles *)
---- 88,92 ----
-      * cheaper when their costs are lower.
-      *)
-!    val muluCost : int ref (* cost of unsigned multiplication in cycles *)
-     val divuCost : int ref (* cost of unsigned division in cycles *)
-     val multCost : int ref (* cost of trapping/signed multiplication in cycles *)
-***************
-*** 77,81 ****
-                             )
-  
-!   functor Multiply32 = MLTreeMult
-      (structure I = I
-       structure T = T
---- 137,142 ----
-                             )
-  
-!   (* signed, trapping version of multiply and divide *)
-!   structure Mult32 = MLTreeMult
-      (structure I = I
-       structure T = T
-***************
-*** 90,96 ****
-       fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
-       fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
-!     )
-  
-!   functor Multiply64 = MLTreeMult
-      (structure I = I
-       structure T = T
---- 151,169 ----
-       fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
-       fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
-!     
-!      val trapping = true
-!      val multCost = multCost 
-!      fun addv{r1,r2,d} = 
-!          I.arith{a=I.ADDCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
-!      fun subv{r1,r2,d} = 
-!          I.arith{a=I.SUBCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
-!      val sh1addv = NONE 
-!      val sh2addv = NONE 
-!      val sh3addv = NONE 
-!      
-!      val signed = true)
-  
-!   (* unsigned, non-trapping version of multiply and divide *)
-!   structure Mulu32 = MLTreeMult
-      (structure I = I
-       structure T = T
-***************
-*** 98,127 ****
-       type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-       type argi = {r:CB.cell,i:int,d:CB.cell}
-!       
-!      val intTy = 64    
-       fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-       fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
-!     )
-! 
-!   (* signed, trapping version of multiply and divide *)
-!   structure Mult32 = Multiply32
-!     (val trapping = true
-!      val multCost = multCost 
-!      fun addv{r1,r2,d} = 
-!          I.arith{a=I.ADDCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
-!      fun subv{r1,r2,d} = 
-!          I.arith{a=I.SUBCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
-       val sh1addv = NONE 
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!     )
-!     (val signed = true)
-  
-!   (* unsigned, non-trapping version of multiply and divide *)
-!   functor Mul32 = Multiply32
-!     (val trapping = false
-       val multCost = muluCost
-       fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
---- 171,208 ----
-       type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-       type argi = {r:CB.cell,i:int,d:CB.cell}
-!   
-!      val intTy = 32    
-       fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-       fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLL,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
-!      
-!      val trapping = false
-!      val multCost = muluCost
-!      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
-!      fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
-       val sh1addv = NONE 
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!      
-!      val signed = false)
-  
-!   (* signed, non-trapping version of multiply and divide *)
-!   structure Muls32 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-!   
-!      val intTy = 32    
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLL,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
-!      
-!      val trapping = false
-       val multCost = muluCost
-       fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
-***************
-*** 130,141 ****
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!     )
-!   structure Mulu32 = Mul32(val signed = false)
-! 
-!   structure Muls32 = Mul32(val signed = true)
-  
-    (* signed, trapping version of multiply and divide *)
-!   structure Mult64 = Multiply64
-!     (val trapping = true
-       val multCost = multCost 
-       fun addv{r1,r2,d} = 
---- 211,233 ----
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!      
-!      val signed = true)
-  
-    (* signed, trapping version of multiply and divide *)
-!   structure Mult64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-!       
-!      val intTy = 64    
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
-!      
-!      val trapping = true
-       val multCost = multCost 
-       fun addv{r1,r2,d} = 
-***************
-*** 146,155 ****
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!     )
-!     (val signed = true)
-  
-    (* unsigned, non-trapping version of multiply and divide *)
-!   functor Mul64 = Multiply64
-!     (val trapping = false
-       val multCost = muluCost
-       fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
---- 238,260 ----
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!      
-!      val signed = true)
-  
-    (* unsigned, non-trapping version of multiply and divide *)
-!   structure Mulu64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-!       
-!      val intTy = 64    
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
-!      
-!      val trapping = false
-       val multCost = muluCost
-       fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
-***************
-*** 158,165 ****
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!     )
-!   structure Mulu64 = Mul64(val signed = false)
-  
-!   structure Muls64 = Mul64(val signed = true)
-  
-    datatype commutative = COMMUTE | NOCOMMUTE
---- 263,293 ----
-       val sh2addv = NONE 
-       val sh3addv = NONE 
-!      
-!      val signed = false)
-  
-!   (* signed, non-trapping version of multiply and divide *)
-!   structure Muls64 = MLTreeMult
-!     (structure I = I
-!      structure T = T
-!      structure CB = CellsBasis
-!      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
-!      type argi = {r:CB.cell,i:int,d:CB.cell}
-!       
-!      val intTy = 64    
-!      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
-!      fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
-!      fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
-!      fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
-!      fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
-!      
-!      val trapping = false
-!      val multCost = muluCost
-!      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
-!      fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
-!      val sh1addv = NONE 
-!      val sh2addv = NONE 
-!      val sh3addv = NONE 
-!      
-!      val signed = false)
-  
-    datatype commutative = COMMUTE | NOCOMMUTE
-***************
-*** 216,220 ****
-          | rcond _ = error "rcond"
-  
-!       fun signedCmp(T.LT | T.LE | T.EQ | T.NE | T.GE | T.GT) = true
-          | signedCmp _ = false
-  
---- 344,353 ----
-          | rcond _ = error "rcond"
-  
-!       fun signedCmp T.LT = true
-!         | signedCmp T.LE = true
-!         | signedCmp T.EQ = true
-!         | signedCmp T.NE = true
-!         | signedCmp T.GE = true
-!         | signedCmp T.GT = true
-          | signedCmp _ = false
-  
-***************
-*** 368,373 ****
-  
-        (* convert an expression into an addressing mode *)
-!       and addr(T.ADD(ty, (T.ADD (_, e, T.LI n)|
-! 			  T.ADD (_, T.LI n, e)), T.LI n')) =
-  	  addr(T.ADD (ty, e, T.LI (T.I.ADD (ty, n, n'))))
-  	| addr(T.ADD(ty, T.SUB (_, e, T.LI n), T.LI n')) =
---- 501,507 ----
-  
-        (* convert an expression into an addressing mode *)
-!       and addr(T.ADD(ty, T.ADD (_, e, T.LI n), T.LI n')) =
-! 	  addr(T.ADD (ty, e, T.LI (T.I.ADD (ty, n, n'))))
-! 	| addr(T.ADD(ty, T.ADD (_, T.LI n, e), T.LI n')) =
-  	  addr(T.ADD (ty, e, T.LI (T.I.ADD (ty, n, n'))))
-  	| addr(T.ADD(ty, T.SUB (_, e, T.LI n), T.LI n')) =
-***************
-*** 444,449 ****
-            let val (cond,a,b) =
-                    case a of
-!                     (T.LI _ | T.CONST _ | T.LABEL _) => 
-!                       (T.Basis.swapCond cond,b,a)
-                    | _ => (cond,a,b)
-            in  if V9 then
---- 578,584 ----
-            let val (cond,a,b) =
-                    case a of
-!                     T.LI _ => (T.Basis.swapCond cond,b,a)
-!                   | T.CONST _ => (T.Basis.swapCond cond,b,a)
-!                   | T.LABEL _ => (T.Basis.swapCond cond,b,a)
-                    | _ => (cond,a,b)
-            in  if V9 then
-diff -N -C 2 -r MLRISC/visualization/cfgViewer.sml MLRISC-mlton/visualization/cfgViewer.sml
-*** MLRISC/visualization/cfgViewer.sml	2010-02-03 11:40:45.000000000 -0500
---- MLRISC-mlton/visualization/cfgViewer.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 2,9 ****
-     (structure CFG : CONTROL_FLOW_GRAPH
-      structure GraphViewer : GRAPH_VIEWER
-!     structure Asm	  : INSTRUCTION_EMITTER where I = CFG.I)
-!       : sig
-! 	    val view : CFG.cfg -> unit
-! 	end =
-  struct
+-    structure I : SPARCINSTR
+-    		where T = T
+-    structure TS : MLTREE_STREAM
+-		where T = I.T
+-    structure CFG : CONTROL_FLOW_GRAPH 
+-    		where I = I 
++    structure I : SPARCINSTR (* where T = T *)
++                  where type T.Basis.cond = T.Basis.cond
++                    and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                    and type T.Basis.ext = T.Basis.ext
++                    and type T.Basis.fcond = T.Basis.fcond
++                    and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                    and type T.Constant.const = T.Constant.const
++                    and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                    and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                    and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                    and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                    and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                    and type T.Region.region = T.Region.region
++                    and type T.ccexp = T.ccexp
++                    and type T.fexp = T.fexp
++                    (* and type T.labexp = T.labexp *)
++                    and type T.mlrisc = T.mlrisc
++                    and type T.oper = T.oper
++                    and type T.rep = T.rep
++                    and type T.rexp = T.rexp
++                    and type T.stm = T.stm
++    structure TS : MLTREE_STREAM (* where T = I.T *)
++                   where type T.Basis.cond = I.T.Basis.cond
++                     and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                     and type T.Basis.ext = I.T.Basis.ext
++                     and type T.Basis.fcond = I.T.Basis.fcond
++                     and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                     and type T.Constant.const = I.T.Constant.const
++                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                     and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                     and type T.Region.region = I.T.Region.region
++                     and type T.ccexp = I.T.ccexp
++                     and type T.fexp = I.T.fexp
++                     (* and type T.labexp = I.T.labexp *)
++                     and type T.mlrisc = I.T.mlrisc
++                     and type T.oper = I.T.oper
++                     and type T.rep = I.T.rep
++                     and type T.rexp = I.T.rexp
++                     and type T.stm = I.T.stm
++    structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
+ 
+ 
+     type reducer =
+@@ -27,11 +69,54 @@ end
+ 
+ functor SparcCompInstrExt 
+   (structure I   : SPARCINSTR
+-   structure TS  : MLTREE_STREAM
+-		where T = I.T
+-   structure CFG : CONTROL_FLOW_GRAPH 
+-   		where I = I
+-                  and P = TS.S.P
++   structure TS  : MLTREE_STREAM (* where T = I.T *)
++                   where type T.Basis.cond = I.T.Basis.cond
++                     and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                     and type T.Basis.ext = I.T.Basis.ext
++                     and type T.Basis.fcond = I.T.Basis.fcond
++                     and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                     and type T.Constant.const = I.T.Constant.const
++                     and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                     and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                     and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                     and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                     and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                     and type T.Region.region = I.T.Region.region
++                     and type T.ccexp = I.T.ccexp
++                     and type T.fexp = I.T.fexp
++                     (* and type T.labexp = I.T.labexp *)
++                     and type T.mlrisc = I.T.mlrisc
++                     and type T.oper = I.T.oper
++                     and type T.rep = I.T.rep
++	             and type T.rexp = I.T.rexp
++                     and type T.stm = I.T.stm
++   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
++                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = TS.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = TS.S.P.T.Region.region
++                      and type P.T.ccexp = TS.S.P.T.ccexp
++                      and type P.T.fexp = TS.S.P.T.fexp
++                      (* and type P.T.labexp = TS.S.P.T.labexp *)
++                      and type P.T.mlrisc = TS.S.P.T.mlrisc
++                      and type P.T.oper = TS.S.P.T.oper
++                      and type P.T.rep = TS.S.P.T.rep
++                      and type P.T.rexp = TS.S.P.T.rexp
++                      and type P.T.stm = TS.S.P.T.stm
+   ) : SPARCCOMP_INSTR_EXT = 
+ struct
      structure CFG = CFG
---- 2,14 ----
-     (structure CFG : CONTROL_FLOW_GRAPH
-      structure GraphViewer : GRAPH_VIEWER
-!     structure Asm	  : INSTRUCTION_EMITTER (* where I = CFG.I *)
-!                             where type I.addressing_mode = CFG.I.addressing_mode
-!                               and type I.ea = CFG.I.ea
-!                               and type I.instr = CFG.I.instr
-!                               and type I.instruction = CFG.I.instruction
-!                               and type I.operand = CFG.I.operand
-!    ) : sig
-! 	  val view : CFG.cfg -> unit
-!        end =
-  struct
-     structure CFG = CFG
-diff -N -C 2 -r MLRISC/x86/backpatch/x86Jumps.sml MLRISC-mlton/x86/backpatch/x86Jumps.sml
-*** MLRISC/x86/backpatch/x86Jumps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/backpatch/x86Jumps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,12 ****
-  functor X86Jumps
-    (structure Instr : X86INSTR
-!    structure Eval : MLTREE_EVAL where T = Instr.T
-!    structure Shuffle : X86SHUFFLE where I = Instr
-!    structure MCEmitter : MC_EMIT where I = Instr) : SDI_JUMPS = 
-  struct
-    structure I = Instr
---- 6,75 ----
-  functor X86Jumps
-    (structure Instr : X86INSTR
-!    structure Eval : MLTREE_EVAL (* where T = Instr.T *)
-!                     where type T.Basis.cond = Instr.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = Instr.T.Basis.ext
-!                       and type T.Basis.fcond = Instr.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                       and type T.Constant.const = Instr.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                       and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                       and type T.Region.region = Instr.T.Region.region
-!                       and type T.ccexp = Instr.T.ccexp
-!                       and type T.fexp = Instr.T.fexp
-!                       (* and type T.labexp = Instr.T.labexp *)
-!                       and type T.mlrisc = Instr.T.mlrisc
-!                       and type T.oper = Instr.T.oper
-!                       and type T.rep = Instr.T.rep
-!                       and type T.rexp = Instr.T.rexp
-!                       and type T.stm = Instr.T.stm
-!    structure Shuffle : X86SHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          (* and type I.addressing_mode = Instr.addressing_mode *)
-!                          and type I.binaryOp = Instr.binaryOp
-!                          and type I.bitOp = Instr.bitOp
-!                          and type I.cond = Instr.cond
-!                          and type I.fbinOp = Instr.fbinOp
-!                          and type I.fenvOp = Instr.fenvOp
-!                          and type I.fibinOp = Instr.fibinOp
-!                          and type I.fsize = Instr.fsize
-!                          and type I.funOp = Instr.funOp
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.isize = Instr.isize
-!                          and type I.move = Instr.move
-!                          and type I.multDivOp = Instr.multDivOp
-!                          and type I.operand = Instr.operand
-!                          and type I.shiftOp = Instr.shiftOp
-!                          and type I.unaryOp = Instr.unaryOp
-!    structure MCEmitter : MC_EMIT (* where I = Instr *)
-!                          where type I.addressing_mode = Instr.addressing_mode
-!                            and type I.ea = Instr.ea
-!                            and type I.instr = Instr.instr
-!                            and type I.instruction = Instr.instruction
-!                            and type I.operand = Instr.operand
-!   ) : SDI_JUMPS = 
-  struct
-    structure I = Instr
-***************
-*** 40,45 ****
-  	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
-  	   | I.LEA{addr, ...} => operand addr
-! 	   | ( I.CMPL arg | I.CMPW arg | I.CMPB arg 
-! 	     | I.TESTL arg | I.TESTW arg | I.TESTB arg) => cmptest arg
-  	   | I.MULTDIV{src, ...} => operand src
-  	   | I.MUL3{src1, ...} => operand src1
---- 103,112 ----
-  	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
-  	   | I.LEA{addr, ...} => operand addr
-! 	   | I.CMPL arg => cmptest arg
-! 	   | I.CMPW arg => cmptest arg
-! 	   | I.CMPB arg => cmptest arg
-! 	   | I.TESTL arg => cmptest arg
-! 	   | I.TESTW arg => cmptest arg
-! 	   | I.TESTB arg => cmptest arg
-  	   | I.MULTDIV{src, ...} => operand src
-  	   | I.MUL3{src1, ...} => operand src1
-***************
-*** 47,51 ****
-  	   | I.SET{opnd, ...} => operand opnd
-  	   | I.CMOV{src, dst, ...} => operand src 
-! 	   | (I.PUSHL opnd | I.PUSHW opnd | I.PUSHB opnd) => operand opnd
-  	   | I.POP opnd =>  operand opnd
-  	   | I.FSTPT opnd => operand opnd
---- 114,120 ----
-  	   | I.SET{opnd, ...} => operand opnd
-  	   | I.CMOV{src, dst, ...} => operand src 
-! 	   | I.PUSHL opnd => operand opnd
-! 	   | I.PUSHW opnd => operand opnd
-! 	   | I.PUSHB opnd => operand opnd
-  	   | I.POP opnd =>  operand opnd
-  	   | I.FSTPT opnd => operand opnd
-diff -N -C 2 -r MLRISC/x86/c-calls/ia32-svid.sml MLRISC-mlton/x86/c-calls/ia32-svid.sml
-*** MLRISC/x86/c-calls/ia32-svid.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/c-calls/ia32-svid.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 400,404 ****
-  	 *)
-  	  val calleePops = (case #conv proto
-! 		 of (""|"ccall") => false
-  		  | "stdcall" => true
-  		  | conv => error (concat [
---- 400,405 ----
-  	 *)
-  	  val calleePops = (case #conv proto
-! 		 of "" => false
-! 	          | "ccall" => false
-  		  | "stdcall" => true
-  		  | conv => error (concat [
-diff -N -C 2 -r MLRISC/x86/emit/x86Asm.sml MLRISC-mlton/x86/emit/x86Asm.sml
-*** MLRISC/x86/emit/x86Asm.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/x86/emit/x86Asm.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,19 ****
-  
-  functor X86AsmEmitter(structure S : INSTRUCTION_STREAM
-!                       structure Instr : X86INSTR
-!                          where T = S.P.T
-!                       structure Shuffle : X86SHUFFLE
-!                          where I = Instr
-!                       structure MLTreeEval : MLTREE_EVAL
-!                          where T = Instr.T
-  
-  (*#line 512.7 "x86/x86.mdl"*)
-!                       structure MemRegs : MEMORY_REGISTERS where I=Instr
-  
-  (*#line 513.7 "x86/x86.mdl"*)
---- 7,130 ----
-  
-  functor X86AsmEmitter(structure S : INSTRUCTION_STREAM
-!                       structure Instr : X86INSTR (* where T = S.P.T *)
-!                                         where type T.Basis.cond = S.P.T.Basis.cond
-!                                           and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
-!                                           and type T.Basis.ext = S.P.T.Basis.ext
-!                                           and type T.Basis.fcond = S.P.T.Basis.fcond
-!                                           and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
-!                                           and type T.Constant.const = S.P.T.Constant.const
-!                                           and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
-!                                           and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
-!                                           and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
-!                                           and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
-!                                           and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
-!                                           and type T.Region.region = S.P.T.Region.region
-!                                           and type T.ccexp = S.P.T.ccexp
-!                                           and type T.fexp = S.P.T.fexp
-!                                           (* and type T.labexp = S.P.T.labexp *)
-!                                           and type T.mlrisc = S.P.T.mlrisc
-!                                           and type T.oper = S.P.T.oper
-!                                           and type T.rep = S.P.T.rep
-!                                           and type T.rexp = S.P.T.rexp
-!                                           and type T.stm = S.P.T.stm
-!                       structure Shuffle : X86SHUFFLE (* where I = Instr *)
-!                                           where type I.Constant.const = Instr.Constant.const
-!                                             and type I.Region.region = Instr.Region.region
-!                                             and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                             and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                             and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                             and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                             and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                             and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                             and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                             and type I.T.ccexp = Instr.T.ccexp
-!                                             and type I.T.fexp = Instr.T.fexp
-!                                             (* and type I.T.labexp = Instr.T.labexp *)
-!                                             and type I.T.mlrisc = Instr.T.mlrisc
-!                                             and type I.T.oper = Instr.T.oper
-!                                             and type I.T.rep = Instr.T.rep
-!                                             and type I.T.rexp = Instr.T.rexp
-!                                             and type I.T.stm = Instr.T.stm
-!                                             (* and type I.addressing_mode = Instr.addressing_mode *)
-!                                             and type I.binaryOp = Instr.binaryOp
-!                                             and type I.bitOp = Instr.bitOp
-!                                             and type I.cond = Instr.cond
-!                                             and type I.fbinOp = Instr.fbinOp
-!                                             and type I.fenvOp = Instr.fenvOp
-!                                             and type I.fibinOp = Instr.fibinOp
-!                                             and type I.fsize = Instr.fsize
-!                                             and type I.funOp = Instr.funOp
-!                                             and type I.instr = Instr.instr
-!                                             and type I.instruction = Instr.instruction
-!                                             and type I.isize = Instr.isize
-!                                             and type I.move = Instr.move
-!                                             and type I.multDivOp = Instr.multDivOp
-!                                             and type I.operand = Instr.operand
-!                                             and type I.shiftOp = Instr.shiftOp
-!                                             and type I.unaryOp = Instr.unaryOp
-!                       structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                                              where type T.Basis.cond = Instr.T.Basis.cond
-!                                                and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                                and type T.Basis.ext = Instr.T.Basis.ext
-!                                                and type T.Basis.fcond = Instr.T.Basis.fcond
-!                                                and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                                and type T.Constant.const = Instr.T.Constant.const
-!                                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                                and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                                and type T.Region.region = Instr.T.Region.region
-!                                                and type T.ccexp = Instr.T.ccexp
-!                                                and type T.fexp = Instr.T.fexp
-!                                                (* and type T.labexp = Instr.T.labexp *)
-!                                                and type T.mlrisc = Instr.T.mlrisc
-!                                                and type T.oper = Instr.T.oper
-!                                                and type T.rep = Instr.T.rep
-!                                                and type T.rexp = Instr.T.rexp
-!                                                and type T.stm = Instr.T.stm
-  
-  (*#line 512.7 "x86/x86.mdl"*)
-!                       structure MemRegs : MEMORY_REGISTERS (* where I = Instr *)
-!                                           where type I.Constant.const = Instr.Constant.const
-!                                             and type I.Region.region = Instr.Region.region
-!                                             and type I.T.Basis.cond = Instr.T.Basis.cond
-!                                             and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                                             and type I.T.Basis.ext = Instr.T.Basis.ext
-!                                             and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                                             and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                                             and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                                             and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                                             and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                                             and type I.T.ccexp = Instr.T.ccexp
-!                                             and type I.T.fexp = Instr.T.fexp
-!                                             (* and type I.T.labexp = Instr.T.labexp *)
-!                                             and type I.T.mlrisc = Instr.T.mlrisc
-!                                             and type I.T.oper = Instr.T.oper
-!                                             and type I.T.rep = Instr.T.rep
-!                                             and type I.T.rexp = Instr.T.rexp
-!                                             and type I.T.stm = Instr.T.stm
-!                                             (* and type I.addressing_mode = Instr.addressing_mode *)
-!                                             and type I.binaryOp = Instr.binaryOp
-!                                             and type I.bitOp = Instr.bitOp
-!                                             and type I.cond = Instr.cond
-!                                             and type I.fbinOp = Instr.fbinOp
-!                                             and type I.fenvOp = Instr.fenvOp
-!                                             and type I.fibinOp = Instr.fibinOp
-!                                             and type I.fsize = Instr.fsize
-!                                             and type I.funOp = Instr.funOp
-!                                             and type I.instr = Instr.instr
-!                                             and type I.instruction = Instr.instruction
-!                                             and type I.isize = Instr.isize
-!                                             and type I.move = Instr.move
-!                                             and type I.multDivOp = Instr.multDivOp
-!                                             and type I.operand = Instr.operand
-!                                             and type I.shiftOp = Instr.shiftOp
-!                                             and type I.unaryOp = Instr.unaryOp
-  
-  (*#line 513.7 "x86/x86.mdl"*)
-***************
-*** 371,375 ****
-         in 
-            (case Char.toLower (String.sub (fbinOp, n - 1)) of
-!             (#"s" | #"l") => String.substring (fbinOp, 0, n - 1)
-            | _ => fbinOp
-            )
---- 482,487 ----
-         in 
-            (case Char.toLower (String.sub (fbinOp, n - 1)) of
-!             #"s" => String.substring (fbinOp, 0, n - 1)
-!           | #"l" => String.substring (fbinOp, 0, n - 1)
-            | _ => fbinOp
-            )
-***************
-*** 512,517 ****
-         | I.BINARY{binOp, src, dst} => 
-           (case (src, binOp) of
-!            (I.Direct _, (I.SARL | I.SHRL | I.SHLL | I.SARW | I.SHRW | I.SHLW | I.SARB | I.SHRB | I.SHLB)) => 
-!               
-             ( emit_binaryOp binOp; 
-               emit "\t%cl, "; 
---- 624,660 ----
-         | I.BINARY{binOp, src, dst} => 
-           (case (src, binOp) of
-!            (I.Direct _, (I.SARL)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHRL)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHLL)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SARW)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHRW)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHLW)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SARB)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHRB)) => 
-!            ( emit_binaryOp binOp; 
-!              emit "\t%cl, "; 
-!              emit_dst dst )
-!          | (I.Direct _, (I.SHLB)) => 
-             ( emit_binaryOp binOp; 
-               emit "\t%cl, "; 
-diff -N -C 2 -r MLRISC/x86/flowgraph/x86-darwin-pseudo-ops.sml MLRISC-mlton/x86/flowgraph/x86-darwin-pseudo-ops.sml
-*** MLRISC/x86/flowgraph/x86-darwin-pseudo-ops.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/flowgraph/x86-darwin-pseudo-ops.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 8,12 ****
-  
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL  where T = T
-  
-    ) : PSEUDO_OPS_BASIS = struct
---- 8,32 ----
-  
-      structure T : MLTREE
-!     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                            where type T.Basis.cond = T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = T.Basis.ext
-!                              and type T.Basis.fcond = T.Basis.fcond
-!                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                              and type T.Constant.const = T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                              and type T.Region.region = T.Region.region
-!                              and type T.ccexp = T.ccexp
-!                              and type T.fexp = T.fexp
-!                              (* and type T.labexp = T.labexp *)
-!                              and type T.mlrisc = T.mlrisc
-!                              and type T.oper = T.oper
-!                              and type T.rep = T.rep
-!                              and type T.rexp = T.rexp
-!                              and type T.stm = T.stm
-  
-    ) : PSEUDO_OPS_BASIS = struct
-diff -N -C 2 -r MLRISC/x86/flowgraph/x86GasPseudoOps.sml MLRISC-mlton/x86/flowgraph/x86GasPseudoOps.sml
-*** MLRISC/x86/flowgraph/x86GasPseudoOps.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/flowgraph/x86GasPseudoOps.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,10 ****
-  functor X86GasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL  where T = T
-      ) : PSEUDO_OPS_BASIS = 
-  
---- 6,30 ----
-  functor X86GasPseudoOps 
-     ( structure T : MLTREE
-!      structure MLTreeEval : MLTREE_EVAL (* where T = T *)
-!                             where type T.Basis.cond = T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = T.Basis.ext
-!                               and type T.Basis.fcond = T.Basis.fcond
-!                               and type T.Basis.rounding_mode = T.Basis.rounding_mode
-!                               and type T.Constant.const = T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
-!                               and type T.I.div_rounding_mode = T.I.div_rounding_mode
-!                               and type T.Region.region = T.Region.region
-!                               and type T.ccexp = T.ccexp
-!                               and type T.fexp = T.fexp
-!                               (* and type T.labexp = T.labexp *)
-!                               and type T.mlrisc = T.mlrisc
-!                               and type T.oper = T.oper
-!                               and type T.rep = T.rep
-!                               and type T.rexp = T.rexp
-!                               and type T.stm = T.stm
-      ) : PSEUDO_OPS_BASIS = 
-  
-diff -N -C 2 -r MLRISC/x86/instructions/x86Instr.sml MLRISC-mlton/x86/instructions/x86Instr.sml
-*** MLRISC/x86/instructions/x86Instr.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/instructions/x86Instr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-  sig
-     structure C : X86CELLS
-!    structure CB : CELLS_BASIS = CellsBasis
+diff --git a/sparc/mltree/sparc.sml b/sparc/mltree/sparc.sml
+index b8e7e40..ecb9b8e 100644
+--- a/sparc/mltree/sparc.sml
++++ b/sparc/mltree/sparc.sml
+@@ -14,12 +14,72 @@
+ 
+ functor Sparc
+   (structure SparcInstr : SPARCINSTR
+-   structure PseudoInstrs : SPARC_PSEUDO_INSTR 
+-   			where I = SparcInstr
+-   structure ExtensionComp : MLTREE_EXTENSION_COMP
+-   			where I = SparcInstr
+-			  and T = SparcInstr.T
+-
++   structure PseudoInstrs : SPARC_PSEUDO_INSTR (* where I = SparcInstr *)
++                            where type I.Constant.const = SparcInstr.Constant.const
++                              and type I.Region.region = SparcInstr.Region.region
++                              and type I.T.Basis.cond = SparcInstr.T.Basis.cond
++                              and type I.T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
++                              and type I.T.Basis.ext = SparcInstr.T.Basis.ext
++                              and type I.T.Basis.fcond = SparcInstr.T.Basis.fcond
++                              and type I.T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
++                              and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
++                              and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
++                              and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
++                              and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
++                              and type I.T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
++                              and type I.T.ccexp = SparcInstr.T.ccexp
++                              and type I.T.fexp = SparcInstr.T.fexp
++                              (* and type I.T.labexp = SparcInstr.T.labexp *)
++                              and type I.T.mlrisc = SparcInstr.T.mlrisc
++                              and type I.T.oper = SparcInstr.T.oper
++                              and type I.T.rep = SparcInstr.T.rep
++                              and type I.T.rexp = SparcInstr.T.rexp
++                              and type I.T.stm = SparcInstr.T.stm
++                              and type I.arith = SparcInstr.arith
++                              and type I.branch = SparcInstr.branch
++                              and type I.cc = SparcInstr.cc
++                              and type I.ea = SparcInstr.ea
++                              and type I.farith1 = SparcInstr.farith1
++                              and type I.farith2 = SparcInstr.farith2
++                              and type I.fbranch = SparcInstr.fbranch
++                              and type I.fcmp = SparcInstr.fcmp
++                              and type I.fload = SparcInstr.fload
++                              and type I.fsize = SparcInstr.fsize
++                              and type I.fstore = SparcInstr.fstore
++                              and type I.instr = SparcInstr.instr
++                              and type I.instruction = SparcInstr.instruction
++                              and type I.load = SparcInstr.load
++                              and type I.operand = SparcInstr.operand
++                              and type I.prediction = SparcInstr.prediction
++                              and type I.rcond = SparcInstr.rcond
++                              and type I.shift = SparcInstr.shift
++                              and type I.store = SparcInstr.store
++   structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = SparcInstr and T = SparcInstr.T *)
++                             where type I.addressing_mode = SparcInstr.addressing_mode
++                               and type I.ea = SparcInstr.ea
++                               and type I.instr = SparcInstr.instr
++                               and type I.instruction = SparcInstr.instruction
++                               and type I.operand = SparcInstr.operand
++                             where type T.Basis.cond = SparcInstr.T.Basis.cond
++                               and type T.Basis.div_rounding_mode = SparcInstr.T.Basis.div_rounding_mode
++                               and type T.Basis.ext = SparcInstr.T.Basis.ext
++                               and type T.Basis.fcond = SparcInstr.T.Basis.fcond
++                               and type T.Basis.rounding_mode = SparcInstr.T.Basis.rounding_mode
++                               and type T.Constant.const = SparcInstr.T.Constant.const
++                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) SparcInstr.T.Extension.ccx
++                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) SparcInstr.T.Extension.fx
++                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) SparcInstr.T.Extension.rx
++                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) SparcInstr.T.Extension.sx
++                               and type T.I.div_rounding_mode = SparcInstr.T.I.div_rounding_mode
++                               and type T.Region.region = SparcInstr.T.Region.region
++                               and type T.ccexp = SparcInstr.T.ccexp
++                               and type T.fexp = SparcInstr.T.fexp
++                               (* and type T.labexp = SparcInstr.T.labexp *)
++                               and type T.mlrisc = SparcInstr.T.mlrisc
++                               and type T.oper = SparcInstr.T.oper
++                               and type T.rep = SparcInstr.T.rep
++                               and type T.rexp = SparcInstr.T.rexp
++                               and type T.stm = SparcInstr.T.stm
+ 			  
+    (* 
+     * The client should also specify these parameters.
+@@ -76,7 +136,8 @@ struct
+                             val rep = NEITHER 
+                            )
+ 
+-  functor Multiply32 = MLTreeMult
++  (* signed, trapping version of multiply and divide *)
++  structure Mult32 = MLTreeMult
+     (structure I = I
+      structure T = T
+      structure CB = CellsBasis
+@@ -89,54 +150,85 @@ struct
+      fun slli{r,i,d} = [I.shift{s=I.SLL,r=r,i=I.IMMED i,d=d}]
+      fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
+      fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
+-    )
+ 
+-  functor Multiply64 = MLTreeMult
++     val trapping = true
++     val multCost = multCost
++     fun addv{r1,r2,d} =
++         I.arith{a=I.ADDCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32
++     fun subv{r1,r2,d} =
++         I.arith{a=I.SUBCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32
++     val sh1addv = NONE
++     val sh2addv = NONE
++     val sh3addv = NONE
++     
++     val signed = true)
++
++  (* unsigned, non-trapping version of multiply and divide *)
++  structure Mulu32 = MLTreeMult
+     (structure I = I
+      structure T = T
+      structure CB = CellsBasis
+      type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
+      type argi = {r:CB.cell,i:int,d:CB.cell}
+       
+-     val intTy = 64    
++     val intTy = 32
+      fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
+      fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
+-     fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
+-     fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
+-     fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
+-    )
++     fun slli{r,i,d} = [I.shift{s=I.SLL,r=r,i=I.IMMED i,d=d}]
++     fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
++     fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
+ 
+-  (* signed, trapping version of multiply and divide *)
+-  structure Mult32 = Multiply32
+-    (val trapping = true
+-     val multCost = multCost 
+-     fun addv{r1,r2,d} = 
+-         I.arith{a=I.ADDCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
+-     fun subv{r1,r2,d} = 
+-         I.arith{a=I.SUBCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap32 
++     val trapping = false
++     val multCost = muluCost
++     fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
++     fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
+      val sh1addv = NONE 
+      val sh2addv = NONE 
+      val sh3addv = NONE 
+-    )
+-    (val signed = true)
+ 
+-  (* unsigned, non-trapping version of multiply and divide *)
+-  functor Mul32 = Multiply32
+-    (val trapping = false
++     val signed = false)
++
++  (* signed, non-trapping version of multiply and divide *)
++  structure Muls32 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++  
++     val intTy = 32
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
++     fun slli{r,i,d} = [I.shift{s=I.SLL,r=r,i=I.IMMED i,d=d}]
++     fun srli{r,i,d} = [I.shift{s=I.SRL,r=r,i=I.IMMED i,d=d}]
++     fun srai{r,i,d} = [I.shift{s=I.SRA,r=r,i=I.IMMED i,d=d}]
++     
++     val trapping = false
+      val multCost = muluCost
+      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
+      fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
+      val sh1addv = NONE 
+      val sh2addv = NONE 
+      val sh3addv = NONE 
+-    )
+-  structure Mulu32 = Mul32(val signed = false)
+ 
+-  structure Muls32 = Mul32(val signed = true)
++     val signed = true)
+ 
+   (* signed, trapping version of multiply and divide *)
+-  structure Mult64 = Multiply64
+-    (val trapping = true
++  structure Mult64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++      
++     val intTy = 64
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
++     fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
++     fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
++     fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
++     
++     val trapping = true
+      val multCost = multCost 
+      fun addv{r1,r2,d} = 
+          I.arith{a=I.ADDCC,r=r1,i=I.REG r2,d=d}::PseudoInstrs.overflowtrap64 
+@@ -145,22 +237,58 @@ struct
+      val sh1addv = NONE 
+      val sh2addv = NONE 
+      val sh3addv = NONE 
+-    )
+-    (val signed = true)
++     
++     val signed = true)
+ 
+   (* unsigned, non-trapping version of multiply and divide *)
+-  functor Mul64 = Multiply64
+-    (val trapping = false
++  structure Mulu64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++      
++     val intTy = 64
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
++     fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
++     fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
++     fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
++     
++     val trapping = false
+      val multCost = muluCost
+      fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
+      fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
+      val sh1addv = NONE 
+      val sh2addv = NONE 
+      val sh3addv = NONE 
+-    )
+-  structure Mulu64 = Mul64(val signed = false)
+ 
+-  structure Muls64 = Mul64(val signed = true)
++     val signed = false)
++
++  (* signed, non-trapping version of multiply and divide *)
++  structure Muls64 = MLTreeMult
++    (structure I = I
++     structure T = T
++     structure CB = CellsBasis
++     type arg  = {r1:CB.cell,r2:CB.cell,d:CB.cell}
++     type argi = {r:CB.cell,i:int,d:CB.cell}
++      
++     val intTy = 64
++     fun mov{r,d} = COPY{dst=[d],src=[r],tmp=NONE}
++     fun add{r1,r2,d} = I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}
++     fun slli{r,i,d} = [I.shift{s=I.SLLX,r=r,i=I.IMMED i,d=d}]
++     fun srli{r,i,d} = [I.shift{s=I.SRLX,r=r,i=I.IMMED i,d=d}]
++     fun srai{r,i,d} = [I.shift{s=I.SRAX,r=r,i=I.IMMED i,d=d}]
++     
++     val trapping = false
++     val multCost = muluCost
++     fun addv{r1,r2,d} = [I.arith{a=I.ADD,r=r1,i=I.REG r2,d=d}]
++     fun subv{r1,r2,d} = [I.arith{a=I.SUB,r=r1,i=I.REG r2,d=d}]
++     val sh1addv = NONE
++     val sh2addv = NONE
++     val sh3addv = NONE
++     
++     val signed = false)
+ 
+   datatype commutative = COMMUTE | NOCOMMUTE
+   datatype cc = REG    (* write to register *)
+@@ -215,7 +343,12 @@ struct
+         | rcond T.GT  = I.RGZ
+         | rcond _ = error "rcond"
+ 
+-      fun signedCmp(T.LT | T.LE | T.EQ | T.NE | T.GE | T.GT) = true
++      fun signedCmp T.LT = true
++        | signedCmp T.LE = true
++        | signedCmp T.EQ = true
++        | signedCmp T.NE = true
++        | signedCmp T.GE = true
++        | signedCmp T.GT = true
+         | signedCmp _ = false
+ 
+       fun fcond T.==  = I.FBE
+@@ -367,8 +500,9 @@ struct
+           mark(I.FPop2{a=a,r1=fexpr e1,r2=fexpr e2,d=d},an)
+ 
+       (* convert an expression into an addressing mode *)
+-      and addr(T.ADD(ty, (T.ADD (_, e, T.LI n)|
+-			  T.ADD (_, T.LI n, e)), T.LI n')) =
++      and addr(T.ADD(ty, T.ADD (_, e, T.LI n), T.LI n')) =
++	  addr(T.ADD (ty, e, T.LI (T.I.ADD (ty, n, n'))))
++	| addr(T.ADD(ty, T.ADD (_, T.LI n, e), T.LI n')) =
+ 	  addr(T.ADD (ty, e, T.LI (T.I.ADD (ty, n, n'))))
+ 	| addr(T.ADD(ty, T.SUB (_, e, T.LI n), T.LI n')) =
+ 	  addr(T.ADD (ty, e, T.LI (T.I.SUB (ty, n', n))))
+@@ -443,8 +577,9 @@ struct
+       and branch(T.CMP(ty,cond,a,b),lab,an) =
+           let val (cond,a,b) =
+                   case a of
+-                    (T.LI _ | T.CONST _ | T.LABEL _) => 
+-                      (T.Basis.swapCond cond,b,a)
++                    T.LI _ => (T.Basis.swapCond cond,b,a)
++                  | T.CONST _ => (T.Basis.swapCond cond,b,a)
++                  | T.LABEL _ => (T.Basis.swapCond cond,b,a)
+                   | _ => (cond,a,b)
+           in  if V9 then
+                  branchV9(cond,a,b,lab,an)
+diff --git a/visualization/cfgViewer.sml b/visualization/cfgViewer.sml
+index 65c6251..877f496 100644
+--- a/visualization/cfgViewer.sml
++++ b/visualization/cfgViewer.sml
+@@ -1,8 +1,13 @@
+ functor CFGViewer
+    (structure CFG : CONTROL_FLOW_GRAPH
+     structure GraphViewer : GRAPH_VIEWER
+-    structure Asm	  : INSTRUCTION_EMITTER where I = CFG.I)
+-      : sig
++    structure Asm	  : INSTRUCTION_EMITTER (* where I = CFG.I *)
++                            where type I.addressing_mode = CFG.I.addressing_mode
++                              and type I.ea = CFG.I.ea
++                              and type I.instr = CFG.I.instr
++                              and type I.instruction = CFG.I.instruction
++                              and type I.operand = CFG.I.operand
++   ) : sig
+ 	    val view : CFG.cfg -> unit
+ 	end =
+ struct
+diff --git a/x86/backpatch/x86Jumps.sml b/x86/backpatch/x86Jumps.sml
+index 120792e..4871ee2 100644
+--- a/x86/backpatch/x86Jumps.sml
++++ b/x86/backpatch/x86Jumps.sml
+@@ -5,9 +5,72 @@
+ 
+ functor X86Jumps
+   (structure Instr : X86INSTR
+-   structure Eval : MLTREE_EVAL where T = Instr.T
+-   structure Shuffle : X86SHUFFLE where I = Instr
+-   structure MCEmitter : MC_EMIT where I = Instr) : SDI_JUMPS = 
++   structure Eval : MLTREE_EVAL (* where T = Instr.T *)
++                    where type T.Basis.cond = Instr.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = Instr.T.Basis.ext
++                      and type T.Basis.fcond = Instr.T.Basis.fcond
++                      and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                      and type T.Constant.const = Instr.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                      and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                      and type T.Region.region = Instr.T.Region.region
++                      and type T.ccexp = Instr.T.ccexp
++                      and type T.fexp = Instr.T.fexp
++                      (* and type T.labexp = Instr.T.labexp *)
++                      and type T.mlrisc = Instr.T.mlrisc
++                      and type T.oper = Instr.T.oper
++                      and type T.rep = Instr.T.rep
++                      and type T.rexp = Instr.T.rexp
++                      and type T.stm = Instr.T.stm
++   structure Shuffle : X86SHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         (* and type I.addressing_mode = Instr.addressing_mode *)
++                         and type I.binaryOp = Instr.binaryOp
++                         and type I.bitOp = Instr.bitOp
++                         and type I.cond = Instr.cond
++                         and type I.fbinOp = Instr.fbinOp
++                         and type I.fenvOp = Instr.fenvOp
++                         and type I.fibinOp = Instr.fibinOp
++                         and type I.fsize = Instr.fsize
++                         and type I.funOp = Instr.funOp
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.isize = Instr.isize
++                         and type I.move = Instr.move
++                         and type I.multDivOp = Instr.multDivOp
++                         and type I.operand = Instr.operand
++                         and type I.shiftOp = Instr.shiftOp
++                         and type I.unaryOp = Instr.unaryOp
++   structure MCEmitter : MC_EMIT (* where I = Instr *)
++                         where type I.addressing_mode = Instr.addressing_mode
++                           and type I.ea = Instr.ea
++                           and type I.instr = Instr.instr
++                           and type I.instruction = Instr.instruction
++                           and type I.operand = Instr.operand
++  ) : SDI_JUMPS =
+ struct
+   structure I = Instr
+   structure C = I.C
+@@ -39,14 +102,20 @@ struct
+ 	   | I.BINARY{src, dst, ...} => operand src orelse operand dst
+ 	   | I.MOVE{src, dst, ...} => operand src orelse operand dst
+ 	   | I.LEA{addr, ...} => operand addr
+-	   | ( I.CMPL arg | I.CMPW arg | I.CMPB arg 
+-	     | I.TESTL arg | I.TESTW arg | I.TESTB arg) => cmptest arg
++	   | I.CMPL arg => cmptest arg
++	   | I.CMPW arg => cmptest arg
++	   | I.CMPB arg => cmptest arg
++	   | I.TESTL arg => cmptest arg
++	   | I.TESTW arg => cmptest arg
++	   | I.TESTB arg => cmptest arg
+ 	   | I.MULTDIV{src, ...} => operand src
+ 	   | I.MUL3{src1, ...} => operand src1
+ 	   | I.UNARY{opnd, ...} => operand opnd
+ 	   | I.SET{opnd, ...} => operand opnd
+ 	   | I.CMOV{src, dst, ...} => operand src 
+-	   | (I.PUSHL opnd | I.PUSHW opnd | I.PUSHB opnd) => operand opnd
++	   | I.PUSHL opnd => operand opnd
++	   | I.PUSHW opnd => operand opnd
++	   | I.PUSHB opnd => operand opnd
+ 	   | I.POP opnd =>  operand opnd
+ 	   | I.FSTPT opnd => operand opnd
+ 	   | I.FSTPL opnd => operand opnd
+diff --git a/x86/c-calls/ia32-svid.sml b/x86/c-calls/ia32-svid.sml
+index 2a70220..57159fa 100644
+--- a/x86/c-calls/ia32-svid.sml
++++ b/x86/c-calls/ia32-svid.sml
+@@ -399,7 +399,8 @@ functor IA32SVID_CCalls (
+ 	 * differences there might be between the SVID and Windows ABIs. (JHR)
+ 	 *)
+ 	  val calleePops = (case #conv proto
+-		 of (""|"ccall") => false
++		 of "" => false
++	          | "ccall" => false
+ 		  | "stdcall" => true
+ 		  | conv => error (concat [
+ 			"unknown calling convention \"", String.toString conv, "\""
+diff --git a/x86/emit/x86Asm.sml b/x86/emit/x86Asm.sml
+index 04ac150..e4d02b4 100644
+--- a/x86/emit/x86Asm.sml
++++ b/x86/emit/x86Asm.sml
+@@ -6,15 +6,126 @@
+ 
+ 
+ functor X86AsmEmitter(structure S : INSTRUCTION_STREAM
+-                      structure Instr : X86INSTR
+-                         where T = S.P.T
+-                      structure Shuffle : X86SHUFFLE
+-                         where I = Instr
+-                      structure MLTreeEval : MLTREE_EVAL
+-                         where T = Instr.T
++                      structure Instr : X86INSTR (* where T = S.P.T *)
++                                        where type T.Basis.cond = S.P.T.Basis.cond
++                                          and type T.Basis.div_rounding_mode = S.P.T.Basis.div_rounding_mode
++                                          and type T.Basis.ext = S.P.T.Basis.ext
++                                          and type T.Basis.fcond = S.P.T.Basis.fcond
++                                          and type T.Basis.rounding_mode = S.P.T.Basis.rounding_mode
++                                          and type T.Constant.const = S.P.T.Constant.const
++                                          and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) S.P.T.Extension.ccx
++                                          and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) S.P.T.Extension.fx
++                                          and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) S.P.T.Extension.rx
++                                          and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) S.P.T.Extension.sx
++                                          and type T.I.div_rounding_mode = S.P.T.I.div_rounding_mode
++                                          and type T.Region.region = S.P.T.Region.region
++                                          and type T.ccexp = S.P.T.ccexp
++                                          and type T.fexp = S.P.T.fexp
++                                          (* and type T.labexp = S.P.T.labexp *)
++                                          and type T.mlrisc = S.P.T.mlrisc
++                                          and type T.oper = S.P.T.oper
++                                          and type T.rep = S.P.T.rep
++                                          and type T.rexp = S.P.T.rexp
++                                          and type T.stm = S.P.T.stm
++                      structure Shuffle : X86SHUFFLE (* where I = Instr *)
++                                          where type I.Constant.const = Instr.Constant.const
++                                            and type I.Region.region = Instr.Region.region
++                                            and type I.T.Basis.cond = Instr.T.Basis.cond
++                                            and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                            and type I.T.Basis.ext = Instr.T.Basis.ext
++                                            and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                            and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                            and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                            and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                            and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                            and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                            and type I.T.ccexp = Instr.T.ccexp
++                                            and type I.T.fexp = Instr.T.fexp
++                                            (* and type I.T.labexp = Instr.T.labexp *)
++                                            and type I.T.mlrisc = Instr.T.mlrisc
++                                            and type I.T.oper = Instr.T.oper
++                                            and type I.T.rep = Instr.T.rep
++                                            and type I.T.rexp = Instr.T.rexp
++                                            and type I.T.stm = Instr.T.stm
++                                            (* and type I.addressing_mode = Instr.addressing_mode *)
++                                            and type I.binaryOp = Instr.binaryOp
++                                            and type I.bitOp = Instr.bitOp
++                                            and type I.cond = Instr.cond
++                                            and type I.fbinOp = Instr.fbinOp
++                                            and type I.fenvOp = Instr.fenvOp
++                                            and type I.fibinOp = Instr.fibinOp
++                                            and type I.fsize = Instr.fsize
++                                            and type I.funOp = Instr.funOp
++                                            and type I.instr = Instr.instr
++                                            and type I.instruction = Instr.instruction
++                                            and type I.isize = Instr.isize
++                                            and type I.move = Instr.move
++                                            and type I.multDivOp = Instr.multDivOp
++                                            and type I.operand = Instr.operand
++                                            and type I.shiftOp = Instr.shiftOp
++                                            and type I.unaryOp = Instr.unaryOp
++                      structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                                             where type T.Basis.cond = Instr.T.Basis.cond
++                                               and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                               and type T.Basis.ext = Instr.T.Basis.ext
++                                               and type T.Basis.fcond = Instr.T.Basis.fcond
++                                               and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                               and type T.Constant.const = Instr.T.Constant.const
++                                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                               and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                               and type T.Region.region = Instr.T.Region.region
++                                               and type T.ccexp = Instr.T.ccexp
++                                               and type T.fexp = Instr.T.fexp
++                                               (* and type T.labexp = Instr.T.labexp *)
++                                               and type T.mlrisc = Instr.T.mlrisc
++                                               and type T.oper = Instr.T.oper
++                                               and type T.rep = Instr.T.rep
++                                               and type T.rexp = Instr.T.rexp
++                                               and type T.stm = Instr.T.stm
+ 
+ (*#line 512.7 "x86/x86.mdl"*)
+-                      structure MemRegs : MEMORY_REGISTERS where I=Instr
++                      structure MemRegs : MEMORY_REGISTERS (* where I = Instr *)
++                                          where type I.Constant.const = Instr.Constant.const
++                                            and type I.Region.region = Instr.Region.region
++                                            and type I.T.Basis.cond = Instr.T.Basis.cond
++                                            and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                                            and type I.T.Basis.ext = Instr.T.Basis.ext
++                                            and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                                            and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                                            and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                                            and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                                            and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                                            and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                                            and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                                            and type I.T.ccexp = Instr.T.ccexp
++                                            and type I.T.fexp = Instr.T.fexp
++                                            (* and type I.T.labexp = Instr.T.labexp *)
++                                            and type I.T.mlrisc = Instr.T.mlrisc
++                                            and type I.T.oper = Instr.T.oper
++                                            and type I.T.rep = Instr.T.rep
++                                            and type I.T.rexp = Instr.T.rexp
++                                            and type I.T.stm = Instr.T.stm
++                                            (* and type I.addressing_mode = Instr.addressing_mode *)
++                                            and type I.binaryOp = Instr.binaryOp
++                                            and type I.bitOp = Instr.bitOp
++                                            and type I.cond = Instr.cond
++                                            and type I.fbinOp = Instr.fbinOp
++                                            and type I.fenvOp = Instr.fenvOp
++                                            and type I.fibinOp = Instr.fibinOp
++                                            and type I.fsize = Instr.fsize
++                                            and type I.funOp = Instr.funOp
++                                            and type I.instr = Instr.instr
++                                            and type I.instruction = Instr.instruction
++                                            and type I.isize = Instr.isize
++                                            and type I.move = Instr.move
++                                            and type I.multDivOp = Instr.multDivOp
++                                            and type I.operand = Instr.operand
++                                            and type I.shiftOp = Instr.shiftOp
++                                            and type I.unaryOp = Instr.unaryOp
+ 
+ (*#line 513.7 "x86/x86.mdl"*)
+                       val memRegBase : CellsBasis.cell option
+@@ -370,7 +481,8 @@ struct
+            val n = size fbinOp
+        in 
+           (case Char.toLower (String.sub (fbinOp, n - 1)) of
+-            (#"s" | #"l") => String.substring (fbinOp, 0, n - 1)
++            #"s" => String.substring (fbinOp, 0, n - 1)
++          | #"l" => String.substring (fbinOp, 0, n - 1)
+           | _ => fbinOp
+           )
+        end
+@@ -511,8 +623,39 @@ struct
+            emit_lsrc lsrc )
+        | I.BINARY{binOp, src, dst} => 
+          (case (src, binOp) of
+-           (I.Direct _, (I.SARL | I.SHRL | I.SHLL | I.SARW | I.SHRW | I.SHLW | I.SARB | I.SHRB | I.SHLB)) => 
+-              
++           (I.Direct _, (I.SARL)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHRL)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHLL)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SARW)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHRW)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHLW)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SARB)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHRB)) =>
++           ( emit_binaryOp binOp;
++             emit "\t%cl, ";
++             emit_dst dst )
++         | (I.Direct _, (I.SHLB)) =>
+            ( emit_binaryOp binOp; 
+              emit "\t%cl, "; 
+              emit_dst dst )
+diff --git a/x86/flowgraph/x86-darwin-pseudo-ops.sml b/x86/flowgraph/x86-darwin-pseudo-ops.sml
+index 4248572..fc8a8ec 100644
+--- a/x86/flowgraph/x86-darwin-pseudo-ops.sml
++++ b/x86/flowgraph/x86-darwin-pseudo-ops.sml
+@@ -7,7 +7,27 @@
+ functor X86DarwinPseudoOps (
+ 
      structure T : MLTREE
-     structure Constant: CONSTANT
---- 9,22 ----
-  sig
-     structure C : X86CELLS
-!    structure CB : CELLS_BASIS (* = CellsBasis *)
-!                   where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                     and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                     and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                     and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                     and type cell = CellsBasis.cell
-!                     and type cellColor = CellsBasis.cellColor
-!                     and type cellkind = CellsBasis.cellkind
-!                     and type cellkindDesc = CellsBasis.cellkindDesc
-!                     and type cellkindInfo = CellsBasis.cellkindInfo
-     structure T : MLTREE
-     structure Constant: CONSTANT
-diff -N -C 2 -r MLRISC/x86/instructions/x86Peephole.peep MLRISC-mlton/x86/instructions/x86Peephole.peep
-*** MLRISC/x86/instructions/x86Peephole.peep	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/instructions/x86Peephole.peep	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 21,25 ****
-     (structure Instr : X86INSTR
-      structure Eval  : MLTREE_EVAL
-!       sharing Instr.T = Eval.T
-     ) : PEEPHOLE =
-  struct
---- 21,45 ----
-     (structure Instr : X86INSTR
-      structure Eval  : MLTREE_EVAL
-!       (* sharing Instr.T = Eval.T *)
-!       where type T.Basis.cond = Instr.T.Basis.cond
-!         and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!         and type T.Basis.ext = Instr.T.Basis.ext
-!         and type T.Basis.fcond = Instr.T.Basis.fcond
-!         and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!         and type T.Constant.const = Instr.T.Constant.const
-!         and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!         and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!         and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!         and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!         and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!         and type T.Region.region = Instr.T.Region.region
-!         and type T.ccexp = Instr.T.ccexp
-!         and type T.fexp = Instr.T.fexp
-!         (* and type T.labexp = Instr.T.labexp *)
-!         and type T.mlrisc = Instr.T.mlrisc
-!         and type T.oper = Instr.T.oper
-!         and type T.rep = Instr.T.rep
-!         and type T.rexp = Instr.T.rexp
-!         and type T.stm = Instr.T.stm
-     ) : PEEPHOLE =
-  struct
-diff -N -C 2 -r MLRISC/x86/instructions/x86Peephole.sml MLRISC-mlton/x86/instructions/x86Peephole.sml
-*** MLRISC/x86/instructions/x86Peephole.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/instructions/x86Peephole.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 13,17 ****
-  
-  (*#line 23.7 "x86Peephole.peep"*)
-!                     sharing Instr.T = Eval.T
-                     ): PEEPHOLE =
-  struct
---- 13,37 ----
-  
-  (*#line 23.7 "x86Peephole.peep"*)
-!                     (* sharing Instr.T = Eval.T *)
-!                     where type T.Basis.cond = Instr.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = Instr.T.Basis.ext
-!                       and type T.Basis.fcond = Instr.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                       and type T.Constant.const = Instr.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                       and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                       and type T.Region.region = Instr.T.Region.region
-!                       and type T.ccexp = Instr.T.ccexp
-!                       and type T.fexp = Instr.T.fexp
-!                       (* and type T.labexp = Instr.T.labexp *)
-!                       and type T.mlrisc = Instr.T.mlrisc
-!                       and type T.oper = Instr.T.oper
-!                       and type T.rep = Instr.T.rep
-!                       and type T.rexp = Instr.T.rexp
-!                       and type T.stm = Instr.T.stm
-                     ): PEEPHOLE =
-  struct
-diff -N -C 2 -r MLRISC/x86/instructions/x86Props.sml MLRISC-mlton/x86/instructions/x86Props.sml
-*** MLRISC/x86/instructions/x86Props.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/instructions/x86Props.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 6,11 ****
-  functor X86Props
+-    structure MLTreeEval : MLTREE_EVAL  where T = T
++    structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                           where type T.Basis.cond = T.Basis.cond
++                             and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                             and type T.Basis.ext = T.Basis.ext
++                             and type T.Basis.fcond = T.Basis.fcond
++                             and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                             and type T.Constant.const = T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                             and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                             and type T.Region.region = T.Region.region
++                             and type T.ccexp = T.ccexp
++                             and type T.fexp = T.fexp
++                             (* and type T.labexp = T.labexp *)
++                             and type T.mlrisc = T.mlrisc
++                             and type T.oper = T.oper
++                             and type T.rep = T.rep
++                             and type T.rexp = T.rexp
++                             and type T.stm = T.stm
+ 
+   ) : PSEUDO_OPS_BASIS = struct
+ 
+diff --git a/x86/flowgraph/x86GasPseudoOps.sml b/x86/flowgraph/x86GasPseudoOps.sml
+index b6b4a12..79e0d57 100644
+--- a/x86/flowgraph/x86GasPseudoOps.sml
++++ b/x86/flowgraph/x86GasPseudoOps.sml
+@@ -5,7 +5,27 @@
+  *)
+ functor X86GasPseudoOps 
+    ( structure T : MLTREE
+-     structure MLTreeEval : MLTREE_EVAL  where T = T
++     structure MLTreeEval : MLTREE_EVAL (* where T = T *)
++                            where type T.Basis.cond = T.Basis.cond
++                              and type T.Basis.div_rounding_mode = T.Basis.div_rounding_mode
++                              and type T.Basis.ext = T.Basis.ext
++                              and type T.Basis.fcond = T.Basis.fcond
++                              and type T.Basis.rounding_mode = T.Basis.rounding_mode
++                              and type T.Constant.const = T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) T.Extension.sx
++                              and type T.I.div_rounding_mode = T.I.div_rounding_mode
++                              and type T.Region.region = T.Region.region
++                              and type T.ccexp = T.ccexp
++                              and type T.fexp = T.fexp
++                              (* and type T.labexp = T.labexp *)
++                              and type T.mlrisc = T.mlrisc
++                              and type T.oper = T.oper
++                              and type T.rep = T.rep
++                              and type T.rexp = T.rexp
++                              and type T.stm = T.stm
+     ) : PSEUDO_OPS_BASIS = 
+ 
+ struct
+diff --git a/x86/instructions/x86Instr.sml b/x86/instructions/x86Instr.sml
+index c9827a7..fdd52b4 100644
+--- a/x86/instructions/x86Instr.sml
++++ b/x86/instructions/x86Instr.sml
+@@ -8,7 +8,16 @@
+ signature X86INSTR =
+ sig
+    structure C : X86CELLS
+-   structure CB : CELLS_BASIS = CellsBasis
++   structure CB : CELLS_BASIS (* = CellsBasis *)
++                  where type CellSet.cellset = CellsBasis.CellSet.cellset
++                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                    and type cell = CellsBasis.cell
++                    and type cellColor = CellsBasis.cellColor
++                    and type cellkind = CellsBasis.cellkind
++                    and type cellkindDesc = CellsBasis.cellkindDesc
++                    and type cellkindInfo = CellsBasis.cellkindInfo
+    structure T : MLTREE
+    structure Constant: CONSTANT
+    structure Region : REGION
+diff --git a/x86/instructions/x86Peephole.peep b/x86/instructions/x86Peephole.peep
+index 0859bd3..2a335ac 100644
+--- a/x86/instructions/x86Peephole.peep
++++ b/x86/instructions/x86Peephole.peep
+@@ -20,7 +20,27 @@ in
+ functor X86Peephole
     (structure Instr : X86INSTR
-!    structure MLTreeHash : MLTREE_HASH where T = Instr.T
-!    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-    ) : INSN_PROPERTIES =
-  struct
---- 6,51 ----
-  functor X86Props
-    (structure Instr : X86INSTR
-!    structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-    ) : INSN_PROPERTIES =
-  struct
-***************
-*** 231,236 ****
-        in
-  	case multDivOp
-! 	 of (I.IDIVL1 | I.DIVL1) => (eaxPair, C.edx::C.eax::uses)
-! 	  | (I.IMULL1 | I.MULL1) => (eaxPair, C.eax::uses)
-        end
-  
---- 271,278 ----
-        in
-  	case multDivOp
-! 	 of I.IDIVL1 => (eaxPair, C.edx::C.eax::uses)
-! 	  | I.DIVL1 => (eaxPair, C.edx::C.eax::uses)
-! 	  | I.IMULL1 => (eaxPair, C.eax::uses)
-! 	  | I.MULL1 => (eaxPair, C.eax::uses)
-        end
-  
-***************
-*** 250,255 ****
-  	| I.MOVE{src, dst, ...} => ([], operandAcc(dst, operandUse src))
-  	| I.LEA{r32, addr}      => ([r32], operandUse addr)
-! 	| ( I.CMPL arg | I.CMPW arg | I.CMPB arg
-! 	  | I.TESTL arg | I.TESTW arg | I.TESTB arg ) => cmptest arg 
-  	| I.BITOP{lsrc, rsrc, ...} => cmptest{lsrc=lsrc,rsrc=rsrc}
-  	| I.BINARY{binOp=I.XORL,src=I.Direct rs,dst=I.Direct rd,...} =>   
---- 292,301 ----
-  	| I.MOVE{src, dst, ...} => ([], operandAcc(dst, operandUse src))
-  	| I.LEA{r32, addr}      => ([r32], operandUse addr)
-! 	| I.CMPL arg => cmptest arg 
-! 	| I.CMPW arg => cmptest arg 
-! 	| I.CMPB arg => cmptest arg 
-! 	| I.TESTL arg => cmptest arg 
-! 	| I.TESTW arg => cmptest arg 
-! 	| I.TESTB arg => cmptest arg 
-  	| I.BITOP{lsrc, rsrc, ...} => cmptest{lsrc=lsrc,rsrc=rsrc}
-  	| I.BINARY{binOp=I.XORL,src=I.Direct rs,dst=I.Direct rd,...} =>   
-***************
-*** 269,273 ****
-  	| I.UNARY{opnd, ...}    => unary opnd
-  	| I.SET{opnd, ...}      => unary opnd
-! 	| ( I.PUSHL arg | I.PUSHW arg | I.PUSHB arg ) => push arg
-  	| I.POP arg	      => (C.stackptrR::operandDef arg, [C.stackptrR])
-  	| I.PUSHFD	      => espOnly()
---- 315,321 ----
-  	| I.UNARY{opnd, ...}    => unary opnd
-  	| I.SET{opnd, ...}      => unary opnd
-! 	| I.PUSHL arg => push arg
-! 	| I.PUSHW arg => push arg
-! 	| I.PUSHB arg => push arg
-  	| I.POP arg	      => (C.stackptrR::operandDef arg, [C.stackptrR])
-  	| I.PUSHFD	      => espOnly()
-diff -N -C 2 -r MLRISC/x86/instructions/x86comp-instr-ext.sml MLRISC-mlton/x86/instructions/x86comp-instr-ext.sml
-*** MLRISC/x86/instructions/x86comp-instr-ext.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/instructions/x86comp-instr-ext.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 7,15 ****
-  signature X86COMP_INSTR_EXT = sig
-    structure I : X86INSTR
-!   structure TS : MLTREE_STREAM
-! 		 where T = I.T
-!   structure CFG : CONTROL_FLOW_GRAPH 
-!  	         where I = I
-!                    and P = TS.S.P
-  
-    type reducer = 
---- 7,58 ----
-  signature X86COMP_INSTR_EXT = sig
-    structure I : X86INSTR
-!   structure TS : MLTREE_STREAM (* where T = I.T *)
-!                  where type T.Basis.cond = I.T.Basis.cond
-!                    and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                    and type T.Basis.ext = I.T.Basis.ext
-!                    and type T.Basis.fcond = I.T.Basis.fcond
-!                    and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                    and type T.Constant.const = I.T.Constant.const
-!                    and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                    and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                    and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                    and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                    and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                    and type T.Region.region = I.T.Region.region
-!                    and type T.ccexp = I.T.ccexp
-!                    and type T.fexp = I.T.fexp
-!                    (* and type T.labexp = I.T.labexp *)
-!                    and type T.mlrisc = I.T.mlrisc
-!                    and type T.oper = I.T.oper
-!                    and type T.rep = I.T.rep
-! 	           and type T.rexp = I.T.rexp
-!                    and type T.stm = I.T.stm
-!   structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
-!                   where type I.addressing_mode = I.addressing_mode
-!                     and type I.ea = I.ea
-!                     and type I.instr = I.instr
-!                     and type I.instruction = I.instruction
-!                     and type I.operand = I.operand
-!                   where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                     and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                     and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                     and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                     and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                     and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                     and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                     and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                     and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                     and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                     and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                     and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                     and type P.T.Region.region = TS.S.P.T.Region.region
-!                     and type P.T.ccexp = TS.S.P.T.ccexp
-!                     and type P.T.fexp = TS.S.P.T.fexp
-!                     (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                     and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                     and type P.T.oper = TS.S.P.T.oper
-!                     and type P.T.rep = TS.S.P.T.rep
-!                     and type P.T.rexp = TS.S.P.T.rexp
-!                     and type P.T.stm = TS.S.P.T.stm
-  
-    type reducer = 
-***************
-*** 28,36 ****
-  functor X86CompInstrExt
-    ( structure I : X86INSTR
-!     structure TS  : MLTREE_STREAM
-! 		   where T = I.T
-!     structure CFG : CONTROL_FLOW_GRAPH 
-! 		   where P = TS.S.P
-! 		     and I = I
-     ) : X86COMP_INSTR_EXT = 
-  struct
---- 71,122 ----
-  functor X86CompInstrExt
-    ( structure I : X86INSTR
-!     structure TS  : MLTREE_STREAM (* where T = I.T *)
-!                     where type T.Basis.cond = I.T.Basis.cond
-!                       and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                       and type T.Basis.ext = I.T.Basis.ext
-!                       and type T.Basis.fcond = I.T.Basis.fcond
-!                       and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                       and type T.Constant.const = I.T.Constant.const
-!                       and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                       and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                       and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                       and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                       and type T.Region.region = I.T.Region.region
-!                       and type T.ccexp = I.T.ccexp
-!                       and type T.fexp = I.T.fexp
-!                       (* and type T.labexp = I.T.labexp *)
-!                       and type T.mlrisc = I.T.mlrisc
-!                       and type T.oper = I.T.oper
-!                       and type T.rep = I.T.rep
-!                       and type T.rexp = I.T.rexp
-!                       and type T.stm = I.T.stm
-!     structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
-!                     where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
-!                       and type P.T.Basis.cond = TS.S.P.T.Basis.cond
-!                       and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
-!                       and type P.T.Basis.ext = TS.S.P.T.Basis.ext
-!                       and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
-!                       and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
-!                       and type P.T.Constant.const = TS.S.P.T.Constant.const
-!                       and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
-!                       and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
-!                       and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
-!                       and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
-!                       and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
-!                       and type P.T.Region.region = TS.S.P.T.Region.region
-!                       and type P.T.ccexp = TS.S.P.T.ccexp
-!                       and type P.T.fexp = TS.S.P.T.fexp
-!                       (* and type P.T.labexp = TS.S.P.T.labexp *)
-!                       and type P.T.mlrisc = TS.S.P.T.mlrisc
-!                       and type P.T.oper = TS.S.P.T.oper
-!                       and type P.T.rep = TS.S.P.T.rep
-!                       and type P.T.rexp = TS.S.P.T.rexp
-!                       and type P.T.stm = TS.S.P.T.stm
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-     ) : X86COMP_INSTR_EXT = 
-  struct
-diff -N -C 2 -r MLRISC/x86/mltree/x86-fp.sml MLRISC-mlton/x86/mltree/x86-fp.sml
-*** MLRISC/x86/mltree/x86-fp.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/mltree/x86-fp.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 54,58 ****
-   *) 
-  
-! local
-     val debug = false         (* set this to true to debug this module 
-                                * set this to false for production use.
---- 54,132 ----
-   *) 
-  
-! functor X86FP
-!    (structure X86Instr  : X86INSTR
-!     structure X86Props  : INSN_PROPERTIES (* where I = X86Instr *)
-!                           where type I.addressing_mode = X86Instr.addressing_mode
-!                             and type I.ea = X86Instr.ea
-!                             and type I.instr = X86Instr.instr
-!                             and type I.instruction = X86Instr.instruction
-!                             and type I.operand = X86Instr.operand
-!     structure Flowgraph : CONTROL_FLOW_GRAPH (* where I = X86Instr *)
-!                           where type I.addressing_mode = X86Instr.addressing_mode
-!                             and type I.ea = X86Instr.ea
-!                             and type I.instr = X86Instr.instr
-!                             and type I.instruction = X86Instr.instruction
-!                             and type I.operand = X86Instr.operand
-!     structure Liveness  : LIVENESS (* where CFG = Flowgraph *)
-!                           where type CFG.I.addressing_mode = Flowgraph.I.addressing_mode
-!                             and type CFG.I.ea = Flowgraph.I.ea
-!                             and type CFG.I.instr = Flowgraph.I.instr
-!                             and type CFG.I.instruction = Flowgraph.I.instruction
-!                             and type CFG.I.operand = Flowgraph.I.operand
-!                             and type CFG.P.Client.pseudo_op = Flowgraph.P.Client.pseudo_op
-!                             and type CFG.P.T.Basis.cond = Flowgraph.P.T.Basis.cond
-!                             and type CFG.P.T.Basis.div_rounding_mode = Flowgraph.P.T.Basis.div_rounding_mode
-!                             and type CFG.P.T.Basis.ext = Flowgraph.P.T.Basis.ext
-!                             and type CFG.P.T.Basis.fcond = Flowgraph.P.T.Basis.fcond
-!                             and type CFG.P.T.Basis.rounding_mode = Flowgraph.P.T.Basis.rounding_mode
-!                             and type CFG.P.T.Constant.const = Flowgraph.P.T.Constant.const
-!                             and type ('s,'r,'f,'c) CFG.P.T.Extension.ccx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) CFG.P.T.Extension.fx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.fx
-!                             and type ('s,'r,'f,'c) CFG.P.T.Extension.rx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.rx
-!                             and type ('s,'r,'f,'c) CFG.P.T.Extension.sx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.sx
-!                             and type CFG.P.T.I.div_rounding_mode = Flowgraph.P.T.I.div_rounding_mode
-!                             and type CFG.P.T.Region.region = Flowgraph.P.T.Region.region
-!                             and type CFG.P.T.ccexp = Flowgraph.P.T.ccexp
-!                             and type CFG.P.T.fexp = Flowgraph.P.T.fexp
-!                             (* and type CFG.P.T.labexp = Flowgraph.P.T.labexp *)
-!                             and type CFG.P.T.mlrisc = Flowgraph.P.T.mlrisc
-!                             and type CFG.P.T.oper = Flowgraph.P.T.oper
-!                             and type CFG.P.T.rep = Flowgraph.P.T.rep
-!                             and type CFG.P.T.rexp = Flowgraph.P.T.rexp
-!                             and type CFG.P.T.stm = Flowgraph.P.T.stm
-!                             and type CFG.block = Flowgraph.block
-!                             and type CFG.block_kind = Flowgraph.block_kind
-!                             and type CFG.edge_info = Flowgraph.edge_info
-!                             and type CFG.edge_kind = Flowgraph.edge_kind
-!                             and type CFG.info = Flowgraph.info
-!     structure Asm       : INSTRUCTION_EMITTER (* where I = X86Instr and S.P = Flowgraph.P *)
-!                           where type I.addressing_mode = X86Instr.addressing_mode
-!                             and type I.ea = X86Instr.ea
-!                             and type I.instr = X86Instr.instr
-!                             and type I.instruction = X86Instr.instruction
-!                             and type I.operand = X86Instr.operand
-!                           where type S.P.Client.pseudo_op = Flowgraph.P.Client.pseudo_op
-!                             and type S.P.T.Basis.cond = Flowgraph.P.T.Basis.cond
-!                             and type S.P.T.Basis.div_rounding_mode = Flowgraph.P.T.Basis.div_rounding_mode
-!                             and type S.P.T.Basis.ext = Flowgraph.P.T.Basis.ext
-!                             and type S.P.T.Basis.fcond = Flowgraph.P.T.Basis.fcond
-!                             and type S.P.T.Basis.rounding_mode = Flowgraph.P.T.Basis.rounding_mode
-!                             and type S.P.T.Constant.const = Flowgraph.P.T.Constant.const
-!                             and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.fx
-!                             and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.rx
-!                             and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.sx
-!                             and type S.P.T.I.div_rounding_mode = Flowgraph.P.T.I.div_rounding_mode
-!                             and type S.P.T.Region.region = Flowgraph.P.T.Region.region
-!                             and type S.P.T.ccexp = Flowgraph.P.T.ccexp
-!                             and type S.P.T.fexp = Flowgraph.P.T.fexp
-!                             (* and type S.P.T.labexp = Flowgraph.P.T.labexp *)
-!                             and type S.P.T.mlrisc = Flowgraph.P.T.mlrisc
-!                             and type S.P.T.oper = Flowgraph.P.T.oper
-!                             and type S.P.T.rep = Flowgraph.P.T.rep
-!                             and type S.P.T.rexp = Flowgraph.P.T.rexp
-!                             and type S.P.T.stm = Flowgraph.P.T.stm
-!    ) : CFG_OPTIMIZATION = 
-! struct
-     val debug = false         (* set this to true to debug this module 
-                                * set this to false for production use.
-***************
-*** 61,78 ****
-     val debugDead = false     (* debug dead code removal *)
-     val sanityCheck = true
-! in
-! functor X86FP
-!    (structure X86Instr  : X86INSTR
-!     structure X86Props  : INSN_PROPERTIES 
-! 			      where I = X86Instr
-!     structure Flowgraph : CONTROL_FLOW_GRAPH
-! 			      where I = X86Instr
-!     structure Liveness  : LIVENESS 
-! 			      where CFG = Flowgraph
-!     structure Asm       : INSTRUCTION_EMITTER 
-! 			      where I = X86Instr
-! 				and S.P = Flowgraph.P
-!    ) : CFG_OPTIMIZATION = 
-! struct
-     structure CFG = Flowgraph
-     structure G  = Graph
---- 135,139 ----
-     val debugDead = false     (* debug dead code removal *)
-     val sanityCheck = true
-! 
-     structure CFG = Flowgraph
-     structure G  = Graph
-***************
-*** 1544,1555 ****
-  		       * should not have been generated at this point.
-  		       *)
-! 		   | (I.FLD1 | I.FLDL2E | I.FLDLG2 | I.FLDLN2 | I.FLDPI |
-! 		      I.FLDZ | I.FLDL _ | I.FLDS _ | I.FLDT _ | 
-! 		      I.FILD _ | I.FILDL _ | I.FILDLL _ | 
-! 		      I.FENV _ | I.FBINARY _ | I.FIBINARY _ | I.FUNARY _ |
-! 		      I.FUCOMPP | I.FUCOM _ | I.FUCOMP _ | I.FCOMPP | I.FXCH _ |
-!                       I.FCOMI _ | I.FCOMIP _ | I.FUCOMI _ | I.FUCOMIP _ |
-! 		      I.FSTPL _ | I.FSTPS _ | I.FSTPT _ | I.FSTL _ | I.FSTS _ 
-! 		     ) => bug("Illegal FP instructions")
-  
-  		      (* Other instructions are untouched *)
---- 1605,1638 ----
-  		       * should not have been generated at this point.
-  		       *)
-! 		   | I.FLD1 => bug("Illegal FP instructions")
-! 		   | I.FLDL2E => bug("Illegal FP instructions") 
-! 		   | I.FLDLG2 => bug("Illegal FP instructions") 
-! 		   | I.FLDLN2 => bug("Illegal FP instructions") 
-! 		   | I.FLDPI => bug("Illegal FP instructions") 
-! 		   | I.FLDZ => bug("Illegal FP instructions") 
-! 		   | I.FLDL _ => bug("Illegal FP instructions") 
-! 		   | I.FLDS _ => bug("Illegal FP instructions") 
-! 		   | I.FLDT _ => bug("Illegal FP instructions") 
-! 		   | I.FILD _ => bug("Illegal FP instructions") 
-! 		   | I.FILDL _ => bug("Illegal FP instructions") 
-! 		   | I.FILDLL _ => bug("Illegal FP instructions") 
-! 		   | I.FENV _ => bug("Illegal FP instructions") 
-! 		   | I.FBINARY _ => bug("Illegal FP instructions") 
-! 		   | I.FIBINARY _ => bug("Illegal FP instructions") 
-! 		   | I.FUNARY _ => bug("Illegal FP instructions") 
-! 		   | I.FUCOMPP => bug("Illegal FP instructions") 
-! 		   | I.FUCOM _ => bug("Illegal FP instructions") 
-! 		   | I.FUCOMP _ => bug("Illegal FP instructions") 
-! 		   | I.FCOMPP => bug("Illegal FP instructions") 
-! 		   | I.FXCH _ => bug("Illegal FP instructions") 
-! 		   | I.FCOMI _ => bug("Illegal FP instructions") 
-! 		   | I.FCOMIP _ => bug("Illegal FP instructions") 
-! 		   | I.FUCOMI _ => bug("Illegal FP instructions") 
-! 		   | I.FUCOMIP _ => bug("Illegal FP instructions")
-! 		   | I.FSTPL _ => bug("Illegal FP instructions") 
-! 		   | I.FSTPS _ => bug("Illegal FP instructions") 
-! 		   | I.FSTPT _ => bug("Illegal FP instructions") 
-! 		   | I.FSTL _ => bug("Illegal FP instructions") 
-! 		   | I.FSTS _ => bug("Illegal FP instructions")
-  
-  		      (* Other instructions are untouched *)
-***************
-*** 1576,1581 ****
-                 fun scan(I.INSTR(I.FBINARY{binOp, ...})) = 
-                        (case binOp of 
-!                         ( I.FADDP | I.FSUBP | I.FSUBRP | I.FMULP
-!                         | I.FDIVP | I.FDIVRP) => pop()
-                        | _ => ()
-                        )
---- 1659,1668 ----
-                 fun scan(I.INSTR(I.FBINARY{binOp, ...})) = 
-                        (case binOp of 
-!                         I.FADDP => pop()
-!                       | I.FSUBP => pop()
-!                       | I.FSUBRP => pop()
-!                       | I.FMULP => pop()
-!                       | I.FDIVP => pop()
-!                       | I.FDIVRP => pop()
-                        | _ => ()
-                        )
-***************
-*** 1671,1674 ****
-     end 
-  end (* functor *)
-- 
-- end (* local *)
---- 1758,1759 ----
-diff -N -C 2 -r MLRISC/x86/mltree/x86.sml MLRISC-mlton/x86/mltree/x86.sml
-*** MLRISC/x86/mltree/x86.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/mltree/x86.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 33,49 ****
-   * -- Allen
-   *)
-- local
--    val rewriteMemReg = true (* should we rewrite memRegs *)
--    val enableFastFPMode = true (* set this to false to disable the mode *)
-- in
-  
-  functor X86
-    (structure X86Instr : X86INSTR
-!    structure MLTreeUtils : MLTREE_UTILS
-! 			where T = X86Instr.T
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP
-!      			where I = X86Instr and T = X86Instr.T
-!    structure MLTreeStream : MLTREE_STREAM
-! 			where T = ExtensionComp.T
-      datatype arch = Pentium | PentiumPro | PentiumII | PentiumIII
-      val arch : arch ref
---- 33,107 ----
-   * -- Allen
-   *)
-  
-  functor X86
-    (structure X86Instr : X86INSTR
-!    structure MLTreeUtils : MLTREE_UTILS (* where T = X86Instr.T *)
-!                            where type T.Basis.cond = X86Instr.T.Basis.cond
-!                              and type T.Basis.div_rounding_mode = X86Instr.T.Basis.div_rounding_mode
-!                              and type T.Basis.ext = X86Instr.T.Basis.ext
-!                              and type T.Basis.fcond = X86Instr.T.Basis.fcond
-!                              and type T.Basis.rounding_mode = X86Instr.T.Basis.rounding_mode
-!                              and type T.Constant.const = X86Instr.T.Constant.const
-!                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) X86Instr.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) X86Instr.T.Extension.fx
-!                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) X86Instr.T.Extension.rx
-!                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) X86Instr.T.Extension.sx
-!                              and type T.I.div_rounding_mode = X86Instr.T.I.div_rounding_mode
-!                              and type T.Region.region = X86Instr.T.Region.region
-!                              and type T.ccexp = X86Instr.T.ccexp
-!                              and type T.fexp = X86Instr.T.fexp
-!                              (* and type T.labexp = X86Instr.T.labexp *)
-!                              and type T.mlrisc = X86Instr.T.mlrisc
-!                              and type T.oper = X86Instr.T.oper
-!                              and type T.rep = X86Instr.T.rep
-!                              and type T.rexp = X86Instr.T.rexp
-!                              and type T.stm = X86Instr.T.stm
-!    structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = X86Instr and T = X86Instr.T *)
-!                              where type I.addressing_mode = X86Instr.addressing_mode
-!                                and type I.ea = X86Instr.ea
-!                                and type I.instr = X86Instr.instr
-!                                and type I.instruction = X86Instr.instruction
-!                                and type I.operand = X86Instr.operand
-!                              where type T.Basis.cond = X86Instr.T.Basis.cond
-!                                and type T.Basis.div_rounding_mode = X86Instr.T.Basis.div_rounding_mode
-!                                and type T.Basis.ext = X86Instr.T.Basis.ext
-!                                and type T.Basis.fcond = X86Instr.T.Basis.fcond
-!                                and type T.Basis.rounding_mode = X86Instr.T.Basis.rounding_mode
-!                                and type T.Constant.const = X86Instr.T.Constant.const
-!                                and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) X86Instr.T.Extension.ccx
-!                                and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) X86Instr.T.Extension.fx
-!                                and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) X86Instr.T.Extension.rx
-!                                and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) X86Instr.T.Extension.sx
-!                                and type T.I.div_rounding_mode = X86Instr.T.I.div_rounding_mode
-!                                and type T.Region.region = X86Instr.T.Region.region
-!                                and type T.ccexp = X86Instr.T.ccexp
-!                                and type T.fexp = X86Instr.T.fexp
-!                                (* and type T.labexp = X86Instr.T.labexp *)
-!                                and type T.mlrisc = X86Instr.T.mlrisc
-!                                and type T.oper = X86Instr.T.oper
-!                                and type T.rep = X86Instr.T.rep
-!                                and type T.rexp = X86Instr.T.rexp
-!                                and type T.stm = X86Instr.T.stm
-!    structure MLTreeStream : MLTREE_STREAM (* where T = ExtensionComp.T *)
-!                             where type T.Basis.cond = ExtensionComp.T.Basis.cond
-!                               and type T.Basis.div_rounding_mode = ExtensionComp.T.Basis.div_rounding_mode
-!                               and type T.Basis.ext = ExtensionComp.T.Basis.ext
-!                               and type T.Basis.fcond = ExtensionComp.T.Basis.fcond
-!                               and type T.Basis.rounding_mode = ExtensionComp.T.Basis.rounding_mode
-!                               and type T.Constant.const = ExtensionComp.T.Constant.const
-!                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) ExtensionComp.T.Extension.ccx
-!                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) ExtensionComp.T.Extension.fx
-!                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) ExtensionComp.T.Extension.rx
-!                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) ExtensionComp.T.Extension.sx
-!                               and type T.I.div_rounding_mode = ExtensionComp.T.I.div_rounding_mode
-!                               and type T.Region.region = ExtensionComp.T.Region.region
-!                               and type T.ccexp = ExtensionComp.T.ccexp
-!                               and type T.fexp = ExtensionComp.T.fexp
-!                               (* and type T.labexp = ExtensionComp.T.labexp *)
-!                               and type T.mlrisc = ExtensionComp.T.mlrisc
-!                               and type T.oper = ExtensionComp.T.oper
-!                               and type T.rep = ExtensionComp.T.rep
-!                               and type T.rexp = ExtensionComp.T.rexp
-!                               and type T.stm = ExtensionComp.T.stm
-      datatype arch = Pentium | PentiumPro | PentiumII | PentiumIII
-      val arch : arch ref
-***************
-*** 66,69 ****
---- 124,130 ----
-        end = 
-  struct
-+   val rewriteMemReg = true (* should we rewrite memRegs *)
-+   val enableFastFPMode = true (* set this to false to disable the mode *)
-+ 
-    structure I = X86Instr
-    structure T = I.T
-***************
-*** 422,426 ****
-            (* reduce an expression into an operand *)
-        and operand(T.LI i) = I.Immed(toInt32(i)) 
-!         | operand(x as (T.CONST _ | T.LABEL _)) = I.ImmedLabel x
-          | operand(T.LABEXP le) = I.ImmedLabel le
-          | operand(T.REG(_,r)) = IntReg r
---- 483,488 ----
-            (* reduce an expression into an operand *)
-        and operand(T.LI i) = I.Immed(toInt32(i)) 
-!         | operand(x as T.CONST _) = I.ImmedLabel x
-!         | operand(x as T.LABEL _) = I.ImmedLabel x
-          | operand(T.LABEXP le) = I.ImmedLabel le
-          | operand(T.REG(_,r)) = IntReg r
-***************
-*** 969,974 ****
-  		   move'(I.Immed(n), rdOpnd, an)
-  	       end
-!              | (T.CONST _ | T.LABEL _) => 
-!                  move'(I.ImmedLabel exp, rdOpnd, an)
-               | T.LABEXP le => move'(I.ImmedLabel le, rdOpnd, an)
-  
---- 1031,1036 ----
-  		   move'(I.Immed(n), rdOpnd, an)
-  	       end
-!              | T.CONST _ => move'(I.ImmedLabel exp, rdOpnd, an)
-!              | T.LABEL _ => move'(I.ImmedLabel exp, rdOpnd, an)
-               | T.LABEXP le => move'(I.ImmedLabel le, rdOpnd, an)
-  
-***************
-*** 1095,1099 ****
-            * since it doesn't need to write out the result in a register.
-            *)
-!      and cmpWithZero(cc as (T.EQ | T.NE), e as T.ANDB(ty, a, b), an) = 
-              (case ty of
-                 8  => test(I.TESTB, a, b, an)
---- 1157,1168 ----
-            * since it doesn't need to write out the result in a register.
-            *)
-!      and cmpWithZero(cc as T.EQ, e as T.ANDB(ty, a, b), an) = 
-!             (case ty of
-!                8  => test(I.TESTB, a, b, an)
-!              | 16 => test(I.TESTW, a, b, an)
-!              | 32 => test(I.TESTL, a, b, an)
-!              | _  => doExpr(e, newReg(), an); 
-!              cc)  
-!        | cmpWithZero(cc as T.NE, e as T.ANDB(ty, a, b), an) = 
-              (case ty of
-                 8  => test(I.TESTB, a, b, an)
-***************
-*** 1409,1413 ****
-        and foldableFexp(T.FREG _) = true
-          | foldableFexp(T.FLOAD _) = true
-!         | foldableFexp(T.CVTI2F(_, (16 | 32), _)) = true
-          | foldableFexp(T.CVTF2F(_, _, t)) = foldableFexp t
-          | foldableFexp(T.FMARK(t, _)) = foldableFexp t
---- 1478,1483 ----
-        and foldableFexp(T.FREG _) = true
-          | foldableFexp(T.FLOAD _) = true
-!         | foldableFexp(T.CVTI2F(_, 16, _)) = true
-!         | foldableFexp(T.CVTI2F(_, 32, _)) = true
-          | foldableFexp(T.CVTF2F(_, _, t)) = foldableFexp t
-          | foldableFexp(T.FMARK(t, _)) = foldableFexp t
-***************
-*** 1532,1536 ****
-                and suFold(e as T.FREG _) = (LEAF(0, e, []), false)
-                  | suFold(e as T.FLOAD _) = (LEAF(0, e, []), false)
-!                 | suFold(e as T.CVTI2F(_,(16 | 32),_)) = (LEAF(0, e, []), true)
-                  | suFold(T.CVTF2F(_, _, t)) = suFold t
-                  | suFold(T.FMARK(t, a)) = 
---- 1602,1607 ----
-                and suFold(e as T.FREG _) = (LEAF(0, e, []), false)
-                  | suFold(e as T.FLOAD _) = (LEAF(0, e, []), false)
-!                 | suFold(e as T.CVTI2F(_,16,_)) = (LEAF(0, e, []), true)
-!                 | suFold(e as T.CVTI2F(_,32,_)) = (LEAF(0, e, []), true)
-                  | suFold(T.CVTF2F(_, _, t)) = suFold t
-                  | suFold(T.FMARK(t, a)) = 
-***************
-*** 1726,1730 ****
-                fun isMemOpnd(T.FREG(_, f)) = isFMemReg f
-                  | isMemOpnd(T.FLOAD _) = true
-!                 | isMemOpnd(T.CVTI2F(_, (16 | 32), _)) = true
-                  | isMemOpnd(T.CVTF2F(_, _, t)) = isMemOpnd t
-                  | isMemOpnd(T.FMARK(t, _)) = isMemOpnd t
---- 1797,1802 ----
-                fun isMemOpnd(T.FREG(_, f)) = isFMemReg f
-                  | isMemOpnd(T.FLOAD _) = true
-!                 | isMemOpnd(T.CVTI2F(_, 16, _)) = true
-!                 | isMemOpnd(T.CVTI2F(_, 32, _)) = true
-                  | isMemOpnd(T.CVTF2F(_, _, t)) = isMemOpnd t
-                  | isMemOpnd(T.FMARK(t, _)) = isMemOpnd t
-***************
-*** 2007,2010 ****
-  
-  end (* functor *)
-- 
-- end (* local *)
---- 2079,2080 ----
-diff -N -C 2 -r MLRISC/x86/omit-frameptr/x86omit-frameptr.sml MLRISC-mlton/x86/omit-frameptr/x86omit-frameptr.sml
-*** MLRISC/x86/omit-frameptr/x86omit-frameptr.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/omit-frameptr/x86omit-frameptr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 11,16 ****
-  functor X86OmitFramePointer (
-      structure I : X86INSTR 
-!     structure CFG : CONTROL_FLOW_GRAPH where I = I
-!     structure MemRegs : MEMORY_REGISTERS where I=I
-      val memRegBase : CellsBasis.cell option): OMIT_FRAME_POINTER = 
-  struct
---- 11,58 ----
-  functor X86OmitFramePointer (
-      structure I : X86INSTR 
-!     structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
-!                     where type I.addressing_mode = I.addressing_mode
-!                       and type I.ea = I.ea
-!                       and type I.instr = I.instr
-!                       and type I.instruction = I.instruction
-!                       and type I.operand = I.operand
-!     structure MemRegs : MEMORY_REGISTERS (* where I = I *)
-!                         where type I.Constant.const = I.Constant.const
-!                           and type I.Region.region = I.Region.region
-!                           and type I.T.Basis.cond = I.T.Basis.cond
-!                           and type I.T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
-!                           and type I.T.Basis.ext = I.T.Basis.ext
-!                           and type I.T.Basis.fcond = I.T.Basis.fcond
-!                           and type I.T.Basis.rounding_mode = I.T.Basis.rounding_mode
-!                           and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
-!                           and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
-!                           and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
-!                           and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
-!                           and type I.T.I.div_rounding_mode = I.T.I.div_rounding_mode
-!                           and type I.T.ccexp = I.T.ccexp
-!                           and type I.T.fexp = I.T.fexp
-!                           (* and type I.T.labexp = I.T.labexp *)
-!                           and type I.T.mlrisc = I.T.mlrisc
-!                           and type I.T.oper = I.T.oper
-!                           and type I.T.rep = I.T.rep
-!                           and type I.T.rexp = I.T.rexp
-!                           and type I.T.stm = I.T.stm
-!                           (* and type I.addressing_mode = I.addressing_mode *)
-!                           and type I.binaryOp = I.binaryOp
-!                           and type I.bitOp = I.bitOp
-!                           and type I.cond = I.cond
-!                           and type I.fbinOp = I.fbinOp
-!                           and type I.fenvOp = I.fenvOp
-!                           and type I.fibinOp = I.fibinOp
-!                           and type I.fsize = I.fsize
-!                           and type I.funOp = I.funOp
-!                           and type I.instr = I.instr
-!                           and type I.instruction = I.instruction
-!                           and type I.isize = I.isize
-!                           and type I.move = I.move
-!                           and type I.multDivOp = I.multDivOp
-!                           and type I.operand = I.operand
-!                           and type I.shiftOp = I.shiftOp
-!                           and type I.unaryOp = I.unaryOp
-      val memRegBase : CellsBasis.cell option): OMIT_FRAME_POINTER = 
-  struct
-diff -N -C 2 -r MLRISC/x86/ra/x86RA.sml MLRISC-mlton/x86/ra/x86RA.sml
-*** MLRISC/x86/ra/x86RA.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/ra/x86RA.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 110,120 ****
-  functor X86RA 
-    ( structure I          : X86INSTR
-!     structure InsnProps  : INSN_PROPERTIES 
-! 			       where I = I
-!     structure CFG        : CONTROL_FLOW_GRAPH 
-! 			       where I = I
-!     structure Asm        : INSTRUCTION_EMITTER 
-! 			       where I = I 
-! 				 and S.P = CFG.P
-  
-        (* Spilling heuristics determines which node should be spilled 
---- 110,152 ----
-  functor X86RA 
-    ( structure I          : X86INSTR
-!     structure InsnProps  : INSN_PROPERTIES (* where I = I *)
-!                            where type I.addressing_mode = I.addressing_mode
-!                              and type I.ea = I.ea
-!                              and type I.instr = I.instr
-!                              and type I.instruction = I.instruction
-!                              and type I.operand = I.operand
-!     structure CFG        : CONTROL_FLOW_GRAPH (* where I = I *)
-!                            where type I.addressing_mode = I.addressing_mode
-!                              and type I.ea = I.ea
-!                              and type I.instr = I.instr
-!                              and type I.instruction = I.instruction
-!                              and type I.operand = I.operand
-!     structure Asm        : INSTRUCTION_EMITTER (* where I = I and S.P = CFG.P *)
-!                            where type I.addressing_mode = I.addressing_mode
-!                              and type I.ea = I.ea
-!                              and type I.instr = I.instr
-!                              and type I.instruction = I.instruction
-!                              and type I.operand = I.operand
-!                            where type S.P.Client.pseudo_op = CFG.P.Client.pseudo_op
-!                              and type S.P.T.Basis.cond = CFG.P.T.Basis.cond
-!                              and type S.P.T.Basis.div_rounding_mode = CFG.P.T.Basis.div_rounding_mode
-!                              and type S.P.T.Basis.ext = CFG.P.T.Basis.ext
-!                              and type S.P.T.Basis.fcond = CFG.P.T.Basis.fcond
-!                              and type S.P.T.Basis.rounding_mode = CFG.P.T.Basis.rounding_mode
-!                              and type S.P.T.Constant.const = CFG.P.T.Constant.const
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) CFG.P.T.Extension.ccx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) CFG.P.T.Extension.fx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) CFG.P.T.Extension.rx
-!                              and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) CFG.P.T.Extension.sx
-!                              and type S.P.T.I.div_rounding_mode = CFG.P.T.I.div_rounding_mode
-!                              and type S.P.T.Region.region = CFG.P.T.Region.region
-!                              and type S.P.T.ccexp = CFG.P.T.ccexp
-!                              and type S.P.T.fexp = CFG.P.T.fexp
-!                              (* and type S.P.T.labexp = CFG.P.T.labexp *)
-!                              and type S.P.T.mlrisc = CFG.P.T.mlrisc
-!                              and type S.P.T.oper = CFG.P.T.oper
-!                              and type S.P.T.rep = CFG.P.T.rep
-!                              and type S.P.T.rexp = CFG.P.T.rexp
-!                              and type S.P.T.stm = CFG.P.T.stm
-  
-        (* Spilling heuristics determines which node should be spilled 
-***************
-*** 127,131 ****
-         * or write your own if you are feeling adventurous.
-         *)
-!     structure Spill : RA_SPILL where I = I 
-  
-  
---- 159,168 ----
-         * or write your own if you are feeling adventurous.
-         *)
-!     structure Spill : RA_SPILL (* where I = I *)
-!                       where type I.addressing_mode = I.addressing_mode
-!                         and type I.ea = I.ea
-!                         and type I.instr = I.instr
-!                         and type I.instruction = I.instruction
-!                         and type I.operand = I.operand
-  
-  
-***************
-*** 305,312 ****
-      structure Ra = 
-        RegisterAllocator
-!        (SpillHeur)
-!        (MemoryRA             (* for memory coalescing *)
-           (RADeadCodeElim     (* do the funky dead code elimination stuff *)
-!             (ClusterRA
-                 (structure Flowgraph = CFG
-                  structure Asm = Asm
---- 342,349 ----
-      structure Ra = 
-        RegisterAllocator
-!        (structure SpillHeuristics = SpillHeur
-!         structure Flowgraph = MemoryRA             (* for memory coalescing *)
-           (RADeadCodeElim     (* do the funky dead code elimination stuff *)
-!             (structure Flowgraph = ClusterRA
-                 (structure Flowgraph = CFG
-                  structure Asm = Asm
-***************
-*** 314,319 ****
-                  structure Spill = Spill
-                 )
-!             )
-!             (fun cellkind CB.GP = true | cellkind _ = false
-               val deadRegs = deadRegs
-               val affectedBlocks = affectedBlocks
---- 351,355 ----
-                  structure Spill = Spill
-                 )
-!              fun cellkind CB.GP = true | cellkind _ = false
-               val deadRegs = deadRegs
-               val affectedBlocks = affectedBlocks
-diff -N -C 2 -r MLRISC/x86/ra/x86Rewrite.sig MLRISC-mlton/x86/ra/x86Rewrite.sig
-*** MLRISC/x86/ra/x86Rewrite.sig	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/ra/x86Rewrite.sig	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 1,5 ****
-  signature X86REWRITE = sig
-    structure I  : X86INSTR
-!   structure CB : CELLS_BASIS = CellsBasis
-    val rewriteUse : I.instruction * CB.cell * CB.cell -> I.instruction
-    val rewriteDef : I.instruction * CB.cell * CB.cell -> I.instruction
---- 1,14 ----
-  signature X86REWRITE = sig
-    structure I  : X86INSTR
-!   structure CB : CELLS_BASIS (* = CellsBasis *)
-!                  where type CellSet.cellset = CellsBasis.CellSet.cellset
-!                    and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
-!                    and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
-!                    and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
-!                    and type cell = CellsBasis.cell
-!                    and type cellColor = CellsBasis.cellColor
-!                    and type cellkind = CellsBasis.cellkind
-!                    and type cellkindDesc = CellsBasis.cellkindDesc
-!                    and type cellkindInfo = CellsBasis.cellkindInfo
-    val rewriteUse : I.instruction * CB.cell * CB.cell -> I.instruction
-    val rewriteDef : I.instruction * CB.cell * CB.cell -> I.instruction
-diff -N -C 2 -r MLRISC/x86/ra/x86SpillInstr.sml MLRISC-mlton/x86/ra/x86SpillInstr.sml
-*** MLRISC/x86/ra/x86SpillInstr.sml	2010-02-03 11:40:43.000000000 -0500
---- MLRISC-mlton/x86/ra/x86SpillInstr.sml	2009-10-02 09:51:35.000000000 -0400
-***************
-*** 9,13 ****
-   *)
-  functor X86SpillInstr(structure Instr: X86INSTR
-!                  structure Props: INSN_PROPERTIES where I = Instr
-  		) : ARCH_SPILL_INSTR = struct
-  
---- 9,18 ----
-   *)
-  functor X86SpillInstr(structure Instr: X86INSTR
-!                       structure Props: INSN_PROPERTIES (* where I = Instr *)
-!                                        where type I.addressing_mode = Instr.addressing_mode
-!                                          and type I.ea = Instr.ea
-!                                          and type I.instr = Instr.instr
-!                                          and type I.instruction = Instr.instruction
-!                                          and type I.operand = Instr.operand
-  		) : ARCH_SPILL_INSTR = struct
-  
-***************
-*** 57,61 ****
-  				 return=return, uses=uses, 
-  		      cutsTo=cutsTo, mem=mem, pops=pops}, an)
-!       | I.MOVE{mvOp as (I.MOVZBL|I.MOVSBL|I.MOVZWL|I.MOVSWL), src, dst} => 
-  	  let val tmpR = newReg() val tmp = I.Direct tmpR
-  	  in  {proh=[tmpR], newReg=SOME tmpR,
---- 62,87 ----
-  				 return=return, uses=uses, 
-  		      cutsTo=cutsTo, mem=mem, pops=pops}, an)
-!       | I.MOVE{mvOp as I.MOVZBL, src, dst} => 
-! 	  let val tmpR = newReg() val tmp = I.Direct tmpR
-! 	  in  {proh=[tmpR], newReg=SOME tmpR,
-! 	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
-! 		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
-! 	      }
-! 	  end
-!       | I.MOVE{mvOp as I.MOVSBL, src, dst} => 
-! 	  let val tmpR = newReg() val tmp = I.Direct tmpR
-! 	  in  {proh=[tmpR], newReg=SOME tmpR,
-! 	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
-! 		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
-! 	      }
-! 	  end
-!       | I.MOVE{mvOp as I.MOVZWL, src, dst} => 
-! 	  let val tmpR = newReg() val tmp = I.Direct tmpR
-! 	  in  {proh=[tmpR], newReg=SOME tmpR,
-! 	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
-! 		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
-! 	      }
-! 	  end
-!       | I.MOVE{mvOp as I.MOVSWL, src, dst} => 
-  	  let val tmpR = newReg() val tmp = I.Direct tmpR
-  	  in  {proh=[tmpR], newReg=SOME tmpR,
-***************
-*** 100,104 ****
-  	     }
-        | I.BINARY{binOp, src, dst} => let (* note: dst = reg *)
-! 	 fun multBinOp(I.MULL|I.MULW|I.MULB|I.IMULL|I.IMULW|I.IMULB) = true
-  	   | multBinOp _ = false
-  	in
---- 126,135 ----
-  	     }
-        | I.BINARY{binOp, src, dst} => let (* note: dst = reg *)
-! 	 fun multBinOp(I.MULL) = true
-! 	   | multBinOp(I.MULW) = true
-! 	   | multBinOp(I.MULB) = true
-! 	   | multBinOp(I.IMULL) = true
-! 	   | multBinOp(I.IMULW) = true
-! 	   | multBinOp(I.IMULB) = true
-  	   | multBinOp _ = false
-  	in
-diff -N -C 2 -r MLRISC/x86/x86.mdl MLRISC-mlton/x86/x86.mdl
-*** MLRISC/x86/x86.mdl	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/x86/x86.mdl	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 579,583 ****
-            let val n = size fbinOp
-            in  case Char.toLower(String.sub(fbinOp,n-1)) of
-!                 (#"s" | #"l") => String.substring(fbinOp,0,n-1)
-                | _ => fbinOp
-            end
---- 579,584 ----
-            let val n = size fbinOp
-            in  case Char.toLower(String.sub(fbinOp,n-1)) of
-!                 #"s" => String.substring(fbinOp,0,n-1)
-!               | #"l" => String.substring(fbinOp,0,n-1)
-                | _ => fbinOp
-            end
-***************
-*** 708,714 ****
-  	asm: (case (src,binOp) of
-                 (I.Direct _,  (* tricky business here for shifts *)
-!                (I.SARL | I.SHRL | I.SHLL |
-!                 I.SARW | I.SHRW | I.SHLW |
-!                 I.SARB | I.SHRB | I.SHLB)) => ``<binOp>\t%cl, <dst>''
-               | _ => ``<binOp>\t<src>, <dst>''
-               )
---- 709,729 ----
-  	asm: (case (src,binOp) of
-                 (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLL) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLW) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SARB) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHRB) => ``<binOp>\t%cl, <dst>''
-!              | (I.Direct _,  (* tricky business here for shifts *)
-!                 I.SHLB) => ``<binOp>\t%cl, <dst>''
-               | _ => ``<binOp>\t<src>, <dst>''
-               )
-diff -N -C 2 -r MLRISC/x86/x86MC.sml MLRISC-mlton/x86/x86MC.sml
-*** MLRISC/x86/x86MC.sml	2010-02-03 11:40:44.000000000 -0500
---- MLRISC-mlton/x86/x86MC.sml	2009-10-02 09:51:26.000000000 -0400
-***************
-*** 9,17 ****
-  functor X86MCEmitter
-    (structure Instr : X86INSTR
-!    structure Shuffle : X86SHUFFLE where I = Instr
-!    structure MLTreeEval : MLTREE_EVAL where T = Instr.T
-!    structure MemRegs : MEMORY_REGISTERS where I = Instr
-     val memRegBase : CellsBasis.cell option
-!    structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr) : MC_EMIT = 
-  struct
+     structure Eval  : MLTREE_EVAL
+-      sharing Instr.T = Eval.T
++      (* sharing Instr.T = Eval.T *)
++      where type T.Basis.cond = Instr.T.Basis.cond
++        and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++        and type T.Basis.ext = Instr.T.Basis.ext
++        and type T.Basis.fcond = Instr.T.Basis.fcond
++        and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++        and type T.Constant.const = Instr.T.Constant.const
++        and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++        and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++        and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++        and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++        and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++        and type T.Region.region = Instr.T.Region.region
++        and type T.ccexp = Instr.T.ccexp
++        and type T.fexp = Instr.T.fexp
++        (* and type T.labexp = Instr.T.labexp *)
++        and type T.mlrisc = Instr.T.mlrisc
++        and type T.oper = Instr.T.oper
++        and type T.rep = Instr.T.rep
++        and type T.rexp = Instr.T.rexp
++        and type T.stm = Instr.T.stm
+    ) : PEEPHOLE =
+ struct
     structure I = Instr
---- 9,117 ----
-  functor X86MCEmitter
-    (structure Instr : X86INSTR
-!    structure Shuffle : X86SHUFFLE (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          (* and type I.addressing_mode = Instr.addressing_mode *)
-!                          and type I.binaryOp = Instr.binaryOp
-!                          and type I.bitOp = Instr.bitOp
-!                          and type I.cond = Instr.cond
-!                          and type I.fbinOp = Instr.fbinOp
-!                          and type I.fenvOp = Instr.fenvOp
-!                          and type I.fibinOp = Instr.fibinOp
-!                          and type I.fsize = Instr.fsize
-!                          and type I.funOp = Instr.funOp
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.isize = Instr.isize
-!                          and type I.move = Instr.move
-!                          and type I.multDivOp = Instr.multDivOp
-!                          and type I.operand = Instr.operand
-!                          and type I.shiftOp = Instr.shiftOp
-!                          and type I.unaryOp = Instr.unaryOp
-!    structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
-!                           where type T.Basis.cond = Instr.T.Basis.cond
-!                             and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                             and type T.Basis.ext = Instr.T.Basis.ext
-!                             and type T.Basis.fcond = Instr.T.Basis.fcond
-!                             and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                             and type T.Constant.const = Instr.T.Constant.const
-!                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                             and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                             and type T.Region.region = Instr.T.Region.region
-!                             and type T.ccexp = Instr.T.ccexp
-!                             and type T.fexp = Instr.T.fexp
-!                             (* and type T.labexp = Instr.T.labexp *)
-!                             and type T.mlrisc = Instr.T.mlrisc
-!                             and type T.oper = Instr.T.oper
-!                             and type T.rep = Instr.T.rep
-!                             and type T.rexp = Instr.T.rexp
-!                             and type T.stm = Instr.T.stm
-!    structure MemRegs : MEMORY_REGISTERS (* where I = Instr *)
-!                        where type I.Constant.const = Instr.Constant.const
-!                          and type I.Region.region = Instr.Region.region
-!                          and type I.T.Basis.cond = Instr.T.Basis.cond
-!                          and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
-!                          and type I.T.Basis.ext = Instr.T.Basis.ext
-!                          and type I.T.Basis.fcond = Instr.T.Basis.fcond
-!                          and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
-!                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
-!                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
-!                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
-!                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
-!                          and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
-!                          and type I.T.ccexp = Instr.T.ccexp
-!                          and type I.T.fexp = Instr.T.fexp
-!                          (* and type I.T.labexp = Instr.T.labexp *)
-!                          and type I.T.mlrisc = Instr.T.mlrisc
-!                          and type I.T.oper = Instr.T.oper
-!                          and type I.T.rep = Instr.T.rep
-!                          and type I.T.rexp = Instr.T.rexp
-!                          and type I.T.stm = Instr.T.stm
-!                          (* and type I.addressing_mode = Instr.addressing_mode *)
-!                          and type I.binaryOp = Instr.binaryOp
-!                          and type I.bitOp = Instr.bitOp
-!                          and type I.cond = Instr.cond
-!                          and type I.fbinOp = Instr.fbinOp
-!                          and type I.fenvOp = Instr.fenvOp
-!                          and type I.fibinOp = Instr.fibinOp
-!                          and type I.fsize = Instr.fsize
-!                          and type I.funOp = Instr.funOp
-!                          and type I.instr = Instr.instr
-!                          and type I.instruction = Instr.instruction
-!                          and type I.isize = Instr.isize
-!                          and type I.move = Instr.move
-!                          and type I.multDivOp = Instr.multDivOp
-!                          and type I.operand = Instr.operand
-!                          and type I.shiftOp = Instr.shiftOp
-!                          and type I.unaryOp = Instr.unaryOp
-     val memRegBase : CellsBasis.cell option
-!    structure AsmEmitter : INSTRUCTION_EMITTER (* where I = Instr *)
-!                           where type I.addressing_mode = Instr.addressing_mode
-!                             and type I.ea = Instr.ea
-!                             and type I.instr = Instr.instr
-!                             and type I.instruction = Instr.instruction
-!                             and type I.operand = Instr.operand
-!   ) : MC_EMIT = 
-  struct
-    structure I = Instr
-***************
-*** 318,322 ****
-       | I.LEA{r32, addr} => encodeReg(0wx8d, r32, addr)
-       | I.CMPL{lsrc, rsrc} => arith(0wx38, 7) (rsrc, lsrc)
-!      | (I.CMPW _ | I.CMPB _) => error "CMP"
-       | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
-       | I.TESTB{lsrc, rsrc} => test(8, rsrc, lsrc)
---- 418,423 ----
-       | I.LEA{r32, addr} => encodeReg(0wx8d, r32, addr)
-       | I.CMPL{lsrc, rsrc} => arith(0wx38, 7) (rsrc, lsrc)
-!      | I.CMPW _ => error "CMP"
-!      | I.CMPB _ => error "CMP"
-       | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
-       | I.TESTB{lsrc, rsrc} => test(8, rsrc, lsrc)
+diff --git a/x86/instructions/x86Peephole.sml b/x86/instructions/x86Peephole.sml
+index 66670c1..fe27654 100644
+--- a/x86/instructions/x86Peephole.sml
++++ b/x86/instructions/x86Peephole.sml
+@@ -12,7 +12,27 @@ functor X86Peephole(
+                     structure Eval : MLTREE_EVAL
+ 
+ (*#line 23.7 "x86Peephole.peep"*)
+-                    sharing Instr.T = Eval.T
++                    (* sharing Instr.T = Eval.T *)
++                    where type T.Basis.cond = Instr.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = Instr.T.Basis.ext
++                      and type T.Basis.fcond = Instr.T.Basis.fcond
++                      and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                      and type T.Constant.const = Instr.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                      and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                      and type T.Region.region = Instr.T.Region.region
++                      and type T.ccexp = Instr.T.ccexp
++                      and type T.fexp = Instr.T.fexp
++                      (* and type T.labexp = Instr.T.labexp *)
++                      and type T.mlrisc = Instr.T.mlrisc
++                      and type T.oper = Instr.T.oper
++                      and type T.rep = Instr.T.rep
++                      and type T.rexp = Instr.T.rexp
++                      and type T.stm = Instr.T.stm
+                    ): PEEPHOLE =
+ struct
+ 
+diff --git a/x86/instructions/x86Props.sml b/x86/instructions/x86Props.sml
+index 6cd50da..1b060fd 100644
+--- a/x86/instructions/x86Props.sml
++++ b/x86/instructions/x86Props.sml
+@@ -5,8 +5,48 @@
+ 
+ functor X86Props
+   (structure Instr : X86INSTR
+-   structure MLTreeHash : MLTREE_HASH where T = Instr.T
+-   structure MLTreeEval : MLTREE_EVAL where T = Instr.T
++   structure MLTreeHash : MLTREE_HASH (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
+   ) : INSN_PROPERTIES =
+ struct
+   structure I = Instr
+@@ -230,8 +270,10 @@ struct
+ 	val uses = operandUse src
+       in
+ 	case multDivOp
+-	 of (I.IDIVL1 | I.DIVL1) => (eaxPair, C.edx::C.eax::uses)
+-	  | (I.IMULL1 | I.MULL1) => (eaxPair, C.eax::uses)
++	 of I.IDIVL1 => (eaxPair, C.edx::C.eax::uses)
++	  | I.DIVL1 => (eaxPair, C.edx::C.eax::uses)
++	  | I.IMULL1 => (eaxPair, C.eax::uses)
++	  | I.MULL1 => (eaxPair, C.eax::uses)
+       end
+ 
+       fun unary opnd = (operandDef opnd, operandUse opnd)
+@@ -249,8 +291,12 @@ struct
+ 	| I.MOVE{src, dst=I.MemReg r, ...} => ([r], operandUse src)
+ 	| I.MOVE{src, dst, ...} => ([], operandAcc(dst, operandUse src))
+ 	| I.LEA{r32, addr}      => ([r32], operandUse addr)
+-	| ( I.CMPL arg | I.CMPW arg | I.CMPB arg
+-	  | I.TESTL arg | I.TESTW arg | I.TESTB arg ) => cmptest arg 
++	| I.CMPL arg => cmptest arg
++	| I.CMPW arg => cmptest arg
++	| I.CMPB arg => cmptest arg
++	| I.TESTL arg => cmptest arg
++	| I.TESTW arg => cmptest arg
++	| I.TESTB arg => cmptest arg
+ 	| I.BITOP{lsrc, rsrc, ...} => cmptest{lsrc=lsrc,rsrc=rsrc}
+ 	| I.BINARY{binOp=I.XORL,src=I.Direct rs,dst=I.Direct rd,...} =>   
+ 	     if CB.sameColor(rs,rd) then ([rd],[]) else ([rd],[rs,rd])
+@@ -268,7 +314,9 @@ struct
+ 
+ 	| I.UNARY{opnd, ...}    => unary opnd
+ 	| I.SET{opnd, ...}      => unary opnd
+-	| ( I.PUSHL arg | I.PUSHW arg | I.PUSHB arg ) => push arg
++	| I.PUSHL arg => push arg
++	| I.PUSHW arg => push arg
++	| I.PUSHB arg => push arg
+ 	| I.POP arg	      => (C.stackptrR::operandDef arg, [C.stackptrR])
+ 	| I.PUSHFD	      => espOnly()
+ 	| I.POPFD		      => espOnly()
+diff --git a/x86/instructions/x86comp-instr-ext.sml b/x86/instructions/x86comp-instr-ext.sml
+index d846378..7a0d5dd 100644
+--- a/x86/instructions/x86comp-instr-ext.sml
++++ b/x86/instructions/x86comp-instr-ext.sml
+@@ -6,11 +6,54 @@
+  *)
+ signature X86COMP_INSTR_EXT = sig
+   structure I : X86INSTR
+-  structure TS : MLTREE_STREAM
+-		 where T = I.T
+-  structure CFG : CONTROL_FLOW_GRAPH 
+- 	         where I = I
+-                   and P = TS.S.P
++  structure TS : MLTREE_STREAM (* where T = I.T *)
++                 where type T.Basis.cond = I.T.Basis.cond
++                   and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                   and type T.Basis.ext = I.T.Basis.ext
++                   and type T.Basis.fcond = I.T.Basis.fcond
++                   and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                   and type T.Constant.const = I.T.Constant.const
++                   and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                   and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                   and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                   and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                   and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                   and type T.Region.region = I.T.Region.region
++                   and type T.ccexp = I.T.ccexp
++                   and type T.fexp = I.T.fexp
++                   (* and type T.labexp = I.T.labexp *)
++                   and type T.mlrisc = I.T.mlrisc
++                   and type T.oper = I.T.oper
++                   and type T.rep = I.T.rep
++	           and type T.rexp = I.T.rexp
++                   and type T.stm = I.T.stm
++  structure CFG : CONTROL_FLOW_GRAPH (* where I = I and P = TS.S.P *)
++                  where type I.addressing_mode = I.addressing_mode
++                    and type I.ea = I.ea
++                    and type I.instr = I.instr
++                    and type I.instruction = I.instruction
++                    and type I.operand = I.operand
++                  where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                    and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                    and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                    and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                    and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                    and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                    and type P.T.Constant.const = TS.S.P.T.Constant.const
++                    and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                    and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                    and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                    and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                    and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                    and type P.T.Region.region = TS.S.P.T.Region.region
++                    and type P.T.ccexp = TS.S.P.T.ccexp
++                    and type P.T.fexp = TS.S.P.T.fexp
++                    (* and type P.T.labexp = TS.S.P.T.labexp *)
++                    and type P.T.mlrisc = TS.S.P.T.mlrisc
++                    and type P.T.oper = TS.S.P.T.oper
++                    and type P.T.rep = TS.S.P.T.rep
++                    and type P.T.rexp = TS.S.P.T.rexp
++                    and type P.T.stm = TS.S.P.T.stm
+ 
+   type reducer = 
+     (I.instruction, I.C.cellset, I.operand, I.addressing_mode, CFG.cfg) TS.reducer
+@@ -27,11 +70,54 @@ end
+ 
+ functor X86CompInstrExt
+   ( structure I : X86INSTR
+-    structure TS  : MLTREE_STREAM
+-		   where T = I.T
+-    structure CFG : CONTROL_FLOW_GRAPH 
+-		   where P = TS.S.P
+-		     and I = I
++    structure TS  : MLTREE_STREAM (* where T = I.T *)
++                    where type T.Basis.cond = I.T.Basis.cond
++                      and type T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                      and type T.Basis.ext = I.T.Basis.ext
++                      and type T.Basis.fcond = I.T.Basis.fcond
++                      and type T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                      and type T.Constant.const = I.T.Constant.const
++                      and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                      and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                      and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                      and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                      and type T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                      and type T.Region.region = I.T.Region.region
++                      and type T.ccexp = I.T.ccexp
++                      and type T.fexp = I.T.fexp
++                      (* and type T.labexp = I.T.labexp *)
++                      and type T.mlrisc = I.T.mlrisc
++                      and type T.oper = I.T.oper
++                      and type T.rep = I.T.rep
++                      and type T.rexp = I.T.rexp
++                      and type T.stm = I.T.stm
++    structure CFG : CONTROL_FLOW_GRAPH (* where P = TS.S.P and I = I *)
++                    where type P.Client.pseudo_op = TS.S.P.Client.pseudo_op
++                      and type P.T.Basis.cond = TS.S.P.T.Basis.cond
++                      and type P.T.Basis.div_rounding_mode = TS.S.P.T.Basis.div_rounding_mode
++                      and type P.T.Basis.ext = TS.S.P.T.Basis.ext
++                      and type P.T.Basis.fcond = TS.S.P.T.Basis.fcond
++                      and type P.T.Basis.rounding_mode = TS.S.P.T.Basis.rounding_mode
++                      and type P.T.Constant.const = TS.S.P.T.Constant.const
++                      and type ('s,'r,'f,'c) P.T.Extension.ccx = ('s,'r,'f,'c) TS.S.P.T.Extension.ccx
++                      and type ('s,'r,'f,'c) P.T.Extension.fx = ('s,'r,'f,'c) TS.S.P.T.Extension.fx
++                      and type ('s,'r,'f,'c) P.T.Extension.rx = ('s,'r,'f,'c) TS.S.P.T.Extension.rx
++                      and type ('s,'r,'f,'c) P.T.Extension.sx = ('s,'r,'f,'c) TS.S.P.T.Extension.sx
++                      and type P.T.I.div_rounding_mode = TS.S.P.T.I.div_rounding_mode
++                      and type P.T.Region.region = TS.S.P.T.Region.region
++                      and type P.T.ccexp = TS.S.P.T.ccexp
++                      and type P.T.fexp = TS.S.P.T.fexp
++                      (* and type P.T.labexp = TS.S.P.T.labexp *)
++                      and type P.T.mlrisc = TS.S.P.T.mlrisc
++                      and type P.T.oper = TS.S.P.T.oper
++                      and type P.T.rep = TS.S.P.T.rep
++                      and type P.T.rexp = TS.S.P.T.rexp
++                      and type P.T.stm = TS.S.P.T.stm
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
+    ) : X86COMP_INSTR_EXT = 
+ struct
+   structure CFG = CFG
+diff --git a/x86/mltree/x86-fp.sml b/x86/mltree/x86-fp.sml
+index 60a8610..1383d06 100644
+--- a/x86/mltree/x86-fp.sml
++++ b/x86/mltree/x86-fp.sml
+@@ -53,27 +53,88 @@
+  * -- Allen Leung (leunga@cs.nyu.edu)
+  *) 
+ 
+-local
++functor X86FP
++   (structure X86Instr  : X86INSTR
++    structure X86Props  : INSN_PROPERTIES (* where I = X86Instr *)
++                          where type I.addressing_mode = X86Instr.addressing_mode
++                            and type I.ea = X86Instr.ea
++                            and type I.instr = X86Instr.instr
++                            and type I.instruction = X86Instr.instruction
++                            and type I.operand = X86Instr.operand
++    structure Flowgraph : CONTROL_FLOW_GRAPH (* where I = X86Instr *)
++                          where type I.addressing_mode = X86Instr.addressing_mode
++                            and type I.ea = X86Instr.ea
++                            and type I.instr = X86Instr.instr
++                            and type I.instruction = X86Instr.instruction
++                            and type I.operand = X86Instr.operand
++    structure Liveness  : LIVENESS (* where CFG = Flowgraph *)
++                          where type CFG.I.addressing_mode = Flowgraph.I.addressing_mode
++                            and type CFG.I.ea = Flowgraph.I.ea
++                            and type CFG.I.instr = Flowgraph.I.instr
++                            and type CFG.I.instruction = Flowgraph.I.instruction
++                            and type CFG.I.operand = Flowgraph.I.operand
++                            and type CFG.P.Client.pseudo_op = Flowgraph.P.Client.pseudo_op
++                            and type CFG.P.T.Basis.cond = Flowgraph.P.T.Basis.cond
++                            and type CFG.P.T.Basis.div_rounding_mode = Flowgraph.P.T.Basis.div_rounding_mode
++                            and type CFG.P.T.Basis.ext = Flowgraph.P.T.Basis.ext
++                            and type CFG.P.T.Basis.fcond = Flowgraph.P.T.Basis.fcond
++                            and type CFG.P.T.Basis.rounding_mode = Flowgraph.P.T.Basis.rounding_mode
++                            and type CFG.P.T.Constant.const = Flowgraph.P.T.Constant.const
++                            and type ('s,'r,'f,'c) CFG.P.T.Extension.ccx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.ccx
++                            and type ('s,'r,'f,'c) CFG.P.T.Extension.fx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.fx
++                            and type ('s,'r,'f,'c) CFG.P.T.Extension.rx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.rx
++                            and type ('s,'r,'f,'c) CFG.P.T.Extension.sx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.sx
++                            and type CFG.P.T.I.div_rounding_mode = Flowgraph.P.T.I.div_rounding_mode
++                            and type CFG.P.T.Region.region = Flowgraph.P.T.Region.region
++                            and type CFG.P.T.ccexp = Flowgraph.P.T.ccexp
++                            and type CFG.P.T.fexp = Flowgraph.P.T.fexp
++                            (* and type CFG.P.T.labexp = Flowgraph.P.T.labexp *)
++                            and type CFG.P.T.mlrisc = Flowgraph.P.T.mlrisc
++                            and type CFG.P.T.oper = Flowgraph.P.T.oper
++                            and type CFG.P.T.rep = Flowgraph.P.T.rep
++                            and type CFG.P.T.rexp = Flowgraph.P.T.rexp
++                            and type CFG.P.T.stm = Flowgraph.P.T.stm
++                            and type CFG.block = Flowgraph.block
++                            and type CFG.block_kind = Flowgraph.block_kind
++                            and type CFG.edge_info = Flowgraph.edge_info
++                            and type CFG.edge_kind = Flowgraph.edge_kind
++                            and type CFG.info = Flowgraph.info
++    structure Asm       : INSTRUCTION_EMITTER (* where I = X86Instr and S.P = Flowgraph.P *)
++                          where type I.addressing_mode = X86Instr.addressing_mode
++                            and type I.ea = X86Instr.ea
++                            and type I.instr = X86Instr.instr
++                            and type I.instruction = X86Instr.instruction
++                            and type I.operand = X86Instr.operand
++                          where type S.P.Client.pseudo_op = Flowgraph.P.Client.pseudo_op
++                            and type S.P.T.Basis.cond = Flowgraph.P.T.Basis.cond
++                            and type S.P.T.Basis.div_rounding_mode = Flowgraph.P.T.Basis.div_rounding_mode
++                            and type S.P.T.Basis.ext = Flowgraph.P.T.Basis.ext
++                            and type S.P.T.Basis.fcond = Flowgraph.P.T.Basis.fcond
++                            and type S.P.T.Basis.rounding_mode = Flowgraph.P.T.Basis.rounding_mode
++                            and type S.P.T.Constant.const = Flowgraph.P.T.Constant.const
++                            and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.ccx
++                            and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.fx
++                            and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.rx
++                            and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) Flowgraph.P.T.Extension.sx
++                            and type S.P.T.I.div_rounding_mode = Flowgraph.P.T.I.div_rounding_mode
++                            and type S.P.T.Region.region = Flowgraph.P.T.Region.region
++                            and type S.P.T.ccexp = Flowgraph.P.T.ccexp
++                            and type S.P.T.fexp = Flowgraph.P.T.fexp
++                            (* and type S.P.T.labexp = Flowgraph.P.T.labexp *)
++                            and type S.P.T.mlrisc = Flowgraph.P.T.mlrisc
++                            and type S.P.T.oper = Flowgraph.P.T.oper
++                            and type S.P.T.rep = Flowgraph.P.T.rep
++                            and type S.P.T.rexp = Flowgraph.P.T.rexp
++                            and type S.P.T.stm = Flowgraph.P.T.stm
++   ) : CFG_OPTIMIZATION =
++struct
+    val debug = false         (* set this to true to debug this module 
+                               * set this to false for production use.
+                               *) 
+    val debugLiveness = true (* debug liveness analysis *)
+    val debugDead = false     (* debug dead code removal *)
+    val sanityCheck = true
+-in
+-functor X86FP
+-   (structure X86Instr  : X86INSTR
+-    structure X86Props  : INSN_PROPERTIES 
+-			      where I = X86Instr
+-    structure Flowgraph : CONTROL_FLOW_GRAPH
+-			      where I = X86Instr
+-    structure Liveness  : LIVENESS 
+-			      where CFG = Flowgraph
+-    structure Asm       : INSTRUCTION_EMITTER 
+-			      where I = X86Instr
+-				and S.P = Flowgraph.P
+-   ) : CFG_OPTIMIZATION = 
+-struct
++
+    structure CFG = Flowgraph
+    structure G  = Graph
+    structure I  = X86Instr
+@@ -1543,14 +1604,36 @@ struct
+ 		       * Catch instructions that absolutely 
+ 		       * should not have been generated at this point.
+ 		       *)
+-		   | (I.FLD1 | I.FLDL2E | I.FLDLG2 | I.FLDLN2 | I.FLDPI |
+-		      I.FLDZ | I.FLDL _ | I.FLDS _ | I.FLDT _ | 
+-		      I.FILD _ | I.FILDL _ | I.FILDLL _ | 
+-		      I.FENV _ | I.FBINARY _ | I.FIBINARY _ | I.FUNARY _ |
+-		      I.FUCOMPP | I.FUCOM _ | I.FUCOMP _ | I.FCOMPP | I.FXCH _ |
+-                      I.FCOMI _ | I.FCOMIP _ | I.FUCOMI _ | I.FUCOMIP _ |
+-		      I.FSTPL _ | I.FSTPS _ | I.FSTPT _ | I.FSTL _ | I.FSTS _ 
+-		     ) => bug("Illegal FP instructions")
++		   | I.FLD1 => bug("Illegal FP instructions")
++		   | I.FLDL2E => bug("Illegal FP instructions")
++		   | I.FLDLG2 => bug("Illegal FP instructions")
++		   | I.FLDLN2 => bug("Illegal FP instructions")
++		   | I.FLDPI => bug("Illegal FP instructions")
++		   | I.FLDZ => bug("Illegal FP instructions")
++		   | I.FLDL _ => bug("Illegal FP instructions")
++		   | I.FLDS _ => bug("Illegal FP instructions")
++		   | I.FLDT _ => bug("Illegal FP instructions")
++		   | I.FILD _ => bug("Illegal FP instructions")
++		   | I.FILDL _ => bug("Illegal FP instructions")
++		   | I.FILDLL _ => bug("Illegal FP instructions")
++		   | I.FENV _ => bug("Illegal FP instructions")
++		   | I.FBINARY _ => bug("Illegal FP instructions")
++		   | I.FIBINARY _ => bug("Illegal FP instructions")
++		   | I.FUNARY _ => bug("Illegal FP instructions")
++		   | I.FUCOMPP => bug("Illegal FP instructions")
++		   | I.FUCOM _ => bug("Illegal FP instructions")
++		   | I.FUCOMP _ => bug("Illegal FP instructions")
++		   | I.FCOMPP => bug("Illegal FP instructions")
++		   | I.FXCH _ => bug("Illegal FP instructions")
++		   | I.FCOMI _ => bug("Illegal FP instructions")
++		   | I.FCOMIP _ => bug("Illegal FP instructions")
++		   | I.FUCOMI _ => bug("Illegal FP instructions")
++		   | I.FUCOMIP _ => bug("Illegal FP instructions")
++		   | I.FSTPL _ => bug("Illegal FP instructions")
++		   | I.FSTPS _ => bug("Illegal FP instructions")
++		   | I.FSTPT _ => bug("Illegal FP instructions")
++		   | I.FSTL _ => bug("Illegal FP instructions")
++		   | I.FSTS _ => bug("Illegal FP instructions")
+ 
+ 		      (* Other instructions are untouched *)
+ 		   | instr => FINISH(mark(I.INSTR instr, an)::code)
+@@ -1575,8 +1658,12 @@ struct
+                fun pop() = n := !n - 1
+                fun scan(I.INSTR(I.FBINARY{binOp, ...})) = 
+                       (case binOp of 
+-                        ( I.FADDP | I.FSUBP | I.FSUBRP | I.FMULP
+-                        | I.FDIVP | I.FDIVRP) => pop()
++                        I.FADDP => pop()
++                      | I.FSUBP => pop()
++                      | I.FSUBRP => pop()
++                      | I.FMULP => pop()
++                      | I.FDIVP => pop()
++                      | I.FDIVRP => pop()
+                       | _ => ()
+                       )
+                  | scan(I.INSTR(I.FIBINARY{binOp, ...})) = ()
+@@ -1670,5 +1757,3 @@ struct
+        else repairCriticalEdges(Cfg)
+    end 
+ end (* functor *)
+-
+-end (* local *)
+diff --git a/x86/mltree/x86.sml b/x86/mltree/x86.sml
+index 3c98b66..092f32a 100644
+--- a/x86/mltree/x86.sml
++++ b/x86/mltree/x86.sml
+@@ -32,19 +32,77 @@
+  *
+  * -- Allen
+  *)
+-local
+-   val rewriteMemReg = true (* should we rewrite memRegs *)
+-   val enableFastFPMode = true (* set this to false to disable the mode *)
+-in
+ 
+ functor X86
+   (structure X86Instr : X86INSTR
+-   structure MLTreeUtils : MLTREE_UTILS
+-			where T = X86Instr.T
+-   structure ExtensionComp : MLTREE_EXTENSION_COMP
+-     			where I = X86Instr and T = X86Instr.T
+-   structure MLTreeStream : MLTREE_STREAM
+-			where T = ExtensionComp.T
++   structure MLTreeUtils : MLTREE_UTILS (* where T = X86Instr.T *)
++                           where type T.Basis.cond = X86Instr.T.Basis.cond
++                             and type T.Basis.div_rounding_mode = X86Instr.T.Basis.div_rounding_mode
++                             and type T.Basis.ext = X86Instr.T.Basis.ext
++                             and type T.Basis.fcond = X86Instr.T.Basis.fcond
++                             and type T.Basis.rounding_mode = X86Instr.T.Basis.rounding_mode
++                             and type T.Constant.const = X86Instr.T.Constant.const
++                             and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) X86Instr.T.Extension.ccx
++                             and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) X86Instr.T.Extension.fx
++                             and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) X86Instr.T.Extension.rx
++                             and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) X86Instr.T.Extension.sx
++                             and type T.I.div_rounding_mode = X86Instr.T.I.div_rounding_mode
++                             and type T.Region.region = X86Instr.T.Region.region
++                             and type T.ccexp = X86Instr.T.ccexp
++                             and type T.fexp = X86Instr.T.fexp
++                             (* and type T.labexp = X86Instr.T.labexp *)
++                             and type T.mlrisc = X86Instr.T.mlrisc
++                             and type T.oper = X86Instr.T.oper
++                             and type T.rep = X86Instr.T.rep
++                             and type T.rexp = X86Instr.T.rexp
++                             and type T.stm = X86Instr.T.stm
++   structure ExtensionComp : MLTREE_EXTENSION_COMP (* where I = X86Instr and T = X86Instr.T *)
++                             where type I.addressing_mode = X86Instr.addressing_mode
++                               and type I.ea = X86Instr.ea
++                               and type I.instr = X86Instr.instr
++                               and type I.instruction = X86Instr.instruction
++                               and type I.operand = X86Instr.operand
++                             where type T.Basis.cond = X86Instr.T.Basis.cond
++                               and type T.Basis.div_rounding_mode = X86Instr.T.Basis.div_rounding_mode
++                               and type T.Basis.ext = X86Instr.T.Basis.ext
++                               and type T.Basis.fcond = X86Instr.T.Basis.fcond
++                               and type T.Basis.rounding_mode = X86Instr.T.Basis.rounding_mode
++                               and type T.Constant.const = X86Instr.T.Constant.const
++                               and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) X86Instr.T.Extension.ccx
++                               and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) X86Instr.T.Extension.fx
++                               and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) X86Instr.T.Extension.rx
++                               and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) X86Instr.T.Extension.sx
++                               and type T.I.div_rounding_mode = X86Instr.T.I.div_rounding_mode
++                               and type T.Region.region = X86Instr.T.Region.region
++                               and type T.ccexp = X86Instr.T.ccexp
++                               and type T.fexp = X86Instr.T.fexp
++                               (* and type T.labexp = X86Instr.T.labexp *)
++                               and type T.mlrisc = X86Instr.T.mlrisc
++                               and type T.oper = X86Instr.T.oper
++                               and type T.rep = X86Instr.T.rep
++                               and type T.rexp = X86Instr.T.rexp
++                               and type T.stm = X86Instr.T.stm
++   structure MLTreeStream : MLTREE_STREAM (* where T = ExtensionComp.T *)
++                            where type T.Basis.cond = ExtensionComp.T.Basis.cond
++                              and type T.Basis.div_rounding_mode = ExtensionComp.T.Basis.div_rounding_mode
++                              and type T.Basis.ext = ExtensionComp.T.Basis.ext
++                              and type T.Basis.fcond = ExtensionComp.T.Basis.fcond
++                              and type T.Basis.rounding_mode = ExtensionComp.T.Basis.rounding_mode
++                              and type T.Constant.const = ExtensionComp.T.Constant.const
++                              and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) ExtensionComp.T.Extension.ccx
++                              and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) ExtensionComp.T.Extension.fx
++                              and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) ExtensionComp.T.Extension.rx
++                              and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) ExtensionComp.T.Extension.sx
++                              and type T.I.div_rounding_mode = ExtensionComp.T.I.div_rounding_mode
++                              and type T.Region.region = ExtensionComp.T.Region.region
++                              and type T.ccexp = ExtensionComp.T.ccexp
++                              and type T.fexp = ExtensionComp.T.fexp
++                              (* and type T.labexp = ExtensionComp.T.labexp *)
++                              and type T.mlrisc = ExtensionComp.T.mlrisc
++                              and type T.oper = ExtensionComp.T.oper
++                              and type T.rep = ExtensionComp.T.rep
++                              and type T.rexp = ExtensionComp.T.rexp
++                              and type T.stm = ExtensionComp.T.stm
+     datatype arch = Pentium | PentiumPro | PentiumII | PentiumIII
+     val arch : arch ref
+     val cvti2f : 
+@@ -65,6 +123,9 @@ functor X86
+           val rewriteMemReg : bool
+       end = 
+ struct
++  val rewriteMemReg = true (* should we rewrite memRegs *)
++  val enableFastFPMode = true (* set this to false to disable the mode *)
++
+   structure I = X86Instr
+   structure T = I.T
+   structure TS = ExtensionComp.TS
+@@ -421,7 +482,8 @@ struct
+ 
+           (* reduce an expression into an operand *)
+       and operand(T.LI i) = I.Immed(toInt32(i)) 
+-        | operand(x as (T.CONST _ | T.LABEL _)) = I.ImmedLabel x
++        | operand(x as T.CONST _) = I.ImmedLabel x
++        | operand(x as T.LABEL _) = I.ImmedLabel x
+         | operand(T.LABEXP le) = I.ImmedLabel le
+         | operand(T.REG(_,r)) = IntReg r
+         | operand(T.LOAD(32,ea,mem)) = address(ea, mem)
+@@ -968,8 +1030,8 @@ struct
+ 		 else
+ 		   move'(I.Immed(n), rdOpnd, an)
+ 	       end
+-             | (T.CONST _ | T.LABEL _) => 
+-                 move'(I.ImmedLabel exp, rdOpnd, an)
++             | T.CONST _ => move'(I.ImmedLabel exp, rdOpnd, an)
++             | T.LABEL _ => move'(I.ImmedLabel exp, rdOpnd, an)
+              | T.LABEXP le => move'(I.ImmedLabel le, rdOpnd, an)
+ 
+                (* 32-bit addition *)
+@@ -1094,7 +1156,14 @@ struct
+           * On the x86, TEST is superior to AND for doing the same thing,
+           * since it doesn't need to write out the result in a register.
+           *)
+-     and cmpWithZero(cc as (T.EQ | T.NE), e as T.ANDB(ty, a, b), an) = 
++     and cmpWithZero(cc as T.EQ, e as T.ANDB(ty, a, b), an) =
++            (case ty of
++               8  => test(I.TESTB, a, b, an)
++             | 16 => test(I.TESTW, a, b, an)
++             | 32 => test(I.TESTL, a, b, an)
++             | _  => doExpr(e, newReg(), an);
++             cc)
++       | cmpWithZero(cc as T.NE, e as T.ANDB(ty, a, b), an) =
+             (case ty of
+                8  => test(I.TESTB, a, b, an)
+              | 16 => test(I.TESTW, a, b, an)
+@@ -1408,7 +1477,8 @@ struct
+         *)
+       and foldableFexp(T.FREG _) = true
+         | foldableFexp(T.FLOAD _) = true
+-        | foldableFexp(T.CVTI2F(_, (16 | 32), _)) = true
++        | foldableFexp(T.CVTI2F(_, 16, _)) = true
++        | foldableFexp(T.CVTI2F(_, 32, _)) = true
+         | foldableFexp(T.CVTF2F(_, _, t)) = foldableFexp t
+         | foldableFexp(T.FMARK(t, _)) = foldableFexp t
+         | foldableFexp _ = false
+@@ -1531,7 +1601,8 @@ struct
+               (* Try to fold the the memory operand or integer conversion *) 
+               and suFold(e as T.FREG _) = (LEAF(0, e, []), false)
+                 | suFold(e as T.FLOAD _) = (LEAF(0, e, []), false)
+-                | suFold(e as T.CVTI2F(_,(16 | 32),_)) = (LEAF(0, e, []), true)
++                | suFold(e as T.CVTI2F(_,16,_)) = (LEAF(0, e, []), true)
++                | suFold(e as T.CVTI2F(_,32,_)) = (LEAF(0, e, []), true)
+                 | suFold(T.CVTF2F(_, _, t)) = suFold t
+                 | suFold(T.FMARK(t, a)) = 
+                   let val (t, integer) = suFold t 
+@@ -1725,7 +1796,8 @@ struct
+           let 
+               fun isMemOpnd(T.FREG(_, f)) = isFMemReg f
+                 | isMemOpnd(T.FLOAD _) = true
+-                | isMemOpnd(T.CVTI2F(_, (16 | 32), _)) = true
++                | isMemOpnd(T.CVTI2F(_, 16, _)) = true
++                | isMemOpnd(T.CVTI2F(_, 32, _)) = true
+                 | isMemOpnd(T.CVTF2F(_, _, t)) = isMemOpnd t
+                 | isMemOpnd(T.FMARK(t, _)) = isMemOpnd t
+                 | isMemOpnd _ = false
+@@ -2006,5 +2078,3 @@ struct
+   end 
+ 
+ end (* functor *)
+-
+-end (* local *)
+diff --git a/x86/omit-frameptr/x86omit-frameptr.sml b/x86/omit-frameptr/x86omit-frameptr.sml
+index be5f2a4..c14cc0b 100644
+--- a/x86/omit-frameptr/x86omit-frameptr.sml
++++ b/x86/omit-frameptr/x86omit-frameptr.sml
+@@ -10,8 +10,50 @@
+  *)
+ functor X86OmitFramePointer (
+     structure I : X86INSTR 
+-    structure CFG : CONTROL_FLOW_GRAPH where I = I
+-    structure MemRegs : MEMORY_REGISTERS where I=I
++    structure CFG : CONTROL_FLOW_GRAPH (* where I = I *)
++                    where type I.addressing_mode = I.addressing_mode
++                      and type I.ea = I.ea
++                      and type I.instr = I.instr
++                      and type I.instruction = I.instruction
++                      and type I.operand = I.operand
++    structure MemRegs : MEMORY_REGISTERS (* where I = I *)
++                        where type I.Constant.const = I.Constant.const
++                          and type I.Region.region = I.Region.region
++                          and type I.T.Basis.cond = I.T.Basis.cond
++                          and type I.T.Basis.div_rounding_mode = I.T.Basis.div_rounding_mode
++                          and type I.T.Basis.ext = I.T.Basis.ext
++                          and type I.T.Basis.fcond = I.T.Basis.fcond
++                          and type I.T.Basis.rounding_mode = I.T.Basis.rounding_mode
++                          and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) I.T.Extension.ccx
++                          and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) I.T.Extension.fx
++                          and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) I.T.Extension.rx
++                          and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) I.T.Extension.sx
++                          and type I.T.I.div_rounding_mode = I.T.I.div_rounding_mode
++                          and type I.T.ccexp = I.T.ccexp
++                          and type I.T.fexp = I.T.fexp
++                          (* and type I.T.labexp = I.T.labexp *)
++                          and type I.T.mlrisc = I.T.mlrisc
++                          and type I.T.oper = I.T.oper
++                          and type I.T.rep = I.T.rep
++                          and type I.T.rexp = I.T.rexp
++                          and type I.T.stm = I.T.stm
++                          (* and type I.addressing_mode = I.addressing_mode *)
++                          and type I.binaryOp = I.binaryOp
++                          and type I.bitOp = I.bitOp
++                          and type I.cond = I.cond
++                          and type I.fbinOp = I.fbinOp
++                          and type I.fenvOp = I.fenvOp
++                          and type I.fibinOp = I.fibinOp
++                          and type I.fsize = I.fsize
++                          and type I.funOp = I.funOp
++                          and type I.instr = I.instr
++                          and type I.instruction = I.instruction
++                          and type I.isize = I.isize
++                          and type I.move = I.move
++                          and type I.multDivOp = I.multDivOp
++                          and type I.operand = I.operand
++                          and type I.shiftOp = I.shiftOp
++                          and type I.unaryOp = I.unaryOp
+     val memRegBase : CellsBasis.cell option): OMIT_FRAME_POINTER = 
+ struct
+   structure CFG = CFG
+diff --git a/x86/ra/x86RA.sml b/x86/ra/x86RA.sml
+index 806296f..20db98c 100644
+--- a/x86/ra/x86RA.sml
++++ b/x86/ra/x86RA.sml
+@@ -109,13 +109,45 @@
+ 
+ functor X86RA 
+   ( structure I          : X86INSTR
+-    structure InsnProps  : INSN_PROPERTIES 
+-			       where I = I
+-    structure CFG        : CONTROL_FLOW_GRAPH 
+-			       where I = I
+-    structure Asm        : INSTRUCTION_EMITTER 
+-			       where I = I 
+-				 and S.P = CFG.P
++    structure InsnProps  : INSN_PROPERTIES (* where I = I *)
++                           where type I.addressing_mode = I.addressing_mode
++                             and type I.ea = I.ea
++                             and type I.instr = I.instr
++                             and type I.instruction = I.instruction
++                             and type I.operand = I.operand
++    structure CFG        : CONTROL_FLOW_GRAPH (* where I = I *)
++                           where type I.addressing_mode = I.addressing_mode
++                             and type I.ea = I.ea
++                             and type I.instr = I.instr
++                             and type I.instruction = I.instruction
++                             and type I.operand = I.operand
++    structure Asm        : INSTRUCTION_EMITTER (* where I = I and S.P = CFG.P *)
++                           where type I.addressing_mode = I.addressing_mode
++                             and type I.ea = I.ea
++                             and type I.instr = I.instr
++                             and type I.instruction = I.instruction
++                             and type I.operand = I.operand
++                           where type S.P.Client.pseudo_op = CFG.P.Client.pseudo_op
++                             and type S.P.T.Basis.cond = CFG.P.T.Basis.cond
++                             and type S.P.T.Basis.div_rounding_mode = CFG.P.T.Basis.div_rounding_mode
++                             and type S.P.T.Basis.ext = CFG.P.T.Basis.ext
++                             and type S.P.T.Basis.fcond = CFG.P.T.Basis.fcond
++                             and type S.P.T.Basis.rounding_mode = CFG.P.T.Basis.rounding_mode
++                             and type S.P.T.Constant.const = CFG.P.T.Constant.const
++                             and type ('s,'r,'f,'c) S.P.T.Extension.ccx = ('s,'r,'f,'c) CFG.P.T.Extension.ccx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.fx = ('s,'r,'f,'c) CFG.P.T.Extension.fx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.rx = ('s,'r,'f,'c) CFG.P.T.Extension.rx
++                             and type ('s,'r,'f,'c) S.P.T.Extension.sx = ('s,'r,'f,'c) CFG.P.T.Extension.sx
++                             and type S.P.T.I.div_rounding_mode = CFG.P.T.I.div_rounding_mode
++                             and type S.P.T.Region.region = CFG.P.T.Region.region
++                             and type S.P.T.ccexp = CFG.P.T.ccexp
++                             and type S.P.T.fexp = CFG.P.T.fexp
++                             (* and type S.P.T.labexp = CFG.P.T.labexp *)
++                             and type S.P.T.mlrisc = CFG.P.T.mlrisc
++                             and type S.P.T.oper = CFG.P.T.oper
++                             and type S.P.T.rep = CFG.P.T.rep
++                             and type S.P.T.rexp = CFG.P.T.rexp
++                             and type S.P.T.stm = CFG.P.T.stm
+ 
+       (* Spilling heuristics determines which node should be spilled 
+        * You can use Chaitin, ChowHenessey, or one of your own.
+@@ -126,7 +158,12 @@ functor X86RA
+        * spill code.  You can use RASpill, or RASpillWithRenaming,
+        * or write your own if you are feeling adventurous.
+        *)
+-    structure Spill : RA_SPILL where I = I 
++    structure Spill : RA_SPILL (* where I = I *)
++                      where type I.addressing_mode = I.addressing_mode
++                        and type I.ea = I.ea
++                        and type I.instr = I.instr
++                        and type I.instruction = I.instruction
++                        and type I.operand = I.operand
+ 
+ 
+     type spill_info (* user-defined abstract type *)
+@@ -304,17 +341,16 @@ struct
+     (* This is the generic register allocator *)
+     structure Ra = 
+       RegisterAllocator
+-       (SpillHeur)
+-       (MemoryRA             (* for memory coalescing *)
++       (structure SpillHeuristics = SpillHeur
++        structure Flowgraph = MemoryRA             (* for memory coalescing *)
+          (RADeadCodeElim     (* do the funky dead code elimination stuff *)
+-            (ClusterRA
++            (structure Flowgraph = ClusterRA
+                (structure Flowgraph = CFG
+                 structure Asm = Asm
+                 structure InsnProps = InsnProps
+                 structure Spill = Spill
+                )
+-            )
+-            (fun cellkind CB.GP = true | cellkind _ = false
++             fun cellkind CB.GP = true | cellkind _ = false
+              val deadRegs = deadRegs
+              val affectedBlocks = affectedBlocks
+              val spillInit = spillInit
+diff --git a/x86/ra/x86Rewrite.sig b/x86/ra/x86Rewrite.sig
+index eaacca7..ddb6486 100644
+--- a/x86/ra/x86Rewrite.sig
++++ b/x86/ra/x86Rewrite.sig
+@@ -1,6 +1,15 @@
+ signature X86REWRITE = sig
+   structure I  : X86INSTR
+-  structure CB : CELLS_BASIS = CellsBasis
++  structure CB : CELLS_BASIS (* = CellsBasis *)
++                 where type CellSet.cellset = CellsBasis.CellSet.cellset
++                   and type 'a ColorTable.hash_table = 'a CellsBasis.ColorTable.hash_table
++                   and type 'a HashTable.hash_table = 'a CellsBasis.HashTable.hash_table
++                   and type SortedCells.sorted_cells = CellsBasis.SortedCells.sorted_cells
++                   and type cell = CellsBasis.cell
++                   and type cellColor = CellsBasis.cellColor
++                   and type cellkind = CellsBasis.cellkind
++                   and type cellkindDesc = CellsBasis.cellkindDesc
++                   and type cellkindInfo = CellsBasis.cellkindInfo
+   val rewriteUse : I.instruction * CB.cell * CB.cell -> I.instruction
+   val rewriteDef : I.instruction * CB.cell * CB.cell -> I.instruction
+   val frewriteUse : I.instruction * CB.cell * CB.cell -> I.instruction
+diff --git a/x86/ra/x86SpillInstr.sml b/x86/ra/x86SpillInstr.sml
+index dcf2305..7417847 100644
+--- a/x86/ra/x86SpillInstr.sml
++++ b/x86/ra/x86SpillInstr.sml
+@@ -8,7 +8,12 @@
+  * introduced before.
+  *)
+ functor X86SpillInstr(structure Instr: X86INSTR
+-                 structure Props: INSN_PROPERTIES where I = Instr
++                      structure Props: INSN_PROPERTIES (* where I = Instr *)
++                                       where type I.addressing_mode = Instr.addressing_mode
++                                         and type I.ea = Instr.ea
++                                         and type I.instr = Instr.instr
++                                         and type I.instruction = Instr.instruction
++                                         and type I.operand = Instr.operand
+ 		) : ARCH_SPILL_INSTR = struct
+ 
+   structure I  = Instr
+@@ -56,7 +61,28 @@ functor X86SpillInstr(structure Instr: X86INSTR
+ 	  done(I.CALL{opnd=addr, defs=C.rmvReg(reg,defs), 
+ 				 return=return, uses=uses, 
+ 		      cutsTo=cutsTo, mem=mem, pops=pops}, an)
+-      | I.MOVE{mvOp as (I.MOVZBL|I.MOVSBL|I.MOVZWL|I.MOVSWL), src, dst} => 
++      | I.MOVE{mvOp as I.MOVZBL, src, dst} =>
++	  let val tmpR = newReg() val tmp = I.Direct tmpR
++	  in  {proh=[tmpR], newReg=SOME tmpR,
++	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
++		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
++	      }
++	  end
++      | I.MOVE{mvOp as I.MOVSBL, src, dst} =>
++	  let val tmpR = newReg() val tmp = I.Direct tmpR
++	  in  {proh=[tmpR], newReg=SOME tmpR,
++	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
++		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
++	      }
++	  end
++      | I.MOVE{mvOp as I.MOVZWL, src, dst} =>
++	  let val tmpR = newReg() val tmp = I.Direct tmpR
++	  in  {proh=[tmpR], newReg=SOME tmpR,
++	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
++		     I.move{mvOp=I.MOVL, src=tmp, dst=spillLoc}]
++	      }
++	  end
++      | I.MOVE{mvOp as I.MOVSWL, src, dst} =>
+ 	  let val tmpR = newReg() val tmp = I.Direct tmpR
+ 	  in  {proh=[tmpR], newReg=SOME tmpR,
+ 	       code=[mark(I.MOVE{mvOp=mvOp, src=src, dst=tmp}, an),
+@@ -99,7 +125,12 @@ functor X86SpillInstr(structure Instr: X86INSTR
+ 	      newReg=NONE
+ 	     }
+       | I.BINARY{binOp, src, dst} => let (* note: dst = reg *)
+-	 fun multBinOp(I.MULL|I.MULW|I.MULB|I.IMULL|I.IMULW|I.IMULB) = true
++	 fun multBinOp(I.MULL) = true
++	   | multBinOp(I.MULW) = true
++	   | multBinOp(I.MULB) = true
++	   | multBinOp(I.IMULL) = true
++	   | multBinOp(I.IMULW) = true
++	   | multBinOp(I.IMULB) = true
+ 	   | multBinOp _ = false
+ 	in
+ 	  if multBinOp binOp then let
+diff --git a/x86/x86.mdl b/x86/x86.mdl
+index 88ea24b..fe2e54a 100644
+--- a/x86/x86.mdl
++++ b/x86/x86.mdl
+@@ -578,7 +578,8 @@ struct
+       fun chop fbinOp =
+           let val n = size fbinOp
+           in  case Char.toLower(String.sub(fbinOp,n-1)) of
+-                (#"s" | #"l") => String.substring(fbinOp,0,n-1)
++                #"s" => String.substring(fbinOp,0,n-1)
++              | #"l" => String.substring(fbinOp,0,n-1)
+               | _ => fbinOp
+           end
+ 
+@@ -707,9 +708,23 @@ struct
+     | BINARY of {binOp:binaryOp, src:operand, dst:operand}
+ 	asm: (case (src,binOp) of
+                (I.Direct _,  (* tricky business here for shifts *)
+-               (I.SARL | I.SHRL | I.SHLL |
+-                I.SARW | I.SHRW | I.SHLW |
+-                I.SARB | I.SHRB | I.SHLB)) => ``<binOp>\t%cl, <dst>''
++                I.SARL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLL) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SARW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLW) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SARB) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHRB) => ``<binOp>\t%cl, <dst>''
++             | (I.Direct _,  (* tricky business here for shifts *)
++                I.SHLB) => ``<binOp>\t%cl, <dst>''
+              | _ => ``<binOp>\t<src>, <dst>''
+              )
+ 	(*rtl: ``<binOp>''*)
+diff --git a/x86/x86MC.sml b/x86/x86MC.sml
+index f8a67ab..4481629 100644
+--- a/x86/x86MC.sml
++++ b/x86/x86MC.sml
+@@ -8,11 +8,111 @@
+  *)
+ functor X86MCEmitter
+   (structure Instr : X86INSTR
+-   structure Shuffle : X86SHUFFLE where I = Instr
+-   structure MLTreeEval : MLTREE_EVAL where T = Instr.T
+-   structure MemRegs : MEMORY_REGISTERS where I = Instr
++   structure Shuffle : X86SHUFFLE (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         (* and type I.addressing_mode = Instr.addressing_mode *)
++                         and type I.binaryOp = Instr.binaryOp
++                         and type I.bitOp = Instr.bitOp
++                         and type I.cond = Instr.cond
++                         and type I.fbinOp = Instr.fbinOp
++                         and type I.fenvOp = Instr.fenvOp
++                         and type I.fibinOp = Instr.fibinOp
++                         and type I.fsize = Instr.fsize
++                         and type I.funOp = Instr.funOp
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.isize = Instr.isize
++                         and type I.move = Instr.move
++                         and type I.multDivOp = Instr.multDivOp
++                         and type I.operand = Instr.operand
++                         and type I.shiftOp = Instr.shiftOp
++                         and type I.unaryOp = Instr.unaryOp
++   structure MLTreeEval : MLTREE_EVAL (* where T = Instr.T *)
++                          where type T.Basis.cond = Instr.T.Basis.cond
++                            and type T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                            and type T.Basis.ext = Instr.T.Basis.ext
++                            and type T.Basis.fcond = Instr.T.Basis.fcond
++                            and type T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                            and type T.Constant.const = Instr.T.Constant.const
++                            and type ('s,'r,'f,'c) T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                            and type ('s,'r,'f,'c) T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                            and type ('s,'r,'f,'c) T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                            and type ('s,'r,'f,'c) T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                            and type T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                            and type T.Region.region = Instr.T.Region.region
++                            and type T.ccexp = Instr.T.ccexp
++                            and type T.fexp = Instr.T.fexp
++                            (* and type T.labexp = Instr.T.labexp *)
++                            and type T.mlrisc = Instr.T.mlrisc
++                            and type T.oper = Instr.T.oper
++                            and type T.rep = Instr.T.rep
++                            and type T.rexp = Instr.T.rexp
++                            and type T.stm = Instr.T.stm
++   structure MemRegs : MEMORY_REGISTERS (* where I = Instr *)
++                       where type I.Constant.const = Instr.Constant.const
++                         and type I.Region.region = Instr.Region.region
++                         and type I.T.Basis.cond = Instr.T.Basis.cond
++                         and type I.T.Basis.div_rounding_mode = Instr.T.Basis.div_rounding_mode
++                         and type I.T.Basis.ext = Instr.T.Basis.ext
++                         and type I.T.Basis.fcond = Instr.T.Basis.fcond
++                         and type I.T.Basis.rounding_mode = Instr.T.Basis.rounding_mode
++                         and type ('s,'r,'f,'c) I.T.Extension.ccx = ('s,'r,'f,'c) Instr.T.Extension.ccx
++                         and type ('s,'r,'f,'c) I.T.Extension.fx = ('s,'r,'f,'c) Instr.T.Extension.fx
++                         and type ('s,'r,'f,'c) I.T.Extension.rx = ('s,'r,'f,'c) Instr.T.Extension.rx
++                         and type ('s,'r,'f,'c) I.T.Extension.sx = ('s,'r,'f,'c) Instr.T.Extension.sx
++                         and type I.T.I.div_rounding_mode = Instr.T.I.div_rounding_mode
++                         and type I.T.ccexp = Instr.T.ccexp
++                         and type I.T.fexp = Instr.T.fexp
++                         (* and type I.T.labexp = Instr.T.labexp *)
++                         and type I.T.mlrisc = Instr.T.mlrisc
++                         and type I.T.oper = Instr.T.oper
++                         and type I.T.rep = Instr.T.rep
++                         and type I.T.rexp = Instr.T.rexp
++                         and type I.T.stm = Instr.T.stm
++                         (* and type I.addressing_mode = Instr.addressing_mode *)
++                         and type I.binaryOp = Instr.binaryOp
++                         and type I.bitOp = Instr.bitOp
++                         and type I.cond = Instr.cond
++                         and type I.fbinOp = Instr.fbinOp
++                         and type I.fenvOp = Instr.fenvOp
++                         and type I.fibinOp = Instr.fibinOp
++                         and type I.fsize = Instr.fsize
++                         and type I.funOp = Instr.funOp
++                         and type I.instr = Instr.instr
++                         and type I.instruction = Instr.instruction
++                         and type I.isize = Instr.isize
++                         and type I.move = Instr.move
++                         and type I.multDivOp = Instr.multDivOp
++                         and type I.operand = Instr.operand
++                         and type I.shiftOp = Instr.shiftOp
++                         and type I.unaryOp = Instr.unaryOp
+    val memRegBase : CellsBasis.cell option
+-   structure AsmEmitter : INSTRUCTION_EMITTER where I = Instr) : MC_EMIT = 
++   structure AsmEmitter : INSTRUCTION_EMITTER (* where I = Instr *)
++                          where type I.addressing_mode = Instr.addressing_mode
++                            and type I.ea = Instr.ea
++                            and type I.instr = Instr.instr
++                            and type I.instruction = Instr.instruction
++                            and type I.operand = Instr.operand
++  ) : MC_EMIT =
+ struct
+   structure I = Instr
+   structure C = I.C
+@@ -317,7 +417,8 @@ struct
+        end
+      | I.LEA{r32, addr} => encodeReg(0wx8d, r32, addr)
+      | I.CMPL{lsrc, rsrc} => arith(0wx38, 7) (rsrc, lsrc)
+-     | (I.CMPW _ | I.CMPB _) => error "CMP"
++     | I.CMPW _ => error "CMP"
++     | I.CMPB _ => error "CMP"
+      | I.TESTL{lsrc, rsrc} => test(32, rsrc, lsrc)
+      | I.TESTB{lsrc, rsrc} => test(8, rsrc, lsrc)
+      | I.TESTW _ => error "TEST"
Index: lib/mlrisc-lib/MLRISC.tgz
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream
Index: lib/ckit-lib/ckit.patch
===================================================================
--- lib/ckit-lib/ckit.patch	(revision 7524)
+++ lib/ckit-lib/ckit.patch	(revision 7552)
@@ -1,1847 +1,1628 @@
-diff -N -C 2 -r ckit/README.mlton ckit-mlton/README.mlton
-*** ckit/README.mlton	1969-12-31 19:00:00.000000000 -0500
---- ckit-mlton/README.mlton	2010-02-18 11:59:02.000000000 -0500
-***************
-*** 0 ****
---- 1,14 ----
-+ The following changes were made to the ckit Library, in addition to
-+ deriving the {{{.mlb}}} file from the {{{.cm}}} files:
-+  * {{{parser/parse-tree-sig.sml}}} (modified): Rewrote use of (sequential) {{{withtype}}} in signature.
-+  * {{{parser/parse-tree.sml}}} (modified): Rewrote use of (sequential) {{{withtype}}}.
-+  * {{{parser/grammar/c.lex.sml}}} (modified): Rewrote use of vector literal.
-+  * {{{ast/ast-sig.sml}}} (modified): Rewrote use of {{{withtype}}} in signature.
-+  * {{{ast/pp/pp-lib.sml}}} (modified): Rewrote use of ''or-patterns''.
-+  * {{{ast/pp/pp-ast-ext-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
-+  * {{{ast/pp/pp-ast-adornment-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
-+  * {{{ast/type-util-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
-+  * {{{ast/type-util.sml}}} (modified): Rewrote use of ''or-patterns''.
-+  * {{{ast/sizeof.sml}}} (modified): Rewrote use of ''or-patterns''.
-+  * {{{ast/initializer-normalizer.sml}}} (modified): Rewrote use of ''or-patterns''.
-+  * {{{ast/build-ast.sml}}} (modified): Rewrote use of ''or-patterns''.
-diff -N -C 2 -r ckit/ckit-lib.mlb ckit-mlton/ckit-lib.mlb
-*** ckit/ckit-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- ckit-mlton/ckit-lib.mlb	2009-03-27 18:24:18.000000000 -0400
-***************
-*** 0 ****
---- 1 ----
-+ src/ckit-lib.mlb
-diff -N -C 2 -r ckit/src/ast/ast-sig.sml ckit-mlton/src/ast/ast-sig.sml
-*** ckit/src/ast/ast-sig.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/ast-sig.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 68,72 ****
-      = TypeDecl of {shadow: {strct:bool} option, tid:tid}
-          (* placeholder to indicate where typedefs/enums/structs should be printed *)
-!     | VarDecl of id * initExpression option
-  
-  
---- 68,77 ----
-      = TypeDecl of {shadow: {strct:bool} option, tid:tid}
-          (* placeholder to indicate where typedefs/enums/structs should be printed *)
-!     | VarDecl of 
-!         (* id *) {name: Symbol.symbol, uid: Pid.uid, 
-! 		  location: SourceMap.location, ctype: ctype, 
-! 		  stClass: storageClass, status: declStatus, 
-! 		  global: bool, kind: idKind} *
-!         initExpression option
-  
-  
-***************
-*** 107,112 ****
-      | Comma of expression * expression
-      | Sub of expression * expression          
-!     | Member of expression * member
-!     | Arrow of expression * member
-      | Deref of expression                     
-      | AddrOf of expression                    
---- 112,125 ----
-      | Comma of expression * expression
-      | Sub of expression * expression          
-!     | Member of 
-!         expression * 
-! 	(* member *) {name: Symbol.symbol, uid : Pid.uid, 
-! 		      location : SourceMap.location, 
-! 		      ctype: ctype, kind: memberKind}
-!     | Arrow of 
-!         expression * 
-! 	(* member *) {name: Symbol.symbol, uid : Pid.uid, 
-! 		      location : SourceMap.location, 
-! 		      ctype: ctype, kind: memberKind}
-      | Deref of expression                     
-      | AddrOf of expression                    
-***************
-*** 114,119 ****
-      | Unop of unop * expression
-      | Cast of ctype * expression
-!     | Id of id
-!     | EnumId of member * LargeInt.int
-      | SizeOf of ctype  (* not used in compiler mode; sizeof expr becomes sizeof (typeof expr)  *)
-      | ExprExt of (expression, statement, binop, unop) AstExt.expressionExt
---- 127,140 ----
-      | Unop of unop * expression
-      | Cast of ctype * expression
-!     | Id of 
-! 	(* id *) {name: Symbol.symbol, uid: Pid.uid, 
-! 		  location: SourceMap.location, ctype: ctype, 
-! 		  stClass: storageClass, status: declStatus, 
-! 		  global: bool, kind: idKind}
-!     | EnumId of 
-! 	(* member *) {name: Symbol.symbol, uid : Pid.uid, 
-! 		      location : SourceMap.location, 
-! 		      ctype: ctype, kind: memberKind} *
-! 	LargeInt.int
-      | SizeOf of ctype  (* not used in compiler mode; sizeof expr becomes sizeof (typeof expr)  *)
-      | ExprExt of (expression, statement, binop, unop) AstExt.expressionExt
-***************
-*** 132,136 ****
-      | Array of (LargeInt.int * expression) option * ctype
-      | Pointer of ctype
-!     | Function of ctype * (ctype * id option) list
-      | StructRef of tid (* reference to a tid bound by a struct decl *)
-      | UnionRef of tid  (* reference to a tid bound by a union decl *)
---- 153,163 ----
-      | Array of (LargeInt.int * expression) option * ctype
-      | Pointer of ctype
-!     | Function of 
-!         ctype * 
-! 	(ctype * 
-! 	 (* id *) {name: Symbol.symbol, uid: Pid.uid, 
-! 		   location: SourceMap.location, ctype: ctype, 
-! 		   stClass: storageClass, status: declStatus, 
-! 		   global: bool, kind: idKind} option) list
-      | StructRef of tid (* reference to a tid bound by a struct decl *)
-      | UnionRef of tid  (* reference to a tid bound by a union decl *)
-***************
-*** 152,156 ****
-      | ENUMmem of LargeInt.int
-  
-!   withtype member =
-      {name: Symbol.symbol,  (* the name of the member *)
-       uid : Pid.uid,        (* unique identifier *)
---- 179,183 ----
-      | ENUMmem of LargeInt.int
-  
-!   type member =
-      {name: Symbol.symbol,  (* the name of the member *)
-       uid : Pid.uid,        (* unique identifier *)
-diff -N -C 2 -r ckit/src/ast/build-ast.sml ckit-mlton/src/ast/build-ast.sml
-*** ckit/src/ast/build-ast.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/build-ast.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 291,295 ****
-  	 | _ => false
-  
-!   fun isPartialTy(Ast.StructRef tid | Ast.UnionRef tid) = isPartial tid
-      | isPartialTy _ = false
-  
---- 291,296 ----
-  	 | _ => false
-  
-!   fun isPartialTy(Ast.StructRef tid) = isPartial tid
-!     | isPartialTy(Ast.UnionRef tid) = isPartial tid
-      | isPartialTy _ = false
-  
-***************
-*** 444,448 ****
-  	of Ast.Member(Ast.EXPR (expr'', aid, _), _) => 
-  	    isLval (expr'', lookAid aid)
-! 	 | (Ast.Id _ | Ast.Sub _ | Ast.Arrow _ | Ast.Deref _) => true
-  	 | _ => false
-  
---- 445,452 ----
-  	of Ast.Member(Ast.EXPR (expr'', aid, _), _) => 
-  	    isLval (expr'', lookAid aid)
-! 	 | Ast.Id _ => true
-! 	 | Ast.Sub _ => true
-! 	 | Ast.Arrow _ => true
-! 	 | Ast.Deref _ => true
-  	 | _ => false
-  
-***************
-*** 603,607 ****
-  
-  
-!   fun TCInitializer(ctype as (Ast.TypeRef _ | Ast.Qual _), expr) =
-          TCInitializer(getCoreType ctype, expr)  (* the following TCInitializer cases expect coretypes *)
-      | TCInitializer (Ast.Array(opt, ctype), Ast.Aggregate exprs) = 
---- 607,613 ----
-  
-  
-!   fun TCInitializer(ctype as Ast.TypeRef _, expr) =
-!         TCInitializer(getCoreType ctype, expr)  (* the following TCInitializer cases expect coretypes *)
-!     | TCInitializer(ctype as Ast.Qual _, expr) =
-          TCInitializer(getCoreType ctype, expr)  (* the following TCInitializer cases expect coretypes *)
-      | TCInitializer (Ast.Array(opt, ctype), Ast.Aggregate exprs) = 
-***************
-*** 651,655 ****
-  	  | NONE => bug "TCInitializer: lookTid failed"
-  	  | _ => error "TCInitializer: ill-formed UnionRef type")
-!     | TCInitializer (ty as (Ast.StructRef _ | Ast.UnionRef _), Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
-  	if isAssignableTys {lhsTy=ty, rhsTy=lookAid aid, rhsExprOpt=SOME coreExp} 
-  	  then ()
---- 657,665 ----
-  	  | NONE => bug "TCInitializer: lookTid failed"
-  	  | _ => error "TCInitializer: ill-formed UnionRef type")
-!     | TCInitializer (ty as Ast.StructRef _, Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
-! 	if isAssignableTys {lhsTy=ty, rhsTy=lookAid aid, rhsExprOpt=SOME coreExp} 
-! 	  then ()
-! 	else error "type of initializer is incompatible with type of lval"
-!     | TCInitializer (ty as Ast.UnionRef _, Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
-  	if isAssignableTys {lhsTy=ty, rhsTy=lookAid aid, rhsExprOpt=SOME coreExp} 
-  	  then ()
-***************
-*** 805,809 ****
-            *)
-  	 (* Note: should really reduce constants arith exprs to simple constants *)
-! 	  fun constCheck(Ast.EXPR((Ast.StringConst _ | Ast.IntConst _ | Ast.RealConst _),_,_)) = true
-  	    | constCheck(Ast.EXPR(Ast.QuestionColon(e1, e2, e3), _, _))
-  	    = constCheck e1 andalso constCheck e2 andalso constCheck e3
---- 815,821 ----
-            *)
-  	 (* Note: should really reduce constants arith exprs to simple constants *)
-! 	  fun constCheck(Ast.EXPR(Ast.StringConst _,_,_)) = true
-! 	    | constCheck(Ast.EXPR(Ast.IntConst _,_,_)) = true
-! 	    | constCheck(Ast.EXPR(Ast.RealConst _,_,_)) = true
-  	    | constCheck(Ast.EXPR(Ast.QuestionColon(e1, e2, e3), _, _))
-  	    = constCheck e1 andalso constCheck e2 andalso constCheck e3
-***************
-*** 2372,2376 ****
-  		     of PT.Signed =>
-  			 (case !kind
-! 			    of SOME (Ast.FLOAT | Ast.DOUBLE | Ast.LONGDOUBLE) => 
-  				 error "illegal combination of signed with float/double/long double"
-  			     | _ => ();
---- 2384,2392 ----
-  		     of PT.Signed =>
-  			 (case !kind
-! 			    of SOME Ast.FLOAT => 
-! 				 error "illegal combination of signed with float/double/long double"
-! 			     | SOME Ast.DOUBLE => 
-! 				 error "illegal combination of signed with float/double/long double"
-! 			     | SOME Ast.LONGDOUBLE => 
-  				 error "illegal combination of signed with float/double/long double"
-  			     | _ => ();
-***************
-*** 2380,2384 ****
-  		      | PT.Unsigned =>
-  			 (case !kind
-! 			    of SOME (Ast.FLOAT | Ast.DOUBLE | Ast.LONGDOUBLE) => 
-  				 error "illegal combination of unsigned with float/double/long double"
-  			     | _ => ();
---- 2396,2404 ----
-  		      | PT.Unsigned =>
-  			 (case !kind
-! 			    of SOME Ast.FLOAT => 
-! 				 error "illegal combination of unsigned with float/double/long double"
-! 			     | SOME Ast.DOUBLE => 
-! 				 error "illegal combination of unsigned with float/double/long double"
-! 			     | SOME Ast.LONGDOUBLE => 
-  				 error "illegal combination of unsigned with float/double/long double"
-  			     | _ => ();
-***************
-*** 2395,2399 ****
-  		      | PT.Short =>
-  			 (case !kind
-! 			    of (NONE | SOME Ast.INT) => (kind := SOME Ast.SHORT)
-  			     | SOME ct =>
-  				error (case ct
---- 2415,2420 ----
-  		      | PT.Short =>
-  			 (case !kind
-! 			    of NONE => (kind := SOME Ast.SHORT)
-! 			     | SOME Ast.INT => (kind := SOME Ast.SHORT)
-  			     | SOME ct =>
-  				error (case ct
-***************
-*** 2403,2407 ****
-  			 (case !kind
-  			    of NONE => (kind := SOME Ast.INT)
-! 			     | SOME (Ast.SHORT | Ast.LONG | Ast.LONGLONG) => ()
-  			     | SOME ct =>
-  				error (case ct
---- 2424,2430 ----
-  			 (case !kind
-  			    of NONE => (kind := SOME Ast.INT)
-! 			     | SOME Ast.SHORT => ()
-! 			     | SOME Ast.LONG => ()
-! 			     | SOME Ast.LONGLONG => ()
-  			     | SOME ct =>
-  				error (case ct
-***************
-*** 2688,2692 ****
-  				      of SOME(TAG{ctype=ty,location=loc',...}) => 
-  					 (case ty
-! 					    of (Ast.UnionRef tid | Ast.StructRef tid) => 
-  					       if isPartial tid
-  					       then SOME{tid=tid, alreadyDefined=false}
---- 2711,2725 ----
-  				      of SOME(TAG{ctype=ty,location=loc',...}) => 
-  					 (case ty
-! 					    of Ast.UnionRef tid => 
-! 					       if isPartial tid
-! 					       then SOME{tid=tid, alreadyDefined=false}
-! 					       else if repeated_declarations_ok
-! 					       then SOME{tid=tid, alreadyDefined=true}
-! 					       else (error("Redeclaration of type tag `"
-! 						       ^ tagname
-! 						       ^ "'; previous declaration at "
-! 						       ^ SM.locToString loc');
-! 						     NONE)
-! 					     | Ast.StructRef tid => 
-  					       if isPartial tid
-  					       then SOME{tid=tid, alreadyDefined=false}
-diff -N -C 2 -r ckit/src/ast/initializer-normalizer.sml ckit-mlton/src/ast/initializer-normalizer.sml
-*** ckit/src/ast/initializer-normalizer.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/initializer-normalizer.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 157,161 ****
-  		| SOME _ => fail "Incomplete type for union ref"
-  		| NONE => fail "Inconsistent table for union ref")
-! 	 | (Ast.Numeric _ | Ast.Pointer _ | Ast.Function _ | Ast.EnumRef _) =>
-  	    feed (scalarNorm ctype, inits)
-  	 | Ast.Void => fail "Incomplete type: void"
---- 157,167 ----
-  		| SOME _ => fail "Incomplete type for union ref"
-  		| NONE => fail "Inconsistent table for union ref")
-! 	 | Ast.Numeric _ =>
-! 	    feed (scalarNorm ctype, inits)
-! 	 | Ast.Pointer _ =>
-! 	    feed (scalarNorm ctype, inits)
-! 	 | Ast.Function _ =>
-! 	    feed (scalarNorm ctype, inits)
-! 	 | Ast.EnumRef _ =>
-  	    feed (scalarNorm ctype, inits)
-  	 | Ast.Void => fail "Incomplete type: void"
-diff -N -C 2 -r ckit/src/ast/pp/pp-ast-adornment-sig.sml ckit-mlton/src/ast/pp/pp-ast-adornment-sig.sml
-*** ckit/src/ast/pp/pp-ast-adornment-sig.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/pp/pp-ast-adornment-sig.sml	2009-03-27 18:29:56.000000000 -0400
-***************
-*** 1,9 ****
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! local 
-    type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-  
-    type ('aidinfo,'a,'b) adornment_pp = ('aidinfo -> 'a) -> 'aidinfo -> 'b
-! in
-  signature PPASTADORNMENT = sig
-    type aidinfo
---- 1,9 ----
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! (* local *)
-    type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-  
-    type ('aidinfo,'a,'b) adornment_pp = ('aidinfo -> 'a) -> 'aidinfo -> 'b
-! (* in *)
-  signature PPASTADORNMENT = sig
-    type aidinfo
-***************
-*** 12,14 ****
-    val ppExternalDeclAdornment: (aidinfo,Ast.coreExternalDecl pp,Ast.externalDecl pp) adornment_pp
-  end
-! end
---- 12,14 ----
-    val ppExternalDeclAdornment: (aidinfo,Ast.coreExternalDecl pp,Ast.externalDecl pp) adornment_pp
-  end
-! (* end *)
-diff -N -C 2 -r ckit/src/ast/pp/pp-ast-ext-sig.sml ckit-mlton/src/ast/pp/pp-ast-ext-sig.sml
-*** ckit/src/ast/pp/pp-ast-ext-sig.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/pp/pp-ast-ext-sig.sml	2009-03-27 18:29:56.000000000 -0400
-***************
-*** 1,5 ****
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! local 
-    type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-    type ('a, 'aidinfo) ppExt =
---- 1,5 ----
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! (* local *)
-    type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-    type ('a, 'aidinfo) ppExt =
-***************
-*** 8,12 ****
-         -> 'aidinfo
-         -> Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-! in
-  
-  signature PPASTEXT = sig
---- 8,12 ----
-         -> 'aidinfo
-         -> Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
-! (* in *)
-  
-  signature PPASTEXT = sig
-***************
-*** 25,27 ****
-  end
-  
-! end
---- 25,27 ----
-  end
-  
-! (* end *)
-diff -N -C 2 -r ckit/src/ast/pp/pp-lib.sml ckit-mlton/src/ast/pp/pp-lib.sml
-*** ckit/src/ast/pp/pp-lib.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/pp/pp-lib.sml	2009-03-27 18:29:56.000000000 -0400
-***************
-*** 116,120 ****
-    fun ppId pps ({name,uid,kind,stClass,global,...}: Ast.id) = 
-        case (stClass,global)
-! 	of ((Ast.EXTERN,_) | (_, true)) => (* globals *)
-  	     if !suppressPidGlobalUnderscores then ppSymbol' pps name
-  	     else ppSymbol pps (name,uid)
---- 116,123 ----
-    fun ppId pps ({name,uid,kind,stClass,global,...}: Ast.id) = 
-        case (stClass,global)
-! 	of (Ast.EXTERN,_) => (* globals *)
-! 	     if !suppressPidGlobalUnderscores then ppSymbol' pps name
-! 	     else ppSymbol pps (name,uid)
-! 	 | (_, true) => (* globals *)
-  	     if !suppressPidGlobalUnderscores then ppSymbol' pps name
-  	     else ppSymbol pps (name,uid)
-diff -N -C 2 -r ckit/src/ast/sizeof.sml ckit-mlton/src/ast/sizeof.sml
-*** ckit/src/ast/sizeof.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/sizeof.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 322,326 ****
-        case ty
-  	of Ast.TypeRef tid => processTid sizesErrWarnBug tidtab tid
-! 	 | (Ast.StructRef tid | Ast.UnionRef tid) =>
-  	     processTid sizesErrWarnBug tidtab tid
-  	 | Ast.EnumRef _ => 
---- 322,328 ----
-        case ty
-  	of Ast.TypeRef tid => processTid sizesErrWarnBug tidtab tid
-! 	 | Ast.StructRef tid =>
-! 	     processTid sizesErrWarnBug tidtab tid
-! 	 | Ast.UnionRef tid =>
-  	     processTid sizesErrWarnBug tidtab tid
-  	 | Ast.EnumRef _ => 
-diff -N -C 2 -r ckit/src/ast/type-util-sig.sml ckit-mlton/src/ast/type-util-sig.sml
-*** ckit/src/ast/type-util-sig.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/type-util-sig.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 1,9 ****
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! local 
-    type 'a type_util      = Tables.tidtab -> Ast.ctype               -> 'a 
-    type 'a type_mem_util  = Tables.tidtab -> Ast.ctype * Ast.member  -> 'a 
-    type 'a type_type_util = Tables.tidtab -> Ast.ctype * Ast.ctype -> 'a 
-! in
-  
-  signature TYPE_UTIL =
---- 1,9 ----
-  (* Copyright (c) 1998 by Lucent Technologies *)
-  
-! (* local *)
-    type 'a type_util      = Tables.tidtab -> Ast.ctype               -> 'a 
-    type 'a type_mem_util  = Tables.tidtab -> Ast.ctype * Ast.member  -> 'a 
-    type 'a type_type_util = Tables.tidtab -> Ast.ctype * Ast.ctype -> 'a 
-! (* in *)
-  
-  signature TYPE_UTIL =
-***************
-*** 146,148 ****
-  end (* signature TYPE_UTIL *)
-  
-! end (* local *)
---- 146,148 ----
-  end (* signature TYPE_UTIL *)
-  
-! (* end (* local *) *)
-diff -N -C 2 -r ckit/src/ast/type-util.sml ckit-mlton/src/ast/type-util.sml
-*** ckit/src/ast/type-util.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/ast/type-util.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 283,287 ****
-      case reduceTypedef tidtab ty
-        of Ast.Qual (_,ty) => isStructOrUnion tidtab ty
-!        | (Ast.StructRef tid | Ast.UnionRef tid) => SOME tid
-         | _ => NONE
-  
---- 283,288 ----
-      case reduceTypedef tidtab ty
-        of Ast.Qual (_,ty) => isStructOrUnion tidtab ty
-!        | Ast.StructRef tid => SOME tid
-!        | Ast.UnionRef tid => SOME tid
-         | _ => NONE
-  
-***************
-*** 554,558 ****
-  					       (SOME ct, eml) => (SOME(Pointer ct), eml)
-  					     | (NONE, eml) => (NONE, eml))
-! 	    | ((StructRef tid1, StructRef tid2) | (UnionRef tid1, UnionRef tid2)) =>
-  		if Tid.equal (tid1, tid2) then (SOME ty1, nil) else (NONE, nil)
-  	    | _ => (NONE, nil)
---- 555,561 ----
-  					       (SOME ct, eml) => (SOME(Pointer ct), eml)
-  					     | (NONE, eml) => (NONE, eml))
-! 	    | (StructRef tid1, StructRef tid2) =>
-! 		if Tid.equal (tid1, tid2) then (SOME ty1, nil) else (NONE, nil)
-! 	    | (UnionRef tid1, UnionRef tid2) =>
-  		if Tid.equal (tid1, tid2) then (SOME ty1, nil) else (NONE, nil)
-  	    | _ => (NONE, nil)
-***************
-*** 652,657 ****
-      (case (usualUnaryCnv tidtab ty1, exp1Zero, usualUnaryCnv tidtab ty2, exp2Zero) of  
-         (Ast.Numeric _, _, Ast.Numeric _, _) => usualBinaryCnv tidtab (ty1, ty2) (* get common type *)
-!      | ((Ast.StructRef tid1, _, Ast.StructRef tid2, _) |
-! 	(Ast.UnionRef tid1, _, Ast.UnionRef tid2, _)) =>
-  	  if Tid.equal (tid1, tid2) then SOME ty1
-  	  else NONE
---- 655,662 ----
-      (case (usualUnaryCnv tidtab ty1, exp1Zero, usualUnaryCnv tidtab ty2, exp2Zero) of  
-         (Ast.Numeric _, _, Ast.Numeric _, _) => usualBinaryCnv tidtab (ty1, ty2) (* get common type *)
-!      | (Ast.StructRef tid1, _, Ast.StructRef tid2, _) =>
-! 	  if Tid.equal (tid1, tid2) then SOME ty1
-! 	  else NONE
-!      | (Ast.UnionRef tid1, _, Ast.UnionRef tid2, _) =>
-  	  if Tid.equal (tid1, tid2) then SOME ty1
-  	  else NONE
-***************
-*** 746,752 ****
-                                                 * is a function of no args  *)
-       *)
-! 	     | ((_, nil, _) | (_, _, nil)) => ( ["Type Warning: function call has too few args"]
-! 					       , nil
-! 					       )
-  	     | (nil, argl, _) => (["Type Warning: function call has too many args"]
-  				  , List.map (functionArgConv tidtab) argl
---- 751,760 ----
-                                                 * is a function of no args  *)
-       *)
-! 	     | (_, nil, _) => (["Type Warning: function call has too few args"]
-!                                , nil
-! 			       )
-! 	     | (_, _, nil) => (["Type Warning: function call has too few args"]
-! 			       , nil
-! 			       )
-  	     | (nil, argl, _) => (["Type Warning: function call has too many args"]
-  				  , List.map (functionArgConv tidtab) argl
-diff -N -C 2 -r ckit/src/ckit-lib.mlb ckit-mlton/src/ckit-lib.mlb
-*** ckit/src/ckit-lib.mlb	1969-12-31 19:00:00.000000000 -0500
---- ckit-mlton/src/ckit-lib.mlb	2010-04-02 16:08:40.000000000 -0400
-***************
-*** 0 ****
---- 1,888 ----
-+ 
-+ ann
-+   "nonexhaustiveMatch warn" "redundantMatch warn"
-+   "sequenceNonUnit ignore"
-+   "warnUnused false" "forceUsed"
-+ in
-+ 
-+ local
-+   basis l4 = 
-+     bas
-+       (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb 
-+     end
-+   basis l24 = 
-+     bas
-+       (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
-+     end
-+   basis l71 = 
-+     bas
-+       (* $/pp-lib.cm ====> *) $(SML_LIB)/smlnj-lib/PP/pp-lib.mlb
-+     end
-+   basis l96 = 
-+     bas
-+       (* $/ml-yacc-lib.cm ====> *) $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
-+     end
-+ in
-+ local
-+    $(SML_LIB)/basis/pervasive.mlb
-+    local
-+       open l4
-+    in
-+       structure gs_0 = TextIO
+diff --git a/README.mlton b/README.mlton
+new file mode 100644
+index 0000000..1a82db7
+--- /dev/null
++++ b/README.mlton
+@@ -0,0 +1,14 @@
++The following changes were made to the ckit Library, in addition to
++deriving the {{{.mlb}}} file from the {{{.cm}}} files:
++ * {{{ast/ast-sig.sml}}} (modified): Rewrote use of {{{withtype}}} in signature.
++ * {{{ast/build-ast.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{ast/initializer-normalizer.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{ast/pp/pp-ast-adornment-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
++ * {{{ast/pp/pp-ast-ext-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
++ * {{{ast/pp/pp-lib.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{ast/sizeof.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{ast/type-util-sig.sml}}} (modified): Rewrote use of {{{signature}}} in {{{local}}}.
++ * {{{ast/type-util.sml}}} (modified): Rewrote use of ''or-patterns''.
++ * {{{parser/grammar/c.lex.sml}}} (modified): Rewrote use of vector literal.
++ * {{{parser/parse-tree-sig.sml}}} (modified): Rewrote use of (sequential) {{{withtype}}} in signature.
++ * {{{parser/parse-tree.sml}}} (modified): Rewrote use of (sequential) {{{withtype}}}.
+diff --git a/ckit-lib.mlb b/ckit-lib.mlb
+new file mode 100644
+index 0000000..abc601f
+--- /dev/null
++++ b/ckit-lib.mlb
+@@ -0,0 +1 @@
++src/ckit-lib.mlb
+diff --git a/src/ast/ast-sig.sml b/src/ast/ast-sig.sml
+index 29f5eb2..367fb5a 100644
+--- a/src/ast/ast-sig.sml
++++ b/src/ast/ast-sig.sml
+@@ -67,7 +67,12 @@ sig
+   datatype declaration
+     = TypeDecl of {shadow: {strct:bool} option, tid:tid}
+         (* placeholder to indicate where typedefs/enums/structs should be printed *)
+-    | VarDecl of id * initExpression option
++    | VarDecl of
++        (* id *) {name: Symbol.symbol, uid: Pid.uid,
++                  location: SourceMap.location, ctype: ctype,
++                  stClass: storageClass, status: declStatus,
++                  global: bool, kind: idKind} *
++        initExpression option
+ 
+ 
+   (* STATEMENTS *)
+@@ -106,15 +111,31 @@ sig
+     | Assign of expression * expression
+     | Comma of expression * expression
+     | Sub of expression * expression          
+-    | Member of expression * member
+-    | Arrow of expression * member
++    | Member of
++        expression *
++        (* member *) {name: Symbol.symbol, uid : Pid.uid,
++                      location : SourceMap.location,
++                      ctype: ctype, kind: memberKind}
++    | Arrow of
++        expression *
++        (* member *) {name: Symbol.symbol, uid : Pid.uid,
++                      location : SourceMap.location,
++                      ctype: ctype, kind: memberKind}
+     | Deref of expression                     
+     | AddrOf of expression                    
+     | Binop of binop * expression * expression
+     | Unop of unop * expression
+     | Cast of ctype * expression
+-    | Id of id
+-    | EnumId of member * LargeInt.int
++    | Id of
++        (* id *) {name: Symbol.symbol, uid: Pid.uid,
++                  location: SourceMap.location, ctype: ctype,
++                  stClass: storageClass, status: declStatus,
++                  global: bool, kind: idKind}
++    | EnumId of
++        (* member *) {name: Symbol.symbol, uid : Pid.uid,
++                      location : SourceMap.location,
++                      ctype: ctype, kind: memberKind} *
++	LargeInt.int
+     | SizeOf of ctype  (* not used in compiler mode; sizeof expr becomes sizeof (typeof expr)  *)
+     | ExprExt of (expression, statement, binop, unop) AstExt.expressionExt
+     | ErrorExpr
+@@ -131,7 +152,13 @@ sig
+                                        * signednessTag
+     | Array of (LargeInt.int * expression) option * ctype
+     | Pointer of ctype
+-    | Function of ctype * (ctype * id option) list
++    | Function of
++        ctype *
++        (ctype *
++         (* id *) {name: Symbol.symbol, uid: Pid.uid,
++                   location: SourceMap.location, ctype: ctype,
++                   stClass: storageClass, status: declStatus,
++                   global: bool, kind: idKind} option) list
+     | StructRef of tid (* reference to a tid bound by a struct decl *)
+     | UnionRef of tid  (* reference to a tid bound by a union decl *)
+     | EnumRef of tid   (* reference to a tid bound by a enumeration decl *)
+@@ -151,7 +178,7 @@ sig
+     | UNIONmem
+     | ENUMmem of LargeInt.int
+ 
+-  withtype member =
++  type member =
+     {name: Symbol.symbol,  (* the name of the member *)
+      uid : Pid.uid,        (* unique identifier *)
+      location : SourceMap.location,
+diff --git a/src/ast/build-ast.sml b/src/ast/build-ast.sml
+index 9e8e7c7..65e32bf 100644
+--- a/src/ast/build-ast.sml
++++ b/src/ast/build-ast.sml
+@@ -290,7 +290,8 @@ let
+ 	of SOME{ntype=NONE,...} => true
+ 	 | _ => false
+ 
+-  fun isPartialTy(Ast.StructRef tid | Ast.UnionRef tid) = isPartial tid
++  fun isPartialTy(Ast.StructRef tid) = isPartial tid
++    | isPartialTy(Ast.UnionRef tid) = isPartial tid
+     | isPartialTy _ = false
+ 
+ 
+@@ -443,7 +444,10 @@ let
+       case expr
+ 	of Ast.Member(Ast.EXPR (expr'', aid, _), _) => 
+ 	    isLval (expr'', lookAid aid)
+-	 | (Ast.Id _ | Ast.Sub _ | Ast.Arrow _ | Ast.Deref _) => true
++	 | Ast.Id _ => true
++	 | Ast.Sub _ => true
++	 | Ast.Arrow _ => true
++	 | Ast.Deref _ => true
+ 	 | _ => false
+ 
+   fun checkAssignableLval (expr, ty, s) =
+@@ -602,7 +606,9 @@ let
+        NB 2: if type is array then *do* generate errors when initializer is simple  *)
+ 
+ 
+-  fun TCInitializer(ctype as (Ast.TypeRef _ | Ast.Qual _), expr) =
++  fun TCInitializer(ctype as Ast.TypeRef _, expr) =
++        TCInitializer(getCoreType ctype, expr)  (* the following TCInitializer cases expect coretypes *)
++    | TCInitializer(ctype as Ast.Qual _, expr) =
+         TCInitializer(getCoreType ctype, expr)  (* the following TCInitializer cases expect coretypes *)
+     | TCInitializer (Ast.Array(opt, ctype), Ast.Aggregate exprs) = 
+ 	(case (opt, LargeInt.fromInt(List.length exprs))
+@@ -650,7 +656,11 @@ let
+ 	      error "empty union"
+ 	  | NONE => bug "TCInitializer: lookTid failed"
+ 	  | _ => error "TCInitializer: ill-formed UnionRef type")
+-    | TCInitializer (ty as (Ast.StructRef _ | Ast.UnionRef _), Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
++    | TCInitializer (ty as Ast.StructRef _, Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
++	if isAssignableTys {lhsTy=ty, rhsTy=lookAid aid, rhsExprOpt=SOME coreExp}
++	  then ()
++	else error "type of initializer is incompatible with type of lval"
++    | TCInitializer (ty as Ast.UnionRef _, Ast.Simple(Ast.EXPR(coreExp, aid, _))) =
+ 	if isAssignableTys {lhsTy=ty, rhsTy=lookAid aid, rhsExprOpt=SOME coreExp} 
+ 	  then ()
+ 	else error "type of initializer is incompatible with type of lval"
+@@ -804,7 +814,9 @@ let
+             b) the object has static storage duration			      
+           *)
+ 	 (* Note: should really reduce constants arith exprs to simple constants *)
+-	  fun constCheck(Ast.EXPR((Ast.StringConst _ | Ast.IntConst _ | Ast.RealConst _),_,_)) = true
++	  fun constCheck(Ast.EXPR(Ast.StringConst _,_,_)) = true
++	    | constCheck(Ast.EXPR(Ast.IntConst _,_,_)) = true
++	    | constCheck(Ast.EXPR(Ast.RealConst _,_,_)) = true
+ 	    | constCheck(Ast.EXPR(Ast.QuestionColon(e1, e2, e3), _, _))
+ 	    = constCheck e1 andalso constCheck e2 andalso constCheck e3
+ 	    | constCheck(Ast.EXPR(Ast.Binop(_, e1, e2), _, _))
+@@ -2371,7 +2383,11 @@ end old code ******)
+ 		  (case spec 
+ 		     of PT.Signed =>
+ 			 (case !kind
+-			    of SOME (Ast.FLOAT | Ast.DOUBLE | Ast.LONGDOUBLE) => 
++			    of SOME Ast.FLOAT =>
++				 error "illegal combination of signed with float/double/long double"
++			     | SOME Ast.DOUBLE =>
++				 error "illegal combination of signed with float/double/long double"
++			     | SOME Ast.LONGDOUBLE =>
+ 				 error "illegal combination of signed with float/double/long double"
+ 			     | _ => ();
+ 			  case !signed
+@@ -2379,7 +2395,11 @@ end old code ******)
+ 			     | SOME _ => error "Multiple signed/unsigned")
+ 		      | PT.Unsigned =>
+ 			 (case !kind
+-			    of SOME (Ast.FLOAT | Ast.DOUBLE | Ast.LONGDOUBLE) => 
++			    of SOME Ast.FLOAT =>
++				 error "illegal combination of unsigned with float/double/long double"
++			     | SOME Ast.DOUBLE =>
++				 error "illegal combination of unsigned with float/double/long double"
++			     | SOME Ast.LONGDOUBLE =>
+ 				 error "illegal combination of unsigned with float/double/long double"
+ 			     | _ => ();
+ 			  case !signed
+@@ -2394,7 +2414,8 @@ end old code ******)
+ 					  | _ => "illegal use of char specifier"))
+ 		      | PT.Short =>
+ 			 (case !kind
+-			    of (NONE | SOME Ast.INT) => (kind := SOME Ast.SHORT)
++			    of NONE => (kind := SOME Ast.SHORT)
++			     | SOME Ast.INT => (kind := SOME Ast.SHORT)
+ 			     | SOME ct =>
+ 				error (case ct
+ 					 of Ast.SHORT => "duplicate short specifier"
+@@ -2402,7 +2423,9 @@ end old code ******)
+ 		      | PT.Int =>
+ 			 (case !kind
+ 			    of NONE => (kind := SOME Ast.INT)
+-			     | SOME (Ast.SHORT | Ast.LONG | Ast.LONGLONG) => ()
++			     | SOME Ast.SHORT => ()
++			     | SOME Ast.LONG => ()
++			     | SOME Ast.LONGLONG => ()
+ 			     | SOME ct =>
+ 				error (case ct
+ 					 of Ast.INT => "duplicate int specifier"
+@@ -2687,7 +2710,17 @@ end old code ******)
+ 				   (case lookLocalScope sym
+ 				      of SOME(TAG{ctype=ty,location=loc',...}) => 
+ 					 (case ty
+-					    of (Ast.UnionRef tid | Ast.StructRef tid) => 
++					    of Ast.UnionRef tid =>
++					       if isPartial tid
++					       then SOME{tid=tid, alreadyDefined=false}
++					       else if repeated_declarations_ok
++					       then SOME{tid=tid, alreadyDefined=true}
++					       else (error("Redeclaration of type tag `"
++						       ^ tagname
++						       ^ "'; previous declaration at "
++						       ^ SM.locToString loc');
++						     NONE)
++					     | Ast.StructRef tid =>
+ 					       if isPartial tid
+ 					       then SOME{tid=tid, alreadyDefined=false}
+ 					       else if repeated_declarations_ok
+diff --git a/src/ast/initializer-normalizer.sml b/src/ast/initializer-normalizer.sml
+index 5ea8dbc..2e7a563 100644
+--- a/src/ast/initializer-normalizer.sml
++++ b/src/ast/initializer-normalizer.sml
+@@ -156,7 +156,13 @@ let
+ 		   feed (unionNorm (ctype, fields), inits)
+ 		| SOME _ => fail "Incomplete type for union ref"
+ 		| NONE => fail "Inconsistent table for union ref")
+-	 | (Ast.Numeric _ | Ast.Pointer _ | Ast.Function _ | Ast.EnumRef _) =>
++	 | Ast.Numeric _ =>
++	    feed (scalarNorm ctype, inits)
++	 | Ast.Pointer _ =>
++	    feed (scalarNorm ctype, inits)
++	 | Ast.Function _ =>
++	    feed (scalarNorm ctype, inits)
++	 | Ast.EnumRef _ =>
+ 	    feed (scalarNorm ctype, inits)
+ 	 | Ast.Void => fail "Incomplete type: void"
+ 	 | Ast.Ellipses => fail "Cannot initialize ellipses"
+diff --git a/src/ast/pp/pp-ast-adornment-sig.sml b/src/ast/pp/pp-ast-adornment-sig.sml
+index a7b937b..ab6e0a9 100644
+--- a/src/ast/pp/pp-ast-adornment-sig.sml
++++ b/src/ast/pp/pp-ast-adornment-sig.sml
+@@ -1,14 +1,14 @@
+ (* Copyright (c) 1998 by Lucent Technologies *)
+ 
+-local 
++(* local *)
+   type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
+ 
+   type ('aidinfo,'a,'b) adornment_pp = ('aidinfo -> 'a) -> 'aidinfo -> 'b
+-in
++(* in *)
+ signature PPASTADORNMENT = sig
+   type aidinfo
+   val ppExpressionAdornment: (aidinfo,Ast.coreExpression pp,Ast.expression pp) adornment_pp
+   val ppStatementAdornment : (aidinfo,Ast.coreStatement pp,Ast.statement pp) adornment_pp
+   val ppExternalDeclAdornment: (aidinfo,Ast.coreExternalDecl pp,Ast.externalDecl pp) adornment_pp
+ end
+-end
++(* end *)
+diff --git a/src/ast/pp/pp-ast-ext-sig.sml b/src/ast/pp/pp-ast-ext-sig.sml
+index 4169fc7..c7291ab 100644
+--- a/src/ast/pp/pp-ast-ext-sig.sml
++++ b/src/ast/pp/pp-ast-ext-sig.sml
+@@ -1,13 +1,13 @@
+ (* Copyright (c) 1998 by Lucent Technologies *)
+ 
+-local 
++(* local *)
+   type 'a pp =  Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
+   type ('a, 'aidinfo) ppExt =
+        (('aidinfo -> Ast.expression pp) * ('aidinfo -> Ast.statement pp) *
+ 	('aidinfo -> Ast.binop pp) * ('aidinfo -> Ast.unop pp))
+        -> 'aidinfo
+        -> Tables.tidtab -> OldPrettyPrint.ppstream -> 'a -> unit
+-in
++(* in *)
+ 
+ signature PPASTEXT = sig
+   type aidinfo
+@@ -24,4 +24,4 @@ signature PPASTEXT = sig
+        aidinfo) ppExt
+ end
+ 
+-end
++(* end *)
+diff --git a/src/ast/pp/pp-lib.sml b/src/ast/pp/pp-lib.sml
+index f6386d3..70f8504 100644
+--- a/src/ast/pp/pp-lib.sml
++++ b/src/ast/pp/pp-lib.sml
+@@ -115,7 +115,10 @@ structure PPLib = struct
+ 
+   fun ppId pps ({name,uid,kind,stClass,global,...}: Ast.id) = 
+       case (stClass,global)
+-	of ((Ast.EXTERN,_) | (_, true)) => (* globals *)
++	of (Ast.EXTERN,_) => (* globals *)
++	     if !suppressPidGlobalUnderscores then ppSymbol' pps name
++	     else ppSymbol pps (name,uid)
++	 | (_, true) => (* globals *)
+ 	     if !suppressPidGlobalUnderscores then ppSymbol' pps name
+ 	     else ppSymbol pps (name,uid)
+ 	 | _ => ppSymbol pps (name,uid)
+diff --git a/src/ast/sizeof.sml b/src/ast/sizeof.sml
+index 02705c2..aebd826 100644
+--- a/src/ast/sizeof.sml
++++ b/src/ast/sizeof.sml
+@@ -321,7 +321,9 @@ struct
+   and process (sizesErrWarnBug as {sizes, err, warn, bug}) tidtab ty =
+       case ty
+ 	of Ast.TypeRef tid => processTid sizesErrWarnBug tidtab tid
+-	 | (Ast.StructRef tid | Ast.UnionRef tid) =>
++	 | Ast.StructRef tid =>
++	     processTid sizesErrWarnBug tidtab tid
++	 | Ast.UnionRef tid =>
+ 	     processTid sizesErrWarnBug tidtab tid
+ 	 | Ast.EnumRef _ => 
+ 	     let val {bits,align} = #int sizes
+diff --git a/src/ast/type-util-sig.sml b/src/ast/type-util-sig.sml
+index b03260b..a262146 100644
+--- a/src/ast/type-util-sig.sml
++++ b/src/ast/type-util-sig.sml
+@@ -1,10 +1,10 @@
+ (* Copyright (c) 1998 by Lucent Technologies *)
+ 
+-local 
++(* local *)
+   type 'a type_util      = Tables.tidtab -> Ast.ctype               -> 'a 
+   type 'a type_mem_util  = Tables.tidtab -> Ast.ctype * Ast.member  -> 'a 
+   type 'a type_type_util = Tables.tidtab -> Ast.ctype * Ast.ctype -> 'a 
+-in
++(* in *)
+ 
+ signature TYPE_UTIL =
+ sig
+@@ -145,4 +145,4 @@ sig
+ 
+ end (* signature TYPE_UTIL *)
+ 
+-end (* local *)
++(* end (* local *) *)
+diff --git a/src/ast/type-util.sml b/src/ast/type-util.sml
+index 8dc30d3..851cfe8 100644
+--- a/src/ast/type-util.sml
++++ b/src/ast/type-util.sml
+@@ -282,7 +282,8 @@ struct
+   fun isStructOrUnion tidtab ty =
+     case reduceTypedef tidtab ty
+       of Ast.Qual (_,ty) => isStructOrUnion tidtab ty
+-       | (Ast.StructRef tid | Ast.UnionRef tid) => SOME tid
++       | Ast.StructRef tid => SOME tid
++       | Ast.UnionRef tid => SOME tid
+        | _ => NONE
+ 
+   fun isEnum tidtab (ty,member as {uid,kind=Ast.ENUMmem _,...}: Ast.member) =
+@@ -553,7 +554,9 @@ struct
+ 	    | (Pointer ct1, Pointer ct2) => (case compose (ct1, ct2) of
+ 					       (SOME ct, eml) => (SOME(Pointer ct), eml)
+ 					     | (NONE, eml) => (NONE, eml))
+-	    | ((StructRef tid1, StructRef tid2) | (UnionRef tid1, UnionRef tid2)) =>
++	    | (StructRef tid1, StructRef tid2) =>
++		if Tid.equal (tid1, tid2) then (SOME ty1, nil) else (NONE, nil)
++	    | (UnionRef tid1, UnionRef tid2) =>
+ 		if Tid.equal (tid1, tid2) then (SOME ty1, nil) else (NONE, nil)
+ 	    | _ => (NONE, nil)
+ 	end
+@@ -651,8 +654,10 @@ struct
+   fun conditionalExp tidtab {ty1, exp1Zero, ty2, exp2Zero} = (* for Eq and Neq *)
+     (case (usualUnaryCnv tidtab ty1, exp1Zero, usualUnaryCnv tidtab ty2, exp2Zero) of  
+        (Ast.Numeric _, _, Ast.Numeric _, _) => usualBinaryCnv tidtab (ty1, ty2) (* get common type *)
+-     | ((Ast.StructRef tid1, _, Ast.StructRef tid2, _) |
+-	(Ast.UnionRef tid1, _, Ast.UnionRef tid2, _)) =>
++     | (Ast.StructRef tid1, _, Ast.StructRef tid2, _) =>
++	  if Tid.equal (tid1, tid2) then SOME ty1
++	  else NONE
++     | (Ast.UnionRef tid1, _, Ast.UnionRef tid2, _) =>
+ 	  if Tid.equal (tid1, tid2) then SOME ty1
+ 	  else NONE
+      | (Ast.Void, _, Ast.Void, _) => SOME ty1
+@@ -745,9 +750,12 @@ struct
+ 	     | ([Ast.Void], nil) => (nil, nil) (* bugfix 15/jun/99: a function with a single void argument
+                                                * is a function of no args  *)
+      *)
+-	     | ((_, nil, _) | (_, _, nil)) => ( ["Type Warning: function call has too few args"]
+-					       , nil
+-					       )
++	     | (_, nil, _) => (["Type Warning: function call has too few args"]
++                               , nil
++			       )
++	     | (_, _, nil) => (["Type Warning: function call has too few args"]
++			       , nil
++			       )
+ 	     | (nil, argl, _) => (["Type Warning: function call has too many args"]
+ 				  , List.map (functionArgConv tidtab) argl
+ 				  )
+diff --git a/src/ckit-lib.mlb b/src/ckit-lib.mlb
+new file mode 100644
+index 0000000..70a2919
+--- /dev/null
++++ b/src/ckit-lib.mlb
+@@ -0,0 +1,888 @@
++
++ann
++  "nonexhaustiveMatch warn" "redundantMatch warn"
++  "sequenceNonUnit ignore"
++  "warnUnused false" "forceUsed"
++in
++
++local
++  basis l4 =
++    bas
++      (* $/basis.cm ====> *) $(SML_LIB)/basis/basis.mlb
 +    end
-+    local
-+       variants/type-check-control-sig.sml
-+    in
-+       signature gs_1 = TYPECHECKCONTROL
++  basis l24 =
++    bas
++      (* $/smlnj-lib.cm ====> *) $(SML_LIB)/smlnj-lib/Util/smlnj-lib.mlb
 +    end
-+    local
-+       variants/parse-control-sig.sml
-+    in
-+       signature gs_2 = PARSECONTROL
++  basis l71 =
++    bas
++      (* $/pp-lib.cm ====> *) $(SML_LIB)/smlnj-lib/PP/pp-lib.mlb
 +    end
-+    local
-+       signature PARSECONTROL = gs_2
-+       signature TYPECHECKCONTROL = gs_1
-+       variants/config-sig.sml
-+    in
-+       signature gs_3 = CONFIG
++  basis l96 =
++    bas
++      (* $/ml-yacc-lib.cm ====> *) $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
 +    end
-+    local
-+       signature CONFIG = gs_3
-+       signature PARSECONTROL = gs_2
-+       signature TYPECHECKCONTROL = gs_1
-+       structure TextIO = gs_0
-+       variants/ansic/config.sml
-+    in
-+       structure gs_4 = Config
-+    end
-+    local
-+       open l24
-+    in
-+       functor gs_5 = HashTableFn
-+    end
-+    local
-+       ast/uidtabimp-sig.sml
-+    in
-+       signature gs_6 = UIDTABIMP
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_7 = Word
-+    end
-+    local
-+       structure Word = gs_7
-+       ast/uid-sig.sml
-+    in
-+       signature gs_8 = UID
-+    end
-+    local
-+       functor HashTableFn = gs_5
-+       signature UID = gs_8
-+       signature UIDTABIMP = gs_6
-+       ast/uidtabimp-fn.sml
-+    in
-+       functor gs_9 = UidtabImpFn
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_10 = Int
-+    end
-+    local
-+       structure Int = gs_10
-+       signature UID = gs_8
-+       structure Word = gs_7
-+       ast/uid-fn.sml
-+    in
-+       functor gs_11 = UidFn
-+    end
-+    local
-+       signature UID = gs_8
-+       functor UidFn = gs_11
-+       ast/aid.sml
-+    in
-+       structure gs_12 = Aid
-+    end
-+    local
-+       structure Aid = gs_12
-+       functor UidtabImpFn = gs_9
-+       ast/aidtab.sml
-+    in
-+       structure gs_13 = Aidtab
-+    end
-+    local
-+       open l24
-+    in
-+       structure gs_14 = Format
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_15 = String
-+    end
-+    local
-+       parser/util/sourcemap-sig.sml
-+    in
-+       signature gs_16 = SOURCE_MAP
-+    end
-+    local
-+       structure Config = gs_4
-+       structure Format = gs_14
-+       structure Int = gs_10
-+       signature SOURCE_MAP = gs_16
-+       structure String = gs_15
-+       parser/util/sourcemap.sml
-+    in
-+       structure gs_17 = SourceMap
-+    end
-+    local
-+       open l71
-+    in
-+       functor gs_18 = PPStreamFn
-+    end
-+    local
-+       open l71
-+    in
-+       structure gs_19 = StringToken
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_20 = StringCvt
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_21 = List
-+    end
-+    local
-+       structure List = gs_21
-+       functor PPStreamFn = gs_18
-+       structure String = gs_15
-+       structure StringCvt = gs_20
-+       structure StringToken = gs_19
-+       parser/util/old-pp.sml
-+    in
-+       signature gs_22 = OLD_PRETTYPRINT
-+       structure gs_23 = OldPrettyPrint
-+    end
-+    local
-+       structure Format = gs_14
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure SourceMap = gs_17
-+       structure TextIO = gs_0
-+       parser/util/error-sig.sml
-+    in
-+       signature gs_24 = ERROR
-+    end
-+    local
-+       signature ERROR = gs_24
-+       structure Format = gs_14
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure SourceMap = gs_17
-+       structure TextIO = gs_0
-+       parser/util/error.sml
-+    in
-+       structure gs_25 = Error
-+    end
-+    local
-+       open l96
-+    in
-+       functor gs_26 = Join
-+       functor gs_27 = JoinWithArg
-+    end
-+    local
-+       open l96
-+    in
-+       structure gs_28 = LrParser
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_29 = LargeInt
-+    end
-+    local
-+       parser/extensions/c/parse-tree-ext.sml
-+    in
-+       structure gs_30 = ParseTreeExt
-+    end
-+    local
-+       structure LargeInt = gs_29
-+       structure ParseTreeExt = gs_30
-+       structure SourceMap = gs_17
-+       parser/parse-tree-sig.sml
-+    in
-+       signature gs_31 = PARSETREE
-+    end
-+    local
-+       structure LargeInt = gs_29
-+       signature PARSETREE = gs_31
-+       structure ParseTreeExt = gs_30
-+       structure SourceMap = gs_17
-+       parser/parse-tree.sml
-+    in
-+       structure gs_32 = ParseTree
-+    end
-+    local
-+       structure Error = gs_25
-+       structure ParseTree = gs_32
-+       parser/parser-sig.sml
-+    in
-+       signature gs_33 = PARSER
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_34 = IO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_35 = TextPrimIO
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_36 = IntInf
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_37 = CharVector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_38 = Vector
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_39 = Real
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_40 = Char
-+    end
-+    local
-+       open l24
-+    in
-+       structure gs_41 = AtomTable
-+    end
-+    local
-+       open l24
-+    in
-+       structure gs_42 = Atom
-+    end
-+    local
-+       structure Atom = gs_42
-+       structure AtomTable = gs_41
-+       structure Config = gs_4
-+       parser/grammar/tdefs.sml
-+    in
-+       signature gs_43 = TYPEDEFS
-+       structure gs_44 = TypeDefs
-+    end
-+    local
-+       open l96
-+    in
-+       signature gs_45 = ARG_LEXER
-+       signature gs_46 = ARG_PARSER
-+       signature gs_47 = LEXER
-+       signature gs_48 = LR_PARSER
-+       signature gs_49 = LR_TABLE
-+       signature gs_50 = PARSER
-+       signature gs_51 = PARSER_DATA
-+       signature gs_52 = STREAM
-+       signature gs_53 = TOKEN
-+    end
-+    local
-+       signature ARG_LEXER = gs_45
-+       signature ARG_PARSER = gs_46
-+       signature LEXER = gs_47
-+       signature LR_PARSER = gs_48
-+       signature LR_TABLE = gs_49
-+       structure LargeInt = gs_29
-+       signature PARSER = gs_50
-+       signature PARSER_DATA = gs_51
-+       signature STREAM = gs_52
-+       signature TOKEN = gs_53
-+       parser/grammar/c.grm.sig
-+    in
-+       signature gs_54 = C_LRVALS
-+       signature gs_55 = C_TOKENS
-+    end
-+    local
-+       structure Atom = gs_42
-+       structure AtomTable = gs_41
-+       signature C_LRVALS = gs_54
-+       signature C_TOKENS = gs_55
-+       structure Config = gs_4
-+       signature TYPEDEFS = gs_43
-+       structure TypeDefs = gs_44
-+       parser/grammar/tokentable.sml
-+    in
-+       signature gs_56 = TOKENTABLE
-+       functor gs_57 = TokenTable
-+    end
-+    local
-+       signature C_LRVALS = gs_54
-+       signature C_TOKENS = gs_55
-+       structure Char = gs_40
-+       structure CharVector = gs_37
-+       structure IO = gs_34
-+       structure Int = gs_10
-+       structure IntInf = gs_36
-+       structure LargeInt = gs_29
-+       structure Real = gs_39
-+       structure SourceMap = gs_17
-+       structure String = gs_15
-+       structure StringCvt = gs_20
-+       signature TOKENTABLE = gs_56
-+       structure TextIO = gs_0
-+       structure TextPrimIO = gs_35
-+       functor TokenTable = gs_57
-+       structure Vector = gs_38
-+       parser/grammar/c.lex.sml
-+    in
-+       functor gs_58 = CLexFun
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_59 = Array
-+    end
-+    local
-+       signature ARG_LEXER = gs_45
-+       signature ARG_PARSER = gs_46
-+       structure Array = gs_59
-+       signature C_LRVALS = gs_54
-+       signature C_TOKENS = gs_55
-+       structure Char = gs_40
-+       structure Error = gs_25
-+       signature LEXER = gs_47
-+       signature LR_PARSER = gs_48
-+       signature LR_TABLE = gs_49
-+       structure LargeInt = gs_29
-+       structure List = gs_21
-+       signature PARSER = gs_50
-+       signature PARSER_DATA = gs_51
-+       structure ParseTree = gs_32
-+       signature STREAM = gs_52
-+       structure SourceMap = gs_17
-+       structure String = gs_15
-+       signature TOKEN = gs_53
-+       signature TYPEDEFS = gs_43
-+       structure TypeDefs = gs_44
-+       parser/grammar/c.grm.sml
-+    in
-+       functor gs_60 = LrValsFun
-+    end
-+    local
-+       functor CLexFun = gs_58
-+       structure Error = gs_25
-+       functor Join = gs_26
-+       functor JoinWithArg = gs_27
-+       structure LrParser = gs_28
-+       functor LrValsFun = gs_60
-+       signature PARSER = gs_33
-+       structure SourceMap = gs_17
-+       signature TOKENTABLE = gs_56
-+       signature TYPEDEFS = gs_43
-+       structure TextIO = gs_0
-+       functor TokenTable = gs_57
-+       structure TypeDefs = gs_44
-+       parser/parser.sml
-+    in
-+       structure gs_61 = Parser
-+    end
-+    local
-+       open l24
-+    in
-+       structure gs_62 = HashString
-+    end
-+    local
-+       signature UID = gs_8
-+       functor UidFn = gs_11
-+       ast/tid.sml
-+    in
-+       structure gs_63 = Tid
-+    end
-+    local
-+       structure Tid = gs_63
-+       ast/symbol-sig.sml
-+    in
-+       signature gs_64 = SYMBOL
-+    end
-+    local
-+       structure HashString = gs_62
-+       structure Int = gs_10
-+       signature SYMBOL = gs_64
-+       structure String = gs_15
-+       structure Tid = gs_63
-+       structure Word = gs_7
-+       ast/symbol.sml
-+    in
-+       structure gs_65 = Symbol
-+    end
-+    local
-+       signature UID = gs_8
-+       functor UidFn = gs_11
-+       ast/pid.sml
-+    in
-+       structure gs_66 = Pid
-+    end
-+    local
-+       ast/extensions/c/ast-ext.sml
-+    in
-+       structure gs_67 = AstExt
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure AstExt = gs_67
-+       structure LargeInt = gs_29
-+       structure Pid = gs_66
-+       structure SourceMap = gs_17
-+       structure Symbol = gs_65
-+       structure Tid = gs_63
-+       ast/ast-sig.sml
-+    in
-+       signature gs_68 = AST
-+    end
-+    local
-+       signature AST = gs_68
-+       structure Aid = gs_12
-+       structure AstExt = gs_67
-+       structure LargeInt = gs_29
-+       structure Pid = gs_66
-+       structure SourceMap = gs_17
-+       structure Symbol = gs_65
-+       structure Tid = gs_63
-+       ast/ast.sml
-+    in
-+       structure gs_69 = Ast
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure LargeInt = gs_29
-+       structure Pid = gs_66
-+       structure SourceMap = gs_17
-+       structure Symbol = gs_65
-+       structure Tid = gs_63
-+       ast/bindings.sml
-+    in
-+       structure gs_70 = Bindings
-+    end
-+    local
-+       open l24
-+    in
-+       functor gs_71 = BinaryMapFn
-+    end
-+    local
-+       open l24
-+    in
-+       signature gs_72 = ORD_MAP
-+    end
-+    local
-+       structure Tid = gs_63
-+       functor UidtabImpFn = gs_9
-+       ast/tidtab.sml
-+    in
-+       structure gs_73 = Tidtab
-+    end
-+    local
-+       structure Aidtab = gs_13
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Tidtab = gs_73
-+       ast/tables.sml
-+    in
-+       structure gs_74 = Tables
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Error = gs_25
-+       structure LargeInt = gs_29
-+       signature ORD_MAP = gs_72
-+       structure SourceMap = gs_17
-+       structure Symbol = gs_65
-+       structure Tables = gs_74
-+       structure Tid = gs_63
-+       ast/state-sig.sml
-+    in
-+       signature gs_75 = STATE
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure Aidtab = gs_13
-+       structure Ast = gs_69
-+       functor BinaryMapFn = gs_71
-+       structure Bindings = gs_70
-+       structure Error = gs_25
-+       structure LargeInt = gs_29
-+       structure List = gs_21
-+       structure Pid = gs_66
-+       signature STATE = gs_75
-+       structure SourceMap = gs_17
-+       structure Symbol = gs_65
-+       structure Tables = gs_74
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       ast/state.sml
-+    in
-+       structure gs_76 = State
-+    end
-+    local
-+       ast/sizes-sig.sml
-+    in
-+       signature gs_77 = SIZES
-+    end
-+    local
-+       signature SIZES = gs_77
-+       ast/sizes.sml
-+    in
-+       structure gs_78 = Sizes
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Sizes = gs_78
-+       structure State = gs_76
-+       structure Tables = gs_74
-+       structure TextIO = gs_0
-+       structure Tidtab = gs_73
-+       ast/parse-to-ast-sig.sml
-+    in
-+       signature gs_79 = PARSE_TO_AST
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_80 = ListPair
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_81 = Option
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Error = gs_25
-+       structure ParseTree = gs_32
-+       structure Sizes = gs_78
-+       structure State = gs_76
-+       structure Tables = gs_74
-+       structure Tidtab = gs_73
-+       ast/build-ast-sig.sml
-+    in
-+       signature gs_82 = BUILD_AST
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure ParseTree = gs_32
-+       structure ParseTreeExt = gs_30
-+       structure State = gs_76
-+       ast/cnv-ext-sig.sml
-+    in
-+       signature gs_83 = CNVEXT
-+    end
-+    local
-+       structure Ast = gs_69
-+       signature CNVEXT = gs_83
-+       structure ParseTree = gs_32
-+       structure ParseTreeExt = gs_30
-+       structure State = gs_76
-+       ast/extensions/c/cnv-ext.sml
-+    in
-+       structure gs_84 = CnvExt
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Pid = gs_66
-+       structure Symbol = gs_65
-+       ast/simplify-assign-ops.sml
-+    in
-+       structure gs_85 = SimplifyAssignOps
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure Tables = gs_74
-+       structure Tid = gs_63
-+       ast/pp/pp-ast-sig.sml
-+    in
-+       signature gs_86 = PP_AST
-+    end
-+    local
-+       open l4
-+    in
-+       structure gs_87 = Int32
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Int = gs_10
-+       structure Int32 = gs_87
-+       structure LargeInt = gs_29
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure Pid = gs_66
-+       structure Real = gs_39
-+       structure String = gs_15
-+       structure Symbol = gs_65
-+       structure Tables = gs_74
-+       structure TextIO = gs_0
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       ast/pp/pp-lib.sml
-+    in
-+       structure gs_88 = PPLib
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure AstExt = gs_67
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure Tables = gs_74
-+       ast/pp/pp-ast-ext-sig.sml
-+    in
-+       signature gs_89 = PPASTEXT
-+    end
-+    local
-+       signature PPASTEXT = gs_89
-+       ast/extensions/c/pp-ast-ext-fn.sml
-+    in
-+       functor gs_90 = PPAstExtFn
-+    end
-+    local
-+       structure Ast = gs_69
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure Tables = gs_74
-+       ast/pp/pp-ast-adornment-sig.sml
-+    in
-+       signature gs_91 = PPASTADORNMENT
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Int = gs_10
-+       structure LargeInt = gs_29
-+       structure List = gs_21
-+       signature OLD_PRETTYPRINT = gs_22
-+       structure OldPrettyPrint = gs_23
-+       structure Option = gs_81
-+       signature PPASTADORNMENT = gs_91
-+       functor PPAstExtFn = gs_90
-+       structure PPLib = gs_88
-+       signature PP_AST = gs_86
-+       structure Pid = gs_66
-+       structure SourceMap = gs_17
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       ast/pp/pp-ast-fn.sml
-+    in
-+       functor gs_92 = PPAstFn
-+    end
-+    local
-+       structure Ast = gs_69
-+       signature PPASTADORNMENT = gs_91
-+       functor PPAstFn = gs_92
-+       ast/pp/pp-ast.sml
-+    in
-+       structure gs_93 = PPAst
-+    end
-+    local
-+       structure Ast = gs_69
-+       ast/ctype-eq.sml
-+    in
-+       structure gs_94 = CTypeEq
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Sizes = gs_78
-+       structure Tables = gs_74
-+       ast/sizeof-sig.sml
-+    in
-+       signature gs_95 = SIZEOF
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure LargeInt = gs_29
-+       structure Tables = gs_74
-+       ast/type-util-sig.sml
-+    in
-+       signature gs_96 = TYPE_UTIL
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Config = gs_4
-+       structure Int = gs_10
-+       structure List = gs_21
-+       structure PPAst = gs_93
-+       structure PPLib = gs_88
-+       structure Pid = gs_66
-+       structure Symbol = gs_65
-+       signature TYPE_UTIL = gs_96
-+       structure Tables = gs_74
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       ast/type-util.sml
-+    in
-+       structure gs_97 = TypeUtil
-+    end
-+    local
-+       structure Ast = gs_69
-+       functor BinaryMapFn = gs_71
-+       structure Bindings = gs_70
-+       structure Config = gs_4
-+       structure Int = gs_10
-+       structure LargeInt = gs_29
-+       structure List = gs_21
-+       structure Pid = gs_66
-+       signature SIZEOF = gs_95
-+       structure Sizes = gs_78
-+       structure Tables = gs_74
-+       structure TextIO = gs_0
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       structure TypeUtil = gs_97
-+       ast/sizeof.sml
-+    in
-+       structure gs_98 = Sizeof
-+    end
-+    local
-+       structure ParseTree = gs_32
-+       structure Real = gs_39
-+       structure Tid = gs_63
-+       ast/anonymous-structs.sml
-+    in
-+       structure gs_99 = AnonymousStructs
-+       structure gs_100 = TyEq
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure Tid = gs_63
-+       ast/initializer-normalizer-sig.sml
-+    in
-+       signature gs_101 = INITIALIZER_NORMALIZER
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       signature INITIALIZER_NORMALIZER = gs_101
-+       structure LargeInt = gs_29
-+       structure SourceMap = gs_17
-+       structure String = gs_15
-+       structure Tid = gs_63
-+       ast/initializer-normalizer.sml
-+    in
-+       structure gs_102 = InitializerNormalizer
-+    end
-+    local
-+       structure Aid = gs_12
-+       structure Aidtab = gs_13
-+       structure AnonymousStructs = gs_99
-+       structure Ast = gs_69
-+       signature BUILD_AST = gs_82
-+       functor BinaryMapFn = gs_71
-+       structure Bindings = gs_70
-+       structure CTypeEq = gs_94
-+       structure CnvExt = gs_84
-+       structure Config = gs_4
-+       structure Error = gs_25
-+       structure InitializerNormalizer = gs_102
-+       structure Int = gs_10
-+       structure LargeInt = gs_29
-+       structure List = gs_21
-+       structure ListPair = gs_80
-+       structure Option = gs_81
-+       structure PPAst = gs_93
-+       structure PPLib = gs_88
-+       structure ParseTree = gs_32
-+       structure ParseTreeExt = gs_30
-+       structure Pid = gs_66
-+       structure SimplifyAssignOps = gs_85
-+       structure Sizeof = gs_98
-+       structure Sizes = gs_78
-+       structure SourceMap = gs_17
-+       structure State = gs_76
-+       structure String = gs_15
-+       structure Symbol = gs_65
-+       structure Tables = gs_74
-+       structure TextIO = gs_0
-+       structure Tid = gs_63
-+       structure Tidtab = gs_73
-+       structure TyEq = gs_100
-+       structure TypeUtil = gs_97
-+       structure Word = gs_7
-+       ast/build-ast.sml
-+    in
-+       structure gs_103 = BuildAst
-+    end
-+    local
-+       structure Ast = gs_69
-+       structure Bindings = gs_70
-+       structure BuildAst = gs_103
-+       structure Error = gs_25
-+       signature PARSE_TO_AST = gs_79
-+       structure PPAst = gs_93
-+       structure PPLib = gs_88
-+       structure Parser = gs_61
-+       structure Sizes = gs_78
-+       structure State = gs_76
-+       structure Tables = gs_74
-+       structure TextIO = gs_0
-+       structure Tidtab = gs_73
-+       ast/parse-to-ast.sml
-+    in
-+       structure gs_104 = ParseToAst
-+    end
-+ in
-+    signature AST = gs_68
-+    structure Aidtab = gs_13
-+    structure Ast = gs_69
-+    structure Bindings = gs_70
-+    signature CONFIG = gs_3
-+    structure Config = gs_4
-+    signature PARSECONTROL = gs_2
-+    signature PARSER = gs_33
-+    signature PARSETREE = gs_31
-+    signature PARSE_TO_AST = gs_79
-+    structure PPAst = gs_93
-+    signature PP_AST = gs_86
-+    structure ParseToAst = gs_104
-+    structure ParseTree = gs_32
-+    structure Parser = gs_61
-+    structure Pid = gs_66
-+    signature SOURCE_MAP = gs_16
-+    structure Sizeof = gs_98
-+    structure Sizes = gs_78
-+    structure SourceMap = gs_17
-+    structure State = gs_76
-+    structure Symbol = gs_65
-+    signature TYPECHECKCONTROL = gs_1
-+    structure Tables = gs_74
-+    structure Tid = gs_63
-+    structure Tidtab = gs_73
-+    structure TypeUtil = gs_97
-+    signature UID = gs_8
-+    signature UIDTABIMP = gs_6
-+ end
-+ end
-+ 
-+ end
-diff -N -C 2 -r ckit/src/parser/grammar/c.lex.sml ckit-mlton/src/parser/grammar/c.lex.sml
-*** ckit/src/parser/grammar/c.lex.sml	2010-02-03 11:40:52.000000000 -0500
---- ckit-mlton/src/parser/grammar/c.lex.sml	2009-03-27 18:29:56.000000000 -0400
-***************
-*** 230,234 ****
-  
-      val yytable = 
-! #[
-  ]
-  
---- 230,234 ----
-  
-      val yytable = 
-! Vector.fromList [
-  ]
-  
-diff -N -C 2 -r ckit/src/parser/parse-tree-sig.sml ckit-mlton/src/parser/parse-tree-sig.sml
-*** ckit/src/parser/parse-tree-sig.sml	2010-02-03 11:40:53.000000000 -0500
---- ckit-mlton/src/parser/parse-tree-sig.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 28,33 ****
-      | LshiftAssign | RshiftAssign 
-      | Uplus 
-!     | SizeofType of ctype
-!     | OperatorExt of operatorExt
-  
-    and expression
---- 28,35 ----
-      | LshiftAssign | RshiftAssign 
-      | Uplus 
-!     | SizeofType of 
-!         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-!     | OperatorExt of 
-!         ParseTreeExt.operatorExt
-  
-    and expression
-***************
-*** 41,48 ****
-      | QuestionColon of expression * expression * expression
-      | Call of expression * expression list
-!     | Cast of ctype * expression
-      | InitList of expression list
-      | MARKexpression of (SourceMap.location * expression)
-!     | ExprExt of expressionExt
-  
-    and specifier
---- 43,57 ----
-      | QuestionColon of expression * expression * expression
-      | Call of expression * expression list
-!     | Cast of 
-!         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
-! 	expression
-      | InitList of expression list
-      | MARKexpression of (SourceMap.location * expression)
-!     | ExprExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.expressionExt
-  
-    and specifier
-***************
-*** 61,69 ****
-      | Saturate
-      | Nonsaturate
-!     | Array of expression * ctype
-!     | Pointer of ctype
-      | Function of
-!         {retType : ctype,  
-! 	 params : (decltype * declarator) list}
-      | Enum of
-          {tagOpt : string option,
---- 70,82 ----
-      | Saturate
-      | Nonsaturate
-!     | Array of 
-!         expression *
-! 	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-!     | Pointer of 
-! 	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-      | Function of
-!         {retType : (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},  
-! 	 params : ((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-! 		   declarator) list}
-      | Enum of
-          {tagOpt : string option,
-***************
-*** 73,77 ****
-          {isStruct : bool,   (* struct or union; true => struct *)
-  	 tagOpt : string option,  (* optional tag *)
-! 	 members: (ctype * (declarator * expression) list) list} (* member specs *)
-      | TypedefName of string
-      | StructTag of
---- 86,91 ----
-          {isStruct : bool,   (* struct or union; true => struct *)
-  	 tagOpt : string option,  (* optional tag *)
-! 	 members: ((* ctype *) {qualifiers : qualifier list, specifiers : specifier list} * 
-! 		   (declarator * expression) list) list} (* member specs *)
-      | TypedefName of string
-      | StructTag of
-***************
-*** 79,83 ****
-  	 name : string}
-      | EnumTag of string 
-!     | SpecExt of specifierExt
-  
-    and declarator  (* constructor suffix: "Decr" *)
---- 93,102 ----
-  	 name : string}
-      | EnumTag of string 
-!     | SpecExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-!         ParseTreeExt.specifierExt
-  
-    and declarator  (* constructor suffix: "Decr" *)
-***************
-*** 88,94 ****
-      | PointerDecr of declarator
-      | QualDecr of qualifier * declarator
-!     | FuncDecr of declarator * (decltype * declarator) list
-      | MARKdeclarator of (SourceMap.location * declarator)
-!     | DecrExt of declaratorExt
-  
-    (* supports extensions of C in which expressions contain statements *)
---- 107,121 ----
-      | PointerDecr of declarator
-      | QualDecr of qualifier * declarator
-!     | FuncDecr of 
-!         declarator * 
-! 	((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-! 	 declarator) list
-      | MARKdeclarator of (SourceMap.location * declarator)
-!     | DecrExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.declaratorExt
-  
-    (* supports extensions of C in which expressions contain statements *)
-***************
-*** 111,120 ****
-      | Switch of expression * statement
-      | MARKstatement of (SourceMap.location * statement)
-!     | StatExt of statementExt
-  
-    and declaration
-!     = Declaration of decltype * (declarator * expression) list
-      | MARKdeclaration of (SourceMap.location * declaration)
-!     | DeclarationExt of declarationExt
-  
-    (* the top-level constructs in a translation unit (i.e. source file) *)
---- 138,159 ----
-      | Switch of expression * statement
-      | MARKstatement of (SourceMap.location * statement)
-!     | StatExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.statementExt
-  
-    and declaration
-!     = Declaration of 
-!         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-!         (declarator * expression) list
-      | MARKdeclaration of (SourceMap.location * declaration)
-!     | DeclarationExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.declarationExt
-  
-    (* the top-level constructs in a translation unit (i.e. source file) *)
-***************
-*** 122,133 ****
-      = ExternalDecl of declaration
-      | FunctionDef of
-!        {retType : decltype,      (* return type *)
-! 	funDecr : declarator,   (* function name declarator *)
-!         krParams : declaration list, (* K&R-style parameter declarations *)
-!         body : statement}        (* function body *)
-      | MARKexternalDecl of (SourceMap.location * externalDecl)
-!     | ExternalDeclExt of externalDeclExt
-  
-!   withtype ctype =
-        {qualifiers : qualifier list,
-         specifiers : specifier list}
---- 161,177 ----
-      = ExternalDecl of declaration
-      | FunctionDef of
-!         {retType : (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, (* return type *)
-! 	 funDecr : declarator, (* function name declarator *)
-! 	 krParams : declaration list, (* K&R-style parameter declarations *)
-! 	 body : statement (* function body *)}
-      | MARKexternalDecl of (SourceMap.location * externalDecl)
-!     | ExternalDeclExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.externalDeclExt
-  
-!   type ctype =
-        {qualifiers : qualifier list,
-         specifiers : specifier list}
-***************
-*** 138,142 ****
-  
-    (* extension types for basic constructs *)
-!   and externalDeclExt = 
-        (specifier, declarator, ctype, decltype, operator, expression, statement)
-        ParseTreeExt.externalDeclExt
---- 182,186 ----
-  
-    (* extension types for basic constructs *)
-!   type externalDeclExt = 
-        (specifier, declarator, ctype, decltype, operator, expression, statement)
-        ParseTreeExt.externalDeclExt
-diff -N -C 2 -r ckit/src/parser/parse-tree.sml ckit-mlton/src/parser/parse-tree.sml
-*** ckit/src/parser/parse-tree.sml	2010-02-03 11:40:53.000000000 -0500
---- ckit-mlton/src/parser/parse-tree.sml	2009-03-27 18:28:04.000000000 -0400
-***************
-*** 24,29 ****
-      | LshiftAssign | RshiftAssign 
-      | Uplus 
-!     | SizeofType of ctype
-!     | OperatorExt of operatorExt
-  
-    and expression
---- 24,31 ----
-      | LshiftAssign | RshiftAssign 
-      | Uplus 
-!     | SizeofType of 
-!         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-!     | OperatorExt of 
-!         ParseTreeExt.operatorExt
-  
-    and expression
-***************
-*** 37,44 ****
-      | QuestionColon of expression * expression * expression
-      | Call of expression * expression list
-!     | Cast of ctype * expression
-      | InitList of expression list
-      | MARKexpression of (SourceMap.location * expression)
-!     | ExprExt of expressionExt
-  
-    and specifier
---- 39,53 ----
-      | QuestionColon of expression * expression * expression
-      | Call of expression * expression list
-!     | Cast of 
-!         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
-! 	expression
-      | InitList of expression list
-      | MARKexpression of (SourceMap.location * expression)
-!     | ExprExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.expressionExt
-  
-    and specifier
-***************
-*** 57,65 ****
-      | Saturate
-      | Nonsaturate
-!     | Array of expression * ctype
-!     | Pointer of ctype
-      | Function of
-!         {retType : ctype, 
-! 	 params : (decltype * declarator) list}
-      | Enum of
-          {tagOpt : string option,
---- 66,78 ----
-      | Saturate
-      | Nonsaturate
-!     | Array of 
-!         expression *
-! 	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-!     | Pointer of 
-! 	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
-      | Function of
-!         {retType : (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},  
-! 	 params : ((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-! 		   declarator) list}
-      | Enum of
-          {tagOpt : string option,
-***************
-*** 69,73 ****
-          {isStruct : bool,   (* struct or union; true => struct *)
-  	 tagOpt : string option,  (* optional tag *)
-! 	 members: (ctype * (declarator * expression) list) list} (* member specs *)
-      | TypedefName of string
-      | StructTag of
---- 82,87 ----
-          {isStruct : bool,   (* struct or union; true => struct *)
-  	 tagOpt : string option,  (* optional tag *)
-! 	 members: ((* ctype *) {qualifiers : qualifier list, specifiers : specifier list} * 
-! 		   (declarator * expression) list) list} (* member specs *)
-      | TypedefName of string
-      | StructTag of
-***************
-*** 75,79 ****
-  	 name : string}
-      | EnumTag of string 
-!     | SpecExt of specifierExt
-  
-    and declarator  (* constructor suffix: "Decr" *)
---- 89,98 ----
-  	 name : string}
-      | EnumTag of string 
-!     | SpecExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-!         ParseTreeExt.specifierExt
-  
-    and declarator  (* constructor suffix: "Decr" *)
-***************
-*** 84,90 ****
-      | PointerDecr of declarator
-      | QualDecr of qualifier * declarator
-!     | FuncDecr of declarator * (decltype * declarator) list
-      | MARKdeclarator of (SourceMap.location * declarator)
-!     | DecrExt of declaratorExt
-  
-    (* supports extensions of C in which expressions contain statements *)
---- 103,117 ----
-      | PointerDecr of declarator
-      | QualDecr of qualifier * declarator
-!     | FuncDecr of 
-!         declarator * 
-! 	((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-! 	 declarator) list
-      | MARKdeclarator of (SourceMap.location * declarator)
-!     | DecrExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.declaratorExt
-  
-    (* supports extensions of C in which expressions contain statements *)
-***************
-*** 107,128 ****
-      | Switch of expression * statement
-      | MARKstatement of (SourceMap.location * statement)
-!     | StatExt of statementExt
-  
-    and declaration
-!     = Declaration of decltype * (declarator * expression) list
-      | MARKdeclaration of (SourceMap.location * declaration)
-!     | DeclarationExt of declarationExt
-  
-    and externalDecl
-      = ExternalDecl of declaration
-      | FunctionDef of (* record? *)
-!        {retType : decltype,      (* return type *)
-! 	funDecr : declarator,   (* function name declarator *)
-!         krParams : declaration list, (* K&R-style parameter declarations *)
-!         body : statement}        (* function body *)
-      | MARKexternalDecl of (SourceMap.location * externalDecl)
-!     | ExternalDeclExt of externalDeclExt
-  
-!   withtype ctype =
-             {qualifiers : qualifier list,
-  	    specifiers : specifier list}
---- 134,172 ----
-      | Switch of expression * statement
-      | MARKstatement of (SourceMap.location * statement)
-!     | StatExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.statementExt
-  
-    and declaration
-!     = Declaration of 
-!         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} * 
-!         (declarator * expression) list
-      | MARKdeclaration of (SourceMap.location * declaration)
-!     | DeclarationExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.declarationExt
-  
-    and externalDecl
-      = ExternalDecl of declaration
-      | FunctionDef of (* record? *)
-!         {retType : (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, (* return type *)
-! 	 funDecr : declarator, (* function name declarator *)
-! 	 krParams : declaration list, (* K&R-style parameter declarations *)
-! 	 body : statement (* function body *)}
-      | MARKexternalDecl of (SourceMap.location * externalDecl)
-!     | ExternalDeclExt of 
-!         (specifier, declarator, 
-! 	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
-! 	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list}, 
-! 	 operator, expression, statement)
-! 	ParseTreeExt.externalDeclExt
-  
-!   type ctype =
-             {qualifiers : qualifier list,
-  	    specifiers : specifier list}
-***************
-*** 132,136 ****
-         storage : storage list}      
-  
-!   and externalDeclExt = 
-        (specifier, declarator, ctype, decltype, operator, expression, statement)
-        ParseTreeExt.externalDeclExt
---- 176,180 ----
-         storage : storage list}      
-  
-!   type externalDeclExt = 
-        (specifier, declarator, ctype, decltype, operator, expression, statement)
-        ParseTreeExt.externalDeclExt
++in
++local
++   $(SML_LIB)/basis/pervasive.mlb
++   local
++      open l4
++   in
++      structure gs_0 = TextIO
++   end
++   local
++      variants/type-check-control-sig.sml
++   in
++      signature gs_1 = TYPECHECKCONTROL
++   end
++   local
++      variants/parse-control-sig.sml
++   in
++      signature gs_2 = PARSECONTROL
++   end
++   local
++      signature PARSECONTROL = gs_2
++      signature TYPECHECKCONTROL = gs_1
++      variants/config-sig.sml
++   in
++      signature gs_3 = CONFIG
++   end
++   local
++      signature CONFIG = gs_3
++      signature PARSECONTROL = gs_2
++      signature TYPECHECKCONTROL = gs_1
++      structure TextIO = gs_0
++      variants/ansic/config.sml
++   in
++      structure gs_4 = Config
++   end
++   local
++      open l24
++   in
++      functor gs_5 = HashTableFn
++   end
++   local
++      ast/uidtabimp-sig.sml
++   in
++      signature gs_6 = UIDTABIMP
++   end
++   local
++      open l4
++   in
++      structure gs_7 = Word
++   end
++   local
++      structure Word = gs_7
++      ast/uid-sig.sml
++   in
++      signature gs_8 = UID
++   end
++   local
++      functor HashTableFn = gs_5
++      signature UID = gs_8
++      signature UIDTABIMP = gs_6
++      ast/uidtabimp-fn.sml
++   in
++      functor gs_9 = UidtabImpFn
++   end
++   local
++      open l4
++   in
++      structure gs_10 = Int
++   end
++   local
++      structure Int = gs_10
++      signature UID = gs_8
++      structure Word = gs_7
++      ast/uid-fn.sml
++   in
++      functor gs_11 = UidFn
++   end
++   local
++      signature UID = gs_8
++      functor UidFn = gs_11
++      ast/aid.sml
++   in
++      structure gs_12 = Aid
++   end
++   local
++      structure Aid = gs_12
++      functor UidtabImpFn = gs_9
++      ast/aidtab.sml
++   in
++      structure gs_13 = Aidtab
++   end
++   local
++      open l24
++   in
++      structure gs_14 = Format
++   end
++   local
++      open l4
++   in
++      structure gs_15 = String
++   end
++   local
++      parser/util/sourcemap-sig.sml
++   in
++      signature gs_16 = SOURCE_MAP
++   end
++   local
++      structure Config = gs_4
++      structure Format = gs_14
++      structure Int = gs_10
++      signature SOURCE_MAP = gs_16
++      structure String = gs_15
++      parser/util/sourcemap.sml
++   in
++      structure gs_17 = SourceMap
++   end
++   local
++      open l71
++   in
++      functor gs_18 = PPStreamFn
++   end
++   local
++      open l71
++   in
++      structure gs_19 = StringToken
++   end
++   local
++      open l4
++   in
++      structure gs_20 = StringCvt
++   end
++   local
++      open l4
++   in
++      structure gs_21 = List
++   end
++   local
++      structure List = gs_21
++      functor PPStreamFn = gs_18
++      structure String = gs_15
++      structure StringCvt = gs_20
++      structure StringToken = gs_19
++      parser/util/old-pp.sml
++   in
++      signature gs_22 = OLD_PRETTYPRINT
++      structure gs_23 = OldPrettyPrint
++   end
++   local
++      structure Format = gs_14
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure SourceMap = gs_17
++      structure TextIO = gs_0
++      parser/util/error-sig.sml
++   in
++      signature gs_24 = ERROR
++   end
++   local
++      signature ERROR = gs_24
++      structure Format = gs_14
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure SourceMap = gs_17
++      structure TextIO = gs_0
++      parser/util/error.sml
++   in
++      structure gs_25 = Error
++   end
++   local
++      open l96
++   in
++      functor gs_26 = Join
++      functor gs_27 = JoinWithArg
++   end
++   local
++      open l96
++   in
++      structure gs_28 = LrParser
++   end
++   local
++      open l4
++   in
++      structure gs_29 = LargeInt
++   end
++   local
++      parser/extensions/c/parse-tree-ext.sml
++   in
++      structure gs_30 = ParseTreeExt
++   end
++   local
++      structure LargeInt = gs_29
++      structure ParseTreeExt = gs_30
++      structure SourceMap = gs_17
++      parser/parse-tree-sig.sml
++   in
++      signature gs_31 = PARSETREE
++   end
++   local
++      structure LargeInt = gs_29
++      signature PARSETREE = gs_31
++      structure ParseTreeExt = gs_30
++      structure SourceMap = gs_17
++      parser/parse-tree.sml
++   in
++      structure gs_32 = ParseTree
++   end
++   local
++      structure Error = gs_25
++      structure ParseTree = gs_32
++      parser/parser-sig.sml
++   in
++      signature gs_33 = PARSER
++   end
++   local
++      open l4
++   in
++      structure gs_34 = IO
++   end
++   local
++      open l4
++   in
++      structure gs_35 = TextPrimIO
++   end
++   local
++      open l4
++   in
++      structure gs_36 = IntInf
++   end
++   local
++      open l4
++   in
++      structure gs_37 = CharVector
++   end
++   local
++      open l4
++   in
++      structure gs_38 = Vector
++   end
++   local
++      open l4
++   in
++      structure gs_39 = Real
++   end
++   local
++      open l4
++   in
++      structure gs_40 = Char
++   end
++   local
++      open l24
++   in
++      structure gs_41 = AtomTable
++   end
++   local
++      open l24
++   in
++      structure gs_42 = Atom
++   end
++   local
++      structure Atom = gs_42
++      structure AtomTable = gs_41
++      structure Config = gs_4
++      parser/grammar/tdefs.sml
++   in
++      signature gs_43 = TYPEDEFS
++      structure gs_44 = TypeDefs
++   end
++   local
++      open l96
++   in
++      signature gs_45 = ARG_LEXER
++      signature gs_46 = ARG_PARSER
++      signature gs_47 = LEXER
++      signature gs_48 = LR_PARSER
++      signature gs_49 = LR_TABLE
++      signature gs_50 = PARSER
++      signature gs_51 = PARSER_DATA
++      signature gs_52 = STREAM
++      signature gs_53 = TOKEN
++   end
++   local
++      signature ARG_LEXER = gs_45
++      signature ARG_PARSER = gs_46
++      signature LEXER = gs_47
++      signature LR_PARSER = gs_48
++      signature LR_TABLE = gs_49
++      structure LargeInt = gs_29
++      signature PARSER = gs_50
++      signature PARSER_DATA = gs_51
++      signature STREAM = gs_52
++      signature TOKEN = gs_53
++      parser/grammar/c.grm.sig
++   in
++      signature gs_54 = C_LRVALS
++      signature gs_55 = C_TOKENS
++   end
++   local
++      structure Atom = gs_42
++      structure AtomTable = gs_41
++      signature C_LRVALS = gs_54
++      signature C_TOKENS = gs_55
++      structure Config = gs_4
++      signature TYPEDEFS = gs_43
++      structure TypeDefs = gs_44
++      parser/grammar/tokentable.sml
++   in
++      signature gs_56 = TOKENTABLE
++      functor gs_57 = TokenTable
++   end
++   local
++      signature C_LRVALS = gs_54
++      signature C_TOKENS = gs_55
++      structure Char = gs_40
++      structure CharVector = gs_37
++      structure IO = gs_34
++      structure Int = gs_10
++      structure IntInf = gs_36
++      structure LargeInt = gs_29
++      structure Real = gs_39
++      structure SourceMap = gs_17
++      structure String = gs_15
++      structure StringCvt = gs_20
++      signature TOKENTABLE = gs_56
++      structure TextIO = gs_0
++      structure TextPrimIO = gs_35
++      functor TokenTable = gs_57
++      structure Vector = gs_38
++      parser/grammar/c.lex.sml
++   in
++      functor gs_58 = CLexFun
++   end
++   local
++      open l4
++   in
++      structure gs_59 = Array
++   end
++   local
++      signature ARG_LEXER = gs_45
++      signature ARG_PARSER = gs_46
++      structure Array = gs_59
++      signature C_LRVALS = gs_54
++      signature C_TOKENS = gs_55
++      structure Char = gs_40
++      structure Error = gs_25
++      signature LEXER = gs_47
++      signature LR_PARSER = gs_48
++      signature LR_TABLE = gs_49
++      structure LargeInt = gs_29
++      structure List = gs_21
++      signature PARSER = gs_50
++      signature PARSER_DATA = gs_51
++      structure ParseTree = gs_32
++      signature STREAM = gs_52
++      structure SourceMap = gs_17
++      structure String = gs_15
++      signature TOKEN = gs_53
++      signature TYPEDEFS = gs_43
++      structure TypeDefs = gs_44
++      parser/grammar/c.grm.sml
++   in
++      functor gs_60 = LrValsFun
++   end
++   local
++      functor CLexFun = gs_58
++      structure Error = gs_25
++      functor Join = gs_26
++      functor JoinWithArg = gs_27
++      structure LrParser = gs_28
++      functor LrValsFun = gs_60
++      signature PARSER = gs_33
++      structure SourceMap = gs_17
++      signature TOKENTABLE = gs_56
++      signature TYPEDEFS = gs_43
++      structure TextIO = gs_0
++      functor TokenTable = gs_57
++      structure TypeDefs = gs_44
++      parser/parser.sml
++   in
++      structure gs_61 = Parser
++   end
++   local
++      open l24
++   in
++      structure gs_62 = HashString
++   end
++   local
++      signature UID = gs_8
++      functor UidFn = gs_11
++      ast/tid.sml
++   in
++      structure gs_63 = Tid
++   end
++   local
++      structure Tid = gs_63
++      ast/symbol-sig.sml
++   in
++      signature gs_64 = SYMBOL
++   end
++   local
++      structure HashString = gs_62
++      structure Int = gs_10
++      signature SYMBOL = gs_64
++      structure String = gs_15
++      structure Tid = gs_63
++      structure Word = gs_7
++      ast/symbol.sml
++   in
++      structure gs_65 = Symbol
++   end
++   local
++      signature UID = gs_8
++      functor UidFn = gs_11
++      ast/pid.sml
++   in
++      structure gs_66 = Pid
++   end
++   local
++      ast/extensions/c/ast-ext.sml
++   in
++      structure gs_67 = AstExt
++   end
++   local
++      structure Aid = gs_12
++      structure AstExt = gs_67
++      structure LargeInt = gs_29
++      structure Pid = gs_66
++      structure SourceMap = gs_17
++      structure Symbol = gs_65
++      structure Tid = gs_63
++      ast/ast-sig.sml
++   in
++      signature gs_68 = AST
++   end
++   local
++      signature AST = gs_68
++      structure Aid = gs_12
++      structure AstExt = gs_67
++      structure LargeInt = gs_29
++      structure Pid = gs_66
++      structure SourceMap = gs_17
++      structure Symbol = gs_65
++      structure Tid = gs_63
++      ast/ast.sml
++   in
++      structure gs_69 = Ast
++   end
++   local
++      structure Ast = gs_69
++      structure LargeInt = gs_29
++      structure Pid = gs_66
++      structure SourceMap = gs_17
++      structure Symbol = gs_65
++      structure Tid = gs_63
++      ast/bindings.sml
++   in
++      structure gs_70 = Bindings
++   end
++   local
++      open l24
++   in
++      functor gs_71 = BinaryMapFn
++   end
++   local
++      open l24
++   in
++      signature gs_72 = ORD_MAP
++   end
++   local
++      structure Tid = gs_63
++      functor UidtabImpFn = gs_9
++      ast/tidtab.sml
++   in
++      structure gs_73 = Tidtab
++   end
++   local
++      structure Aidtab = gs_13
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Tidtab = gs_73
++      ast/tables.sml
++   in
++      structure gs_74 = Tables
++   end
++   local
++      structure Aid = gs_12
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Error = gs_25
++      structure LargeInt = gs_29
++      signature ORD_MAP = gs_72
++      structure SourceMap = gs_17
++      structure Symbol = gs_65
++      structure Tables = gs_74
++      structure Tid = gs_63
++      ast/state-sig.sml
++   in
++      signature gs_75 = STATE
++   end
++   local
++      structure Aid = gs_12
++      structure Aidtab = gs_13
++      structure Ast = gs_69
++      functor BinaryMapFn = gs_71
++      structure Bindings = gs_70
++      structure Error = gs_25
++      structure LargeInt = gs_29
++      structure List = gs_21
++      structure Pid = gs_66
++      signature STATE = gs_75
++      structure SourceMap = gs_17
++      structure Symbol = gs_65
++      structure Tables = gs_74
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      ast/state.sml
++   in
++      structure gs_76 = State
++   end
++   local
++      ast/sizes-sig.sml
++   in
++      signature gs_77 = SIZES
++   end
++   local
++      signature SIZES = gs_77
++      ast/sizes.sml
++   in
++      structure gs_78 = Sizes
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Sizes = gs_78
++      structure State = gs_76
++      structure Tables = gs_74
++      structure TextIO = gs_0
++      structure Tidtab = gs_73
++      ast/parse-to-ast-sig.sml
++   in
++      signature gs_79 = PARSE_TO_AST
++   end
++   local
++      open l4
++   in
++      structure gs_80 = ListPair
++   end
++   local
++      open l4
++   in
++      structure gs_81 = Option
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Error = gs_25
++      structure ParseTree = gs_32
++      structure Sizes = gs_78
++      structure State = gs_76
++      structure Tables = gs_74
++      structure Tidtab = gs_73
++      ast/build-ast-sig.sml
++   in
++      signature gs_82 = BUILD_AST
++   end
++   local
++      structure Ast = gs_69
++      structure ParseTree = gs_32
++      structure ParseTreeExt = gs_30
++      structure State = gs_76
++      ast/cnv-ext-sig.sml
++   in
++      signature gs_83 = CNVEXT
++   end
++   local
++      structure Ast = gs_69
++      signature CNVEXT = gs_83
++      structure ParseTree = gs_32
++      structure ParseTreeExt = gs_30
++      structure State = gs_76
++      ast/extensions/c/cnv-ext.sml
++   in
++      structure gs_84 = CnvExt
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Pid = gs_66
++      structure Symbol = gs_65
++      ast/simplify-assign-ops.sml
++   in
++      structure gs_85 = SimplifyAssignOps
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure Tables = gs_74
++      structure Tid = gs_63
++      ast/pp/pp-ast-sig.sml
++   in
++      signature gs_86 = PP_AST
++   end
++   local
++      open l4
++   in
++      structure gs_87 = Int32
++   end
++   local
++      structure Ast = gs_69
++      structure Int = gs_10
++      structure Int32 = gs_87
++      structure LargeInt = gs_29
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure Pid = gs_66
++      structure Real = gs_39
++      structure String = gs_15
++      structure Symbol = gs_65
++      structure Tables = gs_74
++      structure TextIO = gs_0
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      ast/pp/pp-lib.sml
++   in
++      structure gs_88 = PPLib
++   end
++   local
++      structure Ast = gs_69
++      structure AstExt = gs_67
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure Tables = gs_74
++      ast/pp/pp-ast-ext-sig.sml
++   in
++      signature gs_89 = PPASTEXT
++   end
++   local
++      signature PPASTEXT = gs_89
++      ast/extensions/c/pp-ast-ext-fn.sml
++   in
++      functor gs_90 = PPAstExtFn
++   end
++   local
++      structure Ast = gs_69
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure Tables = gs_74
++      ast/pp/pp-ast-adornment-sig.sml
++   in
++      signature gs_91 = PPASTADORNMENT
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Int = gs_10
++      structure LargeInt = gs_29
++      structure List = gs_21
++      signature OLD_PRETTYPRINT = gs_22
++      structure OldPrettyPrint = gs_23
++      structure Option = gs_81
++      signature PPASTADORNMENT = gs_91
++      functor PPAstExtFn = gs_90
++      structure PPLib = gs_88
++      signature PP_AST = gs_86
++      structure Pid = gs_66
++      structure SourceMap = gs_17
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      ast/pp/pp-ast-fn.sml
++   in
++      functor gs_92 = PPAstFn
++   end
++   local
++      structure Ast = gs_69
++      signature PPASTADORNMENT = gs_91
++      functor PPAstFn = gs_92
++      ast/pp/pp-ast.sml
++   in
++      structure gs_93 = PPAst
++   end
++   local
++      structure Ast = gs_69
++      ast/ctype-eq.sml
++   in
++      structure gs_94 = CTypeEq
++   end
++   local
++      structure Ast = gs_69
++      structure Sizes = gs_78
++      structure Tables = gs_74
++      ast/sizeof-sig.sml
++   in
++      signature gs_95 = SIZEOF
++   end
++   local
++      structure Ast = gs_69
++      structure LargeInt = gs_29
++      structure Tables = gs_74
++      ast/type-util-sig.sml
++   in
++      signature gs_96 = TYPE_UTIL
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Config = gs_4
++      structure Int = gs_10
++      structure List = gs_21
++      structure PPAst = gs_93
++      structure PPLib = gs_88
++      structure Pid = gs_66
++      structure Symbol = gs_65
++      signature TYPE_UTIL = gs_96
++      structure Tables = gs_74
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      ast/type-util.sml
++   in
++      structure gs_97 = TypeUtil
++   end
++   local
++      structure Ast = gs_69
++      functor BinaryMapFn = gs_71
++      structure Bindings = gs_70
++      structure Config = gs_4
++      structure Int = gs_10
++      structure LargeInt = gs_29
++      structure List = gs_21
++      structure Pid = gs_66
++      signature SIZEOF = gs_95
++      structure Sizes = gs_78
++      structure Tables = gs_74
++      structure TextIO = gs_0
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      structure TypeUtil = gs_97
++      ast/sizeof.sml
++   in
++      structure gs_98 = Sizeof
++   end
++   local
++      structure ParseTree = gs_32
++      structure Real = gs_39
++      structure Tid = gs_63
++      ast/anonymous-structs.sml
++   in
++      structure gs_99 = AnonymousStructs
++      structure gs_100 = TyEq
++   end
++   local
++      structure Aid = gs_12
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure Tid = gs_63
++      ast/initializer-normalizer-sig.sml
++   in
++      signature gs_101 = INITIALIZER_NORMALIZER
++   end
++   local
++      structure Aid = gs_12
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      signature INITIALIZER_NORMALIZER = gs_101
++      structure LargeInt = gs_29
++      structure SourceMap = gs_17
++      structure String = gs_15
++      structure Tid = gs_63
++      ast/initializer-normalizer.sml
++   in
++      structure gs_102 = InitializerNormalizer
++   end
++   local
++      structure Aid = gs_12
++      structure Aidtab = gs_13
++      structure AnonymousStructs = gs_99
++      structure Ast = gs_69
++      signature BUILD_AST = gs_82
++      functor BinaryMapFn = gs_71
++      structure Bindings = gs_70
++      structure CTypeEq = gs_94
++      structure CnvExt = gs_84
++      structure Config = gs_4
++      structure Error = gs_25
++      structure InitializerNormalizer = gs_102
++      structure Int = gs_10
++      structure LargeInt = gs_29
++      structure List = gs_21
++      structure ListPair = gs_80
++      structure Option = gs_81
++      structure PPAst = gs_93
++      structure PPLib = gs_88
++      structure ParseTree = gs_32
++      structure ParseTreeExt = gs_30
++      structure Pid = gs_66
++      structure SimplifyAssignOps = gs_85
++      structure Sizeof = gs_98
++      structure Sizes = gs_78
++      structure SourceMap = gs_17
++      structure State = gs_76
++      structure String = gs_15
++      structure Symbol = gs_65
++      structure Tables = gs_74
++      structure TextIO = gs_0
++      structure Tid = gs_63
++      structure Tidtab = gs_73
++      structure TyEq = gs_100
++      structure TypeUtil = gs_97
++      structure Word = gs_7
++      ast/build-ast.sml
++   in
++      structure gs_103 = BuildAst
++   end
++   local
++      structure Ast = gs_69
++      structure Bindings = gs_70
++      structure BuildAst = gs_103
++      structure Error = gs_25
++      signature PARSE_TO_AST = gs_79
++      structure PPAst = gs_93
++      structure PPLib = gs_88
++      structure Parser = gs_61
++      structure Sizes = gs_78
++      structure State = gs_76
++      structure Tables = gs_74
++      structure TextIO = gs_0
++      structure Tidtab = gs_73
++      ast/parse-to-ast.sml
++   in
++      structure gs_104 = ParseToAst
++   end
++in
++   signature AST = gs_68
++   structure Aidtab = gs_13
++   structure Ast = gs_69
++   structure Bindings = gs_70
++   signature CONFIG = gs_3
++   structure Config = gs_4
++   signature PARSECONTROL = gs_2
++   signature PARSER = gs_33
++   signature PARSETREE = gs_31
++   signature PARSE_TO_AST = gs_79
++   structure PPAst = gs_93
++   signature PP_AST = gs_86
++   structure ParseToAst = gs_104
++   structure ParseTree = gs_32
++   structure Parser = gs_61
++   structure Pid = gs_66
++   signature SOURCE_MAP = gs_16
++   structure Sizeof = gs_98
++   structure Sizes = gs_78
++   structure SourceMap = gs_17
++   structure State = gs_76
++   structure Symbol = gs_65
++   signature TYPECHECKCONTROL = gs_1
++   structure Tables = gs_74
++   structure Tid = gs_63
++   structure Tidtab = gs_73
++   structure TypeUtil = gs_97
++   signature UID = gs_8
++   signature UIDTABIMP = gs_6
++end
++end
++
++end
+diff --git a/src/parser/grammar/c.lex.sml b/src/parser/grammar/c.lex.sml
+index 2bbb06a..0aaf494 100644
+--- a/src/parser/grammar/c.lex.sml
++++ b/src/parser/grammar/c.lex.sml
+@@ -229,7 +229,7 @@ fun special_char(c,fst,last,errWarn:errWarn) =
+     local
+ 
+     val yytable = 
+-#[
++Vector.fromList [
+ ]
+ 
+     fun mk yyins = let
+diff --git a/src/parser/parse-tree-sig.sml b/src/parser/parse-tree-sig.sml
+index 4ac8151..ba072b7 100644
+--- a/src/parser/parse-tree-sig.sml
++++ b/src/parser/parse-tree-sig.sml
+@@ -27,8 +27,10 @@ sig
+     | ModAssign | XorAssign | OrAssign | AndAssign
+     | LshiftAssign | RshiftAssign 
+     | Uplus 
+-    | SizeofType of ctype
+-    | OperatorExt of operatorExt
++    | SizeofType of
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
++    | OperatorExt of
++        ParseTreeExt.operatorExt
+ 
+   and expression
+     = EmptyExpr
+@@ -40,10 +42,17 @@ sig
+     | Binop of operator * expression * expression
+     | QuestionColon of expression * expression * expression
+     | Call of expression * expression list
+-    | Cast of ctype * expression
++    | Cast of
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
++        expression
+     | InitList of expression list
+     | MARKexpression of (SourceMap.location * expression)
+-    | ExprExt of expressionExt
++    | ExprExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.expressionExt
+ 
+   and specifier
+     = Void
+@@ -60,11 +69,15 @@ sig
+     | Wholenum
+     | Saturate
+     | Nonsaturate
+-    | Array of expression * ctype
+-    | Pointer of ctype
++    | Array of
++        expression *
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
++    | Pointer of
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
+     | Function of
+-        {retType : ctype,  
+-	 params : (decltype * declarator) list}
++        {retType : (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
++         params : ((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++                   declarator) list}
+     | Enum of
+         {tagOpt : string option,
+ 	 enumerators : (string * expression) list,
+@@ -72,13 +85,19 @@ sig
+     | Struct of
+         {isStruct : bool,   (* struct or union; true => struct *)
+ 	 tagOpt : string option,  (* optional tag *)
+-	 members: (ctype * (declarator * expression) list) list} (* member specs *)
++         members: ((* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
++                   (declarator * expression) list) list} (* member specs *)
+     | TypedefName of string
+     | StructTag of
+ 	{isStruct : bool,   (* ??? *)
+ 	 name : string}
+     | EnumTag of string 
+-    | SpecExt of specifierExt
++    | SpecExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.specifierExt
+ 
+   and declarator  (* constructor suffix: "Decr" *)
+     = EmptyDecr
+@@ -87,9 +106,17 @@ sig
+     | ArrayDecr of declarator * expression
+     | PointerDecr of declarator
+     | QualDecr of qualifier * declarator
+-    | FuncDecr of declarator * (decltype * declarator) list
++    | FuncDecr of
++        declarator *
++        ((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++         declarator) list
+     | MARKdeclarator of (SourceMap.location * declarator)
+-    | DecrExt of declaratorExt
++    | DecrExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.declaratorExt
+ 
+   (* supports extensions of C in which expressions contain statements *)
+   and statement
+@@ -110,25 +137,42 @@ sig
+     | IfThenElse of expression * statement * statement
+     | Switch of expression * statement
+     | MARKstatement of (SourceMap.location * statement)
+-    | StatExt of statementExt
++    | StatExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.statementExt
+ 
+   and declaration
+-    = Declaration of decltype * (declarator * expression) list
++    = Declaration of
++        (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++        (declarator * expression) list
+     | MARKdeclaration of (SourceMap.location * declaration)
+-    | DeclarationExt of declarationExt
++    | DeclarationExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.declarationExt
+ 
+   (* the top-level constructs in a translation unit (i.e. source file) *)
+   and externalDecl
+     = ExternalDecl of declaration
+     | FunctionDef of
+-       {retType : decltype,      (* return type *)
++       {retType : (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},      (* return type *)
+ 	funDecr : declarator,   (* function name declarator *)
+         krParams : declaration list, (* K&R-style parameter declarations *)
+         body : statement}        (* function body *)
+     | MARKexternalDecl of (SourceMap.location * externalDecl)
+-    | ExternalDeclExt of externalDeclExt
+-
+-  withtype ctype =
++    | ExternalDeclExt of
++        (specifier, declarator,
++         (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++         (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++         operator, expression, statement)
++        ParseTreeExt.externalDeclExt
++
++  type ctype =
+       {qualifiers : qualifier list,
+        specifiers : specifier list}
+   and decltype =
+@@ -137,7 +181,7 @@ sig
+        storage : storage list}
+ 
+   (* extension types for basic constructs *)
+-  and externalDeclExt = 
++  type externalDeclExt =
+       (specifier, declarator, ctype, decltype, operator, expression, statement)
+       ParseTreeExt.externalDeclExt
+   and declarationExt = 
+diff --git a/src/parser/parse-tree.sml b/src/parser/parse-tree.sml
+index 160eb5e..292c6d9 100644
+--- a/src/parser/parse-tree.sml
++++ b/src/parser/parse-tree.sml
+@@ -23,8 +23,10 @@ struct
+     | ModAssign | XorAssign | OrAssign | AndAssign
+     | LshiftAssign | RshiftAssign 
+     | Uplus 
+-    | SizeofType of ctype
+-    | OperatorExt of operatorExt
++    | SizeofType of
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
++    | OperatorExt of
++        ParseTreeExt.operatorExt
+ 
+   and expression
+     = EmptyExpr
+@@ -36,10 +38,17 @@ struct
+     | Binop of operator * expression * expression
+     | QuestionColon of expression * expression * expression
+     | Call of expression * expression list
+-    | Cast of ctype * expression
++    | Cast of
++        (* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
++	expression
+     | InitList of expression list
+     | MARKexpression of (SourceMap.location * expression)
+-    | ExprExt of expressionExt
++    | ExprExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++	ParseTreeExt.expressionExt
+ 
+   and specifier
+     = Void
+@@ -56,11 +65,15 @@ struct
+     | Wholenum
+     | Saturate
+     | Nonsaturate
+-    | Array of expression * ctype
+-    | Pointer of ctype
++    | Array of
++        expression *
++	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
++    | Pointer of
++	(* ctype *) {qualifiers : qualifier list, specifiers : specifier list}
+     | Function of
+-        {retType : ctype, 
+-	 params : (decltype * declarator) list}
++        {retType : (* ctype *) {qualifiers : qualifier list, specifiers : specifier list}, 
++	 params : ((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++		   declarator) list}
+     | Enum of
+         {tagOpt : string option,
+ 	 enumerators : (string * expression) list,
+@@ -68,13 +81,19 @@ struct
+     | Struct of
+         {isStruct : bool,   (* struct or union; true => struct *)
+ 	 tagOpt : string option,  (* optional tag *)
+-	 members: (ctype * (declarator * expression) list) list} (* member specs *)
++	 members: ((* ctype *) {qualifiers : qualifier list, specifiers : specifier list} *
++		   (declarator * expression) list) list} (* member specs *)
+     | TypedefName of string
+     | StructTag of
+ 	{isStruct : bool,   (* ??? *)
+ 	 name : string}
+     | EnumTag of string 
+-    | SpecExt of specifierExt
++    | SpecExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++        ParseTreeExt.specifierExt
+ 
+   and declarator  (* constructor suffix: "Decr" *)
+     = EmptyDecr
+@@ -83,9 +102,17 @@ struct
+     | ArrayDecr of declarator * expression
+     | PointerDecr of declarator
+     | QualDecr of qualifier * declarator
+-    | FuncDecr of declarator * (decltype * declarator) list
++    | FuncDecr of
++        declarator *
++	((* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++	 declarator) list
+     | MARKdeclarator of (SourceMap.location * declarator)
+-    | DecrExt of declaratorExt
++    | DecrExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++	ParseTreeExt.declaratorExt
+ 
+   (* supports extensions of C in which expressions contain statements *)
+   and statement
+@@ -106,24 +133,41 @@ struct
+     | IfThenElse of expression * statement * statement
+     | Switch of expression * statement
+     | MARKstatement of (SourceMap.location * statement)
+-    | StatExt of statementExt
++    | StatExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++	ParseTreeExt.statementExt
+ 
+   and declaration
+-    = Declaration of decltype * (declarator * expression) list
++    = Declaration of
++        (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list} *
++        (declarator * expression) list
+     | MARKdeclaration of (SourceMap.location * declaration)
+-    | DeclarationExt of declarationExt
++    | DeclarationExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++	ParseTreeExt.declarationExt
+ 
+   and externalDecl
+     = ExternalDecl of declaration
+     | FunctionDef of (* record? *)
+-       {retType : decltype,      (* return type *)
++       {retType : (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},      (* return type *)
+ 	funDecr : declarator,   (* function name declarator *)
+         krParams : declaration list, (* K&R-style parameter declarations *)
+         body : statement}        (* function body *)
+     | MARKexternalDecl of (SourceMap.location * externalDecl)
+-    | ExternalDeclExt of externalDeclExt
++    | ExternalDeclExt of
++        (specifier, declarator,
++	 (* ctype *) {qualifiers : qualifier list, specifiers : specifier list},
++	 (* decltype *) {qualifiers : qualifier list, specifiers : specifier list, storage : storage list},
++	 operator, expression, statement)
++	ParseTreeExt.externalDeclExt
+ 
+-  withtype ctype =
++  type ctype =
+            {qualifiers : qualifier list,
+ 	    specifiers : specifier list}
+   and decltype =
+@@ -131,7 +175,7 @@ struct
+        specifiers : specifier list,
+        storage : storage list}      
+ 
+-  and externalDeclExt = 
++  type externalDeclExt =
+       (specifier, declarator, ctype, decltype, operator, expression, statement)
+       ParseTreeExt.externalDeclExt
+   and declarationExt = 
Index: lib/ckit-lib/ckit.tgz
===================================================================
Cannot display: file marked as a binary type.
svn:mime-type = application/octet-stream
Index: mlyacc/src/yacc.sml
===================================================================
--- mlyacc/src/yacc.sml	(revision 7524)
+++ mlyacc/src/yacc.sml	(revision 7552)
@@ -1,3 +1,6 @@
+(* Modified by Matthew Fluet on 2011-06-17.
+ * Use simple file name (rather than absolute paths) in line directives in output.
+ *)
 (* Modified by Vesa Karvonen on 2007-12-18.
  * Create line directives in output.
  *)
@@ -777,8 +780,8 @@
 
     in  let val result = TextIO.openOut (spec ^ ".sml")
             val sigs = TextIO.openOut (spec ^ ".sig")
-            val specPath = OS.FileSys.fullPath spec
-            val resultPath = OS.FileSys.fullPath (spec ^ ".sml")
+            val specFile = OS.Path.file spec
+            val resultFile = specFile ^ ".sml"
             val line = ref 1
             val col = ref 0
             val pr = fn s => TextIO.output(result,s)
@@ -793,8 +796,8 @@
                String.concat ["(*#line ", Int.toString line, ".",
                               Int.toString (col+1), " \"", path, "\"*)"]
             val fmtPos =
-               fn NONE => (fmtLineDir {line = !line, col = 0} resultPath) ^ "\n"
-                | SOME pos => fmtLineDir pos specPath
+               fn NONE => (fmtLineDir {line = !line, col = 0} resultFile) ^ "\n"
+                | SOME pos => fmtLineDir pos specFile
             val termvoid = makeUniqueId "VOID"
             val ntvoid = makeUniqueId "ntVOID"
             val hasType = fn s => case symbolType s
Index: Makefile
===================================================================
--- Makefile	(revision 7524)
+++ Makefile	(revision 7552)
@@ -1,4 +1,4 @@
-## Copyright (C) 2009 Matthew Fluet.
+## Copyright (C) 2009,2011 Matthew Fluet.
  # Copyright (C) 1999-2007 Henry Cejtin, Matthew Fluet, Suresh
  #    Jagannathan, and Stephen Weeks.
  # Copyright (C) 1997-2000 NEC Research Institute.
@@ -134,13 +134,14 @@
 		bin/make-pdf-guide; \
 	fi
 
-LIBRARIES := ckit-lib cml mlnlffi-lib mlrisc-lib mlyacc-lib smlnj-lib
+LIBRARIES := ckit-lib cml mllpt-lib mlnlffi-lib mlrisc-lib mlyacc-lib smlnj-lib
 
 .PHONY: libraries-no-check
 libraries-no-check:
 	mkdir -p "$(LIB)/sml"
 	cd "$(LIB)/sml" && rm -rf $(LIBRARIES)
 	$(MAKE) -C "$(SRC)/lib/ckit-lib"
+	$(MAKE) -C "$(SRC)/lib/mllpt-lib"
 	$(MAKE) -C "$(SRC)/lib/mlnlffi-lib"
 	$(MAKE) -C "$(SRC)/lib/mlrisc-lib"
 	$(MAKE) -C "$(SRC)/lib/smlnj-lib"
@@ -148,6 +149,7 @@
 	$(CP) "$(SRC)/lib/ckit-lib/ckit/." "$(LIB)/sml/ckit-lib"
 	$(CP) "$(SRC)/lib/mlnlffi-lib/." "$(LIB)/sml/mlnlffi-lib"
 	$(CP) "$(SRC)/lib/mlrisc-lib/MLRISC/." "$(LIB)/sml/mlrisc-lib"
+	$(CP) "$(SRC)/lib/mllpt-lib/ml-lpt/lib/." "$(LIB)/sml/mllpt-lib"
 	$(CP) "$(SRC)/lib/mlyacc-lib/." "$(LIB)/sml/mlyacc-lib"
 	$(CP) "$(SRC)/lib/smlnj-lib/smlnj-lib/." "$(LIB)/sml/smlnj-lib"
 	find "$(LIB)/sml" -type d -name .cm | xargs rm -rf
@@ -205,20 +207,12 @@
 	echo "$(TARGET_ARCH)" > "$(LIB)/targets/$(TARGET)/arch"
 	$(CP) runtime/gen/basis-ffi.sml \
 		basis-library/primitive/basis-ffi.sml
-ifeq ($(OMIT_BYTECODE), yes)
-else
-	$(CP) runtime/bytecode/opcodes "$(LIB)/"
-endif
 	$(CP) runtime/*.h "$(INC)/"
 	mv "$(INC)/c-types.h" "$(LIB)/targets/$(TARGET)/include"
 	for d in basis basis/Real basis/Word gc platform util; do	\
 		mkdir -p "$(INC)/$$d";					\
 		$(CP) runtime/$$d/*.h "$(INC)/$$d";			\
 	done
-ifeq ($(OMIT_BYTECODE), yes)
-else
-	$(CP) runtime/bytecode/interpret.h "$(INC)"
-endif
 	for x in "$(LIB)/targets/$(TARGET)"/*.a; do $(RANLIB) "$$x"; done
 
 .PHONY: script
Index: util/cm2mlb/cm2mlb.sml
===================================================================
--- util/cm2mlb/cm2mlb.sml	(revision 7524)
+++ util/cm2mlb/cm2mlb.sml	(revision 7552)
@@ -83,6 +83,7 @@
                      List.mapPartial
                      (fn line =>
                       if CharVector.all Char.isSpace line
+                         orelse CharVector.sub (line, 0) = #"#"
                          then NONE
                          else 
                             case String.tokens Char.isSpace line of
@@ -189,7 +190,7 @@
                                else concat ["(* ", cmLibOSString, " ===> *) ", mlbLibDef ()]
                       in
                          concat 
-                         ["  basis ", bid, " = \n",
+                         ["  basis ", bid, " =\n",
                           "    bas\n",
                           "      ", mlbLib, "\n",
                           "    end\n"]
Index: util/cm2mlb/cm2mlb-map
===================================================================
--- util/cm2mlb/cm2mlb-map	(revision 7524)
+++ util/cm2mlb/cm2mlb-map	(revision 7552)
@@ -1,30 +1,45 @@
-$SMLNJ-BASIS           $(SML_LIB)/basis
-$basis.cm              $(SML_LIB)/basis
-$basis.cm/basis.cm     $(SML_LIB)/basis/basis.mlb
+# Standard ML Basis Library
+$SMLNJ-BASIS                            $(SML_LIB)/basis
+$basis.cm                               $(SML_LIB)/basis
+$basis.cm/basis.cm                      $(SML_LIB)/basis/basis.mlb
 
-$SMLNJ-ML-YACC-LIB                    $(SML_LIB)/mlyacc-lib
-$SMLNJ-ML-YACC-LIB/ml-yacc-lib.cm     $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
-$ml-yacc-lib.cm                       $(SML_LIB)/mlyacc-lib
-$ml-yacc-lib.cm/ml-yacc-lib.cm        $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
+#####
 
-$cml            $(SML_LIB)/cml
-$cml/cml.cm     $(SML_LIB)/cml/cml.mlb
+# ckit Library
+$ckit-lib.cm                            $(SML_LIB)/ckit-lib
+$ckit-lib.cm/ckit-lib.cm                $(SML_LIB)/ckit-lib/ckit-lib.mlb
 
-$c          $(SML_LIB)/mlnlffi-lib
-$c/c.cm     $(SML_LIB)/mlnlffi-lib/mlnlffi-lib.mlb
+# CML Library
+$cml                                    $(SML_LIB)/cml
+$cml/cml.cm                             $(SML_LIB)/cml/cml.mlb
 
-$SMLNJ-LIB            $(SML_LIB)/smlnj-lib
-$controls-lib.cm      $(SML_LIB)/smlnj-lib/Controls
-$hash-cons-lib.cm     $(SML_LIB)/smlnj-lib/HashCons
-$html-lib.cm          $(SML_LIB)/smlnj-lib/HTML
-$inet-lib.cm          $(SML_LIB)/smlnj-lib/INet
-$pp-lib.cm            $(SML_LIB)/smlnj-lib/PP
-$reactive-lib.cm      $(SML_LIB)/smlnj-lib/Reactive
-$regexp-lib.cm        $(SML_LIB)/smlnj-lib/RegExp
-$smlnj-lib.cm         $(SML_LIB)/smlnj-lib/Util
-$unix-lib.cm          $(SML_LIB)/smlnj-lib/Unix
+# MLLPT Library
+$ml-lpt-lib.cm                          $(SML_LIB)/mllpt-lib
+$ml-lpt-lib.cm/ml-lpt-lib.cm            $(SML_LIB)/mllpt-lib/mllpt-lib.mlb
 
-$ckit-lib.cm                 $(SML_LIB)/ckit-lib
-$ckit-lib.cm/ckit-lib.cm     $(SML_LIB)/ckit-lib/ckit-lib.mlb
+# MLNLFFI Library
+$c                                      $(SML_LIB)/mlnlffi-lib
+$c/c.cm                                 $(SML_LIB)/mlnlffi-lib/mlnlffi-lib.mlb
 
-$SMLNJ-MLRISC     $(SML_LIB)/mlrisc-lib/mlb
+# MLRISC Library
+$SMLNJ-MLRISC                           $(SML_LIB)/mlrisc-lib/mlb
+
+# MLYacc Library
+$SMLNJ-ML-YACC-LIB                      $(SML_LIB)/mlyacc-lib
+$SMLNJ-ML-YACC-LIB/ml-yacc-lib.cm       $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
+$ml-yacc-lib.cm                         $(SML_LIB)/mlyacc-lib
+$ml-yacc-lib.cm/ml-yacc-lib.cm          $(SML_LIB)/mlyacc-lib/mlyacc-lib.mlb
+
+# SMLNJ Library
+$SMLNJ-LIB                              $(SML_LIB)/smlnj-lib
+$controls-lib.cm                        $(SML_LIB)/smlnj-lib/Controls
+$hash-cons-lib.cm                       $(SML_LIB)/smlnj-lib/HashCons
+$html-lib.cm                            $(SML_LIB)/smlnj-lib/HTML
+$html4-lib.cm                           $(SML_LIB)/smlnj-lib/HTML4
+$inet-lib.cm                            $(SML_LIB)/smlnj-lib/INet
+$json-lib.cm                            $(SML_LIB)/smlnj-lib/JSON
+$pp-lib.cm                              $(SML_LIB)/smlnj-lib/PP
+$reactive-lib.cm                        $(SML_LIB)/smlnj-lib/Reactive
+$regexp-lib.cm                          $(SML_LIB)/smlnj-lib/RegExp
+$smlnj-lib.cm                           $(SML_LIB)/smlnj-lib/Util
+$unix-lib.cm                            $(SML_LIB)/smlnj-lib/Unix
