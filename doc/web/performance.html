<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>MLton's Performance</title>
    <!-- Changed by: Stephen Weeks, 08-Oct-2001 -->
  </head>

  <body>
    This page compares the performance of the following SML compilers on a range
    of benchmarks.
    <ul>
      <li> <a href = "http://www.sourcelight.com/MLton/">MLton</a> 20011006
      <li> <a href = "http://www.itu.dk/research/mlkit/">ML Kit</a> 4.0.0
      <li> <a href = "http://www.dina.kvl.dk/~sestoft/mosml.html">Moscow ML</a>
	2.00
      <li> <a href =
	      "http://cm.bell-labs.com/cm/cs/what/smlnj/index.html">SML/NJ</a>
	110.36
    </ul>
    There are tables comparing <a href = "#run-time">run time</a>,
    <a href = "#compile-time">compile time</a>, 
    and <a href = "#code-size">code size</a>.
    <p>
    All of the benchmarks are available <a href = "benchmarks/">here</a>.
    Some of the benchmarks were obtained from
    <a href="ftp://ftp.research.bell-labs.com/dist/smlnj/benchmarks/">here</a>.
    Some of the benchmarks use data files in the 
    <a href="benchmarks/DATA/"><tt>DATA</tt></a> subdirectory.

    <h1>Setup</h1>
    All benchmarks were compiled and run on a 733MhZ P6 with 512M of physical
    memory. The benchmarks were compiled with the default settings for all the
    compilers, except for Moscow ML, which was passed the <tt>-orthodox
    -standalone -toplevel</tt> switches.  The SML/NJ executables were produced
    by wrapping the entire program in a <tt>local</tt> declaration whose body
    performs an <tt>exportFn</tt>.
    
    <h1><a name = "run-time">Run time ratio</a></h1>
    <p>
      The following table gives the ratio of the run time of each benchmark when
      compiled by another compiler to the run time when compiled by MLton.  That
      is, the larger the number, the slower the generated code runs.  A number
      larger than one indicates that the corresponding compiler produces code
      that runs more slowly than MLton.  If an entry is <tt>*</tt>, that means
      that the corresponding compiler failed to compile the benchmark or that
      the benchmark failed to run.
    <p>
    <table border=2 cellpadding=5 cellspacing=2>
<tr>
<th align = left>benchmark</th>
<th align = right>ML-Kit</th>
<th align = right>Moscow-ML</th>
<th align = right>SML/NJ</th>
</tr>
<tr>
<td align = left>barnes-hut</td>
<td align = right>3.9</td>
<td align = right>13.4</td>
<td align = right>0.8</td>
</tr>
<tr>
<td align = left>checksum</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>4.3</td>
</tr>
<tr>
<td align = left>count-graphs</td>
<td align = right>8.0</td>
<td align = right>26.7</td>
<td align = right>1.7</td>
</tr>
<tr>
<td align = left>DLXSimulator</td>
<td align = right>1.9</td>
<td align = right>*</td>
<td align = right>*</td>
</tr>
<tr>
<td align = left>fft</td>
<td align = right>10.9</td>
<td align = right>35.4</td>
<td align = right>1.2</td>
</tr>
<tr>
<td align = left>fib</td>
<td align = right>0.9</td>
<td align = right>4.5</td>
<td align = right>1.0</td>
</tr>
<tr>
<td align = left>hamlet</td>
<td align = right>*</td>
<td align = right>10.7</td>
<td align = right>1.8</td>
</tr>
<tr>
<td align = left>knuth-bendix</td>
<td align = right>4.8</td>
<td align = right>12.6</td>
<td align = right>2.1</td>
</tr>
<tr>
<td align = left>lexgen</td>
<td align = right>2.6</td>
<td align = right>6.0</td>
<td align = right>1.7</td>
</tr>
<tr>
<td align = left>life</td>
<td align = right>7.2</td>
<td align = right>21.0</td>
<td align = right>1.0</td>
</tr>
<tr>
<td align = left>logic</td>
<td align = right>*</td>
<td align = right>4.2</td>
<td align = right>0.8</td>
</tr>
<tr>
<td align = left>mandelbrot</td>
<td align = right>4.3</td>
<td align = right>31.1</td>
<td align = right>1.3</td>
</tr>
<tr>
<td align = left>matrix-multiply</td>
<td align = right>9.4</td>
<td align = right>35.9</td>
<td align = right>3.2</td>
</tr>
<tr>
<td align = left>md5</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>3.3</td>
</tr>
<tr>
<td align = left>merge</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>10.6</td>
</tr>
<tr>
<td align = left>mlyacc</td>
<td align = right>*</td>
<td align = right>7.8</td>
<td align = right>1.7</td>
</tr>
<tr>
<td align = left>mpuz</td>
<td align = right>9.5</td>
<td align = right>53.5</td>
<td align = right>3.4</td>
</tr>
<tr>
<td align = left>nucleic</td>
<td align = right>*</td>
<td align = right>15.0</td>
<td align = right>0.6</td>
</tr>
<tr>
<td align = left>peek</td>
<td align = right>6.8</td>
<td align = right>29.9</td>
<td align = right>2.2</td>
</tr>
<tr>
<td align = left>psdes-random</td>
<td align = right>17.6</td>
<td align = right>*</td>
<td align = right>4.5</td>
</tr>
<tr>
<td align = left>ratio-regions</td>
<td align = right>13.3</td>
<td align = right>48.9</td>
<td align = right>5.6</td>
</tr>
<tr>
<td align = left>ray</td>
<td align = right>5.2</td>
<td align = right>13.0</td>
<td align = right>1.0</td>
</tr>
<tr>
<td align = left>raytrace</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>2.4</td>
</tr>
<tr>
<td align = left>simple</td>
<td align = right>2.5</td>
<td align = right>13.3</td>
<td align = right>1.3</td>
</tr>
<tr>
<td align = left>smith-normal-form</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>95.1</td>
</tr>
<tr>
<td align = left>tailfib</td>
<td align = right>1.2</td>
<td align = right>21.9</td>
<td align = right>1.4</td>
</tr>
<tr>
<td align = left>tak</td>
<td align = right>1.7</td>
<td align = right>7.8</td>
<td align = right>1.4</td>
</tr>
<tr>
<td align = left>tensor</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>4.9</td>
</tr>
<tr>
<td align = left>tsp</td>
<td align = right>2.6</td>
<td align = right>14.5</td>
<td align = right>1.6</td>
</tr>
<tr>
<td align = left>tyan</td>
<td align = right>*</td>
<td align = right>13.5</td>
<td align = right>1.0</td>
</tr>
<tr>
<td align = left>vector-concat</td>
<td align = right>7.5</td>
<td align = right>13.4</td>
<td align = right>4.7</td>
</tr>
<tr>
<td align = left>vector-rev</td>
<td align = right>15.8</td>
<td align = right>45.7</td>
<td align = right>37.3</td>
</tr>
<tr>
<td align = left>vliw</td>
<td align = right>2.8</td>
<td align = right>8.7</td>
<td align = right>1.4</td>
</tr>
<tr>
<td align = left>wc-input1</td>
<td align = right>13.8</td>
<td align = right>*</td>
<td align = right>8.5</td>
</tr>
<tr>
<td align = left>wc-scanStream</td>
<td align = right>15.4</td>
<td align = right>*</td>
<td align = right>3.3</td>
</tr>
<tr>
<td align = left>zebra</td>
<td align = right>14.2</td>
<td align = right>28.3</td>
<td align = right>9.1</td>
</tr>
<tr>
<td align = left>zern</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>1.7</td>
</tr>
    </table>	

    <h1><a name = "compile-time">Compile time</a></h1>
    The following table gives the compile time of each benchmark in seconds.
    A * in an entry means that the compiler failed to compile the benchmark.
    <p>
    <table border=2 cellpadding=5 cellspacing=2> 
<tr>
<th align = left>benchmark</th>
<th align = right>MLton</th>
<th align = right>ML-Kit</th>
<th align = right>Moscow-ML</th>
<th align = right>SML/NJ</th>
</tr>
<tr>
<td align = left>barnes-hut</td>
<td align = right>2.4</td>
<td align = right>8.1</td>
<td align = right>0.8</td>
<td align = right>1.6</td>
</tr>
<tr>
<td align = left>checksum</td>
<td align = right>0.7</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>count-graphs</td>
<td align = right>1.8</td>
<td align = right>2.6</td>
<td align = right>0.2</td>
<td align = right>1.1</td>
</tr>
<tr>
<td align = left>DLXSimulator</td>
<td align = right>4.1</td>
<td align = right>11.6</td>
<td align = right>*</td>
<td align = right>*</td>
</tr>
<tr>
<td align = left>fft</td>
<td align = right>1.2</td>
<td align = right>2.1</td>
<td align = right>0.2</td>
<td align = right>1.0</td>
</tr>
<tr>
<td align = left>fib</td>
<td align = right>0.7</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.2</td>
</tr>
<tr>
<td align = left>hamlet</td>
<td align = right>44.2</td>
<td align = right>*</td>
<td align = right>43.2</td>
<td align = right>95.0</td>
</tr>
<tr>
<td align = left>knuth-bendix</td>
<td align = right>2.3</td>
<td align = right>5.4</td>
<td align = right>0.4</td>
<td align = right>2.1</td>
</tr>
<tr>
<td align = left>lexgen</td>
<td align = right>5.2</td>
<td align = right>10.1</td>
<td align = right>0.8</td>
<td align = right>4.8</td>
</tr>
<tr>
<td align = left>life</td>
<td align = right>1.4</td>
<td align = right>2.8</td>
<td align = right>0.2</td>
<td align = right>0.7</td>
</tr>
<tr>
<td align = left>logic</td>
<td align = right>5.9</td>
<td align = right>6.9</td>
<td align = right>0.4</td>
<td align = right>1.7</td>
</tr>
<tr>
<td align = left>mandelbrot</td>
<td align = right>0.7</td>
<td align = right>1.2</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>matrix-multiply</td>
<td align = right>0.7</td>
<td align = right>1.1</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>md5</td>
<td align = right>1.6</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>2.1</td>
</tr>
<tr>
<td align = left>merge</td>
<td align = right>0.7</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>mlyacc</td>
<td align = right>20.7</td>
<td align = right>60.8</td>
<td align = right>7.4</td>
<td align = right>23.8</td>
</tr>
<tr>
<td align = left>mpuz</td>
<td align = right>1.0</td>
<td align = right>1.4</td>
<td align = right>0.1</td>
<td align = right>0.5</td>
</tr>
<tr>
<td align = left>nucleic</td>
<td align = right>3.1</td>
<td align = right>28.4</td>
<td align = right>2.1</td>
<td align = right>2.4</td>
</tr>
<tr>
<td align = left>peek</td>
<td align = right>1.1</td>
<td align = right>1.1</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>psdes-random</td>
<td align = right>0.7</td>
<td align = right>1.1</td>
<td align = right>*</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>ratio-regions</td>
<td align = right>2.5</td>
<td align = right>4.3</td>
<td align = right>0.4</td>
<td align = right>2.0</td>
</tr>
<tr>
<td align = left>ray</td>
<td align = right>3.3</td>
<td align = right>3.7</td>
<td align = right>0.2</td>
<td align = right>1.2</td>
</tr>
<tr>
<td align = left>raytrace</td>
<td align = right>8.8</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>7.0</td>
</tr>
<tr>
<td align = left>simple</td>
<td align = right>6.2</td>
<td align = right>14.7</td>
<td align = right>0.9</td>
<td align = right>4.6</td>
</tr>
<tr>
<td align = left>smith-normal-form</td>
<td align = right>7.4</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>3.5</td>
</tr>
<tr>
<td align = left>tailfib</td>
<td align = right>0.6</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.2</td>
</tr>
<tr>
<td align = left>tak</td>
<td align = right>0.6</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.2</td>
</tr>
<tr>
<td align = left>tensor</td>
<td align = right>2.9</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>3.5</td>
</tr>
<tr>
<td align = left>tsp</td>
<td align = right>1.5</td>
<td align = right>2.7</td>
<td align = right>0.3</td>
<td align = right>0.8</td>
</tr>
<tr>
<td align = left>tyan</td>
<td align = right>3.6</td>
<td align = right>*</td>
<td align = right>0.6</td>
<td align = right>2.8</td>
</tr>
<tr>
<td align = left>vector-concat</td>
<td align = right>0.7</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.2</td>
</tr>
<tr>
<td align = left>vector-rev</td>
<td align = right>0.7</td>
<td align = right>1.0</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>vliw</td>
<td align = right>11.8</td>
<td align = right>37.5</td>
<td align = right>3.0</td>
<td align = right>18.9</td>
</tr>
<tr>
<td align = left>wc-input1</td>
<td align = right>1.6</td>
<td align = right>1.1</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>wc-scanStream</td>
<td align = right>1.6</td>
<td align = right>1.1</td>
<td align = right>0.1</td>
<td align = right>0.3</td>
</tr>
<tr>
<td align = left>zebra</td>
<td align = right>9.2</td>
<td align = right>2.9</td>
<td align = right>0.2</td>
<td align = right>0.8</td>
</tr>
<tr>
<td align = left>zern</td>
<td align = right>1.1</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>0.8</td>
</tr>
    </table>

    <h1><a name = "code-size">Code size</a></h1> 
    The following table gives the code size of each benchmark in bytes.  The
    size for MLton and the ML Kit is the sum of text and data for the standalone
    executable as reported by <tt>size</tt>.  The size for Moscow ML is the size
    in bytes of the executable <tt>a.out</tt>.  The size for SML/NJ is the size
    of the heap file created by <tt>exportFn</tt> and does not include the size
    of the SML/NJ runtime system (approximately 95K).  A * in an entry means that
    the compiler failed to compile the benchmark. 
    <p>
    <table border=2 cellpadding=5 cellspacing=2> 
<tr>
<th align = left>benchmark</th>
<th align = right>MLton</th>
<th align = right>ML-Kit</th>
<th align = right>Moscow-ML</th>
<th align = right>SML/NJ</th>
</tr>
<tr>
<td align = left>barnes-hut</td>
<td align = right>59,793</td>
<td align = right>179,028</td>
<td align = right>94,990</td>
<td align = right>327,672</td>
</tr>
<tr>
<td align = left>checksum</td>
<td align = right>20,917</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>332,504</td>
</tr>
<tr>
<td align = left>count-graphs</td>
<td align = right>40,461</td>
<td align = right>109,148</td>
<td align = right>84,575</td>
<td align = right>354,352</td>
</tr>
<tr>
<td align = left>DLXSimulator</td>
<td align = right>78,237</td>
<td align = right>178,292</td>
<td align = right>*</td>
<td align = right>*</td>
</tr>
<tr>
<td align = left>fft</td>
<td align = right>29,441</td>
<td align = right>106,492</td>
<td align = right>84,095</td>
<td align = right>328,712</td>
</tr>
<tr>
<td align = left>fib</td>
<td align = right>20,909</td>
<td align = right>67,852</td>
<td align = right>79,878</td>
<td align = right>306,872</td>
</tr>
<tr>
<td align = left>hamlet</td>
<td align = right>945,328</td>
<td align = right>*</td>
<td align = right>277,168</td>
<td align = right>1,246,408</td>
</tr>
<tr>
<td align = left>knuth-bendix</td>
<td align = right>59,710</td>
<td align = right>114,436</td>
<td align = right>88,439</td>
<td align = right>321,504</td>
</tr>
<tr>
<td align = left>lexgen</td>
<td align = right>122,061</td>
<td align = right>226,300</td>
<td align = right>104,883</td>
<td align = right>391,160</td>
</tr>
<tr>
<td align = left>life</td>
<td align = right>38,565</td>
<td align = right>99,388</td>
<td align = right>83,390</td>
<td align = right>317,400</td>
</tr>
<tr>
<td align = left>logic</td>
<td align = right>147,501</td>
<td align = right>135,228</td>
<td align = right>87,252</td>
<td align = right>330,720</td>
</tr>
<tr>
<td align = left>mandelbrot</td>
<td align = right>20,901</td>
<td align = right>100,724</td>
<td align = right>81,341</td>
<td align = right>311,992</td>
</tr>
<tr>
<td align = left>matrix-multiply</td>
<td align = right>21,309</td>
<td align = right>117,532</td>
<td align = right>81,879</td>
<td align = right>338,632</td>
</tr>
<tr>
<td align = left>md5</td>
<td align = right>34,038</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>331,792</td>
</tr>
<tr>
<td align = left>merge</td>
<td align = right>21,885</td>
<td align = right>68,060</td>
<td align = right>80,091</td>
<td align = right>307,904</td>
</tr>
<tr>
<td align = left>mlyacc</td>
<td align = right>409,501</td>
<td align = right>524,460</td>
<td align = right>148,286</td>
<td align = right>684,072</td>
</tr>
<tr>
<td align = left>mpuz</td>
<td align = right>26,645</td>
<td align = right>88,732</td>
<td align = right>82,381</td>
<td align = right>304,096</td>
</tr>
<tr>
<td align = left>nucleic</td>
<td align = right>60,653</td>
<td align = right>233,124</td>
<td align = right>207,154</td>
<td align = right>351,216</td>
</tr>
<tr>
<td align = left>peek</td>
<td align = right>28,542</td>
<td align = right>76,668</td>
<td align = right>81,618</td>
<td align = right>311,016</td>
</tr>
<tr>
<td align = left>psdes-random</td>
<td align = right>21,901</td>
<td align = right>83,780</td>
<td align = right>*</td>
<td align = right>313,016</td>
</tr>
<tr>
<td align = left>ratio-regions</td>
<td align = right>41,893</td>
<td align = right>110,492</td>
<td align = right>87,485</td>
<td align = right>333,808</td>
</tr>
<tr>
<td align = left>ray</td>
<td align = right>66,688</td>
<td align = right>122,500</td>
<td align = right>89,860</td>
<td align = right>382,024</td>
</tr>
<tr>
<td align = left>raytrace</td>
<td align = right>159,381</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>501,864</td>
</tr>
<tr>
<td align = left>simple</td>
<td align = right>146,913</td>
<td align = right>193,132</td>
<td align = right>94,397</td>
<td align = right>636,960</td>
</tr>
<tr>
<td align = left>smith-normal-form</td>
<td align = right>141,053</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>483,400</td>
</tr>
<tr>
<td align = left>tailfib</td>
<td align = right>20,637</td>
<td align = right>67,740</td>
<td align = right>79,939</td>
<td align = right>306,872</td>
</tr>
<tr>
<td align = left>tak</td>
<td align = right>20,957</td>
<td align = right>67,628</td>
<td align = right>79,928</td>
<td align = right>302,776</td>
</tr>
<tr>
<td align = left>tensor</td>
<td align = right>62,516</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>341,024</td>
</tr>
<tr>
<td align = left>tsp</td>
<td align = right>33,774</td>
<td align = right>114,844</td>
<td align = right>86,140</td>
<td align = right>319,480</td>
</tr>
<tr>
<td align = left>tyan</td>
<td align = right>77,054</td>
<td align = right>*</td>
<td align = right>91,587</td>
<td align = right>367,632</td>
</tr>
<tr>
<td align = left>vector-concat</td>
<td align = right>21,557</td>
<td align = right>76,932</td>
<td align = right>80,191</td>
<td align = right>317,128</td>
</tr>
<tr>
<td align = left>vector-rev</td>
<td align = right>21,389</td>
<td align = right>77,124</td>
<td align = right>80,073</td>
<td align = right>317,128</td>
</tr>
<tr>
<td align = left>vliw</td>
<td align = right>261,417</td>
<td align = right>417,060</td>
<td align = right>135,386</td>
<td align = right>613,456</td>
</tr>
<tr>
<td align = left>wc-input1</td>
<td align = right>39,222</td>
<td align = right>143,532</td>
<td align = right>86,900</td>
<td align = right>311,992</td>
</tr>
<tr>
<td align = left>wc-scanStream</td>
<td align = right>41,614</td>
<td align = right>143,980</td>
<td align = right>87,076</td>
<td align = right>313,016</td>
</tr>
<tr>
<td align = left>zebra</td>
<td align = right>103,502</td>
<td align = right>84,660</td>
<td align = right>83,419</td>
<td align = right>322,536</td>
</tr>
<tr>
<td align = left>zern</td>
<td align = right>26,504</td>
<td align = right>*</td>
<td align = right>*</td>
<td align = right>335,896</td>
</tr>
    </table>

    <hr>
<EM>Last Modified: 08-Oct-2001</EM>
  </body>
</html>

