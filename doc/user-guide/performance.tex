\sec{Performance}{performance}

This section compares the performance of the following compilers on a
range of benchmarks.

\begin{center}
\begin{tabular}{lll}
compiler & version & command line\\\hline
\htmladdnormallink{\mlton}{\makeurl{}}
  & 20000712 & {\tt mlton -h 64m}\\
\htmladdnormallink{\kit}
		  {http://www.itu.dk/research/mlkit/}
  & 3 & {\tt kit}\\
\htmladdnormallink{\mosml}
		  {http://www.dina.kvl.dk/~sestoft/mosml.html}
  & 2.00 & {\tt mosmlc -toplevel}\\
\htmladdnormallink{\smlnj}
		  {http://cm.bell-labs.com/cm/cs/what/smlnj/index.html}
  & 110.9.1 & {\tt sml}\\
\end{tabular}
\end{center}
Some of the benchmarks were obtained at
\begin{center}
\link{ftp://ftp.research.bell-labs.com/dist/smlnj/benchmarks/}
\end{center}
The benchmarks are available at
\begin{center}
\absolutelink{benchmarks/}
\end{center}
Some of the benchmarks use data files available at
\begin{center}
\absolutelink{benchmarks/DATA/}
\end{center}
All benchmarks were compiled and run on a 400MhZ Intel Pentium II with
512M of physical memory.  The SML/NJ executables were produced by
wrapping the entire program in a {\tt local} declaration whose body
performs an {\tt exportFn}.

\subsection{Running time ratios}

For each benchmark, the following table gives the
ratio of running time of the executable generated by each compiler to
the running time of the executable generated by {\mlton}.
If an entry is omitted, it means that the compiler was not able to
compile or run the benchmark for some reason.  For example, on {\tt
mandelbrot}, {\smlnj} was about 3X slower than {\mlton} and the
{\kit} and {\mosml} were about 28X slower than {\mlton}.

\begin{center}
\begin{tabular}{lrrr}
benchmark & {\kit} & {\mosml} & {\smlnj}\\\hline
barnes-hut & 20.8 & 10.4 & 3.0\\
checksum&  &  & 8.3\\
count-graphs & 36.9 & 22.2 & 2.3\\
fft &  & 24.3 & 1.5\\
fib & 2.7 & 3.6 & 1.0\\
knuth-bendix & 14.0 & 8.5 & 2.2\\
lexgen & 6.3 & 4.0 & 1.6\\
life & 29.6 & 15.8 & 1.1\\
logic &  & 3.1 & 0.8\\
mandelbrot & 28.3 & 28.6 & 2.9\\
matrix-multiply&  & 66.0 & 8.6\\
mlyacc &  & 6.6 & 2.2\\
mpuz & 51.0 & 39.2 & 3.3\\
nucleic &  & 13.5 & 4.1\\
ratio-regions & 68.8 & 36.7 & 6.0\\
simple & 18.5 & 14.9 & 2.5\\
smith-normal-form&  &  & 119.6\\
tak & 10.8 & 6.6 & 1.5\\
tensor &  &  & 23.5\\
tsp &  & 13.4 & 9.0\\
vliw & 8.2 & 5.5 & 1.6\\
wc &  &  & 4.0\\
zern &  &  & 2.2\\
% Here are the raw numbers in seconds
%barnes-hut & 11.7 & 243.8 & 121.3 & 34.9\\
%checksum & 7.7 & 0.0 & 0.0 & 63.8\\
%count-graphs & 12.5 & 461.8 & 277.2 & 28.6\\
%fft & 35.0 & 0.0 & 848.9 & 51.1\\
%fib & 10.8 & 29.2 & 38.8 & 11.2\\
%knuth-bendix & 22.8 & 319.1 & 193.0 & 49.3\\
%lexgen & 36.6 & 230.1 & 144.8 & 57.6\\
%life & 52.6 & 1557.9 & 831.7 & 58.4\\
%logic & 64.1 & 0.0 & 200.8 & 51.7\\
%mandelbrot & 18.1 & 511.7 & 517.8 & 52.5\\
%matrix-multiply & 6.8 & 0.0 & 449.1 & 58.7\\
%mlyacc & 23.0 & 0.0 & 150.9 & 50.0\\
%mpuz & 39.1 & 1995.2 & 1533.2 & 127.9\\
%nucleic & 17.8 & 0.0 & 240.0 & 73.2\\
%ratio-regions & 21.9 & 1505.94 & 803.05 & 131.1\\
%simple & 11.2 & 207.3 & 167.4 & 28.3\\
%smith-normal-form & 2.1 & 0.0 & 0.0 & 251.08\\
%tak & 23.4 & 253.2 & 155.2 & 35.3\\
%tensor & 11.2 & 0.0 & 0.0 & 262.8\\
%tsp & 24.4 & 0.0 & 327.5 & 220.2\\
%vliw & 19.9 & 162.2 & 109.7 & 32.8\\
%wc & 13.4 & 0.0 & 0.0 & 54.05\\
%zern & 53.5 & 0.0 & 0.0 & 115.2\\
\end{tabular}
\end{center}

\subsection{Compile time}

The following table gives the compile time of each benchmark in
seconds.
If an entry is omitted, it means that the compiler was not able to
compile the benchmark for some reason.

\begin{center}
\begin{tabular}{lrrrr}
benchmark & {\mlton} & {\kit} & {\mosml} & {\smlnj}\\\hline
barnes-hut & 12.6 & 24.5 & 1.64 & 2.6\\
checksum & 2.0 &  &  & 0.3\\
count-graphs & 8.2 & 6.8 & 0.4 & 1.3\\
fft & 6.6 & 5.2 & 0.3 & 1.0\\
fib & 1.9 & 1.1 & 0.1 & 0.2\\
knuth-bendix & 16.0 & 18.3 & 0.4 & 2.8\\
lexgen & 39.1 & 30.9 & 1.5 & 5.1\\
life & 5.5 & 6.0 & 0.3 & 1.0\\
logic & 52.9 & 15.9 & 0.8 & 2.4\\
mandelbrot & 2.2 & 3.2 & 0.1 & 0.3\\
matrix-multiply & 2.3 &  & 0.2 & 0.4\\
mlyacc & 404.6 & 163.7 & 13.8 & 35.0\\
mpuz & 3.3 & 2.3 & 0.2 & 0.5\\
nucleic & 13.8 & 59.4 & 3.9 & 7.5\\
ratio-regions & 16.2 & 14.55 & 0.7 & 2.4\\
simple & 74.1 & 46.9 & 1.6 & 5.1\\
smith-normal-form & 139.7 & & & 5.2\\
tak & 1.9 & 1.1 & 0.1 & 0.3\\
tensor & 18.8 &  &  & 6.5\\
tsp & 7.4 &  & 0.5 & 1.1\\
vliw & 202.7 & 140.8 & 4.5 & 18.9\\
wc & 5.7 & 1.33 & 0.1 & 7.84\\
zern & 4.4 &  &  & 1.0\\
\end{tabular}
\end{center}

\subsection{Code size}

The following table gives the code size of each benchmark in bytes.
The size for {\mlton} and the {\kit} is the sum of text and data for
the standalone executable as reported by {\tt size}.  The size for
{\smlnj} is the size of the heap file created by {\tt exportFn}, but
does not include the size of the {\smlnj} runtime system (90,450
bytes) that is necessary to run the file.  The size for {\mosml} is
the size of the {\tt a.out}, but does not include the size of the {\tt
camlrunm} runtime system (73,664 bytes) that is necessary to run the
file.  If an entry is omitted, it means that the compiler was not able
to compile the benchmark for some reason.
 
\begin{center}
\begin{tabular}{lrrrr}
          &          &        & (+73,664) & (+90,450)\\
benchmark & {\mlton} & {\kit} & {\mosml} & {\smlnj}\\\hline
barnes-hut & 55,000 & 834,770 & 19,526 & 425,760\\
checksum & 28,928 & & & 346,904\\
count-graphs & 50,376 & 413,894 & 9,111 & 416,584\\
fft & 38,464 & 403,366 & 8,631 & 394,032\\
fib & 28,728 & 30,534 & 4,414 & 321,272\\
knuth-bendix & 76,168 & 363,322 & 12,975 & 379,928\\
lexgen & 169,496 & 952,570 & 29,419 & 448,584\\
life & 44,968 & 291,706 & 7,926 & 344,824\\
logic & 182,984 & 393,882 & 11,788 & 376,568\\
mandelbrot & 28,640 & 350,758 & 5,877 & 338,680\\
matrix-multiply & 29,200 & & 6,415 & 352,008\\
mlyacc & 603,080 & 2,516,958 & 72,822 & 738,408\\
mpuz & 34,024 & 321,710 & 6,919 & 334,584\\
nucleic & 56,656 & 770,058 & 131,690 & 534,576\\
ratio-regions & 57,616 & 472,294 & 12,021 & 394,280\\
simple & 182,280 & 1,010,502 & 18,933 & 726,120\\
smith-normal-form & 144,935 & & & 498,944\\
tak & 28,816 & 30,150 & 4,464 & 330,488\\
tensor & 66,592 & & & 371,808\\
tsp & 40,888 & & 10,676 & 391,952\\
vliw & 725,728 & 2,515,806 & 59,922 & 707,744\\
wc & 44,656 & 505,570 & 10,315 & 314,400\\
zern & 33,552 & & & 400,176\\
\end{tabular}
\end{center}
